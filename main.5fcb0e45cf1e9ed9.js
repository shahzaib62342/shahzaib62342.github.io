var g1=Object.defineProperty,m1=Object.defineProperties,y1=Object.getOwnPropertyDescriptors,gM=Object.getOwnPropertySymbols,_1=Object.prototype.hasOwnProperty,v1=Object.prototype.propertyIsEnumerable,mM=($t,ze,$)=>ze in $t?g1($t,ze,{enumerable:!0,configurable:!0,writable:!0,value:$}):$t[ze]=$,yM=($t,ze)=>{for(var $ in ze||(ze={}))_1.call(ze,$)&&mM($t,$,ze[$]);if(gM)for(var $ of gM(ze))v1.call(ze,$)&&mM($t,$,ze[$]);return $t},_M=($t,ze)=>m1($t,y1(ze));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{2011:($t,ze,$)=>{"use strict";$.d(ze,{Dh:()=>oe,GT:()=>ae,cc:()=>Re,hO:()=>ge,on:()=>te,pX:()=>Te,xv:()=>ye});var u=$(5e3),W=$(127),j=$(6351);$t=$.hmd($t);const Ae=["ngOnDestroy"],Te=(_e,Qe,Ke,ut={})=>new Proxy(_e,{get:(ot,Ct)=>Ke.runOutsideAngular(()=>{var ke;if(_e[Ct])return!(null===(ke=null==ut?void 0:ut.spy)||void 0===ke)&&ke.get&&ut.spy.get(Ct,_e[Ct]),_e[Ct];if(Ae.indexOf(Ct)>-1)return()=>{};const et=Qe.toPromise().then(fe=>{const je=fe&&fe[Ct];return"function"==typeof je?je.bind(fe):je&&je.then?je.then(de=>Ke.run(()=>de)):Ke.run(()=>je)});return new Proxy(()=>{},{get:(fe,je)=>et[je],apply:(fe,je,de)=>et.then(ie=>{var ve;const be=ie&&ie(...de);return!(null===(ve=null==ut?void 0:ut.spy)||void 0===ve)&&ve.apply&&ut.spy.apply(Ct,de,be),be})})})}),ae=(_e,Qe)=>{Qe.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(ut=>{Object.defineProperty(_e.prototype,ut,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,ut))})})};class he{constructor(Qe){return Qe}}const oe=new u.OlP("angularfire2.app.options"),ye=new u.OlP("angularfire2.app.name");function te(_e,Qe,Ke){const ot="object"==typeof Ke&&Ke||{};ot.name=ot.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const ke=W.Z.apps.filter(et=>et&&et.name===ot.name)[0]||Qe.runOutsideAngular(()=>W.Z.initializeApp(_e,ot));try{JSON.stringify(_e)!==JSON.stringify(ke.options)&&se("error",`${ke.name} Firebase App already initialized with different options${$t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(et){}return new he(ke)}const se=(_e,...Qe)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[_e](...Qe)},X={provide:he,useFactory:te,deps:[oe,u.R0b,[new u.FiY,ye]]};let ge=(()=>{class _e{constructor(Ke){W.Z.registerVersion("angularfire",j.q4.full,"core"),W.Z.registerVersion("angularfire",j.q4.full,"app-compat"),W.Z.registerVersion("angular",u.q4F.full,Ke.toString())}static initializeApp(Ke,ut){return{ngModule:_e,providers:[{provide:oe,useValue:Ke},{provide:ye,useValue:ut}]}}}return _e.\u0275fac=function(Ke){return new(Ke||_e)(u.LFG(u.Lbi))},_e.\u0275mod=u.oAB({type:_e}),_e.\u0275inj=u.cJS({providers:[X]}),_e})();function Re(_e,Qe,Ke,ut,ot){const[,Ct,ke]=globalThis.\u0275AngularfireInstanceCache.find(et=>et[0]===_e)||[];if(Ct)return function $e(_e,Qe){try{return _e.toString()===Qe.toString()}catch(Ke){return _e===Qe}}(ot,ke)||(Ie("error",`${Qe} was already initialized on the ${Ke} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:ot,was:ke})),Ct;{const et=ut();return globalThis.\u0275AngularfireInstanceCache.push([_e,et,ot]),et}}const Le=!!$t.hot,Ie=(_e,...Qe)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[_e](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:($t,ze,$)=>{"use strict";$.d(ze,{q4:()=>ed,iC:()=>Z,fc:()=>x,HU:()=>ka,vb:()=>gc,JM:()=>pc});var u=$(5e3),W=$(5867),j=$(5861),Ae=$(9681),Te=$(2090),ae=$(4859),he=$(1877),oe=$(8766);const ye="@firebase/installations",te="0.5.15",X=`w:${te}`,ge="FIS_v2",Qe=new Te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(A){return A instanceof Te.ZR&&A.code.includes("request-failed")}function ut({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function ot(A){return{token:A.token,requestStatus:2,expiresIn:ie(A.expiresIn),creationTime:Date.now()}}function Ct(A,L){return ke.apply(this,arguments)}function ke(){return(ke=(0,j.Z)(function*(A,L){const le=(yield L.json()).error;return Qe.create("request-failed",{requestName:A,serverCode:le.code,serverMessage:le.message,serverStatus:le.status})})).apply(this,arguments)}function et({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function fe(A,{refreshToken:L}){const q=et(A);return q.append("Authorization",function ve(A){return`${ge} ${A}`}(L)),q}function je(A){return de.apply(this,arguments)}function de(){return(de=(0,j.Z)(function*(A){const L=yield A();return L.status>=500&&L.status<600?A():L})).apply(this,arguments)}function ie(A){return Number(A.replace("s","000"))}function be(A,L){return tt.apply(this,arguments)}function tt(){return(tt=(0,j.Z)(function*({appConfig:A,heartbeatServiceProvider:L},{fid:q}){const le=ut(A),Be=et(A),ct=L.getImmediate({optional:!0});if(ct){const Hn=yield ct.getHeartbeatsHeader();Hn&&Be.append("x-firebase-client",Hn)}const Gt={method:"POST",headers:Be,body:JSON.stringify({fid:q,authVersion:ge,appId:A.appId,sdkVersion:X})},vn=yield je(()=>fetch(le,Gt));if(vn.ok){const Hn=yield vn.json();return{fid:Hn.fid||q,registrationStatus:2,refreshToken:Hn.refreshToken,authToken:ot(Hn.authToken)}}throw yield Ct("Create Installation",vn)})).apply(this,arguments)}function wt(A){return new Promise(L=>{setTimeout(L,A)})}const ht=/^[cdef][\w-]{21}$/;function Ne(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const q=function Ze(A){return function kt(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return ht.test(q)?q:""}catch(A){return""}}function nt(A){return`${A.appName}!${A.appId}`}const it=new Map;function Tt(A,L){const q=nt(A);Ot(q,L),function An(A,L){const q=function tr(){return!On&&"BroadcastChannel"in self&&(On=new BroadcastChannel("[Firebase] FID Change"),On.onmessage=A=>{Ot(A.data.key,A.data.fid)}),On}();q&&q.postMessage({key:A,fid:L}),function Mn(){0===it.size&&On&&(On.close(),On=null)}()}(q,L)}function Ot(A,L){const q=it.get(A);if(q)for(const le of q)le(L)}let On=null;const Fn="firebase-installations-store";let re=null;function Qn(){return re||(re=(0,oe.X3)("firebase-installations-database",1,{upgrade:(A,L)=>{0===L&&A.createObjectStore(Fn)}})),re}function Nt(A,L){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,j.Z)(function*(A,L){const q=nt(A),Be=(yield Qn()).transaction(Fn,"readwrite"),ct=Be.objectStore(Fn),Rt=yield ct.get(q);return yield ct.put(L,q),yield Be.done,(!Rt||Rt.fid!==L.fid)&&Tt(A,L.fid),L})).apply(this,arguments)}function Ur(A){return Un.apply(this,arguments)}function Un(){return(Un=(0,j.Z)(function*(A){const L=nt(A),le=(yield Qn()).transaction(Fn,"readwrite");yield le.objectStore(Fn).delete(L),yield le.done})).apply(this,arguments)}function kn(A,L){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,j.Z)(function*(A,L){const q=nt(A),Be=(yield Qn()).transaction(Fn,"readwrite"),ct=Be.objectStore(Fn),Rt=yield ct.get(q),Gt=L(Rt);return void 0===Gt?yield ct.delete(q):yield ct.put(Gt,q),yield Be.done,Gt&&(!Rt||Rt.fid!==Gt.fid)&&Tt(A,Gt.fid),Gt})).apply(this,arguments)}function Qt(A){return or.apply(this,arguments)}function or(){return(or=(0,j.Z)(function*(A){let L;const q=yield kn(A.appConfig,le=>{const Be=un(le),ct=nn(A,Be);return L=ct.registrationPromise,ct.installationEntry});return""===q.fid?{installationEntry:yield L}:{installationEntry:q,registrationPromise:L}})).apply(this,arguments)}function un(A){return rn(A||{fid:Ne(),registrationStatus:0})}function nn(A,L){if(0===L.registrationStatus){if(!navigator.onLine)return{installationEntry:L,registrationPromise:Promise.reject(Qe.create("app-offline"))};const q={fid:L.fid,registrationStatus:1,registrationTime:Date.now()},le=function yt(A,L){return Xn.apply(this,arguments)}(A,q);return{installationEntry:q,registrationPromise:le}}return 1===L.registrationStatus?{installationEntry:L,registrationPromise:Jn(A)}:{installationEntry:L}}function Xn(){return(Xn=(0,j.Z)(function*(A,L){try{const q=yield be(A,L);return Nt(A.appConfig,q)}catch(q){throw Ke(q)&&409===q.customData.serverCode?yield Ur(A.appConfig):yield Nt(A.appConfig,{fid:L.fid,registrationStatus:0}),q}})).apply(this,arguments)}function Jn(A){return nr.apply(this,arguments)}function nr(){return(nr=(0,j.Z)(function*(A){let L=yield _r(A.appConfig);for(;1===L.registrationStatus;)yield wt(100),L=yield _r(A.appConfig);if(0===L.registrationStatus){const{installationEntry:q,registrationPromise:le}=yield Qt(A);return le||q}return L})).apply(this,arguments)}function _r(A){return kn(A,L=>{if(!L)throw Qe.create("installation-not-found");return rn(L)})}function rn(A){return function Qr(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function _n(A,L){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,j.Z)(function*({appConfig:A,heartbeatServiceProvider:L},q){const le=Vn(A,q),Be=fe(A,q),ct=L.getImmediate({optional:!0});if(ct){const Hn=yield ct.getHeartbeatsHeader();Hn&&Be.append("x-firebase-client",Hn)}const Gt={method:"POST",headers:Be,body:JSON.stringify({installation:{sdkVersion:X,appId:A.appId}})},vn=yield je(()=>fetch(le,Gt));if(vn.ok)return ot(yield vn.json());throw yield Ct("Generate Auth Token",vn)})).apply(this,arguments)}function Vn(A,{fid:L}){return`${ut(A)}/${L}/authTokens:generate`}function Ar(A){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,j.Z)(function*(A,L=!1){let q;const le=yield kn(A.appConfig,ct=>{if(!dn(ct))throw Qe.create("not-registered");const Rt=ct.authToken;if(!L&&Me(Rt))return ct;if(1===Rt.requestStatus)return q=Jt(A,L),ct;{if(!navigator.onLine)throw Qe.create("app-offline");const Gt=Oe(ct);return q=gn(A,Gt),Gt}});return q?yield q:le.authToken})).apply(this,arguments)}function Jt(A,L){return St.apply(this,arguments)}function St(){return(St=(0,j.Z)(function*(A,L){let q=yield Zt(A.appConfig);for(;1===q.authToken.requestStatus;)yield wt(100),q=yield Zt(A.appConfig);const le=q.authToken;return 0===le.requestStatus?Ar(A,L):le})).apply(this,arguments)}function Zt(A){return kn(A,L=>{if(!dn(L))throw Qe.create("not-registered");return function rt(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(L.authToken)?Object.assign(Object.assign({},L),{authToken:{requestStatus:0}}):L})}function gn(A,L){return cn.apply(this,arguments)}function cn(){return(cn=(0,j.Z)(function*(A,L){try{const q=yield _n(A,L),le=Object.assign(Object.assign({},L),{authToken:q});return yield Nt(A.appConfig,le),q}catch(q){if(!Ke(q)||401!==q.customData.serverCode&&404!==q.customData.serverCode){const le=Object.assign(Object.assign({},L),{authToken:{requestStatus:0}});yield Nt(A.appConfig,le)}else yield Ur(A.appConfig);throw q}})).apply(this,arguments)}function dn(A){return void 0!==A&&2===A.registrationStatus}function Me(A){return 2===A.requestStatus&&!function Ce(A){const L=Date.now();return L<A.creationTime||A.creationTime+A.expiresIn<L+36e5}(A)}function Oe(A){const L={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:L})}function zt(){return(zt=(0,j.Z)(function*(A){const L=A,{installationEntry:q,registrationPromise:le}=yield Qt(L);return le?le.catch(console.error):Ar(L).catch(console.error),q.fid})).apply(this,arguments)}function jn(){return(jn=(0,j.Z)(function*(A,L=!1){const q=A;return yield Kn(q),(yield Ar(q,L)).token})).apply(this,arguments)}function Kn(A){return dr.apply(this,arguments)}function dr(){return(dr=(0,j.Z)(function*(A){const{registrationPromise:L}=yield Qt(A);L&&(yield L)})).apply(this,arguments)}function on(A){return Qe.create("missing-app-config-values",{valueName:A})}const Nn="installations",vr=A=>{const L=A.getProvider("app").getImmediate(),q=function Bt(A){if(!A||!A.options)throw on("App Configuration");if(!A.name)throw on("App Name");const L=["projectId","apiKey","appId"];for(const q of L)if(!A.options[q])throw on(q);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(L);return{app:L,appConfig:q,heartbeatServiceProvider:(0,Ae._getProvider)(L,"heartbeat"),_delete:()=>Promise.resolve()}},Or=A=>{const L=A.getProvider("app").getImmediate(),q=(0,Ae._getProvider)(L,Nn).getImmediate();return{getId:()=>function Ge(A){return zt.apply(this,arguments)}(q),getToken:Be=>function en(A){return jn.apply(this,arguments)}(q,Be)}};(function Zr(){(0,Ae._registerComponent)(new ae.wA(Nn,vr,"PUBLIC")),(0,Ae._registerComponent)(new ae.wA("installations-internal",Or,"PRIVATE"))})(),(0,Ae.registerVersion)(ye,te),(0,Ae.registerVersion)(ye,te,"esm2017");const Wn="@firebase/remote-config",xr=new Te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ln{constructor(L,q,le,Be){this.client=L,this.storage=q,this.storageCache=le,this.logger=Be}isCachedDataFresh(L,q){if(!q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const le=Date.now()-q,Be=le<=L;return this.logger.debug(`Config fetch cache check. Cache age millis: ${le}. Cache max age millis (minimumFetchIntervalMillis setting): ${L}. Is cache hit: ${Be}.`),Be}fetch(L){var q=this;return(0,j.Z)(function*(){const[le,Be]=yield Promise.all([q.storage.getLastSuccessfulFetchTimestampMillis(),q.storage.getLastSuccessfulFetchResponse()]);if(Be&&q.isCachedDataFresh(L.cacheMaxAgeMillis,le))return Be;L.eTag=Be&&Be.eTag;const ct=yield q.client.fetch(L),Rt=[q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ct.status&&Rt.push(q.storage.setLastSuccessfulFetchResponse(ct)),yield Promise.all(Rt),ct})()}}function Cn(A=navigator){return A.languages&&A.languages[0]||A.language}class Er{constructor(L,q,le,Be,ct,Rt){this.firebaseInstallations=L,this.sdkVersion=q,this.namespace=le,this.projectId=Be,this.apiKey=ct,this.appId=Rt}fetch(L){var q=this;return(0,j.Z)(function*(){var le,Be,ct;const[Rt,Gt]=yield Promise.all([q.firebaseInstallations.getId(),q.firebaseInstallations.getToken()]),Hn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${q.projectId}/namespaces/${q.namespace}:fetch?key=${q.apiKey}`,ar={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":L.eTag||"*"},hn={sdk_version:q.sdkVersion,app_instance_id:Rt,app_instance_id_token:Gt,app_id:q.appId,language_code:Cn()},yi={method:"POST",headers:ar,body:JSON.stringify(hn)},ls=fetch(Hn,yi),Xo=new Promise((js,pn)=>{L.signal.addEventListener(()=>{const Pa=new Error("The operation was aborted.");Pa.name="AbortError",pn(Pa)})});let Dl;try{yield Promise.race([ls,Xo]),Dl=yield ls}catch(js){let pn="fetch-client-network";throw"AbortError"===(null===(le=js)||void 0===le?void 0:le.name)&&(pn="fetch-timeout"),xr.create(pn,{originalErrorMessage:null===(Be=js)||void 0===Be?void 0:Be.message})}let Uo=Dl.status;const Ja=Dl.headers.get("ETag")||void 0;let Su,Tl;if(200===Dl.status){let js;try{js=yield Dl.json()}catch(pn){throw xr.create("fetch-client-parse",{originalErrorMessage:null===(ct=pn)||void 0===ct?void 0:ct.message})}Su=js.entries,Tl=js.state}if("INSTANCE_STATE_UNSPECIFIED"===Tl?Uo=500:"NO_CHANGE"===Tl?Uo=304:("NO_TEMPLATE"===Tl||"EMPTY_CONFIG"===Tl)&&(Su={}),304!==Uo&&200!==Uo)throw xr.create("fetch-status",{httpStatus:Uo});return{status:Uo,eTag:Ja,config:Su}})()}}class qi{constructor(L,q){this.client=L,this.storage=q}fetch(L){var q=this;return(0,j.Z)(function*(){const le=(yield q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return q.attemptFetch(L,le)})()}attemptFetch(L,{throttleEndTimeMillis:q,backoffCount:le}){var Be=this;return(0,j.Z)(function*(){yield function ur(A,L){return new Promise((q,le)=>{const Be=Math.max(L-Date.now(),0),ct=setTimeout(q,Be);A.addEventListener(()=>{clearTimeout(ct),le(xr.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}(L.signal,q);try{const ct=yield Be.client.fetch(L);return yield Be.storage.deleteThrottleMetadata(),ct}catch(ct){if(!function hi(A){if(!(A instanceof Te.ZR&&A.customData))return!1;const L=Number(A.customData.httpStatus);return 429===L||500===L||503===L||504===L}(ct))throw ct;const Rt={throttleEndTimeMillis:Date.now()+(0,Te.$s)(le),backoffCount:le+1};return yield Be.storage.setThrottleMetadata(Rt),Be.attemptFetch(L,Rt)}})()}}class _s{constructor(L,q,le,Be,ct){this.app=L,this._client=q,this._storageCache=le,this._storage=Be,this._logger=ct,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ki(A,L){var q;const le=A.target.error||void 0;return xr.create(L,{originalErrorMessage:le&&(null===(q=le)||void 0===q?void 0:q.message)})}const Ui="app_namespace_store";class la{constructor(L,q,le,Be=function Wa(){return new Promise((A,L)=>{var q;try{const le=indexedDB.open("firebase_remote_config",1);le.onerror=Be=>{L(Ki(Be,"storage-open"))},le.onsuccess=Be=>{A(Be.target.result)},le.onupgradeneeded=Be=>{0===Be.oldVersion&&Be.target.result.createObjectStore(Ui,{keyPath:"compositeKey"})}}catch(le){L(xr.create("storage-open",{originalErrorMessage:null===(q=le)||void 0===q?void 0:q.message}))}})}()){this.appId=L,this.appName=q,this.namespace=le,this.openDbPromise=Be}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(L){return this.set("last_fetch_status",L)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(L){return this.set("last_successful_fetch_timestamp_millis",L)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(L){return this.set("last_successful_fetch_response",L)}getActiveConfig(){return this.get("active_config")}setActiveConfig(L){return this.set("active_config",L)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(L){return this.set("active_config_etag",L)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(L){return this.set("throttle_metadata",L)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(L){var q=this;return(0,j.Z)(function*(){const le=yield q.openDbPromise;return new Promise((Be,ct)=>{var Rt;const vn=le.transaction([Ui],"readonly").objectStore(Ui),Hn=q.createCompositeKey(L);try{const ar=vn.get(Hn);ar.onerror=hn=>{ct(Ki(hn,"storage-get"))},ar.onsuccess=hn=>{const yi=hn.target.result;Be(yi?yi.value:void 0)}}catch(ar){ct(xr.create("storage-get",{originalErrorMessage:null===(Rt=ar)||void 0===Rt?void 0:Rt.message}))}})})()}set(L,q){var le=this;return(0,j.Z)(function*(){const Be=yield le.openDbPromise;return new Promise((ct,Rt)=>{var Gt;const Hn=Be.transaction([Ui],"readwrite").objectStore(Ui),ar=le.createCompositeKey(L);try{const hn=Hn.put({compositeKey:ar,value:q});hn.onerror=yi=>{Rt(Ki(yi,"storage-set"))},hn.onsuccess=()=>{ct()}}catch(hn){Rt(xr.create("storage-set",{originalErrorMessage:null===(Gt=hn)||void 0===Gt?void 0:Gt.message}))}})})()}delete(L){var q=this;return(0,j.Z)(function*(){const le=yield q.openDbPromise;return new Promise((Be,ct)=>{var Rt;const vn=le.transaction([Ui],"readwrite").objectStore(Ui),Hn=q.createCompositeKey(L);try{const ar=vn.delete(Hn);ar.onerror=hn=>{ct(Ki(hn,"storage-delete"))},ar.onsuccess=()=>{Be()}}catch(ar){ct(xr.create("storage-delete",{originalErrorMessage:null===(Rt=ar)||void 0===Rt?void 0:Rt.message}))}})})()}createCompositeKey(L){return[this.appId,this.appName,this.namespace,L].join()}}class lo{constructor(L){this.storage=L}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var L=this;return(0,j.Z)(function*(){const q=L.storage.getLastFetchStatus(),le=L.storage.getLastSuccessfulFetchTimestampMillis(),Be=L.storage.getActiveConfig(),ct=yield q;ct&&(L.lastFetchStatus=ct);const Rt=yield le;Rt&&(L.lastSuccessfulFetchTimestampMillis=Rt);const Gt=yield Be;Gt&&(L.activeConfig=Gt)})()}setLastFetchStatus(L){return this.lastFetchStatus=L,this.storage.setLastFetchStatus(L)}setLastSuccessfulFetchTimestampMillis(L){return this.lastSuccessfulFetchTimestampMillis=L,this.storage.setLastSuccessfulFetchTimestampMillis(L)}setActiveConfig(L){return this.activeConfig=L,this.storage.setActiveConfig(L)}}function wo(){return ca.apply(this,arguments)}function ca(){return(ca=(0,j.Z)(function*(){if(!(0,Te.hl)())return!1;try{return yield(0,Te.eu)()}catch(A){return!1}})).apply(this,arguments)}!function Mi(){(0,Ae._registerComponent)(new ae.wA("remote-config",function A(L,{instanceIdentifier:q}){const le=L.getProvider("app").getImmediate(),Be=L.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw xr.create("registration-window");if(!(0,Te.hl)())throw xr.create("indexed-db-unavailable");const{projectId:ct,apiKey:Rt,appId:Gt}=le.options;if(!ct)throw xr.create("registration-project-id");if(!Rt)throw xr.create("registration-api-key");if(!Gt)throw xr.create("registration-app-id");const vn=new la(Gt,le.name,q=q||"firebase"),Hn=new lo(vn),ar=new he.Yd(Wn);ar.logLevel=he.in.ERROR;const hn=new Er(Be,Ae.SDK_VERSION,q,ct,Rt,Gt),yi=new qi(hn,vn),ls=new ln(yi,vn,Hn,ar),Xo=new _s(le,ls,Hn,vn,ar);return function me(A){const L=(0,Te.m9)(A);L._initializePromise||(L._initializePromise=L._storageCache.loadFromStorage().then(()=>{L._isInitializationComplete=!0}))}(Xo),Xo},"PUBLIC").setMultipleInstances(!0)),(0,Ae.registerVersion)(Wn,"0.3.14"),(0,Ae.registerVersion)(Wn,"0.3.14","esm2017")}();const Zi="/firebase-messaging-sw.js",vs="/firebase-cloud-messaging-push-scope",xi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Eo="google.c.a.c_id",ks="google.c.a.c_l",Io="google.c.a.ts",bs="google.c.a.e";var ji=(()=>{return(A=ji||(ji={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",ji;var A})();function Ri(A){const L=new Uint8Array(A);return btoa(String.fromCharCode(...L)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ai(A){const q=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),le=atob(q),Be=new Uint8Array(le.length);for(let ct=0;ct<le.length;++ct)Be[ct]=le.charCodeAt(ct);return Be}const fi="fcm_token_details_db",pi="fcm_token_object_Store";function Oi(A){return Es.apply(this,arguments)}function Es(){return Es=(0,j.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ct=>ct.name).includes(fi))return null;let L=null;return(yield(0,oe.X3)(fi,5,{upgrade:(le=(0,j.Z)(function*(Be,ct,Rt,Gt){var vn;if(ct<2||!Be.objectStoreNames.contains(pi))return;const Hn=Gt.objectStore(pi),ar=yield Hn.index("fcmSenderId").get(A);if(yield Hn.clear(),ar)if(2===ct){const hn=ar;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;L={token:hn.fcmToken,createTime:null!==(vn=hn.createTime)&&void 0!==vn?vn:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:Ri(hn.vapidKey)}}}else if(3===ct){const hn=ar;L={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Ri(hn.auth),p256dh:Ri(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Ri(hn.vapidKey)}}}else if(4===ct){const hn=ar;L={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Ri(hn.auth),p256dh:Ri(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Ri(hn.vapidKey)}}}}),function(ct,Rt,Gt,vn){return le.apply(this,arguments)})})).close(),yield(0,oe.Lj)(fi),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Mr(L)?L:null;var le}),Es.apply(this,arguments)}function Mr(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:L}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof L.auth&&L.auth.length>0&&"string"==typeof L.p256dh&&L.p256dh.length>0&&"string"==typeof L.endpoint&&L.endpoint.length>0&&"string"==typeof L.swScope&&L.swScope.length>0&&"string"==typeof L.vapidKey&&L.vapidKey.length>0}const Yr="firebase-messaging-store";let Ei=null;function ns(){return Ei||(Ei=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(A,L)=>{0===L&&A.createObjectStore(Yr)}})),Ei}function Cs(A){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,j.Z)(function*(A){const L=Ii(A),le=yield(yield ns()).transaction(Yr).objectStore(Yr).get(L);if(le)return le;{const Be=yield Oi(A.appConfig.senderId);if(Be)return yield ir(A,Be),Be}})).apply(this,arguments)}function ir(A,L){return zs.apply(this,arguments)}function zs(){return(zs=(0,j.Z)(function*(A,L){const q=Ii(A),Be=(yield ns()).transaction(Yr,"readwrite");return yield Be.objectStore(Yr).put(L,q),yield Be.done,L})).apply(this,arguments)}function rs(A){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,j.Z)(function*(A){const L=Ii(A),le=(yield ns()).transaction(Yr,"readwrite");yield le.objectStore(Yr).delete(L),yield le.done})).apply(this,arguments)}function Ii({appConfig:A}){return A.appId}const Dr=new Te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dn(A,L){return uo.apply(this,arguments)}function uo(){return(uo=(0,j.Z)(function*(A,L){var q;const le=yield Da(A),Be=Pt(L),ct={method:"POST",headers:le,body:JSON.stringify(Be)};let Rt;try{Rt=yield(yield fetch(Ys(A.appConfig),ct)).json()}catch(Gt){throw Dr.create("token-subscribe-failed",{errorInfo:null===(q=Gt)||void 0===q?void 0:q.toString()})}if(Rt.error)throw Dr.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw Dr.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function Vr(A,L){return co.apply(this,arguments)}function co(){return(co=(0,j.Z)(function*(A,L){var q;const le=yield Da(A),Be=Pt(L.subscriptionOptions),ct={method:"PATCH",headers:le,body:JSON.stringify(Be)};let Rt;try{Rt=yield(yield fetch(`${Ys(A.appConfig)}/${L.token}`,ct)).json()}catch(Gt){throw Dr.create("token-update-failed",{errorInfo:null===(q=Gt)||void 0===q?void 0:q.toString()})}if(Rt.error)throw Dr.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw Dr.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function qs(A,L){return da.apply(this,arguments)}function da(){return(da=(0,j.Z)(function*(A,L){var q;const Be={method:"DELETE",headers:yield Da(A)};try{const Rt=yield(yield fetch(`${Ys(A.appConfig)}/${L}`,Be)).json();if(Rt.error)throw Dr.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(ct){throw Dr.create("token-unsubscribe-failed",{errorInfo:null===(q=ct)||void 0===q?void 0:q.toString()})}})).apply(this,arguments)}function Ys({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function Da(A){return To.apply(this,arguments)}function To(){return(To=(0,j.Z)(function*({appConfig:A,installations:L}){const q=yield L.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${q}`})})).apply(this,arguments)}function Pt({p256dh:A,auth:L,endpoint:q,vapidKey:le}){const Be={web:{endpoint:q,auth:L,p256dh:A}};return le!==xi&&(Be.web.applicationPubKey=le),Be}const qn=6048e5;function zo(A){return ha.apply(this,arguments)}function ha(){return(ha=(0,j.Z)(function*(A){const L=yield P(A.swRegistration,A.vapidKey),q={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:L.endpoint,auth:Ri(L.getKey("auth")),p256dh:Ri(L.getKey("p256dh"))},le=yield Cs(A.firebaseDependencies);if(le){if(p(le.subscriptionOptions,q))return Date.now()>=le.createTime+qn?gi(A,{token:le.token,createTime:Date.now(),subscriptionOptions:q}):le.token;try{yield qs(A.firebaseDependencies,le.token)}catch(Be){console.warn(Be)}return Ns(A.firebaseDependencies,q)}return Ns(A.firebaseDependencies,q)})).apply(this,arguments)}function ei(A){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,j.Z)(function*(A){const L=yield Cs(A.firebaseDependencies);L&&(yield qs(A.firebaseDependencies,L.token),yield rs(A.firebaseDependencies));const q=yield A.swRegistration.pushManager.getSubscription();return!q||q.unsubscribe()})).apply(this,arguments)}function gi(A,L){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,j.Z)(function*(A,L){try{const q=yield Vr(A.firebaseDependencies,L),le=Object.assign(Object.assign({},L),{token:q,createTime:Date.now()});return yield ir(A.firebaseDependencies,le),q}catch(q){throw yield ei(A),q}})).apply(this,arguments)}function Ns(A,L){return V.apply(this,arguments)}function V(){return(V=(0,j.Z)(function*(A,L){const le={token:yield Dn(A,L),createTime:Date.now(),subscriptionOptions:L};return yield ir(A,le),le.token})).apply(this,arguments)}function P(A,L){return R.apply(this,arguments)}function R(){return(R=(0,j.Z)(function*(A,L){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ai(L)})})).apply(this,arguments)}function p(A,L){return L.vapidKey===A.vapidKey&&L.endpoint===A.endpoint&&L.auth===A.auth&&L.p256dh===A.p256dh}function M(A){const L={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function _(A,L){if(!L.notification)return;A.notification={};const q=L.notification.title;q&&(A.notification.title=q);const le=L.notification.body;le&&(A.notification.body=le);const Be=L.notification.image;Be&&(A.notification.image=Be)}(L,A),function F(A,L){!L.data||(A.data=L.data)}(L,A),function ee(A,L){var q,le,Be,ct,Rt;if(!(L.fcmOptions||null!==(q=L.notification)&&void 0!==q&&q.click_action))return;A.fcmOptions={};const Gt=null!==(Be=null===(le=L.fcmOptions)||void 0===le?void 0:le.link)&&void 0!==Be?Be:null===(ct=L.notification)||void 0===ct?void 0:ct.click_action;Gt&&(A.fcmOptions.link=Gt);const vn=null===(Rt=L.fcmOptions)||void 0===Rt?void 0:Rt.analytics_label;vn&&(A.fcmOptions.analyticsLabel=vn)}(L,A),L}function lt(A){return"object"==typeof A&&!!A&&Eo in A}function Ft(A,L){const q=[];for(let le=0;le<A.length;le++)q.push(A.charAt(le)),le<L.length&&q.push(L.charAt(le));return q.join("")}function Tn(A){return Dr.create("missing-app-config-values",{valueName:A})}Ft("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ft("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mr{constructor(L,q,le){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Be=function Xt(A){if(!A||!A.options)throw Tn("App Configuration Object");if(!A.name)throw Tn("App Name");const L=["projectId","apiKey","appId","messagingSenderId"],{options:q}=A;for(const le of L)if(!q[le])throw Tn(le);return{appName:A.name,projectId:q.projectId,apiKey:q.apiKey,appId:q.appId,senderId:q.messagingSenderId}}(L);this.firebaseDependencies={app:L,appConfig:Be,installations:q,analyticsProvider:le}}_delete(){return Promise.resolve()}}function Kr(A){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,j.Z)(function*(A){var L;try{A.swRegistration=yield navigator.serviceWorker.register(Zi,{scope:vs}),A.swRegistration.update().catch(()=>{})}catch(q){throw Dr.create("failed-service-worker-registration",{browserErrorMessage:null===(L=q)||void 0===L?void 0:L.message})}})).apply(this,arguments)}function li(A,L){return ti.apply(this,arguments)}function ti(){return(ti=(0,j.Z)(function*(A,L){if(!L&&!A.swRegistration&&(yield Kr(A)),L||!A.swRegistration){if(!(L instanceof ServiceWorkerRegistration))throw Dr.create("invalid-sw-registration");A.swRegistration=L}})).apply(this,arguments)}function ki(A,L){return is.apply(this,arguments)}function is(){return(is=(0,j.Z)(function*(A,L){L?A.vapidKey=L:A.vapidKey||(A.vapidKey=xi)})).apply(this,arguments)}function fa(){return(fa=(0,j.Z)(function*(A,L){if(!navigator)throw Dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dr.create("permission-blocked");return yield ki(A,null==L?void 0:L.vapidKey),yield li(A,null==L?void 0:L.serviceWorkerRegistration),zo(A)})).apply(this,arguments)}function So(A,L,q){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,j.Z)(function*(A,L,q){const le=dl(L);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(le,{message_id:q[Eo],message_name:q[ks],message_time:q[Io],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function dl(A){switch(A){case ji.NOTIFICATION_CLICKED:return"notification_open";case ji.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function z(){return(z=(0,j.Z)(function*(A,L){const q=L.data;if(!q.isFirebaseMessaging)return;A.onMessageHandler&&q.messageType===ji.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(M(q)):A.onMessageHandler.next(M(q)));const le=q.data;lt(le)&&"1"===le[bs]&&(yield So(A,q.messageType,le))})).apply(this,arguments)}const N="@firebase/messaging",Q="0.9.19",De=A=>{const L=new mr(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",q=>function k(A,L){return z.apply(this,arguments)}(L,q)),L},gt=A=>{const L=A.getProvider("messaging").getImmediate();return{getToken:le=>function Fs(A,L){return fa.apply(this,arguments)}(L,le)}};function Kt(){return hr.apply(this,arguments)}function hr(){return(hr=(0,j.Z)(function*(){try{yield(0,Te.eu)()}catch(A){return!1}return"undefined"!=typeof window&&(0,Te.hl)()&&(0,Te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function It(){(0,Ae._registerComponent)(new ae.wA("messaging",De,"PUBLIC")),(0,Ae._registerComponent)(new ae.wA("messaging-internal",gt,"PRIVATE")),(0,Ae.registerVersion)(N,Q),(0,Ae.registerVersion)(N,Q,"esm2017")}();const Ci="analytics",Ls="firebase_id",Bs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ta="https://www.googletagmanager.com/gtag/js",wr=new he.Yd("@firebase/analytics");function Ao(A){return Promise.all(A.map(L=>L.catch(q=>q)))}function ic(A,L){const q=document.createElement("script");q.src=`${Ta}?l=${A}&id=${L}`,q.async=!0,document.head.appendChild(q)}function sc(A,L,q,le,Be,ct){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,j.Z)(function*(A,L,q,le,Be,ct){const Rt=le[Be];try{if(Rt)yield L[Rt];else{const vn=(yield Ao(q)).find(Hn=>Hn.measurementId===Be);vn&&(yield L[vn.appId])}}catch(Gt){wr.error(Gt)}A("config",Be,ct)})).apply(this,arguments)}function fl(A,L,q,le,Be){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,j.Z)(function*(A,L,q,le,Be){try{let ct=[];if(Be&&Be.send_to){let Rt=Be.send_to;Array.isArray(Rt)||(Rt=[Rt]);const Gt=yield Ao(q);for(const vn of Rt){const Hn=Gt.find(hn=>hn.measurementId===vn),ar=Hn&&L[Hn.appId];if(!ar){ct=[];break}ct.push(ar)}}0===ct.length&&(ct=Object.values(L)),yield Promise.all(ct),A("event",le,Be||{})}catch(ct){wr.error(ct)}})).apply(this,arguments)}function bu(A){const L=window.document.getElementsByTagName("script");for(const q of Object.values(L))if(q.src&&q.src.includes(Ta)&&q.src.includes(A))return q;return null}const Xi=new Te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),za=new class Qs{constructor(L={},q=1e3){this.throttleMetadata=L,this.intervalMillis=q}getThrottleMetadata(L){return this.throttleMetadata[L]}setThrottleMetadata(L,q){this.throttleMetadata[L]=q}deleteThrottleMetadata(L){delete this.throttleMetadata[L]}};function rh(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function po(A){return qo.apply(this,arguments)}function qo(){return(qo=(0,j.Z)(function*(A){var L;const{appId:q,apiKey:le}=A,Be={method:"GET",headers:rh(le)},ct=Bs.replace("{app-id}",q),Rt=yield fetch(ct,Be);if(200!==Rt.status&&304!==Rt.status){let Gt="";try{const vn=yield Rt.json();null!==(L=vn.error)&&void 0!==L&&L.message&&(Gt=vn.error.message)}catch(vn){}throw Xi.create("config-fetch-failed",{httpStatus:Rt.status,responseMessage:Gt})}return Rt.json()})).apply(this,arguments)}function Di(A){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,j.Z)(function*(A,L=za,q){const{appId:le,apiKey:Be,measurementId:ct}=A.options;if(!le)throw Xi.create("no-app-id");if(!Be){if(ct)return{measurementId:ct,appId:le};throw Xi.create("no-api-key")}const Rt=L.getThrottleMetadata(le)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Gt=new Wl;return setTimeout((0,j.Z)(function*(){Gt.abort()}),void 0!==q?q:6e4),qa({appId:le,apiKey:Be,measurementId:ct},Rt,Gt,L)})).apply(this,arguments)}function qa(A,L,q){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,j.Z)(function*(A,{throttleEndTimeMillis:L,backoffCount:q},le,Be=za){var ct,Rt;const{appId:Gt,measurementId:vn}=A;try{yield gl(le,L)}catch(Hn){if(vn)return wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vn} provided in the "measurementId" field in the local Firebase config. [${null===(ct=Hn)||void 0===ct?void 0:ct.message}]`),{appId:Gt,measurementId:vn};throw Hn}try{const Hn=yield po(A);return Be.deleteThrottleMetadata(Gt),Hn}catch(Hn){const ar=Hn;if(!wu(ar)){if(Be.deleteThrottleMetadata(Gt),vn)return wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vn} provided in the "measurementId" field in the local Firebase config. [${null==ar?void 0:ar.message}]`),{appId:Gt,measurementId:vn};throw Hn}const hn=503===Number(null===(Rt=null==ar?void 0:ar.customData)||void 0===Rt?void 0:Rt.httpStatus)?(0,Te.$s)(q,Be.intervalMillis,30):(0,Te.$s)(q,Be.intervalMillis),yi={throttleEndTimeMillis:Date.now()+hn,backoffCount:q+1};return Be.setThrottleMetadata(Gt,yi),wr.debug(`Calling attemptFetch again in ${hn} millis`),qa(A,yi,le,Be)}})).apply(this,arguments)}function gl(A,L){return new Promise((q,le)=>{const Be=Math.max(L-Date.now(),0),ct=setTimeout(q,Be);A.addEventListener(()=>{clearTimeout(ct),le(Xi.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}function wu(A){if(!(A instanceof Te.ZR&&A.customData))return!1;const L=Number(A.customData.httpStatus);return 429===L||500===L||503===L||504===L}class Wl{constructor(){this.listeners=[]}addEventListener(L){this.listeners.push(L)}abort(){this.listeners.forEach(L=>L())}}let ga,Ko;function xo(){return(xo=(0,j.Z)(function*(A,L,q,le,Be){if(Be&&Be.global)A("event",q,le);else{const ct=yield L;A("event",q,Object.assign(Object.assign({},le),{send_to:ct}))}})).apply(this,arguments)}function $s(A){Ko=A}function ml(A){ga=A}function zl(){return ql.apply(this,arguments)}function ql(){return(ql=(0,j.Z)(function*(){var A;if(!(0,Te.hl)())return wr.warn(Xi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Te.eu)()}catch(L){return wr.warn(Xi.create("indexeddb-unavailable",{errorInfo:null===(A=L)||void 0===A?void 0:A.toString()}).message),!1}return!0})).apply(this,arguments)}function Ma(){return(Ma=(0,j.Z)(function*(A,L,q,le,Be,ct,Rt){var Gt;const vn=Di(A);vn.then(ls=>{q[ls.measurementId]=ls.appId,A.options.measurementId&&ls.measurementId!==A.options.measurementId&&wr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${ls.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ls=>wr.error(ls)),L.push(vn);const Hn=zl().then(ls=>{if(ls)return le.getId()}),[ar,hn]=yield Promise.all([vn,Hn]);bu(ct)||ic(ct,ar.measurementId),Ko&&(Be("consent","default",Ko),$s(void 0)),Be("js",new Date);const yi=null!==(Gt=null==Rt?void 0:Rt.config)&&void 0!==Gt?Gt:{};return yi.origin="firebase",yi.update=!0,null!=hn&&(yi[Ls]=hn),Be("config",ar.measurementId,yi),ga&&(Be("set",ga),ml(void 0)),ar.measurementId})).apply(this,arguments)}class Iu{constructor(L){this.app=L}_delete(){return delete Us[this.app.options.appId],Promise.resolve()}}let Us={},Zo=[];const ya={};let ri,Qo,go="dataLayer",Ra=!1;function Xc(A,L,q){!function lc(){const A=[];if((0,Te.ru)()&&A.push("This is a browser extension environment."),(0,Te.zI)()||A.push("Cookies are not available."),A.length>0){const L=A.map((le,Be)=>`(${Be+1}) ${le}`).join(" "),q=Xi.create("invalid-analytics-context",{errorInfo:L});wr.warn(q.message)}}();const le=A.options.appId;if(!le)throw Xi.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Xi.create("no-api-key");wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Us[le])throw Xi.create("already-exists",{id:le});if(!Ra){!function hl(A){let L=[];Array.isArray(window[A])?L=window[A]:window[A]=L}(go);const{wrappedGtag:ct,gtagCore:Rt}=function pl(A,L,q,le,Be){let ct=function(...Rt){window[le].push(arguments)};return window[Be]&&"function"==typeof window[Be]&&(ct=window[Be]),window[Be]=function pa(A,L,q,le){function ct(){return(ct=(0,j.Z)(function*(Rt,Gt,vn){try{"event"===Rt?yield fl(A,L,q,Gt,vn):"config"===Rt?yield sc(A,L,q,le,Gt,vn):"consent"===Rt?A("consent","update",vn):A("set",Gt)}catch(Hn){wr.error(Hn)}})).apply(this,arguments)}return function Be(Rt,Gt,vn){return ct.apply(this,arguments)}}(ct,A,L,q),{gtagCore:ct,wrappedGtag:window[Be]}}(Us,Zo,ya,go,"gtag");Qo=ct,ri=Rt,Ra=!0}return Us[le]=function ss(A,L,q,le,Be,ct,Rt){return Ma.apply(this,arguments)}(A,Zo,ya,L,ri,go,q),new Iu(A)}function ih(){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,j.Z)(function*(){if((0,Te.ru)()||!(0,Te.zI)()||!(0,Te.hl)())return!1;try{return yield(0,Te.eu)()}catch(A){return!1}})).apply(this,arguments)}const Yl="@firebase/analytics";!function os(){(0,Ae._registerComponent)(new ae.wA(Ci,(L,{options:q})=>Xc(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),q),"PUBLIC")),(0,Ae._registerComponent)(new ae.wA("analytics-internal",function A(L){try{const q=L.getProvider(Ci).getImmediate();return{logEvent:(le,Be,ct)=>function yl(A,L,q,le){A=(0,Te.m9)(A),function ac(A,L,q,le,Be){return xo.apply(this,arguments)}(Qo,Us[A.app.options.appId],L,q,le).catch(Be=>wr.error(Be))}(q,le,Be,ct)}}catch(q){throw Xi.create("interop-component-reg-failed",{reason:q})}},"PRIVATE")),(0,Ae.registerVersion)(Yl,"0.8.3"),(0,Ae.registerVersion)(Yl,"0.8.3","esm2017")}();var Js=$(341),_l=$(353),Oa=$(2868),_a=$(2102),Tu=$(8915);const ed=new u.GfV("7.4.1"),vl="__angularfire_symbol__analyticsIsSupportedValue",bl="__angularfire_symbol__analyticsIsSupported",Ro="__angularfire_symbol__remoteConfigIsSupportedValue",wl="__angularfire_symbol__remoteConfigIsSupported",as="__angularfire_symbol__messagingIsSupportedValue",El="__angularfire_symbol__messagingIsSupported";function pc(A,L,q){if(L){if(1===L.length)return L[0];const ct=L.filter(Rt=>Rt.app===q);if(1===ct.length)return ct[0]}return q.container.getProvider(A).getImmediate({optional:!0})}globalThis[bl]||(globalThis[bl]=ih().then(A=>globalThis[vl]=A).catch(()=>globalThis[vl]=!1)),globalThis[El]||(globalThis[El]=Kt().then(A=>globalThis[as]=A).catch(()=>globalThis[as]=!1)),globalThis[wl]||(globalThis[wl]=wo().then(A=>globalThis[Ro]=A).catch(()=>globalThis[Ro]=!1));const gc=(A,L)=>{const q=L?[L]:(0,W.C6)(),le=[];return q.forEach(Be=>{Be.container.getProvider(A).instances.forEach(Rt=>{le.includes(Rt)||le.push(Rt)})}),le};function Il(){}class Cl{constructor(L,q=Js.N){this.zone=L,this.delegate=q}now(){return this.delegate.now()}schedule(L,q,le){const Be=this.zone;return this.delegate.schedule(function(Rt){Be.runGuarded(()=>{L.apply(this,[Rt])})},q,le)}}class td{constructor(L){this.zone=L,this.task=null}call(L,q){const le=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Il,{},Il,Il)),q.pipe((0,Oa.b)({next:le,complete:le,error:le})).subscribe(L).add(le)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ka=(()=>{class A{constructor(q){this.ngZone=q,this.outsideAngular=q.runOutsideAngular(()=>new Cl(Zone.current)),this.insideAngular=q.run(()=>new Cl(Zone.current,_l.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(q){return new(q||A)(u.LFG(u.R0b))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function I(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function x(A){return A.pipe((0,_a.QV)(I().outsideAngular))}function Z(A){return I(),function Ee(A){return function(q){return(q=q.lift(new td(A.ngZone))).pipe((0,Tu.R)(A.outsideAngular),(0,_a.QV)(A.insideAngular))}}(I())(A)}},2090:($t,ze,$)=>{"use strict";$.d(ze,{$s:()=>Zt,BH:()=>qe,DV:()=>Fn,Dv:()=>Jn,G6:()=>Ct,GJ:()=>Xe,L:()=>oe,LL:()=>it,Pz:()=>ht,Sg:()=>Ne,UG:()=>$e,UI:()=>Qn,US:()=>ae,Wj:()=>rn,Wl:()=>Ot,Yr:()=>ot,ZB:()=>se,ZR:()=>nt,aH:()=>kt,b$:()=>_e,cI:()=>jt,dS:()=>_n,eu:()=>et,g5:()=>j,gK:()=>nr,gQ:()=>Qt,h$:()=>he,hl:()=>ke,hu:()=>W,jU:()=>Le,lb:()=>Qr,m9:()=>dn,ne:()=>or,p$:()=>te,pd:()=>Wr,r3:()=>bn,ru:()=>Ie,tV:()=>ye,uI:()=>Re,ug:()=>Rr,vZ:()=>Nt,w1:()=>Ke,w9:()=>Mn,xO:()=>Un,xb:()=>re,z$:()=>ge,zI:()=>fe,zd:()=>kn});const W=function(Me,Ce){if(!Me)throw j(Ce)},j=function(Me){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Me)},Ae=function(Me){const Ce=[];let Oe=0;for(let rt=0;rt<Me.length;rt++){let Ge=Me.charCodeAt(rt);Ge<128?Ce[Oe++]=Ge:Ge<2048?(Ce[Oe++]=Ge>>6|192,Ce[Oe++]=63&Ge|128):55296==(64512&Ge)&&rt+1<Me.length&&56320==(64512&Me.charCodeAt(rt+1))?(Ge=65536+((1023&Ge)<<10)+(1023&Me.charCodeAt(++rt)),Ce[Oe++]=Ge>>18|240,Ce[Oe++]=Ge>>12&63|128,Ce[Oe++]=Ge>>6&63|128,Ce[Oe++]=63&Ge|128):(Ce[Oe++]=Ge>>12|224,Ce[Oe++]=Ge>>6&63|128,Ce[Oe++]=63&Ge|128)}return Ce},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Me,Ce){if(!Array.isArray(Me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Oe=Ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,rt=[];for(let Ge=0;Ge<Me.length;Ge+=3){const zt=Me[Ge],en=Ge+1<Me.length,jn=en?Me[Ge+1]:0,Kn=Ge+2<Me.length,dr=Kn?Me[Ge+2]:0;let we=(15&jn)<<2|dr>>6,at=63&dr;Kn||(at=64,en||(we=64)),rt.push(Oe[zt>>2],Oe[(3&zt)<<4|jn>>4],Oe[we],Oe[at])}return rt.join("")},encodeString(Me,Ce){return this.HAS_NATIVE_SUPPORT&&!Ce?btoa(Me):this.encodeByteArray(Ae(Me),Ce)},decodeString(Me,Ce){return this.HAS_NATIVE_SUPPORT&&!Ce?atob(Me):function(Me){const Ce=[];let Oe=0,rt=0;for(;Oe<Me.length;){const Ge=Me[Oe++];if(Ge<128)Ce[rt++]=String.fromCharCode(Ge);else if(Ge>191&&Ge<224){const zt=Me[Oe++];Ce[rt++]=String.fromCharCode((31&Ge)<<6|63&zt)}else if(Ge>239&&Ge<365){const Kn=((7&Ge)<<18|(63&Me[Oe++])<<12|(63&Me[Oe++])<<6|63&Me[Oe++])-65536;Ce[rt++]=String.fromCharCode(55296+(Kn>>10)),Ce[rt++]=String.fromCharCode(56320+(1023&Kn))}else{const zt=Me[Oe++],en=Me[Oe++];Ce[rt++]=String.fromCharCode((15&Ge)<<12|(63&zt)<<6|63&en)}}return Ce.join("")}(this.decodeStringToByteArray(Me,Ce))},decodeStringToByteArray(Me,Ce){this.init_();const Oe=Ce?this.charToByteMapWebSafe_:this.charToByteMap_,rt=[];for(let Ge=0;Ge<Me.length;){const zt=Oe[Me.charAt(Ge++)],jn=Ge<Me.length?Oe[Me.charAt(Ge)]:0;++Ge;const dr=Ge<Me.length?Oe[Me.charAt(Ge)]:64;++Ge;const xe=Ge<Me.length?Oe[Me.charAt(Ge)]:64;if(++Ge,null==zt||null==jn||null==dr||null==xe)throw Error();rt.push(zt<<2|jn>>4),64!==dr&&(rt.push(jn<<4&240|dr>>2),64!==xe&&rt.push(dr<<6&192|xe))}return rt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Me=0;Me<this.ENCODED_VALS.length;Me++)this.byteToCharMap_[Me]=this.ENCODED_VALS.charAt(Me),this.charToByteMap_[this.byteToCharMap_[Me]]=Me,this.byteToCharMapWebSafe_[Me]=this.ENCODED_VALS_WEBSAFE.charAt(Me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Me]]=Me,Me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Me)]=Me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Me)]=Me)}}},he=function(Me){const Ce=Ae(Me);return ae.encodeByteArray(Ce,!0)},oe=function(Me){return he(Me).replace(/\./g,"")},ye=function(Me){try{return ae.decodeString(Me,!0)}catch(Ce){console.error("base64Decode failed: ",Ce)}return null};function te(Me){return se(void 0,Me)}function se(Me,Ce){if(!(Ce instanceof Object))return Ce;switch(Ce.constructor){case Date:return new Date(Ce.getTime());case Object:void 0===Me&&(Me={});break;case Array:Me=[];break;default:return Ce}for(const Oe in Ce)!Ce.hasOwnProperty(Oe)||!X(Oe)||(Me[Oe]=se(Me[Oe],Ce[Oe]));return Me}function X(Me){return"__proto__"!==Me}function ge(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ge())}function $e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Me){return!1}}function Le(){return"object"==typeof self&&self.self===self}function Ie(){const Me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Me&&void 0!==Me.id}function _e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){const Me=ge();return Me.indexOf("MSIE ")>=0||Me.indexOf("Trident/")>=0}function ot(){return!1}function Ct(){return!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){return"object"==typeof indexedDB}function et(){return new Promise((Me,Ce)=>{try{let Oe=!0;const rt="validate-browser-context-for-indexeddb-analytics-module",Ge=self.indexedDB.open(rt);Ge.onsuccess=()=>{Ge.result.close(),Oe||self.indexedDB.deleteDatabase(rt),Me(!0)},Ge.onupgradeneeded=()=>{Oe=!1},Ge.onerror=()=>{var zt;Ce((null===(zt=Ge.error)||void 0===zt?void 0:zt.message)||"")}}catch(Oe){Ce(Oe)}})}function fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const be=()=>{try{return function je(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Me=process.env.__FIREBASE_DEFAULTS__;return Me?JSON.parse(Me):void 0})()||(()=>{if("undefined"==typeof document)return;let Me;try{Me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Oe){return}const Ce=Me&&ye(Me[1]);return Ce&&JSON.parse(Ce)})()}catch(Me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Me}`)}},kt=()=>{var Me;return null===(Me=be())||void 0===Me?void 0:Me.config},ht=Me=>{var Ce;return null===(Ce=be())||void 0===Ce?void 0:Ce[`_${Me}`]};class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ce,Oe)=>{this.resolve=Ce,this.reject=Oe})}wrapCallback(Ce){return(Oe,rt)=>{Oe?this.reject(Oe):this.resolve(rt),"function"==typeof Ce&&(this.promise.catch(()=>{}),1===Ce.length?Ce(Oe):Ce(Oe,rt))}}}function Ne(Me,Ce){if(Me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const rt=Ce||"demo-project",Ge=Me.iat||0,zt=Me.sub||Me.user_id;if(!zt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const en=Object.assign({iss:`https://securetoken.google.com/${rt}`,aud:rt,iat:Ge,exp:Ge+3600,auth_time:Ge,sub:zt,user_id:zt,firebase:{sign_in_provider:"custom",identities:{}}},Me);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(en)),""].join(".")}class nt extends Error{constructor(Ce,Oe,rt){super(Oe),this.code=Ce,this.customData=rt,this.name="FirebaseError",Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,it.prototype.create)}}class it{constructor(Ce,Oe,rt){this.service=Ce,this.serviceName=Oe,this.errors=rt}create(Ce,...Oe){const rt=Oe[0]||{},Ge=`${this.service}/${Ce}`,zt=this.errors[Ce],en=zt?function Tt(Me,Ce){return Me.replace(mt,(Oe,rt)=>{const Ge=Ce[rt];return null!=Ge?String(Ge):`<${rt}?>`})}(zt,rt):"Error";return new nt(Ge,`${this.serviceName}: ${en} (${Ge}).`,rt)}}const mt=/\{\$([^}]+)}/g;function jt(Me){return JSON.parse(Me)}function Ot(Me){return JSON.stringify(Me)}const An=function(Me){let Ce={},Oe={},rt={},Ge="";try{const zt=Me.split(".");Ce=jt(ye(zt[0])||""),Oe=jt(ye(zt[1])||""),Ge=zt[2],rt=Oe.d||{},delete Oe.d}catch(zt){}return{header:Ce,claims:Oe,data:rt,signature:Ge}},Mn=function(Me){const Oe=An(Me).claims;return!!Oe&&"object"==typeof Oe&&Oe.hasOwnProperty("iat")},Xe=function(Me){const Ce=An(Me).claims;return"object"==typeof Ce&&!0===Ce.admin};function bn(Me,Ce){return Object.prototype.hasOwnProperty.call(Me,Ce)}function Fn(Me,Ce){if(Object.prototype.hasOwnProperty.call(Me,Ce))return Me[Ce]}function re(Me){for(const Ce in Me)if(Object.prototype.hasOwnProperty.call(Me,Ce))return!1;return!0}function Qn(Me,Ce,Oe){const rt={};for(const Ge in Me)Object.prototype.hasOwnProperty.call(Me,Ge)&&(rt[Ge]=Ce.call(Oe,Me[Ge],Ge,Me));return rt}function Nt(Me,Ce){if(Me===Ce)return!0;const Oe=Object.keys(Me),rt=Object.keys(Ce);for(const Ge of Oe){if(!rt.includes(Ge))return!1;const zt=Me[Ge],en=Ce[Ge];if(Fr(zt)&&Fr(en)){if(!Nt(zt,en))return!1}else if(zt!==en)return!1}for(const Ge of rt)if(!Oe.includes(Ge))return!1;return!0}function Fr(Me){return null!==Me&&"object"==typeof Me}function Un(Me){const Ce=[];for(const[Oe,rt]of Object.entries(Me))Array.isArray(rt)?rt.forEach(Ge=>{Ce.push(encodeURIComponent(Oe)+"="+encodeURIComponent(Ge))}):Ce.push(encodeURIComponent(Oe)+"="+encodeURIComponent(rt));return Ce.length?"&"+Ce.join("&"):""}function kn(Me){const Ce={};return Me.replace(/^\?/,"").split("&").forEach(rt=>{if(rt){const[Ge,zt]=rt.split("=");Ce[decodeURIComponent(Ge)]=decodeURIComponent(zt)}}),Ce}function Wr(Me){const Ce=Me.indexOf("?");if(!Ce)return"";const Oe=Me.indexOf("#",Ce);return Me.substring(Ce,Oe>0?Oe:void 0)}class Qt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ce=1;Ce<this.blockSize;++Ce)this.pad_[Ce]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ce,Oe){Oe||(Oe=0);const rt=this.W_;if("string"==typeof Ce)for(let xe=0;xe<16;xe++)rt[xe]=Ce.charCodeAt(Oe)<<24|Ce.charCodeAt(Oe+1)<<16|Ce.charCodeAt(Oe+2)<<8|Ce.charCodeAt(Oe+3),Oe+=4;else for(let xe=0;xe<16;xe++)rt[xe]=Ce[Oe]<<24|Ce[Oe+1]<<16|Ce[Oe+2]<<8|Ce[Oe+3],Oe+=4;for(let xe=16;xe<80;xe++){const we=rt[xe-3]^rt[xe-8]^rt[xe-14]^rt[xe-16];rt[xe]=4294967295&(we<<1|we>>>31)}let dr,Je,Ge=this.chain_[0],zt=this.chain_[1],en=this.chain_[2],jn=this.chain_[3],Kn=this.chain_[4];for(let xe=0;xe<80;xe++){xe<40?xe<20?(dr=jn^zt&(en^jn),Je=1518500249):(dr=zt^en^jn,Je=1859775393):xe<60?(dr=zt&en|jn&(zt|en),Je=2400959708):(dr=zt^en^jn,Je=3395469782);const we=(Ge<<5|Ge>>>27)+dr+Kn+Je+rt[xe]&4294967295;Kn=jn,jn=en,en=4294967295&(zt<<30|zt>>>2),zt=Ge,Ge=we}this.chain_[0]=this.chain_[0]+Ge&4294967295,this.chain_[1]=this.chain_[1]+zt&4294967295,this.chain_[2]=this.chain_[2]+en&4294967295,this.chain_[3]=this.chain_[3]+jn&4294967295,this.chain_[4]=this.chain_[4]+Kn&4294967295}update(Ce,Oe){if(null==Ce)return;void 0===Oe&&(Oe=Ce.length);const rt=Oe-this.blockSize;let Ge=0;const zt=this.buf_;let en=this.inbuf_;for(;Ge<Oe;){if(0===en)for(;Ge<=rt;)this.compress_(Ce,Ge),Ge+=this.blockSize;if("string"==typeof Ce){for(;Ge<Oe;)if(zt[en]=Ce.charCodeAt(Ge),++en,++Ge,en===this.blockSize){this.compress_(zt),en=0;break}}else for(;Ge<Oe;)if(zt[en]=Ce[Ge],++en,++Ge,en===this.blockSize){this.compress_(zt),en=0;break}}this.inbuf_=en,this.total_+=Oe}digest(){const Ce=[];let Oe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ge=this.blockSize-1;Ge>=56;Ge--)this.buf_[Ge]=255&Oe,Oe/=256;this.compress_(this.buf_);let rt=0;for(let Ge=0;Ge<5;Ge++)for(let zt=24;zt>=0;zt-=8)Ce[rt]=this.chain_[Ge]>>zt&255,++rt;return Ce}}function or(Me,Ce){const Oe=new un(Me,Ce);return Oe.subscribe.bind(Oe)}class un{constructor(Ce,Oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Oe,this.task.then(()=>{Ce(this)}).catch(rt=>{this.error(rt)})}next(Ce){this.forEachObserver(Oe=>{Oe.next(Ce)})}error(Ce){this.forEachObserver(Oe=>{Oe.error(Ce)}),this.close(Ce)}complete(){this.forEachObserver(Ce=>{Ce.complete()}),this.close()}subscribe(Ce,Oe,rt){let Ge;if(void 0===Ce&&void 0===Oe&&void 0===rt)throw new Error("Missing Observer.");Ge=function yt(Me,Ce){if("object"!=typeof Me||null===Me)return!1;for(const Oe of Ce)if(Oe in Me&&"function"==typeof Me[Oe])return!0;return!1}(Ce,["next","error","complete"])?Ce:{next:Ce,error:Oe,complete:rt},void 0===Ge.next&&(Ge.next=Xn),void 0===Ge.error&&(Ge.error=Xn),void 0===Ge.complete&&(Ge.complete=Xn);const zt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ge.error(this.finalError):Ge.complete()}catch(en){}}),this.observers.push(Ge),zt}unsubscribeOne(Ce){void 0===this.observers||void 0===this.observers[Ce]||(delete this.observers[Ce],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ce){if(!this.finalized)for(let Oe=0;Oe<this.observers.length;Oe++)this.sendOne(Oe,Ce)}sendOne(Ce,Oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ce])try{Oe(this.observers[Ce])}catch(rt){"undefined"!=typeof console&&console.error&&console.error(rt)}})}close(Ce){this.finalized||(this.finalized=!0,void 0!==Ce&&(this.finalError=Ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xn(){}const Jn=function(Me,Ce,Oe,rt){let Ge;if(rt<Ce?Ge="at least "+Ce:rt>Oe&&(Ge=0===Oe?"none":"no more than "+Oe),Ge)throw new Error(Me+" failed: Was called with "+rt+(1===rt?" argument.":" arguments.")+" Expects "+Ge+".")};function nr(Me,Ce){return`${Me} failed: ${Ce} argument `}function rn(Me,Ce,Oe,rt){if((!rt||Oe)&&"function"!=typeof Oe)throw new Error(nr(Me,Ce)+"must be a valid function.")}function Qr(Me,Ce,Oe,rt){if((!rt||Oe)&&("object"!=typeof Oe||null===Oe))throw new Error(nr(Me,Ce)+"must be a valid context object.")}const _n=function(Me){const Ce=[];let Oe=0;for(let rt=0;rt<Me.length;rt++){let Ge=Me.charCodeAt(rt);if(Ge>=55296&&Ge<=56319){const zt=Ge-55296;rt++,W(rt<Me.length,"Surrogate pair missing trail surrogate."),Ge=65536+(zt<<10)+(Me.charCodeAt(rt)-56320)}Ge<128?Ce[Oe++]=Ge:Ge<2048?(Ce[Oe++]=Ge>>6|192,Ce[Oe++]=63&Ge|128):Ge<65536?(Ce[Oe++]=Ge>>12|224,Ce[Oe++]=Ge>>6&63|128,Ce[Oe++]=63&Ge|128):(Ce[Oe++]=Ge>>18|240,Ce[Oe++]=Ge>>12&63|128,Ce[Oe++]=Ge>>6&63|128,Ce[Oe++]=63&Ge|128)}return Ce},Rr=function(Me){let Ce=0;for(let Oe=0;Oe<Me.length;Oe++){const rt=Me.charCodeAt(Oe);rt<128?Ce++:rt<2048?Ce+=2:rt>=55296&&rt<=56319?(Ce+=4,Oe++):Ce+=3}return Ce};function Zt(Me,Ce=1e3,Oe=2){const rt=Ce*Math.pow(Oe,Me),Ge=Math.round(.5*rt*(Math.random()-.5)*2);return Math.min(144e5,rt+Ge)}function dn(Me){return Me&&Me._delegate?Me._delegate:Me}},4153:($t,ze,$)=>{"use strict";$.d(ze,{Br:()=>qs,dr:()=>nr,YG:()=>Ar,Sm:()=>Lr,W2:()=>Oe,Gu:()=>Je,gu:()=>xe,ki:()=>Dn,jP:()=>Yr,wd:()=>Yi,sr:()=>Ki,Pc:()=>R,_q:()=>Ys,SH:()=>Es});var u=$(5e3),j=($(4182),$(655)),Ae=$(6498),Te=$(6688),ae=$(7043),he=$(4850);function ye(p,M,_,F){return(0,ae.m)(_)&&(F=_,_=void 0),F?ye(p,M,_).pipe((0,he.U)(ee=>(0,Te.k)(ee)?F(...ee):F(ee))):new Ae.y(ee=>{te(p,M,function lt(Ft){ee.next(arguments.length>1?Array.prototype.slice.call(arguments):Ft)},ee,_)})}function te(p,M,_,F,ee){let lt;if(function ge(p){return p&&"function"==typeof p.addEventListener&&"function"==typeof p.removeEventListener}(p)){const Ft=p;p.addEventListener(M,_,ee),lt=()=>Ft.removeEventListener(M,_,ee)}else if(function X(p){return p&&"function"==typeof p.on&&"function"==typeof p.off}(p)){const Ft=p;p.on(M,_),lt=()=>Ft.off(M,_)}else if(function se(p){return p&&"function"==typeof p.addListener&&"function"==typeof p.removeListener}(p)){const Ft=p;p.addListener(M,_),lt=()=>Ft.removeListener(M,_)}else{if(!p||!p.length)throw new TypeError("Invalid event target");for(let Ft=0,Xt=p.length;Ft<Xt;Ft++)te(p[Ft],M,_,F,ee)}F.add(lt)}var Re=$(8929),$e=$(591),Le=$(4740),ut=($(5942),$(129),$(1369),$(1911),$(9658)),ot=$(5730),Ct=$(664),ke=$(385),et=$(4414),de=($(3457),$(4349),$(1308)),kt=$(2198),ht=$(7545),qe=$(5778),Ne=$(9808);const nt=ut.i,mt=["*"];function On(p,M){if(1&p&&(u.TgZ(0,"div",1),u.GkF(1,2),u.qZA()),2&p){const _=u.oxw();u.xp6(1),u.Q6J("ngTemplateOutlet",_.template)}}const Mn=p=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(p):"function"==typeof requestAnimationFrame?requestAnimationFrame(p):setTimeout(p),Xe=p=>!!p.resolveComponentFactory,Qt=(p,M)=>{const _=p.prototype;M.forEach(F=>{Object.defineProperty(_,F,{get(){return this.el[F]},set(ee){this.z.runOutsideAngular(()=>this.el[F]=ee)}})})},or=(p,M)=>{const _=p.prototype;M.forEach(F=>{_[F]=function(){const ee=arguments;return this.z.runOutsideAngular(()=>this.el[F].apply(this.el,ee))}})},un=(p,M,_)=>{_.forEach(F=>p[F]=ye(M,F))};function yt(p){return function(_){const{defineCustomElementFn:F,inputs:ee,methods:lt}=p;return void 0!==F&&F(),ee&&Qt(_,ee),lt&&or(_,lt),_}}let nr=(()=>{let p=class{constructor(_,F,ee){this.z=ee,_.detach(),this.el=F.nativeElement}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-app"]],ngContentSelectors:mt,decls:1,vars:0,template:function(_,F){1&_&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({defineCustomElementFn:void 0})],p),p})(),Ar=(()=>{let p=class{constructor(_,F,ee){this.z=ee,_.detach(),this.el=F.nativeElement,un(this,this.el,["ionFocus","ionBlur"])}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:mt,decls:1,vars:0,template:function(_,F){1&_&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],p),p})(),Lr=(()=>{let p=class{constructor(_,F,ee){this.z=ee,_.detach(),this.el=F.nativeElement}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:mt,decls:1,vars:0,template:function(_,F){1&_&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({defineCustomElementFn:void 0,inputs:["collapse"]})],p),p})(),Oe=(()=>{let p=class{constructor(_,F,ee){this.z=ee,_.detach(),this.el=F.nativeElement,un(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:mt,decls:1,vars:0,template:function(_,F){1&_&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],p),p})(),Je=(()=>{let p=class{constructor(_,F,ee){this.z=ee,_.detach(),this.el=F.nativeElement}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:mt,decls:1,vars:0,template:function(_,F){1&_&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],p),p})(),xe=(()=>{let p=class{constructor(_,F,ee){this.z=ee,_.detach(),this.el=F.nativeElement}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:mt,decls:1,vars:0,template:function(_,F){1&_&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],p),p})(),Yi=(()=>{let p=class{constructor(_,F,ee){this.z=ee,_.detach(),this.el=F.nativeElement}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:mt,decls:1,vars:0,template:function(_,F){1&_&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({defineCustomElementFn:void 0,inputs:["color","size"]})],p),p})(),Ki=(()=>{let p=class{constructor(_,F,ee){this.z=ee,_.detach(),this.el=F.nativeElement}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:mt,decls:1,vars:0,template:function(_,F){1&_&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({defineCustomElementFn:void 0,inputs:["color","mode"]})],p),p})();class Ui{constructor(M={}){this.data=M}get(M){return this.data[M]}}let No=(()=>{class p{constructor(_,F){this.zone=_,this.appRef=F}create(_,F,ee){return new Fo(_,F,ee,this.appRef,this.zone)}}return p.\u0275fac=function(_){return new(_||p)(u.LFG(u.R0b),u.LFG(u.z2F))},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac}),p})();class Fo{constructor(M,_,F,ee,lt){this.resolverOrInjector=M,this.injector=_,this.location=F,this.appRef=ee,this.zone=lt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(M,_,F,ee){return this.zone.run(()=>new Promise(lt=>{lt(Wa(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,M,_,F,ee))}))}removeViewFromDom(M,_){return this.zone.run(()=>new Promise(F=>{const ee=this.elRefMap.get(_);if(ee){ee.destroy(),this.elRefMap.delete(_);const lt=this.elEventsMap.get(_);lt&&(lt(),this.elEventsMap.delete(_))}F()}))}}const Wa=(p,M,_,F,ee,lt,Ft,Xt,Tn,mr,Kr)=>{let Sr;const li=u.zs3.create({providers:ua(mr),parent:_});if(M&&Xe(M)){const Fs=M.resolveComponentFactory(Tn);Sr=F?F.createComponent(Fs,F.length,li):Fs.create(li)}else{if(!F)return null;Sr=F.createComponent(Tn,{index:F.indexOf,injector:li,environmentInjector:M})}const ti=Sr.instance,ki=Sr.location.nativeElement;if(mr&&Object.assign(ti,mr),Kr)for(const Fs of Kr)ki.classList.add(Fs);const is=lo(p,ti,ki);return Xt.appendChild(ki),F||ee.attachView(Sr.hostView),Sr.changeDetectorRef.reattach(),lt.set(ki,Sr),Ft.set(ki,is),ki},la=[Ct.L,Ct.a,Ct.b,Ct.c,Ct.d],lo=(p,M,_)=>p.run(()=>{const F=la.filter(ee=>"function"==typeof M[ee]).map(ee=>{const lt=Ft=>M[ee](Ft.detail);return _.addEventListener(ee,lt),()=>_.removeEventListener(ee,lt)});return()=>F.forEach(ee=>ee())}),Mi=new u.OlP("NavParamsToken"),ua=p=>[{provide:Mi,useValue:p},{provide:Ui,useFactory:Lo,deps:[Mi]}],Lo=p=>new Ui(p),ca=(p,M)=>((p=p.filter(_=>_.stackId!==M.stackId)).push(M),p),xi=(p,M)=>{const _=p.createUrlTree(["."],{relativeTo:M});return p.serializeUrl(_)},Eo=(p,M)=>{if(!p)return;const _=ks(M);for(let F=0;F<_.length;F++){if(F>=p.length)return _[F];if(_[F]!==p[F])return}},ks=p=>p.split("/").map(M=>M.trim()).filter(M=>""!==M),Io=p=>{p&&(p.ref.destroy(),p.unlistenEvents())};class bs{constructor(M,_,F,ee,lt,Ft){this.containerEl=_,this.router=F,this.navCtrl=ee,this.zone=lt,this.location=Ft,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==M?ks(M):void 0}createView(M,_){var F;const ee=xi(this.router,_),lt=null===(F=null==M?void 0:M.location)||void 0===F?void 0:F.nativeElement,Ft=lo(this.zone,M.instance,lt);return{id:this.nextId++,stackId:Eo(this.tabsPrefix,ee),unlistenEvents:Ft,element:lt,ref:M,url:ee}}getExistingView(M){const _=xi(this.router,M),F=this.views.find(ee=>ee.url===_);return F&&F.ref.changeDetectorRef.reattach(),F}setActive(M){var _,F;const ee=this.navCtrl.consumeTransition();let{direction:lt,animation:Ft,animationBuilder:Xt}=ee;const Tn=this.activeView,mr=((p,M)=>!M||p.stackId!==M.stackId)(M,Tn);mr&&(lt="back",Ft=void 0);const Kr=this.views.slice();let Sr;const li=this.router;li.getCurrentNavigation?Sr=li.getCurrentNavigation():!(null===(_=li.navigations)||void 0===_)&&_.value&&(Sr=li.navigations.value),null!==(F=null==Sr?void 0:Sr.extras)&&void 0!==F&&F.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ti=this.views.includes(M),ki=this.insertView(M,lt);ti||M.ref.changeDetectorRef.detectChanges();const is=M.animationBuilder;return void 0===Xt&&"back"===lt&&!mr&&void 0!==is&&(Xt=is),Tn&&(Tn.animationBuilder=Xt),this.zone.runOutsideAngular(()=>this.wait(()=>(Tn&&Tn.ref.changeDetectorRef.detach(),M.ref.changeDetectorRef.reattach(),this.transition(M,Tn,Ft,this.canGoBack(1),!1,Xt).then(()=>ws(M,ki,Kr,this.location,this.zone)).then(()=>({enteringView:M,direction:lt,animation:Ft,tabSwitch:mr})))))}canGoBack(M,_=this.getActiveStackId()){return this.getStack(_).length>M}pop(M,_=this.getActiveStackId()){return this.zone.run(()=>{var F,ee;const lt=this.getStack(_);if(lt.length<=M)return Promise.resolve(!1);const Ft=lt[lt.length-M-1];let Xt=Ft.url;const Tn=Ft.savedData;if(Tn){const Kr=Tn.get("primary");null!==(ee=null===(F=null==Kr?void 0:Kr.route)||void 0===F?void 0:F._routerState)&&void 0!==ee&&ee.snapshot.url&&(Xt=Kr.route._routerState.snapshot.url)}const{animationBuilder:mr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Xt,Object.assign(Object.assign({},Ft.savedExtras),{animation:mr})).then(()=>!0)})}startBackTransition(){const M=this.activeView;if(M){const _=this.getStack(M.stackId),F=_[_.length-2],ee=F.animationBuilder;return this.wait(()=>this.transition(F,M,"back",this.canGoBack(2),!0,ee))}return Promise.resolve()}endBackTransition(M){M?(this.skipTransition=!0,this.pop(1)):this.activeView&&ji(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(M){const _=this.getStack(M);return _.length>0?_[_.length-1]:void 0}getRootUrl(M){const _=this.getStack(M);return _.length>0?_[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Io),this.activeView=void 0,this.views=[]}getStack(M){return this.views.filter(_=>_.stackId===M)}insertView(M,_){return this.activeView=M,this.views=((p,M,_)=>"root"===_?ca(p,M):"forward"===_?((p,M)=>(p.indexOf(M)>=0?p=p.filter(F=>F.stackId!==M.stackId||F.id<=M.id):p.push(M),p))(p,M):((p,M)=>p.indexOf(M)>=0?p.filter(F=>F.stackId!==M.stackId||F.id<=M.id):ca(p,M))(p,M))(this.views,M,_),this.views.slice()}transition(M,_,F,ee,lt,Ft){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(_===M)return Promise.resolve(!1);const Xt=M?M.element:void 0,Tn=_?_.element:void 0,mr=this.containerEl;return Xt&&Xt!==Tn&&(Xt.classList.add("ion-page"),Xt.classList.add("ion-page-invisible"),Xt.parentElement!==mr&&mr.appendChild(Xt),mr.commit)?mr.commit(Xt,Tn,{deepWait:!0,duration:void 0===F?0:void 0,direction:F,showGoBack:ee,progressAnimation:lt,animationBuilder:Ft}):Promise.resolve(!1)}wait(M){return(0,j.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const _=this.runningTask=M();return _.finally(()=>this.runningTask=void 0),_})}}const ws=(p,M,_,F,ee)=>"function"==typeof requestAnimationFrame?new Promise(lt=>{requestAnimationFrame(()=>{ji(p,M,_,F,ee),lt()})}):Promise.resolve(),ji=(p,M,_,F,ee)=>{ee.run(()=>_.filter(lt=>!M.includes(lt)).forEach(Io)),M.forEach(lt=>{const Xt=F.path().split("?")[0].split("#")[0];if(lt!==p&&lt.url!==Xt){const Tn=lt.element;Tn.setAttribute("aria-hidden","true"),Tn.classList.add("ion-page-hidden"),lt.ref.changeDetectorRef.detach()}})};let Ri=(()=>{class p{get(_,F){const ee=fi();return ee?ee.get(_,F):null}getBoolean(_,F){const ee=fi();return!!ee&&ee.getBoolean(_,F)}getNumber(_,F){const ee=fi();return ee?ee.getNumber(_,F):0}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();const ai=new u.OlP("USERCONFIG"),fi=()=>{if("undefined"!=typeof window){const p=window.Ionic;if(null!=p&&p.config)return p.config}return null};let Co=(()=>{class p{constructor(_,F){this.doc=_,this.backButton=new Re.xQ,this.keyboardDidShow=new Re.xQ,this.keyboardDidHide=new Re.xQ,this.pause=new Re.xQ,this.resume=new Re.xQ,this.resize=new Re.xQ,F.run(()=>{var ee;let lt;this.win=_.defaultView,this.backButton.subscribeWithPriority=function(Ft,Xt){return this.subscribe(Tn=>Tn.register(Ft,mr=>F.run(()=>Xt(mr))))},Oi(this.pause,_,"pause"),Oi(this.resume,_,"resume"),Oi(this.backButton,_,"ionBackButton"),Oi(this.resize,this.win,"resize"),Oi(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Oi(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Ft=>{lt=Ft}),null!==(ee=this.win)&&void 0!==ee&&ee.cordova?_.addEventListener("deviceready",()=>{lt("cordova")},{once:!0}):lt("dom")})}is(_){return(0,ut.a)(this.win,_)}platforms(){return(0,ut.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(_){return pi(this.win.location.href,_)}isLandscape(){return!this.isPortrait()}isPortrait(){var _,F;return null===(F=(_=this.win).matchMedia)||void 0===F?void 0:F.call(_,"(orientation: portrait)").matches}testUserAgent(_){const F=this.win.navigator;return!!((null==F?void 0:F.userAgent)&&F.userAgent.indexOf(_)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return p.\u0275fac=function(_){return new(_||p)(u.LFG(Ne.K0),u.LFG(u.R0b))},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();const pi=(p,M)=>{M=M.replace(/[[\]\\]/g,"\\$&");const F=new RegExp("[\\?&]"+M+"=([^&#]*)").exec(p);return F?decodeURIComponent(F[1].replace(/\+/g," ")):null},Oi=(p,M,_)=>{M&&M.addEventListener(_,F=>{p.next(null!=F?F.detail:void 0)})};let Es=(()=>{class p{constructor(_,F,ee,lt){this.location=F,this.serializer=ee,this.router=lt,this.direction=Is,this.animated=Hi,this.guessDirection="forward",this.lastNavId=-1,lt&&lt.events.subscribe(Ft=>{if(Ft instanceof Le.OD){const Xt=Ft.restoredState?Ft.restoredState.navigationId:Ft.id;this.guessDirection=Xt<this.lastNavId?"back":"forward",this.guessAnimation=Ft.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Ft.id:Xt}}),_.backButton.subscribeWithPriority(0,Ft=>{this.pop(),Ft()})}navigateForward(_,F={}){return this.setDirection("forward",F.animated,F.animationDirection,F.animation),this.navigate(_,F)}navigateBack(_,F={}){return this.setDirection("back",F.animated,F.animationDirection,F.animation),this.navigate(_,F)}navigateRoot(_,F={}){return this.setDirection("root",F.animated,F.animationDirection,F.animation),this.navigate(_,F)}back(_={animated:!0,animationDirection:"back"}){return this.setDirection("back",_.animated,_.animationDirection,_.animation),this.location.back()}pop(){return(0,j.mG)(this,void 0,void 0,function*(){let _=this.topOutlet;for(;_&&!(yield _.pop());)_=_.parentOutlet})}setDirection(_,F,ee,lt){this.direction=_,this.animated=Mr(_,F,ee),this.animationBuilder=lt}setTopOutlet(_){this.topOutlet=_}consumeTransition(){let F,_="root";const ee=this.animationBuilder;return"auto"===this.direction?(_=this.guessDirection,F=this.guessAnimation):(F=this.animated,_=this.direction),this.direction=Is,this.animated=Hi,this.animationBuilder=void 0,{direction:_,animation:F,animationBuilder:ee}}navigate(_,F){if(Array.isArray(_))return this.router.navigate(_,F);{const ee=this.serializer.parse(_.toString());return void 0!==F.queryParams&&(ee.queryParams=Object.assign({},F.queryParams)),void 0!==F.fragment&&(ee.fragment=F.fragment),this.router.navigateByUrl(ee,F)}}}return p.\u0275fac=function(_){return new(_||p)(u.LFG(Co),u.LFG(Ne.Ye),u.LFG(Le.Hx),u.LFG(Le.F0,8))},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();const Mr=(p,M,_)=>{if(!1!==M){if(void 0!==_)return _;if("forward"===p||"back"===p)return p;if("root"===p&&!0===M)return"forward"}},Is="auto",Hi=void 0;let Yr=(()=>{class p{constructor(_,F,ee,lt,Ft,Xt,Tn,mr,Kr,Sr,li,ti,ki){this.parentContexts=_,this.location=F,this.config=Ft,this.navCtrl=Xt,this.componentFactoryResolver=Tn,this.parentOutlet=ki,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new $e.X(null),this.stackEvents=new u.vpe,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.nativeEl=Kr.nativeElement,this.name=ee||Le.eC,this.tabsPrefix="true"===lt?xi(Sr,ti):void 0,this.stackCtrl=new bs(this.tabsPrefix,this.nativeEl,Sr,Xt,li,mr),_.onChildOutletCreated(this.name,this)}set animation(_){this.nativeEl.animation=_}set animated(_){this.nativeEl.animated=_}set swipeGesture(_){this._swipeGesture=_,this.nativeEl.swipeHandler=_?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:F=>this.stackCtrl.endBackTransition(F)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const _=this.getContext();null!=_&&_.route&&this.activateWith(_.route,_.resolver||null)}new Promise(_=>(0,ot.c)(this.nativeEl,_)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(_,F){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const F=this.getContext();this.activatedView.savedData=new Map(F.children.contexts);const ee=this.activatedView.savedData.get("primary");if(ee&&F.route&&(ee.route=Object.assign({},F.route)),this.activatedView.savedExtras={},F.route){const lt=F.route.snapshot;this.activatedView.savedExtras.queryParams=lt.queryParams,this.activatedView.savedExtras.fragment=lt.fragment}}const _=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,F){var ee;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=_;let lt,Ft=this.stackCtrl.getExistingView(_);if(Ft){lt=this.activated=Ft.ref;const Xt=Ft.savedData;Xt&&(this.getContext().children.contexts=Xt),this.updateActivatedRouteProxy(lt.instance,_)}else{const Xt=_._futureSnapshot;if(null==Xt.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const Tn=this.parentContexts.getOrCreateContext(this.name).children,mr=new $e.X(null),Kr=this.createActivatedRouteProxy(mr,_),Sr=new Ei(Kr,Tn,this.location.injector),li=null!==(ee=Xt.routeConfig.component)&&void 0!==ee?ee:Xt.component;if((F=F||this.componentFactoryResolver)&&Xe(F)){const ti=F.resolveComponentFactory(li);lt=this.activated=this.location.createComponent(ti,this.location.length,Sr)}else lt=this.activated=this.location.createComponent(li,{index:this.location.length,injector:Sr,environmentInjector:null!=F?F:this.environmentInjector});mr.next(lt.instance),Ft=this.stackCtrl.createView(this.activated,_),this.proxyMap.set(lt.instance,Kr),this.currentActivatedRoute$.next({component:lt.instance,activatedRoute:_})}this.activatedView=Ft,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(Ft).then(Xt=>{this.activateEvents.emit(lt.instance),this.stackEvents.emit(Xt)})}canGoBack(_=1,F){return this.stackCtrl.canGoBack(_,F)}pop(_=1,F){return this.stackCtrl.pop(_,F)}getLastUrl(_){const F=this.stackCtrl.getLastUrl(_);return F?F.url:void 0}getLastRouteView(_){return this.stackCtrl.getLastUrl(_)}getRootView(_){return this.stackCtrl.getRootUrl(_)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(_,F){const ee=new Le.gz;return ee._futureSnapshot=F._futureSnapshot,ee._routerState=F._routerState,ee.snapshot=F.snapshot,ee.outlet=F.outlet,ee.component=F.component,ee._paramMap=this.proxyObservable(_,"paramMap"),ee._queryParamMap=this.proxyObservable(_,"queryParamMap"),ee.url=this.proxyObservable(_,"url"),ee.params=this.proxyObservable(_,"params"),ee.queryParams=this.proxyObservable(_,"queryParams"),ee.fragment=this.proxyObservable(_,"fragment"),ee.data=this.proxyObservable(_,"data"),ee}proxyObservable(_,F){return _.pipe((0,kt.h)(ee=>!!ee),(0,ht.w)(ee=>this.currentActivatedRoute$.pipe((0,kt.h)(lt=>null!==lt&&lt.component===ee),(0,ht.w)(lt=>lt&&lt.activatedRoute[F]),(0,qe.x)())))}updateActivatedRouteProxy(_,F){const ee=this.proxyMap.get(_);if(!ee)throw new Error("Could not find activated route proxy for view");ee._futureSnapshot=F._futureSnapshot,ee._routerState=F._routerState,ee.snapshot=F.snapshot,ee.outlet=F.outlet,ee.component=F.component,this.currentActivatedRoute$.next({component:_,activatedRoute:F})}}return p.\u0275fac=function(_){return new(_||p)(u.Y36(Le.y6),u.Y36(u.s_b),u.$8M("name"),u.$8M("tabs"),u.Y36(Ri),u.Y36(Es),u.Y36(u._Vd,8),u.Y36(Ne.Ye),u.Y36(u.SBq),u.Y36(Le.F0),u.Y36(u.R0b),u.Y36(Le.gz),u.Y36(p,12))},p.\u0275dir=u.lG2({type:p,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),p})();class Ei{constructor(M,_,F){this.route=M,this.childContexts=_,this.parent=F}get(M,_){return M===Le.gz?this.route:M===Le.y6?this.childContexts:this.parent.get(M,_)}}let Dn=(()=>{let p=class{constructor(_,F,ee){this.z=ee,this.isCmpOpen=!1,this.el=F.nativeElement,this.el.addEventListener("willPresent",()=>{this.isCmpOpen=!0,_.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,_.detectChanges()}),un(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}};return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},p.\u0275cmp=u.Xpm({type:p,selectors:[["ion-modal"]],contentQueries:function(_,F,ee){if(1&_&&u.Suo(ee,u.Rgc,5),2&_){let lt;u.iGM(lt=u.CRH())&&(F.template=lt.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",swipeToClose:"swipeToClose",translucent:"translucent",trigger:"trigger"},decls:1,vars:1,consts:[["class","ion-page",4,"ngIf"],[1,"ion-page"],[3,"ngTemplateOutlet"]],template:function(_,F){1&_&&u.YNc(0,On,2,1,"div",0),2&_&&u.Q6J("ngIf",F.isCmpOpen||F.keepContentsMounted)},dependencies:[Ne.O5,Ne.tP],encapsulation:2,changeDetection:0}),p=(0,j.gn)([yt({inputs:["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","swipeToClose","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"]})],p),p})();class Vr{constructor(M){this.ctrl=M}create(M){return this.ctrl.create(M||{})}dismiss(M,_,F){return this.ctrl.dismiss(M,_,F)}getTop(){return this.ctrl.getTop()}}let qs=(()=>{class p extends Vr{constructor(){super(et.a)}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),Ys=(()=>{class p{open(_){return ke.m.open(_)}close(_){return ke.m.close(_)}toggle(_){return ke.m.toggle(_)}enable(_,F){return ke.m.enable(_,F)}swipeGesture(_,F){return ke.m.swipeGesture(_,F)}isOpen(_){return ke.m.isOpen(_)}isEnabled(_){return ke.m.isEnabled(_)}get(_){return ke.m.get(_)}getOpen(){return ke.m.getOpen()}getMenus(){return ke.m.getMenus()}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();class To{}let Pt=(()=>{class p extends Vr{constructor(_,F,ee,lt){super(et.m),this.angularDelegate=_,this.resolver=F,this.injector=ee,this.environmentInjector=lt}create(_){var F;return super.create(Object.assign(Object.assign({},_),{delegate:this.angularDelegate.create(null!==(F=this.resolver)&&void 0!==F?F:this.environmentInjector,this.injector)}))}}return p.\u0275fac=function(_){return new(_||p)(u.LFG(No),u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(To,8))},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac}),p})(),qn=(()=>{class p extends Vr{constructor(_,F,ee,lt){super(et.c),this.angularDelegate=_,this.resolver=F,this.injector=ee,this.environmentInjector=lt}create(_){var F;return super.create(Object.assign(Object.assign({},_),{delegate:this.angularDelegate.create(null!==(F=this.resolver)&&void 0!==F?F:this.environmentInjector,this.injector)}))}}return p.\u0275fac=function(_){return new(_||p)(u.LFG(No),u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(To,8))},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac}),p})();const Ns=(p,M,_)=>()=>{if(M.defaultView&&"undefined"!=typeof window){(p=>{const M=window,_=M.Ionic;_&&_.config&&"Object"!==_.config.constructor.name||(M.Ionic=M.Ionic||{},M.Ionic.config=Object.assign(Object.assign({},M.Ionic.config),p))})(Object.assign(Object.assign({},p),{_zoneGate:lt=>_.run(lt)}));const ee="__zone_symbol__addEventListener"in M.body?"__zone_symbol__addEventListener":"addEventListener";return function Ze(){var p=[];if("undefined"!=typeof window){var M=window;(!M.customElements||M.Element&&(!M.Element.prototype.closest||!M.Element.prototype.matches||!M.Element.prototype.remove||!M.Element.prototype.getRootNode))&&p.push($.e(6748).then($.t.bind($,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||M.NodeList&&!M.NodeList.prototype.forEach||!M.fetch||!function(){try{var F=new URL("b","http://a");return F.pathname="c%20d","http://a/c%20d"===F.href&&F.searchParams}catch(ee){return!1}}()||"undefined"==typeof WeakMap)&&p.push($.e(2214).then($.t.bind($,4144,23)))}return Promise.all(p)}().then(()=>((p,M)=>"undefined"==typeof window?Promise.resolve():(0,de.p)().then(()=>(nt(),(0,de.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",null,[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),M))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Mn,jmp:lt=>_.runOutsideAngular(lt),ael(lt,Ft,Xt,Tn){lt[ee](Ft,Xt,Tn)},rel(lt,Ft,Xt,Tn){lt.removeEventListener(Ft,Xt,Tn)}}))}};let R=(()=>{class p{static forRoot(_){return{ngModule:p,providers:[{provide:ai,useValue:_},{provide:u.ip1,useFactory:Ns,multi:!0,deps:[ai,Ne.K0,u.R0b]}]}}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275mod=u.oAB({type:p}),p.\u0275inj=u.cJS({providers:[No,Pt,qn],imports:[[Ne.ez]]}),p})()},5942:($t,ze,$)=>{"use strict";$.d(ze,{c:()=>Le});var u=$(5730),W=$(3457);let j;const Te=Ie=>Ie.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ae=Ie=>{if(void 0===j){const Qe=void 0!==Ie.style.webkitAnimationName;j=void 0===Ie.style.animationName&&Qe?"-webkit-":""}return j},he=(Ie,_e,Qe)=>{const Ke=_e.startsWith("animation")?ae(Ie):"";Ie.style.setProperty(Ke+_e,Qe)},oe=(Ie,_e)=>{const Qe=_e.startsWith("animation")?ae(Ie):"";Ie.style.removeProperty(Qe+_e)},se=[],$e=(Ie=[],_e)=>{if(void 0!==_e){const Qe=Array.isArray(_e)?_e:[_e];return[...Ie,...Qe]}return Ie},Le=Ie=>{let _e,Qe,Ke,ut,ot,Ct,de,qe,Ne,Ze,nt,jt,Ot,ke=[],et=[],fe=[],je=!1,ie={},ve=[],be=[],tt={},wt=0,kt=!1,ht=!1,it=!0,Tt=!1,mt=!0,An=!1;const On=Ie,tr=[],Mn=[],Xe=[],bn=[],Fn=[],re=[],Qn=[],Nt=[],Fr=[],Ur=[],Un="function"==typeof AnimationEffect||void 0!==W.w&&"function"==typeof W.w.AnimationEffect,kn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Un,Qt=()=>Ur,Xn=(ue,Fe)=>((null!=Fe&&Fe.oneTimeCallback?Mn:tr).push({c:ue,o:Fe}),Ot),nr=()=>{if(kn)Ur.forEach(ue=>{ue.cancel()}),Ur.length=0;else{const ue=Xe.slice();(0,u.r)(()=>{ue.forEach(Fe=>{oe(Fe,"animation-name"),oe(Fe,"animation-duration"),oe(Fe,"animation-timing-function"),oe(Fe,"animation-iteration-count"),oe(Fe,"animation-delay"),oe(Fe,"animation-play-state"),oe(Fe,"animation-fill-mode"),oe(Fe,"animation-direction")})})}},_r=()=>{Fn.forEach(ue=>{null!=ue&&ue.parentNode&&ue.parentNode.removeChild(ue)}),Fn.length=0},dn=()=>void 0!==ot?ot:de?de.getFill():"both",Me=()=>void 0!==Ne?Ne:void 0!==Ct?Ct:de?de.getDirection():"normal",Ce=()=>kt?"linear":void 0!==Ke?Ke:de?de.getEasing():"linear",Oe=()=>ht?0:void 0!==Ze?Ze:void 0!==Qe?Qe:de?de.getDuration():0,rt=()=>void 0!==ut?ut:de?de.getIterations():1,Ge=()=>void 0!==nt?nt:void 0!==_e?_e:de?de.getDelay():0,Nn=()=>{0!==wt&&(wt--,0===wt&&((()=>{Jr(),Nt.forEach(At=>At()),Fr.forEach(At=>At());const ue=it?1:0,Fe=ve,st=be,_t=tt;Xe.forEach(At=>{const Yt=At.classList;Fe.forEach(ln=>Yt.add(ln)),st.forEach(ln=>Yt.remove(ln));for(const ln in _t)_t.hasOwnProperty(ln)&&he(At,ln,_t[ln])}),tr.forEach(At=>At.c(ue,Ot)),Mn.forEach(At=>At.c(ue,Ot)),Mn.length=0,mt=!0,it&&(Tt=!0),it=!0})(),de&&de.animationFinish()))},pr=(ue=!0)=>{_r();const Fe=(Ie=>(Ie.forEach(_e=>{for(const Qe in _e)if(_e.hasOwnProperty(Qe)){const Ke=_e[Qe];if("easing"===Qe)_e["animation-timing-function"]=Ke,delete _e[Qe];else{const ut=Te(Qe);ut!==Qe&&(_e[ut]=Ke,delete _e[Qe])}}}),Ie))(ke);Xe.forEach(st=>{if(Fe.length>0){const _t=((Ie=[])=>Ie.map(_e=>{const Qe=_e.offset,Ke=[];for(const ut in _e)_e.hasOwnProperty(ut)&&"offset"!==ut&&Ke.push(`${ut}: ${_e[ut]};`);return`${100*Qe}% { ${Ke.join(" ")} }`}).join(" "))(Fe);jt=void 0!==Ie?Ie:(Ie=>{let _e=se.indexOf(Ie);return _e<0&&(_e=se.push(Ie)-1),`ion-animation-${_e}`})(_t);const At=((Ie,_e,Qe)=>{var Ke;const ut=(Ie=>{const _e=void 0!==Ie.getRootNode?Ie.getRootNode():Ie;return _e.head||_e})(Qe),ot=ae(Qe),Ct=ut.querySelector("#"+Ie);if(Ct)return Ct;const ke=(null!==(Ke=Qe.ownerDocument)&&void 0!==Ke?Ke:document).createElement("style");return ke.id=Ie,ke.textContent=`@${ot}keyframes ${Ie} { ${_e} } @${ot}keyframes ${Ie}-alt { ${_e} }`,ut.appendChild(ke),ke})(jt,_t,st);Fn.push(At),he(st,"animation-duration",`${Oe()}ms`),he(st,"animation-timing-function",Ce()),he(st,"animation-delay",`${Ge()}ms`),he(st,"animation-fill-mode",dn()),he(st,"animation-direction",Me());const Yt=rt()===1/0?"infinite":rt().toString();he(st,"animation-iteration-count",Yt),he(st,"animation-play-state","paused"),ue&&he(st,"animation-name",`${At.id}-alt`),(0,u.r)(()=>{he(st,"animation-name",At.id||null)})}})},Or=(ue=!0)=>{(()=>{re.forEach(_t=>_t()),Qn.forEach(_t=>_t());const ue=et,Fe=fe,st=ie;Xe.forEach(_t=>{const At=_t.classList;ue.forEach(Yt=>At.add(Yt)),Fe.forEach(Yt=>At.remove(Yt));for(const Yt in st)st.hasOwnProperty(Yt)&&he(_t,Yt,st[Yt])})})(),ke.length>0&&(kn?(Xe.forEach(ue=>{const Fe=ue.animate(ke,{id:On,delay:Ge(),duration:Oe(),easing:Ce(),iterations:rt(),fill:dn(),direction:Me()});Fe.pause(),Ur.push(Fe)}),Ur.length>0&&(Ur[0].onfinish=()=>{Nn()})):pr(ue)),je=!0},Zr=ue=>{if(ue=Math.min(Math.max(ue,0),.9999),kn)Ur.forEach(Fe=>{Fe.currentTime=Fe.effect.getComputedTiming().delay+Oe()*ue,Fe.pause()});else{const Fe=`-${Oe()*ue}ms`;Xe.forEach(st=>{ke.length>0&&(he(st,"animation-delay",Fe),he(st,"animation-play-state","paused"))})}},Wn=ue=>{Ur.forEach(Fe=>{Fe.effect.updateTiming({delay:Ge(),duration:Oe(),easing:Ce(),iterations:rt(),fill:dn(),direction:Me()})}),void 0!==ue&&Zr(ue)},ui=(ue=!0,Fe)=>{(0,u.r)(()=>{Xe.forEach(st=>{he(st,"animation-name",jt||null),he(st,"animation-duration",`${Oe()}ms`),he(st,"animation-timing-function",Ce()),he(st,"animation-delay",void 0!==Fe?`-${Fe*Oe()}ms`:`${Ge()}ms`),he(st,"animation-fill-mode",dn()||null),he(st,"animation-direction",Me()||null);const _t=rt()===1/0?"infinite":rt().toString();he(st,"animation-iteration-count",_t),ue&&he(st,"animation-name",`${jt}-alt`),(0,u.r)(()=>{he(st,"animation-name",jt||null)})})})},Br=(ue=!1,Fe=!0,st)=>(ue&&bn.forEach(_t=>{_t.update(ue,Fe,st)}),kn?Wn(st):ui(Fe,st),Ot),oi=()=>{je&&(kn?Ur.forEach(ue=>{ue.pause()}):Xe.forEach(ue=>{he(ue,"animation-play-state","paused")}),An=!0)},gr=()=>{qe=void 0,Nn()},Jr=()=>{qe&&clearTimeout(qe)},Y=ue=>new Promise(Fe=>{null!=ue&&ue.sync&&(ht=!0,Xn(()=>ht=!1,{oneTimeCallback:!0})),je||Or(),Tt&&(kn?(Zr(0),Wn()):ui(),Tt=!1),mt&&(wt=bn.length+1,mt=!1),Xn(()=>Fe(),{oneTimeCallback:!0}),bn.forEach(st=>{st.play()}),kn?(Ur.forEach(ue=>{ue.play()}),(0===ke.length||0===Xe.length)&&Nn()):(()=>{if(Jr(),(0,u.r)(()=>{Xe.forEach(ue=>{ke.length>0&&he(ue,"animation-play-state","running")})}),0===ke.length||0===Xe.length)Nn();else{const ue=Ge()||0,Fe=Oe()||0,st=rt()||1;isFinite(st)&&(qe=setTimeout(gr,ue+Fe*st+100)),((Ie,_e)=>{let Qe;const Ke={passive:!0},ot=Ct=>{Ie===Ct.target&&(Qe&&Qe(),Jr(),(0,u.r)(()=>{Xe.forEach(ue=>{oe(ue,"animation-duration"),oe(ue,"animation-delay"),oe(ue,"animation-play-state")}),(0,u.r)(Nn)}))};Ie&&(Ie.addEventListener("webkitAnimationEnd",ot,Ke),Ie.addEventListener("animationend",ot,Ke),Qe=()=>{Ie.removeEventListener("webkitAnimationEnd",ot,Ke),Ie.removeEventListener("animationend",ot,Ke)})})(Xe[0])}})(),An=!1}),Ve=(ue,Fe)=>{const st=ke[0];return void 0===st||void 0!==st.offset&&0!==st.offset?ke=[{offset:0,[ue]:Fe},...ke]:st[ue]=Fe,Ot};return Ot={parentAnimation:de,elements:Xe,childAnimations:bn,id:On,animationFinish:Nn,from:Ve,to:(ue,Fe)=>{const st=ke[ke.length-1];return void 0===st||void 0!==st.offset&&1!==st.offset?ke=[...ke,{offset:1,[ue]:Fe}]:st[ue]=Fe,Ot},fromTo:(ue,Fe,st)=>Ve(ue,Fe).to(ue,st),parent:ue=>(de=ue,Ot),play:Y,pause:()=>(bn.forEach(ue=>{ue.pause()}),oi(),Ot),stop:()=>{bn.forEach(ue=>{ue.stop()}),je&&(nr(),je=!1),kt=!1,ht=!1,mt=!0,Ne=void 0,Ze=void 0,nt=void 0,wt=0,Tt=!1,it=!0,An=!1},destroy:ue=>(bn.forEach(Fe=>{Fe.destroy(ue)}),(ue=>{nr(),ue&&_r()})(ue),Xe.length=0,bn.length=0,ke.length=0,tr.length=0,Mn.length=0,je=!1,mt=!0,Ot),keyframes:ue=>{const Fe=ke!==ue;return ke=ue,Fe&&(ue=>{kn?Qt().forEach(Fe=>{if(Fe.effect.setKeyframes)Fe.effect.setKeyframes(ue);else{const st=new KeyframeEffect(Fe.effect.target,ue,Fe.effect.getTiming());Fe.effect=st}}):pr()})(ke),Ot},addAnimation:ue=>{if(null!=ue)if(Array.isArray(ue))for(const Fe of ue)Fe.parent(Ot),bn.push(Fe);else ue.parent(Ot),bn.push(ue);return Ot},addElement:ue=>{if(null!=ue)if(1===ue.nodeType)Xe.push(ue);else if(ue.length>=0)for(let Fe=0;Fe<ue.length;Fe++)Xe.push(ue[Fe]);else console.error("Invalid addElement value");return Ot},update:Br,fill:ue=>(ot=ue,Br(!0),Ot),direction:ue=>(Ct=ue,Br(!0),Ot),iterations:ue=>(ut=ue,Br(!0),Ot),duration:ue=>(!kn&&0===ue&&(ue=1),Qe=ue,Br(!0),Ot),easing:ue=>(Ke=ue,Br(!0),Ot),delay:ue=>(_e=ue,Br(!0),Ot),getWebAnimations:Qt,getKeyframes:()=>ke,getFill:dn,getDirection:Me,getDelay:Ge,getIterations:rt,getEasing:Ce,getDuration:Oe,afterAddRead:ue=>(Nt.push(ue),Ot),afterAddWrite:ue=>(Fr.push(ue),Ot),afterClearStyles:(ue=[])=>{for(const Fe of ue)tt[Fe]="";return Ot},afterStyles:(ue={})=>(tt=ue,Ot),afterRemoveClass:ue=>(be=$e(be,ue),Ot),afterAddClass:ue=>(ve=$e(ve,ue),Ot),beforeAddRead:ue=>(re.push(ue),Ot),beforeAddWrite:ue=>(Qn.push(ue),Ot),beforeClearStyles:(ue=[])=>{for(const Fe of ue)ie[Fe]="";return Ot},beforeStyles:(ue={})=>(ie=ue,Ot),beforeRemoveClass:ue=>(fe=$e(fe,ue),Ot),beforeAddClass:ue=>(et=$e(et,ue),Ot),onFinish:Xn,isRunning:()=>0!==wt&&!An,progressStart:(ue=!1,Fe)=>(bn.forEach(st=>{st.progressStart(ue,Fe)}),oi(),kt=ue,je||Or(),Br(!1,!0,Fe),Ot),progressStep:ue=>(bn.forEach(Fe=>{Fe.progressStep(ue)}),Zr(ue),Ot),progressEnd:(ue,Fe,st)=>(kt=!1,bn.forEach(_t=>{_t.progressEnd(ue,Fe,st)}),void 0!==st&&(Ze=st),Tt=!1,it=!0,0===ue?(Ne="reverse"===Me()?"normal":"reverse","reverse"===Ne&&(it=!1),kn?(Br(),Zr(1-Fe)):(nt=(1-Fe)*Oe()*-1,Br(!1,!1))):1===ue&&(kn?(Br(),Zr(Fe)):(nt=Fe*Oe()*-1,Br(!1,!1))),void 0!==ue&&(Xn(()=>{Ze=void 0,Ne=void 0,nt=void 0},{oneTimeCallback:!0}),de||Y()),Ot)}}},4349:($t,ze,$)=>{"use strict";$.d(ze,{G:()=>Te});class W{constructor(he,oe,ye,te,se){this.id=oe,this.name=ye,this.disableScroll=se,this.priority=1e6*te+oe,this.ctrl=he}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const he=this.ctrl.capture(this.name,this.id,this.priority);return he&&this.disableScroll&&this.ctrl.disableScroll(this.id),he}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class j{constructor(he,oe,ye,te){this.id=oe,this.disable=ye,this.disableScroll=te,this.ctrl=he}block(){if(this.ctrl){if(this.disable)for(const he of this.disable)this.ctrl.disableGesture(he,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const he of this.disable)this.ctrl.enableGesture(he,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Ae="backdrop-no-scroll",Te=new class u{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(he){var oe;return new W(this,this.newID(),he.name,null!==(oe=he.priority)&&void 0!==oe?oe:0,!!he.disableScroll)}createBlocker(he={}){return new j(this,this.newID(),he.disable,!!he.disableScroll)}start(he,oe,ye){return this.canStart(he)?(this.requestedStart.set(oe,ye),!0):(this.requestedStart.delete(oe),!1)}capture(he,oe,ye){if(!this.start(he,oe,ye))return!1;const te=this.requestedStart;let se=-1e4;if(te.forEach(X=>{se=Math.max(se,X)}),se===ye){this.capturedId=oe,te.clear();const X=new CustomEvent("ionGestureCaptured",{detail:{gestureName:he}});return document.dispatchEvent(X),!0}return te.delete(oe),!1}release(he){this.requestedStart.delete(he),this.capturedId===he&&(this.capturedId=void 0)}disableGesture(he,oe){let ye=this.disabledGestures.get(he);void 0===ye&&(ye=new Set,this.disabledGestures.set(he,ye)),ye.add(oe)}enableGesture(he,oe){const ye=this.disabledGestures.get(he);void 0!==ye&&ye.delete(oe)}disableScroll(he){this.disabledScroll.add(he),1===this.disabledScroll.size&&document.body.classList.add(Ae)}enableScroll(he){this.disabledScroll.delete(he),0===this.disabledScroll.size&&document.body.classList.remove(Ae)}canStart(he){return!(void 0!==this.capturedId||this.isDisabled(he))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(he){const oe=this.disabledGestures.get(he);return!!(oe&&oe.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:($t,ze,$)=>{"use strict";$.r(ze),$.d(ze,{MENU_BACK_BUTTON_PRIORITY:()=>Te,OVERLAY_BACK_BUTTON_PRIORITY:()=>Ae,blockHardwareBackButton:()=>W,startHardwareBackButton:()=>j});var u=$(5861);const W=()=>{document.addEventListener("backbutton",()=>{})},j=()=>{const ae=document;let he=!1;ae.addEventListener("backbutton",()=>{if(he)return;let oe=0,ye=[];const te=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ge,Re){ye.push({priority:ge,handler:Re,id:oe++})}}});ae.dispatchEvent(te);const se=function(){var ge=(0,u.Z)(function*(Re){try{if(null!=Re&&Re.handler){const $e=Re.handler(X);null!=$e&&(yield $e)}}catch($e){console.error($e)}});return function($e){return ge.apply(this,arguments)}}(),X=()=>{if(ye.length>0){let ge={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ye.forEach(Re=>{Re.priority>=ge.priority&&(ge=Re)}),he=!0,ye=ye.filter(Re=>Re.id!==ge.id),se(ge).then(()=>he=!1)}};X()})},Ae=100,Te=99},5730:($t,ze,$)=>{"use strict";$.d(ze,{a:()=>he,b:()=>oe,c:()=>j,d:()=>Re,e:()=>$e,f:()=>ge,g:()=>ye,h:()=>ut,i:()=>ae,j:()=>Ae,k:()=>X,l:()=>Le,m:()=>se,n:()=>Ie,o:()=>Ke,p:()=>Qe,q:()=>ot,r:()=>te,s:()=>Ct,t:()=>u,u:()=>_e});const u=(ke,et=0)=>new Promise(fe=>{W(ke,et,fe)}),W=(ke,et=0,fe)=>{let je,de;const ie={passive:!0},be=()=>{je&&je()},tt=wt=>{(void 0===wt||ke===wt.target)&&(be(),fe(wt))};return ke&&(ke.addEventListener("webkitTransitionEnd",tt,ie),ke.addEventListener("transitionend",tt,ie),de=setTimeout(tt,et+500),je=()=>{de&&(clearTimeout(de),de=void 0),ke.removeEventListener("webkitTransitionEnd",tt,ie),ke.removeEventListener("transitionend",tt,ie)}),be},j=(ke,et)=>{ke.componentOnReady?ke.componentOnReady().then(fe=>et(fe)):te(()=>et(ke))},Ae=(ke,et=[])=>{const fe={};return et.forEach(je=>{ke.hasAttribute(je)&&(null!==ke.getAttribute(je)&&(fe[je]=ke.getAttribute(je)),ke.removeAttribute(je))}),fe},Te=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ae=(ke,et)=>{let fe=Te;return et&&et.length>0&&(fe=fe.filter(je=>!et.includes(je))),Ae(ke,fe)},he=(ke,et,fe,je)=>{var de;if("undefined"!=typeof window){const ie=window,ve=null===(de=null==ie?void 0:ie.Ionic)||void 0===de?void 0:de.config;if(ve){const be=ve.get("_ael");if(be)return be(ke,et,fe,je);if(ve._ael)return ve._ael(ke,et,fe,je)}}return ke.addEventListener(et,fe,je)},oe=(ke,et,fe,je)=>{var de;if("undefined"!=typeof window){const ie=window,ve=null===(de=null==ie?void 0:ie.Ionic)||void 0===de?void 0:de.config;if(ve){const be=ve.get("_rel");if(be)return be(ke,et,fe,je);if(ve._rel)return ve._rel(ke,et,fe,je)}}return ke.removeEventListener(et,fe,je)},ye=(ke,et=ke)=>ke.shadowRoot||et,te=ke=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(ke):"function"==typeof requestAnimationFrame?requestAnimationFrame(ke):setTimeout(ke),se=ke=>!!ke.shadowRoot&&!!ke.attachShadow,X=ke=>{const et=ke.closest("ion-item");return et?et.querySelector("ion-label"):null},ge=ke=>{if(ke.focus(),ke.classList.contains("ion-focusable")){const et=ke.closest("ion-app");et&&et.setFocus([ke])}},Re=(ke,et)=>{let fe;const je=ke.getAttribute("aria-labelledby"),de=ke.id;let ie=null!==je&&""!==je.trim()?je:et+"-lbl",ve=null!==je&&""!==je.trim()?document.getElementById(je):X(ke);return ve?(null===je&&(ve.id=ie),fe=ve.textContent,ve.setAttribute("aria-hidden","true")):""!==de.trim()&&(ve=document.querySelector(`label[for="${de}"]`),ve&&(""!==ve.id?ie=ve.id:ve.id=ie=`${de}-lbl`,fe=ve.textContent)),{label:ve,labelId:ie,labelText:fe}},$e=(ke,et,fe,je,de)=>{if(ke||se(et)){let ie=et.querySelector("input.aux-input");ie||(ie=et.ownerDocument.createElement("input"),ie.type="hidden",ie.classList.add("aux-input"),et.appendChild(ie)),ie.disabled=de,ie.name=fe,ie.value=je||""}},Le=(ke,et,fe)=>Math.max(ke,Math.min(et,fe)),Ie=(ke,et)=>{if(!ke){const fe="ASSERT: "+et;throw console.error(fe),new Error(fe)}},_e=ke=>ke.timeStamp||Date.now(),Qe=ke=>{if(ke){const et=ke.changedTouches;if(et&&et.length>0){const fe=et[0];return{x:fe.clientX,y:fe.clientY}}if(void 0!==ke.pageX)return{x:ke.pageX,y:ke.pageY}}return{x:0,y:0}},Ke=ke=>{const et="rtl"===document.dir;switch(ke){case"start":return et;case"end":return!et;default:throw new Error(`"${ke}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ut=(ke,et)=>{const fe=ke._original||ke;return{_original:ke,emit:ot(fe.emit.bind(fe),et)}},ot=(ke,et=0)=>{let fe;return(...je)=>{clearTimeout(fe),fe=setTimeout(ke,et,...je)}},Ct=(ke,et)=>{if(null!=ke||(ke={}),null!=et||(et={}),ke===et)return!0;const fe=Object.keys(ke);if(fe.length!==Object.keys(et).length)return!1;for(const je of fe)if(!(je in et)||ke[je]!==et[je])return!1;return!0}},3457:($t,ze,$)=>{"use strict";$.d(ze,{w:()=>u});const u="undefined"!=typeof window?window:void 0},385:($t,ze,$)=>{"use strict";$.d(ze,{m:()=>se});var u=$(5861),W=$(7593),j=$(5730),Ae=$(9658),Te=$(5942);const ae=X=>(0,Te.c)().duration(X?400:300),he=X=>{let ge,Re;const $e=X.width+8,Le=(0,Te.c)(),Ie=(0,Te.c)();X.isEndSide?(ge=$e+"px",Re="0px"):(ge=-$e+"px",Re="0px"),Le.addElement(X.menuInnerEl).fromTo("transform",`translateX(${ge})`,`translateX(${Re})`);const Qe="ios"===(0,Ae.b)(X),Ke=Qe?.2:.25;return Ie.addElement(X.backdropEl).fromTo("opacity",.01,Ke),ae(Qe).addAnimation([Le,Ie])},oe=X=>{let ge,Re;const $e=(0,Ae.b)(X),Le=X.width;X.isEndSide?(ge=-Le+"px",Re=Le+"px"):(ge=Le+"px",Re=-Le+"px");const Ie=(0,Te.c)().addElement(X.menuInnerEl).fromTo("transform",`translateX(${Re})`,"translateX(0px)"),_e=(0,Te.c)().addElement(X.contentEl).fromTo("transform","translateX(0px)",`translateX(${ge})`),Qe=(0,Te.c)().addElement(X.backdropEl).fromTo("opacity",.01,.32);return ae("ios"===$e).addAnimation([Ie,_e,Qe])},ye=X=>{const ge=(0,Ae.b)(X),Re=X.width*(X.isEndSide?-1:1)+"px",$e=(0,Te.c)().addElement(X.contentEl).fromTo("transform","translateX(0px)",`translateX(${Re})`);return ae("ios"===ge).addAnimation($e)},se=(()=>{const X=new Map,ge=[],Re=function(){var qe=(0,u.Z)(function*(Ne){const Ze=yield ut(Ne);return!!Ze&&Ze.open()});return function(Ze){return qe.apply(this,arguments)}}(),$e=function(){var qe=(0,u.Z)(function*(Ne){const Ze=yield void 0!==Ne?ut(Ne):ot();return void 0!==Ze&&Ze.close()});return function(Ze){return qe.apply(this,arguments)}}(),Le=function(){var qe=(0,u.Z)(function*(Ne){const Ze=yield ut(Ne);return!!Ze&&Ze.toggle()});return function(Ze){return qe.apply(this,arguments)}}(),Ie=function(){var qe=(0,u.Z)(function*(Ne,Ze){const nt=yield ut(Ze);return nt&&(nt.disabled=!Ne),nt});return function(Ze,nt){return qe.apply(this,arguments)}}(),_e=function(){var qe=(0,u.Z)(function*(Ne,Ze){const nt=yield ut(Ze);return nt&&(nt.swipeGesture=Ne),nt});return function(Ze,nt){return qe.apply(this,arguments)}}(),Qe=function(){var qe=(0,u.Z)(function*(Ne){if(null!=Ne){const Ze=yield ut(Ne);return void 0!==Ze&&Ze.isOpen()}return void 0!==(yield ot())});return function(Ze){return qe.apply(this,arguments)}}(),Ke=function(){var qe=(0,u.Z)(function*(Ne){const Ze=yield ut(Ne);return!!Ze&&!Ze.disabled});return function(Ze){return qe.apply(this,arguments)}}(),ut=function(){var qe=(0,u.Z)(function*(Ne){return yield ht(),"start"===Ne||"end"===Ne?kt(it=>it.side===Ne&&!it.disabled)||kt(it=>it.side===Ne):null!=Ne?kt(nt=>nt.menuId===Ne):kt(nt=>!nt.disabled)||(ge.length>0?ge[0].el:void 0)});return function(Ze){return qe.apply(this,arguments)}}(),ot=function(){var qe=(0,u.Z)(function*(){return yield ht(),be()});return function(){return qe.apply(this,arguments)}}(),Ct=function(){var qe=(0,u.Z)(function*(){return yield ht(),tt()});return function(){return qe.apply(this,arguments)}}(),ke=function(){var qe=(0,u.Z)(function*(){return yield ht(),wt()});return function(){return qe.apply(this,arguments)}}(),et=(qe,Ne)=>{X.set(qe,Ne)},de=qe=>{const Ne=qe.side;ge.filter(Ze=>Ze.side===Ne&&Ze!==qe).forEach(Ze=>Ze.disabled=!0)},ie=function(){var qe=(0,u.Z)(function*(Ne,Ze,nt){if(wt())return!1;if(Ze){const it=yield ot();it&&Ne.el!==it&&(yield it.setOpen(!1,!1))}return Ne._setOpen(Ze,nt)});return function(Ze,nt,it){return qe.apply(this,arguments)}}(),be=()=>kt(qe=>qe._isOpen),tt=()=>ge.map(qe=>qe.el),wt=()=>ge.some(qe=>qe.isAnimating),kt=qe=>{const Ne=ge.find(qe);if(void 0!==Ne)return Ne.el},ht=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(qe=>new Promise(Ne=>(0,j.c)(qe,Ne))));return et("reveal",ye),et("push",oe),et("overlay",he),"undefined"!=typeof document&&document.addEventListener("ionBackButton",qe=>{const Ne=be();Ne&&qe.detail.register(W.MENU_BACK_BUTTON_PRIORITY,()=>Ne.close())}),{registerAnimation:et,get:ut,getMenus:Ct,getOpen:ot,isEnabled:Ke,swipeGesture:_e,isAnimating:ke,isOpen:Qe,enable:Ie,toggle:Le,close:$e,open:Re,_getOpenSync:be,_createAnimation:(qe,Ne)=>{const Ze=X.get(qe);if(!Ze)throw new Error("animation not registered");return Ze(Ne)},_register:qe=>{ge.indexOf(qe)<0&&(qe.disabled||de(qe),ge.push(qe))},_unregister:qe=>{const Ne=ge.indexOf(qe);Ne>-1&&ge.splice(Ne,1)},_setOpen:ie,_setActiveMenu:de}})()},1308:($t,ze,$)=>{"use strict";$.d(ze,{B:()=>Ai,H:()=>Xe,a:()=>it,b:()=>Bt,c:()=>$i,e:()=>Ar,f:()=>di,g:()=>Tt,h:()=>tr,i:()=>Vn,j:()=>Me,k:()=>on,p:()=>Le,r:()=>vr,s:()=>Re});var u=$(5861);let j,Ae,Te,ae=!1,he=!1,oe=!1,ye=!1,te=!1;const se="undefined"!=typeof window?window:{},X=se.document||{head:{}},ge={$flags$:0,$resourcesUrl$:"",jmp:Y=>Y(),raf:Y=>requestAnimationFrame(Y),ael:(Y,me,Ve,We)=>Y.addEventListener(me,Ve,We),rel:(Y,me,Ve,We)=>Y.removeEventListener(me,Ve,We),ce:(Y,me)=>new CustomEvent(Y,me)},Re=Y=>{Object.assign(ge,Y)},Le=Y=>Promise.resolve(Y),Ie=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(Y){}return!1})(),_e=(Y,me,Ve,We)=>{Ve&&Ve.map(([pt,ue,Fe])=>{const st=Ke(Y,pt),_t=Qe(me,Fe),At=ut(pt);ge.ael(st,ue,_t,At),(me.$rmListeners$=me.$rmListeners$||[]).push(()=>ge.rel(st,ue,_t,At))})},Qe=(Y,me)=>Ve=>{try{256&Y.$flags$?Y.$lazyInstance$[me](Ve):(Y.$queuedListeners$=Y.$queuedListeners$||[]).push([me,Ve])}catch(We){Wn(We)}},Ke=(Y,me)=>4&me?X:8&me?se:16&me?X.body:Y,ut=Y=>0!=(2&Y),fe="s-id",je="sty-id",ve="http://www.w3.org/1999/xlink",wt=new WeakMap,kt=(Y,me,Ve)=>{let We=In.get(Y);Ie&&Ve?(We=We||new CSSStyleSheet,"string"==typeof We?We=me:We.replaceSync(me)):We=me,In.set(Y,We)},ht=(Y,me,Ve,We)=>{let pt=Ne(me,Ve);const ue=In.get(pt);if(Y=11===Y.nodeType?Y:X,ue)if("string"==typeof ue){let st,Fe=wt.get(Y=Y.head||Y);Fe||wt.set(Y,Fe=new Set),Fe.has(pt)||(Y.host&&(st=Y.querySelector(`[${je}="${pt}"]`))?st.innerHTML=ue:(st=X.createElement("style"),st.innerHTML=ue,Y.insertBefore(st,Y.querySelector("link"))),Fe&&Fe.add(pt))}else Y.adoptedStyleSheets.includes(ue)||(Y.adoptedStyleSheets=[...Y.adoptedStyleSheets,ue]);return pt},Ne=(Y,me)=>"sc-"+(me&&32&Y.$flags$?Y.$tagName$+"-"+me:Y.$tagName$),Ze=Y=>Y.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),it=Y=>ci.push(Y),Tt=Y=>pr(Y).$modeName$,mt={},On=Y=>"object"==(Y=typeof Y)||"function"===Y,tr=(Y,me,...Ve)=>{let We=null,pt=null,ue=null,Fe=!1,st=!1;const _t=[],At=ln=>{for(let Cn=0;Cn<ln.length;Cn++)We=ln[Cn],Array.isArray(We)?At(We):null!=We&&"boolean"!=typeof We&&((Fe="function"!=typeof Y&&!On(We))&&(We=String(We)),Fe&&st?_t[_t.length-1].$text$+=We:_t.push(Fe?Mn(null,We):We),st=Fe)};if(At(Ve),me){me.key&&(pt=me.key),me.name&&(ue=me.name);{const ln=me.className||me.class;ln&&(me.class="object"!=typeof ln?ln:Object.keys(ln).filter(Cn=>ln[Cn]).join(" "))}}if("function"==typeof Y)return Y(null===me?{}:me,_t,Fn);const Yt=Mn(Y,null);return Yt.$attrs$=me,_t.length>0&&(Yt.$children$=_t),Yt.$key$=pt,Yt.$name$=ue,Yt},Mn=(Y,me)=>({$flags$:0,$tag$:Y,$text$:me,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Xe={},Fn={forEach:(Y,me)=>Y.map(re).forEach(me),map:(Y,me)=>Y.map(re).map(me).map(Qn)},re=Y=>({vattrs:Y.$attrs$,vchildren:Y.$children$,vkey:Y.$key$,vname:Y.$name$,vtag:Y.$tag$,vtext:Y.$text$}),Qn=Y=>{if("function"==typeof Y.vtag){const Ve=Object.assign({},Y.vattrs);return Y.vkey&&(Ve.key=Y.vkey),Y.vname&&(Ve.name=Y.vname),tr(Y.vtag,Ve,...Y.vchildren||[])}const me=Mn(Y.vtag,Y.vtext);return me.$attrs$=Y.vattrs,me.$children$=Y.vchildren,me.$key$=Y.vkey,me.$name$=Y.vname,me},Nt=(Y,me,Ve,We,pt,ue)=>{if(Ve!==We){let Fe=Zr(Y,me),st=me.toLowerCase();if("class"===me){const _t=Y.classList,At=Ur(Ve),Yt=Ur(We);_t.remove(...At.filter(ln=>ln&&!Yt.includes(ln))),_t.add(...Yt.filter(ln=>ln&&!At.includes(ln)))}else if("style"===me){for(const _t in Ve)(!We||null==We[_t])&&(_t.includes("-")?Y.style.removeProperty(_t):Y.style[_t]="");for(const _t in We)(!Ve||We[_t]!==Ve[_t])&&(_t.includes("-")?Y.style.setProperty(_t,We[_t]):Y.style[_t]=We[_t])}else if("key"!==me)if("ref"===me)We&&We(Y);else if(Fe||"o"!==me[0]||"n"!==me[1]){const _t=On(We);if((Fe||_t&&null!==We)&&!pt)try{if(Y.tagName.includes("-"))Y[me]=We;else{const Yt=null==We?"":We;"list"===me?Fe=!1:(null==Ve||Y[me]!=Yt)&&(Y[me]=Yt)}}catch(Yt){}let At=!1;st!==(st=st.replace(/^xlink\:?/,""))&&(me=st,At=!0),null==We||!1===We?(!1!==We||""===Y.getAttribute(me))&&(At?Y.removeAttributeNS(ve,me):Y.removeAttribute(me)):(!Fe||4&ue||pt)&&!_t&&(We=!0===We?"":We,At?Y.setAttributeNS(ve,me,We):Y.setAttribute(me,We))}else me="-"===me[2]?me.slice(3):Zr(se,st)?st.slice(2):st[2]+me.slice(3),Ve&&ge.rel(Y,me,Ve,!1),We&&ge.ael(Y,me,We,!1)}},Fr=/\s/,Ur=Y=>Y?Y.split(Fr):[],Un=(Y,me,Ve,We)=>{const pt=11===me.$elm$.nodeType&&me.$elm$.host?me.$elm$.host:me.$elm$,ue=Y&&Y.$attrs$||mt,Fe=me.$attrs$||mt;for(We in ue)We in Fe||Nt(pt,We,ue[We],void 0,Ve,me.$flags$);for(We in Fe)Nt(pt,We,ue[We],Fe[We],Ve,me.$flags$)},kn=(Y,me,Ve,We)=>{const pt=me.$children$[Ve];let Fe,st,_t,ue=0;if(ae||(oe=!0,"slot"===pt.$tag$&&(j&&We.classList.add(j+"-s"),pt.$flags$|=pt.$children$?2:1)),null!==pt.$text$)Fe=pt.$elm$=X.createTextNode(pt.$text$);else if(1&pt.$flags$)Fe=pt.$elm$=X.createTextNode("");else{if(ye||(ye="svg"===pt.$tag$),Fe=pt.$elm$=X.createElementNS(ye?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&pt.$flags$?"slot-fb":pt.$tag$),ye&&"foreignObject"===pt.$tag$&&(ye=!1),Un(null,pt,ye),(Y=>null!=Y)(j)&&Fe["s-si"]!==j&&Fe.classList.add(Fe["s-si"]=j),pt.$children$)for(ue=0;ue<pt.$children$.length;++ue)st=kn(Y,pt,ue,Fe),st&&Fe.appendChild(st);"svg"===pt.$tag$?ye=!1:"foreignObject"===Fe.tagName&&(ye=!0)}return Fe["s-hn"]=Te,3&pt.$flags$&&(Fe["s-sr"]=!0,Fe["s-cr"]=Ae,Fe["s-sn"]=pt.$name$||"",_t=Y&&Y.$children$&&Y.$children$[Ve],_t&&_t.$tag$===pt.$tag$&&Y.$elm$&&Wr(Y.$elm$,!1)),Fe},Wr=(Y,me)=>{ge.$flags$|=1;const Ve=Y.childNodes;for(let We=Ve.length-1;We>=0;We--){const pt=Ve[We];pt["s-hn"]!==Te&&pt["s-ol"]&&(Xn(pt).insertBefore(pt,yt(pt)),pt["s-ol"].remove(),pt["s-ol"]=void 0,oe=!0),me&&Wr(pt,me)}ge.$flags$&=-2},Qt=(Y,me,Ve,We,pt,ue)=>{let st,Fe=Y["s-cr"]&&Y["s-cr"].parentNode||Y;for(Fe.shadowRoot&&Fe.tagName===Te&&(Fe=Fe.shadowRoot);pt<=ue;++pt)We[pt]&&(st=kn(null,Ve,pt,Y),st&&(We[pt].$elm$=st,Fe.insertBefore(st,yt(me))))},or=(Y,me,Ve,We,pt)=>{for(;me<=Ve;++me)(We=Y[me])&&(pt=We.$elm$,_n(We),he=!0,pt["s-ol"]?pt["s-ol"].remove():Wr(pt,!0),pt.remove())},nn=(Y,me)=>Y.$tag$===me.$tag$&&("slot"===Y.$tag$?Y.$name$===me.$name$:Y.$key$===me.$key$),yt=Y=>Y&&Y["s-ol"]||Y,Xn=Y=>(Y["s-ol"]?Y["s-ol"]:Y).parentNode,Jn=(Y,me)=>{const Ve=me.$elm$=Y.$elm$,We=Y.$children$,pt=me.$children$,ue=me.$tag$,Fe=me.$text$;let st;null===Fe?(ye="svg"===ue||"foreignObject"!==ue&&ye,"slot"===ue||Un(Y,me,ye),null!==We&&null!==pt?((Y,me,Ve,We)=>{let ur,hi,pt=0,ue=0,Fe=0,st=0,_t=me.length-1,At=me[0],Yt=me[_t],ln=We.length-1,Cn=We[0],Er=We[ln];for(;pt<=_t&&ue<=ln;)if(null==At)At=me[++pt];else if(null==Yt)Yt=me[--_t];else if(null==Cn)Cn=We[++ue];else if(null==Er)Er=We[--ln];else if(nn(At,Cn))Jn(At,Cn),At=me[++pt],Cn=We[++ue];else if(nn(Yt,Er))Jn(Yt,Er),Yt=me[--_t],Er=We[--ln];else if(nn(At,Er))("slot"===At.$tag$||"slot"===Er.$tag$)&&Wr(At.$elm$.parentNode,!1),Jn(At,Er),Y.insertBefore(At.$elm$,Yt.$elm$.nextSibling),At=me[++pt],Er=We[--ln];else if(nn(Yt,Cn))("slot"===At.$tag$||"slot"===Er.$tag$)&&Wr(Yt.$elm$.parentNode,!1),Jn(Yt,Cn),Y.insertBefore(Yt.$elm$,At.$elm$),Yt=me[--_t],Cn=We[++ue];else{for(Fe=-1,st=pt;st<=_t;++st)if(me[st]&&null!==me[st].$key$&&me[st].$key$===Cn.$key$){Fe=st;break}Fe>=0?(hi=me[Fe],hi.$tag$!==Cn.$tag$?ur=kn(me&&me[ue],Ve,Fe,Y):(Jn(hi,Cn),me[Fe]=void 0,ur=hi.$elm$),Cn=We[++ue]):(ur=kn(me&&me[ue],Ve,ue,Y),Cn=We[++ue]),ur&&Xn(At.$elm$).insertBefore(ur,yt(At.$elm$))}pt>_t?Qt(Y,null==We[ln+1]?null:We[ln+1].$elm$,Ve,We,ue,ln):ue>ln&&or(me,pt,_t)})(Ve,We,me,pt):null!==pt?(null!==Y.$text$&&(Ve.textContent=""),Qt(Ve,null,me,pt,0,pt.length-1)):null!==We&&or(We,0,We.length-1),ye&&"svg"===ue&&(ye=!1)):(st=Ve["s-cr"])?st.parentNode.textContent=Fe:Y.$text$!==Fe&&(Ve.data=Fe)},nr=Y=>{const me=Y.childNodes;let Ve,We,pt,ue,Fe,st;for(We=0,pt=me.length;We<pt;We++)if(Ve=me[We],1===Ve.nodeType){if(Ve["s-sr"])for(Fe=Ve["s-sn"],Ve.hidden=!1,ue=0;ue<pt;ue++)if(st=me[ue].nodeType,me[ue]["s-hn"]!==Ve["s-hn"]||""!==Fe){if(1===st&&Fe===me[ue].getAttribute("slot")){Ve.hidden=!0;break}}else if(1===st||3===st&&""!==me[ue].textContent.trim()){Ve.hidden=!0;break}nr(Ve)}},_r=[],rn=Y=>{let me,Ve,We,pt,ue,Fe,st=0;const _t=Y.childNodes,At=_t.length;for(;st<At;st++){if(me=_t[st],me["s-sr"]&&(Ve=me["s-cr"])&&Ve.parentNode)for(We=Ve.parentNode.childNodes,pt=me["s-sn"],Fe=We.length-1;Fe>=0;Fe--)Ve=We[Fe],!Ve["s-cn"]&&!Ve["s-nr"]&&Ve["s-hn"]!==me["s-hn"]&&(Qr(Ve,pt)?(ue=_r.find(Yt=>Yt.$nodeToRelocate$===Ve),he=!0,Ve["s-sn"]=Ve["s-sn"]||pt,ue?ue.$slotRefNode$=me:_r.push({$slotRefNode$:me,$nodeToRelocate$:Ve}),Ve["s-sr"]&&_r.map(Yt=>{Qr(Yt.$nodeToRelocate$,Ve["s-sn"])&&(ue=_r.find(ln=>ln.$nodeToRelocate$===Ve),ue&&!Yt.$slotRefNode$&&(Yt.$slotRefNode$=ue.$slotRefNode$))})):_r.some(Yt=>Yt.$nodeToRelocate$===Ve)||_r.push({$nodeToRelocate$:Ve}));1===me.nodeType&&rn(me)}},Qr=(Y,me)=>1===Y.nodeType?null===Y.getAttribute("slot")&&""===me||Y.getAttribute("slot")===me:Y["s-sn"]===me||""===me,_n=Y=>{Y.$attrs$&&Y.$attrs$.ref&&Y.$attrs$.ref(null),Y.$children$&&Y.$children$.map(_n)},Vn=Y=>pr(Y).$hostElement$,Ar=(Y,me,Ve)=>{const We=Vn(Y);return{emit:pt=>Lr(We,me,{bubbles:!!(4&Ve),composed:!!(2&Ve),cancelable:!!(1&Ve),detail:pt})}},Lr=(Y,me,Ve)=>{const We=ge.ce(me,Ve);return Y.dispatchEvent(We),We},Jt=(Y,me)=>{me&&!Y.$onRenderResolve$&&me["s-p"]&&me["s-p"].push(new Promise(Ve=>Y.$onRenderResolve$=Ve))},St=(Y,me)=>{if(Y.$flags$|=16,!(4&Y.$flags$))return Jt(Y,Y.$ancestorComponent$),$i(()=>Zt(Y,me));Y.$flags$|=512},Zt=(Y,me)=>{const We=Y.$lazyInstance$;let pt;return me&&(Y.$flags$|=256,Y.$queuedListeners$&&(Y.$queuedListeners$.map(([ue,Fe])=>Oe(We,ue,Fe)),Y.$queuedListeners$=null),pt=Oe(We,"componentWillLoad")),pt=rt(pt,()=>Oe(We,"componentWillRender")),rt(pt,()=>gn(Y,We,me))},gn=function(){var Y=(0,u.Z)(function*(me,Ve,We){const pt=me.$hostElement$,Fe=pt["s-rc"];We&&(Y=>{const me=Y.$cmpMeta$,Ve=Y.$hostElement$,We=me.$flags$,ue=ht(Ve.shadowRoot?Ve.shadowRoot:Ve.getRootNode(),me,Y.$modeName$);10&We&&(Ve["s-sc"]=ue,Ve.classList.add(ue+"-h"),2&We&&Ve.classList.add(ue+"-s"))})(me);cn(me,Ve),Fe&&(Fe.map(_t=>_t()),pt["s-rc"]=void 0);{const _t=pt["s-p"],At=()=>dn(me);0===_t.length?At():(Promise.all(_t).then(At),me.$flags$|=4,_t.length=0)}});return function(Ve,We,pt){return Y.apply(this,arguments)}}(),cn=(Y,me,Ve)=>{try{me=me.render&&me.render(),Y.$flags$&=-17,Y.$flags$|=2,((Y,me)=>{const Ve=Y.$hostElement$,We=Y.$cmpMeta$,pt=Y.$vnode$||Mn(null,null),ue=(Y=>Y&&Y.$tag$===Xe)(me)?me:tr(null,null,me);if(Te=Ve.tagName,We.$attrsToReflect$&&(ue.$attrs$=ue.$attrs$||{},We.$attrsToReflect$.map(([Fe,st])=>ue.$attrs$[st]=Ve[Fe])),ue.$tag$=null,ue.$flags$|=4,Y.$vnode$=ue,ue.$elm$=pt.$elm$=Ve.shadowRoot||Ve,j=Ve["s-sc"],Ae=Ve["s-cr"],ae=0!=(1&We.$flags$),he=!1,Jn(pt,ue),ge.$flags$|=1,oe){rn(ue.$elm$);let Fe,st,_t,At,Yt,ln,Cn=0;for(;Cn<_r.length;Cn++)Fe=_r[Cn],st=Fe.$nodeToRelocate$,st["s-ol"]||(_t=X.createTextNode(""),_t["s-nr"]=st,st.parentNode.insertBefore(st["s-ol"]=_t,st));for(Cn=0;Cn<_r.length;Cn++)if(Fe=_r[Cn],st=Fe.$nodeToRelocate$,Fe.$slotRefNode$){for(At=Fe.$slotRefNode$.parentNode,Yt=Fe.$slotRefNode$.nextSibling,_t=st["s-ol"];_t=_t.previousSibling;)if(ln=_t["s-nr"],ln&&ln["s-sn"]===st["s-sn"]&&At===ln.parentNode&&(ln=ln.nextSibling,!ln||!ln["s-nr"])){Yt=ln;break}(!Yt&&At!==st.parentNode||st.nextSibling!==Yt)&&st!==Yt&&(!st["s-hn"]&&st["s-ol"]&&(st["s-hn"]=st["s-ol"].parentNode.nodeName),At.insertBefore(st,Yt))}else 1===st.nodeType&&(st.hidden=!0)}he&&nr(ue.$elm$),ge.$flags$&=-2,_r.length=0})(Y,me)}catch(We){Wn(We,Y.$hostElement$)}return null},dn=Y=>{const Ve=Y.$hostElement$,pt=Y.$lazyInstance$,ue=Y.$ancestorComponent$;Oe(pt,"componentDidRender"),64&Y.$flags$?Oe(pt,"componentDidUpdate"):(Y.$flags$|=64,Ge(Ve),Oe(pt,"componentDidLoad"),Y.$onReadyResolve$(Ve),ue||Ce()),Y.$onInstanceResolve$(Ve),Y.$onRenderResolve$&&(Y.$onRenderResolve$(),Y.$onRenderResolve$=void 0),512&Y.$flags$&&bi(()=>St(Y,!1)),Y.$flags$&=-517},Me=Y=>{{const me=pr(Y),Ve=me.$hostElement$.isConnected;return Ve&&2==(18&me.$flags$)&&St(me,!1),Ve}},Ce=Y=>{Ge(X.documentElement),bi(()=>Lr(se,"appload",{detail:{namespace:"ionic"}}))},Oe=(Y,me,Ve)=>{if(Y&&Y[me])try{return Y[me](Ve)}catch(We){Wn(We)}},rt=(Y,me)=>Y&&Y.then?Y.then(me):me(),Ge=Y=>Y.classList.add("hydrated"),en=(Y,me,Ve,We,pt,ue,Fe)=>{let st,_t,At,Yt;if(1===ue.nodeType){for(st=ue.getAttribute("c-id"),st&&(_t=st.split("."),(_t[0]===Fe||"0"===_t[0])&&(At={$flags$:0,$hostId$:_t[0],$nodeId$:_t[1],$depth$:_t[2],$index$:_t[3],$tag$:ue.tagName.toLowerCase(),$elm$:ue,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},me.push(At),ue.removeAttribute("c-id"),Y.$children$||(Y.$children$=[]),Y.$children$[At.$index$]=At,Y=At,We&&"0"===At.$depth$&&(We[At.$index$]=At.$elm$))),Yt=ue.childNodes.length-1;Yt>=0;Yt--)en(Y,me,Ve,We,pt,ue.childNodes[Yt],Fe);if(ue.shadowRoot)for(Yt=ue.shadowRoot.childNodes.length-1;Yt>=0;Yt--)en(Y,me,Ve,We,pt,ue.shadowRoot.childNodes[Yt],Fe)}else if(8===ue.nodeType)_t=ue.nodeValue.split("."),(_t[1]===Fe||"0"===_t[1])&&(st=_t[0],At={$flags$:0,$hostId$:_t[1],$nodeId$:_t[2],$depth$:_t[3],$index$:_t[4],$elm$:ue,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===st?(At.$elm$=ue.nextSibling,At.$elm$&&3===At.$elm$.nodeType&&(At.$text$=At.$elm$.textContent,me.push(At),ue.remove(),Y.$children$||(Y.$children$=[]),Y.$children$[At.$index$]=At,We&&"0"===At.$depth$&&(We[At.$index$]=At.$elm$))):At.$hostId$===Fe&&("s"===st?(At.$tag$="slot",ue["s-sn"]=_t[5]?At.$name$=_t[5]:"",ue["s-sr"]=!0,We&&(At.$elm$=X.createElement(At.$tag$),At.$name$&&At.$elm$.setAttribute("name",At.$name$),ue.parentNode.insertBefore(At.$elm$,ue),ue.remove(),"0"===At.$depth$&&(We[At.$index$]=At.$elm$)),Ve.push(At),Y.$children$||(Y.$children$=[]),Y.$children$[At.$index$]=At):"r"===st&&(We?ue.remove():(pt["s-cr"]=ue,ue["s-cn"]=!0))));else if(Y&&"style"===Y.$tag$){const ln=Mn(null,ue.textContent);ln.$elm$=ue,ln.$index$="0",Y.$children$=[ln]}},jn=(Y,me)=>{if(1===Y.nodeType){let Ve=0;for(;Ve<Y.childNodes.length;Ve++)jn(Y.childNodes[Ve],me);if(Y.shadowRoot)for(Ve=0;Ve<Y.shadowRoot.childNodes.length;Ve++)jn(Y.shadowRoot.childNodes[Ve],me)}else if(8===Y.nodeType){const Ve=Y.nodeValue.split(".");"o"===Ve[0]&&(me.set(Ve[1]+"."+Ve[2],Y),Y.nodeValue="",Y["s-en"]=Ve[3])}},xe=(Y,me,Ve)=>{if(me.$members$){Y.watchers&&(me.$watchers$=Y.watchers);const We=Object.entries(me.$members$),pt=Y.prototype;if(We.map(([ue,[Fe]])=>{31&Fe||2&Ve&&32&Fe?Object.defineProperty(pt,ue,{get(){return((Y,me)=>pr(this).$instanceValues$.get(me))(0,ue)},set(st){((Y,me,Ve,We)=>{const pt=pr(Y),ue=pt.$hostElement$,Fe=pt.$instanceValues$.get(me),st=pt.$flags$,_t=pt.$lazyInstance$;Ve=((Y,me)=>null==Y||On(Y)?Y:4&me?"false"!==Y&&(""===Y||!!Y):2&me?parseFloat(Y):1&me?String(Y):Y)(Ve,We.$members$[me][0]);const At=Number.isNaN(Fe)&&Number.isNaN(Ve);if((!(8&st)||void 0===Fe)&&Ve!==Fe&&!At&&(pt.$instanceValues$.set(me,Ve),_t)){if(We.$watchers$&&128&st){const ln=We.$watchers$[me];ln&&ln.map(Cn=>{try{_t[Cn](Ve,Fe,me)}catch(Er){Wn(Er,ue)}})}2==(18&st)&&St(pt,!1)}})(this,ue,st,me)},configurable:!0,enumerable:!0}):1&Ve&&64&Fe&&Object.defineProperty(pt,ue,{value(...st){const _t=pr(this);return _t.$onInstancePromise$.then(()=>_t.$lazyInstance$[ue](...st))}})}),1&Ve){const ue=new Map;pt.attributeChangedCallback=function(Fe,st,_t){ge.jmp(()=>{const At=ue.get(Fe);if(this.hasOwnProperty(At))_t=this[At],delete this[At];else if(pt.hasOwnProperty(At)&&"number"==typeof this[At]&&this[At]==_t)return;this[At]=(null!==_t||"boolean"!=typeof this[At])&&_t})},Y.observedAttributes=We.filter(([Fe,st])=>15&st[0]).map(([Fe,st])=>{const _t=st[1]||Fe;return ue.set(_t,Fe),512&st[0]&&me.$attrsToReflect$.push([Fe,_t]),_t})}}return Y},we=function(){var Y=(0,u.Z)(function*(me,Ve,We,pt,ue){if(0==(32&Ve.$flags$)){{if(Ve.$flags$|=32,(ue=Br(We)).then){const At=()=>{};ue=yield ue,At()}ue.isProxied||(We.$watchers$=ue.watchers,xe(ue,We,2),ue.isProxied=!0);const _t=()=>{};Ve.$flags$|=8;try{new ue(Ve)}catch(At){Wn(At)}Ve.$flags$&=-9,Ve.$flags$|=128,_t(),at(Ve.$lazyInstance$)}if(ue.style){let _t=ue.style;"string"!=typeof _t&&(_t=_t[Ve.$modeName$=(Y=>ci.map(me=>me(Y)).find(me=>!!me))(me)]);const At=Ne(We,Ve.$modeName$);if(!In.has(At)){const Yt=()=>{};kt(At,_t,!!(1&We.$flags$)),Yt()}}}const Fe=Ve.$ancestorComponent$,st=()=>St(Ve,!0);Fe&&Fe["s-rc"]?Fe["s-rc"].push(st):st()});return function(Ve,We,pt,ue,Fe){return Y.apply(this,arguments)}}(),at=Y=>{Oe(Y,"connectedCallback")},mn=Y=>{const me=Y["s-cr"]=X.createComment("");me["s-cn"]=!0,Y.insertBefore(me,Y.firstChild)},Bt=(Y,me={})=>{const We=[],pt=me.exclude||[],ue=se.customElements,Fe=X.head,st=Fe.querySelector("meta[charset]"),_t=X.createElement("style"),At=[],Yt=X.querySelectorAll(`[${je}]`);let ln,Cn=!0,Er=0;for(Object.assign(ge,me),ge.$resourcesUrl$=new URL(me.resourcesUrl||"./",X.baseURI).href,ge.$flags$|=2;Er<Yt.length;Er++)kt(Yt[Er].getAttribute(je),Ze(Yt[Er].innerHTML),!0);Y.map(ur=>{ur[1].map(hi=>{const qi={$flags$:hi[0],$tagName$:hi[1],$members$:hi[2],$listeners$:hi[3]};qi.$members$=hi[2],qi.$listeners$=hi[3],qi.$attrsToReflect$=[],qi.$watchers$={};const wi=qi.$tagName$,Yi=class extends HTMLElement{constructor(_s){super(_s),Or(_s=this,qi),1&qi.$flags$&&_s.attachShadow({mode:"open",delegatesFocus:!!(16&qi.$flags$)})}connectedCallback(){ln&&(clearTimeout(ln),ln=null),Cn?At.push(this):ge.jmp(()=>(Y=>{if(0==(1&ge.$flags$)){const me=pr(Y),Ve=me.$cmpMeta$,We=()=>{};if(1&me.$flags$)_e(Y,me,Ve.$listeners$),at(me.$lazyInstance$);else{let pt;if(me.$flags$|=1,pt=Y.getAttribute(fe),pt){if(1&Ve.$flags$){const ue=ht(Y.shadowRoot,Ve,Y.getAttribute("s-mode"));Y.classList.remove(ue+"-h",ue+"-s")}((Y,me,Ve,We)=>{const ue=Y.shadowRoot,Fe=[],_t=ue?[]:null,At=We.$vnode$=Mn(me,null);ge.$orgLocNodes$||jn(X.body,ge.$orgLocNodes$=new Map),Y[fe]=Ve,Y.removeAttribute(fe),en(At,Fe,[],_t,Y,Y,Ve),Fe.map(Yt=>{const ln=Yt.$hostId$+"."+Yt.$nodeId$,Cn=ge.$orgLocNodes$.get(ln),Er=Yt.$elm$;Cn&&""===Cn["s-en"]&&Cn.parentNode.insertBefore(Er,Cn.nextSibling),ue||(Er["s-hn"]=me,Cn&&(Er["s-ol"]=Cn,Er["s-ol"]["s-nr"]=Er)),ge.$orgLocNodes$.delete(ln)}),ue&&_t.map(Yt=>{Yt&&ue.appendChild(Yt)})})(Y,Ve.$tagName$,pt,me)}pt||12&Ve.$flags$&&mn(Y);{let ue=Y;for(;ue=ue.parentNode||ue.host;)if(1===ue.nodeType&&ue.hasAttribute("s-id")&&ue["s-p"]||ue["s-p"]){Jt(me,me.$ancestorComponent$=ue);break}}Ve.$members$&&Object.entries(Ve.$members$).map(([ue,[Fe]])=>{if(31&Fe&&Y.hasOwnProperty(ue)){const st=Y[ue];delete Y[ue],Y[ue]=st}}),bi(()=>we(Y,me,Ve))}We()}})(this))}disconnectedCallback(){ge.jmp(()=>(Y=>{if(0==(1&ge.$flags$)){const me=pr(this),Ve=me.$lazyInstance$;me.$rmListeners$&&(me.$rmListeners$.map(We=>We()),me.$rmListeners$=void 0),Oe(Ve,"disconnectedCallback")}})())}componentOnReady(){return pr(this).$onReadyPromise$}};qi.$lazyBundleId$=ur[0],!pt.includes(wi)&&!ue.get(wi)&&(We.push(wi),ue.define(wi,xe(Yi,qi,1)))})}),_t.innerHTML=We+"{visibility:hidden}.hydrated{visibility:inherit}",_t.setAttribute("data-styles",""),Fe.insertBefore(_t,st?st.nextSibling:Fe.firstChild),Cn=!1,At.length?At.map(ur=>ur.connectedCallback()):ge.jmp(()=>ln=setTimeout(Ce,30))},on=Y=>{const me=new URL(Y,ge.$resourcesUrl$);return me.origin!==se.location.origin?me.href:me.pathname},Nn=new WeakMap,pr=Y=>Nn.get(Y),vr=(Y,me)=>Nn.set(me.$lazyInstance$=Y,me),Or=(Y,me)=>{const Ve={$flags$:0,$hostElement$:Y,$cmpMeta$:me,$instanceValues$:new Map};return Ve.$onInstancePromise$=new Promise(We=>Ve.$onInstanceResolve$=We),Ve.$onReadyPromise$=new Promise(We=>Ve.$onReadyResolve$=We),Y["s-p"]=[],Y["s-rc"]=[],_e(Y,Ve,me.$listeners$),Nn.set(Y,Ve)},Zr=(Y,me)=>me in Y,Wn=(Y,me)=>(0,console.error)(Y,me),ui=new Map,Br=(Y,me,Ve)=>{const We=Y.$tagName$.replace(/-/g,"_"),pt=Y.$lazyBundleId$,ue=ui.get(pt);return ue?ue[We]:$(863)(`./${pt}.entry.js`).then(Fe=>(ui.set(pt,Fe),Fe[We]),Wn)},In=new Map,ci=[],xr=[],oi=[],Xr=(Y,me)=>Ve=>{Y.push(Ve),te||(te=!0,me&&4&ge.$flags$?bi(Jr):ge.raf(Jr))},gr=Y=>{for(let me=0;me<Y.length;me++)try{Y[me](performance.now())}catch(Ve){Wn(Ve)}Y.length=0},Jr=()=>{gr(xr),gr(oi),(te=xr.length>0)&&ge.raf(Jr)},bi=Y=>Le().then(Y),di=Xr(xr,!1),$i=Xr(oi,!0),Ai={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},664:($t,ze,$)=>{"use strict";$.d(ze,{L:()=>Ae,a:()=>Te,b:()=>ae,c:()=>he,d:()=>oe,e:()=>et,g:()=>de,l:()=>Ct,s:()=>fe,t:()=>se});var u=$(5861),W=$(1308),j=$(5730);const Ae="ionViewWillEnter",Te="ionViewDidEnter",ae="ionViewWillLeave",he="ionViewDidLeave",oe="ionViewWillUnload",se=ie=>new Promise((ve,be)=>{(0,W.c)(()=>{X(ie),ge(ie).then(tt=>{tt.animation&&tt.animation.destroy(),Re(ie),ve(tt)},tt=>{Re(ie),be(tt)})})}),X=ie=>{const ve=ie.enteringEl,be=ie.leavingEl;je(ve,be,ie.direction),ie.showGoBack?ve.classList.add("can-go-back"):ve.classList.remove("can-go-back"),fe(ve,!1),ve.style.setProperty("pointer-events","none"),be&&(fe(be,!1),be.style.setProperty("pointer-events","none"))},ge=function(){var ie=(0,u.Z)(function*(ve){const be=yield $e(ve);return be&&W.B.isBrowser?Le(be,ve):Ie(ve)});return function(be){return ie.apply(this,arguments)}}(),Re=ie=>{const ve=ie.enteringEl,be=ie.leavingEl;ve.classList.remove("ion-page-invisible"),ve.style.removeProperty("pointer-events"),void 0!==be&&(be.classList.remove("ion-page-invisible"),be.style.removeProperty("pointer-events"))},$e=function(){var ie=(0,u.Z)(function*(ve){return ve.leavingEl&&ve.animated&&0!==ve.duration?ve.animationBuilder?ve.animationBuilder:"ios"===ve.mode?(yield Promise.resolve().then($.bind($,129))).iosTransitionAnimation:(yield Promise.resolve().then($.bind($,1369))).mdTransitionAnimation:void 0});return function(be){return ie.apply(this,arguments)}}(),Le=function(){var ie=(0,u.Z)(function*(ve,be){yield _e(be,!0);const tt=ve(be.baseEl,be);ut(be.enteringEl,be.leavingEl);const wt=yield Ke(tt,be);return be.progressCallback&&be.progressCallback(void 0),wt&&ot(be.enteringEl,be.leavingEl),{hasCompleted:wt,animation:tt}});return function(be,tt){return ie.apply(this,arguments)}}(),Ie=function(){var ie=(0,u.Z)(function*(ve){const be=ve.enteringEl,tt=ve.leavingEl;return yield _e(ve,!1),ut(be,tt),ot(be,tt),{hasCompleted:!0}});return function(be){return ie.apply(this,arguments)}}(),_e=function(){var ie=(0,u.Z)(function*(ve,be){const wt=(void 0!==ve.deepWait?ve.deepWait:be)?[et(ve.enteringEl),et(ve.leavingEl)]:[ke(ve.enteringEl),ke(ve.leavingEl)];yield Promise.all(wt),yield Qe(ve.viewIsReady,ve.enteringEl)});return function(be,tt){return ie.apply(this,arguments)}}(),Qe=function(){var ie=(0,u.Z)(function*(ve,be){ve&&(yield ve(be))});return function(be,tt){return ie.apply(this,arguments)}}(),Ke=(ie,ve)=>{const be=ve.progressCallback,tt=new Promise(wt=>{ie.onFinish(kt=>wt(1===kt))});return be?(ie.progressStart(!0),be(ie)):ie.play(),tt},ut=(ie,ve)=>{Ct(ve,ae),Ct(ie,Ae)},ot=(ie,ve)=>{Ct(ie,Te),Ct(ve,he)},Ct=(ie,ve)=>{if(ie){const be=new CustomEvent(ve,{bubbles:!1,cancelable:!1});ie.dispatchEvent(be)}},ke=ie=>ie?new Promise(ve=>(0,j.c)(ie,ve)):Promise.resolve(),et=function(){var ie=(0,u.Z)(function*(ve){const be=ve;if(be){if(null!=be.componentOnReady){if(null!=(yield be.componentOnReady()))return}else if(null!=be.__registerHost)return void(yield new Promise(wt=>(0,j.r)(wt)));yield Promise.all(Array.from(be.children).map(et))}});return function(be){return ie.apply(this,arguments)}}(),fe=(ie,ve)=>{ve?(ie.setAttribute("aria-hidden","true"),ie.classList.add("ion-page-hidden")):(ie.hidden=!1,ie.removeAttribute("aria-hidden"),ie.classList.remove("ion-page-hidden"))},je=(ie,ve,be)=>{void 0!==ie&&(ie.style.zIndex="back"===be?"99":"101"),void 0!==ve&&(ve.style.zIndex="100")},de=ie=>ie.classList.contains("ion-page")?ie:ie.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ie},1911:($t,ze,$)=>{"use strict";$.r(ze),$.d(ze,{GESTURE_CONTROLLER:()=>u.G,createGesture:()=>ye});var u=$(4349);const W=(ge,Re,$e,Le)=>{const Ie=j(ge)?{capture:!!Le.capture,passive:!!Le.passive}:!!Le.capture;let _e,Qe;return ge.__zone_symbol__addEventListener?(_e="__zone_symbol__addEventListener",Qe="__zone_symbol__removeEventListener"):(_e="addEventListener",Qe="removeEventListener"),ge[_e](Re,$e,Ie),()=>{ge[Qe](Re,$e,Ie)}},j=ge=>{if(void 0===Ae)try{const Re=Object.defineProperty({},"passive",{get:()=>{Ae=!0}});ge.addEventListener("optsTest",()=>{},Re)}catch(Re){Ae=!1}return!!Ae};let Ae;const he=ge=>ge instanceof Document?ge:ge.ownerDocument,ye=ge=>{let Re=!1,$e=!1,Le=!0,Ie=!1;const _e=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ge),Qe=_e.canStart,Ke=_e.onWillStart,ut=_e.onStart,ot=_e.onEnd,Ct=_e.notCaptured,ke=_e.onMove,et=_e.threshold,fe=_e.passive,je=_e.blurOnStart,de={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},ie=((ge,Re,$e)=>{const Le=$e*(Math.PI/180),Ie="x"===ge,_e=Math.cos(Le),Qe=Re*Re;let Ke=0,ut=0,ot=!1,Ct=0;return{start(ke,et){Ke=ke,ut=et,Ct=0,ot=!0},detect(ke,et){if(!ot)return!1;const fe=ke-Ke,je=et-ut,de=fe*fe+je*je;if(de<Qe)return!1;const ie=Math.sqrt(de),ve=(Ie?fe:je)/ie;return Ct=ve>_e?1:ve<-_e?-1:0,ot=!1,!0},isGesture:()=>0!==Ct,getDirection:()=>Ct}})(_e.direction,_e.threshold,_e.maxAngle),ve=u.G.createGesture({name:ge.gestureName,priority:ge.gesturePriority,disableScroll:ge.disableScroll}),wt=()=>{!Re||(Ie=!1,ke&&ke(de))},kt=()=>!!ve.capture()&&(Re=!0,Le=!1,de.startX=de.currentX,de.startY=de.currentY,de.startTime=de.currentTime,Ke?Ke(de).then(qe):qe(),!0),qe=()=>{je&&(()=>{if("undefined"!=typeof document){const Tt=document.activeElement;null!=Tt&&Tt.blur&&Tt.blur()}})(),ut&&ut(de),Le=!0},Ne=()=>{Re=!1,$e=!1,Ie=!1,Le=!0,ve.release()},Ze=Tt=>{const mt=Re,jt=Le;if(Ne(),jt){if(te(de,Tt),mt)return void(ot&&ot(de));Ct&&Ct(de)}},nt=((ge,Re,$e,Le,Ie)=>{let _e,Qe,Ke,ut,ot,Ct,ke,et=0;const fe=ht=>{et=Date.now()+2e3,Re(ht)&&(!Qe&&$e&&(Qe=W(ge,"touchmove",$e,Ie)),Ke||(Ke=W(ht.target,"touchend",de,Ie)),ut||(ut=W(ht.target,"touchcancel",de,Ie)))},je=ht=>{et>Date.now()||!Re(ht)||(!Ct&&$e&&(Ct=W(he(ge),"mousemove",$e,Ie)),ke||(ke=W(he(ge),"mouseup",ie,Ie)))},de=ht=>{ve(),Le&&Le(ht)},ie=ht=>{be(),Le&&Le(ht)},ve=()=>{Qe&&Qe(),Ke&&Ke(),ut&&ut(),Qe=Ke=ut=void 0},be=()=>{Ct&&Ct(),ke&&ke(),Ct=ke=void 0},tt=()=>{ve(),be()},wt=(ht=!0)=>{ht?(_e||(_e=W(ge,"touchstart",fe,Ie)),ot||(ot=W(ge,"mousedown",je,Ie))):(_e&&_e(),ot&&ot(),_e=ot=void 0,tt())};return{enable:wt,stop:tt,destroy:()=>{wt(!1),Le=$e=Re=void 0}}})(_e.el,Tt=>{const mt=X(Tt);return!($e||!Le||(se(Tt,de),de.startX=de.currentX,de.startY=de.currentY,de.startTime=de.currentTime=mt,de.velocityX=de.velocityY=de.deltaX=de.deltaY=0,de.event=Tt,Qe&&!1===Qe(de))||(ve.release(),!ve.start()))&&($e=!0,0===et?kt():(ie.start(de.startX,de.startY),!0))},Tt=>{Re?!Ie&&Le&&(Ie=!0,te(de,Tt),requestAnimationFrame(wt)):(te(de,Tt),ie.detect(de.currentX,de.currentY)&&(!ie.isGesture()||!kt())&&it())},Ze,{capture:!1,passive:fe}),it=()=>{Ne(),nt.stop(),Ct&&Ct(de)};return{enable(Tt=!0){Tt||(Re&&Ze(void 0),Ne()),nt.enable(Tt)},destroy(){ve.destroy(),nt.destroy()}}},te=(ge,Re)=>{if(!Re)return;const $e=ge.currentX,Le=ge.currentY,Ie=ge.currentTime;se(Re,ge);const _e=ge.currentX,Qe=ge.currentY,ut=(ge.currentTime=X(Re))-Ie;if(ut>0&&ut<100){const Ct=(Qe-Le)/ut;ge.velocityX=(_e-$e)/ut*.7+.3*ge.velocityX,ge.velocityY=.7*Ct+.3*ge.velocityY}ge.deltaX=_e-ge.startX,ge.deltaY=Qe-ge.startY,ge.event=Re},se=(ge,Re)=>{let $e=0,Le=0;if(ge){const Ie=ge.changedTouches;if(Ie&&Ie.length>0){const _e=Ie[0];$e=_e.clientX,Le=_e.clientY}else void 0!==ge.pageX&&($e=ge.pageX,Le=ge.pageY)}Re.currentX=$e,Re.currentY=Le},X=ge=>ge.timeStamp||Date.now()},9658:($t,ze,$)=>{"use strict";$.d(ze,{a:()=>se,b:()=>wt,c:()=>j,g:()=>te,i:()=>kt});var u=$(1308);class W{constructor(){this.m=new Map}reset(qe){this.m=new Map(Object.entries(qe))}get(qe,Ne){const Ze=this.m.get(qe);return void 0!==Ze?Ze:Ne}getBoolean(qe,Ne=!1){const Ze=this.m.get(qe);return void 0===Ze?Ne:"string"==typeof Ze?"true"===Ze:!!Ze}getNumber(qe,Ne){const Ze=parseFloat(this.m.get(qe));return isNaN(Ze)?void 0!==Ne?Ne:NaN:Ze}set(qe,Ne){this.m.set(qe,Ne)}}const j=new W,ye="ionic-persist-config",te=ht=>X(ht),se=(ht,qe)=>("string"==typeof ht&&(qe=ht,ht=void 0),te(ht).includes(qe)),X=(ht=window)=>{if(void 0===ht)return[];ht.Ionic=ht.Ionic||{};let qe=ht.Ionic.platforms;return null==qe&&(qe=ht.Ionic.platforms=ge(ht),qe.forEach(Ne=>ht.document.documentElement.classList.add(`plt-${Ne}`))),qe},ge=ht=>{const qe=j.get("platform");return Object.keys(be).filter(Ne=>{const Ze=null==qe?void 0:qe[Ne];return"function"==typeof Ze?Ze(ht):be[Ne](ht)})},$e=ht=>!!(ie(ht,/iPad/i)||ie(ht,/Macintosh/i)&&ot(ht)),_e=ht=>ie(ht,/android|sink/i),ot=ht=>ve(ht,"(any-pointer:coarse)"),ke=ht=>et(ht)||fe(ht),et=ht=>!!(ht.cordova||ht.phonegap||ht.PhoneGap),fe=ht=>{const qe=ht.Capacitor;return!(null==qe||!qe.isNative)},ie=(ht,qe)=>qe.test(ht.navigator.userAgent),ve=(ht,qe)=>{var Ne;return null===(Ne=ht.matchMedia)||void 0===Ne?void 0:Ne.call(ht,qe).matches},be={ipad:$e,iphone:ht=>ie(ht,/iPhone/i),ios:ht=>ie(ht,/iPhone|iPod/i)||$e(ht),android:_e,phablet:ht=>{const qe=ht.innerWidth,Ne=ht.innerHeight,Ze=Math.min(qe,Ne),nt=Math.max(qe,Ne);return Ze>390&&Ze<520&&nt>620&&nt<800},tablet:ht=>{const qe=ht.innerWidth,Ne=ht.innerHeight,Ze=Math.min(qe,Ne),nt=Math.max(qe,Ne);return $e(ht)||(ht=>_e(ht)&&!ie(ht,/mobile/i))(ht)||Ze>460&&Ze<820&&nt>780&&nt<1400},cordova:et,capacitor:fe,electron:ht=>ie(ht,/electron/i),pwa:ht=>{var qe;return!(!(null===(qe=ht.matchMedia)||void 0===qe?void 0:qe.call(ht,"(display-mode: standalone)").matches)&&!ht.navigator.standalone)},mobile:ot,mobileweb:ht=>ot(ht)&&!ke(ht),desktop:ht=>!ot(ht),hybrid:ke};let tt;const wt=ht=>ht&&(0,u.g)(ht)||tt,kt=(ht={})=>{if("undefined"==typeof window)return;const qe=window.document,Ne=window,Ze=Ne.Ionic=Ne.Ionic||{},nt={};ht._ael&&(nt.ael=ht._ael),ht._rel&&(nt.rel=ht._rel),ht._ce&&(nt.ce=ht._ce),(0,u.s)(nt);const it=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(ht=>{try{const qe=ht.sessionStorage.getItem(ye);return null!==qe?JSON.parse(qe):{}}catch(qe){return{}}})(Ne)),{persistConfig:!1}),Ze.config),(ht=>{const qe={};return ht.location.search.slice(1).split("&").map(Ne=>Ne.split("=")).map(([Ne,Ze])=>[decodeURIComponent(Ne),decodeURIComponent(Ze)]).filter(([Ne])=>((ht,qe)=>ht.substr(0,qe.length)===qe)(Ne,"ionic:")).map(([Ne,Ze])=>[Ne.slice("ionic:".length),Ze]).forEach(([Ne,Ze])=>{qe[Ne]=Ze}),qe})(Ne)),ht);j.reset(it),j.getBoolean("persistConfig")&&((ht,qe)=>{try{ht.sessionStorage.setItem(ye,JSON.stringify(qe))}catch(Ne){return}})(Ne,it),X(Ne),Ze.config=j,Ze.mode=tt=j.get("mode",qe.documentElement.getAttribute("mode")||(se(Ne,"ios")?"ios":"md")),j.set("mode",tt),qe.documentElement.setAttribute("mode",tt),qe.documentElement.classList.add(tt),j.getBoolean("_testing")&&j.set("animated",!1);const Tt=jt=>{var Ot;return null===(Ot=jt.tagName)||void 0===Ot?void 0:Ot.startsWith("ION-")},mt=jt=>["ios","md"].includes(jt);(0,u.a)(jt=>{for(;jt;){const Ot=jt.mode||jt.getAttribute("mode");if(Ot){if(mt(Ot))return Ot;Tt(jt)&&console.warn('Invalid ionic mode: "'+Ot+'", expected: "ios" or "md"')}jt=jt.parentElement}return tt})}},129:($t,ze,$)=>{"use strict";$.r(ze),$.d(ze,{iosTransitionAnimation:()=>ge,shadow:()=>he});var u=$(5942),W=$(664);$(3457),$(1308);const ae=Re=>document.querySelector(`${Re}.ion-cloned-element`),he=Re=>Re.shadowRoot||Re,oe=Re=>{const $e="ION-TABS"===Re.tagName?Re:Re.querySelector("ion-tabs"),Le="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=$e){const Ie=$e.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ie?Ie.querySelector(Le):null}return Re.querySelector(Le)},ye=(Re,$e)=>{const Le="ION-TABS"===Re.tagName?Re:Re.querySelector("ion-tabs");let Ie=[];if(null!=Le){const _e=Le.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=_e&&(Ie=_e.querySelectorAll("ion-buttons"))}else Ie=Re.querySelectorAll("ion-buttons");for(const _e of Ie){const Qe=_e.closest("ion-header"),Ke=Qe&&!Qe.classList.contains("header-collapse-condense-inactive"),ut=_e.querySelector("ion-back-button"),ot=_e.classList.contains("buttons-collapse"),Ct="start"===_e.slot||""===_e.slot;if(null!==ut&&Ct&&(ot&&Ke&&$e||!ot))return ut}return null},se=(Re,$e,Le,Ie,_e,Qe)=>{const Ke=$e?`calc(100% - ${Qe.right+4}px)`:Qe.left-4+"px",ut=$e?"7px":"-7px",ot=$e?"-4px":"4px",Ct=$e?"-4px":"4px",ke=$e?"right":"left",et=$e?"left":"right",de=Le?[{offset:0,opacity:1,transform:`translate3d(${ot}, ${Qe.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ut}, ${_e.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ut}, ${_e.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${ot}, ${Qe.top-46}px, 0) scale(1)`}],be=Le?[{offset:0,opacity:1,transform:`translate3d(${Ct}, ${Qe.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Ct}, ${Qe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Ct}, ${Qe.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ct}, ${Qe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Ct}, ${Qe.top-46}px, 0) scale(1)`}],tt=(0,u.c)(),wt=(0,u.c)(),kt=ae("ion-back-button"),ht=he(kt).querySelector(".button-text"),qe=he(kt).querySelector("ion-icon");kt.text=Ie.text,kt.mode=Ie.mode,kt.icon=Ie.icon,kt.color=Ie.color,kt.disabled=Ie.disabled,kt.style.setProperty("display","block"),kt.style.setProperty("position","fixed"),wt.addElement(qe),tt.addElement(ht),tt.beforeStyles({"transform-origin":`${ke} center`}).beforeAddWrite(()=>{Ie.style.setProperty("display","none"),kt.style.setProperty(ke,Ke)}).afterAddWrite(()=>{Ie.style.setProperty("display",""),kt.style.setProperty("display","none"),kt.style.removeProperty(ke)}).keyframes(de),wt.beforeStyles({"transform-origin":`${et} center`}).keyframes(be),Re.addAnimation([tt,wt])},X=(Re,$e,Le,Ie,_e,Qe)=>{const Ke=$e?`calc(100% - ${_e.right}px)`:`${_e.left}px`,ut=$e?"-18px":"18px",ot=$e?"right":"left",et=Le?[{offset:0,opacity:0,transform:`translate3d(${ut}, ${Qe.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${_e.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${_e.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ut}, ${Qe.top-4}px, 0) scale(0.5)`}],fe=ae("ion-title"),je=(0,u.c)();fe.innerText=Ie.innerText,fe.size=Ie.size,fe.color=Ie.color,je.addElement(fe),je.beforeStyles({"transform-origin":`${ot} center`,height:"46px",display:"",position:"relative",[ot]:Ke}).beforeAddWrite(()=>{Ie.style.setProperty("display","none")}).afterAddWrite(()=>{Ie.style.setProperty("display",""),fe.style.setProperty("display","none")}).keyframes(et),Re.addAnimation(je)},ge=(Re,$e)=>{var Le;try{const Ie="cubic-bezier(0.32,0.72,0,1)",_e="opacity",Qe="transform",Ke="0%",ot="rtl"===Re.ownerDocument.dir,Ct=ot?"-99.5%":"99.5%",ke=ot?"33%":"-33%",et=$e.enteringEl,fe=$e.leavingEl,je="back"===$e.direction,de=et.querySelector(":scope > ion-content"),ie=et.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),ve=et.querySelectorAll(":scope > ion-header > ion-toolbar"),be=(0,u.c)(),tt=(0,u.c)();if(be.addElement(et).duration((null!==(Le=$e.duration)&&void 0!==Le?Le:0)||540).easing($e.easing||Ie).fill("both").beforeRemoveClass("ion-page-invisible"),fe&&null!=Re){const qe=(0,u.c)();qe.addElement(Re),be.addAnimation(qe)}if(de||0!==ve.length||0!==ie.length?(tt.addElement(de),tt.addElement(ie)):tt.addElement(et.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),be.addAnimation(tt),je?tt.beforeClearStyles([_e]).fromTo("transform",`translateX(${ke})`,`translateX(${Ke})`).fromTo(_e,.8,1):tt.beforeClearStyles([_e]).fromTo("transform",`translateX(${Ct})`,`translateX(${Ke})`),de){const qe=he(de).querySelector(".transition-effect");if(qe){const Ne=qe.querySelector(".transition-cover"),Ze=qe.querySelector(".transition-shadow"),nt=(0,u.c)(),it=(0,u.c)(),Tt=(0,u.c)();nt.addElement(qe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),it.addElement(Ne).beforeClearStyles([_e]).fromTo(_e,0,.1),Tt.addElement(Ze).beforeClearStyles([_e]).fromTo(_e,.03,.7),nt.addAnimation([it,Tt]),tt.addAnimation([nt])}}const wt=et.querySelector("ion-header.header-collapse-condense"),{forward:kt,backward:ht}=((Re,$e,Le,Ie,_e)=>{const Qe=ye(Ie,Le),Ke=oe(_e),ut=oe(Ie),ot=ye(_e,Le),Ct=null!==Qe&&null!==Ke&&!Le,ke=null!==ut&&null!==ot&&Le;if(Ct){const et=Ke.getBoundingClientRect(),fe=Qe.getBoundingClientRect();X(Re,$e,Le,Ke,et,fe),se(Re,$e,Le,Qe,et,fe)}else if(ke){const et=ut.getBoundingClientRect(),fe=ot.getBoundingClientRect();X(Re,$e,Le,ut,et,fe),se(Re,$e,Le,ot,et,fe)}return{forward:Ct,backward:ke}})(be,ot,je,et,fe);if(ve.forEach(qe=>{const Ne=(0,u.c)();Ne.addElement(qe),be.addAnimation(Ne);const Ze=(0,u.c)();Ze.addElement(qe.querySelector("ion-title"));const nt=(0,u.c)(),it=Array.from(qe.querySelectorAll("ion-buttons,[menuToggle]")),Tt=qe.closest("ion-header"),mt=null==Tt?void 0:Tt.classList.contains("header-collapse-condense-inactive");let jt;jt=it.filter(je?Mn=>{const Xe=Mn.classList.contains("buttons-collapse");return Xe&&!mt||!Xe}:Mn=>!Mn.classList.contains("buttons-collapse")),nt.addElement(jt);const Ot=(0,u.c)();Ot.addElement(qe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const An=(0,u.c)();An.addElement(he(qe).querySelector(".toolbar-background"));const On=(0,u.c)(),tr=qe.querySelector("ion-back-button");if(tr&&On.addElement(tr),Ne.addAnimation([Ze,nt,Ot,An,On]),nt.fromTo(_e,.01,1),Ot.fromTo(_e,.01,1),je)mt||Ze.fromTo("transform",`translateX(${ke})`,`translateX(${Ke})`).fromTo(_e,.01,1),Ot.fromTo("transform",`translateX(${ke})`,`translateX(${Ke})`),On.fromTo(_e,.01,1);else if(wt||Ze.fromTo("transform",`translateX(${Ct})`,`translateX(${Ke})`).fromTo(_e,.01,1),Ot.fromTo("transform",`translateX(${Ct})`,`translateX(${Ke})`),An.beforeClearStyles([_e,"transform"]),(null==Tt?void 0:Tt.translucent)?An.fromTo("transform",ot?"translateX(-100%)":"translateX(100%)","translateX(0px)"):An.fromTo(_e,.01,"var(--opacity)"),kt||On.fromTo(_e,.01,1),tr&&!kt){const Xe=(0,u.c)();Xe.addElement(he(tr).querySelector(".button-text")).fromTo("transform",ot?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ne.addAnimation(Xe)}}),fe){const qe=(0,u.c)(),Ne=fe.querySelector(":scope > ion-content"),Ze=fe.querySelectorAll(":scope > ion-header > ion-toolbar"),nt=fe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ne||0!==Ze.length||0!==nt.length?(qe.addElement(Ne),qe.addElement(nt)):qe.addElement(fe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),be.addAnimation(qe),je){qe.beforeClearStyles([_e]).fromTo("transform",`translateX(${Ke})`,ot?"translateX(-100%)":"translateX(100%)");const it=(0,W.g)(fe);be.afterAddWrite(()=>{"normal"===be.getDirection()&&it.style.setProperty("display","none")})}else qe.fromTo("transform",`translateX(${Ke})`,`translateX(${ke})`).fromTo(_e,1,.8);if(Ne){const it=he(Ne).querySelector(".transition-effect");if(it){const Tt=it.querySelector(".transition-cover"),mt=it.querySelector(".transition-shadow"),jt=(0,u.c)(),Ot=(0,u.c)(),An=(0,u.c)();jt.addElement(it).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ot.addElement(Tt).beforeClearStyles([_e]).fromTo(_e,.1,0),An.addElement(mt).beforeClearStyles([_e]).fromTo(_e,.7,.03),jt.addAnimation([Ot,An]),qe.addAnimation([jt])}}Ze.forEach(it=>{const Tt=(0,u.c)();Tt.addElement(it);const mt=(0,u.c)();mt.addElement(it.querySelector("ion-title"));const jt=(0,u.c)(),Ot=it.querySelectorAll("ion-buttons,[menuToggle]"),An=it.closest("ion-header"),On=null==An?void 0:An.classList.contains("header-collapse-condense-inactive"),tr=Array.from(Ot).filter(Qn=>{const Nt=Qn.classList.contains("buttons-collapse");return Nt&&!On||!Nt});jt.addElement(tr);const Mn=(0,u.c)(),Xe=it.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Xe.length>0&&Mn.addElement(Xe);const bn=(0,u.c)();bn.addElement(he(it).querySelector(".toolbar-background"));const Fn=(0,u.c)(),re=it.querySelector("ion-back-button");if(re&&Fn.addElement(re),Tt.addAnimation([mt,jt,Mn,Fn,bn]),be.addAnimation(Tt),Fn.fromTo(_e,.99,0),jt.fromTo(_e,.99,0),Mn.fromTo(_e,.99,0),je){if(On||mt.fromTo("transform",`translateX(${Ke})`,ot?"translateX(-100%)":"translateX(100%)").fromTo(_e,.99,0),Mn.fromTo("transform",`translateX(${Ke})`,ot?"translateX(-100%)":"translateX(100%)"),bn.beforeClearStyles([_e,"transform"]),(null==An?void 0:An.translucent)?bn.fromTo("transform","translateX(0px)",ot?"translateX(-100%)":"translateX(100%)"):bn.fromTo(_e,"var(--opacity)",0),re&&!ht){const Nt=(0,u.c)();Nt.addElement(he(re).querySelector(".button-text")).fromTo("transform",`translateX(${Ke})`,`translateX(${(ot?-124:124)+"px"})`),Tt.addAnimation(Nt)}}else On||mt.fromTo("transform",`translateX(${Ke})`,`translateX(${ke})`).fromTo(_e,.99,0).afterClearStyles([Qe,_e]),Mn.fromTo("transform",`translateX(${Ke})`,`translateX(${ke})`).afterClearStyles([Qe,_e]),Fn.afterClearStyles([_e]),mt.afterClearStyles([_e]),jt.afterClearStyles([_e])})}return be}catch(Ie){throw Ie}}},1369:($t,ze,$)=>{"use strict";$.r(ze),$.d(ze,{mdTransitionAnimation:()=>Te});var u=$(5942),W=$(664);$(3457),$(1308);const Te=(ae,he)=>{var oe,ye,te;const ge="back"===he.direction,$e=he.leavingEl,Le=(0,W.g)(he.enteringEl),Ie=Le.querySelector("ion-toolbar"),_e=(0,u.c)();if(_e.addElement(Le).fill("both").beforeRemoveClass("ion-page-invisible"),ge?_e.duration((null!==(oe=he.duration)&&void 0!==oe?oe:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):_e.duration((null!==(ye=he.duration)&&void 0!==ye?ye:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Ie){const Qe=(0,u.c)();Qe.addElement(Ie),_e.addAnimation(Qe)}if($e&&ge){_e.duration((null!==(te=he.duration)&&void 0!==te?te:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Qe=(0,u.c)();Qe.addElement((0,W.g)($e)).onFinish(Ke=>{1===Ke&&Qe.elements.length>0&&Qe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),_e.addAnimation(Qe)}return _e}},4414:($t,ze,$)=>{"use strict";$.d(ze,{B:()=>Ne,a:()=>oe,b:()=>ye,c:()=>ge,d:()=>je,e:()=>$e,f:()=>ie,g:()=>tt,h:()=>ae,i:()=>kt,j:()=>_e,k:()=>et,m:()=>se,s:()=>qe});var u=$(5861),W=$(9658),j=$(7593),Ae=$(5730);let Te=0;const ae=new WeakMap,he=Ze=>({create:nt=>Le(Ze,nt),dismiss:(nt,it,Tt)=>Ct(document,nt,it,Ze,Tt),getTop:()=>(0,u.Z)(function*(){return et(document,Ze)})()}),oe=he("ion-alert"),ye=he("ion-action-sheet"),se=he("ion-modal"),ge=he("ion-popover"),$e=Ze=>{"undefined"!=typeof document&&ot(document);const nt=Te++;Ze.overlayIndex=nt,Ze.hasAttribute("id")||(Ze.id=`ion-overlay-${nt}`)},Le=(Ze,nt)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(Ze).then(()=>{const it=document.createElement(Ze);return it.classList.add("overlay-hidden"),Object.assign(it,Object.assign(Object.assign({},nt),{hasController:!0})),ve(document).appendChild(it),new Promise(Tt=>(0,Ae.c)(it,Tt))}):Promise.resolve(),Ie='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',_e=(Ze,nt)=>{let it=Ze.querySelector(Ie);const Tt=null==it?void 0:it.shadowRoot;Tt&&(it=Tt.querySelector(Ie)||it),it?(0,Ae.f)(it):nt.focus()},Ke=(Ze,nt)=>{const it=Array.from(Ze.querySelectorAll(Ie));let Tt=it.length>0?it[it.length-1]:null;const mt=null==Tt?void 0:Tt.shadowRoot;mt&&(Tt=mt.querySelector(Ie)||Tt),Tt?Tt.focus():nt.focus()},ot=Ze=>{0===Te&&(Te=1,Ze.addEventListener("focus",nt=>{((Ze,nt)=>{const it=et(nt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Tt=Ze.target;it&&Tt&&!it.classList.contains("ion-disable-focus-trap")&&(it.shadowRoot?(()=>{if(it.contains(Tt))it.lastFocus=Tt;else{const Ot=it.lastFocus;_e(it,it),Ot===nt.activeElement&&Ke(it,it),it.lastFocus=nt.activeElement}})():(()=>{if(it===Tt)it.lastFocus=void 0;else{const Ot=(0,Ae.g)(it);if(!Ot.contains(Tt))return;const An=Ot.querySelector(".ion-overlay-wrapper");if(!An)return;if(An.contains(Tt))it.lastFocus=Tt;else{const On=it.lastFocus;_e(An,it),On===nt.activeElement&&Ke(An,it),it.lastFocus=nt.activeElement}}})())})(nt,Ze)},!0),Ze.addEventListener("ionBackButton",nt=>{const it=et(Ze);null!=it&&it.backdropDismiss&&nt.detail.register(j.OVERLAY_BACK_BUTTON_PRIORITY,()=>it.dismiss(void 0,Ne))}),Ze.addEventListener("keyup",nt=>{if("Escape"===nt.key){const it=et(Ze);null!=it&&it.backdropDismiss&&it.dismiss(void 0,Ne)}}))},Ct=(Ze,nt,it,Tt,mt)=>{const jt=et(Ze,Tt,mt);return jt?jt.dismiss(nt,it):Promise.reject("overlay does not exist")},et=(Ze,nt,it)=>{const Tt=((Ze,nt)=>(void 0===nt&&(nt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ze.querySelectorAll(nt)).filter(it=>it.overlayIndex>0)))(Ze,nt).filter(mt=>!(Ze=>Ze.classList.contains("overlay-hidden"))(mt));return void 0===it?Tt[Tt.length-1]:Tt.find(mt=>mt.id===it)},fe=(Ze=!1)=>{const it=ve(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!it||(Ze?it.setAttribute("aria-hidden","true"):it.removeAttribute("aria-hidden"))},je=function(){var Ze=(0,u.Z)(function*(nt,it,Tt,mt,jt){var Ot,An;if(nt.presented)return;fe(!0),nt.presented=!0,nt.willPresent.emit(),null===(Ot=nt.willPresentShorthand)||void 0===Ot||Ot.emit();const On=(0,W.b)(nt),tr=nt.enterAnimation?nt.enterAnimation:W.c.get(it,"ios"===On?Tt:mt);(yield be(nt,tr,nt.el,jt))&&(nt.didPresent.emit(),null===(An=nt.didPresentShorthand)||void 0===An||An.emit()),"ION-TOAST"!==nt.el.tagName&&de(nt.el),nt.keyboardClose&&(null===document.activeElement||!nt.el.contains(document.activeElement))&&nt.el.focus()});return function(it,Tt,mt,jt,Ot){return Ze.apply(this,arguments)}}(),de=function(){var Ze=(0,u.Z)(function*(nt){let it=document.activeElement;if(!it)return;const Tt=null==it?void 0:it.shadowRoot;Tt&&(it=Tt.querySelector(Ie)||it),yield nt.onDidDismiss(),it.focus()});return function(it){return Ze.apply(this,arguments)}}(),ie=function(){var Ze=(0,u.Z)(function*(nt,it,Tt,mt,jt,Ot,An){var On,tr;if(!nt.presented)return!1;fe(!1),nt.presented=!1;try{nt.el.style.setProperty("pointer-events","none"),nt.willDismiss.emit({data:it,role:Tt}),null===(On=nt.willDismissShorthand)||void 0===On||On.emit({data:it,role:Tt});const Mn=(0,W.b)(nt),Xe=nt.leaveAnimation?nt.leaveAnimation:W.c.get(mt,"ios"===Mn?jt:Ot);"gesture"!==Tt&&(yield be(nt,Xe,nt.el,An)),nt.didDismiss.emit({data:it,role:Tt}),null===(tr=nt.didDismissShorthand)||void 0===tr||tr.emit({data:it,role:Tt}),ae.delete(nt),nt.el.classList.add("overlay-hidden"),nt.el.style.removeProperty("pointer-events")}catch(Mn){console.error(Mn)}return nt.el.remove(),!0});return function(it,Tt,mt,jt,Ot,An,On){return Ze.apply(this,arguments)}}(),ve=Ze=>Ze.querySelector("ion-app")||Ze.body,be=function(){var Ze=(0,u.Z)(function*(nt,it,Tt,mt){Tt.classList.remove("overlay-hidden");const Ot=it(nt.el,mt);(!nt.animated||!W.c.getBoolean("animated",!0))&&Ot.duration(0),nt.keyboardClose&&Ot.beforeAddWrite(()=>{const On=Tt.ownerDocument.activeElement;null!=On&&On.matches("input,ion-input, ion-textarea")&&On.blur()});const An=ae.get(nt)||[];return ae.set(nt,[...An,Ot]),yield Ot.play(),!0});return function(it,Tt,mt,jt){return Ze.apply(this,arguments)}}(),tt=(Ze,nt)=>{let it;const Tt=new Promise(mt=>it=mt);return wt(Ze,nt,mt=>{it(mt.detail)}),Tt},wt=(Ze,nt,it)=>{const Tt=mt=>{(0,Ae.b)(Ze,nt,Tt),it(mt)};(0,Ae.a)(Ze,nt,Tt)},kt=Ze=>"cancel"===Ze||Ze===Ne,ht=Ze=>Ze(),qe=(Ze,nt)=>{if("function"==typeof Ze)return W.c.get("_zoneGate",ht)(()=>{try{return Ze(nt)}catch(Tt){throw Tt}})},Ne="backdrop"},2279:($t,ze,$)=>{"use strict";$.d(ze,{m:()=>Ae});var u=$(9808),W=$(4153),j=$(5e3);let Ae=(()=>{class Te{}return Te.\u0275fac=function(he){return new(he||Te)},Te.\u0275mod=j.oAB({type:Te}),Te.\u0275inj=j.cJS({imports:[u.ez,W.Pc]}),Te})()},5284:($t,ze,$)=>{"use strict";var u=$(2313),W=$(5e3),j=$(4153);let Ae=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=W.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&(W.TgZ(0,"ion-app"),W._UZ(1,"ion-router-outlet"),W.qZA())},dependencies:[j.dr,j.jP]}),n})();var Te=$(4740);const ae=[{path:"",redirectTo:"portfolio",pathMatch:"full"},{path:"portfolio",loadChildren:()=>$.e(3327).then($.bind($,3327)).then(n=>n.HomePageModule)}];let he=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=W.oAB({type:n}),n.\u0275inj=W.cJS({imports:[Te.Bz.forRoot(ae,{preloadingStrategy:Te.wm}),Te.Bz]}),n})();var oe=$(2011),ye=$(8929),te=$(1086),se=$(6498),X=$(5254),ge=$(6787),Re=$(2102),$e=$(7545),Le=$(4850),Ie=$(341),_e=$(2654),Qe=$(5279),Ke=$(5283);class ut extends ye.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new ot(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,l=r.length;let d;if(this.closed)throw new Qe.N;if(this.isStopped||this.hasError?d=_e.w.EMPTY:(this.observers.push(e),d=new Ke.W(this,e)),o&&e.add(e=new Re.ht(e,o)),t)for(let y=0;y<l&&!e.closed;y++)e.next(r[y]);else for(let y=0;y<l&&!e.closed;y++)e.next(r[y].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),d}_getNow(){return(this.scheduler||Ie.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,l=o.length;let d=0;for(;d<l&&!(e-o[d].time<r);)d++;return l>t&&(d=Math.max(d,l-t)),d>0&&o.splice(0,d),o}}class ot{constructor(e,t){this.time=e,this.value=t}}function Ct(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function ke({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,d,l=0,y=!1,E=!1;return function(U){let K;l++,!o||y?(y=!1,o=new ut(n,e,r),K=o.subscribe(this),d=U.subscribe({next(ce){o.next(ce)},error(ce){y=!0,o.error(ce)},complete(){E=!0,d=void 0,o.complete()}}),E&&(d=void 0)):K=o.subscribe(this),this.add(()=>{l--,K.unsubscribe(),K=void 0,d&&!E&&t&&0===l&&(d.unsubscribe(),d=void 0,o=void 0)})}}(r))}var et=$(7224);function fe(n,e){return e?(0,$e.w)(()=>n,e):(0,$e.w)(()=>n)}var je=$(8915),de=$(2198),ie=$(6351),ve=$(9808);$(5867);var Xe=$(5861),bn=$(9681),Fn=$(4859),re=$(2090),Qn=$(1877);const Nt=new Map,Fr={activated:!1,tokenObservers:[]},Ur={initialized:!1,enabled:!1};function Un(n){return Nt.get(n)||Fr}function kn(n,e){Nt.set(n,e)}function Wr(){return Ur}class Jn{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Xe.Z)(function*(){t.stop();try{t.pending=new re.BH,yield function nr(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new re.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const rn=new re.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _n(n){if(!Un(n).activated)throw rn.create("use-before-activation",{appName:n.name})}function Ar(n,e){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,Xe.Z)(function*({url:n,body:e},t){var r,o;const l={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Pe=yield d.getHeartbeatsHeader();Pe&&(l["X-Firebase-Client"]=Pe)}const y={method:"POST",body:JSON.stringify(e),headers:l};let E,S;try{E=yield fetch(n,y)}catch(Pe){throw rn.create("fetch-network-error",{originalErrorMessage:null===(r=Pe)||void 0===r?void 0:r.message})}if(200!==E.status)throw rn.create("fetch-status-error",{httpStatus:E.status});try{S=yield E.json()}catch(Pe){throw rn.create("fetch-parse-error",{originalErrorMessage:null===(o=Pe)||void 0===o?void 0:o.message})}const U=S.ttl.match(/^([\d.]+)(s)$/);if(!U||!U[2]||isNaN(Number(U[1])))throw rn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${S.ttl}`});const K=1e3*Number(U[1]),ce=Date.now();return{token:S.token,expireTimeMillis:ce+K,issuedAtTimeMillis:ce}})).apply(this,arguments)}function Zt(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const dn="firebase-app-check-store";let Ce=null;function Oe(){return Ce||(Ce=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var l;e(rn.create("storage-open",{originalErrorMessage:null===(l=o.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(dn,{keyPath:"compositeKey"})}}catch(r){e(rn.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Ce)}function Kn(){return(Kn=(0,Xe.Z)(function*(n,e){const r=(yield Oe()).transaction(dn,"readwrite"),l=r.objectStore(dn).put({compositeKey:n,value:e});return new Promise((d,y)=>{l.onsuccess=E=>{d()},r.onerror=E=>{var S;y(rn.create("storage-set",{originalErrorMessage:null===(S=E.target.error)||void 0===S?void 0:S.message}))}})})).apply(this,arguments)}const we=new Qn.Yd("@firebase/app-check");function mn(n,e){return(0,re.hl)()?function Ge(n,e){return function jn(n,e){return Kn.apply(this,arguments)}(function xe(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{we.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function on(){return Wr().enabled}function Nn(){return pr.apply(this,arguments)}function pr(){return(pr=(0,Xe.Z)(function*(){const n=Wr();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Or={error:"UNKNOWN_ERROR"};function Zr(n){return re.US.encodeString(JSON.stringify(n),!1)}function Wn(n){return ui.apply(this,arguments)}function ui(){return(ui=(0,Xe.Z)(function*(n,e=!1){const t=n.app;_n(t);const r=Un(t);let l,o=r.token;if(o&&!Xr(o)&&(kn(t,Object.assign(Object.assign({},r),{token:void 0})),o=void 0),!o){const E=yield r.cachedTokenPromise;E&&(Xr(E)?o=E:yield mn(t,void 0))}if(!e&&o&&Xr(o))return{token:o.token};let y,d=!1;if(on()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ar(Zt(t,yield Nn()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const E=yield r.exchangeTokenPromise;return yield mn(t,E),kn(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?we.warn(E.message):we.error(E),l=E}return o?l?y=Xr(o)?{token:o.token,internalError:l}:gr(l):(y={token:o.token},kn(t,Object.assign(Object.assign({},r),{token:o})),yield mn(t,o)):y=gr(l),d&&oi(t,y),y})).apply(this,arguments)}function In(n,e){const t=Un(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),kn(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ci(n){const{app:e}=n,t=Un(e);let r=t.tokenRefresher;r||(r=function xr(n){const{app:e}=n;return new Jn((0,Xe.Z)(function*(){let r;if(r=Un(e).token?yield Wn(n,!0):yield Wn(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Un(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),kn(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oi(n,e){const t=Un(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Xr(n){return n.expireTimeMillis-Date.now()>0}function gr(n){return{token:Zr(Or),error:n}}class Jr{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Un(this.app);for(const t of e)In(this.app,t.next);return Promise.resolve()}}const Fo="app-check-internal";!function Wa(){(0,bn._registerComponent)(new Fn.wA("app-check",n=>function bi(n,e){return new Jr(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Fo).initialize()})),(0,bn._registerComponent)(new Fn.wA(Fo,n=>function di(n){return{getToken:e=>Wn(n,e),addTokenListener:e=>function Br(n,e,t,r){const{app:o}=n,l=Un(o),d={next:t,error:r,type:e};if(kn(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&Xr(l.token)){const y=l.token;Promise.resolve().then(()=>{t({token:y.token}),ci(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>ci(n))}(n,"INTERNAL",e),removeTokenListener:e=>In(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,bn.registerVersion)("@firebase/app-check","0.5.15")}();class Mi{constructor(){return(0,ie.vb)("app-check")}}"undefined"!=typeof window&&window;var ai=$(127);const Co=new W.OlP("angularfire2.auth.use-emulator"),pi=new W.OlP("angularfire2.auth.settings"),Oi=new W.OlP("angularfire2.auth.tenant-id"),Es=new W.OlP("angularfire2.auth.langugage-code"),Mr=new W.OlP("angularfire2.auth.use-device-language"),Is=new W.OlP("angularfire.auth.persistence"),Hi=(n,e,t,r,o,l,d,y)=>(0,oe.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,l&&E.useDeviceLanguage(),d)for(const[S,U]of Object.entries(d))E.settings[S]=U;return y&&E.setPersistence(y),E},[t,r,o,l,d,y]);let Yr=(()=>{class n{constructor(t,r,o,l,d,y,E,S,U,K,ce,Pe){const Ye=new ye.xQ,Mt=(0,te.of)(void 0).pipe((0,Re.QV)(d.outsideAngular),(0,$e.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then($.bind($,9545)))),(0,Le.U)(()=>(0,oe.on)(t,l,r)),(0,Le.U)(Lt=>Hi(Lt,l,y,S,U,K,E,ce)),Ct({bufferSize:1,refCount:!1}));if((0,ve.PM)(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,te.of)(null);else{Mt.pipe((0,et.P)()).subscribe();const Pn=Mt.pipe((0,$e.w)(xn=>xn.getRedirectResult().then(rr=>rr,()=>null)),ie.iC,Ct({bufferSize:1,refCount:!1})),er=Mt.pipe((0,$e.w)(xn=>new se.y(rr=>({unsubscribe:l.runOutsideAngular(()=>xn.onAuthStateChanged(cr=>rr.next(cr),cr=>rr.error(cr),()=>rr.complete()))})))),Sn=Mt.pipe((0,$e.w)(xn=>new se.y(rr=>({unsubscribe:l.runOutsideAngular(()=>xn.onIdTokenChanged(cr=>rr.next(cr),cr=>rr.error(cr),()=>rr.complete()))}))));this.authState=Pn.pipe(fe(er),(0,je.R)(d.outsideAngular),(0,Re.QV)(d.insideAngular)),this.user=Pn.pipe(fe(Sn),(0,je.R)(d.outsideAngular),(0,Re.QV)(d.insideAngular)),this.idToken=this.user.pipe((0,$e.w)(xn=>xn?(0,X.D)(xn.getIdToken()):(0,te.of)(null))),this.idTokenResult=this.user.pipe((0,$e.w)(xn=>xn?(0,X.D)(xn.getIdTokenResult()):(0,te.of)(null))),this.credential=(0,ge.T)(Pn,Ye,this.authState.pipe((0,de.h)(xn=>!xn))).pipe((0,Le.U)(xn=>null!=xn&&xn.user?xn:null),(0,je.R)(d.outsideAngular),(0,Re.QV)(d.insideAngular))}return(0,oe.pX)(this,Mt,l,{spy:{apply:(Lt,Pn,er)=>{(Lt.startsWith("signIn")||Lt.startsWith("createUser"))&&er.then(Sn=>Ye.next(Sn))}}})}}return n.\u0275fac=function(t){return new(t||n)(W.LFG(oe.Dh),W.LFG(oe.xv,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(ie.HU),W.LFG(Co,8),W.LFG(pi,8),W.LFG(Oi,8),W.LFG(Es,8),W.LFG(Mr,8),W.LFG(Is,8),W.LFG(Mi,8))},n.\u0275prov=W.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ei=(()=>{class n{constructor(){ai.Z.registerVersion("angularfire",ie.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=W.oAB({type:n}),n.\u0275inj=W.cJS({providers:[Yr]}),n})();var ns=$(3489),Cs=$(353);class ir{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new zs(e,this.dueTime,this.scheduler))}}class zs extends ns.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(rs,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function rs(n){n.debouncedNext()}var Ps=$(3942);const Ii="firebasestorage.googleapis.com",Do="storageBucket";class Vr extends re.ZR{constructor(e,t,r=0){super(co(e),`Firebase Storage: ${t} (${co(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return co(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function co(n){return"storage/"+n}function qs(){return new Vr("unknown","An unknown error occurred, please check the error payload for server response.")}function qn(){return new Vr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function zo(){return new Vr("canceled","User canceled the upload/download.")}function gi(){return new Vr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function V(n){return new Vr("invalid-argument",n)}function P(){return new Vr("app-deleted","The Firebase app was deleted.")}function R(n){return new Vr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function p(n,e){return new Vr("invalid-format","String does not match format '"+n+"': "+e)}function M(n){throw new Vr("internal-error","Internal error: "+n)}class _{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_.makeFromUrl(e,t)}catch(o){return new _(e,"")}if(""===r.path)return r;throw function ei(n){return new Vr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",y=new RegExp("^gs://"+o+"(/(.*))?$","i");function S(xn){xn.path_=decodeURIComponent(xn.path)}const K=t.replace(/[.]/g,"\\."),Sn=[{regex:y,indices:{bucket:1,path:3},postModify:function l(xn){"/"===xn.path.charAt(xn.path.length-1)&&(xn.path_=xn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${K}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:S},{regex:new RegExp(`^https?://${t===Ii?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:S}];for(let xn=0;xn<Sn.length;xn++){const rr=Sn[xn],cr=rr.regex.exec(e);if(cr){let rc=cr[rr.indices.path];rc||(rc=""),r=new _(cr[rr.indices.bucket],rc),rr.postModify(r);break}}if(null==r)throw function ha(n){return new Vr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class F{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function mr(n){return"string"==typeof n||n instanceof String}function Kr(n){return Sr()&&n instanceof Blob}function Sr(){return"undefined"!=typeof Blob}function li(n,e,t,r){if(r<e)throw V(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw V(`Invalid value for '${n}'. Expected ${t} or less.`)}function ti(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ki(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var is=(()=>{return(n=is||(is={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",is;var n})();function Fs(n,e){const t=n>=500&&n<600,o=-1!==[408,429].indexOf(n),l=-1!==e.indexOf(n);return t||o||l}class fa{constructor(e,t,r,o,l,d,y,E,S,U,K,ce=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=y,this.errorCallback_=E,this.timeout_=S,this.progressCallback_=U,this.connectionFactory_=K,this.retry=ce,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Pe,Ye)=>{this.resolve_=Pe,this.reject_=Ye,this.start_()})}start_(){const t=(r,o)=>{const l=this.resolve_,d=this.reject_,y=o.connection;if(o.wasSuccessCode)try{const E=this.callback_(y,y.getResponse());!function Ft(n){return void 0!==n}(E)?l():l(E)}catch(E){d(E)}else if(null!==y){const E=qs();E.serverResponse=y.getErrorText(),d(this.errorCallback_?this.errorCallback_(y,E):E)}else d(o.canceled?this.appDelete_?P():zo():qn())};this.canceled_?t(0,new So(!1,null,!0)):this.backoffId_=function ee(n,e,t){let r=1,o=null,l=null,d=!1,y=0;function E(){return 2===y}let S=!1;function U(...Lt){S||(S=!0,e.apply(null,Lt))}function K(Lt){o=setTimeout(()=>{o=null,n(Pe,E())},Lt)}function ce(){l&&clearTimeout(l)}function Pe(Lt,...Pn){if(S)return void ce();if(Lt)return ce(),void U.call(null,Lt,...Pn);if(E()||d)return ce(),void U.call(null,Lt,...Pn);let Sn;r<64&&(r*=2),1===y?(y=2,Sn=0):Sn=1e3*(r+Math.random()),K(Sn)}let Ye=!1;function Mt(Lt){Ye||(Ye=!0,ce(),!S&&(null!==o?(Lt||(y=2),clearTimeout(o),K(0)):Lt||(y=1)))}return K(0),l=setTimeout(()=>{d=!0,Mt(!0)},t),Mt}((r,o)=>{if(o)return void r(!1,new So(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const d=y=>{null!==this.progressCallback_&&this.progressCallback_(y.loaded,y.lengthComputable?y.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const y=l.getErrorCode()===is.NO_ERROR,E=l.getStatus();if((!y||Fs(E,this.additionalRetryCodes_))&&this.retry){const U=l.getErrorCode()===is.ABORT;return void r(!1,new So(!1,null,U))}const S=-1!==this.successCodes_.indexOf(E);r(!0,new So(S,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function lt(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class So{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function De(...n){const e=function Q(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Sr())return new Blob(n);throw new Vr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Kt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hr{constructor(e,t){this.data=e,this.contentType=t||null}}function Ir(n,e){switch(n){case Kt.RAW:return new hr(br(e));case Kt.BASE64:case Kt.BASE64URL:return new hr(mi(n,e));case Kt.DATA_URL:return new hr(function ni(n){const e=new Tr(n);return e.base64?mi(Kt.BASE64,e.rest):function fr(n){let e;try{e=decodeURIComponent(n)}catch(t){throw p(Kt.DATA_URL,"Malformed data URL.")}return br(e)}(e.rest)}(e),function $o(n){return new Tr(n).contentType}(e))}throw qs()}function br(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function mi(n,e){switch(n){case Kt.BASE64:{const o=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(o||l)throw p(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Kt.BASE64URL:{const o=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(o||l)throw p(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function It(n){return atob(n)}(e)}catch(o){throw p(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class Tr{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw p(Kt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function ho(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ci{constructor(e,t){let r=0,o="";Kr(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Kr(this.data_)){const o=function gt(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new Ci(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ci(r,!0)}}static getBlob(...e){if(Sr()){const t=e.map(r=>r instanceof Ci?r.data_:r);return new Ci(De.apply(null,t))}{const t=e.map(d=>mr(d)?Ir(Kt.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let l=0;return t.forEach(d=>{for(let y=0;y<d.length;y++)o[l++]=d[y]}),new Ci(o,!0)}}uploadData(){return this.data_}}function Ls(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function Tn(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Bs(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Ta(n,e){return e}class wr{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||Ta}}let Ao=null;function hl(){if(Ao)return Ao;const n=[];n.push(new wr("bucket")),n.push(new wr("generation")),n.push(new wr("metageneration")),n.push(new wr("name","fullPath",!0));const t=new wr("name");t.xform=function e(l,d){return function ic(n){return!mr(n)||n.length<2?n:Bs(n)}(d)},n.push(t);const o=new wr("size");return o.xform=function r(l,d){return void 0!==d?Number(d):d},n.push(o),n.push(new wr("timeCreated")),n.push(new wr("updated")),n.push(new wr("md5Hash",null,!0)),n.push(new wr("cacheControl",null,!0)),n.push(new wr("contentDisposition",null,!0)),n.push(new wr("contentEncoding",null,!0)),n.push(new wr("contentLanguage",null,!0)),n.push(new wr("contentType",null,!0)),n.push(new wr("metadata","customMetadata",!0)),Ao=n,Ao}function fl(n,e,t){const r=Ls(e);return null===r?null:function Gl(n,e,t){const r={type:"file"},o=t.length;for(let l=0;l<o;l++){const d=t[l];r[d.local]=d.xform(r,e[d.server])}return function sc(n,e){Object.defineProperty(n,"ref",{get:function t(){const l=new _(n.bucket,n.fullPath);return e._makeStorageReference(l)}})}(r,n),r}(n,r,t)}function pa(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}const pl="prefixes";class Zs{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vs(n){if(!n)throw qs()}function Qs(n,e){return function t(r,o){const l=fl(n,o,e);return Vs(null!==l),l}}function po(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function To(){return new Vr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Da(){return new Vr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Ys(n){return new Vr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Pt(n){return new Vr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}}function qo(n){const e=po(n);return function t(r,o){let l=e(r,o);return 404===r.getStatus()&&(l=function da(n){return new Vr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=o.serverResponse,l}}function Di(n,e,t){const o=ti(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,y=new Zs(o,"GET",Qs(n,t),d);return y.errorHandler=qo(e),y}function Xs(n,e,t,r,o){const l={};l.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(l.delimiter=t),r&&(l.pageToken=r),o&&(l.maxResults=o);const y=ti(e.bucketOnlyServerUrl(),n.host,n._protocol),S=n.maxOperationRetryTime,U=new Zs(y,"GET",function za(n,e){return function t(r,o){const l=function Xi(n,e,t){const r=Ls(t);return null===r?null:function oc(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[pl])for(const o of t[pl]){const l=o.replace(/\/$/,""),d=n._makeStorageReference(new _(e,l));r.prefixes.push(d)}if(t.items)for(const o of t.items){const l=n._makeStorageReference(new _(e,o.name));r.items.push(l)}return r}(n,e,r)}(n,e,o);return Vs(null!==l),l}}(n,e.bucket),S);return U.urlParams=l,U.errorHandler=po(e),U}function ga(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Wl(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class xo{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function xa(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){Vs(!1)}return Vs(!!t&&-1!==(e||["active"]).indexOf(t)),t}const ma={STATE_CHANGED:"state_changed"},Ji={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Za(n){switch(n){case"running":case"pausing":case"canceling":return Ji.RUNNING;case"paused":return Ji.PAUSED;case"success":return Ji.SUCCESS;case"canceled":return Ji.CANCELED;default:return Ji.ERROR}}class Ko{constructor(e,t,r){if(function Xt(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function $s(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class ql extends class zl{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=is.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=is.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=is.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw M("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw M("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw M("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw M("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw M("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ss(){return new ql}class ya{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=hl(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(Fs(o.status,[])){if(!l)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();o=qn()}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,l)=>{this._resolve=o,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Yo(n,e,t,r,o){const l=e.bucketOnlyServerUrl(),d=ga(e,r,o),y={name:d.fullPath},E=ti(l,n.host,n._protocol),U={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},K=pa(d,t),Ye=new Zs(E,"POST",function Pe(Mt){let Lt;xa(Mt);try{Lt=Mt.getResponseHeader("X-Goog-Upload-URL")}catch(Pn){Vs(!1)}return Vs(mr(Lt)),Lt},n.maxUploadRetryTime);return Ye.urlParams=y,Ye.headers=U,Ye.body=K,Ye.errorHandler=po(e),Ye}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,ss,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function Ya(n,e,t,r){const E=new Zs(t,"POST",function l(S){const U=xa(S,["active","final"]);let K=null;try{K=S.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Pe){Vs(!1)}K||Vs(!1);const ce=Number(K);return Vs(!isNaN(ce)),new xo(ce,r.size(),"final"===U)},n.maxUploadRetryTime);return E.headers={"X-Goog-Upload-Command":"query"},E.errorHandler=po(e),E}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(o,ss,t,r);this._request=l,l.getPromise().then(d=>{this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new xo(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,l)=>{let d;try{d=function Ka(n,e,t,r,o,l,d,y){const E=new xo(0,0);if(d?(E.current=d.current,E.total=d.total):(E.current=0,E.total=r.size()),r.size()!==E.total)throw function Qi(){return new Vr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const S=E.total-E.current;let U=S;o>0&&(U=Math.min(U,o));const K=E.current;let Pe="";Pe=0===U?"finalize":S===U?"upload, finalize":"upload";const Ye={"X-Goog-Upload-Command":Pe,"X-Goog-Upload-Offset":`${E.current}`},Mt=r.slice(K,K+U);if(null===Mt)throw gi();const Sn=new Zs(t,"POST",function Lt(xn,rr){const cr=xa(xn,["active","final"]),Os=E.current+U,rc=r.size();let vS;return vS="final"===cr?Qs(e,l)(xn,rr):null,new xo(Os,rc,"final"===cr,vS)},e.maxUploadRetryTime);return Sn.headers=Ye,Sn.body=Mt.uploadData(),Sn.progressCallback=y||null,Sn.errorHandler=po(n),Sn}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(E){return this._error=E,void this._transition("error")}const y=this._ref.storage._makeRequest(d,ss,o,l,!1);this._request=y,y.getPromise().then(E=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(E.current),E.finalized?(this._metadata=E.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Di(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,ss,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function ac(n,e,t,r,o){const l=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},E=function y(){let Sn="";for(let xn=0;xn<2;xn++)Sn+=Math.random().toString().slice(2);return Sn}();d["Content-Type"]="multipart/related; boundary="+E;const S=ga(e,r,o),U=pa(S,t),Pe=Ci.getBlob("--"+E+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+U+"\r\n--"+E+"\r\nContent-Type: "+S.contentType+"\r\n\r\n",r,"\r\n--"+E+"--");if(null===Pe)throw gi();const Ye={name:S.fullPath},Mt=ti(l,n.host,n._protocol),Pn=n.maxUploadRetryTime,er=new Zs(Mt,"POST",Qs(n,t),Pn);return er.urlParams=Ye,er.headers=d,er.body=Pe.uploadData(),er.errorHandler=po(e),er}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,ss,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=zo(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Za(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const l=new Ko(t||void 0,r||void 0,o||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Za(this._state)){case Ji.SUCCESS:$s(this._resolve.bind(null,this.snapshot))();break;case Ji.CANCELED:case Ji.ERROR:$s(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Za(this._state)){case Ji.RUNNING:case Ji.PAUSED:e.next&&$s(e.next.bind(e,this.snapshot))();break;case Ji.SUCCESS:e.complete&&$s(e.complete.bind(e))();break;default:e.error&&$s(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class go{constructor(e,t){this._service=e,this._location=t instanceof _?t:_.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new go(e,t)}get root(){const e=new _(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bs(this._location.path)}get storage(){return this._service}get parent(){const e=function Ks(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new _(this._location.bucket,e);return new go(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw R(e)}}function Xc(n,e,t){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,Xe.Z)(function*(n,e,t){const o=yield uc(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield Xc(n,e,o.nextPageToken))})).apply(this,arguments)}function uc(n,e){null!=e&&"number"==typeof e.maxResults&&li("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Xs(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ss)}function Ff(n){n._throwIfRoot("getDownloadURL");const e=function Aa(n,e,t){const o=ti(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,y=new Zs(o,"GET",function rh(n,e){return function t(r,o){const l=fl(n,o,e);return Vs(null!==l),function Sa(n,e,t,r){const o=Ls(e);if(null===o||!mr(o.downloadTokens))return null;const l=o.downloadTokens;if(0===l.length)return null;const d=encodeURIComponent;return l.split(",").map(S=>{const K=n.fullPath;return ti("/b/"+d(n.bucket)+"/o/"+d(K),t,r)+ki({alt:"media",token:S})})[0]}(l,o,n.host,n._protocol)}}(n,t),d);return y.errorHandler=qo(e),y}(n.storage,n._location,hl());return n.storage.makeRequestWithTokens(e,ss).then(t=>{if(null===t)throw function Ns(){return new Vr("no-download-url","The given file does not have any download URLs.")}();return t})}function cc(n,e){const t=function fo(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new _(n._location.bucket,t);return new go(n.storage,r)}function yl(n,e){if(n instanceof os){const t=n;if(null==t._bucket)throw function Bo(){return new Vr("no-default-bucket","No default bucket found. Did you set the '"+Do+"' property when initializing the app?")}();const r=new go(t,t._bucket);return null!=e?yl(r,e):r}return void 0!==e?cc(n,e):n}function Mo(n,e){if(e&&function dc(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof os)return function es(n,e){return new go(n,e)}(n,e);throw V("To use ref(service, url), the first argument must be a Storage instance.")}return yl(n,e)}function Yl(n,e){const t=null==e?void 0:e[Do];return null==t?null:_.makeFromBucketSpec(t,n)}class os{constructor(e,t,r,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=Ii,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?_.makeFromBucketSpec(o,this._host):Yl(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_.makeFromBucketSpec(this._url,e):Yl(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){li("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){li("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Xe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Xe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new go(this,e)}_makeRequest(e,t,r,o,l=!0){if(this._deleted)return new F(P());{const d=function N(n,e,t,r,o,l,d=!0){const y=ki(n.urlParams),E=n.url+y,S=Object.assign({},n.headers);return function k(n,e){e&&(n["X-Firebase-GMPID"]=e)}(S,e),function Vo(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(S,t),function dl(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(S,l),function z(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(S,r),new fa(E,n.method,S,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,d)}(e,this._appId,r,o,t,this._firebaseVersion,l);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}makeRequestWithTokens(e,t){var r=this;return(0,Xe.Z)(function*(){const[o,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,l).getPromise()})()}}const Js="@firebase/storage";function hc(n,e){return Mo(n=(0,re.m9)(n),e)}function Cl(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new os(t,r,o,e,bn.SDK_VERSION)}!function td(){(0,bn._registerComponent)(new Fn.wA("storage",Cl,"PUBLIC").setMultipleInstances(!0)),(0,bn.registerVersion)(Js,"0.9.12",""),(0,bn.registerVersion)(Js,"0.9.12","esm2017")}();class ka{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class I{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ka(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new ka(r,this,this._ref))},t)}on(e,t,r,o){let l;return t&&(l="function"==typeof t?d=>t(new ka(d,this,this._ref)):{next:t.next?d=>t.next(new ka(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,r||void 0,o||void 0)}}class C{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new v(e,this._service))}get items(){return this._delegate.items.map(e=>new v(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class v{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function fc(n,e){return cc(n,e)}(this._delegate,e);return new v(t,this.storage)}get root(){return new v(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new v(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new I(function vl(n,e,t){return function Ra(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new ya(n,new Ci(e),t)}(n=(0,re.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Kt.RAW,r){this._throwIfRoot("putString");const o=Ir(t,e),l=Object.assign({},r);return null==l.contentType&&null!=o.contentType&&(l.contentType=o.contentType),new I(new ya(this._delegate,new Ci(o.data,!0),l),this)}listAll(){return function as(n){return function lc(n){const e={prefixes:[],items:[]};return Xc(n,e).then(()=>e)}(n=(0,re.m9)(n))}(this._delegate).then(e=>new C(e,this.storage))}list(e){return function wl(n,e){return uc(n=(0,re.m9)(n),e)}(this._delegate,e||void 0).then(t=>new C(t,this.storage))}getMetadata(){return function bl(n){return function ih(n){n._throwIfRoot("getMetadata");const e=Di(n.storage,n._location,hl());return n.storage.makeRequestWithTokens(e,ss)}(n=(0,re.m9)(n))}(this._delegate)}updateMetadata(e){return function Ro(n,e){return function Jc(n,e){n._throwIfRoot("updateMetadata");const t=function gl(n,e,t,r){const l=ti(e.fullServerUrl(),n.host,n._protocol),y=pa(t,r),S=n.maxOperationRetryTime,U=new Zs(l,"PATCH",Qs(n,r),S);return U.headers={"Content-Type":"application/json; charset=utf-8"},U.body=y,U.errorHandler=qo(e),U}(n.storage,n._location,e,hl());return n.storage.makeRequestWithTokens(t,ss)}(n=(0,re.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function El(n){return Ff(n=(0,re.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function va(n){return function Xa(n){n._throwIfRoot("deleteObject");const e=function wu(n,e){const r=ti(e.fullServerUrl(),n.host,n._protocol),y=new Zs(r,"DELETE",function d(E,S){},n.maxOperationRetryTime);return y.successCodes=[200,204],y.errorHandler=qo(e),y}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ss)}(n=(0,re.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw R(e)}}class x{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(B(e))throw V("ref() expected a child path but got a URL, use refFromURL instead.");return new v(hc(this._delegate,e),this)}refFromURL(e){if(!B(e))throw V("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_.makeFromUrl(e,this._delegate.host)}catch(t){throw V("refFromUrl() expected a valid full URL but got an invalid one.")}return new v(hc(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function pc(n,e,t,r={}){!function Du(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,re.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function B(n){return/^[A-Za-z]+:\/\//.test(n)}function dt(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new x(t,r)}function q(n){const e=function L(n){return new se.y(e=>{const t=d=>e.next(d);t(n.snapshot);const l=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){l()}}).pipe(function Ds(n,e=Cs.P){return t=>t.lift(new ir(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Le.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function le(n){return{getDownloadURL:()=>(0,te.of)(void 0).pipe(ie.fc,(0,$e.w)(()=>n.getDownloadURL()),ie.iC),getMetadata:()=>(0,te.of)(void 0).pipe(ie.fc,(0,$e.w)(()=>n.getMetadata()),ie.iC),delete:()=>(0,X.D)(n.delete()),child:e=>le(n.child(e)),updateMetadata:e=>(0,X.D)(n.updateMetadata(e)),put:(e,t)=>q(n.put(e,t)),putString:(e,t,r)=>q(n.putString(e,t,r)),list:e=>(0,X.D)(n.list(e)),listAll:()=>(0,X.D)(n.listAll())}}!function A(n){const e={TaskState:Ji,TaskEvent:ma,StringFormat:Kt,Storage:x,Reference:v};n.INTERNAL.registerComponent(new Fn.wA("storage-compat",dt,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.20")}(Ps.Z);const Be=new W.OlP("angularfire2.storageBucket"),ct=new W.OlP("angularfire2.storage.maxUploadRetryTime"),Rt=new W.OlP("angularfire2.storage.maxOperationRetryTime"),Gt=new W.OlP("angularfire2.storage.use-emulator");let vn=(()=>{class n{constructor(t,r,o,l,d,y,E,S,U,K){const ce=(0,oe.on)(t,d,r);this.storage=(0,oe.cc)(`${ce.name}.storage.${o}`,"AngularFireStorage",ce.name,()=>{const Pe=d.runOutsideAngular(()=>ce.storage(o||void 0)),Ye=U;return Ye&&Pe.useEmulator(...Ye),E&&Pe.setMaxUploadRetryTime(E),S&&Pe.setMaxOperationRetryTime(S),Pe},[E,S])}ref(t){return le(this.storage.ref(t))}refFromURL(t){return le(this.storage.refFromURL(t))}upload(t,r,o){return le(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(W.LFG(oe.Dh),W.LFG(oe.xv,8),W.LFG(Be,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(ie.HU),W.LFG(ct,8),W.LFG(Rt,8),W.LFG(Gt,8),W.LFG(Mi,8))},n.\u0275prov=W.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ar=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=W.oAB({type:n}),n.\u0275inj=W.cJS({}),n})(),hn=(()=>{class n{constructor(){ai.Z.registerVersion("angularfire",ie.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=W.oAB({type:n}),n.\u0275inj=W.cJS({providers:[vn],imports:[ar]}),n})();var yi=$(1059);function ls(){return n=>n.lift(new Xo)}class Xo{call(e,t){return t.subscribe(new Dl(e))}}class Dl extends ns.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var pn,Uo=$(2014),Ja=$(5778),Tl=($(9545),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}),js={},Pa=Pa||{},zn=Tl||self;function mc(){}function Bf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function yc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var sh="closure_uid_"+(1e9*Math.random()>>>0),qy=0;function Yy(n,e,t){return n.call.apply(n.bind,arguments)}function bg(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Ts(n,e,t){return(Ts=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yy:bg).apply(null,arguments)}function Kl(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function eo(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,l){for(var d=Array(arguments.length-2),y=2;y<arguments.length;y++)d[y-2]=arguments[y];return e.prototype[o].apply(r,d)}}function Sl(){this.s=this.s,this.o=this.o}var wg={};Sl.prototype.s=!1,Sl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function zy(n){return Object.prototype.hasOwnProperty.call(n,sh)&&n[sh]||(n[sh]=++qy)}(this);delete wg[n]}},Sl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ky=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function nd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Eg(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Bf(r)){const o=n.length||0,l=r.length||0;n.length=o+l;for(let d=0;d<l;d++)n[o+d]=r[d]}else n.push(r)}}function to(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}to.prototype.h=function(){this.defaultPrevented=!0};var _c=function(){if(!zn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zn.addEventListener("test",mc,e),zn.removeEventListener("test",mc,e)}catch(t){}return n}();function vc(n){return/^[\s\xa0]*$/.test(n)}var Au=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Vf(n,e){return n<e?-1:n>e?1:0}function oh(){var n=zn.navigator;return n&&(n=n.userAgent)?n:""}function Al(n){return-1!=oh().indexOf(n)}function xu(n){return xu[" "](n),n}xu[" "]=mc;var rd,n,Ig=Al("Opera"),Mu=Al("Trident")||Al("MSIE"),Uf=Al("Edge"),bc=Uf||Mu,Cg=Al("Gecko")&&!(-1!=oh().toLowerCase().indexOf("webkit")&&!Al("Edge"))&&!(Al("Trident")||Al("MSIE"))&&!Al("Edge"),jf=-1!=oh().toLowerCase().indexOf("webkit")&&!Al("Edge");function Dg(){var n=zn.document;return n?n.documentMode:void 0}e:{var Hf="",ba=(n=oh(),Cg?/rv:([^\);]+)(\)|;)/.exec(n):Uf?/Edge\/([\d\.]+)/.exec(n):Mu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jf?/WebKit\/(\S+)/.exec(n):Ig?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ba&&(Hf=ba?ba[1]:""),Mu){var Ru=Dg();if(null!=Ru&&Ru>parseFloat(Hf)){rd=String(Ru);break e}}rd=Hf}var Tg={};var _b=zn.document&&Mu&&(Dg()||parseInt(rd,10))||void 0;function ah(n,e){if(to.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Cg){e:{try{xu(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ag[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ah.X.h.call(this)}}eo(ah,to);var Ag={2:"touch",3:"pen",4:"mouse"};ah.prototype.h=function(){ah.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),Xy=0;function vb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++Xy,this.ba=this.ea=!1}function el(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function id(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tl(n){const e={};for(const t in n)e[t]=n[t];return e}const Zl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gf(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<Zl.length;l++)t=Zl[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ou(n){this.src=n,this.g={},this.h=0}function lh(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=Ky(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(el(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function xg(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==r)return o}return-1}Ou.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=xg(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new vb(e,this.src,l,!!r,o)).ea=t,n.push(e)),e};var uh="closure_lm_"+(1e6*Math.random()|0),Mg={};function ch(n,e,t,r,o){if(r&&r.once)return Jy(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)ch(n,e[l],t,r,o);return null}return t=Ic(t),n&&n[wc]?n.N(e,t,yc(r)?!!r.capture:!!r,o):Ec(n,e,t,!1,r,o)}function Ec(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var d=yc(o)?!!o.capture:!!o,y=sd(n);if(y||(n[uh]=y=new Ou(n)),(t=y.add(e,t,r,d,l)).proxy)return t;if(r=function bb(){const e=Og;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)_c||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Rg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Jy(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Jy(n,e[l],t,r,o);return null}return t=Ic(t),n&&n[wc]?n.O(e,t,yc(r)?!!r.capture:!!r,o):Ec(n,e,t,!0,r,o)}function Wf(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)Wf(n,e[l],t,r,o);else r=yc(r)?!!r.capture:!!r,t=Ic(t),n&&n[wc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=xg(l=n.g[e],t,r,o))&&(el(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=sd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=xg(e,t,r,o)),(t=-1<n?e[n]:null)&&zf(t))}function zf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[wc])lh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Rg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=sd(e))?(lh(t,n),0==t.h&&(t.src=null,e[uh]=null)):el(n)}}}function Rg(n){return n in Mg?Mg[n]:Mg[n]="on"+n}function Og(n,e){if(n.ba)n=!0;else{e=new ah(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&zf(n),n=t.call(r,e)}return n}function sd(n){return(n=n[uh])instanceof Ou?n:null}var dh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ic(n){return"function"==typeof n?n:(n[dh]||(n[dh]=function(e){return n.handleEvent(e)}),n[dh])}function us(){Sl.call(this),this.i=new Ou(this),this.P=this,this.I=null}function ts(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new to(e,n);else if(e instanceof to)e.target=e.target||n;else{var o=e;Gf(e=new to(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];o=hh(d,r,!0,e)&&o}if(o=hh(d=e.g=n,r,!0,e)&&o,o=hh(d,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=hh(d=e.g=t[l],r,!1,e)&&o}function hh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ba&&d.capture==t){var y=d.listener,E=d.ha||d.src;d.ea&&lh(n.i,d),o=!1!==y.call(E,r)&&o}}return o&&!r.defaultPrevented}eo(us,Sl),us.prototype[wc]=!0,us.prototype.removeEventListener=function(n,e,t,r){Wf(this,n,e,t,r)},us.prototype.M=function(){if(us.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)el(t[r]);delete n.g[e],n.h--}}this.I=null},us.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},us.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gi=zn.JSON.stringify;function fh(){var n=od;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var qf,ph=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kg,n=>n.reset());class kg{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Pg(n){zn.setTimeout(()=>{throw n},0)}function Ng(n,e){qf||function t_(){var n=zn.Promise.resolve(void 0);qf=function(){n.then(wb)}}(),Yf||(qf(),Yf=!0),od.add(n,e)}var Yf=!1,od=new class e_{constructor(){this.h=this.g=null}add(e,t){const r=ph.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function wb(){for(var n;n=fh();){try{n.h.call(n.g)}catch(t){Pg(t)}var e=ph;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yf=!1}function xl(n,e){us.call(this),this.h=n||1,this.g=e||zn,this.j=Ts(this.lb,this),this.l=Date.now()}function ad(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function gh(n,e,t){if("function"==typeof n)t&&(n=Ts(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ts(n.handleEvent,n)}return 2147483647<Number(e)?-1:zn.setTimeout(n,e||0)}function Kf(n){n.g=gh(()=>{n.g=null,n.i&&(n.i=!1,Kf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}eo(xl,us),(pn=xl.prototype).ca=!1,pn.R=null,pn.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ts(this,"tick"),this.ca&&(ad(this),this.start()))}},pn.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pn.M=function(){xl.X.M.call(this),ad(this),delete this.g};class Fg extends Sl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Kf(this)}M(){super.M(),this.g&&(zn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cc(n){Sl.call(this),this.h=n,this.g={}}eo(Cc,Sl);var ld=[];function ud(n,e,t,r){Array.isArray(t)||(t&&(ld[0]=t.toString()),t=ld);for(var o=0;o<t.length;o++){var l=ch(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function cd(n){id(n.g,function(e,t){this.g.hasOwnProperty(t)&&zf(e)},n),n.g={}}function Zf(){this.g=!0}function Ss(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ql(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<o.length;d++)o[d]=""}}}return Gi(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}Cc.prototype.M=function(){Cc.X.M.call(this),cd(this)},Cc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zf.prototype.Aa=function(){this.g=!1},Zf.prototype.info=function(){};var ku={},Tc=null;function Ml(){return Tc=Tc||new us}function Lg(n){to.call(this,ku.Pa,n)}function Xl(n){const e=Ml();ts(e,new Lg(e,n))}function dd(n,e){to.call(this,ku.STAT_EVENT,n),this.stat=e}function ii(n){const e=Ml();ts(e,new dd(e,n))}function mh(n,e){to.call(this,ku.Qa,n),this.size=e}function Pu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zn.setTimeout(function(){n()},e)}ku.Pa="serverreachability",eo(Lg,to),ku.STAT_EVENT="statevent",eo(dd,to),ku.Qa="timingevent",eo(mh,to);var yh={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Bg={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function hd(){}function _h(){}hd.prototype.h=null;var Rl,Nu={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Jf(){to.call(this,"d")}function Na(){to.call(this,"c")}function fd(){}function Fu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Cc(this),this.O=vh,this.T=new xl(n=bc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Vg}function Vg(){this.i=null,this.g="",this.h=!1}eo(Jf,to),eo(Na,to),eo(fd,hd),fd.prototype.g=function(){return new XMLHttpRequest},fd.prototype.i=function(){return{}},Rl=new fd;var vh=45e3,$g={},bh={};function Lu(n,e,t){n.K=1,n.v=Eh(kl(e)),n.s=t,n.P=!0,Ug(n,null)}function Ug(n,e){n.F=Date.now(),D(n),n.A=kl(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Cb(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Vg,n.g=Kg(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Fg(Ts(n.La,n,n.g),n.N)),ud(n.S,n.g,"readystatechange",n.ib),e=n.H?tl(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Xl(1),function Qf(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var d="",y=l.split("&"),E=0;E<y.length;E++){var S=y[E].split("=");if(1<S.length){var U=S[0];S=S[1];var K=U.split("_");d=2<=K.length&&"type"==K[1]?d+(U+"=")+S+"&":d+(U+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function b(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function f(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=m(n,t),o==bh){4==e&&(n.o=4,ii(14),r=!1),Ss(n.j,n.m,null,"[Incomplete Response]");break}if(o==$g){n.o=4,ii(15),Ss(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ss(n.j,n.m,o,null),qt(n,o)}b(n)&&o!=bh&&o!=$g&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),op(e),e.K=!0,ii(11))):(Ss(n.j,n.m,t,"[Invalid Chunked Response]"),Et(n),He(n))}function m(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?bh:(t=Number(e.substring(t,r)),isNaN(t)?$g:(r+=1)+t>e.length?bh:(e=e.substr(r,t),n.C=r+t,e))}function D(n){n.V=Date.now()+n.O,G(n,n.O)}function G(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Pu(Ts(n.gb,n),e)}function ne(n){n.B&&(zn.clearTimeout(n.B),n.B=null)}function He(n){0==n.l.G||n.I||bC(n.l,n)}function Et(n){ne(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ad(n.T),cd(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function qt(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||r_(t.h,n)))if(!n.J&&r_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(S){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ap(t),Fa(t)}h_(t),ii(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Pu(Ts(t.cb,t),6e3));if(1>=Gg(t.h)&&t.ja){try{t.ja()}catch(S){}t.ja=void 0}}else Vu(t,11)}else if((n.J||t.g==n)&&ap(t),!vc(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let S=o[e];if(t.T=S[0],S=S[1],2==t.G)if("c"==S[0]){t.I=S[1],t.ka=S[2];const U=S[3];null!=U&&(t.ma=U,t.j.info("VER="+t.ma));const K=S[4];null!=K&&(t.Ca=K,t.j.info("SVER="+t.Ca));const ce=S[5];null!=ce&&"number"==typeof ce&&0<ce&&(t.J=r=1.5*ce,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Pe=n.g;if(Pe){const Ye=Pe.g?Pe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ye){var l=r.h;l.g||-1==Ye.indexOf("spdy")&&-1==Ye.indexOf("quic")&&-1==Ye.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(i_(l,l.h),l.h=null))}if(r.D){const Mt=Pe.g?Pe.g.getResponseHeader("X-HTTP-Session-Id"):null;Mt&&(r.za=Mt,Ti(r.F,r.D,Mt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=Vb(r,r.H?r.ka:null,r.V),d.J){Ab(r.h,d);var y=d,E=r.J;E&&y.setTimeout(E),y.B&&(ne(y),D(y)),r.g=d}else Bb(r);0<t.i.length&&Sh(t)}else"stop"!=S[0]&&"close"!=S[0]||Vu(t,7);else 3==t.G&&("stop"==S[0]||"close"==S[0]?"stop"==S[0]?Vu(t,7):Lb(t):"noop"!=S[0]&&t.l&&t.l.wa(S),t.A=0)}Xl(4)}catch(S){}}function Rn(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Bf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Ln(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Bf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function fn(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Bf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}(pn=Fu.prototype).setTimeout=function(n){this.O=n},pn.ib=function(n){n=n.target;const e=this.L;e&&3==Oo(n)?e.l():this.La(n)},pn.La=function(n){try{if(n==this.g)e:{const U=Oo(this.g);var e=this.g.Ea();const K=this.g.aa();if(!(3>U)&&(3!=U||bc||this.g&&(this.h.h||this.g.fa()||Pb(this.g)))){this.I||4!=U||7==e||Xl(8==e||0>=K?3:2),ne(this);var t=this.g.aa();this.Y=t;t:if(b(this)){var r=Pb(this.g);n="";var o=r.length,l=4==Oo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Et(this),He(this);var d="";break t}this.h.i=new zn.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function Xf(n,e,t,r,o,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.U,U,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,E=this.g;if((y=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vc(y)){var S=y;break t}}S=null}if(!(t=S)){this.i=!1,this.o=3,ii(12),Et(this),He(this);break e}Ss(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qt(this,t)}this.P?(f(this,U,d),bc&&this.i&&3==U&&(ud(this.S,this.T,"tick",this.hb),this.T.start())):(Ss(this.j,this.m,d,null),qt(this,d)),4==U&&Et(this),this.i&&!this.I&&(4==U?bC(this.l,this):(this.i=!1,D(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ii(12)):(this.o=0,ii(13)),Et(this),He(this)}}}catch(U){}},pn.hb=function(){if(this.g){var n=Oo(this.g),e=this.g.fa();this.C<e.length&&(ne(this),f(this,n,e),this.i&&4!=n&&D(this))}},pn.cancel=function(){this.I=!0,Et(this)},pn.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Dc(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xl(3),ii(17)),Et(this),this.o=2,He(this)):G(this,this.V-n)};var ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ol(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ol){this.h=void 0!==e?e:n.h,Jl(this,n.j),this.s=n.s,this.g=n.g,wh(this,n.m),this.l=n.l,e=n.i;var t=new tp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),jg(this,t),this.o=n.o}else n&&(t=String(n).match(ds))?(this.h=!!e,Jl(this,t[1]||"",!0),this.s=pd(t[2]||""),this.g=pd(t[3]||"",!0),wh(this,t[4]),this.l=pd(t[5]||"",!0),jg(this,t[6]||"",!0),this.o=pd(t[7]||"")):(this.h=!!e,this.i=new tp(null,this.h))}function kl(n){return new Ol(n)}function Jl(n,e,t){n.j=t?pd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function wh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function jg(n,e,t){e instanceof tp?(n.i=e,function Db(n,e){e&&!n.j&&(eu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Dh(this,r),Cb(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Bu(e,Eb)),n.i=new tp(e,n.h))}function Ti(n,e,t){n.i.set(e,t)}function Eh(n){return Ti(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ep),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ep(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ol.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Bu(e,Ih,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Bu(e,Ih,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Bu(t,"/"==t.charAt(0)?Hg:Ch,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Bu(t,n_)),n.join("")};var Ih=/[#\/\?@]/g,Ch=/[#\?:]/g,Hg=/[#\?]/g,Eb=/[#\?@]/g,n_=/#/g;function tp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function eu(n){n.g||(n.g=new Map,n.h=0,n.i&&function Jo(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Dh(n,e){eu(n),e=Th(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Ib(n,e){return eu(n),e=Th(n,e),n.g.has(e)}function Cb(n,e,t){Dh(n,e),0<t.length&&(n.i=null,n.g.set(Th(n,e),nd(t)),n.h+=t.length)}function Th(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Tb(n){this.l=n||gC,n=zn.PerformanceNavigationTiming?0<(n=zn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zn.g&&zn.g.Ga&&zn.g.Ga()&&zn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pn=tp.prototype).add=function(n,e){eu(this),this.i=null,n=Th(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},pn.forEach=function(n,e){eu(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},pn.oa=function(){eu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let l=0;l<o.length;l++)t.push(e[r])}return t},pn.W=function(n){eu(this);let e=[];if("string"==typeof n)Ib(this,n)&&(e=e.concat(this.g.get(Th(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},pn.set=function(n,e){return eu(this),this.i=null,Ib(this,n=Th(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},pn.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},pn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const l=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=l;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var gC=10;function Sb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Gg(n){return n.h?1:n.g?n.g.size:0}function r_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function i_(n,e){n.g?n.g.add(e):n.h=e}function Ab(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function s_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nd(n.i)}function o_(){}function mC(){this.g=new o_}function ea(n,e,t){const r=t||"";try{Rn(n,function(o,l){let d=o;yc(o)&&(d=Gi(o)),e.push(r+l+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function np(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function gd(n){this.l=n.ac||null,this.j=n.jb||!1}function no(n,e){us.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=md,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tb.prototype.cancel=function(){if(this.i=s_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},o_.prototype.stringify=function(n){return zn.JSON.stringify(n,void 0)},o_.prototype.parse=function(n){return zn.JSON.parse(n,void 0)},eo(gd,hd),gd.prototype.g=function(){return new no(this.l,this.j)},gd.prototype.i=function(n){return function(){return n}}({}),eo(no,us);var md=0;function l_(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function rp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ip(n)}function ip(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pn=no.prototype).open=function(n,e){if(this.readyState!=md)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ip(this)},pn.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||zn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},pn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rp(this)),this.readyState=md},pn.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ip(this)),this.g&&(this.readyState=3,ip(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==zn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;l_(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},pn.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rp(this):ip(this),3==this.readyState&&l_(this)}},pn.Va=function(n){this.g&&(this.response=this.responseText=n,rp(this))},pn.Ua=function(n){this.g&&(this.response=n,rp(this))},pn.ga=function(){this.g&&rp(this)},pn.setRequestHeader=function(n,e){this.v.append(n,e)},pn.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pn.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(no.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xb=zn.JSON.parse;function hs(n){us.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=u_,this.K=this.L=!1}eo(hs,us);var u_="",yC=/^https?$/i,Mb=["POST","PUT"];function Rb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ob(n),Wg(n)}function Ob(n){n.D||(n.D=!0,ts(n,"complete"),ts(n,"error"))}function kb(n){if(n.h&&void 0!==Pa&&(!n.C[1]||4!=Oo(n)||2!=n.aa()))if(n.v&&4==Oo(n))gh(n.Ha,0,n);else if(ts(n,"readystatechange"),4==Oo(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var o=String(n.H).match(ds)[1]||null;if(!o&&zn.self&&zn.self.location){var l=zn.self.location.protocol;o=l.substr(0,l.length-1)}r=!yC.test(o?o.toLowerCase():"")}t=r}if(t)ts(n,"complete"),ts(n,"success");else{n.m=6;try{var d=2<Oo(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.aa()+"]",Ob(n)}}finally{Wg(n)}}}function Wg(n,e){if(n.g){yd(n);const t=n.g,r=n.C[0]?mc:null;n.g=null,n.C=null,e||ts(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function yd(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(zn.clearTimeout(n.A),n.A=null)}function Oo(n){return n.g?n.g.readyState:0}function Pb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case u_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Nb(n){let e="";return id(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Fb(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Nb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ti(n,e,t))}function zg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function c_(n){this.Ca=0,this.i=[],this.j=new Zf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=zg("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=zg("baseRetryDelayMs",5e3,n),this.bb=zg("retryDelaySeedMs",1e4,n),this.$a=zg("forwardChannelMaxRetries",2,n),this.ta=zg("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Tb(n&&n.concurrentRequestLimit),this.Fa=new mC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Lb(n){if(qg(n),3==n.G){var e=n.U++,t=kl(n.F);Ti(t,"SID",n.I),Ti(t,"RID",e),Ti(t,"TYPE","terminate"),sp(n,t),(e=new Fu(n,n.j,e,void 0)).K=2,e.v=Eh(kl(t)),t=!1,zn.navigator&&zn.navigator.sendBeacon&&(t=zn.navigator.sendBeacon(e.v.toString(),"")),!t&&zn.Image&&((new Image).src=e.v,t=!0),t||(e.g=Kg(e.l,null),e.g.da(e.v)),e.F=Date.now(),D(e)}f_(n)}function Fa(n){n.g&&(op(n),n.g.cancel(),n.g=null)}function qg(n){Fa(n),n.u&&(zn.clearTimeout(n.u),n.u=null),ap(n),n.h.cancel(),n.m&&("number"==typeof n.m&&zn.clearTimeout(n.m),n.m=null)}function Sh(n){Sb(n.h)||n.m||(n.m=!0,Ng(n.Ja,n),n.C=0)}function d_(n,e){var t;t=e?e.m:n.U++;const r=kl(n.F);Ti(r,"SID",n.I),Ti(r,"RID",t),Ti(r,"AID",n.T),sp(n,r),n.o&&n.s&&Fb(r,n.o,n.s),t=new Fu(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Ah(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),i_(n.h,t),Lu(t,r,e)}function sp(n,e){n.ia&&id(n.ia,function(t,r){Ti(e,r,t)}),n.l&&Rn({},function(t,r){Ti(e,r,t)})}function Ah(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ts(n.l.Ra,n.l,n):null;e:{var o=n.i;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=o[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let y=!0;for(let E=0;E<t;E++){let S=o[E].h;const U=o[E].g;if(S-=l,0>S)l=Math.max(0,o[E].h-100),y=!1;else try{ea(U,d,"req"+S+"_")}catch(K){r&&r(U)}}if(y){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Bb(n){n.g||n.u||(n.Z=1,Ng(n.Ia,n),n.A=0)}function h_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Pu(Ts(n.Ia,n),_d(n,n.A)),n.A++,0))}function op(n){null!=n.B&&(zn.clearTimeout(n.B),n.B=null)}function Yg(n){n.g=new Fu(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=kl(n.sa);Ti(e,"RID","rpc"),Ti(e,"SID",n.I),Ti(e,"CI",n.L?"0":"1"),Ti(e,"AID",n.T),Ti(e,"TYPE","xmlhttp"),sp(n,e),n.o&&n.s&&Fb(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Eh(kl(e)),t.s=null,t.P=!0,Ug(t,n)}function ap(n){null!=n.v&&(zn.clearTimeout(n.v),n.v=null)}function bC(n,e){var t=null;if(n.g==e){ap(n),op(n),n.g=null;var r=2}else{if(!r_(n.h,e))return;t=e.D,Ab(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ts(r=Ml(),new mh(r,t,e,o)),Sh(n)}else Bb(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function vC(n,e){return!(Gg(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Pu(Ts(n.Ja,n,e),_d(n,n.C)),n.C++,0)))}(n,e)||2==r&&h_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Vu(n,5);break;case 4:Vu(n,10);break;case 3:Vu(n,6);break;default:Vu(n,2)}}function _d(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Vu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ts(n.kb,n);t||(t=new Ol("//www.google.com/images/cleardot.gif"),zn.location&&"http"==zn.location.protocol||Jl(t,"https"),Eh(t)),function a_(n,e){const t=new Zf;if(zn.Image){const r=new Image;r.onload=Kl(np,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Kl(np,t,r,"TestLoadImage: error",!1,e),r.onabort=Kl(np,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Kl(np,t,r,"TestLoadImage: timeout",!1,e),zn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ii(2);n.G=0,n.l&&n.l.va(e),f_(n),qg(n)}function f_(n){if(n.G=0,n.la=[],n.l){const e=s_(n.h);(0!=e.length||0!=n.i.length)&&(Eg(n.la,e),Eg(n.la,n.i),n.h.i.length=0,nd(n.i),n.i.length=0),n.l.ua()}}function Vb(n,e,t){var r=t instanceof Ol?kl(t):new Ol(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),wh(r,r.m);else{var o=zn.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var l=new Ol(null,void 0);r&&Jl(l,r),e&&(l.g=e),o&&wh(l,o),t&&(l.l=t),r=l}return e=n.za,(t=n.D)&&e&&Ti(r,t,e),Ti(r,"VER",n.ma),sp(n,r),r}function Kg(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hs(t&&n.Da&&!n.ra?new gd({jb:!0}):n.ra)).Ka(n.H),e}function $b(){}function Zg(){if(Mu&&!(10<=Number(_b)))throw Error("Environmental error: no available transport.")}function La(n,e){us.call(this),this.g=new c_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!vc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new xh(this)}function Ub(n){Jf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jb(){Na.call(this),this.status=1}function xh(n){this.g=n}(pn=hs.prototype).Ka=function(n){this.L=n},pn.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rl.g(),this.C=function cs(n){return n.h||(n.h=n.i())}(this.u?this.u:Rl),this.g.onreadystatechange=Ts(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Rb(this,l)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const l of r.keys())t.set(l,r.get(l))}r=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),o=zn.FormData&&n instanceof zn.FormData,!(0<=Ky(Mb,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,d]of t)this.g.setRequestHeader(l,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yd(this),0<this.B&&((this.K=function _C(n){return Mu&&function Zy(){return function $f(n){var e=Tg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Au(String(rd)).split("."),t=Au("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",l=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Vf(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Vf(0==o[2].length,0==l[2].length)||Vf(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ts(this.qa,this)):this.A=gh(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Rb(this,l)}},pn.qa=function(){void 0!==Pa&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ts(this,"timeout"),this.abort(8))},pn.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ts(this,"complete"),ts(this,"abort"),Wg(this))},pn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wg(this,!0)),hs.X.M.call(this)},pn.Ha=function(){this.s||(this.F||this.v||this.l?kb(this):this.fb())},pn.fb=function(){kb(this)},pn.aa=function(){try{return 2<Oo(this)?this.g.status:-1}catch(n){return-1}},pn.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},pn.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xb(e)}},pn.Ea=function(){return this.m},pn.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pn=c_.prototype).ma=8,pn.G=1,pn.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Fu(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=tl(l),Gf(l,this.S)):l=this.S),null!==this.o||this.N||(o.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ah(this,o,e),Ti(t=kl(this.F),"RID",n),Ti(t,"CVER",22),this.D&&Ti(t,"X-HTTP-Session-Id",this.D),sp(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(Nb(l)))+"&"+e:this.o&&Fb(t,this.o,l)),i_(this.h,o),this.Ya&&Ti(t,"TYPE","init"),this.O?(Ti(t,"$req",e),Ti(t,"SID","null"),o.Z=!0,Lu(o,t,null)):Lu(o,t,e),this.G=2}}else 3==this.G&&(n?d_(this,n):0==this.i.length||Sb(this.h)||d_(this))},pn.Ia=function(){if(this.u=null,Yg(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Pu(Ts(this.eb,this),n)}},pn.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ii(10),Fa(this),Yg(this))},pn.cb=function(){null!=this.v&&(this.v=null,Fa(this),h_(this),ii(19))},pn.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ii(2)):(this.j.info("Failed to ping google.com"),ii(1))},(pn=$b.prototype).xa=function(){},pn.wa=function(){},pn.va=function(){},pn.ua=function(){},pn.Ra=function(){},Zg.prototype.g=function(n,e){return new La(n,e)},eo(La,us),La.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ii(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Vb(n,null,n.V),Sh(n)},La.prototype.close=function(){Lb(this.g)},La.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Gi(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Sh(e)},La.prototype.M=function(){this.g.l=null,delete this.j,Lb(this.g),delete this.g,La.X.M.call(this)},eo(Ub,Jf),eo(jb,Na),eo(xh,$b),xh.prototype.xa=function(){ts(this.g,"a")},xh.prototype.wa=function(n){ts(this.g,new Ub(n))},xh.prototype.va=function(n){ts(this.g,new jb(n))},xh.prototype.ua=function(){ts(this.g,"b")},Zg.prototype.createWebChannel=Zg.prototype.g,La.prototype.send=La.prototype.u,La.prototype.open=La.prototype.m,La.prototype.close=La.prototype.close,yh.NO_ERROR=0,yh.TIMEOUT=8,yh.HTTP_ERROR=6,Bg.COMPLETE="complete",_h.EventType=Nu,Nu.OPEN="a",Nu.CLOSE="b",Nu.ERROR="c",Nu.MESSAGE="d",us.prototype.listen=us.prototype.N,hs.prototype.listenOnce=hs.prototype.O,hs.prototype.getLastError=hs.prototype.Oa,hs.prototype.getLastErrorCode=hs.prototype.Ea,hs.prototype.getStatus=hs.prototype.aa,hs.prototype.getResponseJson=hs.prototype.Sa,hs.prototype.getResponseText=hs.prototype.fa,hs.prototype.send=hs.prototype.da,hs.prototype.setWithCredentials=hs.prototype.Ka;var Hb=js.createWebChannelTransport=function(){return new Zg},p_=js.getStatEventTarget=function(){return Ml()},Qg=js.ErrorCode=yh,g_=js.EventType=Bg,wC=js.Event=ku,Gb=js.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Wb=js.FetchXmlHttpFactory=gd,lp=js.WebChannel=_h,vd=js.XhrIo=hs;const m_="@firebase/firestore";class ro{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ro.UNAUTHENTICATED=new ro(null),ro.GOOGLE_CREDENTIALS=new ro("google-credentials-uid"),ro.FIRST_PARTY=new ro("first-party-uid"),ro.MOCK_USER=new ro("mock-user");let Mh="9.12.1";const bd=new Qn.Yd("@firebase/firestore");function Rh(){return bd.logLevel}function Ht(n,...e){if(bd.logLevel<=Qn.in.DEBUG){const t=e.map(up);bd.debug(`Firestore (${Mh}): ${n}`,...t)}}function fs(n,...e){if(bd.logLevel<=Qn.in.ERROR){const t=e.map(up);bd.error(`Firestore (${Mh}): ${n}`,...t)}}function Sc(n,...e){if(bd.logLevel<=Qn.in.WARN){const t=e.map(up);bd.warn(`Firestore (${Mh}): ${n}`,...t)}}function up(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function wn(n="Unexpected state"){const e=`FIRESTORE (${Mh}) INTERNAL ASSERTION FAILED: `+n;throw fs(e),new Error(e)}function Gn(n,e){n||wn()}function an(n,e){return n}const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ut extends re.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class As{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Oh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ro.UNAUTHENTICATED))}shutdown(){}}class zb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class CC{constructor(e){this.t=e,this.currentUser=ro.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=S=>this.i!==o?(o=this.i,t(S)):Promise.resolve();let d=new As;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new As,e.enqueueRetryable(()=>l(this.currentUser))};const y=()=>{const S=d;e.enqueueRetryable((0,Xe.Z)(function*(){yield S.promise,yield l(r.currentUser)}))},E=S=>{Ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=S,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(S=>E(S)),setTimeout(()=>{if(!this.auth){const S=this.t.getImmediate({optional:!0});S?E(S):(Ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new As)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Gn("string"==typeof r.accessToken),new Oh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Gn(null===e||"string"==typeof e),new ro(e)}}class DC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=ro.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Gn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class qb{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new DC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ro.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yb{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=l=>{null!=l.error&&Ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.A;return this.A=l.token,Ht("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.T.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.T.getImmediate({optional:!0});l?o(l):Ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Gn("string"==typeof t.token),this.A=t.token,new Jg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Zb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Kb(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function lr(n,e){return n<e?-1:n>e?1:0}function kh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Qb(n){return n+"\0"}class zr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ut(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ut(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ut(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ut(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zr.fromMillis(Date.now())}static fromDate(e){return zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new zr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zn(e)}static min(){return new Zn(new zr(0,0))}static max(){return new Zn(new zr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ph{constructor(e,t,r){void 0===t?t=0:t>e.length&&wn(),void 0===r?r=e.length-t:r>e.length-t&&wn(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ph.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ph?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qr extends Ph{construct(e,t,r){return new qr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ut(Dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new qr(t)}static emptyPath(){return new qr([])}}const TC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ps extends Ph{construct(e,t,r){return new ps(e,t,r)}static isValidIdentifier(e){return TC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ps.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ps(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Ut(Dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const y=e[o];if("\\"===y){if(o+1===e.length)throw new Ut(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Ut(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===y?(d=!d,o++):"."!==y||d?(r+=y,o++):(l(),o++)}if(l(),d)throw new Ut(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ps(t)}static emptyPath(){return new ps([])}}class sn{constructor(e){this.path=e}static fromPath(e){return new sn(qr.fromString(e))}static fromName(e){return new sn(qr.fromString(e).popFirst(5))}static empty(){return new sn(qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sn(new qr(e.slice()))}}class cp{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function y_(n){return n.fields.find(e=>2===e.kind)}function wd(n){return n.fields.filter(e=>2!==e.kind)}cp.UNKNOWN_ID=-1;class sr{constructor(e,t){this.fieldPath=e,this.kind=t}}class Nh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Nh(0,Ba.min())}}function __(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Zn.fromTimestamp(1e9===r?new zr(t+1,0):new zr(t,r));return new Ba(o,sn.empty(),e)}function Jb(n){return new Ba(n.readTime,n.key,-1)}class Ba{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ba(Zn.min(),sn.empty(),-1)}static max(){return new Ba(Zn.max(),sn.empty(),-1)}}function em(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=sn.comparator(n.documentKey,e.documentKey),0!==t?t:lr(n.largestBatchId,e.largestBatchId))}const ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ac(n){return b_.apply(this,arguments)}function b_(){return b_=(0,Xe.Z)(function*(n){if(n.code!==Dt.FAILED_PRECONDITION||n.message!==ew)throw n;Ht("LocalStore","Unexpectedly lost primary lease")}),b_.apply(this,arguments)}class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bt((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof bt?t:bt.resolve(t)}catch(t){return bt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):bt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):bt.reject(t)}static resolve(e){return new bt((t,r)=>{t(e)})}static reject(e){return new bt((t,r)=>{r(e)})}static waitFor(e){return new bt((t,r)=>{let o=0,l=0,d=!1;e.forEach(y=>{++o,y.next(()=>{++l,d&&l===o&&t()},E=>r(E))}),d=!0,l===o&&t()})}static or(e){let t=bt.resolve(!1);for(const r of e)t=t.next(o=>o?bt.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}static mapArray(e,t){return new bt((r,o)=>{const l=e.length,d=new Array(l);let y=0;for(let E=0;E<l;E++){const S=E;t(e[S]).next(U=>{d[S]=U,++y,y===l&&r(d)},U=>o(U))}})}static doWhile(e,t){return new bt((r,o)=>{const l=()=>{!0===e()?t().next(()=>{l()},o):r()};l()})}}class dp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new As,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new hp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=tw(r.target.error);this.P.reject(new hp(e,o))}}static open(e,t,r,o){try{return new dp(t,e.transaction(o,r))}catch(l){throw new hp(t,l)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ht("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new w_(t)}}class nl{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===nl.D((0,re.z$)())&&fs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ht("SimpleDb","Removing database:",e),Id(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,re.hl)())return!1;if(nl.N())return!0;const e=(0,re.z$)(),t=nl.D(e),r=0<t&&t<10,o=nl.k(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Xe.Z)(function*(){return t.db||(Ht("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{o(new hp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const y=d.target.error;o("VersionError"===y.name?new Ut(Dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ut(Dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new hp(e,y))},l.onupgradeneeded=d=>{Ht("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Ht("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,Xe.Z)(function*(){const d="readonly"===t;let y=0;for(;;){++y;try{l.db=yield l.F(e);const E=dp.open(l.db,e,d?"readonly":"readwrite",r),S=o(E).next(U=>(E.V(),U)).catch(U=>(E.abort(U),bt.reject(U))).toPromise();return S.catch(()=>{}),yield E.v,S}catch(E){const S=E,U="FirebaseError"!==S.name&&y<3;if(Ht("SimpleDb","Transaction failed with error:",S.message,"Retrying:",U),l.close(),!U)return Promise.reject(S)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ed{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Id(this.U.delete())}}class hp extends Ut{constructor(e,t){super(Dt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tu(n){return"IndexedDbTransactionError"===n.name}class w_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ht("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ht("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Id(r)}add(e){return Ht("SimpleDb","ADD",this.store.name,e,e),Id(this.store.add(e))}get(e){return Id(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ht("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ht("SimpleDb","DELETE",this.store.name,e),Id(this.store.delete(e))}count(){return Ht("SimpleDb","COUNT",this.store.name),Id(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.H(o,(d,y)=>{l.push(y)}).next(()=>l)}{const o=this.store.getAll(r.range);return new bt((l,d)=>{o.onerror=y=>{d(y.target.error)},o.onsuccess=y=>{l(y.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new bt((o,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Ht("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(l,d,y)=>y.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new bt((r,o)=>{t.onerror=l=>{const d=tw(l.target.error);o(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(y=>{y?d.continue():r()}):r()}})}H(e,t){const r=[];return new bt((o,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const y=d.target.result;if(!y)return void o();const E=new Ed(y),S=t(y.primaryKey,y.value,E);if(S instanceof bt){const U=S.catch(K=>(E.done(),bt.reject(K)));r.push(U)}E.isDone?o():null===E.G?y.continue():y.continue(E.G)}}).next(()=>bt.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Id(n){return new bt((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=tw(r.target.error);t(o)}})}let AC=!1;function tw(n){const e=nl.D((0,re.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ut("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AC||(AC=!0,setTimeout(()=>{throw r},0)),r}}return n}class bS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ht("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Xe.Z)(function*(){t.task=null;try{Ht("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){tu(r)?Ht("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ac(r)}yield t.nt(6e4)}))}}class xC{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Xe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,l=!0;return bt.doWhile(()=>!0===l&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ht("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(y=>{o-=y,r.add(d)});l=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(l=>{const d=l.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,l)).next(y=>(Ht("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,l)=>{const d=Jb(l);em(d,r)>0&&(r=d)}),new Ba(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function MC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ta.at=-1;class gs{constructor(e,t){this.comparator=e,this.root=t||Hs.EMPTY}insert(e,t){return new gs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hs.BLACK,null,null))}remove(e){return new gs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fp(this.root,e,this.comparator,!1)}getReverseIterator(){return new fp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fp(this.root,e,this.comparator,!0)}}class fp{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hs{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:Hs.RED,this.left=null!=o?o:Hs.EMPTY,this.right=null!=l?l:Hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Hs(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Hs.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wn();const e=this.left.check();if(e!==this.right.check())throw wn();return e+(this.isRed()?0:1)}}Hs.EMPTY=null,Hs.RED=!0,Hs.BLACK=!1,Hs.EMPTY=new class{constructor(){this.size=0}get key(){throw wn()}get value(){throw wn()}get color(){throw wn()}get left(){throw wn()}get right(){throw wn()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Hs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _i{constructor(e){this.comparator=e,this.data=new gs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new E_(this.data.getIterator())}getIteratorFrom(e){return new E_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _i)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _i(this.comparator);return t.data=e,t}}class E_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fh(n){return n.hasNext()?n.getNext():void 0}class Va{constructor(e){this.fields=e,e.sort(ps.comparator)}static empty(){return new Va([])}unionWith(e){let t=new _i(ps.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Va(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class io{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new io(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new io(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}io.EMPTY_BYTE_STRING=new io("");const OC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $u(n){if(Gn(!!n),"string"==typeof n){let e=0;const t=OC.exec(n);if(Gn(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ms(n.seconds),nanos:ms(n.nanos)}}function ms(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xc(n){return"string"==typeof n?io.fromBase64String(n):io.fromUint8Array(n)}function tm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nm(n){const e=n.mapValue.fields.__previous_value__;return tm(e)?nm(e):e}function rm(n){const e=$u(n.mapValue.fields.__local_write_time__.timestampValue);return new zr(e.seconds,e.nanos)}class I_{constructor(e,t,r,o,l,d,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.useFetchStreams=E}}class Mc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}function im(n){return null==n}function nu(n){return 0===n&&1/n==-1/0}function C_(n){return"number"==typeof n&&Number.isInteger(n)&&!nu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Td={nullValue:"NULL_VALUE"};function ko(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tm(n)?4:om(n)?9007199254740991:10:wn()}function Pl(n,e){if(n===e)return!0;const t=ko(n);if(t!==ko(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rm(n).isEqual(rm(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=$u(r.timestampValue),d=$u(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,xc(n.bytesValue).isEqual(xc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return ms(r.geoPointValue.latitude)===ms(o.geoPointValue.latitude)&&ms(r.geoPointValue.longitude)===ms(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ms(r.integerValue)===ms(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=ms(r.doubleValue),d=ms(o.doubleValue);return l===d?nu(l)===nu(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return kh(n.arrayValue.values||[],e.arrayValue.values||[],Pl);case 10:return function(r,o){const l=r.mapValue.fields||{},d=o.mapValue.fields||{};if(MC(l)!==MC(d))return!1;for(const y in l)if(l.hasOwnProperty(y)&&(void 0===d[y]||!Pl(l[y],d[y])))return!1;return!0}(n,e);default:return wn()}var o}function pp(n,e){return void 0!==(n.values||[]).find(t=>Pl(t,e))}function ru(n,e){if(n===e)return 0;const t=ko(n),r=ko(e);if(t!==r)return lr(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lr(n.booleanValue,e.booleanValue);case 2:return function(o,l){const d=ms(o.integerValue||o.doubleValue),y=ms(l.integerValue||l.doubleValue);return d<y?-1:d>y?1:d===y?0:isNaN(d)?isNaN(y)?0:-1:1}(n,e);case 3:return iu(n.timestampValue,e.timestampValue);case 4:return iu(rm(n),rm(e));case 5:return lr(n.stringValue,e.stringValue);case 6:return function(o,l){const d=xc(o),y=xc(l);return d.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),y=l.split("/");for(let E=0;E<d.length&&E<y.length;E++){const S=lr(d[E],y[E]);if(0!==S)return S}return lr(d.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const d=lr(ms(o.latitude),ms(l.latitude));return 0!==d?d:lr(ms(o.longitude),ms(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const d=o.values||[],y=l.values||[];for(let E=0;E<d.length&&E<y.length;++E){const S=ru(d[E],y[E]);if(S)return S}return lr(d.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){if(o===Uu.mapValue&&l===Uu.mapValue)return 0;if(o===Uu.mapValue)return 1;if(l===Uu.mapValue)return-1;const d=o.fields||{},y=Object.keys(d),E=l.fields||{},S=Object.keys(E);y.sort(),S.sort();for(let U=0;U<y.length&&U<S.length;++U){const K=lr(y[U],S[U]);if(0!==K)return K;const ce=ru(d[y[U]],E[S[U]]);if(0!==ce)return ce}return lr(y.length,S.length)}(n.mapValue,e.mapValue);default:throw wn()}}function iu(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return lr(n,e);const t=$u(n),r=$u(e),o=lr(t.seconds,r.seconds);return 0!==o?o:lr(t.nanos,r.nanos)}function Rc(n){return sm(n)}function sm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=$u(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xc(n.bytesValue).toBase64():"referenceValue"in n?sn.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const d of r.values||[])l?l=!1:o+=",",o+=sm(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const y of o)d?d=!1:l+=",",l+=`${y}:${sm(r.fields[y])}`;return l+"}"}(n.mapValue):wn();var e}function ju(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nw(n){return!!n&&"integerValue"in n}function Lh(n){return!!n&&"arrayValue"in n}function kC(n){return!!n&&"nullValue"in n}function gp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function Ad(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ad(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ad(n.arrayValue.values[t]);return e}return Object.assign({},n)}function om(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function D_(n){return"nullValue"in n?Td:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ju(Mc.empty(),sn.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:wn()}function wS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ju(Mc.empty(),sn.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Uu:wn()}function rw(n,e){const t=ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function iw(n,e){const t=ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Po{constructor(e){this.value=e}static empty(){return new Po({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ad(t)}setAll(e){let t=ps.emptyPath(),r={},o=[];e.forEach((d,y)=>{if(!t.isImmediateParentOf(y)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=y.popLast()}d?r[y.lastSegment()]=Ad(d):o.push(y.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Cd(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Po(Ad(this.value))}}function sw(n){const e=[];return Cd(n.fields,(t,r)=>{const o=new ps([t]);if(Sd(r)){const l=sw(r.mapValue).fields;if(0===l.length)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new Va(e)}class Si{constructor(e,t,r,o,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Si(e,0,Zn.min(),Zn.min(),Po.empty(),0)}static newFoundDocument(e,t,r){return new Si(e,1,t,Zn.min(),r,0)}static newNoDocument(e,t){return new Si(e,2,t,Zn.min(),Po.empty(),0)}static newUnknownDocument(e,t){return new Si(e,3,t,Zn.min(),Po.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Po.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Po.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Si(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ES{constructor(e,t=null,r=[],o=[],l=null,d=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=y,this.ht=null}}function ow(n,e=null,t=[],r=[],o=null,l=null,d=null){return new ES(n,e,t,r,o,l,d)}function Bh(n){const e=an(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Rc(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),im(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rc(r)).join(",")),e.ht=t}return e.ht}function Vh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!lw(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Pl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!T_(n.startAt,e.startAt)&&T_(n.endAt,e.endAt)}function am(n){return sn.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $h(n,e){return n.filters.filter(t=>t instanceof jo&&t.field.isEqual(e))}function PC(n,e,t){let r=Td,o=!0;for(const l of $h(n,e)){let d=Td,y=!0;switch(l.op){case"<":case"<=":d=D_(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,y=!1;break;case"!=":case"not-in":d=Td}rw({value:r,inclusive:o},{value:d,inclusive:y})<0&&(r=d,o=y)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];rw({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function NC(n,e,t){let r=Uu,o=!0;for(const l of $h(n,e)){let d=Uu,y=!0;switch(l.op){case">=":case">":d=wS(l.value),y=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,y=!1;break;case"!=":case"not-in":d=Uu}iw({value:r,inclusive:o},{value:d,inclusive:y})>0&&(r=d,o=y)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];iw({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class jo extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new IS(e,t,r):"array-contains"===t?new TS(e,r):"in"===t?new SS(e,r):"not-in"===t?new AS(e,r):"array-contains-any"===t?new Oc(e,r):new jo(e,t,r)}static lt(e,t,r){return"in"===t?new CS(e,r):new DS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ru(t,this.value)):null!==t&&ko(this.value)===ko(t)&&this.ft(ru(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class IS extends jo{constructor(e,t,r){super(e,t,r),this.key=sn.fromName(r.referenceValue)}matches(e){const t=sn.comparator(e.key,this.key);return this.ft(t)}}class CS extends jo{constructor(e,t){super(e,"in",t),this.keys=FC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DS extends jo{constructor(e,t){super(e,"not-in",t),this.keys=FC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>sn.fromName(r.referenceValue))}class TS extends jo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lh(t)&&pp(t.arrayValue,this.value)}}class SS extends jo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pp(this.value.arrayValue,t)}}class AS extends jo{constructor(e,t){super(e,"not-in",t)}matches(e){if(pp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pp(this.value.arrayValue,t)}}class Oc extends jo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pp(this.value.arrayValue,r))}}class su{constructor(e,t){this.position=e,this.inclusive=t}}class Uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function lw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function lm(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(r=l.field.isKeyField()?sn.comparator(sn.fromName(d.referenceValue),t.key):ru(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function T_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pl(n.position[t],e.position[t]))return!1;return!0}class Nl{constructor(e,t=null,r=[],o=[],l=null,d="F",y=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=y,this.endAt=E,this._t=null,this.wt=null}}function uw(n,e,t,r,o,l,d,y){return new Nl(n,e,t,r,o,l,d,y)}function $a(n){return new Nl(n)}function S_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function A_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function x_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function um(n){return null!==n.collectionGroup}function jh(n){const e=an(n);if(null===e._t){e._t=[];const t=x_(e),r=A_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Uh(t)),e._t.push(new Uh(ps.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e._t.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Uh(ps.keyField(),l))}}}return e._t}function na(n){const e=an(n);if(!e.wt)if("F"===e.limitType)e.wt=ow(e.path,e.collectionGroup,jh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of jh(e))t.push(new Uh(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new su(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new su(e.startAt.position,e.startAt.inclusive):null;e.wt=ow(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function xd(n,e,t){return new Nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ou(n,e){return Vh(na(n),na(e))&&n.limitType===e.limitType}function cm(n){return`${Bh(na(n))}|lt:${n.limitType}`}function kc(n){return`Query(target=${function aw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Rc(r.value)}`;var r}).join(", ")}]`),im(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Rc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Rc(t)).join(",")),`Target(${e})`}(na(n))}; limitType=${n.limitType})`}function mp(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):sn.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,d){const y=lm(o,l,d);return o.inclusive?y<=0:y<0}(t.startAt,jh(t),r)||t.endAt&&!function(o,l,d){const y=lm(o,l,d);return o.inclusive?y>=0:y>0}(t.endAt,jh(t),r)));var t,r}function yp(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function M_(n){return(e,t)=>{let r=!1;for(const o of jh(n)){const l=cw(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function cw(n,e,t){const r=n.field.isKeyField()?sn.comparator(e.key,t.key):function(o,l,d){const y=l.data.field(o),E=d.data.field(o);return null!==y&&null!==E?ru(y,E):wn()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return wn()}}function dm(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function hm(n){return{integerValue:""+n}}function R_(n,e){return C_(e)?hm(e):dm(n,e)}class Hh{constructor(){this._=void 0}}function LC(n,e,t){return n instanceof Md?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Rd?O_(n,e):n instanceof Pc?hw(n,e):function(r,o){const l=dw(r,o),d=k_(l)+k_(r.yt);return nw(l)&&nw(r.yt)?hm(d):dm(r.It,d)}(n,e)}function xS(n,e,t){return n instanceof Rd?O_(n,e):n instanceof Pc?hw(n,e):t}function dw(n,e){return n instanceof mo?nw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Md extends Hh{}class Rd extends Hh{constructor(e){super(),this.elements=e}}function O_(n,e){const t=fw(e);for(const r of n.elements)t.some(o=>Pl(o,r))||t.push(r);return{arrayValue:{values:t}}}class Pc extends Hh{constructor(e){super(),this.elements=e}}function hw(n,e){let t=fw(e);for(const r of n.elements)t=t.filter(o=>!Pl(o,r));return{arrayValue:{values:t}}}class mo extends Hh{constructor(e,t){super(),this.It=e,this.yt=t}}function k_(n){return ms(n.integerValue||n.doubleValue)}function fw(n){return Lh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fm{constructor(e,t){this.field=e,this.transform=t}}class P_{constructor(e,t){this.version=e,this.transformResults=t}}class Pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gm{}function pw(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Nc(n.key,Pi.none()):new Gh(n.key,n.data,Pi.none());{const t=n.data,r=Po.empty();let o=new _i(ps.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);null===d&&l.length>1&&(l=l.popLast(),d=t.field(l)),null===d?r.delete(l):r.set(l,d),o=o.add(l)}return new au(n.key,r,new Va(o.toArray()),Pi.none())}}function gw(n,e,t){n instanceof Gh?function(r,o,l){const d=r.value.clone(),y=_w(r.fieldTransforms,o,l.transformResults);d.setAll(y),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof au?function(r,o,l){if(!pm(r.precondition,o))return void o.convertToUnknownDocument(l.version);const d=_w(r.fieldTransforms,o,l.transformResults),y=o.data;y.setAll(N_(r)),y.setAll(d),o.convertToFoundDocument(l.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _p(n,e,t,r){return n instanceof Gh?function(o,l,d,y){if(!pm(o.precondition,l))return d;const E=o.value.clone(),S=Fl(o.fieldTransforms,y,l);return E.setAll(S),l.convertToFoundDocument(l.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof au?function(o,l,d,y){if(!pm(o.precondition,l))return d;const E=Fl(o.fieldTransforms,y,l),S=l.data;return S.setAll(N_(o)),S.setAll(E),l.convertToFoundDocument(l.version,S).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(U=>U.field))}(n,e,t,r):(d=t,pm(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d);var l,d}function mw(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=dw(r.transform,o||null);null!=l&&(null===t&&(t=Po.empty()),t.set(r.field,l))}return t||null}function yw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&kh(t,r,(o,l)=>function BC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rd&&r instanceof Rd||t instanceof Pc&&r instanceof Pc?kh(t.elements,r.elements,Pl):t instanceof mo&&r instanceof mo?Pl(t.yt,r.yt):t instanceof Md&&r instanceof Md);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Gh extends gm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class au extends gm{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function N_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _w(n,e,t){const r=new Map;Gn(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,y=e.data.field(l.field);r.set(l.field,xS(d,y,t[o]))}return r}function Fl(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,LC(l,d,e))}return r}class Nc extends gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F_ extends gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VC{constructor(e){this.count=e}}var so,Hr;function vw(n){switch(n){default:return wn();case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0}}function bw(n){if(void 0===n)return fs("GRPC error has no .code"),Dt.UNKNOWN;switch(n){case so.OK:return Dt.OK;case so.CANCELLED:return Dt.CANCELLED;case so.UNKNOWN:return Dt.UNKNOWN;case so.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case so.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case so.INTERNAL:return Dt.INTERNAL;case so.UNAVAILABLE:return Dt.UNAVAILABLE;case so.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case so.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case so.NOT_FOUND:return Dt.NOT_FOUND;case so.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case so.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case so.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case so.ABORTED:return Dt.ABORTED;case so.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case so.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case so.DATA_LOSS:return Dt.DATA_LOSS;default:return wn()}}(Hr=so||(so={}))[Hr.OK=0]="OK",Hr[Hr.CANCELLED=1]="CANCELLED",Hr[Hr.UNKNOWN=2]="UNKNOWN",Hr[Hr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hr[Hr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hr[Hr.NOT_FOUND=5]="NOT_FOUND",Hr[Hr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hr[Hr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hr[Hr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hr[Hr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hr[Hr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hr[Hr.ABORTED=10]="ABORTED",Hr[Hr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hr[Hr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hr[Hr.INTERNAL=13]="INTERNAL",Hr[Hr.UNAVAILABLE=14]="UNAVAILABLE",Hr[Hr.DATA_LOSS=15]="DATA_LOSS";class Fc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cd(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return Dd(this.inner)}size(){return this.innerSize}}const L_=new gs(sn.comparator);function wa(){return L_}const ww=new gs(sn.comparator);function Lc(...n){let e=ww;for(const t of n)e=e.insert(t.key,t);return e}function mm(n){let e=ww;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ua(){return Od()}function $C(){return Od()}function Od(){return new Fc(n=>n.toString(),(n,e)=>n.isEqual(e))}const MS=new gs(sn.comparator),Ew=new _i(sn.comparator);function yr(...n){let e=Ew;for(const t of n)e=e.add(t);return e}const Iw=new _i(lr);function vp(){return Iw}class kd{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,ja.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kd(Zn.min(),o,vp(),wa(),yr())}}class ja{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ja(r,t,yr(),yr(),yr())}}class Pd{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class bp{constructor(e,t){this.targetId=e,this.At=t}}class Wh{constructor(e,t,r=io.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Cw{constructor(){this.Rt=0,this.bt=Dw(),this.Pt=io.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=yr(),t=yr(),r=yr();return this.bt.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:wn()}}),new ja(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Dw()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class B_{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=wa(),this.qt=V_(),this.Kt=new _i(lr)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:wn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const l=o.target;if(am(l))if(0===r){const d=new sn(l.path);this.jt(t,d,Si.newNoDocument(d,Zn.min()))}else Gn(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((l,d)=>{const y=this.Xt(d);if(y){if(l.current&&am(y.target)){const E=new sn(y.target.path);null!==this.Ut.get(E)||this.ee(d,E)||this.jt(d,E,Si.newNoDocument(E,e))}l.Dt&&(t.set(d,l.xt()),l.Nt())}});let r=yr();this.qt.forEach((l,d)=>{let y=!0;d.forEachWhile(E=>{const S=this.Xt(E);return!S||2===S.purpose||(y=!1,!1)}),y&&(r=r.add(l))}),this.Ut.forEach((l,d)=>d.setReadTime(e));const o=new kd(e,t,this.Kt,this.Ut,r);return this.Ut=wa(),this.qt=V_(),this.Kt=new _i(lr),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Cw,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new _i(lr),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ht("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Cw),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function V_(){return new gs(sn.comparator)}function Dw(){return new gs(sn.comparator)}const UC={asc:"ASCENDING",desc:"DESCENDING"},wp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class jC{constructor(e,t){this.databaseId=e,this.gt=t}}function ym(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tw(n,e){return n.gt?e.toBase64():e.toUint8Array()}function RS(n,e){return ym(n,e.toTimestamp())}function yo(n){return Gn(!!n),Zn.fromTimestamp(function(e){const t=$u(e);return new zr(t.seconds,t.nanos)}(n))}function $_(n,e){return(t=n,new qr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Sw(n){const e=qr.fromString(n);return Gn(Nd(e)),e}function zh(n,e){return $_(n.databaseId,e.path)}function rl(n,e){const t=Sw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ut(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ut(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new sn(Aw(t))}function U_(n,e){return $_(n.databaseId,e)}function _m(n){const e=Sw(n);return 4===e.length?qr.emptyPath():Aw(e)}function Ep(n){return new qr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Aw(n){return Gn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xw(n,e,t){return{name:zh(n,e),fields:t.value.mapValue.fields}}function Mw(n,e,t){const r=rl(n,e.name),o=yo(e.updateTime),l=new Po({mapValue:{fields:e.fields}}),d=Si.newFoundDocument(r,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Bc(n,e){let t;if(e instanceof Gh)t={update:xw(n,e.key,e.value)};else if(e instanceof Nc)t={delete:zh(n,e.key)};else if(e instanceof au)t={update:xw(n,e.key,e.data),updateMask:G_(e.fieldMask)};else{if(!(e instanceof F_))return wn();t={verify:zh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const d=l.transform;if(d instanceof Md)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Rd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof mo)return{fieldPath:l.field.canonicalString(),increment:d.yt};throw wn()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:RS(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:wn()),t;var o}function Hu(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Pi.updateTime(yo(o.updateTime)):void 0!==o.exists?Pi.exists(o.exists):Pi.none():Pi.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,d){let y=null;"setToServerValue"in d?(Gn("REQUEST_TIME"===d.setToServerValue),y=new Md):"appendMissingElements"in d?y=new Rd(d.appendMissingElements.values||[]):"removeAllFromArray"in d?y=new Pc(d.removeAllFromArray.values||[]):"increment"in d?y=new mo(l,d.increment):wn();const E=ps.fromServerFormat(d.fieldPath);return new fm(E,y)}(n,o)):[];var o;if(e.update){const o=rl(n,e.update.name),l=new Po({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Va((e.updateMask.fieldPaths||[]).map(S=>ps.fromServerFormat(S)));return new au(o,l,d,t,r)}return new Gh(o,l,t,r)}if(e.delete){const o=rl(n,e.delete);return new Nc(o,t)}if(e.verify){const o=rl(n,e.verify);return new F_(o,t)}return wn()}function qh(n,e){return{documents:[U_(n,e.path)]}}function j_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=U_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=U_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const S=E.map(U=>function(K){if("=="===K.op){if(gp(K.value))return{unaryFilter:{field:xs(K.field),op:"IS_NAN"}};if(kC(K.value))return{unaryFilter:{field:xs(K.field),op:"IS_NULL"}}}else if("!="===K.op){if(gp(K.value))return{unaryFilter:{field:xs(K.field),op:"IS_NOT_NAN"}};if(kC(K.value))return{unaryFilter:{field:xs(K.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xs(K.field),op:Ip(K.op),value:K.value}}}(U));return 1===S.length?S[0]:{compositeFilter:{op:"AND",filters:S}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(E){if(0!==E.length)return E.map(S=>{return{field:xs((U=S).field),direction:lu(U.dir)};var U})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(S=e.limit,n.gt||im(S)?S:{value:S});var S,y,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function Rw(n){let e=_m(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Gn(1===r);const U=t.from[0];U.allDescendants?o=U.collectionId:e=e.child(U.collectionId)}let l=[];t.where&&(l=Ow(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(U=>{return new Uh(il((K=U).field),function(ce){switch(ce){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction));var K}));let y=null;t.limit&&(y=function(U){let K;return K="object"==typeof U?U.value:U,im(K)?null:K}(t.limit));let E=null;var U;t.startAt&&(E=new su((U=t.startAt).values||[],!!U.before));let S=null;return t.endAt&&(S=function(U){return new su(U.values||[],!U.before)}(t.endAt)),uw(e,o,d,l,y,"F",E,S)}function Ow(n){return n?void 0!==n.unaryFilter?[sl(n)]:void 0!==n.fieldFilter?[vm(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Ow(e)).reduce((e,t)=>e.concat(t)):wn():[]}function lu(n){return UC[n]}function Ip(n){return wp[n]}function xs(n){return{fieldPath:n.canonicalString()}}function il(n){return ps.fromServerFormat(n.fieldPath)}function vm(n){return jo.create(il(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wn()}}(n.fieldFilter.op),n.fieldFilter.value)}function sl(n){switch(n.unaryFilter.op){case"IS_NAN":const e=il(n.unaryFilter.field);return jo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=il(n.unaryFilter.field);return jo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=il(n.unaryFilter.field);return jo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=il(n.unaryFilter.field);return jo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return wn()}}function G_(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nd(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Gs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Fd(e)),e=Yh(n.get(t),e);return Fd(e)}function Yh(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Fd(n){return n+"\x01\x01"}function ra(n){const e=n.length;if(Gn(e>=2),2===e)return Gn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qr.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&wn(),n.charAt(d+1)){case"\x01":const y=n.substring(l,d);let E;0===o.length?E=y:(o+=y,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(l,d),o+="\0";break;case"\x11":o+=n.substring(l,d+1);break;default:wn()}l=d+2}return new qr(r)}const Ld=["userId","batchId"];function Gu(n,e){return[n,Gs(e)]}function Bd(n,e,t){return[n,Gs(e),t]}const Kh={},kw=["prefixPath","collectionGroup","readTime","documentId"],Pw=["prefixPath","collectionGroup","documentId"],Nw=["collectionGroup","readTime","prefixPath","documentId"],Fw=["canonicalId","targetId"],Lw=["targetId","path"],Bw=["path","targetId"],Vw=["collectionId","parent"],$w=["indexId","uid"],Uw=["uid","sequenceNumber"],WC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zC=["indexId","uid","orderedDocumentKey"],jw=["userId","collectionPath","documentId"],qC=["userId","collectionPath","largestBatchId"],YC=["userId","collectionGroup","largestBatchId"],bm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],W_=[...bm,"documentOverlays"],Hw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Cp=Hw,wm=[...Cp,"indexConfiguration","indexState","indexEntries"];class Dp extends v_{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function _o(n,e){const t=an(n);return nl.M(t.ie,e)}class Tp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&gw(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_p(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_p(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$C();return this.mutations.forEach(o=>{const l=e.get(o.key),d=l.overlayedDocument;let y=this.applyToLocalView(d,l.mutatedFields);y=t.has(o.key)?null:y;const E=pw(d,y);null!==E&&r.set(o.key,E),d.isValidDocument()||d.convertToNoDocument(Zn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yr())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(t,r)=>yw(t,r))&&kh(this.baseMutations,e.baseMutations,(t,r)=>yw(t,r))}}class Sp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Gn(e.mutations.length===r.length);let o=MS;const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new Sp(e,t,r,o)}}class Ap{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wu{constructor(e,t,r,o,l=Zn.min(),d=Zn.min(),y=io.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y}withSequenceNumber(e){return new Wu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Em{constructor(e){this.re=e}}function z_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:zh(o=n.re,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:ym(o,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vc(e.version)};else{if(!e.isUnknownDocument())return wn();r.unknownDocument={path:t.path.toArray(),version:Vc(e.version)}}var o,l;return r}function Zh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vd(n){const e=new zr(n.seconds,n.nanoseconds);return Zn.fromTimestamp(e)}function $c(n,e){const t=(e.baseMutations||[]).map(l=>Hu(n.re,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Hu(n.re,l)),o=zr.fromMillis(e.localWriteTimeMs);return new Tp(e.batchId,o,t,r)}function Qh(n){const e=Vd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vd(n.lastLimboFreeSnapshotVersion):Zn.min();let r;var o;return void 0!==n.query.documents?(Gn(1===(o=n.query).documents.length),r=na($a(_m(o.documents[0])))):r=na(Rw(n.query)),new Wu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,io.fromBase64String(n.resumeToken))}function q_(n,e){const t=Vc(e.snapshotVersion),r=Vc(e.lastLimboFreeSnapshotVersion);let o;o=am(e.target)?qh(n.re,e.target):j_(n.re,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bh(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Im(n){const e=Rw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xd(e,e.limit,"L"):e}function Y_(n,e){return new Ap(e.largestBatchId,Hu(n.re,e.overlayMutation))}function K_(n,e){const t=e.path.lastSegment();return[n,Gs(e.path.popLast()),t]}function Z_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Vc(r.readTime),documentKey:Gs(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ww{getBundleMetadata(e,t){return Cm(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Vd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Cm(e).put({bundleId:(r=t).id,createTime:Vc(yo(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Q_(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Im(o.bundledQuery),readTime:Vd(o.readTime)};var o})}saveNamedQuery(e,t){return Q_(e).put({name:(r=t).name,readTime:Vc(yo(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Cm(n){return _o(n,"bundles")}function Q_(n){return _o(n,"namedQueries")}class xp{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new xp(e,t.uid||"")}getOverlay(e,t){return Xh(e).get(K_(this.userId,t)).next(r=>r?Y_(this.It,r):null)}getOverlays(e,t){const r=Ua();return bt.forEach(t,o=>this.getOverlay(e,o).next(l=>{null!==l&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((l,d)=>{const y=new Ap(t,d);o.push(this.ue(e,y))}),bt.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Gs(d.getCollectionPath())));const l=[];return o.forEach(d=>{const y=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(Xh(e).Y("collectionPathOverlayIndex",y))}),bt.waitFor(l)}getOverlaysForCollection(e,t,r){const o=Ua(),l=Gs(t),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Xh(e).W("collectionPathOverlayIndex",d).next(y=>{for(const E of y){const S=Y_(this.It,E);o.set(S.getKey(),S)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=Ua();let d;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xh(e).Z({index:"collectionGroupOverlayIndex",range:y},(E,S,U)=>{const K=Y_(this.It,S);l.size()<o||K.largestBatchId===d?(l.set(K.getKey(),K),d=K.largestBatchId):U.done()}).next(()=>l)}ue(e,t){return Xh(e).put(function(r,o,l){const[d,y,E]=K_(o,l.mutation.key);return{userId:o,collectionPath:y,documentId:E,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Bc(r.re,l.mutation)}}(this.It,this.userId,t))}}function Xh(n){return _o(n,"documentOverlays")}class Uc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ms(e.integerValue));else if("doubleValue"in e){const r=ms(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),nu(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(xc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?om(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):wn()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),sn.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function zw(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function X_(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=zw(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Uc.Te=new Uc;class qw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=X_(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=X_(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Yw{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class kS{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Mp{constructor(){this.Be=new qw,this.Le=new Yw(this.Be),this.Ue=new kS(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class $d{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $d(this.indexId,this.documentKey,this.arrayValue,r)}}function jc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Kw(n.arrayValue,e.arrayValue),0!==t?t:(t=Kw(n.directionalValue,e.directionalValue),0!==t?t:sn.comparator(n.documentKey,e.documentKey)))}function Kw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class oo{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=y_(e);if(void 0!==t&&!this.ze(t))return!1;const r=wd(e);let o=0,l=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[l++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(l>=this.Ge.length||!this.Je(this.Ge[l++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Zw{constructor(){this.Ye=new J_}addToCollectionParentIndex(e,t){return this.Ye.add(t),bt.resolve()}getCollectionParents(e,t){return bt.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return bt.resolve()}deleteFieldIndex(e,t){return bt.resolve()}getDocumentsMatchingTarget(e,t){return bt.resolve(null)}getIndexType(e,t){return bt.resolve(0)}getFieldIndexes(e,t){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,t){return bt.resolve(Ba.min())}getMinOffsetFromCollectionGroup(e,t){return bt.resolve(Ba.min())}updateCollectionGroup(e,t,r){return bt.resolve()}updateIndexEntries(e,t){return bt.resolve()}}class J_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new _i(qr.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new _i(qr.comparator)).toArray()}}const Dm=new Uint8Array(0);class Qw{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new J_,this.Ze=new Fc(r=>Bh(r),(r,o)=>Vh(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const l={collectionId:r,parent:Gs(o)};return Xw(e).put(l)}return bt.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Qb(t),""],!1,!0);return Xw(e).W(o).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(ra(d.parent))}return r})}addFieldIndex(e,t){const r=Rp(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var d;delete o.indexId;const l=r.add(o);if(t.indexState){const d=uu(e);return l.next(y=>{d.put(Z_(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Rp(e),o=uu(e),l=Jh(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Jh(e);let o=!0;const l=new Map;return bt.forEach(this.tn(t),d=>this.en(e,d).next(y=>{o&&(o=!!y),l.set(d,y)})).next(()=>{if(o){let d=yr();const y=[];return bt.forEach(l,(E,S)=>{var U;Ht("IndexedDbIndexManager",`Using index ${U=E,`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(Sn=>`${Sn.fieldPath}:${Sn.kind}`).join(",")}`} to execute ${Bh(t)}`);const K=function(Sn,xn){const rr=y_(xn);if(void 0===rr)return null;for(const cr of $h(Sn,rr.fieldPath))switch(cr.op){case"array-contains-any":return cr.value.arrayValue.values||[];case"array-contains":return[cr.value]}return null}(S,E),ce=function(Sn,xn){const rr=new Map;for(const cr of wd(xn))for(const Os of $h(Sn,cr.fieldPath))switch(Os.op){case"==":case"in":rr.set(cr.fieldPath.canonicalString(),Os.value);break;case"not-in":case"!=":return rr.set(cr.fieldPath.canonicalString(),Os.value),Array.from(rr.values())}return null}(S,E),Pe=function(Sn,xn){const rr=[];let cr=!0;for(const Os of wd(xn)){const rc=0===Os.kind?PC(Sn,Os.fieldPath,Sn.startAt):NC(Sn,Os.fieldPath,Sn.startAt);rr.push(rc.value),cr&&(cr=rc.inclusive)}return new su(rr,cr)}(S,E),Ye=function(Sn,xn){const rr=[];let cr=!0;for(const Os of wd(xn)){const rc=0===Os.kind?NC(Sn,Os.fieldPath,Sn.endAt):PC(Sn,Os.fieldPath,Sn.endAt);rr.push(rc.value),cr&&(cr=rc.inclusive)}return new su(rr,cr)}(S,E),Mt=this.nn(E,S,Pe),Lt=this.nn(E,S,Ye),Pn=this.sn(E,S,ce),er=this.rn(E.indexId,K,Mt,Pe.inclusive,Lt,Ye.inclusive,Pn);return bt.forEach(er,Sn=>r.J(Sn,t.limit).next(xn=>{xn.forEach(rr=>{const cr=sn.fromSegments(rr.documentKey);d.has(cr)||(d=d.add(cr),y.push(cr))})}))}).next(()=>y)}return bt.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,l,d,y){const E=(null!=t?t.length:1)*Math.max(r.length,l.length),S=E/(null!=t?t.length:1),U=[];for(let K=0;K<E;++K){const ce=t?this.on(t[K/S]):Dm,Pe=this.un(e,ce,r[K%S],o),Ye=this.cn(e,ce,l[K%S],d),Mt=y.map(Lt=>this.un(e,ce,Lt,!0));U.push(...this.createRange(Pe,Ye,Mt))}return U}un(e,t,r,o){const l=new $d(e,sn.empty(),t,r);return o?l:l.Ke()}cn(e,t,r,o){const l=new $d(e,sn.empty(),t,r);return o?l.Ke():l}en(e,t){const r=new oo(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{let d=null;for(const y of l)r.We(y)&&(!d||y.fields.length>d.fields.length)&&(d=y);return d})}getIndexType(e,t){let r=2;return bt.forEach(this.tn(t),o=>this.en(e,o).next(l=>{l?0!==r&&l.fields.length<function(d){let y=new _i(ps.comparator),E=!1;for(const S of d.filters){const U=S;U.field.isKeyField()||("array-contains"===U.op||"array-contains-any"===U.op?E=!0:y=y.add(U.field))}for(const S of d.orderBy)S.field.isKeyField()||(y=y.add(S.field));return y.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Mp;for(const o of wd(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const d=r.qe(o.kind);Uc.Te.ce(l,d)}return r.$e()}on(e){const t=new Mp;return Uc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Mp;return Uc.Te.ce(ju(this.databaseId,t),r.qe(function(o){const l=wd(o);return 0===l.length?0:l[l.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new Mp);let l=0;for(const d of wd(e)){const y=r[l++];for(const E of o)if(this.ln(t,d.fieldPath)&&Lh(y))o=this.fn(o,d,y);else{const S=E.qe(d.kind);Uc.Te.ce(y,S)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],l=[];for(const d of r.arrayValue.values||[])for(const y of o){const E=new Mp;E.seed(y.$e()),Uc.Te.ce(d,E.qe(t.kind)),l.push(E)}return l}ln(e,t){return!!e.filters.find(r=>r instanceof jo&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Rp(e),o=uu(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(l=>{const d=[];return bt.forEach(l,y=>o.get([y.indexId,this.uid]).next(E=>{d.push(function(S,U){const K=U?new Nh(U.sequenceNumber,new Ba(Vd(U.readTime),new sn(ra(U.documentKey)),U.largestBatchId)):Nh.empty(),ce=S.fields.map(([Pe,Ye])=>new sr(ps.fromServerFormat(Pe),Ye));return new cp(S.indexId,S.collectionGroup,ce,K)}(y,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:lr(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Rp(e),l=uu(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>bt.forEach(y,E=>l.put(Z_(E.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return bt.forEach(t,(o,l)=>{const d=r.get(o.collectionGroup);return(d?bt.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(y=>(r.set(o.collectionGroup,y),bt.forEach(y,E=>this.wn(e,o,E).next(S=>{const U=this.mn(l,E);return S.isEqual(U)?bt.resolve():this.gn(e,l,E,S,U)}))))})}yn(e,t,r,o){return Jh(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return Jh(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=Jh(e);let l=new _i(jc);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,y)=>{l=l.add(new $d(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>l)}mn(e,t){let r=new _i(jc);const o=this.an(t,e);if(null==o)return r;const l=y_(t);if(null!=l){const d=e.data.field(l.fieldPath);if(Lh(d))for(const y of d.arrayValue.values||[])r=r.add(new $d(t.indexId,e.key,this.on(y),o))}else r=r.add(new $d(t.indexId,e.key,Dm,o));return r}gn(e,t,r,o,l){Ht("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(y,E,S,U,K){const ce=y.getIterator(),Pe=E.getIterator();let Ye=Fh(ce),Mt=Fh(Pe);for(;Ye||Mt;){let Lt=!1,Pn=!1;if(Ye&&Mt){const er=S(Ye,Mt);er<0?Pn=!0:er>0&&(Lt=!0)}else null!=Ye?Pn=!0:Lt=!0;Lt?(U(Mt),Mt=Fh(Pe)):Pn?(K(Ye),Ye=Fh(ce)):(Ye=Fh(ce),Mt=Fh(Pe))}}(o,l,jc,y=>{d.push(this.yn(e,t,r,y))},y=>{d.push(this.pn(e,t,r,y))}),bt.waitFor(d)}_n(e){let t=1;return uu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,y)=>jc(d,y)).filter((d,y,E)=>!y||0!==jc(d,E[y-1]));const o=[];o.push(e);for(const d of r){const y=jc(d,e),E=jc(d,t);if(0===y)o[0]=e.Ke();else if(y>0&&E<0)o.push(d),o.push(d.Ke());else if(E>0)break}o.push(t);const l=[];for(let d=0;d<o.length;d+=2)l.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Dm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Dm,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Jw)}getMinOffset(e,t){return bt.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||wn())).next(Jw)}}function Xw(n){return _o(n,"collectionParents")}function Jh(n){return _o(n,"indexEntries")}function Rp(n){return _o(n,"indexConfiguration")}function uu(n){return _o(n,"indexState")}function Jw(n){Gn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;em(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ba(e.readTime,e.documentKey,t)}const eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ia{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ia(e,ia.DEFAULT_COLLECTION_PERCENTILE,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tE(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],d=IDBKeyRange.only(t.batchId);let y=0;const E=r.Z({range:d},(U,K,ce)=>(y++,ce.delete()));l.push(E.next(()=>{Gn(1===y)}));const S=[];for(const U of t.mutations){const K=Bd(e,U.key.path,t.batchId);l.push(o.delete(K)),S.push(U.key)}return bt.waitFor(l).next(()=>S)}function Op(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw wn();e=n.noDocument}return JSON.stringify(e).length}ia.DEFAULT_COLLECTION_PERCENTILE=10,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ia.DEFAULT=new ia(41943040,ia.DEFAULT_COLLECTION_PERCENTILE,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ia.DISABLED=new ia(-1,0,0);class ev{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Gn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new ev(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cu(e).Z({index:"userMutationsIndex",range:r},(o,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=sa(e),d=cu(e);return d.add({}).next(y=>{Gn("number"==typeof y);const E=new Tp(y,t,r,o),S=function(ce,Pe,Ye){const Mt=Ye.baseMutations.map(Pn=>Bc(ce.re,Pn)),Lt=Ye.mutations.map(Pn=>Bc(ce.re,Pn));return{userId:Pe,batchId:Ye.batchId,localWriteTimeMs:Ye.localWriteTime.toMillis(),baseMutations:Mt,mutations:Lt}}(this.It,this.userId,E),U=[];let K=new _i((ce,Pe)=>lr(ce.canonicalString(),Pe.canonicalString()));for(const ce of o){const Pe=Bd(this.userId,ce.key.path,y);K=K.add(ce.key.path.popLast()),U.push(d.put(S)),U.push(l.put(Pe,Kh))}return K.forEach(ce=>{U.push(this.indexManager.addToCollectionParentIndex(e,ce))}),e.addOnCommittedListener(()=>{this.In[y]=E.keys()}),bt.waitFor(U).next(()=>E)})}lookupMutationBatch(e,t){return cu(e).get(t).next(r=>r?(Gn(r.userId===this.userId),$c(this.It,r)):null)}Tn(e,t){return this.In[t]?bt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return cu(e).Z({index:"userMutationsIndex",range:o},(d,y,E)=>{y.userId===this.userId&&(Gn(y.batchId>=r),l=$c(this.It,y)),E.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return cu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cu(e).W("userMutationsIndex",t).next(r=>r.map(o=>$c(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gu(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return sa(e).Z({range:o},(d,y,E)=>{const[S,U,K]=d,ce=ra(U);if(S===this.userId&&t.path.isEqual(ce))return cu(e).get(K).next(Pe=>{if(!Pe)throw wn();Gn(Pe.userId===this.userId),l.push($c(this.It,Pe))});E.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _i(lr);const o=[];return t.forEach(l=>{const d=Gu(this.userId,l.path),y=IDBKeyRange.lowerBound(d),E=sa(e).Z({range:y},(S,U,K)=>{const[ce,Pe,Ye]=S,Mt=ra(Pe);ce===this.userId&&l.path.isEqual(Mt)?r=r.add(Ye):K.done()});o.push(E)}),bt.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=Gu(this.userId,r),d=IDBKeyRange.lowerBound(l);let y=new _i(lr);return sa(e).Z({range:d},(E,S,U)=>{const[K,ce,Pe]=E,Ye=ra(ce);K===this.userId&&r.isPrefixOf(Ye)?Ye.length===o&&(y=y.add(Pe)):U.done()}).next(()=>this.En(e,y))}En(e,t){const r=[],o=[];return t.forEach(l=>{o.push(cu(e).get(l).next(d=>{if(null===d)throw wn();Gn(d.userId===this.userId),r.push($c(this.It,d))}))}),bt.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return tE(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),bt.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return bt.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return sa(e).Z({range:r},(l,d,y)=>{if(l[0]===this.userId){const E=ra(l[1]);o.push(E)}else y.done()}).next(()=>{Gn(0===o.length)})})}containsKey(e,t){return tv(e,this.userId,t)}Rn(e){return nE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tv(n,e,t){const r=Gu(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return sa(n).Z({range:l,X:!0},(y,E,S)=>{const[U,K,ce]=y;U===e&&K===o&&(d=!0),S.done()}).next(()=>d)}function cu(n){return _o(n,"mutations")}function sa(n){return _o(n,"documentMutations")}function nE(n){return _o(n,"mutationQueues")}class Ud{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ud(0)}static vn(){return new Ud(-1)}}class du{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ud(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Zn.fromTimestamp(new zr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ho(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Gn(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return Ho(e).Z((d,y)=>{const E=Qh(y);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,l.push(this.removeTargetData(e,E)))}).next(()=>bt.waitFor(l)).next(()=>o)}forEachTarget(e,t){return Ho(e).Z((r,o)=>{const l=Qh(o);t(l)})}Vn(e){return ol(e).get("targetGlobalKey").next(t=>(Gn(null!==t),t))}Sn(e,t){return ol(e).put("targetGlobalKey",t)}Dn(e,t){return Ho(e).put(q_(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Bh(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ho(e).Z({range:o,index:"queryTargetsIndex"},(d,y,E)=>{const S=Qh(y);Vh(t,S.target)&&(l=S,E.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=zu(e);return t.forEach(d=>{const y=Gs(d.path);o.push(l.put({targetId:r,path:y})),o.push(this.referenceDelegate.addReference(e,r,d))}),bt.waitFor(o)}removeMatchingKeys(e,t,r){const o=zu(e);return bt.forEach(t,l=>{const d=Gs(l.path);return bt.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=zu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=zu(e);let l=yr();return o.Z({range:r,X:!0},(d,y,E)=>{const S=ra(d[1]),U=new sn(S);l=l.add(U)}).next(()=>l)}containsKey(e,t){const r=Gs(t.path),o=IDBKeyRange.bound([r],[Qb(r)],!1,!0);let l=0;return zu(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,y],E,S)=>{0!==d&&(l++,S.done())}).next(()=>l>0)}se(e,t){return Ho(e).get(t).next(r=>r?Qh(r):null)}}function Ho(n){return _o(n,"targets")}function ol(n){return _o(n,"targetGlobal")}function zu(n){return _o(n,"targetDocuments")}function nv([n,e],[t,r]){const o=lr(n,t);return 0===o?lr(e,r):o}class KC{constructor(e){this.xn=e,this.buffer=new _i(nv),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ht("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Xe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){tu(r)?Ht("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ac(r)}yield t.Fn(3e5)}))}}class QC{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return bt.resolve(ta.at);const r=new KC(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ht("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(eE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,l,d,y,E,S;const U=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(K=>(K>this.params.maximumSequenceNumbersToCollect?(Ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${K}`),o=this.params.maximumSequenceNumbersToCollect):o=K,d=Date.now(),this.nthSequenceNumber(e,o))).next(K=>(r=K,y=Date.now(),this.removeTargets(e,r,t))).next(K=>(l=K,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(K=>(S=Date.now(),Rh()<=Qn.in.DEBUG&&Ht("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-U}ms\n\tDetermined least recently used ${o} in `+(y-d)+`ms\n\tRemoved ${l} targets in `+(E-y)+`ms\n\tRemoved ${K} documents in `+(S-E)+`ms\nTotal Duration: ${S-U}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:K})))}}class XC{constructor(e,t){this.db=e,this.garbageCollector=new QC(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return ef(e,r)}removeReference(e,t,r){return ef(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ef(e,t)}Gn(e,t){return function(r,o){let l=!1;return nE(r).tt(d=>tv(r,d,o).next(y=>(y&&(l=!0),bt.resolve(!y)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Kn(e,(d,y)=>{if(y<=t){const E=this.Gn(e,d).next(S=>{if(!S)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Zn.min()),zu(e).delete([0,Gs(d.path)])))});o.push(E)}}).next(()=>bt.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ef(e,t)}Kn(e,t){const r=zu(e);let o,l=ta.at;return r.Z({index:"documentTargetsIndex"},([d,y],{path:E,sequenceNumber:S})=>{0===d?(l!==ta.at&&t(new sn(ra(o)),l),l=S,o=E):l=ta.at}).next(()=>{l!==ta.at&&t(new sn(ra(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ef(n,e){return zu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Gs(e.path),sequenceNumber:r}));var r}class tf{constructor(){this.changes=new Fc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?bt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Hc(e).put(r)}removeEntry(e,t,r){return Hc(e).delete(function(o,l){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Zh(l),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Si.newInvalidDocument(t);return Hc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Gc(t))},(o,l)=>{r=this.jn(t,l)}).next(()=>r)}Wn(e,t){let r={size:0,document:Si.newInvalidDocument(t)};return Hc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Gc(t))},(o,l)=>{r={document:this.jn(t,l),size:Op(l)}}).next(()=>r)}getEntries(e,t){let r=wa();return this.zn(e,t,(o,l)=>{const d=this.jn(o,l);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=wa(),o=new gs(sn.comparator);return this.zn(e,t,(l,d)=>{const y=this.jn(l,d);r=r.insert(l,y),o=o.insert(l,Op(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return bt.resolve();let o=new _i(sv);t.forEach(E=>o=o.add(E));const l=IDBKeyRange.bound(Gc(o.first()),Gc(o.last())),d=o.getIterator();let y=d.getNext();return Hc(e).Z({index:"documentKeyIndex",range:l},(E,S,U)=>{const K=sn.fromSegments([...S.prefixPath,S.collectionGroup,S.documentId]);for(;y&&sv(y,K)<0;)r(y,null),y=d.getNext();y&&y.isEqual(K)&&(r(y,S),y=d.hasNext()?d.getNext():null),y?U.j(Gc(y)):U.done()}).next(()=>{for(;y;)r(y,null),y=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Zh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hc(e).W(IDBKeyRange.bound(o,l,!0)).next(d=>{let y=wa();for(const E of d){const S=this.jn(sn.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);y=y.insert(S.key,S)}return y})}getAllFromCollectionGroup(e,t,r,o){let l=wa();const d=rE(t,r),y=rE(t,Ba.max());return Hc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,y,!0)},(E,S,U)=>{const K=this.jn(sn.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);l=l.insert(K.key,K),l.size===o&&U.done()}).next(()=>l)}newChangeBuffer(e){return new eD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iv(e).get("remoteDocumentGlobalKey").next(t=>(Gn(!!t),t))}Qn(e,t){return iv(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Gw(n,e){let t;if(e.document)t=Mw(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=sn.fromSegments(e.noDocument.path),o=Vd(e.noDocument.readTime);t=Si.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return wn();{const r=sn.fromSegments(e.unknownDocument.path),o=Vd(e.unknownDocument.version);t=Si.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new zr(r[0],r[1]);return Zn.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Zn.min()))return r}return Si.newInvalidDocument(e)}}function rv(n){return new JC(n)}class eD extends tf{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Fc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new _i((l,d)=>lr(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const y=this.Xn.get(l);if(t.push(this.Yn.removeEntry(e,l,y.readTime)),d.isValidDocument()){const E=z_(this.Yn.It,d);o=o.add(l.path.popLast()),r+=Op(E)-y.size,t.push(this.Yn.addEntry(e,l,E))}else if(r-=y.size,this.trackRemovals){const E=z_(this.Yn.It,d.convertToNoDocument(Zn.min()));t.push(this.Yn.addEntry(e,l,E))}}),o.forEach(l=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Yn.updateMetadata(e,r)),bt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((l,d)=>{this.Xn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function iv(n){return _o(n,"remoteDocumentGlobal")}function Hc(n){return _o(n,"remoteDocumentsV14")}function Gc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rE(n,e){const t=e.documentKey.path.toArray();return[n,Zh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sv(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=lr(t[l],r[l]),o)return o;return o=lr(t.length,r.length),o||(o=lr(t[t.length-2],r[r.length-2]),o||lr(t[t.length-1],r[r.length-1]))}class iE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ov{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&_p(r.mutation,o,Va.empty(),zr.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,yr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=yr()){const o=Ua();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(l=>{let d=Lc();return l.forEach((y,E)=>{d=d.insert(y,E.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Ua();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,yr()))}populateOverlays(e,t,r){const o=[];return r.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((d,y)=>{t.set(d,y)})})}computeViews(e,t,r,o){let l=wa();const d=Od(),y=Od();return t.forEach((E,S)=>{const U=r.get(S.key);o.has(S.key)&&(void 0===U||U.mutation instanceof au)?l=l.insert(S.key,S):void 0!==U&&(d.set(S.key,U.mutation.getFieldMask()),_p(U.mutation,S,U.mutation.getFieldMask(),zr.now()))}),this.recalculateAndSaveOverlays(e,l).next(E=>(E.forEach((S,U)=>d.set(S,U)),t.forEach((S,U)=>{var K;return y.set(S,new iE(U,null!==(K=d.get(S))&&void 0!==K?K:null))}),y))}recalculateAndSaveOverlays(e,t){const r=Od();let o=new gs((d,y)=>d-y),l=yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const y of d)y.keys().forEach(E=>{const S=t.get(E);if(null===S)return;let U=r.get(E)||Va.empty();U=y.applyToLocalView(S,U),r.set(E,U);const K=(o.get(y.batchId)||yr()).add(E);o=o.insert(y.batchId,K)})}).next(()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const E=y.getNext(),S=E.key,U=E.value,K=$C();U.forEach(ce=>{if(!l.has(ce)){const Pe=pw(t.get(ce),r.get(ce));null!==Pe&&K.set(ce,Pe),l=l.add(ce)}}),d.push(this.documentOverlayCache.saveOverlays(e,S,K))}return bt.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return sn.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):um(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):bt.resolve(Ua());let y=-1,E=l;return d.next(S=>bt.forEach(S,(U,K)=>(y<K.largestBatchId&&(y=K.largestBatchId),l.get(U)?bt.resolve():this.getBaseDocument(e,U,K).next(ce=>{E=E.insert(U,ce)}))).next(()=>this.populateOverlays(e,S,l)).next(()=>this.computeViews(e,E,S,yr())).next(U=>({batchId:y,changes:mm(U)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sn(t)).next(r=>{let o=Lc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let l=Lc();return this.indexManager.getCollectionParents(e,o).next(d=>bt.forEach(d,y=>{const E=(S=t,U=y.child(o),new Nl(U,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt));var S,U;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(S=>{S.forEach((U,K)=>{l=l.insert(U,K)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(o=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((y,E)=>{const S=E.getKey();null===o.get(S)&&(o=o.insert(S,Si.newInvalidDocument(S)))});let d=Lc();return o.forEach((y,E)=>{const S=l.get(y);void 0!==S&&_p(S.mutation,E,Va.empty(),zr.now()),mp(t,E)&&(d=d.insert(y,E))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):bt.resolve(Si.newInvalidDocument(t))}}class av{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return bt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:yo(r.createTime)}),bt.resolve()}getNamedQuery(e,t){return bt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Im(r.bundledQuery),readTime:yo(r.readTime)}),bt.resolve();var r}}class sE{constructor(){this.overlays=new gs(sn.comparator),this.es=new Map}getOverlay(e,t){return bt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ua();return bt.forEach(t,o=>this.getOverlay(e,o).next(l=>{null!==l&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.ue(e,t,l)}),bt.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.es.delete(r)),bt.resolve()}getOverlaysForCollection(e,t,r){const o=Ua(),l=t.length+1,d=new sn(t.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const E=y.getNext().value,S=E.getKey();if(!t.isPrefixOf(S.path))break;S.path.length===l&&E.largestBatchId>r&&o.set(E.getKey(),E)}return bt.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new gs((S,U)=>S-U);const d=this.overlays.getIterator();for(;d.hasNext();){const S=d.getNext().value;if(S.getKey().getCollectionGroup()===t&&S.largestBatchId>r){let U=l.get(S.largestBatchId);null===U&&(U=Ua(),l=l.insert(S.largestBatchId,U)),U.set(S.getKey(),S)}}const y=Ua(),E=l.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((S,U)=>y.set(S,U)),!(y.size()>=o)););return bt.resolve(y)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Ap(t,r));let l=this.es.get(t);void 0===l&&(l=yr(),this.es.set(t,l)),this.es.set(t,l.add(r.key))}}class Tm{constructor(){this.ns=new _i(ao.ss),this.rs=new _i(ao.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ao(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ao(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new sn(new qr([])),r=new ao(t,e),o=new ao(t,e+1),l=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),l.push(d.key)}),l}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new sn(new qr([])),r=new ao(t,e),o=new ao(t,e+1);let l=yr();return this.rs.forEachInRange([r,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new ao(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ao{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return sn.comparator(e.key,t.key)||lr(e._s,t._s)}static os(e,t){return lr(e._s,t._s)||sn.comparator(e.key,t.key)}}class oE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _i(ao.ss)}checkEmpty(e){return bt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const l=this.ws;this.ws++;const d=new Tp(l,t,r,o);this.mutationQueue.push(d);for(const y of o)this.gs=this.gs.add(new ao(y.key,l)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return bt.resolve(d)}lookupMutationBatch(e,t){return bt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),l=o<0?0:o;return bt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ao(t,0),o=new ao(t,Number.POSITIVE_INFINITY),l=[];return this.gs.forEachInRange([r,o],d=>{const y=this.ys(d._s);l.push(y)}),bt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _i(lr);return t.forEach(o=>{const l=new ao(o,0),d=new ao(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([l,d],y=>{r=r.add(y._s)})}),bt.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;sn.isDocumentKey(l)||(l=l.child(""));const d=new ao(new sn(l),0);let y=new _i(lr);return this.gs.forEachWhile(E=>{const S=E.key.path;return!!r.isPrefixOf(S)&&(S.length===o&&(y=y.add(E._s)),!0)},d),bt.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Gn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return bt.forEach(t.mutations,o=>{const l=new ao(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ao(t,0),o=this.gs.firstAfterOrEqual(r);return bt.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return bt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class aE{constructor(e){this.Es=e,this.docs=new gs(sn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return bt.resolve(r?r.document.mutableCopy():Si.newInvalidDocument(t))}getEntries(e,t){let r=wa();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Si.newInvalidDocument(o))}),bt.resolve(r)}getAllFromCollection(e,t,r){let o=wa();const l=new sn(t.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:y,value:{document:E}}=d.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||em(Jb(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return bt.resolve(o)}getAllFromCollectionGroup(e,t,r,o){wn()}As(e,t){return bt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lE(this)}getSize(e){return bt.resolve(this.size)}}class lE extends tf{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),bt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class uE{constructor(e){this.persistence=e,this.Rs=new Fc(t=>Bh(t),Vh),this.lastRemoteSnapshotVersion=Zn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Tm,this.targetCount=0,this.vs=Ud.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),bt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ud(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,bt.resolve()}updateTargetData(e,t){return this.Dn(t),bt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Rs.forEach((d,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Rs.delete(d),l.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)}),bt.waitFor(l).next(()=>o)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return bt.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),bt.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),bt.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),bt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return bt.resolve(r)}containsKey(e,t){return bt.resolve(this.Ps.containsKey(t))}}class lv{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ta(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new uE(this),this.indexManager=new Zw,this.remoteDocumentCache=new aE(r=>this.referenceDelegate.xs(r)),this.It=new Em(t),this.Ns=new av(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new oE(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ht("MemoryPersistence","Starting transaction:",e);const o=new tD(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(l=>this.referenceDelegate.Os(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ms(e,t){return bt.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class tD extends v_{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Fs=new Tm,this.$s=null}static Bs(e){return new Sm(e)}get Ls(){if(this.$s)return this.$s;throw wn()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),bt.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),bt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),bt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Ls.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.Ls,r=>{const o=sn.fromPath(r);return this.Us(e,o).next(l=>{l||t.removeEntry(o,Zn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return bt.or([()=>bt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class nD{constructor(e){this.It=e}$(e,t,r,o){const l=new dp("createOrUpgrade",t);var y;r<1&&o>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ld,{unique:!0}),y.createObjectStore("documentMutations"),cE(e),function(y){y.createObjectStore("remoteDocuments")}(e));let d=bt.resolve();return r<3&&o>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),cE(e)),d=d.next(()=>function(y){const E=y.store("targetGlobal"),S={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zn.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",S)}(l))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(y,E){return E.store("mutations").W().next(S=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ld,{unique:!0});const U=E.store("mutations"),K=S.map(ce=>U.put(ce));return bt.waitFor(K)})}(e,l))),d=d.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(l))),r<6&&o>=6&&(d=d.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(l)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(l))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,l))),r<9&&o>=9&&(d=d.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(l))),r<11&&o>=11&&(d=d.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(y){const E=y.createObjectStore("documentOverlays",{keyPath:jw});E.createIndex("collectionPathOverlayIndex",qC,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",YC,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(y){const E=y.createObjectStore("remoteDocumentsV14",{keyPath:kw});E.createIndex("documentKeyIndex",Pw),E.createIndex("collectionGroupIndex",Nw)}(e)).next(()=>this.Ws(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,l))),r<15&&o>=15&&(d=d.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:$w}).createIndex("sequenceNumberIndex",Uw,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:WC}).createIndex("documentKeyIndex",zC,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Op(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>bt.forEach(o,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(y=>bt.forEach(y,E=>{Gn(E.userId===l.userId);const S=$c(this.It,E);return tE(e,l.userId,S).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.Z((d,y)=>{const E=new qr(d),S=[0,Gs(E)];l.push(t.get(S).next(U=>U?bt.resolve():t.put({targetId:0,path:Gs(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>bt.waitFor(l))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Vw});const r=t.store("collectionParents"),o=new J_,l=d=>{if(o.add(d)){const y=d.lastSegment(),E=d.popLast();return r.put({collectionId:y,parent:Gs(E)})}};return t.store("remoteDocuments").Z({X:!0},(d,y)=>{const E=new qr(d);return l(E.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,y,E],S)=>{const U=ra(y);return l(U.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const l=Qh(o),d=q_(this.It,l);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((l,d)=>{const y=t.store("remoteDocumentsV14"),E=(S=d,S.document?new sn(qr.fromString(S.document.name).popFirst(5)):S.noDocument?sn.fromSegments(S.noDocument.path):S.unknownDocument?sn.fromSegments(S.unknownDocument.path):wn()).path.toArray();var S;const U={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(y.put(U))}).next(()=>bt.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=rv(this.It),l=new lv(Sm.Bs,this.It.re);return r.W().next(d=>{const y=new Map;return d.forEach(E=>{var S;let U=null!==(S=y.get(E.userId))&&void 0!==S?S:yr();$c(this.It,E).keys().forEach(K=>U=U.add(K)),y.set(E.userId,U)}),bt.forEach(y,(E,S)=>{const U=new ro(S),K=xp.oe(this.It,U),ce=l.getIndexManager(U),Pe=ev.oe(U,this.It,ce,l.referenceDelegate);return new ov(o,Pe,K,ce).recalculateAndSaveOverlaysForDocumentKeys(new Dp(t,ta.at),E).next()})})}}function cE(n){n.createObjectStore("targetDocuments",{keyPath:Lw}).createIndex("documentTargetsIndex",Bw,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Fw,{unique:!0}),n.createObjectStore("targetGlobal")}const uv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cv{constructor(e,t,r,o,l,d,y,E,S,U,K=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=l,this.window=d,this.document=y,this.Js=S,this.Ys=U,this.Xs=K,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=ce=>Promise.resolve(),!cv.C())throw new Ut(Dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XC(this,o),this.ii=t+"main",this.It=new Em(E),this.ri=new nl(this.ii,this.Xs,new nD(this.It)),this.Cs=new du(this.referenceDelegate,this.It),this.remoteDocumentCache=rv(this.It),this.Ns=new Ww,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===U&&fs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ut(Dt.FAILED_PRECONDITION,uv);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ta(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Xe.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Xe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Xe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Am(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(tu(e))return Ht("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ht("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return kp(e).get("owner").next(t=>bt.resolve(this.mi(t)))}gi(e){return Am(e).delete(this.clientId)}yi(){var e=this;return(0,Xe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=_o(r,"clientMetadata");return o.W().next(l=>{const d=e.Ii(l,18e5),y=l.filter(E=>-1===d.indexOf(E));return bt.forEach(y,E=>o.delete(E.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?bt.resolve(!0):kp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ut(Dt.FAILED_PRECONDITION,uv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Am(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,y=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ht("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Xe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Dp(t,ta.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Am(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return ev.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qw(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return xp.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ht("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=15===(d=this.Xs)?wm:14===d?Cp:13===d?Hw:12===d?W_:11===d?bm:void wn();var d;let y;return this.ri.runTransaction(e,o,l,E=>(y=new Dp(E,this.Ss?this.Ss.next():ta.at),"readwrite-primary"===t?this.fi(y).next(S=>!!S||this.di(y)).next(S=>{if(!S)throw fs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ut(Dt.FAILED_PRECONDITION,ew);return r(y)}).next(S=>this.wi(y).next(()=>S)):this.Vi(y).next(()=>r(y)))).then(E=>(y.raiseOnCommittedEvent(),E))}Vi(e){return kp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ut(Dt.FAILED_PRECONDITION,uv)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kp(e).put("owner",t)}static C(){return nl.C()}_i(e){const t=kp(e);return t.get("owner").next(r=>this.mi(r)?(Ht("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):bt.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(fs(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,re.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ht("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fs("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){fs("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kp(n){return _o(n,"owner")}function Am(n){return _o(n,"clientMetadata")}function dv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=yr(),o=yr();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new hv(e,t.fromCache,r,o)}}class dE{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(l=>l||this.Oi(e,t,o,r)).next(l=>l||this.Mi(e,t))}ki(e,t){if(S_(t))return bt.resolve(null);let r=na(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=xd(t,null,"F"),r=na(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const d=yr(...l);return this.Ni.getDocuments(e,d).next(y=>this.indexManager.getMinOffset(e,r).next(E=>{const S=this.Fi(t,y);return this.$i(t,S,d,E.readTime)?this.ki(e,xd(t,null,"F")):this.Bi(e,S,t,E)}))})))}Oi(e,t,r,o){return S_(t)||o.isEqual(Zn.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(l=>{const d=this.Fi(t,l);return this.$i(t,d,r,o)?this.Mi(e,t):(Rh()<=Qn.in.DEBUG&&Ht("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),kc(t)),this.Bi(e,d,t,__(o,-1)))})}Fi(e,t){let r=new _i(M_(e));return t.forEach((o,l)=>{mp(e,l)&&(r=r.add(l))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Mi(e,t){return Rh()<=Qn.in.DEBUG&&Ht("QueryEngine","Using full collection scan to execute query:",kc(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ba.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(l=>(t.forEach(d=>{l=l.insert(d.key,d)}),l))}}class rD{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new gs(lr),this.qi=new Fc(l=>Bh(l),Vh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ov(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function hE(n,e,t,r){return new rD(n,e,t,r)}function fE(n,e){return fv.apply(this,arguments)}function fv(){return fv=(0,Xe.Z)(function*(n,e){const t=an(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const d=[],y=[];let E=yr();for(const S of o){d.push(S.batchId);for(const U of S.mutations)E=E.add(U.key)}for(const S of l){y.push(S.batchId);for(const U of S.mutations)E=E.add(U.key)}return t.localDocuments.getDocuments(r,E).next(S=>({ji:S,removedBatchIds:d,addedBatchIds:y}))})})}),fv.apply(this,arguments)}function iD(n,e){const t=an(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,y,E,S){const U=E.batch,K=U.keys();let ce=bt.resolve();return K.forEach(Pe=>{ce=ce.next(()=>S.getEntry(y,Pe)).next(Ye=>{const Mt=E.docVersions.get(Pe);Gn(null!==Mt),Ye.version.compareTo(Mt)<0&&(U.applyToRemoteDocument(Ye,E),Ye.isValidDocument()&&(Ye.setReadTime(E.commitVersion),S.addEntry(Ye)))})}),ce.next(()=>d.mutationQueue.removeMutationBatch(y,U))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let y=yr();for(let E=0;E<d.mutationResults.length;++E)d.mutationResults[E].transformResults.length>0&&(y=y.add(d.batch.mutations[E].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function pE(n){const e=an(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function sD(n,e){const t=an(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const y=[];e.targetChanges.forEach((U,K)=>{const ce=o.get(K);if(!ce)return;y.push(t.Cs.removeMatchingKeys(l,U.removedDocuments,K).next(()=>t.Cs.addMatchingKeys(l,U.addedDocuments,K)));let Pe=ce.withSequenceNumber(l.currentSequenceNumber);var Ye,Mt,Lt;e.targetMismatches.has(K)?Pe=Pe.withResumeToken(io.EMPTY_BYTE_STRING,Zn.min()).withLastLimboFreeSnapshotVersion(Zn.min()):U.resumeToken.approximateByteSize()>0&&(Pe=Pe.withResumeToken(U.resumeToken,r)),o=o.insert(K,Pe),Mt=Pe,Lt=U,(0===(Ye=ce).resumeToken.approximateByteSize()||Mt.snapshotVersion.toMicroseconds()-Ye.snapshotVersion.toMicroseconds()>=3e8||Lt.addedDocuments.size+Lt.modifiedDocuments.size+Lt.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(l,Pe))});let E=wa(),S=yr();if(e.documentUpdates.forEach(U=>{e.resolvedLimboDocuments.has(U)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(l,U))}),y.push(pv(l,d,e.documentUpdates).next(U=>{E=U.Wi,S=U.zi})),!r.isEqual(Zn.min())){const U=t.Cs.getLastRemoteSnapshotVersion(l).next(K=>t.Cs.setTargetsMetadata(l,l.currentSequenceNumber,r));y.push(U)}return bt.waitFor(y).next(()=>d.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,E,S)).next(()=>E)}).then(l=>(t.Ui=o,l))}function pv(n,e,t){let r=yr(),o=yr();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let d=wa();return t.forEach((y,E)=>{const S=l.get(y);E.isFoundDocument()!==S.isFoundDocument()&&(o=o.add(y)),E.isNoDocument()&&E.version.isEqual(Zn.min())?(e.removeEntry(y,E.readTime),d=d.insert(y,E)):!S.isValidDocument()||E.version.compareTo(S.version)>0||0===E.version.compareTo(S.version)&&S.hasPendingWrites?(e.addEntry(E),d=d.insert(y,E)):Ht("LocalStore","Ignoring outdated watch update for ",y,". Current version:",S.version," Watch version:",E.version)}),{Wi:d,zi:o}})}function gE(n,e){const t=an(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jd(n,e){const t=an(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(l=>l?(o=l,bt.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new Wu(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Hd(n,e,t){return xm.apply(this,arguments)}function xm(){return xm=(0,Xe.Z)(function*(n,e,t){const r=an(n),o=r.Ui.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!tu(d))throw d;Ht("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),xm.apply(this,arguments)}function Pp(n,e,t){const r=an(n);let o=Zn.min(),l=yr();return r.persistence.runTransaction("Execute query","readonly",d=>function(y,E,S){const U=an(y),K=U.qi.get(S);return void 0!==K?bt.resolve(U.Ui.get(K)):U.Cs.getTargetData(E,S)}(r,d,na(e)).next(y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,y.targetId).next(E=>{l=E})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:Zn.min(),t?l:yr())).next(y=>(yv(r,yp(e),y),{documents:y,Hi:l})))}function gv(n,e){const t=an(n),r=an(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.se(l,e).next(d=>d?d.target:null))}function mv(n,e){const t=an(n),r=t.Ki.get(e)||Zn.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,__(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(yv(t,e,o),o))}function yv(n,e,t){let r=n.Ki.get(e)||Zn.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Ki.set(e,r)}function Mm(){return Mm=(0,Xe.Z)(function*(n,e,t,r){const o=an(n);let l=yr(),d=wa();for(const S of t){const U=e.Ji(S.metadata.name);S.document&&(l=l.add(U));const K=e.Yi(S);K.setReadTime(e.Xi(S.metadata.readTime)),d=d.insert(U,K)}const y=o.Gi.newChangeBuffer({trackRemovals:!0}),E=yield jd(o,(S=r,na($a(qr.fromString(`__bundle__/docs/${S}`)))));var S;return o.persistence.runTransaction("Apply bundle documents","readwrite",S=>pv(S,y,d).next(U=>(y.apply(S),U)).next(U=>o.Cs.removeMatchingKeysForTargetId(S,E.targetId).next(()=>o.Cs.addMatchingKeys(S,l,E.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(S,U.Wi,U.zi)).next(()=>U.Wi)))}),Mm.apply(this,arguments)}function Gd(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,Xe.Z)(function*(n,e,t=yr()){const r=yield jd(n,na(Im(e.bundledQuery))),o=an(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const d=yo(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(l,e);const y=r.withResumeToken(io.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(y.targetId,y),o.Cs.updateTargetData(l,y).next(()=>o.Cs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.Cs.addMatchingKeys(l,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(l,e))})}),_v.apply(this,arguments)}function yE(n,e){return`firestore_clients_${n}_${e}`}function Wd(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _E(n,e){return`firestore_targets_${n}_${e}`}class nf{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let l,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(l=new Ut(o.error.code,o.error.message))),d?new nf(e,t,o.state,l):(fs("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Ut(r.error.code,r.error.message))),l?new Rm(e,r.state,o):(fs("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Np{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=vp();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=C_(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return o?new Np(e,l):(fs("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Om{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Om(t.clientId,t.onlineState):(fs("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vE{constructor(){this.activeTargetIds=vp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $n{constructor(e,t,r,o,l){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new gs(lr),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ar=yE(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new vE),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Xe.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const l=e.getItem(yE(e.persistenceKey,o));if(l){const d=Np.Zi(o,l);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_E(this.persistenceKey,e));if(r){const o=Rm.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_E(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ht("SharedClientState","READ",e,t),t}setItem(e,t){Ht("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ht("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ht("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void fs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Xe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(l){let d=ta.at;if(null!=l)try{const y=JSON.parse(l);Gn("number"==typeof y),d=y}catch(y){fs("SharedClientState","Failed to read sequence number from WebStorage",y)}return d}(r.newValue);o!==ta.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.Mr(l)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new nf(this.currentUser,e,t,r),l=Wd(this.persistenceKey,this.currentUser,e);this.setItem(l,o.tr())}Er(e){const t=Wd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=_E(this.persistenceKey,e),l=new Rm(e,t,r);this.setItem(o,l.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Np.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return nf.Zi(new ro(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Rm.Zi(o,t)}yr(e){return Om.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ht("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),l=this.Ir(r),d=[],y=[];return l.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{l.has(E)||y.push(E)}),this.syncEngine.Br(d,y).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=vp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class bE{constructor(){this.Lr=new vE,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new vE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oD{qr(e){}shutdown(){}}class wE{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const rf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aD{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class km extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,l){const d=this.ho(e,t);Ht("RestConnection","Sending: ",d,r);const y={};return this.lo(y,o,l),this.fo(e,d,y,r).then(E=>(Ht("RestConnection","Received: ",E),E),E=>{throw Sc("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}_o(e,t,r,o,l,d){return this.ao(e,t,r,o,l)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}ho(e,t){return`${this.oo}/v1/${t}:${rf[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((l,d)=>{const y=new vd;y.setWithCredentials(!0),y.listenOnce(g_.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Qg.NO_ERROR:const S=y.getResponseJson();Ht("Connection","XHR received:",JSON.stringify(S)),l(S);break;case Qg.TIMEOUT:Ht("Connection",'RPC "'+e+'" timed out'),d(new Ut(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case Qg.HTTP_ERROR:const U=y.getStatus();if(Ht("Connection",'RPC "'+e+'" failed with status:',U,"response text:",y.getResponseText()),U>0){const K=y.getResponseJson().error;if(K&&K.status&&K.message){const ce=function(Pe){const Ye=Pe.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(Ye)>=0?Ye:Dt.UNKNOWN}(K.status);d(new Ut(ce,K.message))}else d(new Ut(Dt.UNKNOWN,"Server responded with status "+y.getStatus()))}else d(new Ut(Dt.UNAVAILABLE,"Connection failed."));break;default:wn()}}finally{Ht("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);y.send(t,"POST",E,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Hb(),d=p_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new Wb({})),this.lo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const E=o.join("");Ht("Connection","Creating WebChannel: "+E,y);const S=l.createWebChannel(E,y);let U=!1,K=!1;const ce=new aD({Hr:Ye=>{K?Ht("Connection","Not sending because WebChannel is closed:",Ye):(U||(Ht("Connection","Opening WebChannel transport."),S.open(),U=!0),Ht("Connection","WebChannel sending:",Ye),S.send(Ye))},Jr:()=>S.close()}),Pe=(Ye,Mt,Lt)=>{Ye.listen(Mt,Pn=>{try{Lt(Pn)}catch(er){setTimeout(()=>{throw er},0)}})};return Pe(S,lp.EventType.OPEN,()=>{K||Ht("Connection","WebChannel transport opened.")}),Pe(S,lp.EventType.CLOSE,()=>{K||(K=!0,Ht("Connection","WebChannel transport closed"),ce.io())}),Pe(S,lp.EventType.ERROR,Ye=>{K||(K=!0,Sc("Connection","WebChannel transport errored:",Ye),ce.io(new Ut(Dt.UNAVAILABLE,"The operation could not be completed")))}),Pe(S,lp.EventType.MESSAGE,Ye=>{var Mt;if(!K){const Lt=Ye.data[0];Gn(!!Lt);const Pn=Lt,er=Pn.error||(null===(Mt=Pn[0])||void 0===Mt?void 0:Mt.error);if(er){Ht("Connection","WebChannel received error:",er);const Sn=er.status;let xn=function(cr){const Os=so[cr];if(void 0!==Os)return bw(Os)}(Sn),rr=er.message;void 0===xn&&(xn=Dt.INTERNAL,rr="Unknown error status: "+Sn+" with message "+er.message),K=!0,ce.io(new Ut(xn,rr)),S.close()}else Ht("Connection","WebChannel received:",Lt),ce.ro(Lt)}}),Pe(d,wC.STAT_EVENT,Ye=>{Ye.stat===Gb.PROXY?Ht("Connection","Detected buffering proxy"):Ye.stat===Gb.NOPROXY&&Ht("Connection","Detected no buffering proxy")}),setTimeout(()=>{ce.so()},0),ce}}function Fp(){return"undefined"!=typeof window?window:null}function Ni(){return"undefined"!=typeof document?document:null}function Pm(n){return new jC(n,!0)}class Nm{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=l,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ht("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class vv{constructor(e,t,r,o,l,d,y,E){this.Hs=e,this.vo=r,this.Vo=o,this.So=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=E,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Nm(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Xe.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Xe.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Xe.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===Dt.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===Dt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Ut(Dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.No.Ro((0,Xe.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ht("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lD extends vv{constructor(e,t,r,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=l}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function GC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:wn(),o=e.targetChange.targetIds||[],l=function(E,S){return E.gt?(Gn(void 0===S||"string"==typeof S),io.fromBase64String(S||"")):(Gn(void 0===S||S instanceof Uint8Array),io.fromUint8Array(S||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&function(E){const S=void 0===E.code?Dt.UNKNOWN:bw(E.code);return new Ut(S,E.message||"")}(d);t=new Wh(r,o,l,y||null)}else if("documentChange"in e){const r=e.documentChange,o=rl(n,r.document.name),l=yo(r.document.updateTime),d=new Po({mapValue:{fields:r.document.fields}}),y=Si.newFoundDocument(o,l,d);t=new Pd(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,o=rl(n,r.document),l=r.readTime?yo(r.readTime):Zn.min(),d=Si.newNoDocument(o,l);t=new Pd([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=rl(n,r.document);t=new Pd([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return wn();{const r=e.filter,l=new VC(r.count||0);t=new bp(r.targetId,l)}}var E;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return Zn.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Zn.min():l.readTime?yo(l.readTime):Zn.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Ep(this.It),t.addTarget=function(o,l){let d;const y=l.target;return d=am(y)?{documents:qh(o,y)}:{query:j_(o,y)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=Tw(o,l.resumeToken):l.snapshotVersion.compareTo(Zn.min())>0&&(d.readTime=ym(o,l.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function H_(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Ep(this.It),t.removeTarget=e,this.Lo(t)}}class EE extends vv{constructor(e,t,r,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=l,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Gn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function OS(n,e){return n&&n.length>0?(Gn(void 0!==e),n.map(t=>function(r,o){let l=yo(r.updateTime?r.updateTime:o);return l.isEqual(Zn.min())&&(l=yo(o)),new P_(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=yo(e.commitTime);return this.listener.tu(r,t)}return Gn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ep(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bc(this.It,r))};this.Lo(t)}}class IE extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=o,this.su=!1}iu(){if(this.su)throw new Ut(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.So.ao(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ut(Dt.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.So._o(e,t,r,l,d,o)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ut(Dt.UNKNOWN,l.toString())})}terminate(){this.su=!0}}class uD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(fs(t),this.uu=!1):Ht("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class cD{constructor(e,t,r,o,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=l,this.gu.qr(y=>{r.enqueueAndForget((0,Xe.Z)(function*(){var E;Ha(d)&&(Ht("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,Xe.Z)(function*(S){const U=an(S);U.wu.add(4),yield sf(U),U.yu.set("Unknown"),U.wu.delete(4),yield Lp(U)}),function(S){return E.apply(this,arguments)})(d))}))}),this.yu=new uD(r,o)}}function Lp(n){return zd.apply(this,arguments)}function zd(){return zd=(0,Xe.Z)(function*(n){if(Ha(n))for(const e of n.mu)yield e(!0)}),zd.apply(this,arguments)}function sf(n){return bv.apply(this,arguments)}function bv(){return bv=(0,Xe.Z)(function*(n){for(const e of n.mu)yield e(!1)}),bv.apply(this,arguments)}function Lm(n,e){const t=an(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Ev(t)?Vm(t):uf(t).Oo()&&Bm(t,e))}function Wc(n,e){const t=an(n),r=uf(t);t._u.delete(e),r.Oo()&&wv(t,e),0===t._u.size&&(r.Oo()?r.$o():Ha(t)&&t.yu.set("Unknown"))}function Bm(n,e){n.pu.Mt(e.targetId),uf(n).Ho(e)}function wv(n,e){n.pu.Mt(e),uf(n).Jo(e)}function Vm(n){n.pu=new B_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),uf(n).start(),n.yu.cu()}function Ev(n){return Ha(n)&&!uf(n).ko()&&n._u.size>0}function Ha(n){return 0===an(n).wu.size}function af(n){n.pu=void 0}function dD(n){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,Xe.Z)(function*(n){n._u.forEach((e,t)=>{Bm(n,e)})}),Iv.apply(this,arguments)}function hD(n,e){return $m.apply(this,arguments)}function $m(){return $m=(0,Xe.Z)(function*(n,e){af(n),Ev(n)?(n.yu.lu(e),Vm(n)):n.yu.set("Unknown")}),$m.apply(this,arguments)}function DE(n,e,t){return Um.apply(this,arguments)}function Um(){return Um=(0,Xe.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Wh&&2===e.state&&e.cause)try{yield(r=(0,Xe.Z)(function*(o,l){const d=l.cause;for(const y of l.targetIds)o._u.has(y)&&(yield o.remoteSyncer.rejectListen(y,d),o._u.delete(y),o.pu.removeTarget(y))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Ht("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jm(n,r)}else if(e instanceof Pd?n.pu.Gt(e):e instanceof bp?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Zn.min()))try{const r=yield pE(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const d=o.pu.te(l);return d.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const S=o._u.get(E);S&&o._u.set(E,S.withResumeToken(y.resumeToken,l))}}),d.targetMismatches.forEach(y=>{const E=o._u.get(y);if(!E)return;o._u.set(y,E.withResumeToken(io.EMPTY_BYTE_STRING,E.snapshotVersion)),wv(o,y);const S=new Wu(E.target,y,1,E.sequenceNumber);Bm(o,S)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ht("RemoteStore","Failed to raise snapshot:",r),yield jm(n,r)}var r}),Um.apply(this,arguments)}function jm(n,e,t){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,Xe.Z)(function*(n,e,t){if(!tu(e))throw e;n.wu.add(1),yield sf(n),n.yu.set("Offline"),t||(t=()=>pE(n.localStore)),n.asyncQueue.enqueueRetryable((0,Xe.Z)(function*(){Ht("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Lp(n)}))}),Hm.apply(this,arguments)}function TE(n,e){return e().catch(t=>jm(n,t,e))}function lf(n){return SE.apply(this,arguments)}function SE(){return SE=(0,Xe.Z)(function*(n){const e=an(n),t=al(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;PS(e);)try{const o=yield gE(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,NS(e,o)}catch(o){yield jm(e,o)}fD(e)&&Cv(e)}),SE.apply(this,arguments)}function PS(n){return Ha(n)&&n.du.length<10}function NS(n,e){n.du.push(e);const t=al(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function fD(n){return Ha(n)&&!al(n).ko()&&n.du.length>0}function Cv(n){al(n).start()}function Gm(n){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,Xe.Z)(function*(n){al(n).nu()}),Dv.apply(this,arguments)}function pD(n){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,Xe.Z)(function*(n){const e=al(n);for(const t of n.du)e.Zo(t.mutations)}),Wm.apply(this,arguments)}function Bp(n,e,t){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,Xe.Z)(function*(n,e,t){const r=n.du.shift(),o=Sp.from(r,e,t);yield TE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield lf(n)}),Tv.apply(this,arguments)}function gD(n,e){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,Xe.Z)(function*(n,e){var t;e&&al(n).Xo&&(yield(t=(0,Xe.Z)(function*(r,o){if(vw(l=o.code)&&l!==Dt.ABORTED){const d=r.du.shift();al(r).Fo(),yield TE(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield lf(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),fD(n)&&Cv(n)}),Sv.apply(this,arguments)}function AE(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,Xe.Z)(function*(n,e){const t=an(n);t.asyncQueue.verifyOperationInProgress(),Ht("RemoteStore","RemoteStore received new credentials");const r=Ha(t);t.wu.add(3),yield sf(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Lp(t)}),Av.apply(this,arguments)}function zm(n,e){return xv.apply(this,arguments)}function xv(){return xv=(0,Xe.Z)(function*(n,e){const t=an(n);e?(t.wu.delete(2),yield Lp(t)):e||(t.wu.add(2),yield sf(t),t.yu.set("Unknown"))}),xv.apply(this,arguments)}function uf(n){return n.Iu||(n.Iu=function(e,t,r){const o=an(e);return o.iu(),new lD(t,o.So,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:dD.bind(null,n),Zr:hD.bind(null,n),zo:DE.bind(null,n)}),n.mu.push(function(){var e=(0,Xe.Z)(function*(t){t?(n.Iu.Fo(),Ev(n)?Vm(n):n.yu.set("Unknown")):(yield n.Iu.stop(),af(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function al(n){return n.Tu||(n.Tu=function(e,t,r){const o=an(e);return o.iu(),new EE(t,o.So,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:Gm.bind(null,n),Zr:gD.bind(null,n),eu:pD.bind(null,n),tu:Bp.bind(null,n)}),n.mu.push(function(){var e=(0,Xe.Z)(function*(t){t?(n.Tu.Fo(),yield lf(n)):(yield n.Tu.stop(),n.du.length>0&&(Ht("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Mv{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new As,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,y=new Mv(e,t,d,o,l);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ut(Dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qd(n,e){if(fs("AsyncQueue",`${e}: ${n}`),tu(n))return new Ut(Dt.UNAVAILABLE,`${e}: ${n}`);throw n}class cf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||sn.comparator(t.key,r.key):(t,r)=>sn.comparator(t.key,r.key),this.keyedMap=Lc(),this.sortedSet=new gs(this.comparator)}static emptySet(e){return new cf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Rv{constructor(){this.Eu=new gs(sn.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):wn():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class df{constructor(e,t,r,o,l,d,y,E,S){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=E,this.hasCachedResults=S}static fromInitialDocuments(e,t,r,o,l){const d=[];return t.forEach(y=>{d.push({type:0,doc:y})}),new df(e,t,cf.emptySet(t),d,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class xE{constructor(){this.Ru=void 0,this.listeners=[]}}class mD{constructor(){this.queries=new Fc(e=>cm(e),ou),this.onlineState="Unknown",this.bu=new Set}}function Vp(n,e){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,Xe.Z)(function*(n,e){const t=an(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new xE),o)try{l.Ru=yield t.onListen(r)}catch(d){const y=qd(d,`Initialization of query '${kc(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,l),l.listeners.push(e),e.Pu(t.onlineState),l.Ru&&e.vu(l.Ru)&&kv(t)}),Ov.apply(this,arguments)}function qm(n,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Xe.Z)(function*(n,e){const t=an(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Ym.apply(this,arguments)}function yD(n,e){const t=an(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const y of d.listeners)y.vu(o)&&(r=!0);d.Ru=o}}r&&kv(t)}function _D(n,e,t){const r=an(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function kv(n){n.bu.forEach(e=>{e.next()})}class $p{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new df(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=df.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class vD{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class Pv{constructor(e){this.It=e}Ji(e){return rl(this.It,e)}Yi(e){return e.metadata.exists?Mw(this.It,e.document,!1):Si.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return yo(e)}}class bD{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ME(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Pv(this.It);for(const o of e)if(o.metadata.queries){const l=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const y=(t.get(d)||yr()).add(l);t.set(d,y)}}return t}complete(){var e=this;return(0,Xe.Z)(function*(){const t=yield function mE(n,e,t,r){return Mm.apply(this,arguments)}(e.localStore,new Pv(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield Gd(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function ME(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class RE{constructor(e){this.key=e}}class OE{constructor(e){this.key=e}}class kE{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=yr(),this.mutatedKeys=yr(),this.Gu=M_(e),this.Qu=new cf(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Rv,o=t?t.Qu:this.Qu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,y=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,S="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((U,K)=>{const ce=o.get(U),Pe=mp(this.query,K)?K:null,Ye=!!ce&&this.mutatedKeys.has(ce.key),Mt=!!Pe&&(Pe.hasLocalMutations||this.mutatedKeys.has(Pe.key)&&Pe.hasCommittedMutations);let Lt=!1;ce&&Pe?ce.data.isEqual(Pe.data)?Ye!==Mt&&(r.track({type:3,doc:Pe}),Lt=!0):this.Hu(ce,Pe)||(r.track({type:2,doc:Pe}),Lt=!0,(E&&this.Gu(Pe,E)>0||S&&this.Gu(Pe,S)<0)&&(y=!0)):!ce&&Pe?(r.track({type:0,doc:Pe}),Lt=!0):ce&&!Pe&&(r.track({type:1,doc:ce}),Lt=!0,(E||S)&&(y=!0)),Lt&&(Pe?(d=d.add(Pe),l=Mt?l.add(U):l.delete(U)):(d=d.delete(U),l=l.delete(U)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const U="F"===this.query.limitType?d.last():d.first();d=d.delete(U.key),l=l.delete(U.key),r.track({type:1,doc:U})}return{Qu:d,zu:r,$i:y,mutatedKeys:l}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const l=e.zu.Au();l.sort((S,U)=>function(K,ce){const Pe=Ye=>{switch(Ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wn()}};return Pe(K)-Pe(ce)}(S.type,U.type)||this.Gu(S.doc,U.doc)),this.Ju(r);const d=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,E=y!==this.qu;return this.qu=y,0!==l.length||E?{snapshot:new df(this.query,e.Qu,o,l,e.mutatedKeys,0===y,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Rv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=yr(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new OE(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new RE(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=yr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return df.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class wD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ED{constructor(e){this.key=e,this.nc=!1}}class ID{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new Fc(y=>cm(y),ou),this.rc=new Map,this.oc=new Set,this.uc=new gs(sn.comparator),this.cc=new Map,this.ac=new Tm,this.hc={},this.lc=new Map,this.fc=Ud.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function PE(n,e){return Km.apply(this,arguments)}function Km(){return Km=(0,Xe.Z)(function*(n,e){const t=Qv(n);let r,o;const l=t.ic.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.ec();else{const d=yield jd(t.localStore,na(e));t.isPrimaryClient&&Lm(t.remoteStore,d);const y=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Nv(t,e,r,"current"===y,d.resumeToken)}return o}),Km.apply(this,arguments)}function Nv(n,e,t,r,o){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,Xe.Z)(function*(n,e,t,r,o){n._c=(K,ce,Pe)=>{return(Ye=(0,Xe.Z)(function*(Mt,Lt,Pn,er){let Sn=Lt.view.Wu(Pn);Sn.$i&&(Sn=yield Pp(Mt.localStore,Lt.query,!1).then(({documents:cr})=>Lt.view.Wu(cr,Sn)));const xn=er&&er.targetChanges.get(Lt.targetId),rr=Lt.view.applyChanges(Sn,Mt.isPrimaryClient,xn);return Hv(Mt,Lt.targetId,rr.Xu),rr.snapshot}),function(Mt,Lt,Pn,er){return Ye.apply(this,arguments)})(n,K,ce,Pe);var Ye};const l=yield Pp(n.localStore,e,!0),d=new kE(e,l.Hi),y=d.Wu(l.documents),E=ja.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),S=d.applyChanges(y,n.isPrimaryClient,E);Hv(n,t,S.Xu);const U=new wD(e,t,d);return n.ic.set(e,U),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),S.snapshot}),Fv.apply(this,arguments)}function NE(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,Xe.Z)(function*(n,e){const t=an(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(l=>!ou(l,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Hd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Wc(t.remoteStore,r.targetId),Yd(t,r.targetId)}).catch(Ac))):(Yd(t,r.targetId),yield Hd(t.localStore,r.targetId,!0))}),Lv.apply(this,arguments)}function Bv(){return Bv=(0,Xe.Z)(function*(n,e,t){const r=Xv(n);try{const o=yield function(l,d){const y=an(l),E=zr.now(),S=d.reduce((ce,Pe)=>ce.add(Pe.key),yr());let U,K;return y.persistence.runTransaction("Locally write mutations","readwrite",ce=>{let Pe=wa(),Ye=yr();return y.Gi.getEntries(ce,S).next(Mt=>{Pe=Mt,Pe.forEach((Lt,Pn)=>{Pn.isValidDocument()||(Ye=Ye.add(Lt))})}).next(()=>y.localDocuments.getOverlayedDocuments(ce,Pe)).next(Mt=>{U=Mt;const Lt=[];for(const Pn of d){const er=mw(Pn,U.get(Pn.key).overlayedDocument);null!=er&&Lt.push(new au(Pn.key,er,sw(er.value.mapValue),Pi.exists(!0)))}return y.mutationQueue.addMutationBatch(ce,E,Lt,d)}).next(Mt=>{K=Mt;const Lt=Mt.applyToLocalDocumentSet(U,Ye);return y.documentOverlayCache.saveOverlays(ce,Mt.batchId,Lt)})}).then(()=>({batchId:K.batchId,changes:mm(U)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,d,y){let E=l.hc[l.currentUser.toKey()];E||(E=new gs(lr)),E=E.insert(d,y),l.hc[l.currentUser.toKey()]=E}(r,o.batchId,t),yield hu(r,o.changes),yield lf(r.remoteStore)}catch(o){const l=qd(o,"Failed to persist write");t.reject(l)}}),Bv.apply(this,arguments)}function Zm(n,e){return Up.apply(this,arguments)}function Up(){return Up=(0,Xe.Z)(function*(n,e){const t=an(n);try{const r=yield sD(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.cc.get(l);d&&(Gn(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?Gn(d.nc):o.removedDocuments.size>0&&(Gn(d.nc),d.nc=!1))}),yield hu(t,r,e)}catch(r){yield Ac(r)}}),Up.apply(this,arguments)}function Vv(n,e,t){const r=an(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((l,d)=>{const y=d.view.Pu(e);y.snapshot&&o.push(y.snapshot)}),function(l,d){const y=an(l);y.onlineState=d;let E=!1;y.queries.forEach((S,U)=>{for(const K of U.listeners)K.Pu(d)&&(E=!0)}),E&&kv(y)}(r.eventManager,e),o.length&&r.sc.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $v(n,e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,Xe.Z)(function*(n,e,t){const r=an(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),l=o&&o.key;if(l){let d=new gs(sn.comparator);d=d.insert(l,Si.newNoDocument(l,Zn.min()));const y=yr().add(l),E=new kd(Zn.min(),new Map,new _i(lr),d,y);yield Zm(r,E),r.uc=r.uc.remove(l),r.cc.delete(e),Wv(r)}else yield Hd(r.localStore,e,!1).then(()=>Yd(r,e,t)).catch(Ac)}),Uv.apply(this,arguments)}function DD(n,e){return jp.apply(this,arguments)}function jp(){return jp=(0,Xe.Z)(function*(n,e){const t=an(n),r=e.batch.batchId;try{const o=yield iD(t.localStore,e);FE(t,r,null),jv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hu(t,o)}catch(o){yield Ac(o)}}),jp.apply(this,arguments)}function TD(n,e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Xe.Z)(function*(n,e,t){const r=an(n);try{const o=yield function(l,d){const y=an(l);return y.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let S;return y.mutationQueue.lookupMutationBatch(E,d).next(U=>(Gn(null!==U),S=U.keys(),y.mutationQueue.removeMutationBatch(E,U))).next(()=>y.mutationQueue.performConsistencyCheck(E)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(E,S,d)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,S)).next(()=>y.localDocuments.getDocuments(E,S))})}(r.localStore,e);FE(r,e,t),jv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hu(r,o)}catch(o){yield Ac(o)}}),Qm.apply(this,arguments)}function Xm(){return Xm=(0,Xe.Z)(function*(n,e){const t=an(n);Ha(t.remoteStore)||Ht("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=an(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>d.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=qd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Xm.apply(this,arguments)}function jv(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function FE(n,e,t){const r=an(n);let o=r.hc[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Yd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Jm(n,r)})}function Jm(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Wc(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Wv(n))}function Hv(n,e,t){for(const r of t)r instanceof RE?(n.ac.addReference(r.key,e),Gv(n,r)):r instanceof OE?(Ht("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Jm(n,r.key)):wn()}function Gv(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ht("SyncEngine","New document in limbo: "+t),n.oc.add(r),Wv(n))}function Wv(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new sn(qr.fromString(e)),r=n.fc.next();n.cc.set(r,new ED(t)),n.uc=n.uc.insert(t,r),Lm(n.remoteStore,new Wu(na($a(t.path)),r,2,ta.at))}}function hu(n,e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,Xe.Z)(function*(n,e,t){const r=an(n),o=[],l=[],d=[];var y;r.ic.isEmpty()||(r.ic.forEach((y,E)=>{d.push(r._c(E,e,t).then(S=>{if((S||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,null!=S&&S.fromCache?"not-current":"current"),S){o.push(S);const U=hv.Ci(E.targetId,S);l.push(U)}}))}),yield Promise.all(d),r.sc.zo(o),yield(y=(0,Xe.Z)(function*(E,S){const U=an(E);try{yield U.persistence.runTransaction("notifyLocalViewChanges","readwrite",K=>bt.forEach(S,ce=>bt.forEach(ce.Si,Pe=>U.persistence.referenceDelegate.addReference(K,ce.targetId,Pe)).next(()=>bt.forEach(ce.Di,Pe=>U.persistence.referenceDelegate.removeReference(K,ce.targetId,Pe)))))}catch(K){if(!tu(K))throw K;Ht("LocalStore","Failed to update sequence numbers: "+K)}for(const K of S){const ce=K.targetId;if(!K.fromCache){const Pe=U.Ui.get(ce),Mt=Pe.withLastLimboFreeSnapshotVersion(Pe.snapshotVersion);U.Ui=U.Ui.insert(ce,Mt)}}}),function(E,S){return y.apply(this,arguments)})(r.localStore,l))}),Hp.apply(this,arguments)}function LE(n,e){return ey.apply(this,arguments)}function ey(){return ey=(0,Xe.Z)(function*(n,e){const t=an(n);if(!t.currentUser.isEqual(e)){Ht("SyncEngine","User change. New user:",e.toKey());const r=yield fE(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(y=>{y.reject(new Ut(Dt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hu(t,r.ji)}var o}),ey.apply(this,arguments)}function BE(n,e){const t=an(n),r=t.cc.get(e);if(r&&r.nc)return yr().add(r.key);{let o=yr();const l=t.rc.get(e);if(!l)return o;for(const d of l){const y=t.ic.get(d);o=o.unionWith(y.view.ju)}return o}}function VE(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,Xe.Z)(function*(n,e){const t=an(n),r=yield Pp(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&Hv(t,e.targetId,o.Xu),o}),zv.apply(this,arguments)}function SD(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,Xe.Z)(function*(n,e){const t=an(n);return mv(t.localStore,e).then(r=>hu(t,r))}),qv.apply(this,arguments)}function AD(n,e,t,r){return ty.apply(this,arguments)}function ty(){return ty=(0,Xe.Z)(function*(n,e,t,r){const o=an(n),l=yield function(d,y){const E=an(d),S=an(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",U=>S.Tn(U,y).next(K=>K?E.localDocuments.getDocuments(U,K):bt.resolve(null)))}(o.localStore,e);var y;null!==l?("pending"===t?yield lf(o.remoteStore):"acknowledged"===t||"rejected"===t?(FE(o,e,r||null),jv(o,e),y=e,an(an(o.localStore).mutationQueue).An(y)):wn(),yield hu(o,l)):Ht("SyncEngine","Cannot apply mutation batch with id: "+e)}),ty.apply(this,arguments)}function ny(){return ny=(0,Xe.Z)(function*(n,e){const t=an(n);if(Qv(t),Xv(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield $E(t,r.toArray());t.dc=!0,yield zm(t.remoteStore,!0);for(const l of o)Lm(t.remoteStore,l)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Yd(t,d),Hd(t.localStore,d,!0))),Wc(t.remoteStore,d)}),yield o,yield $E(t,r),function(l){const d=an(l);d.cc.forEach((y,E)=>{Wc(d.remoteStore,E)}),d.ac.fs(),d.cc=new Map,d.uc=new gs(sn.comparator)}(t),t.dc=!1,yield zm(t.remoteStore,!1)}}),ny.apply(this,arguments)}function $E(n,e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,Xe.Z)(function*(n,e,t){const r=an(n),o=[],l=[];for(const d of e){let y;const E=r.rc.get(d);if(E&&0!==E.length){y=yield jd(r.localStore,na(E[0]));for(const S of E){const U=r.ic.get(S),K=yield VE(r,U);K.snapshot&&l.push(K.snapshot)}}else{const S=yield gv(r.localStore,d);y=yield jd(r.localStore,S),yield Nv(r,xD(S),d,!1,y.resumeToken)}o.push(y)}return r.sc.zo(l),o}),Yv.apply(this,arguments)}function xD(n){return uw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function LS(n){const e=an(n);return an(an(e.localStore).persistence).vi()}function MD(n,e,t,r){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,Xe.Z)(function*(n,e,t,r){const o=an(n);if(o.dc)return void Ht("SyncEngine","Ignoring unexpected query state notification.");const l=o.rc.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const d=yield mv(o.localStore,yp(l[0])),y=kd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,io.EMPTY_BYTE_STRING);yield hu(o,d,y);break}case"rejected":yield Hd(o.localStore,e,!0),Yd(o,e,r);break;default:wn()}}),Kv.apply(this,arguments)}function RD(n,e,t){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,Xe.Z)(function*(n,e,t){const r=Qv(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Ht("SyncEngine","Adding an already active target "+o);continue}const l=yield gv(r.localStore,o),d=yield jd(r.localStore,l);yield Nv(r,xD(l),d.targetId,!1,d.resumeToken),Lm(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield Hd(r.localStore,o,!1).then(()=>{Wc(r.remoteStore,o),Yd(r,o)}).catch(Ac))}}),Zv.apply(this,arguments)}function Qv(n){const e=an(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$v.bind(null,e),e.sc.zo=yD.bind(null,e.eventManager),e.sc.wc=_D.bind(null,e.eventManager),e}function Xv(n){const e=an(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TD.bind(null,e),e}class UE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Xe.Z)(function*(){t.It=Pm(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return hE(this.persistence,new dE,e.initialUser,this.It)}yc(e){return new lv(Sm.Bs,this.It)}gc(e){return new bE}terminate(){var e=this;return(0,Xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jE extends UE{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Xe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Xv(r.Ac.syncEngine),yield lf(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return hE(this.persistence,new dE,e.initialUser,this.It)}Tc(e,t){return new ZC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new xC(t,this.persistence);return new bS(e.asyncQueue,r)}yc(e){const t=dv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ia.withCacheSize(this.cacheSizeBytes):ia.DEFAULT;return new cv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Fp(),Ni(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new bE}}class kD extends jE{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Xe.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof $n&&(r.sharedClientState.syncEngine={Fr:AD.bind(null,o),$r:MD.bind(null,o),Br:RD.bind(null,o),vi:LS.bind(null,o),Mr:SD.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var l=(0,Xe.Z)(function*(d){yield function FS(n,e){return ny.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}gc(e){const t=Fp();if(!$n.C(t))throw new Ut(Dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $n(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jv{initialize(e,t){var r=this;return(0,Xe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Vv(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=LE.bind(null,r.syncEngine),yield zm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mD}createDatastore(e){const t=Pm(e.databaseInfo.databaseId),r=new km(e.databaseInfo);return new IE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=y=>Vv(this.syncEngine,y,0),d=wE.C()?new wE:new oD,new cD(t,r,o,l,d);var t,r,o,l,d}createSyncEngine(e,t){return function(r,o,l,d,y,E,S){const U=new ID(r,o,l,d,y,E);return S&&(U.dc=!0),U}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Xe.Z)(function*(t){const r=an(t);Ht("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield sf(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function e0(n,e,t){if(!t)throw new Ut(Dt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ff(n,e,t,r){if(!0===e&&!0===r)throw new Ut(Dt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t0(n){if(!sn.isDocumentKey(n))throw new Ut(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function n0(n){if(sn.isDocumentKey(n))throw new Ut(Dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":wn()}function kr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ut(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gp(n);throw new Ut(Dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function r0(n,e){if(e<=0)throw new Ut(Dt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const HE=new Map;class GE{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ut(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ut(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ff("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ry{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ut(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ut(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new IC;switch(t.type){case"gapi":return new qb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ut(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=HE.get(e);t&&(Ht("ComponentProvider","Removing Datastore"),HE.delete(e),t.terminate())}(this),Promise.resolve()}}class Fi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fi(this.firestore,e,this._key)}}class Go{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Go(this.firestore,e,this._query)}}class fu extends Go{constructor(e,t,r){super(e,t,$a(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fi(this.firestore,null,new sn(e))}withConverter(e){return new fu(this.firestore,e,this._path)}}function zE(n,e,...t){if(n=(0,re.m9)(n),e0("collection","path",e),n instanceof ry){const r=qr.fromString(e,...t);return n0(r),new fu(n,null,r)}{if(!(n instanceof Fi||n instanceof fu))throw new Ut(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qr.fromString(e,...t));return n0(r),new fu(n.firestore,null,r)}}function iy(n,e,...t){if(n=(0,re.m9)(n),1===arguments.length&&(e=Zb.R()),e0("doc","path",e),n instanceof ry){const r=qr.fromString(e,...t);return t0(r),new Fi(n,null,new sn(r))}{if(!(n instanceof Fi||n instanceof fu))throw new Ut(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qr.fromString(e,...t));return t0(r),new Fi(n.firestore,n instanceof fu?n.converter:null,new sn(r))}}function sy(n,e){return n=(0,re.m9)(n),e=(0,re.m9)(e),(n instanceof Fi||n instanceof fu)&&(e instanceof Fi||e instanceof fu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ll(n,e){return n=(0,re.m9)(n),e=(0,re.m9)(e),n instanceof Go&&e instanceof Go&&n.firestore===e.firestore&&ou(n._query,e._query)&&n.converter===e.converter}function qE(n,e=10240){let t=0;return{read:()=>(0,Xe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class zp{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new As,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Xe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Xe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Xe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const l=yield e.Cc(o);return new vD(JSON.parse(l),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Xe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Xe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class oy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ut(Dt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Xe.Z)(function*(l,d){const y=an(l),E=Ep(y.It)+"/documents",S={documents:d.map(Pe=>zh(y.It,Pe))},U=yield y._o("BatchGetDocuments",E,S,d.length),K=new Map;U.forEach(Pe=>{const Ye=function HC(n,e){return"found"in e?function(t,r){Gn(!!r.found);const o=rl(t,r.found.name),l=yo(r.found.updateTime),d=new Po({mapValue:{fields:r.found.fields}});return Si.newFoundDocument(o,l,d)}(n,e):"missing"in e?function(t,r){Gn(!!r.missing),Gn(!!r.readTime);const o=rl(t,r.missing),l=yo(r.readTime);return Si.newNoDocument(o,l)}(n,e):wn()}(y.It,Pe);K.set(Ye.key.toString(),Ye)});const ce=[];return d.forEach(Pe=>{const Ye=K.get(Pe.toString());Gn(!!Ye),ce.push(Ye)}),ce}),function(l,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=sn.fromPath(o);e.mutations.push(new F_(l,e.precondition(l)))}),yield(r=(0,Xe.Z)(function*(o,l){const d=an(o),y=Ep(d.It)+"/documents",E={writes:l.map(S=>Bc(d.It,S))};yield d.ao("Commit",y,E)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wn();t=Zn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ut(Dt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zn.min())?Pi.exists(!1):Pi.updateTime(t):Pi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zn.min()))throw new Ut(Dt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(t)}return Pi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ay{constructor(e,t,r,o,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=l,this.kc=r.maxAttempts,this.No=new Nm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,Xe.Z)(function*(){const t=new oy(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.Fc(l)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!im(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!vw(t)}return!1}}class FD{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ro.UNAUTHENTICATED,this.clientId=Zb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Xe.Z)(function*(y){Ht("FirestoreClient","Received user=",y.uid),yield l.authCredentialListener(y),l.user=y});return function(y){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ht("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ut(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new As;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=qd(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function YE(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,Xe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ht("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Xe.Z)(function*(l){r.isEqual(l)||(yield fE(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ly.apply(this,arguments)}function s0(n,e){return qp.apply(this,arguments)}function qp(){return qp=(0,Xe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield uy(n);Ht("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>AE(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>AE(e.remoteStore,l)),n.onlineComponents=e}),qp.apply(this,arguments)}function uy(n){return o0.apply(this,arguments)}function o0(){return o0=(0,Xe.Z)(function*(n){return n.offlineComponents||(Ht("FirestoreClient","Using default OfflineComponentProvider"),yield YE(n,new UE)),n.offlineComponents}),o0.apply(this,arguments)}function cy(n){return KE.apply(this,arguments)}function KE(){return KE=(0,Xe.Z)(function*(n){return n.onlineComponents||(Ht("FirestoreClient","Using default OnlineComponentProvider"),yield s0(n,new Jv)),n.onlineComponents}),KE.apply(this,arguments)}function dy(n){return uy(n).then(e=>e.persistence)}function gf(n){return uy(n).then(e=>e.localStore)}function hy(n){return cy(n).then(e=>e.remoteStore)}function Yp(n){return cy(n).then(e=>e.syncEngine)}function mf(n){return a0.apply(this,arguments)}function a0(){return a0=(0,Xe.Z)(function*(n){const e=yield cy(n),t=e.eventManager;return t.onListen=PE.bind(null,e.syncEngine),t.onUnlisten=NE.bind(null,e.syncEngine),t}),a0.apply(this,arguments)}function py(n,e,t={}){const r=new As;return n.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return function(o,l,d,y,E){const S=new pf({next:K=>{l.enqueueAndForget(()=>qm(o,U));const ce=K.docs.has(d);!ce&&K.fromCache?E.reject(new Ut(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):ce&&K.fromCache&&y&&"server"===y.source?E.reject(new Ut(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(K)},error:K=>E.reject(K)}),U=new $p($a(d.path),S,{includeMetadataChanges:!0,ku:!0});return Vp(o,U)}(yield mf(n),n.asyncQueue,e,t,r)})),r.promise}function l0(n,e,t={}){const r=new As;return n.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return function(o,l,d,y,E){const S=new pf({next:K=>{l.enqueueAndForget(()=>qm(o,U)),K.fromCache&&"server"===y.source?E.reject(new Ut(Dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(K)},error:K=>E.reject(K)}),U=new $p(d,S,{includeMetadataChanges:!0,ku:!0});return Vp(o,U)}(yield mf(n),n.asyncQueue,e,t,r)})),r.promise}class eI{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Nm(this,"async_queue_retry"),this.Wc=()=>{const t=Ni();t&&Ht("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Ni();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Ni();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new As;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Xe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!tu(t))throw t;Ht("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,fs("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=Mv.createAndSchedule(this,e,t,r,l=>this.Yc(l));return this.qc.push(o),o}zc(){this.Kc&&wn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Xe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function gy(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class $D{constructor(){this._progressObserver={},this._taskCompletionResolver=new As,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Li extends ry{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new eI,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||nI(this),this._firestoreClient.terminate()}}function Ms(n){return n._firestoreClient||nI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function nI(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new I_(n._databaseId,l,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var l,y;n._firestoreClient=new FD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function u0(n,e,t){const r=new As;return n.asyncQueue.enqueue((0,Xe.Z)(function*(){try{yield YE(n,t),yield s0(n,e),r.resolve()}catch(o){const l=o;if(!("FirebaseError"===(d=l).name?d.code===Dt.FAILED_PRECONDITION||d.code===Dt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw l;Sc("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var d})).then(()=>r.promise)}function sI(n){if(n._initialized||n._terminated)throw new Ut(Dt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pu(io.fromBase64String(e))}catch(t){throw new Ut(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pu(io.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ll{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ut(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zc{constructor(e){this._methodName=e}}class Kd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ut(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ut(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}const d0=/^__.*__$/;class jS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new au(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gh(e,this.data,t,this.fieldTransforms)}}class h0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wn()}}class Qp{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===l&&this.na(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Jp(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(oI(this.sa)&&d0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class yf{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Pm(e)}da(e,t,r,o=!1){return new Qp({sa:e,methodName:t,fa:r,path:ps.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Zd(n){const e=n._freezeSettings(),t=Pm(n._databaseId);return new yf(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xp(n,e,t,r,o,l={}){const d=n.da(l.merge||l.mergeFields?2:0,e,t,o);_0("Data must be an object, but it was:",d,r);const y=m0(r,d);let E,S;if(l.merge)E=new Va(d.fieldMask),S=d.fieldTransforms;else if(l.mergeFields){const U=[];for(const K of l.mergeFields){const ce=v0(e,K,t);if(!d.contains(ce))throw new Ut(Dt.INVALID_ARGUMENT,`Field '${ce}' is specified in your field mask but missing from your input data.`);b0(U,ce)||U.push(ce)}E=new Va(U),S=d.fieldTransforms.filter(K=>E.covers(K.field))}else E=null,S=d.fieldTransforms;return new jS(new Po(y),E,S)}class Qd extends zc{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}function GD(n,e,t){return new Qp({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class f0 extends zc{_toFieldTransform(e){return new fm(e.path,new Md)}isEqual(e){return e instanceof f0}}class HS extends zc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=GD(this,e,!0),r=this._a.map(l=>Xd(l,t)),o=new Rd(r);return new fm(e.path,o)}isEqual(e){return this===e}}class WD extends zc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=GD(this,e,!0),r=this._a.map(l=>Xd(l,t)),o=new Pc(r);return new fm(e.path,o)}isEqual(e){return this===e}}class zD extends zc{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new mo(e.It,R_(e.It,this.wa));return new fm(e.path,t)}isEqual(e){return this===e}}function p0(n,e,t,r){const o=n.da(1,e,t);_0("Data must be an object, but it was:",o,r);const l=[],d=Po.empty();Cd(r,(E,S)=>{const U=yy(e,E,t);S=(0,re.m9)(S);const K=o.ca(U);if(S instanceof Qd)l.push(U);else{const ce=Xd(S,K);null!=ce&&(l.push(U),d.set(U,ce))}});const y=new Va(l);return new h0(d,y,o.fieldTransforms)}function my(n,e,t,r,o,l){const d=n.da(1,e,t),y=[v0(e,r,t)],E=[o];if(l.length%2!=0)throw new Ut(Dt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ce=0;ce<l.length;ce+=2)y.push(v0(e,l[ce])),E.push(l[ce+1]);const S=[],U=Po.empty();for(let ce=y.length-1;ce>=0;--ce)if(!b0(S,y[ce])){const Pe=y[ce];let Ye=E[ce];Ye=(0,re.m9)(Ye);const Mt=d.ca(Pe);if(Ye instanceof Qd)S.push(Pe);else{const Lt=Xd(Ye,Mt);null!=Lt&&(S.push(Pe),U.set(Pe,Lt))}}const K=new Va(S);return new h0(U,K,d.fieldTransforms)}function g0(n,e,t,r=!1){return Xd(t,n.da(r?4:3,e))}function Xd(n,e){if(y0(n=(0,re.m9)(n)))return _0("Unsupported field value:",e,n),m0(n,e);if(n instanceof zc)return function(t,r){if(!oI(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const d of t){let y=Xd(d,r.aa(l));null==y&&(y={nullValue:"NULL_VALUE"}),o.push(y),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,re.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return R_(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=zr.fromDate(t);return{timestampValue:ym(r.It,o)}}if(t instanceof zr){const o=new zr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ym(r.It,o)}}if(t instanceof Kd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pu)return{bytesValue:Tw(r.It,t._byteString)};if(t instanceof Fi){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.ha(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Gp(t)}`)}(n,e)}function m0(n,e){const t={};return Dd(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cd(n,(r,o)=>{const l=Xd(o,e.ra(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function y0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zr||n instanceof Kd||n instanceof pu||n instanceof Fi||n instanceof zc)}function _0(n,e,t){if(!y0(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Gp(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function v0(n,e,t){if((e=(0,re.m9)(e))instanceof Ll)return e._internalPath;if("string"==typeof e)return yy(n,e);throw Jp("Field path arguments must be of type string or ",n,!1,void 0,t)}const aI=new RegExp("[~\\*/\\[\\]]");function yy(n,e,t){if(e.search(aI)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ll(...e.split("."))._internalPath}catch(r){throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jp(n,e,t,r,o){const l=r&&!r.isEmpty(),d=void 0!==o;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let E="";return(l||d)&&(E+=" (found",l&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new Ut(Dt.INVALID_ARGUMENT,y+n+E)}function b0(n,e){return n.some(t=>t.isEqual(e))}class _f{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Fi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_y("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lI extends _f{data(){return super.data()}}function _y(n,e){return"string"==typeof e?yy(n,e):e instanceof Ll?e._internalPath:e._delegate._internalPath}function uI(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ut(Dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}function qu(n,...e){for(const t of e)n=t._apply(n);return n}class GS extends vy{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Zd(e.firestore),r=function(o,l,d,y,E,S,U){let K;if(E.isKeyField()){if("array-contains"===S||"array-contains-any"===S)throw new Ut(Dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if("in"===S||"not-in"===S){Ey(U,S);const Pe=[];for(const Ye of U)Pe.push(KD(y,o,Ye));K={arrayValue:{values:Pe}}}else K=KD(y,o,U)}else"in"!==S&&"not-in"!==S&&"array-contains-any"!==S||Ey(U,S),K=g0(d,"where",U,"in"===S||"not-in"===S);const ce=jo.create(E,S,K);return function(Pe,Ye){if(Ye.dt()){const Lt=x_(Pe);if(null!==Lt&&!Lt.isEqual(Ye.field))throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Lt.toString()}' and '${Ye.field.toString()}'`);const Pn=A_(Pe);null!==Pn&&I0(0,Ye.field,Pn)}const Mt=function(Lt,Pn){for(const er of Lt.filters)if(Pn.indexOf(er.op)>=0)return er.op;return null}(Pe,function(Lt){switch(Lt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ye.op));if(null!==Mt)throw new Ut(Dt.INVALID_ARGUMENT,Mt===Ye.op?`Invalid query. You cannot use more than one '${Ye.op.toString()}' filter.`:`Invalid query. You cannot use '${Ye.op.toString()}' filters with '${Mt.toString()}' filters.`)}(o,ce),ce}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Go(e.firestore,e.converter,function(o,l){const d=o.filters.concat([l]);return new Nl(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class zS extends vy{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Ut(Dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ut(Dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Uh(o,l);return function(y,E){if(null===A_(y)){const S=x_(y);null!==S&&I0(0,S,E.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Go(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Nl(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class qD extends vy{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Go(e.firestore,e.converter,xd(e._query,this.Ia,this.Ta))}}class YD extends vy{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=E0(e,this.type,this.Ea,this.Aa);return new Go(e.firestore,e.converter,(o=t,new Nl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class w0 extends vy{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=E0(e,this.type,this.Ea,this.Aa);return new Go(e.firestore,e.converter,(o=t,new Nl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function E0(n,e,t,r){if(t[0]=(0,re.m9)(t[0]),t[0]instanceof _f)return function(o,l,d,y,E){if(!y)throw new Ut(Dt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const S=[];for(const U of jh(o))if(U.field.isKeyField())S.push(ju(l,y.key));else{const K=y.data.field(U.field);if(tm(K))throw new Ut(Dt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+U.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===K){const ce=U.field.canonicalString();throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ce}' (used as the orderBy) does not exist.`)}S.push(K)}return new su(S,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Zd(n.firestore);return function(l,d,y,E,S,U){const K=l.explicitOrderBy;if(S.length>K.length)throw new Ut(Dt.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ce=[];for(let Pe=0;Pe<S.length;Pe++){const Ye=S[Pe];if(K[Pe].field.isKeyField()){if("string"!=typeof Ye)throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof Ye}`);if(!um(l)&&-1!==Ye.indexOf("/"))throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${Ye}' contains a slash.`);const Mt=l.path.child(qr.fromString(Ye));if(!sn.isDocumentKey(Mt))throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Mt}' is not because it contains an odd number of segments.`);const Lt=new sn(Mt);ce.push(ju(d,Lt))}else{const Mt=g0(y,E,Ye);ce.push(Mt)}}return new su(ce,U)}(n._query,n.firestore._databaseId,o,e,t,r)}}function KD(n,e,t){if("string"==typeof(t=(0,re.m9)(t))){if(""===t)throw new Ut(Dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!um(e)&&-1!==t.indexOf("/"))throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qr.fromString(t));if(!sn.isDocumentKey(r))throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ju(n,new sn(r))}if(t instanceof Fi)return ju(n,t._key);throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gp(t)}.`)}function Ey(n,e){if(!Array.isArray(n)||0===n.length)throw new Ut(Dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ut(Dt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function I0(n,e,t){if(!t.isEqual(e))throw new Ut(Dt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class C0{convertValue(e,t="none"){switch(ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ms(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wn()}}convertObject(e,t){const r={};return Cd(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new Kd(ms(e.latitude),ms(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rm(e));default:return null}}convertTimestamp(e){const t=$u(e);return new zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qr.fromString(e);Gn(Nd(r));const o=new Mc(r.get(1),r.get(3)),l=new sn(r.popFirst(5));return o.isEqual(t)||fs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function eg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class QS extends C0{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fi(this.firestore,null,t)}}class vf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yu extends _f{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_y("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class tg extends Yu{data(e={}){return super.data(e)}}class Bl{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new vf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tg(this._firestore,this._userDataWriter,r.key,r,new vf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ut(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new tg(r._firestore,r._userDataWriter,d.doc.key,d.doc,new vf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const y=new tg(r._firestore,r._userDataWriter,d.doc.key,d.doc,new vf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,S=-1;return 0!==d.type&&(E=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),S=l.indexOf(d.doc.key)),{type:ZD(d.type),doc:y,oldIndex:E,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wn()}}function QD(n,e){return n instanceof Yu&&e instanceof Yu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bl&&e instanceof Bl&&n._firestore===e._firestore&&ll(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Jd extends C0{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fi(this.firestore,null,t)}}function D0(n,e,t){n=kr(n,Fi);const r=kr(n.firestore,Li),o=eg(n.converter,e,t);return bf(r,[Xp(Zd(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Pi.none())])}function T0(n,e,t,...r){n=kr(n,Fi);const o=kr(n.firestore,Li),l=Zd(o);let d;return d="string"==typeof(e=(0,re.m9)(e))||e instanceof Ll?my(l,"updateDoc",n._key,e,t,r):p0(l,"updateDoc",n._key,e),bf(o,[d.toMutation(n._key,Pi.exists(!0))])}function dI(n,...e){var t,r,o;n=(0,re.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||gy(e[d])||(l=e[d],d++);const y={includeMetadataChanges:l.includeMetadataChanges};if(gy(e[d])){const K=e[d];e[d]=null===(t=K.next)||void 0===t?void 0:t.bind(K),e[d+1]=null===(r=K.error)||void 0===r?void 0:r.bind(K),e[d+2]=null===(o=K.complete)||void 0===o?void 0:o.bind(K)}let E,S,U;if(n instanceof Fi)S=kr(n.firestore,Li),U=$a(n._key.path),E={next:K=>{e[d]&&e[d](Ia(S,n,K))},error:e[d+1],complete:e[d+2]};else{const K=kr(n,Go);S=kr(K.firestore,Li),U=K._query;const ce=new Jd(S);E={next:Pe=>{e[d]&&e[d](new Bl(S,ce,K,Pe))},error:e[d+1],complete:e[d+2]},uI(n._query)}return function(K,ce,Pe,Ye){const Mt=new pf(Ye),Lt=new $p(ce,Mt,Pe);return K.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return Vp(yield mf(K),Lt)})),()=>{Mt.bc(),K.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return qm(yield mf(K),Lt)}))}}(Ms(S),U,y,E)}function bf(n,e){return function(t,r){const o=new As;return t.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return function CD(n,e,t){return Bv.apply(this,arguments)}(yield Yp(t),r,o)})),o.promise}(Ms(n),e)}function Ia(n,e,t){const r=t.docs.get(e._key),o=new Jd(n);return new Yu(n,o,e._key,r,new vf(t.hasPendingWrites,t.fromCache),e.converter)}const nT={maxAttempts:5};class fI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zd(e)}set(e,t,r){this._verifyNotCommitted();const o=gu(e,this._firestore),l=eg(o.converter,t,r),d=Xp(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Pi.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=gu(e,this._firestore);let d;return d="string"==typeof(t=(0,re.m9)(t))||t instanceof Ll?my(this._dataReader,"WriteBatch.update",l._key,t,r,o):p0(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,Pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gu(e,this._firestore);return this._mutations=this._mutations.concat(new Nc(t._key,Pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ut(Dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gu(n,e){if((n=(0,re.m9)(n)).firestore!==e)throw new Ut(Dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pI extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zd(e)}get(e){const t=gu(e,this._firestore),r=new QS(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return wn();const l=o[0];if(l.isFoundDocument())return new _f(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new _f(this._firestore,r,t._key,null,t.converter);throw wn()})}set(e,t,r){const o=gu(e,this._firestore),l=eg(o.converter,t,r),d=Xp(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const l=gu(e,this._firestore);let d;return d="string"==typeof(t=(0,re.m9)(t))||t instanceof Ll?my(this._dataReader,"Transaction.update",l._key,t,r,o):p0(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=gu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gu(e,this._firestore),r=new Jd(this._firestore);return super.get(e).then(o=>new Yu(this._firestore,r,t._key,o._document,new vf(!1,!1),t.converter))}}function Ul(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ut("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bI(){if("undefined"==typeof Uint8Array)throw new Ut("unimplemented","Uint8Arrays are not available in this environment.")}function sT(){if(!function RC(){return"undefined"!=typeof atob}())throw new Ut("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Mh=bn.SDK_VERSION,(0,bn._registerComponent)(new Fn.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const l=t.getProvider("app").getImmediate(),d=new Li(new CC(t.getProvider("auth-internal")),new Yb(t.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ut(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(y.options.projectId,E)}(l,r),l);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,bn.registerVersion)(m_,"3.7.1",n),(0,bn.registerVersion)(m_,"3.7.1","esm2017")}();class ng{constructor(e){this._delegate=e}static fromBase64String(e){return sT(),new ng(pu.fromBase64String(e))}static fromUint8Array(e){return bI(),new ng(pu.fromUint8Array(e))}toBase64(){return sT(),this._delegate.toBase64()}toUint8Array(){return bI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function x0(n){return function oT(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class aT{enableIndexedDbPersistence(e,t){return function VS(n,e){sI(n=kr(n,Li));const t=Ms(n),r=n._freezeSettings(),o=new Jv;return u0(t,o,new jE(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $S(n){sI(n=kr(n,Li));const e=Ms(n),t=n._freezeSettings(),r=new Jv;return u0(e,r,new kD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rI(n){if(n._initialized&&!n._terminated)throw new Ut(Dt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new As;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Xe.Z)(function*(){try{yield(t=(0,Xe.Z)(function*(r){if(!nl.C())return Promise.resolve();const o=r+"main";yield nl.delete(o)}),function(r){return t.apply(this,arguments)})(dv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class M0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function WE(n,e,t,r={}){var o;const l=(n=kr(n,ry))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Sc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,y;if("string"==typeof r.mockUserToken)d=r.mockUserToken,y=ro.MOCK_USER;else{d=(0,re.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ut(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new ro(E)}n._authCredentials=new zb(new Oh(d,y))}}(this._delegate,e,t,r)}enableNetwork(){return function UD(n){return function LD(n){return n.asyncQueue.enqueue((0,Xe.Z)(function*(){const e=yield dy(n),t=yield hy(n);return e.setNetworkEnabled(!0),function(r){const o=an(r);return o.wu.delete(0),Lp(o)}(t)}))}(Ms(n=kr(n,Li)))}(this._delegate)}disableNetwork(){return function c0(n){return function BD(n){return n.asyncQueue.enqueue((0,Xe.Z)(function*(){const e=yield dy(n),t=yield hy(n);return e.setNetworkEnabled(!1),(r=(0,Xe.Z)(function*(o){const l=an(o);l.wu.add(0),yield sf(l),l.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ms(n=kr(n,Li)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ff("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Zp(n){return function(e){const t=new As;return e.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return function hf(n,e){return Xm.apply(this,arguments)}(yield Yp(e),t)})),t.promise}(Ms(n=kr(n,Li)))}(this._delegate)}onSnapshotsInSync(e){return function S0(n,e){return function XE(n,e){const t=new pf(e);return n.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return r=yield mf(n),o=t,an(r).bu.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return r=yield mf(n),o=t,void an(r).bu.delete(o);var r,o}))}}(Ms(n=kr(n,Li)),gy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ut("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cf(this,zE(this._delegate,e))}catch(t){throw Wo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ca(this,iy(this._delegate,e))}catch(t){throw Wo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vo(this,function Wp(n,e){if(n=kr(n,ry),e0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ut(Dt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Go(n,null,(t=e,new Nl(qr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Wo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gI(n,e,t){n=kr(n,Li);const r=Object.assign(Object.assign({},nT),t);return function(o){if(o.maxAttempts<1)throw new Ut(Dt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,l,d){const y=new As;return o.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){const E=yield function fy(n){return cy(n).then(e=>e.datastore)}(o);new ay(o.asyncQueue,E,d,l,y).run()})),y.promise}(Ms(n),o=>e(new pI(n,o)),r)}(this._delegate,t=>e(new EI(this,t)))}batch(){return Ms(this._delegate),new O0(new fI(this._delegate,e=>bf(this._delegate,e)))}loadBundle(e){return function iI(n,e){const t=Ms(n=kr(n,Li)),r=new $D;return function JE(n,e,t,r){const o=function(l,d){let y;return y="string"==typeof l?(new TextEncoder).encode(l):l,E=function(E,S){if(E instanceof Uint8Array)return qE(E,S);if(E instanceof ArrayBuffer)return qE(new Uint8Array(E),S);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new zp(E,d);var E}(t,Pm(e));n.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){!function OD(n,e,t){const r=an(n);var o;(o=(0,Xe.Z)(function*(l,d,y){try{const E=yield d.getMetadata();if(yield function(ce,Pe){const Ye=an(ce),Mt=yo(Pe.createTime);return Ye.persistence.runTransaction("hasNewerBundle","readonly",Lt=>Ye.Ns.getBundleMetadata(Lt,Pe.id)).then(Lt=>!!Lt&&Lt.createTime.compareTo(Mt)>=0)}(l.localStore,E))return yield d.close(),y._completeWith({taskState:"Success",documentsLoaded:(ce=E).totalDocuments,bytesLoaded:ce.totalBytes,totalDocuments:ce.totalDocuments,totalBytes:ce.totalBytes}),Promise.resolve(new Set);y._updateProgress(ME(E));const S=new bD(E,l.localStore,d.It);let U=yield d.mc();for(;U;){const ce=yield S.Fu(U);ce&&y._updateProgress(ce),U=yield d.mc()}const K=yield S.complete();return yield hu(l,K.Lu,void 0),yield function(ce,Pe){const Ye=an(ce);return Ye.persistence.runTransaction("Save bundle","readwrite",Mt=>Ye.Ns.saveBundleMetadata(Mt,Pe))}(l.localStore,E),y._completeWith(K.progress),Promise.resolve(K.Bu)}catch(E){return Sc("SyncEngine",`Loading bundle failed with ${E}`),y._failWith(E),Promise.resolve(new Set)}var ce}),function(l,d,y){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Yp(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function jD(n,e){return function VD(n,e){return n.asyncQueue.enqueue((0,Xe.Z)(function*(){return function(t,r){const o=an(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.Ns.getNamedQuery(l,r))}(yield gf(n),e)}))}(Ms(n=kr(n,Li)),e).then(t=>t?new Go(n,null,t.query):null)}(this._delegate,e).then(t=>t?new vo(this,t):null)}}class R0 extends C0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ng(new pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ca.forKey(t,this.firestore,null)}}class EI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new R0(e)}get(e){const t=qc(e);return this._delegate.get(t).then(r=>new Ef(this._firestore,new Yu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=qc(e);return r?(Ul("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=qc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=qc(e);return this._delegate.delete(t),this}}class O0{constructor(e){this._delegate=e}set(e,t,r){const o=qc(e);return r?(Ul("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=qc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=qc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new tg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new If(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new wf(e,new R0(e),t),o.set(t,l)),l}}wf.INSTANCES=new WeakMap;class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new R0(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ut("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ca(t,new Fi(t._delegate,r,new sn(e)))}static forKey(e,t,r){return new Ca(t,new Fi(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cf(this.firestore,zE(this._delegate,e))}catch(t){throw Wo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,re.m9)(e))instanceof Fi&&sy(this._delegate,e)}set(e,t){t=Ul("DocumentReference.set",t);try{return t?D0(this._delegate,e,t):D0(this._delegate,e)}catch(r){throw Wo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?T0(this._delegate,e):T0(this._delegate,e,t,...r)}catch(o){throw Wo(o,"updateDoc()","DocumentReference.update()")}}delete(){return function eA(n){return bf(kr(n.firestore,Li),[new Nc(n._key,Pi.none())])}(this._delegate)}onSnapshot(...e){const t=k0(e),r=P0(e,o=>new Ef(this.firestore,new Yu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return dI(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function XD(n){n=kr(n,Fi);const e=kr(n.firestore,Li),t=Ms(e),r=new Jd(e);return function ZE(n,e){const t=new As;return n.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return(r=(0,Xe.Z)(function*(o,l,d){try{const y=yield function(E,S){const U=an(E);return U.persistence.runTransaction("read document","readonly",K=>U.localDocuments.getDocument(K,S))}(o,l);y.isFoundDocument()?d.resolve(y):y.isNoDocument()?d.resolve(null):d.reject(new Ut(Dt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const E=qd(y,`Failed to get document '${l} from cache`);d.reject(E)}}),function(o,l,d){return r.apply(this,arguments)})(yield gf(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Yu(e,r,n._key,o,new vf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function JD(n){n=kr(n,Fi);const e=kr(n.firestore,Li);return py(Ms(e),n._key,{source:"server"}).then(t=>Ia(e,n,t))}(this._delegate):function XS(n){n=kr(n,Fi);const e=kr(n.firestore,Li);return py(Ms(e),n._key).then(t=>Ia(e,n,t))}(this._delegate),t.then(r=>new Ef(this.firestore,new Yu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?wf.getInstance(this.firestore,e):null))}}function Wo(n,e,t){return n.message=n.message.replace(e,t),n}function k0(n){for(const e of n)if("object"==typeof e&&!x0(e))return e;return{}}function P0(n,e){var t,r;let o;return o=x0(n[0])?n[0]:x0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Ef{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return QD(this._delegate,e._delegate)}}class If extends Ef{data(e){const t=this._delegate.data(e);return function Xg(n,e){n||wn()}(void 0!==t),t}}class vo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new R0(e)}where(e,t,r){try{return new vo(this.firestore,qu(this._delegate,function WS(n,e,t){const r=e,o=_y("where",n);return new GS(o,r,t)}(e,t,r)))}catch(o){throw Wo(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vo(this.firestore,qu(this._delegate,function qS(n,e="asc"){const t=e,r=_y("orderBy",n);return new zS(r,t)}(e,t)))}catch(r){throw Wo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vo(this.firestore,qu(this._delegate,function YS(n){return r0("limit",n),new qD("limit",n,"F")}(e)))}catch(t){throw Wo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vo(this.firestore,qu(this._delegate,function KS(n){return r0("limitToLast",n),new qD("limitToLast",n,"L")}(e)))}catch(t){throw Wo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vo(this.firestore,qu(this._delegate,function by(...n){return new YD("startAt",n,!0)}(...e)))}catch(t){throw Wo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vo(this.firestore,qu(this._delegate,function ZS(...n){return new YD("startAfter",n,!1)}(...e)))}catch(t){throw Wo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vo(this.firestore,qu(this._delegate,function wy(...n){return new w0("endBefore",n,!1)}(...e)))}catch(t){throw Wo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vo(this.firestore,qu(this._delegate,function cI(...n){return new w0("endAt",n,!0)}(...e)))}catch(t){throw Wo(t,"endAt()","Query.endAt()")}}isEqual(e){return ll(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function JS(n){n=kr(n,Go);const e=kr(n.firestore,Li),t=Ms(e),r=new Jd(e);return function QE(n,e){const t=new As;return n.asyncQueue.enqueueAndForget((0,Xe.Z)(function*(){return(r=(0,Xe.Z)(function*(o,l,d){try{const y=yield Pp(o,l,!0),E=new kE(l,y.Hi),S=E.Wu(y.documents),U=E.applyChanges(S,!1);d.resolve(U.snapshot)}catch(y){const E=qd(y,`Failed to execute query '${l} against cache`);d.reject(E)}}),function(o,l,d){return r.apply(this,arguments)})(yield gf(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Bl(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function tT(n){n=kr(n,Go);const e=kr(n.firestore,Li),t=Ms(e),r=new Jd(e);return l0(t,n._query,{source:"server"}).then(o=>new Bl(e,r,n,o))}(this._delegate):function eT(n){n=kr(n,Go);const e=kr(n.firestore,Li),t=Ms(e),r=new Jd(e);return uI(n._query),l0(t,n._query).then(o=>new Bl(e,r,n,o))}(this._delegate),t.then(r=>new Dy(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=k0(e),r=P0(e,o=>new Dy(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return dI(this._delegate,t,r)}withConverter(e){return new vo(this.firestore,this._delegate.withConverter(e?wf.getInstance(this.firestore,e):null))}}class Cy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new If(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new If(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Cy(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new If(this._firestore,r))})}isEqual(e){return QD(this._delegate,e._delegate)}}class Cf extends vo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ca(this.firestore,e):null}doc(e){try{return new Ca(this.firestore,void 0===e?iy(this._delegate):iy(this._delegate,e))}catch(t){throw Wo(t,"doc()","CollectionReference.doc()")}}add(e){return function Vl(n,e){const t=kr(n.firestore,Li),r=iy(n),o=eg(n.converter,e);return bf(t,[Xp(Zd(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Pi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ca(this.firestore,t))}isEqual(e){return sy(this._delegate,e._delegate)}withConverter(e){return new Cf(this.firestore,this._delegate.withConverter(e?wf.getInstance(this.firestore,e):null))}}function qc(n){return kr(n,Fi)}class Ty{constructor(...e){this._delegate=new Ll(...e)}static documentId(){return new Ty(ps.keyField().canonicalString())}isEqual(e){return(e=(0,re.m9)(e))instanceof Ll&&this._delegate._internalPath.isEqual(e._internalPath)}}class eh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mI(){return new f0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eh(e)}static delete(){const e=function rT(){return new Qd("deleteField")}();return e._methodName="FieldValue.delete",new eh(e)}static arrayUnion(...e){const t=function yI(...n){return new HS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eh(t)}static arrayRemove(...e){const t=function iT(...n){return new WD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eh(t)}static increment(e){const t=function _I(n){return new zD("increment",n)}(e);return t._methodName="FieldValue.increment",new eh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lT={Firestore:M0,GeoPoint:Kd,Timestamp:zr,Blob:ng,Transaction:EI,WriteBatch:O0,DocumentReference:Ca,DocumentSnapshot:Ef,Query:vo,QueryDocumentSnapshot:If,QuerySnapshot:Dy,CollectionReference:Cf,FieldPath:Ty,FieldValue:eh,setLogLevel:function wI(n){!function EC(n){bd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function CI(n,e){return function II(n,e=Cs.z){return new se.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function N0(n,e){return CI(n,e).pipe((0,Le.U)(t=>({payload:t,type:"query"})))}function F0(n,e){return N0(n,e).pipe((0,yi.O)(void 0),ls(),(0,Le.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,y)=>{const E=o.find(U=>U.doc.ref.isEqual(d.ref)),S=null==t?void 0:t.payload.docs.find(U=>U.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&S&&JSON.stringify(S.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:d}})}),l}))}function cT(n,e,t){return F0(n,t).pipe((0,Uo.R)((r,o)=>function sA(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function oA(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return DI(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return DI(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return DI(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),(0,Ja.x)(),(0,Le.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function DI(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function TI(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function iA(n){(function rA(n,e){n.INTERNAL.registerComponent(new Fn.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},lT)))})(n,(e,t)=>new M0(e,t,new aT)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(Ps.Z);class rg{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=F0(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Le.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe((0,yi.O)(void 0),ls(),(0,de.h)(([r,o])=>o.length>0||!r),(0,Le.U)(([r,o])=>o),ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Uo.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=TI(e);return cT(this.query,t,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return N0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Le.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ie.iC)}get(e){return(0,X.D)(this.query.get(e)).pipe(ie.iC)}add(e){return this.ref.add(e)}doc(e){return new SI(this.ref.doc(e),this.afs)}}class SI{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=Sy(r,t);return new rg(o,l,this.afs)}snapshotChanges(){return function uT(n,e){return CI(n,e).pipe((0,yi.O)(void 0),ls(),(0,Le.U)(([t,r])=>r.exists?null!=t&&t.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Le.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,X.D)(this.ref.get(e)).pipe(ie.iC)}}class dT{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?F0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Le.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,de.h)(t=>t.length>0),ie.iC):F0(this.query,this.afs.schedulers.outsideAngular).pipe(ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Uo.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=TI(e);return cT(this.query,t,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return N0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Le.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ie.iC)}get(e){return(0,X.D)(this.query.get(e)).pipe(ie.iC)}}const L0=new W.OlP("angularfire2.enableFirestorePersistence"),Yc=new W.OlP("angularfire2.firestore.persistenceSettings"),AI=new W.OlP("angularfire2.firestore.settings"),B0=new W.OlP("angularfire2.firestore.use-emulator");function Sy(n,e=(t=>t)){return{query:e(n),ref:n}}let hT=(()=>{class n{constructor(t,r,o,l,d,y,E,S,U,K,ce,Pe,Ye,Mt,Lt,Pn,er){this.schedulers=E;const Sn=(0,oe.on)(t,y,r),xn=U;K&&Hi(Sn,y,ce,Ye,Mt,Lt,Pe,Pn),[this.firestore,this.persistenceEnabled$]=(0,oe.cc)(`${Sn.name}.firestore`,"AngularFirestore",Sn.name,()=>{const rr=y.runOutsideAngular(()=>Sn.firestore());if(l&&rr.settings(l),xn&&rr.useEmulator(...xn),o&&!(0,ve.PM)(d)){const cr=()=>{try{return(0,X.D)(rr.enablePersistence(S||void 0).then(()=>!0,()=>!1))}catch(Os){return"undefined"!=typeof console&&console.warn(Os),(0,te.of)(!1)}};return[rr,y.runOutsideAngular(cr)]}return[rr,(0,te.of)(!1)]},[l,xn,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=Sy(o,r),y=this.schedulers.ngZone.run(()=>l);return new rg(y,d,this)}collectionGroup(t,r){const o=r||(d=>d),l=this.firestore.collectionGroup(t);return new dT(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new SI(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(W.LFG(oe.Dh),W.LFG(oe.xv,8),W.LFG(L0,8),W.LFG(AI,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(ie.HU),W.LFG(Yc,8),W.LFG(B0,8),W.LFG(Yr,8),W.LFG(Co,8),W.LFG(pi,8),W.LFG(Oi,8),W.LFG(Es,8),W.LFG(Mr,8),W.LFG(Is,8),W.LFG(Mi,8))},n.\u0275prov=W.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),V0=(()=>{class n{constructor(){ai.Z.registerVersion("angularfire",ie.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:L0,useValue:!0},{provide:Yc,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=W.oAB({type:n}),n.\u0275inj=W.cJS({providers:[hT]}),n})();var $0=$(2474),Ay=$(826),aA=$(448);class uA{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new cA(e,this.observables,this.project))}}class cA extends Ay.L{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let l=0;l<o;l++)this.toRespond.push(l);for(let l=0;l<o;l++)this.add((0,aA.D)(this,t[l],void 0,l))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const l=o.indexOf(r);-1!==l&&o.splice(l,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class fT{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new pT(e,this.predicate))}}class pT extends ns.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const MI="@firebase/database";let xy="";function U0(n){xy=n}class OI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,re.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,re.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class gT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,re.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const kI=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new OI(e)}}catch(e){}return new gT},Kc=kI("localStorage"),ig=kI("sessionStorage"),sg=new Qn.Yd("@firebase/database"),j0=function(){let n=1;return function(){return n++}}(),My=function(n){const e=(0,re.dS)(n),t=new re.gQ;t.update(e);const r=t.digest();return re.US.encodeByteArray(r)},og=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=og.apply(null,r):e+="object"==typeof r?(0,re.Wl)(r):r,e+=" "}return e};let th=null,mT=!0;const yT=function(n,e){(0,re.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(sg.logLevel=Qn.in.VERBOSE,th=sg.log.bind(sg),e&&ig.set("logging_enabled",!0)):"function"==typeof n?th=n:(th=null,ig.remove("logging_enabled"))},bo=function(...n){if(!0===mT&&(mT=!1,null===th&&!0===ig.get("logging_enabled")&&yT(!0)),th){const e=og.apply(null,n);th(e)}},ag=function(n){return function(...e){bo(n,...e)}},H0=function(...n){const e="FIREBASE INTERNAL ERROR: "+og(...n);sg.error(e)},Ku=function(...n){const e=`FIREBASE FATAL ERROR: ${og(...n)}`;throw sg.error(e),new Error(e)},oa=function(...n){const e="FIREBASE WARNING: "+og(...n);sg.warn(e)},G0=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Zu="[MIN_NAME]",Qu="[MAX_NAME]",Df=function(n,e){if(n===e)return 0;if(n===Zu||e===Qu)return-1;if(e===Zu||n===Qu)return 1;{const t=O(n),r=O(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},fA=function(n,e){return n===e?0:n<e?-1:1},Ry=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,re.Wl)(e))},PI=function(n){if("object"!=typeof n||null===n)return(0,re.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,re.Wl)(e[r]),t+=":",t+=PI(n[e[r]]);return t+="}",t},_T=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const s=function(n){(0,re.hu)(!G0(n),"Invalid JSON number");const r=1023;let o,l,d,y,E;0===n?(l=0,d=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(y=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=y+r,d=Math.round(n*Math.pow(2,52-y)-Math.pow(2,52))):(l=0,d=Math.round(n/Math.pow(2,-1074))));const S=[];for(E=52;E;E-=1)S.push(d%2?1:0),d=Math.floor(d/2);for(E=11;E;E-=1)S.push(l%2?1:0),l=Math.floor(l/2);S.push(o?1:0),S.reverse();const U=S.join("");let K="";for(E=0;E<64;E+=8){let ce=parseInt(U.substr(E,8),2).toString(16);1===ce.length&&(ce="0"+ce),K+=ce}return K.toLowerCase()},g=new RegExp("^-?(0*)\\d{1,10}$"),w=-2147483648,T=2147483647,O=function(n){if(g.test(n)){const e=Number(n);if(e>=w&&e<=T)return e}return null},H=function(n){try{n()}catch(e){setTimeout(()=>{throw oa("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},pe=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Ue{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){oa(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ft{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(bo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oa(e)}}let xt=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Yn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Oy="websocket",ky="long_polling";class lg{constructor(e,t,r,o,l=!1,d="",y=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Kc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Py(n,e,t){let r;if((0,re.hu)("string"==typeof e,"typeof type must == string"),(0,re.hu)("object"==typeof t,"typeof params must == object"),e===Oy)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ky)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function W0(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return i(t,(l,d)=>{o.push(l+"="+d)}),r+o.join("&")}class z0{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,re.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,re.p$)(this.counters_)}}const ug={},cg={};function dg(n){const e=n.toString();return ug[e]||(ug[e]=new z0),ug[e]}class wM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&H(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tf{constructor(e,t,r,o,l,d,y){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.transportSessionId=d,this.lastSessionId=y,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ag(e),this.stats_=dg(t),this.urlFn=E=>(this.appCheckToken&&(E.ac=this.appCheckToken),Py(t,ky,E))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,re.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vT((...l)=>{const[d,y,E,S,U]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=y,this.password=E;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);y?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(y,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[d,y]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,y)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Yn.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tf.forceAllow_=!0}static forceDisallow(){Tf.forceDisallow_=!0}static isAvailable(){return!((0,re.Yr)()||!Tf.forceAllow_&&(Tf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,re.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,re.h$)(t),o=_T(r,1840);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,re.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,re.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class vT{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,re.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=j0(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=vT.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(y){bo("frame writing exception"),y.stack&&bo(y.stack),bo(y)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||bo("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+o+"="+d.seg+"&ts"+o+"="+d.ts+"&d"+o+"="+d.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,re.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{bo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let NI=null;"undefined"!=typeof MozWebSocket?NI=MozWebSocket:"undefined"!=typeof WebSocket&&(NI=WebSocket);let Ny=(()=>{class n{constructor(t,r,o,l,d,y,E){this.connId=t,this.applicationId=o,this.appCheckToken=l,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ag(this.connId),this.stats_=dg(r),this.connURL=n.connectionURL_(r,y,E,l,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,l,d){const y={v:"5"};return!(0,re.Yr)()&&"undefined"!=typeof location&&location.hostname&&Yn.test(location.hostname)&&(y.r="f"),r&&(y.s=r),o&&(y.ls=o),l&&(y.ac=l),d&&(y.p=d),Py(t,Oy,y)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kc.set("previous_websocket_failure",!0);try{let o;if((0,re.Yr)()){o={headers:{"User-Agent":`Firebase/5/${xy}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,y=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;y&&(o.proxy={origin:y})}this.mySock=new NI(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==NI&&!n.forceDisallow_}static previouslyFailed(){return Kc.isInMemoryStorage||!0===Kc.get("previous_websocket_failure")}markConnectionHealthy(){Kc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,re.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,re.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,re.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=_T(r,16384);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),bA=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Tf,Ny]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Ny&&Ny.isAvailable();let o=r&&!Ny.previouslyFailed();if(t.webSocketOnly&&(r||oa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Ny];else{const l=this.transports_=[];for(const d of n.ALL_TRANSPORTS)d&&d.isAvailable()&&l.push(d);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class SA{constructor(e,t,r,o,l,d,y,E,S,U){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=d,this.onReady_=y,this.onDisconnect_=E,this.onKill_=S,this.lastSessionId=U,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ag("c:"+this.id+":"),this.transportManager_=new bA(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=pe(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ry("t",e),r=Ry("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ry("t",e),r=Ry("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ry("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?H0("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):H0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&oa("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),pe(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pe(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class AA{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class xA{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,re.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!r||r===o[l].context))return void o.splice(l,1)}validateEventType_(e){(0,re.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class FI extends xA{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,re.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new FI}getInitialEvent(e){return(0,re.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class vi{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function si(){return new vi("")}function Pr(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Sf(n){return n.pieces_.length-n.pieceNum_}function Vi(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new vi(n.pieces_,e)}function wT(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function q0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function OA(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new vi(e,0)}function ys(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof vi)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new vi(t,0)}function Nr(n){return n.pieceNum_>=n.pieces_.length}function Ga(n,e){const t=Pr(n),r=Pr(e);if(null===t)return e;if(t===r)return Ga(Vi(n),Vi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function HM(n,e){const t=q0(n,0),r=q0(e,0);for(let o=0;o<t.length&&o<r.length;o++){const l=Df(t[o],r[o]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function ET(n,e){if(Sf(n)!==Sf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function mu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Sf(n)>Sf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class GM{constructor(e,t){this.errorPrefix_=t,this.parts_=q0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,re.ug)(this.parts_[r]);kA(this)}}function kA(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+hg(n))}function hg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class IT extends xA{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new IT}getInitialEvent(e){return(0,re.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Y0=1e3;let BI,fg=(()=>{class n extends AA{constructor(t,r,o,l,d,y,E,S){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=d,this.authTokenProvider_=y,this.appCheckTokenProvider_=E,this.authOverride_=S,this.id=n.nextPersistentConnectionId_++,this.log_=ag("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Y0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,S&&!(0,re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");IT.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&FI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const l=++this.requestNumber_,d={r:l,a:t,b:r};this.log_((0,re.Wl)(d)),(0,re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[l]=o)}get(t){this.initConnection_();const r=new re.BH,o={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:o,onComplete:y=>{const E=y.d;"ok"===y.s?r.resolve(E):r.reject(E)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,o,l){this.initConnection_();const d=t._queryIdentifier,y=t._path.toString();this.log_("Listen called for "+y+" "+d),this.listens.has(y)||this.listens.set(y,new Map),(0,re.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,re.hu)(!this.listens.get(y).has(d),"listen() called twice for same path/queryId.");const E={onComplete:l,hashFn:r,query:t,tag:o};this.listens.get(y).set(d,E),this.connected_&&this.sendListen_(E)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+o+" for "+l);const d={p:o};t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,E=>{const S=E.d,U=E.s;n.warnOnListenWarnings_(S,r),(this.listens.get(o)&&this.listens.get(o).get(l))===t&&(this.log_("listen response",E),"ok"!==U&&this.removeListen_(o,l),t.onComplete&&t.onComplete(U,S))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,re.r3)(t,"w")){const o=(0,re.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();oa(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,re.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,re.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,l=>{const d=l.s,y=l.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,y))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),(0,re.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,t._queryObject,r)}sendUnlisten_(t,r,o,l){this.log_("Unlisten on "+t+" for "+r);const d={p:t};l&&(d.q=o,d.t=l),this.sendRequest("n",d)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,l){const d={p:r,d:o};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,y=>{l&&setTimeout(()=>{l(y.s,y.d)},Math.floor(0))})}put(t,r,o,l){this.putInternal("p",t,r,o,l)}merge(t,r,o,l){this.putInternal("m",t,r,o,l)}putInternal(t,r,o,l,d){this.initConnection_();const y={p:r,d:o};void 0!==d&&(y.h=d),this.outstandingPuts_.push({action:t,request:y,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,re.Wl)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):H0("Unrecognized action received from server: "+(0,re.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Y0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Y0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Y0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Xe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+n.nextConnectionId_++,y=t.lastSessionId;let E=!1,S=null;const U=function(){S?S.close():(E=!0,l())};t.realtime_={close:U,sendRequest:function(Pe){(0,re.hu)(S,"sendRequest call when we're not connected not allowed."),S.sendRequest(Pe)}};const ce=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[Pe,Ye]=yield Promise.all([t.authTokenProvider_.getToken(ce),t.appCheckTokenProvider_.getToken(ce)]);E?bo("getToken() completed but was canceled"):(bo("getToken() completed. Creating connection."),t.authToken_=Pe&&Pe.accessToken,t.appCheckToken_=Ye&&Ye.token,S=new SA(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,l,Mt=>{oa(Mt+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},y))}catch(Pe){t.log_("Failed to get token: "+Pe),E||(t.repoInfo_.nodeAdmin&&oa(Pe),U())}}})()}interrupt(t){bo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){bo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Y0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(d=>PI(d)).join("$"):"default";const l=this.removeListen_(t,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const o=new vi(t).toString();let l;if(this.listens.has(o)){const d=this.listens.get(o);l=d.get(r),d.delete(r),0===d.size&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(t,r){bo("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){bo("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,re.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+xy.replace(/\./g,"-")]=1,(0,re.uI)()?t["framework.cordova"]=1:(0,re.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=FI.getInstance().currentlyOnline();return(0,re.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class $r{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new $r(e,t)}}class LI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new $r(Zu,e),o=new $r(Zu,t);return 0!==this.compare(r,o)}minPost(){return $r.MIN}}class FA extends LI{static get __EMPTY_NODE(){return BI}static set __EMPTY_NODE(e){BI=e}compare(e,t){return Df(e.name,t.name)}isDefinedOn(e){throw(0,re.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return $r.MIN}maxPost(){return new $r(Qu,BI)}makePost(e,t){return(0,re.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new $r(e,BI)}toString(){return".key"}}const Zc=new FA;class VI{constructor(e,t,r,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(d=t?r(e.key,t):1,o&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let DT,Ju=(()=>{class n{constructor(t,r,o,l,d){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=l?l:ul.EMPTY_NODE,this.right=null!=d?d:ul.EMPTY_NODE}copy(t,r,o,l,d){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=l?l:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let l=this;const d=o(t,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(t,r,o),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return ul.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,l;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return ul.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ul{constructor(e,t=ul.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ul(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ju.BLACK,null,null))}remove(e){return new ul(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ju.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new VI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new VI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new VI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new VI(this.root_,null,this.comparator_,!0,e)}}function XM(n,e){return Df(n.name,e.name)}function CT(n,e){return Df(n,e)}ul.EMPTY_NODE=new class QM{copy(e,t,r,o,l){return this}insert(e,t,r){return new Ju(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const LA=function(n){return"number"==typeof n?"number:"+s(n):"string:"+n},BA=function(n){if(n.isLeafNode()){const e=n.val();(0,re.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,re.r3)(e,".sv"),"Priority must be a string or number.")}else(0,re.hu)(n===DT||n.isEmpty(),"priority of unexpected type.");(0,re.hu)(n===DT||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let VA,$A,UA,Fy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),BA(this.priorityNode_)}static set __childrenNodeConstructor(t){VA=t}static get __childrenNodeConstructor(){return VA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Nr(t)?this:".priority"===Pr(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Pr(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,re.hu)(".priority"!==o||1===Sf(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vi(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+LA(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?s(this.value_):this.value_,this.lazyHash_=My(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,re.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(o);return(0,re.hu)(l>=0,"Unknown leaf type: "+r),(0,re.hu)(d>=0,"Unknown leaf type: "+o),l===d?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Wi=new class nR extends LI{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),l=r.compareTo(o);return 0===l?Df(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return $r.MIN}maxPost(){return new $r(Qu,new Fy("[PRIORITY-POST]",UA))}makePost(e,t){const r=$A(e);return new $r(t,new Fy("[PRIORITY-POST]",r))}toString(){return".priority"}},rR=Math.log(2);class iR{constructor(e){this.count=parseInt(Math.log(e+1)/rR,10),this.current_=this.count-1;const o=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $I=function(n,e,t,r){n.sort(e);const o=function(E,S){const U=S-E;let K,ce;if(0===U)return null;if(1===U)return K=n[E],ce=t?t(K):K,new Ju(ce,K.node,Ju.BLACK,null,null);{const Pe=parseInt(U/2,10)+E,Ye=o(E,Pe),Mt=o(Pe+1,S);return K=n[Pe],ce=t?t(K):K,new Ju(ce,K.node,Ju.BLACK,Ye,Mt)}},y=function(E){let S=null,U=null,K=n.length;const ce=function(Ye,Mt){const Lt=K-Ye,Pn=K;K-=Ye;const er=o(Lt+1,Pn),Sn=n[Lt],xn=t?t(Sn):Sn;Pe(new Ju(xn,Sn.node,Mt,null,er))},Pe=function(Ye){S?(S.left=Ye,S=Ye):(U=Ye,S=Ye)};for(let Ye=0;Ye<E.count;++Ye){const Mt=E.nextBitIsOne(),Lt=Math.pow(2,E.count-(Ye+1));Mt?ce(Lt,Ju.BLACK):(ce(Lt,Ju.BLACK),ce(Lt,Ju.RED))}return U}(new iR(n.length));return new ul(r||e,y)};let TT;const Ly={};class nh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,re.hu)(Ly&&Wi,"ChildrenNode.ts has not been loaded"),TT=TT||new nh({".priority":Ly},{".priority":Wi}),TT}get(e){const t=(0,re.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ul?t:null}hasIndex(e){return(0,re.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,re.hu)(e!==Zc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const l=t.getIterator($r.Wrap);let y,d=l.getNext();for(;d;)o=o||e.isDefinedOn(d.node),r.push(d),d=l.getNext();y=o?$I(r,e.getCompare()):Ly;const E=e.toString(),S=Object.assign({},this.indexSet_);S[E]=e;const U=Object.assign({},this.indexes_);return U[E]=y,new nh(U,S)}addToIndexes(e,t){const r=(0,re.UI)(this.indexes_,(o,l)=>{const d=(0,re.DV)(this.indexSet_,l);if((0,re.hu)(d,"Missing index implementation for "+l),o===Ly){if(d.isDefinedOn(e.node)){const y=[],E=t.getIterator($r.Wrap);let S=E.getNext();for(;S;)S.name!==e.name&&y.push(S),S=E.getNext();return y.push(e),$I(y,d.getCompare())}return Ly}{const y=t.get(e.name);let E=o;return y&&(E=E.remove(new $r(e.name,y))),E.insert(e,e.node)}});return new nh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,re.UI)(this.indexes_,o=>{if(o===Ly)return o;{const l=t.get(e.name);return l?o.remove(new $r(e.name,l)):o}});return new nh(r,this.indexSet_)}}let K0,Cr=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&BA(this.priorityNode_),this.children_.isEmpty()&&(0,re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return K0||(K0=new n(new ul(CT),null,nh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||K0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?K0:r}}getChild(t){const r=Pr(t);return null===r?this:this.getImmediateChild(r).getChild(Vi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,re.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new $r(t,r);let l,d;r.isEmpty()?(l=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(o,this.children_));const y=l.isEmpty()?K0:this.priorityNode_;return new n(l,y,d)}}updateChild(t,r){const o=Pr(t);if(null===o)return r;{(0,re.hu)(".priority"!==Pr(t)||1===Sf(t),".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(Vi(t),r);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,l=0,d=!0;if(this.forEachChild(Wi,(y,E)=>{r[y]=E.val(t),o++,d&&n.INTEGER_REGEXP_.test(y)?l=Math.max(l,Number(y)):d=!1}),!t&&d&&l<2*o){const y=[];for(const E in r)y[E]=r[E];return y}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+LA(this.getPriority().val())+":"),this.forEachChild(Wi,(r,o)=>{const l=o.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":My(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const l=this.resolveIndex_(o);if(l){const d=l.getPredecessorKey(new $r(t,r));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new $r(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new $r(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,$r.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,t)<0;)l.getNext(),d=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,$r.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,t)>0;)l.getNext(),d=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Z0?-1:0}withIndex(t){if(t===Zc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Zc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Wi),l=r.getIterator(Wi);let d=o.getNext(),y=l.getNext();for(;d&&y;){if(d.name!==y.name||!d.node.equals(y.node))return!1;d=o.getNext(),y=l.getNext()}return null===d&&null===y}return!1}return!1}}resolveIndex_(t){return t===Zc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Z0=new class sR extends Cr{constructor(){super(new ul(CT),Cr.EMPTY_NODE,nh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Cr.EMPTY_NODE}isEmpty(){return!1}};function Rs(n,e=null){if(null===n)return Cr.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,re.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Fy(n,Rs(e));if(n instanceof Array){let t=Cr.EMPTY_NODE;return i(n,(r,o)=>{if((0,re.r3)(n,r)&&"."!==r.substring(0,1)){const l=Rs(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(Rs(e))}{const t=[];let r=!1;if(i(n,(d,y)=>{if("."!==d.substring(0,1)){const E=Rs(y);E.isEmpty()||(r=r||!E.getPriority().isEmpty(),t.push(new $r(d,E)))}}),0===t.length)return Cr.EMPTY_NODE;const l=$I(t,XM,d=>d.name,CT);if(r){const d=$I(t,Wi.getCompare());return new Cr(l,Rs(e),new nh({".priority":d},{".priority":Wi}))}return new Cr(l,Rs(e),nh.Default)}}Object.defineProperties($r,{MIN:{value:new $r(Zu,Cr.EMPTY_NODE)},MAX:{value:new $r(Qu,Z0)}}),FA.__EMPTY_NODE=Cr.EMPTY_NODE,Fy.__childrenNodeConstructor=Cr,function JM(n){DT=n}(Z0),function tR(n){UA=n}(Z0),function eR(n){$A=n}(Rs);class ST extends LI{constructor(e){super(),this.indexPath_=e,(0,re.hu)(!Nr(e)&&".priority"!==Pr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),l=r.compareTo(o);return 0===l?Df(e.name,t.name):l}makePost(e,t){const r=Rs(e),o=Cr.EMPTY_NODE.updateChild(this.indexPath_,r);return new $r(t,o)}maxPost(){const e=Cr.EMPTY_NODE.updateChild(this.indexPath_,Z0);return new $r(Qu,e)}toString(){return q0(this.indexPath_,0).join("/")}}const AT=new class aR extends LI{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Df(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return $r.MIN}maxPost(){return $r.MAX}makePost(e,t){const r=Rs(e);return new $r(t,r)}toString(){return".value"}},By="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",lR=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const l=new Array(8);for(o=7;o>=0;o--)l[o]=By.charAt(t%64),t=Math.floor(t/64);(0,re.hu)(0===t,"Cannot push at time == 0");let d=l.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)d+=By.charAt(e[o]);return(0,re.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),GA=function(n){if(n===""+T)return"-";const e=O(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let d=0;d<t.length;d++)t[d]=n.charAt(d);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Qu;const l=By.charAt(By.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},WA=function(n){if(n===""+w)return Zu;const e=O(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+T:(delete t[t.length-1],t.join("")):(t[t.length-1]=By.charAt(By.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function zA(n){return{type:"value",snapshotNode:n}}function Vy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Q0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function X0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class MT{constructor(e){this.index_=e}updateChild(e,t,r,o,l,d){(0,re.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const y=e.getImmediateChild(t);return y.getChild(o).equals(r.getChild(o))&&y.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(Q0(t,y)):(0,re.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):y.isEmpty()?d.trackChildChange(Vy(t,r)):d.trackChildChange(X0(t,r,y))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Wi,(o,l)=>{t.hasChild(o)||r.trackChildChange(Q0(o,l))}),t.isLeafNode()||t.forEachChild(Wi,(o,l)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(l)||r.trackChildChange(X0(o,l,d))}else r.trackChildChange(Vy(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Cr.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class J0{constructor(e){this.indexedFilter_=new MT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=J0.getStartPost_(e),this.endPost_=J0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,l,d){return this.matches(new $r(t,r))||(r=Cr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,l,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Cr.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Cr.EMPTY_NODE);const l=this;return t.forEachChild(Wi,(d,y)=>{l.matches(new $r(d,y))||(o=o.updateImmediateChild(d,Cr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class cR{constructor(e){this.rangedFilter_=new J0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,l,d){return this.rangedFilter_.matches(new $r(t,r))||(r=Cr.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,l,d):this.fullLimitUpdateChild_(e,t,r,l,d)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Cr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;o=Cr.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const y=l.getNext();let E;if(E=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),y)<=0:this.index_.compare(y,this.rangedFilter_.getEndPost())<=0,!E)break;o=o.updateImmediateChild(y.name,y.node),d++}}else{let l,d,y,E;if(o=t.withIndex(this.index_),o=o.updatePriority(Cr.EMPTY_NODE),this.reverse_){E=o.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const K=this.index_.getCompare();y=(ce,Pe)=>K(Pe,ce)}else E=o.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),y=this.index_.getCompare();let S=0,U=!1;for(;E.hasNext();){const K=E.getNext();!U&&y(l,K)<=0&&(U=!0),U&&S<this.limit_&&y(K,d)<=0?S++:o=o.updateImmediateChild(K.name,Cr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,l){let d;if(this.reverse_){const K=this.index_.getCompare();d=(ce,Pe)=>K(Pe,ce)}else d=this.index_.getCompare();const y=e;(0,re.hu)(y.numChildren()===this.limit_,"");const E=new $r(t,r),S=this.reverse_?y.getFirstChild(this.index_):y.getLastChild(this.index_),U=this.rangedFilter_.matches(E);if(y.hasChild(t)){const K=y.getImmediateChild(t);let ce=o.getChildAfterChild(this.index_,S,this.reverse_);for(;null!=ce&&(ce.name===t||y.hasChild(ce.name));)ce=o.getChildAfterChild(this.index_,ce,this.reverse_);const Pe=null==ce?1:d(ce,E);if(U&&!r.isEmpty()&&Pe>=0)return null!=l&&l.trackChildChange(X0(t,r,K)),y.updateImmediateChild(t,r);{null!=l&&l.trackChildChange(Q0(t,K));const Mt=y.updateImmediateChild(t,Cr.EMPTY_NODE);return null!=ce&&this.rangedFilter_.matches(ce)?(null!=l&&l.trackChildChange(Vy(ce.name,ce.node)),Mt.updateImmediateChild(ce.name,ce.node)):Mt}}return r.isEmpty()?e:U&&d(S,E)>=0?(null!=l&&(l.trackChildChange(Q0(S.name,S.node)),l.trackChildChange(Vy(t,r))),y.updateImmediateChild(t,r).updateImmediateChild(S.name,Cr.EMPTY_NODE)):e}}class UI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wi}copy(){const e=new UI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function RT(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function OT(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function jI(n,e){const t=n.copy();return t.index_=e,t}function qA(n){const e={};if(n.isDefault())return e;let t;return n.index_===Wi?t="$priority":n.index_===AT?t="$value":n.index_===Zc?t="$key":((0,re.hu)(n.index_ instanceof ST,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,re.Wl)(t),n.startSet_&&(e.startAt=(0,re.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,re.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,re.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,re.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function YA(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Wi&&(e.i=n.index_.toString()),e}class HI extends AA{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=ag("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,re.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const d=HI.getListenId_(e,r),y={};this.listens_[d]=y;const E=qA(e._queryParams);this.restRequest_(l+".json",E,(S,U)=>{let K=U;if(404===S&&(K=null,S=null),null===S&&this.onDataUpdate_(l,K,!1,r),(0,re.DV)(this.listens_,d)===y){let ce;ce=S?401===S?"permission_denied":"rest_error:"+S:"ok",o(ce,null)}})}unlisten(e,t){const r=HI.getListenId_(e,t);delete this.listens_[r]}get(e){const t=qA(e._queryParams),r=e._path.toString(),o=new re.BH;return this.restRequest_(r+".json",t,(l,d)=>{let y=d;404===l&&(y=null,l=null),null===l?(this.onDataUpdate_(r,y,!1,null),o.resolve(y)):o.reject(new Error(y))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,re.xO)(t);this.log_("Sending REST request for "+d);const y=new XMLHttpRequest;y.onreadystatechange=()=>{if(r&&4===y.readyState){this.log_("REST Response for "+d+" received. status:",y.status,"response:",y.responseText);let E=null;if(y.status>=200&&y.status<300){try{E=(0,re.cI)(y.responseText)}catch(S){oa("Failed to parse JSON response for "+d+": "+y.responseText)}r(null,E)}else 401!==y.status&&404!==y.status&&oa("Got unsuccessful REST response for "+d+" Status: "+y.status),r(y.status);r=null}},y.open("GET",d,!0),y.send()})}}class mR{constructor(){this.rootNode_=Cr.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function GI(){return{value:null,children:new Map}}function $y(n,e,t){if(Nr(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Pr(e);n.children.has(r)||n.children.set(r,GI()),$y(n.children.get(r),e=Vi(e),t)}}function kT(n,e){if(Nr(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Wi,(r,o)=>{$y(n,new vi(r),o)}),kT(n,e)}}if(n.children.size>0){const t=Pr(e);return e=Vi(e),n.children.has(t)&&kT(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function PT(n,e,t){null!==n.value?t(e,n.value):function yR(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{PT(o,new vi(e.toString()+"/"+r),t)})}class _R{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&i(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class wR{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _R(e);const r=1e4+2e4*Math.random();pe(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;i(e,(o,l)=>{l>0&&(0,re.r3)(this.statsToReport_,o)&&(t[o]=l,r=!0)}),r&&this.server_.reportStats(t),pe(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var yu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(yu||(yu={})),yu))();function LT(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class WI{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=yu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Nr(this.path)){if(null!=this.affectedTree.value)return(0,re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new vi(e));return new WI(si(),t,this.revert)}}return(0,re.hu)(Pr(this.path)===e,"operationForChild called for unrelated child."),new WI(Vi(this.path),this.affectedTree,this.revert)}}class eb{constructor(e,t){this.source=e,this.path=t,this.type=yu.LISTEN_COMPLETE}operationForChild(e){return Nr(this.path)?new eb(this.source,si()):new eb(this.source,Vi(this.path))}}class pg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=yu.OVERWRITE}operationForChild(e){return Nr(this.path)?new pg(this.source,si(),this.snap.getImmediateChild(e)):new pg(this.source,Vi(this.path),this.snap)}}class Uy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=yu.MERGE}operationForChild(e){if(Nr(this.path)){const t=this.children.subtree(new vi(e));return t.isEmpty()?null:t.value?new pg(this.source,si(),t.value):new Uy(this.source,si(),t)}return(0,re.hu)(Pr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Uy(this.source,Vi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Af{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Nr(e))return this.isFullyInitialized()&&!this.filtered_;const t=Pr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ER{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tb(n,e,t,r,o,l){const d=r.filter(y=>y.type===t);d.sort((y,E)=>function DR(n,e,t){if(null==e.childName||null==t.childName)throw(0,re.g5)("Should only compare child_ events.");const r=new $r(e.childName,e.snapshotNode),o=new $r(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,y,E)),d.forEach(y=>{const E=function CR(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,y,l);o.forEach(S=>{S.respondsTo(y.type)&&e.push(S.createEvent(E,n.query_))})})}function zI(n,e){return{eventCache:n,serverCache:e}}function nb(n,e,t,r){return zI(new Af(e,t,r),n.serverCache)}function ZA(n,e,t,r){return zI(n.eventCache,new Af(e,t,r))}function qI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function gg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let BT;class zi{constructor(e,t=(()=>(BT||(BT=new ul(fA)),BT))()){this.value=e,this.children=t}static fromObject(e){let t=new zi(null);return i(e,(r,o)=>{t=t.set(new vi(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:si(),value:this.value};if(Nr(e))return null;{const r=Pr(e),o=this.children.get(r);if(null!==o){const l=o.findRootMostMatchingPathAndValue(Vi(e),t);return null!=l?{path:ys(new vi(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Nr(e))return this;{const t=Pr(e),r=this.children.get(t);return null!==r?r.subtree(Vi(e)):new zi(null)}}set(e,t){if(Nr(e))return new zi(t,this.children);{const r=Pr(e),l=(this.children.get(r)||new zi(null)).set(Vi(e),t),d=this.children.insert(r,l);return new zi(this.value,d)}}remove(e){if(Nr(e))return this.children.isEmpty()?new zi(null):new zi(null,this.children);{const t=Pr(e),r=this.children.get(t);if(r){const o=r.remove(Vi(e));let l;return l=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&l.isEmpty()?new zi(null):new zi(this.value,l)}return this}}get(e){if(Nr(e))return this.value;{const t=Pr(e),r=this.children.get(t);return r?r.get(Vi(e)):null}}setTree(e,t){if(Nr(e))return t;{const r=Pr(e),l=(this.children.get(r)||new zi(null)).setTree(Vi(e),t);let d;return d=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new zi(this.value,d)}}fold(e){return this.fold_(si(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,l)=>{r[o]=l.fold_(ys(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,si(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(Nr(e))return null;{const l=Pr(e),d=this.children.get(l);return d?d.findOnPath_(Vi(e),ys(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,si(),t)}foreachOnPath_(e,t,r){if(Nr(e))return this;{this.value&&r(t,this.value);const o=Pr(e),l=this.children.get(o);return l?l.foreachOnPath_(Vi(e),ys(t,o),r):new zi(null)}}foreach(e){this.foreach_(si(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(ys(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ec{constructor(e){this.writeTree_=e}static empty(){return new ec(new zi(null))}}function rb(n,e,t){if(Nr(e))return new ec(new zi(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let l=r.value;const d=Ga(o,e);return l=l.updateChild(d,t),new ec(n.writeTree_.set(o,l))}{const o=new zi(t),l=n.writeTree_.setTree(e,o);return new ec(l)}}}function VT(n,e,t){let r=n;return i(t,(o,l)=>{r=rb(r,ys(e,o),l)}),r}function QA(n,e){if(Nr(e))return ec.empty();{const t=n.writeTree_.setTree(e,new zi(null));return new ec(t)}}function $T(n,e){return null!=mg(n,e)}function mg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ga(t.path,e)):null}function XA(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Wi,(r,o)=>{e.push(new $r(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new $r(r,o.value))}),e}function xf(n,e){if(Nr(e))return n;{const t=mg(n,e);return new ec(null!=t?new zi(t):n.writeTree_.subtree(e))}}function UT(n){return n.writeTree_.isEmpty()}function jy(n,e){return JA(si(),n.writeTree_,e)}function JA(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,l)=>{".priority"===o?((0,re.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=JA(ys(n,o),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ys(n,".priority"),r)),t}}function YI(n,e){return ix(e,n)}function RR(n,e){if(n.snap)return mu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&mu(ys(n.path,t),e))return!0;return!1}function kR(n){return n.visible}function ex(n,e,t){let r=ec.empty();for(let o=0;o<n.length;++o){const l=n[o];if(e(l)){const d=l.path;let y;if(l.snap)mu(t,d)?(y=Ga(t,d),r=rb(r,y,l.snap)):mu(d,t)&&(y=Ga(d,t),r=rb(r,si(),l.snap.getChild(y)));else{if(!l.children)throw(0,re.g5)("WriteRecord should have .snap or .children");if(mu(t,d))y=Ga(t,d),r=VT(r,y,l.children);else if(mu(d,t))if(y=Ga(d,t),Nr(y))r=VT(r,si(),l.children);else{const E=(0,re.DV)(l.children,Pr(y));if(E){const S=E.getChild(Vi(y));r=rb(r,si(),S)}}}}}return r}function tx(n,e,t,r,o){if(r||o){const l=xf(n.visibleWrites,e);return!o&&UT(l)?t:o||null!=t||$T(l,si())?jy(ex(n.allWrites,function(S){return(S.visible||o)&&(!r||!~r.indexOf(S.writeId))&&(mu(S.path,e)||mu(e,S.path))},e),t||Cr.EMPTY_NODE):null}{const l=mg(n.visibleWrites,e);if(null!=l)return l;{const d=xf(n.visibleWrites,e);return UT(d)?t:null!=t||$T(d,si())?jy(d,t||Cr.EMPTY_NODE):null}}}function KI(n,e,t,r){return tx(n.writeTree,n.treePath,e,t,r)}function jT(n,e){return function PR(n,e,t){let r=Cr.EMPTY_NODE;const o=mg(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Wi,(l,d)=>{r=r.updateImmediateChild(l,d)}),r;if(t){const l=xf(n.visibleWrites,e);return t.forEachChild(Wi,(d,y)=>{const E=jy(xf(l,new vi(d)),y);r=r.updateImmediateChild(d,E)}),XA(l).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return XA(xf(n.visibleWrites,e)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,e)}function nx(n,e,t,r){return function NR(n,e,t,r,o){(0,re.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const l=ys(e,t);if($T(n.visibleWrites,l))return null;{const d=xf(n.visibleWrites,l);return UT(d)?o.getChild(t):jy(d,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ZI(n,e){return function LR(n,e){return mg(n.visibleWrites,e)}(n.writeTree,ys(n.treePath,e))}function HT(n,e,t){return function FR(n,e,t,r){const o=ys(e,t),l=mg(n.visibleWrites,o);return null!=l?l:r.isCompleteForChild(t)?jy(xf(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function rx(n,e){return ix(ys(n.treePath,e),n.writeTree)}function ix(n,e){return{treePath:n,writeTree:e}}class UR{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,re.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,re.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const l=o.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,X0(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,Q0(r,o.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,Vy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,re.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,X0(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const sx=new class jR{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class GT{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Af(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return HT(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:gg(this.viewCache_),l=function $R(n,e,t,r,o,l){return function BR(n,e,t,r,o,l,d){let y;const E=xf(n.visibleWrites,e),S=mg(E,si());if(null!=S)y=S;else{if(null==t)return[];y=jy(E,t)}if(y=y.withIndex(d),y.isEmpty()||y.isLeafNode())return[];{const U=[],K=d.getCompare(),ce=l?y.getReverseIteratorFrom(r,d):y.getIteratorFrom(r,d);let Pe=ce.getNext();for(;Pe&&U.length<o;)0!==K(Pe,r)&&U.push(Pe),Pe=ce.getNext();return U}}(n.writeTree,n.treePath,e,t,r,o,l)}(this.writes_,o,t,1,r,e);return 0===l.length?null:l[0]}}function ox(n,e,t,r,o,l){const d=e.eventCache;if(null!=ZI(r,t))return e;{let y,E;if(Nr(t))if((0,re.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const S=gg(e),K=jT(r,S instanceof Cr?S:Cr.EMPTY_NODE);y=n.filter.updateFullNode(e.eventCache.getNode(),K,l)}else{const S=KI(r,gg(e));y=n.filter.updateFullNode(e.eventCache.getNode(),S,l)}else{const S=Pr(t);if(".priority"===S){(0,re.hu)(1===Sf(t),"Can't have a priority with additional path components");const U=d.getNode();E=e.serverCache.getNode();const K=nx(r,t,U,E);y=null!=K?n.filter.updatePriority(U,K):d.getNode()}else{const U=Vi(t);let K;if(d.isCompleteForChild(S)){E=e.serverCache.getNode();const ce=nx(r,t,d.getNode(),E);K=null!=ce?d.getNode().getImmediateChild(S).updateChild(U,ce):d.getNode().getImmediateChild(S)}else K=HT(r,S,e.serverCache);y=null!=K?n.filter.updateChild(d.getNode(),S,K,U,o,l):d.getNode()}}return nb(e,y,d.isFullyInitialized()||Nr(t),n.filter.filtersNodes())}}function QI(n,e,t,r,o,l,d,y){const E=e.serverCache;let S;const U=d?n.filter:n.filter.getIndexedFilter();if(Nr(t))S=U.updateFullNode(E.getNode(),r,null);else if(U.filtersNodes()&&!E.isFiltered()){const Pe=E.getNode().updateChild(t,r);S=U.updateFullNode(E.getNode(),Pe,null)}else{const Pe=Pr(t);if(!E.isCompleteForPath(t)&&Sf(t)>1)return e;const Ye=Vi(t),Lt=E.getNode().getImmediateChild(Pe).updateChild(Ye,r);S=".priority"===Pe?U.updatePriority(E.getNode(),Lt):U.updateChild(E.getNode(),Pe,Lt,Ye,sx,null)}const K=ZA(e,S,E.isFullyInitialized()||Nr(t),U.filtersNodes());return ox(n,K,t,o,new GT(o,K,l),y)}function WT(n,e,t,r,o,l,d){const y=e.eventCache;let E,S;const U=new GT(o,e,l);if(Nr(t))S=n.filter.updateFullNode(e.eventCache.getNode(),r,d),E=nb(e,S,!0,n.filter.filtersNodes());else{const K=Pr(t);if(".priority"===K)S=n.filter.updatePriority(e.eventCache.getNode(),r),E=nb(e,S,y.isFullyInitialized(),y.isFiltered());else{const ce=Vi(t),Pe=y.getNode().getImmediateChild(K);let Ye;if(Nr(ce))Ye=r;else{const Mt=U.getCompleteChild(K);Ye=null!=Mt?".priority"===wT(ce)&&Mt.getChild(OA(ce)).isEmpty()?Mt:Mt.updateChild(ce,r):Cr.EMPTY_NODE}E=Pe.equals(Ye)?e:nb(e,n.filter.updateChild(y.getNode(),K,Ye,ce,U,d),y.isFullyInitialized(),n.filter.filtersNodes())}}return E}function ax(n,e){return n.eventCache.isCompleteForChild(e)}function lx(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function zT(n,e,t,r,o,l,d,y){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let S,E=e;S=Nr(t)?r:new zi(null).setTree(t,r);const U=e.serverCache.getNode();return S.children.inorderTraversal((K,ce)=>{if(U.hasChild(K)){const Ye=lx(0,e.serverCache.getNode().getImmediateChild(K),ce);E=QI(n,E,new vi(K),Ye,o,l,d,y)}}),S.children.inorderTraversal((K,ce)=>{const Pe=!e.serverCache.isCompleteForChild(K)&&null===ce.value;if(!U.hasChild(K)&&!Pe){const Mt=lx(0,e.serverCache.getNode().getImmediateChild(K),ce);E=QI(n,E,new vi(K),Mt,o,l,d,y)}}),E}class QR{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new MT(r.getIndex()),l=function dR(n){return n.loadsAllData()?new MT(n.getIndex()):n.hasLimit()?new cR(n):new J0(n)}(r);this.processor_=function HR(n){return{filter:n}}(l);const d=t.serverCache,y=t.eventCache,E=o.updateFullNode(Cr.EMPTY_NODE,d.getNode(),null),S=l.updateFullNode(Cr.EMPTY_NODE,y.getNode(),null),U=new Af(E,d.isFullyInitialized(),o.filtersNodes()),K=new Af(S,y.isFullyInitialized(),l.filtersNodes());this.viewCache_=zI(K,U),this.eventGenerator_=new ER(this.query_)}get query(){return this.query_}}function eO(n,e){const t=gg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Nr(e)&&!t.getImmediateChild(Pr(e)).isEmpty())?t.getChild(e):null}function ux(n){return 0===n.eventRegistrations_.length}function cx(n,e,t){const r=[];if(t){(0,re.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(t,o);d&&r.push(d)})}if(e){let o=[];for(let l=0;l<n.eventRegistrations_.length;++l){const d=n.eventRegistrations_[l];if(d.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(l+1));break}}else o.push(d)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function dx(n,e,t,r){e.type===yu.MERGE&&null!==e.source.queryId&&((0,re.hu)(gg(n.viewCache_),"We should always have a full cache before handling merges"),(0,re.hu)(qI(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,l=function WR(n,e,t,r,o){const l=new UR;let d,y;if(t.type===yu.OVERWRITE){const S=t;S.source.fromUser?d=WT(n,e,S.path,S.snap,r,o,l):((0,re.hu)(S.source.fromServer,"Unknown source."),y=S.source.tagged||e.serverCache.isFiltered()&&!Nr(S.path),d=QI(n,e,S.path,S.snap,r,o,y,l))}else if(t.type===yu.MERGE){const S=t;S.source.fromUser?d=function qR(n,e,t,r,o,l,d){let y=e;return r.foreach((E,S)=>{const U=ys(t,E);ax(e,Pr(U))&&(y=WT(n,y,U,S,o,l,d))}),r.foreach((E,S)=>{const U=ys(t,E);ax(e,Pr(U))||(y=WT(n,y,U,S,o,l,d))}),y}(n,e,S.path,S.children,r,o,l):((0,re.hu)(S.source.fromServer,"Unknown source."),y=S.source.tagged||e.serverCache.isFiltered(),d=zT(n,e,S.path,S.children,r,o,y,l))}else if(t.type===yu.ACK_USER_WRITE){const S=t;d=S.revert?function ZR(n,e,t,r,o,l){let d;if(null!=ZI(r,t))return e;{const y=new GT(r,e,o),E=e.eventCache.getNode();let S;if(Nr(t)||".priority"===Pr(t)){let U;if(e.serverCache.isFullyInitialized())U=KI(r,gg(e));else{const K=e.serverCache.getNode();(0,re.hu)(K instanceof Cr,"serverChildren would be complete if leaf node"),U=jT(r,K)}S=n.filter.updateFullNode(E,U,l)}else{const U=Pr(t);let K=HT(r,U,e.serverCache);null==K&&e.serverCache.isCompleteForChild(U)&&(K=E.getImmediateChild(U)),S=null!=K?n.filter.updateChild(E,U,K,Vi(t),y,l):e.eventCache.getNode().hasChild(U)?n.filter.updateChild(E,U,Cr.EMPTY_NODE,Vi(t),y,l):E,S.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=KI(r,gg(e)),d.isLeafNode()&&(S=n.filter.updateFullNode(S,d,l)))}return d=e.serverCache.isFullyInitialized()||null!=ZI(r,si()),nb(e,S,d,n.filter.filtersNodes())}}(n,e,S.path,r,o,l):function YR(n,e,t,r,o,l,d){if(null!=ZI(o,t))return e;const y=e.serverCache.isFiltered(),E=e.serverCache;if(null!=r.value){if(Nr(t)&&E.isFullyInitialized()||E.isCompleteForPath(t))return QI(n,e,t,E.getNode().getChild(t),o,l,y,d);if(Nr(t)){let S=new zi(null);return E.getNode().forEachChild(Zc,(U,K)=>{S=S.set(new vi(U),K)}),zT(n,e,t,S,o,l,y,d)}return e}{let S=new zi(null);return r.foreach((U,K)=>{const ce=ys(t,U);E.isCompleteForPath(ce)&&(S=S.set(U,E.getNode().getChild(ce)))}),zT(n,e,t,S,o,l,y,d)}}(n,e,S.path,S.affectedTree,r,o,l)}else{if(t.type!==yu.LISTEN_COMPLETE)throw(0,re.g5)("Unknown operation type: "+t.type);d=function KR(n,e,t,r,o){const l=e.serverCache;return ox(n,ZA(e,l.getNode(),l.isFullyInitialized()||Nr(t),l.isFiltered()),t,r,sx,o)}(n,e,t.path,r,l)}const E=l.getChanges();return function zR(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=qI(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(zA(qI(e)))}}(e,d,E),{viewCache:d,changes:E}}(n.processor_,o,e,t,r);return function GR(n,e){(0,re.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,re.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,re.hu)(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,hx(n,l.changes,l.viewCache.eventCache.getNode(),null)}function hx(n,e,t,r){return function IR(n,e,t,r){const o=[],l=[];return e.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(function uR(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(d.childName,d.snapshotNode))}),tb(n,o,"child_removed",e,r,t),tb(n,o,"child_added",e,r,t),tb(n,o,"child_moved",l,r,t),tb(n,o,"child_changed",e,r,t),tb(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let XI,eC;class fx{constructor(){this.views=new Map}}function qT(n,e,t,r){const o=e.source.queryId;if(null!==o){const l=n.views.get(o);return(0,re.hu)(null!=l,"SyncTree gave us an op for an invalid query."),dx(l,e,t,r)}{let l=[];for(const d of n.views.values())l=l.concat(dx(d,e,t,r));return l}}function px(n,e,t,r,o){const d=n.views.get(e._queryIdentifier);if(!d){let y=KI(t,o?r:null),E=!1;y?E=!0:r instanceof Cr?(y=jT(t,r),E=!1):(y=Cr.EMPTY_NODE,E=!1);const S=zI(new Af(y,E,!1),new Af(r,o,!1));return new QR(e,S)}return d}function gx(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Mf(n,e){let t=null;for(const r of n.views.values())t=t||eO(r,e);return t}function mx(n,e){return e._queryParams.loadsAllData()?JI(n):n.views.get(e._queryIdentifier)}function yx(n,e){return null!=mx(n,e)}function Rf(n){return null!=JI(n)}function JI(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let cO=1;class _x{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zi(null),this.pendingWriteTree_=function VR(){return{visibleWrites:ec.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function YT(n,e,t,r,o){return function SR(n,e,t,r,o){(0,re.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=rb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?Hy(n,new pg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Of(n,e,t=!1){const r=function xR(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function MR(n,e){const t=n.allWrites.findIndex(y=>y.writeId===e);(0,re.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,l=!1,d=n.allWrites.length-1;for(;o&&d>=0;){const y=n.allWrites[d];y.visible&&(d>=t&&RR(y,r.path)?o=!1:mu(r.path,y.path)&&(l=!0)),d--}return!!o&&(l?(function OR(n){n.visibleWrites=ex(n.allWrites,kR,si()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=QA(n.visibleWrites,r.path):i(r.children,E=>{n.visibleWrites=QA(n.visibleWrites,ys(r.path,E))}),!0))}(n.pendingWriteTree_,e)){let l=new zi(null);return null!=r.snap?l=l.set(si(),!0):i(r.children,d=>{l=l.set(new vi(d),!0)}),Hy(n,new WI(r.path,l,t))}return[]}function ib(n,e,t){return Hy(n,new pg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function tC(n,e,t,r,o=!1){const l=e._path,d=n.syncPointTree_.get(l);let y=[];if(d&&("default"===e._queryIdentifier||yx(d,e))){const E=function aO(n,e,t,r){const o=e._queryIdentifier,l=[];let d=[];const y=Rf(n);if("default"===o)for(const[E,S]of n.views.entries())d=d.concat(cx(S,t,r)),ux(S)&&(n.views.delete(E),S.query._queryParams.loadsAllData()||l.push(S.query));else{const E=n.views.get(o);E&&(d=d.concat(cx(E,t,r)),ux(E)&&(n.views.delete(o),E.query._queryParams.loadsAllData()||l.push(E.query)))}return y&&!Rf(n)&&l.push(new(function iO(){return(0,re.hu)(XI,"Reference.ts has not been loaded"),XI}())(e._repo,e._path)),{removed:l,events:d}}(d,e,t,r);(function sO(n){return 0===n.views.size})(d)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const S=E.removed;if(y=E.events,!o){const U=-1!==S.findIndex(ce=>ce._queryParams.loadsAllData()),K=n.syncPointTree_.findOnPath(l,(ce,Pe)=>Rf(Pe));if(U&&!K){const ce=n.syncPointTree_.subtree(l);if(!ce.isEmpty()){const Pe=function yO(n){return n.fold((e,t,r)=>{if(t&&Rf(t))return[JI(t)];{let o=[];return t&&(o=gx(t)),i(r,(l,d)=>{o=o.concat(d)}),o}})}(ce);for(let Ye=0;Ye<Pe.length;++Ye){const Mt=Pe[Ye],Lt=Mt.query,Pn=Ex(n,Mt);n.listenProvider_.startListening(ob(Lt),sb(n,Lt),Pn.hashFn,Pn.onComplete)}}}!K&&S.length>0&&!r&&(U?n.listenProvider_.stopListening(ob(e),null):S.forEach(ce=>{const Pe=n.queryToTagMap.get(rC(ce));n.listenProvider_.stopListening(ob(ce),Pe)}))}!function _O(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=rC(r),l=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(l)}}}(n,S)}return y}function vx(n,e,t,r){const o=ZT(n,r);if(null!=o){const l=QT(o),d=l.path,y=l.queryId,E=Ga(d,e);return XT(n,d,new pg(LT(y),E,t))}return[]}function KT(n,e,t,r=!1){const o=e._path;let l=null,d=!1;n.syncPointTree_.foreachOnPath(o,(ce,Pe)=>{const Ye=Ga(ce,o);l=l||Mf(Pe,Ye),d=d||Rf(Pe)});let E,y=n.syncPointTree_.get(o);y?(d=d||Rf(y),l=l||Mf(y,si())):(y=new fx,n.syncPointTree_=n.syncPointTree_.set(o,y)),null!=l?E=!0:(E=!1,l=Cr.EMPTY_NODE,n.syncPointTree_.subtree(o).foreachChild((Pe,Ye)=>{const Mt=Mf(Ye,si());Mt&&(l=l.updateImmediateChild(Pe,Mt))}));const S=yx(y,e);if(!S&&!e._queryParams.loadsAllData()){const ce=rC(e);(0,re.hu)(!n.queryToTagMap.has(ce),"View does not exist, but we have a tag");const Pe=function vO(){return cO++}();n.queryToTagMap.set(ce,Pe),n.tagToQueryMap.set(Pe,ce)}let K=function oO(n,e,t,r,o,l){const d=px(n,e,r,o,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),function tO(n,e){n.eventRegistrations_.push(e)}(d,t),function nO(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Wi,(l,d)=>{r.push(Vy(l,d))}),t.isFullyInitialized()&&r.push(zA(t.getNode())),hx(n,r,t.getNode(),e)}(d,t)}(y,e,t,YI(n.pendingWriteTree_,o),l,E);if(!S&&!d&&!r){const ce=mx(y,e);K=K.concat(function bO(n,e,t){const r=e._path,o=sb(n,e),l=Ex(n,t),d=n.listenProvider_.startListening(ob(e),o,l.hashFn,l.onComplete),y=n.syncPointTree_.subtree(r);if(o)(0,re.hu)(!Rf(y.value),"If we're adding a query, it shouldn't be shadowed");else{const E=y.fold((S,U,K)=>{if(!Nr(S)&&U&&Rf(U))return[JI(U).query];{let ce=[];return U&&(ce=ce.concat(gx(U).map(Pe=>Pe.query))),i(K,(Pe,Ye)=>{ce=ce.concat(Ye)}),ce}});for(let S=0;S<E.length;++S){const U=E[S];n.listenProvider_.stopListening(ob(U),sb(n,U))}}return d}(n,e,ce))}return K}function nC(n,e,t){const o=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(d,y)=>{const S=Mf(y,Ga(d,e));if(S)return S});return tx(o,e,l,t,!0)}function Hy(n,e){return bx(e,n.syncPointTree_,null,YI(n.pendingWriteTree_,si()))}function bx(n,e,t,r){if(Nr(n.path))return wx(n,e,t,r);{const o=e.get(si());null==t&&null!=o&&(t=Mf(o,si()));let l=[];const d=Pr(n.path),y=n.operationForChild(d),E=e.children.get(d);if(E&&y){const S=t?t.getImmediateChild(d):null,U=rx(r,d);l=l.concat(bx(y,E,S,U))}return o&&(l=l.concat(qT(o,n,r,t))),l}}function wx(n,e,t,r){const o=e.get(si());null==t&&null!=o&&(t=Mf(o,si()));let l=[];return e.children.inorderTraversal((d,y)=>{const E=t?t.getImmediateChild(d):null,S=rx(r,d),U=n.operationForChild(d);U&&(l=l.concat(wx(U,y,E,S)))}),o&&(l=l.concat(qT(o,n,r,t))),l}function Ex(n,e){const t=e.query,r=sb(n,t);return{hashFn:()=>(function XR(n){return n.viewCache_.serverCache.getNode()}(e)||Cr.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function pO(n,e,t){const r=ZT(n,t);if(r){const o=QT(r),l=o.path,d=o.queryId,y=Ga(l,e);return XT(n,l,new eb(LT(d),y))}return[]}(n,t._path,r):function fO(n,e){return Hy(n,new eb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function h(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return tC(n,t,null,l)}}}}function sb(n,e){const t=rC(e);return n.queryToTagMap.get(t)}function rC(n){return n._path.toString()+"$"+n._queryIdentifier}function ZT(n,e){return n.tagToQueryMap.get(e)}function QT(n){const e=n.indexOf("$");return(0,re.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new vi(n.substr(0,e))}}function XT(n,e,t){const r=n.syncPointTree_.get(e);return(0,re.hu)(r,"Missing sync point for query tag that we're tracking"),qT(r,t,YI(n.pendingWriteTree_,e),null)}function ob(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function uO(){return(0,re.hu)(eC,"Reference.ts has not been loaded"),eC}())(n._repo,n._path):n}class JT{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new JT(t)}node(){return this.node_}}class eS{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ys(this.path_,e);return new eS(this.syncTree_,t)}node(){return nC(this.syncTree_,this.path_)}}const Ix=function(n,e,t){return n&&"object"==typeof n?((0,re.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?EO(n[".sv"],e,t):"object"==typeof n[".sv"]?IO(n[".sv"],e):void(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},EO=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,re.hu)(!1,"Unexpected server value: "+n)},IO=function(n,e,t){n.hasOwnProperty("increment")||(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,re.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,re.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const d=o.getValue();return"number"!=typeof d?r:d+r},Cx=function(n,e,t,r){return nS(e,new eS(t,n),r)},tS=function(n,e,t){return nS(n,new JT(e),t)};function nS(n,e,t){const r=n.getPriority().val(),o=Ix(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const d=n,y=Ix(d.getValue(),e,t);return y!==d.getValue()||o!==d.getPriority().val()?new Fy(y,Rs(o)):n}{const d=n;return l=d,o!==d.getPriority().val()&&(l=l.updatePriority(new Fy(o))),d.forEachChild(Wi,(y,E)=>{const S=nS(E,e.getImmediateChild(y),t);S!==E&&(l=l.updateImmediateChild(y,S))}),l}}class rS{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function iC(n,e){let t=e instanceof vi?e:new vi(e),r=n,o=Pr(t);for(;null!==o;){const l=(0,re.DV)(r.node.children,o)||{children:{},childCount:0};r=new rS(o,r,l),t=Vi(t),o=Pr(t)}return r}function yg(n){return n.node.value}function iS(n,e){n.node.value=e,sS(n)}function Dx(n){return n.node.childCount>0}function sC(n,e){i(n.node.children,(t,r)=>{e(new rS(t,n,r))})}function Tx(n,e,t,r){t&&!r&&e(n),sC(n,o=>{Tx(o,e,!0,r)}),t&&r&&e(n)}function ab(n){return new vi(null===n.parent?n.name:ab(n.parent)+"/"+n.name)}function sS(n){null!==n.parent&&function TO(n,e,t){const r=function CO(n){return void 0===yg(n)&&!Dx(n)}(t),o=(0,re.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,sS(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,sS(n))}(n.parent,n.name,n)}const SO=/[\[\].#$\/\u0000-\u001F\u007F]/,AO=/[\[\].#$\u0000-\u001F\u007F]/,oS=10485760,oC=function(n){return"string"==typeof n&&0!==n.length&&!SO.test(n)},Sx=function(n){return"string"==typeof n&&0!==n.length&&!AO.test(n)},lb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!G0(n)||n&&"object"==typeof n&&(0,re.r3)(n,".sv")},Qc=function(n,e,t,r){r&&void 0===e||ub((0,re.gK)(n,"value"),e,t)},ub=function(n,e,t){const r=t instanceof vi?new GM(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+hg(r));if("function"==typeof e)throw new Error(n+"contains a function "+hg(r)+" with contents = "+e.toString());if(G0(e))throw new Error(n+"contains "+e.toString()+" "+hg(r));if("string"==typeof e&&e.length>oS/3&&(0,re.ug)(e)>oS)throw new Error(n+"contains a string greater than "+oS+" utf8 bytes "+hg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,l=!1;if(i(e,(d,y)=>{if(".value"===d)o=!0;else if(".priority"!==d&&".sv"!==d&&(l=!0,!oC(d)))throw new Error(n+" contains an invalid key ("+d+") "+hg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function WM(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,re.ug)(e),kA(n)})(r,d),ub(n,y,r),function zM(n){const e=n.parts_.pop();n.byteLength_-=(0,re.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&l)throw new Error(n+' contains ".value" child '+hg(r)+" in addition to actual children.")}},Ax=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,re.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];i(e,(d,y)=>{const E=new vi(d);if(ub(o,y,ys(t,E)),".priority"===wT(E)&&!lb(y))throw new Error(o+"contains an invalid value for '"+E.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(E)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=q0(r);for(let d=0;d<l.length;d++)if((".priority"!==l[d]||d!==l.length-1)&&!oC(l[d]))throw new Error(n+"contains an invalid key ("+l[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(HM);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&mu(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,l)},aS=function(n,e,t){if(!t||void 0!==e){if(G0(e))throw new Error((0,re.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lb(e))throw new Error((0,re.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cb=function(n,e,t,r){if(!(r&&void 0===t||oC(t)))throw new Error((0,re.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},db=function(n,e,t,r){if(!(r&&void 0===t||Sx(t)))throw new Error((0,re.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_u=function(n,e){if(".info"===Pr(e))throw new Error(n+" failed = Can't modify data under /.info/")},xx=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!oC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Sx(n)}(t))throw new Error((0,re.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class OO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function aC(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],l=o.getPath();null!==t&&!ET(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(o)}t&&n.eventLists_.push(t)}function Mx(n,e,t){aC(n,t),Rx(n,r=>ET(r,e))}function jl(n,e,t){aC(n,t),Rx(n,r=>mu(r,e)||mu(e,r))}function Rx(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(kO(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function kO(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();th&&bo("event: "+t.toString()),H(r)}}}const Ox="repo_interrupt";class NO{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new OO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=GI(),this.transactionQueueTree_=new rS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kx(n){const t=n.infoData_.getNode(new vi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:kx(n)})}function Px(n,e,t,r,o){n.dataUpdateCount++;const l=new vi(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(o)if(r){const E=(0,re.UI)(t,S=>Rs(S));d=function gO(n,e,t,r){const o=ZT(n,r);if(o){const l=QT(o),d=l.path,y=l.queryId,E=Ga(d,e),S=zi.fromObject(t);return XT(n,d,new Uy(LT(y),E,S))}return[]}(n.serverSyncTree_,l,E,o)}else{const E=Rs(t);d=vx(n.serverSyncTree_,l,E,o)}else if(r){const E=(0,re.UI)(t,S=>Rs(S));d=function hO(n,e,t){const r=zi.fromObject(t);return Hy(n,new Uy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,E)}else{const E=Rs(t);d=ib(n.serverSyncTree_,l,E)}let y=l;d.length>0&&(y=Wy(n,l)),jl(n.eventQueue_,y,d)}function Nx(n,e){lS(n,"connected",e),!1===e&&function $O(n){Gy(n,"onDisconnectEvents");const e=hb(n),t=GI();PT(n.onDisconnect_,si(),(o,l)=>{const d=Cx(o,l,n.serverSyncTree_,e);$y(t,o,d)});let r=[];PT(t,si(),(o,l)=>{r=r.concat(ib(n.serverSyncTree_,o,l));const d=hS(n,o);Wy(n,d)}),n.onDisconnect_=GI(),jl(n.eventQueue_,si(),r)}(n)}function lS(n,e,t){const r=new vi("/.info/"+e),o=Rs(t);n.infoData_.updateSnapshot(r,o);const l=ib(n.infoSyncTree_,r,o);jl(n.eventQueue_,r,l)}function lC(n){return n.nextWriteId_++}function uS(n,e,t,r,o){Gy(n,"set",{path:e.toString(),value:t,priority:r});const l=hb(n),d=Rs(t,r),y=nC(n.serverSyncTree_,e),E=tS(d,y,l),S=lC(n),U=YT(n.serverSyncTree_,e,E,S,!0);aC(n.eventQueue_,U),n.server_.put(e.toString(),d.val(!0),(ce,Pe)=>{const Ye="ok"===ce;Ye||oa("set at "+e+" failed: "+ce);const Mt=Of(n.serverSyncTree_,S,!Ye);jl(n.eventQueue_,e,Mt),kf(0,o,ce,Pe)});const K=hS(n,e);Wy(n,K),jl(n.eventQueue_,K,[])}function UO(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&kT(n.onDisconnect_,e),kf(0,t,r,o)})}function Fx(n,e,t,r){const o=Rs(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,d)=>{"ok"===l&&$y(n.onDisconnect_,e,o),kf(0,r,l,d)})}function cS(n,e,t){let r;r=".info"===Pr(e._path)?tC(n.infoSyncTree_,e,t):tC(n.serverSyncTree_,e,t),Mx(n.eventQueue_,e._path,r)}function Lx(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Ox)}function Gy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),bo(t,...e)}function kf(n,e,t,r){e&&H(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let l=o;r&&(l+=": "+r);const d=new Error(l);d.code=o,e(d)}})}function dS(n,e,t){return nC(n.serverSyncTree_,e,t)||Cr.EMPTY_NODE}function uC(n,e=n.transactionQueueTree_){if(e||cC(n,e),yg(e)){const t=Vx(n,e);(0,re.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function qO(n,e,t){const r=t.map(S=>S.currentWriteId),o=dS(n,e,r);let l=o;const d=o.hash();for(let S=0;S<t.length;S++){const U=t[S];(0,re.hu)(0===U.status,"tryToSendTransactionQueue_: items in queue should all be run."),U.status=1,U.retryCount++;const K=Ga(e,U.path);l=l.updateChild(K,U.currentOutputSnapshotRaw)}const y=l.val(!0),E=e;n.server_.put(E.toString(),y,S=>{Gy(n,"transaction put response",{path:E.toString(),status:S});let U=[];if("ok"===S){const K=[];for(let ce=0;ce<t.length;ce++)t[ce].status=2,U=U.concat(Of(n.serverSyncTree_,t[ce].currentWriteId)),t[ce].onComplete&&K.push(()=>t[ce].onComplete(null,!0,t[ce].currentOutputSnapshotResolved)),t[ce].unwatcher();cC(n,iC(n.transactionQueueTree_,e)),uC(n,n.transactionQueueTree_),jl(n.eventQueue_,e,U);for(let ce=0;ce<K.length;ce++)H(K[ce])}else{if("datastale"===S)for(let K=0;K<t.length;K++)t[K].status=3===t[K].status?4:0;else{oa("transaction at "+E.toString()+" failed: "+S);for(let K=0;K<t.length;K++)t[K].status=4,t[K].abortReason=S}Wy(n,e)}},d)}(n,ab(e),t)}else Dx(e)&&sC(e,t=>{uC(n,t)})}function Wy(n,e){const t=Bx(n,e),r=ab(t);return function YO(n,e,t){if(0===e.length)return;const r=[];let o=[];const d=e.filter(y=>0===y.status).map(y=>y.currentWriteId);for(let y=0;y<e.length;y++){const E=e[y],S=Ga(t,E.path);let K,U=!1;if((0,re.hu)(null!==S,"rerunTransactionsUnderNode_: relativePath should not be null."),4===E.status)U=!0,K=E.abortReason,o=o.concat(Of(n.serverSyncTree_,E.currentWriteId,!0));else if(0===E.status)if(E.retryCount>=25)U=!0,K="maxretry",o=o.concat(Of(n.serverSyncTree_,E.currentWriteId,!0));else{const ce=dS(n,E.path,d);E.currentInputSnapshot=ce;const Pe=e[y].update(ce.val());if(void 0!==Pe){ub("transaction failed: Data returned ",Pe,E.path);let Ye=Rs(Pe);"object"==typeof Pe&&null!=Pe&&(0,re.r3)(Pe,".priority")||(Ye=Ye.updatePriority(ce.getPriority()));const Lt=E.currentWriteId,Pn=hb(n),er=tS(Ye,ce,Pn);E.currentOutputSnapshotRaw=Ye,E.currentOutputSnapshotResolved=er,E.currentWriteId=lC(n),d.splice(d.indexOf(Lt),1),o=o.concat(YT(n.serverSyncTree_,E.path,er,E.currentWriteId,E.applyLocally)),o=o.concat(Of(n.serverSyncTree_,Lt,!0))}else U=!0,K="nodata",o=o.concat(Of(n.serverSyncTree_,E.currentWriteId,!0))}jl(n.eventQueue_,t,o),o=[],U&&(e[y].status=2,setTimeout(e[y].unwatcher,Math.floor(0)),e[y].onComplete&&r.push("nodata"===K?()=>e[y].onComplete(null,!1,e[y].currentInputSnapshot):()=>e[y].onComplete(new Error(K),!1,null)))}cC(n,n.transactionQueueTree_);for(let y=0;y<r.length;y++)H(r[y]);uC(n,n.transactionQueueTree_)}(n,Vx(n,t),r),r}function Bx(n,e){let t,r=n.transactionQueueTree_;for(t=Pr(e);null!==t&&void 0===yg(r);)r=iC(r,t),t=Pr(e=Vi(e));return r}function Vx(n,e){const t=[];return $x(n,e,t),t.sort((r,o)=>r.order-o.order),t}function $x(n,e,t){const r=yg(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);sC(e,o=>{$x(n,o,t)})}function cC(n,e){const t=yg(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,iS(e,t.length>0?t:void 0)}sC(e,r=>{cC(n,r)})}function hS(n,e){const t=ab(Bx(n,e)),r=iC(n.transactionQueueTree_,e);return function DO(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{fS(n,o)}),fS(n,r),Tx(r,o=>{fS(n,o)}),t}function fS(n,e){const t=yg(e);if(t){const r=[];let o=[],l=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?((0,re.hu)(l===d-1,"All SENT items should be at beginning of queue."),l=d,t[d].status=3,t[d].abortReason="set"):((0,re.hu)(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),o=o.concat(Of(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===l?iS(e,void 0):t.length=l+1,jl(n.eventQueue_,ab(e),o);for(let d=0;d<r.length;d++)H(r[d])}}const pS=function(n,e){const t=QO(n),r=t.namespace;return"firebase.com"===t.domain&&Ku(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ku("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&oa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lg(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new vi(t.pathString)}},QO=function(n){let e="",t="",r="",o="",l="",d=!0,y="https",E=443;if("string"==typeof n){let S=n.indexOf("//");S>=0&&(y=n.substring(0,S-1),n=n.substring(S+2));let U=n.indexOf("/");-1===U&&(U=n.length);let K=n.indexOf("?");-1===K&&(K=n.length),e=n.substring(0,Math.min(U,K)),U<K&&(o=function KO(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(l){}e+="/"+o}return e}(n.substring(U,K)));const ce=function ZO(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):oa(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,K)));S=e.indexOf(":"),S>=0?(d="https"===y||"wss"===y,E=parseInt(e.substring(S+1),10)):S=e.length;const Pe=e.slice(0,S);if("localhost"===Pe.toLowerCase())t="localhost";else if(Pe.split(".").length<=2)t=Pe;else{const Ye=e.indexOf(".");r=e.substring(0,Ye).toLowerCase(),t=e.substring(Ye+1),l=r}"ns"in ce&&(l=ce.ns)}return{host:e,port:E,domain:t,subdomain:r,secure:d,scheme:y,pathString:o,namespace:l}};class Ux{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,re.Wl)(this.snapshot.exportVal())}}class jx{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class gS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Hx{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new re.BH;return UO(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_u("OnDisconnect.remove",this._path);const e=new re.BH;return Fx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_u("OnDisconnect.set",this._path),Qc("OnDisconnect.set",e,this._path,!1);const t=new re.BH;return Fx(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_u("OnDisconnect.setWithPriority",this._path),Qc("OnDisconnect.setWithPriority",e,this._path,!1),aS("OnDisconnect.setWithPriority",t,!1);const r=new re.BH;return function jO(n,e,t,r,o){const l=Rs(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(d,y)=>{"ok"===d&&$y(n.onDisconnect_,e,l),kf(0,o,d,y)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_u("OnDisconnect.update",this._path),Ax("OnDisconnect.update",e,this._path,!1);const t=new re.BH;return function HO(n,e,t,r){if((0,re.xb)(t))return bo("onDisconnect().update() called with empty data.  Don't do anything."),void kf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,l)=>{"ok"===o&&i(t,(d,y)=>{const E=Rs(y);$y(n.onDisconnect_,ys(e,d),E)}),kf(0,r,o,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class cl{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return Nr(this._path)?null:wT(this._path)}get ref(){return new vu(this._repo,this._path)}get _queryIdentifier(){const e=YA(this._queryParams),t=PI(e);return"{}"===t?"default":t}get _queryObject(){return YA(this._queryParams)}isEqual(e){if(!((e=(0,re.m9)(e))instanceof cl))return!1;const t=this._repo===e._repo,r=ET(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function jM(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function dC(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Pf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Zc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Zu)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==Qu)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===Wi){if(null!=e&&!lb(e)||null!=t&&!lb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,re.hu)(n.getIndex()instanceof ST||n.getIndex()===AT,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function hC(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vu extends cl{constructor(e,t){super(e,t,new UI,!1)}get parent(){const e=OA(this._path);return null===e?null:new vu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class _g{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new vi(e),r=vg(this.ref,e);return new _g(this._node.getChild(t),r,Wi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new _g(o,vg(this.ref,r),Wi)))}hasChild(e){const t=new vi(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Gx(n,e){return(n=(0,re.m9)(n))._checkNotDeleted("ref"),void 0!==e?vg(n._root,e):n._root}function Wx(n,e){(n=(0,re.m9)(n))._checkNotDeleted("refFromURL");const t=pS(e,n._repo.repoInfo_.nodeAdmin);xx("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ku("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Gx(n,t.path.toString())}function vg(n,e){return null===Pr((n=(0,re.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),db("child","path",t,!1)):db("child","path",e,!1),new vu(n._repo,ys(n._path,e));var t}function mS(n,e){n=(0,re.m9)(n),_u("set",n._path),Qc("set",e,n._path,!1);const t=new re.BH;return uS(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function nk(n,e){Ax("update",e,n._path,!1);const t=new re.BH;return function VO(n,e,t,r){Gy(n,"update",{path:e.toString(),value:t});let o=!0;const l=hb(n),d={};if(i(t,(y,E)=>{o=!1,d[y]=Cx(ys(e,y),Rs(E),n.serverSyncTree_,l)}),o)bo("update() called with empty data.  Don't do anything."),kf(0,r,"ok",void 0);else{const y=lC(n),E=function dO(n,e,t,r){!function AR(n,e,t,r){(0,re.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=VT(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=zi.fromObject(t);return Hy(n,new Uy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,d,y);aC(n.eventQueue_,E),n.server_.merge(e.toString(),t,(S,U)=>{const K="ok"===S;K||oa("update at "+e+" failed: "+S);const ce=Of(n.serverSyncTree_,y,!K),Pe=ce.length>0?Wy(n,e):e;jl(n.eventQueue_,Pe,ce),kf(0,r,S,U)}),i(t,S=>{const U=hS(n,ys(e,S));Wy(n,U)}),jl(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function rk(n){n=(0,re.m9)(n);const e=new gS(()=>{}),t=new fb(e);return function BO(n,e,t){const r=function mO(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(S,U)=>{const K=Ga(S,t);r=r||Mf(U,K)});let o=n.syncPointTree_.get(t);o?r=r||Mf(o,si()):(o=new fx,n.syncPointTree_=n.syncPointTree_.set(t,o));const l=null!=r,d=l?new Af(r,!0,!1):null;return function JR(n){return qI(n.viewCache_)}(px(o,e,YI(n.pendingWriteTree_,e._path),l?d.getNode():Cr.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(o=>{const l=Rs(o).withIndex(e._queryParams.getIndex());let d;if(KT(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())d=ib(n.serverSyncTree_,e._path,l);else{const y=sb(n.serverSyncTree_,e);d=vx(n.serverSyncTree_,e._path,l,y)}return jl(n.eventQueue_,e._path,d),tC(n.serverSyncTree_,e,t,null,!0),l},o=>(Gy(n,"get for query "+(0,re.Wl)(e)+" failed: "+o),Promise.reject(new Error(o))))}(n._repo,n,t).then(r=>new _g(r,new vu(n._repo,n._path),n._queryParams.getIndex()))}class fb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Ux("value",this,new _g(e.snapshotNode,new vu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new jx(this,e,t):null}matches(e){return e instanceof fb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class fC{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new jx(this,e,t):null}createEvent(e,t){(0,re.hu)(null!=e.childName,"Child events should have a childName.");const r=vg(new vu(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new Ux(e.type,this,new _g(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof fC&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function pb(n,e,t,r,o){let l;if("object"==typeof r&&(l=void 0,o=r),"function"==typeof r&&(l=r),o&&o.onlyOnce){const E=t,S=(U,K)=>{cS(n._repo,n,y),E(U,K)};S.userCallback=t.userCallback,S.context=t.context,t=S}const d=new gS(t,l||void 0),y="value"===e?new fb(d):new fC(e,d);return function GO(n,e,t){let r;r=".info"===Pr(e._path)?KT(n.infoSyncTree_,e,t):KT(n.serverSyncTree_,e,t),Mx(n.eventQueue_,e._path,r)}(n._repo,n,y),()=>cS(n._repo,n,y)}function yS(n,e,t,r){return pb(n,"value",e,t,r)}function zx(n,e,t,r){return pb(n,"child_added",e,t,r)}function qx(n,e,t,r){return pb(n,"child_changed",e,t,r)}function Yx(n,e,t,r){return pb(n,"child_moved",e,t,r)}function Kx(n,e,t,r){return pb(n,"child_removed",e,t,r)}function Zx(n,e,t){let r=null;const o=t?new gS(t):null;"value"===e?r=new fb(o):e&&(r=new fC(e,o)),cS(n._repo,n,r)}class tc{}class Qx extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qc("endAt",this._value,e._path,!0);const t=OT(e._queryParams,this._value,this._key);if(hC(t),Pf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cl(e._repo,e._path,t,e._orderByCalled)}}class sk extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qc("endBefore",this._value,e._path,!1);const t=function gR(n,e,t){let r,o;return n.index_===Zc?("string"==typeof e&&(e=WA(e)),o=OT(n,e,t)):(r=null==t?Zu:WA(t),o=OT(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(hC(t),Pf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cl(e._repo,e._path,t,e._orderByCalled)}}class Xx extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qc("startAt",this._value,e._path,!0);const t=RT(e._queryParams,this._value,this._key);if(hC(t),Pf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new cl(e._repo,e._path,t,e._orderByCalled)}}class lk extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qc("startAfter",this._value,e._path,!1);const t=function pR(n,e,t){let r;if(n.index_===Zc)"string"==typeof e&&(e=GA(e)),r=RT(n,e,t);else{let o;o=null==t?Qu:GA(t),r=RT(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(hC(t),Pf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new cl(e._repo,e._path,t,e._orderByCalled)}}class ck extends tc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new cl(e._repo,e._path,function hR(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class hk extends tc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new cl(e._repo,e._path,function fR(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class pk extends tc{constructor(e){super(),this._path=e}_apply(e){dC(e,"orderByChild");const t=new vi(this._path);if(Nr(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ST(t),o=jI(e._queryParams,r);return Pf(o),new cl(e._repo,e._path,o,!0)}}class mk extends tc{_apply(e){dC(e,"orderByKey");const t=jI(e._queryParams,Zc);return Pf(t),new cl(e._repo,e._path,t,!0)}}class _k extends tc{_apply(e){dC(e,"orderByPriority");const t=jI(e._queryParams,Wi);return Pf(t),new cl(e._repo,e._path,t,!0)}}class bk extends tc{_apply(e){dC(e,"orderByValue");const t=jI(e._queryParams,AT);return Pf(t),new cl(e._repo,e._path,t,!0)}}class Ek extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Qc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qx(this._value,this._key)._apply(new Xx(this._value,this._key)._apply(e))}}function nc(n,...e){let t=(0,re.m9)(n);for(const r of e)t=r._apply(t);return t}(function rO(n){(0,re.hu)(!XI,"__referenceConstructor has already been defined"),XI=n})(vu),function lO(n){(0,re.hu)(!eC,"__referenceConstructor has already been defined"),eC=n}(vu);const _S={};function eM(n,e,t,r,o){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Ku("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bo("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let E,S,d=pS(l,o),y=d.repoInfo;"undefined"!=typeof process&&process.env&&(S=process.env.FIREBASE_DATABASE_EMULATOR_HOST),S?(E=!0,l=`http://${S}?ns=${y.namespace}`,d=pS(l,o),y=d.repoInfo):E=!d.repoInfo.secure;const U=o&&E?new xt(xt.OWNER):new ft(n.name,n.options,e);xx("Invalid Firebase Database URL",d),Nr(d.path)||Ku("Database URL must point to the root of a Firebase Database (not including a child path).");const K=function Sk(n,e,t,r){let o=_S[e.name];o||(o={},_S[e.name]=o);let l=o[n.toURLString()];return l&&Ku("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new NO(n,false,t,r),o[n.toURLString()]=l,l}(y,n,U,new Ue(n.name,t));return new xk(K,n)}class xk{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function FO(n,e,t){if(n.stats_=dg(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new HI(n.repoInfo_,(r,o,l,d)=>{Px(n,r,o,l,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Nx(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,re.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new fg(n.repoInfo_,e,(r,o,l,d)=>{Px(n,r,o,l,d)},r=>{Nx(n,r)},r=>{!function LO(n,e){i(e,(t,r)=>{lS(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function bM(n,e){const t=n.toString();return cg[t]||(cg[t]=e()),cg[t]}(n.repoInfo_,()=>new wR(n.stats_,n.server_)),n.infoData_=new mR,n.infoSyncTree_=new _x({startListening:(r,o,l,d)=>{let y=[];const E=n.infoData_.getNode(r._path);return E.isEmpty()||(y=ib(n.infoSyncTree_,r._path,E),setTimeout(()=>{d("ok")},0)),y},stopListening:()=>{}}),lS(n,"connected",!1),n.serverSyncTree_=new _x({startListening:(r,o,l,d)=>(n.server_.listen(r,l,o,(y,E)=>{const S=d(y,E);jl(n.eventQueue_,r._path,S)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vu(this._repo,si())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Tk(n,e){const t=_S[e];(!t||t[n.key]!==n)&&Ku(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Lx(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ku("Cannot call "+e+" on a deleted database.")}}function tM(){bA.IS_TRANSPORT_INITIALIZED&&oa("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Mk(){tM(),Tf.forceDisallow()}function Rk(){tM(),Ny.forceDisallow(),Tf.forceAllow()}function Pk(n,e){yT(n,e)}const Fk={".sv":"timestamp"};class Vk{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}fg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},fg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Nk(n){U0(bn.SDK_VERSION),(0,bn._registerComponent)(new Fn.wA("database",(e,{instanceIdentifier:t})=>eM(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,bn.registerVersion)(MI,"0.13.9",n),(0,bn.registerVersion)(MI,"0.13.9","esm2017")}();const Hk=new Qn.Yd("@firebase/database-compat"),rM=function(n){Hk.warn("FIREBASE WARNING: "+n)};class zk{constructor(e){this._delegate=e}cancel(e){(0,re.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,re.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,re.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,re.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,re.Dv)("OnDisconnect.set",1,2,arguments.length),(0,re.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,re.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,re.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),l=>r(l)),o}update(e,t){if((0,re.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,rM("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,re.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class qk{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,re.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Nf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,re.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,re.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,re.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,re.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,re.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),db("DataSnapshot.child","path",e,!1),new Nf(this._database,this._delegate.child(e))}hasChild(e){return(0,re.Dv)("DataSnapshot.hasChild",1,1,arguments.length),db("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,re.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,re.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,re.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Nf(this._database,t)))}hasChildren(){return(0,re.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,re.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,re.Dv)("DataSnapshot.ref",0,0,arguments.length),new Hl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class aa{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var l;(0,re.Dv)("Query.on",2,4,arguments.length),(0,re.Wj)("Query.on","callback",t,!1);const d=aa.getCancelAndContextArgs_("Query.on",r,o),y=(S,U)=>{t.call(d.context,new Nf(this.database,S),U)};y.userCallback=t,y.context=d.context;const E=null===(l=d.cancel)||void 0===l?void 0:l.bind(d.context);switch(e){case"value":return yS(this._delegate,y,E),t;case"child_added":return zx(this._delegate,y,E),t;case"child_removed":return Kx(this._delegate,y,E),t;case"child_changed":return qx(this._delegate,y,E),t;case"child_moved":return Yx(this._delegate,y,E),t;default:throw new Error((0,re.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,re.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,re.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,re.Wj)("Query.off","callback",t,!0),(0,re.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,Zx(this._delegate,e,o)}else Zx(this._delegate,e)}get(){return rk(this._delegate).then(e=>new Nf(this.database,e))}once(e,t,r,o){(0,re.Dv)("Query.once",1,4,arguments.length),(0,re.Wj)("Query.once","callback",t,!0);const l=aa.getCancelAndContextArgs_("Query.once",r,o),d=new re.BH,y=(S,U)=>{const K=new Nf(this.database,S);t&&t.call(l.context,K,U),d.resolve(K)};y.userCallback=t,y.context=l.context;const E=S=>{l.cancel&&l.cancel.call(l.context,S),d.reject(S)};switch(e){case"value":yS(this._delegate,y,E,{onlyOnce:!0});break;case"child_added":zx(this._delegate,y,E,{onlyOnce:!0});break;case"child_removed":Kx(this._delegate,y,E,{onlyOnce:!0});break;case"child_changed":qx(this._delegate,y,E,{onlyOnce:!0});break;case"child_moved":Yx(this._delegate,y,E,{onlyOnce:!0});break;default:throw new Error((0,re.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return(0,re.Dv)("Query.limitToFirst",1,1,arguments.length),new aa(this.database,nc(this._delegate,function dk(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ck(n)}(e)))}limitToLast(e){return(0,re.Dv)("Query.limitToLast",1,1,arguments.length),new aa(this.database,nc(this._delegate,function fk(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new hk(n)}(e)))}orderByChild(e){return(0,re.Dv)("Query.orderByChild",1,1,arguments.length),new aa(this.database,nc(this._delegate,function gk(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return db("orderByChild","path",n,!1),new pk(n)}(e)))}orderByKey(){return(0,re.Dv)("Query.orderByKey",0,0,arguments.length),new aa(this.database,nc(this._delegate,function yk(){return new mk}()))}orderByPriority(){return(0,re.Dv)("Query.orderByPriority",0,0,arguments.length),new aa(this.database,nc(this._delegate,function vk(){return new _k}()))}orderByValue(){return(0,re.Dv)("Query.orderByValue",0,0,arguments.length),new aa(this.database,nc(this._delegate,function wk(){return new bk}()))}startAt(e=null,t){return(0,re.Dv)("Query.startAt",0,2,arguments.length),new aa(this.database,nc(this._delegate,function ak(n=null,e){return cb("startAt","key",e,!0),new Xx(n,e)}(e,t)))}startAfter(e=null,t){return(0,re.Dv)("Query.startAfter",0,2,arguments.length),new aa(this.database,nc(this._delegate,function uk(n,e){return cb("startAfter","key",e,!0),new lk(n,e)}(e,t)))}endAt(e=null,t){return(0,re.Dv)("Query.endAt",0,2,arguments.length),new aa(this.database,nc(this._delegate,function ik(n,e){return cb("endAt","key",e,!0),new Qx(n,e)}(e,t)))}endBefore(e=null,t){return(0,re.Dv)("Query.endBefore",0,2,arguments.length),new aa(this.database,nc(this._delegate,function ok(n,e){return cb("endBefore","key",e,!0),new sk(n,e)}(e,t)))}equalTo(e,t){return(0,re.Dv)("Query.equalTo",1,2,arguments.length),new aa(this.database,nc(this._delegate,function Ik(n,e){return cb("equalTo","key",e,!0),new Ek(n,e)}(e,t)))}toString(){return(0,re.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,re.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,re.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof aa))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,re.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,re.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,re.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new Hl(this.database,new vu(this._delegate._repo,this._delegate._path))}}class Hl extends aa{constructor(e,t){super(e,new cl(t._repo,t._path,new UI,!1)),this.database=e,this._delegate=t}getKey(){return(0,re.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,re.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Hl(this.database,vg(this._delegate,e))}getParent(){(0,re.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Hl(this.database,e):null}getRoot(){return(0,re.Dv)("Reference.root",0,0,arguments.length),new Hl(this.database,this._delegate.root)}set(e,t){(0,re.Dv)("Reference.set",1,2,arguments.length),(0,re.Wj)("Reference.set","onComplete",t,!0);const r=mS(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,re.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,rM("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_u("Reference.update",this._delegate._path),(0,re.Wj)("Reference.update","onComplete",t,!0);const r=nk(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,re.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,re.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function tk(n,e,t){if(_u("setWithPriority",n._path),Qc("setWithPriority",e,n._path,!1),aS("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new re.BH;return uS(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),l=>r(l)),o}remove(e){(0,re.Dv)("Reference.remove",0,1,arguments.length),(0,re.Wj)("Reference.remove","onComplete",e,!0);const t=function JO(n){return _u("remove",n._path),mS(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,re.Dv)("Reference.transaction",1,3,arguments.length),(0,re.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,re.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,re.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function $k(n,e,t){var r;if(n=(0,re.m9)(n),_u("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,l=new re.BH,y=yS(n,()=>{});return function zO(n,e,t,r,o,l){Gy(n,"transaction on "+e);const d={path:e,update:t,onComplete:r,status:null,order:j0(),applyLocally:l,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},y=dS(n,e,void 0);d.currentInputSnapshot=y;const E=d.update(y.val());if(void 0===E)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{ub("transaction failed: Data returned ",E,d.path),d.status=0;const S=iC(n.transactionQueueTree_,e),U=yg(S)||[];let K;U.push(d),iS(S,U),"object"==typeof E&&null!==E&&(0,re.r3)(E,".priority")?(K=(0,re.DV)(E,".priority"),(0,re.hu)(lb(K),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):K=(nC(n.serverSyncTree_,e)||Cr.EMPTY_NODE).getPriority().val();const ce=hb(n),Pe=Rs(E,K),Ye=tS(Pe,y,ce);d.currentOutputSnapshotRaw=Pe,d.currentOutputSnapshotResolved=Ye,d.currentWriteId=lC(n);const Mt=YT(n.serverSyncTree_,e,Ye,d.currentWriteId,d.applyLocally);jl(n.eventQueue_,e,Mt),uC(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(E,S,U)=>{let K=null;E?l.reject(E):(K=new _g(U,new vu(n._repo,n._path),Wi),l.resolve(new Vk(S,K)))},y,o),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new qk(l.committed,new Nf(this.database,l.snapshot)));return t&&o.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),o}setPriority(e,t){(0,re.Dv)("Reference.setPriority",1,2,arguments.length),(0,re.Wj)("Reference.setPriority","onComplete",t,!0);const r=function ek(n,e){n=(0,re.m9)(n),_u("setPriority",n._path),aS("setPriority",e,!1);const t=new re.BH;return uS(n._repo,ys(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,re.Dv)("Reference.push",0,2,arguments.length),(0,re.Wj)("Reference.push","onComplete",t,!0);const r=function XO(n,e){n=(0,re.m9)(n),_u("push",n._path),Qc("push",e,n._path,!0);const t=kx(n._repo),r=lR(t),o=vg(n,r),l=vg(n,r);let d;return d=null!=e?mS(l,e).then(()=>l):Promise.resolve(l),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}(this._delegate,e),o=r.then(d=>new Hl(this.database,d));t&&o.then(()=>t(null),d=>t(d));const l=new Hl(this.database,r);return l.then=o.then.bind(o),l.catch=o.catch.bind(o,void 0),l}onDisconnect(){return _u("Reference.onDisconnect",this._delegate._path),new zk(new Hx(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class gb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Mk,forceLongPolling:Rk}}useEmulator(e,t,r={}){!function nM(n,e,t,r={}){(n=(0,re.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ku("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Ku('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new xt(xt.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,re.Sg)(r.mockUserToken,n.app.options.projectId);l=new xt(d)}!function Dk(n,e,t,r){n.repoInfo_=new lg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,re.Dv)("database.ref",0,1,arguments.length),e instanceof Hl){const t=Wx(this._delegate,e.toString());return new Hl(this,t)}{const t=Gx(this._delegate,e);return new Hl(this,t)}}refFromURL(e){(0,re.Dv)("database.refFromURL",1,1,arguments.length);const r=Wx(this._delegate,e);return new Hl(this,r)}goOffline(){return(0,re.Dv)("database.goOffline",0,0,arguments.length),function Ok(n){(n=(0,re.m9)(n))._checkNotDeleted("goOffline"),Lx(n._repo)}(this._delegate)}goOnline(){return(0,re.Dv)("database.goOnline",0,0,arguments.length),function kk(n){(n=(0,re.m9)(n))._checkNotDeleted("goOnline"),function WO(n){n.persistentConnection_&&n.persistentConnection_.resume(Ox)}(n._repo)}(this._delegate)}}gb.ServerValue={TIMESTAMP:function Lk(){return Fk}(),increment:n=>function Bk(n){return{".sv":{increment:n}}}(n)};var Kk=Object.freeze({__proto__:null,initStandalone:function Yk({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:l=!1}){U0(t);const d=new Fn.zt("auth-internal",new Fn.H0("database-standalone"));return d.setComponent(new Fn.wA("auth-internal",()=>r,"PRIVATE")),{instance:new gb(eM(n,d,void 0,e,l),n),namespace:o}}});const Zk=gb.ServerValue;function iM(n){return null==n}function sM(n){return"function"==typeof n.set}function oM(n,e){return sM(e)?e:n.ref(e)}function aM(n,e){if(function Xk(n){return"string"==typeof n}(n))return e.stringCase();if(sM(n))return e.firebaseCase();if(function Jk(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function mb(n,e,t="on",r=Cs.z){return new se.y(o=>{let l=null;return l=n[t](e,(d,y)=>{r.schedule(()=>{o.next({snapshot:d,prevKey:y})}),"once"===t&&r.schedule(()=>o.complete())},d=>{r.schedule(()=>o.error(d))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,Le.U)(o=>{const{snapshot:l,prevKey:d}=o;let y=null;return l.exists()&&(y=l.key),{type:e,payload:l,prevKey:d,key:y}}),(0,$0.B)())}function lM(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function n1(n,e){const{payload:t,prevKey:r,key:o}=e,l=lM(n,o),d=function t1(n,e){if(iM(e))return 0;{const t=lM(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let y=null;e.payload.forEach(E=>{const S={payload:E,type:"value",prevKey:y,key:E.key};return y=E.key,n=[...n,S],!1})}return n;case"child_added":if(l>-1){const y=n[l-1];(y&&y.key||null)!==r&&(n=n.filter(E=>E.payload.key!==t.key)).splice(d,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(d,0,e)}return n;case"child_removed":return n.filter(y=>y.payload.key!==t.key);case"child_changed":return n.map(y=>y.payload.key===o?e:y);case"child_moved":if(l>-1){const y=n.splice(l,1)[0];return(n=n.slice()).splice(d,0,y),n}return n;default:return n}}function uM(n){return(iM(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function cM(n,e,t){return function e1(n,e,t){return mb(n,"value","once",t).pipe((0,$e.w)(r=>{const o=[(0,te.of)(r)];return e.forEach(l=>o.push(mb(n,l,"on",t))),(0,ge.T)(...o).pipe((0,Uo.R)(n1,[]))}),(0,Ja.x)())}(n,e=uM(e),t)}function dM(n,e,t){const r=(e=uM(e)).map(o=>mb(n,o,"on",t));return(0,ge.T)(...r)}function hM(n,e){return function(r,o){return aM(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function o1(n){return function(t){return t?aM(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function fM(n,e){return function(){return mb(n,"value","on",e)}}!function Qk(n){n.INTERNAL.registerComponent(new Fn.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new gb(o,r)},"PUBLIC").setServiceProps({Reference:Hl,Query:aa,Database:gb,DataSnapshot:Nf,enableLogging:Pk,INTERNAL:Kk,ServerValue:Zk}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.9")}(Ps.Z);const u1=new W.OlP("angularfire2.realtimeDatabaseURL"),c1=new W.OlP("angularfire2.database.use-emulator");let d1=(()=>{class n{constructor(t,r,o,l,d,y,E,S,U,K,ce,Pe,Ye,Mt,Lt){this.schedulers=y;const Pn=E,er=(0,oe.on)(t,d,r);S&&Hi(er,d,U,ce,Pe,Ye,K,Mt),this.database=(0,oe.cc)(`${er.name}.database.${o}`,"AngularFireDatabase",er.name,()=>{const Sn=d.runOutsideAngular(()=>er.database(o||void 0));return Pn&&Sn.useEmulator(...Pn),Sn},[Pn])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>oM(this.database,t));let l=o;return r&&(l=r(o)),function a1(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:hM(r,"update"),set:hM(r,"set"),push:o=>r.push(o),remove:o1(r),snapshotChanges:o=>cM(n,o,t).pipe(ie.iC),stateChanges:o=>dM(n,o,t).pipe(ie.iC),auditTrail:o=>function r1(n,e,t){return function s1(n,e,t){return function i1(n,e){return mb(n,"value","on",e).pipe((0,Le.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function lA(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new uA(n,t))}}(e),(0,Le.U)(([o,l])=>{const d=o.lastKeyToLoad,y=l.map(E=>E.key);return{actions:l,lastKeyToLoad:d,loadedKeys:y}}),function xI(n){return e=>e.lift(new fT(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,Le.U)(o=>o.actions))}(n,dM(n,e).pipe((0,Uo.R)((o,l)=>[...o,l],[])),t)}(n,o,t).pipe(ie.iC),valueChanges:(o,l)=>cM(n,o,t).pipe((0,Le.U)(y=>y.map(E=>l&&l.idField?Object.assign(Object.assign({},E.payload.val()),{[l.idField]:E.key}):E.payload.val())),ie.iC)}}(l,this)}object(t){return function l1(n,e){return{query:n,snapshotChanges:()=>fM(n,e.schedulers.outsideAngular)().pipe(ie.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>fM(n,e.schedulers.outsideAngular)().pipe(ie.iC,(0,Le.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>oM(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(W.LFG(oe.Dh),W.LFG(oe.xv,8),W.LFG(u1,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(ie.HU),W.LFG(c1,8),W.LFG(Yr,8),W.LFG(Co,8),W.LFG(pi,8),W.LFG(Oi,8),W.LFG(Es,8),W.LFG(Mr,8),W.LFG(Is,8),W.LFG(Mi,8))},n.\u0275prov=W.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),h1=(()=>{class n{constructor(){ai.Z.registerVersion("angularfire",ie.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=W.oAB({type:n}),n.\u0275inj=W.cJS({providers:[d1]}),n})();const pM_firebaseConfig={apiKey:"AIzaSyC4FrUcx8K-_kDRxyIklBGCgc8VzvtVqJM",authDomain:"portfolio-f0d20.firebaseapp.com",projectId:"portfolio-f0d20",storageBucket:"portfolio-f0d20.appspot.com",messagingSenderId:"717137529651",appId:"1:717137529651:web:16018c13023e89ba2b8c46"};var f1=$(2279);let p1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=W.oAB({type:n,bootstrap:[Ae]}),n.\u0275inj=W.cJS({providers:[{provide:ve.S$,useClass:ve.Do}],imports:[u.b2,j.Pc.forRoot(),he,oe.hO.initializeApp(pM_firebaseConfig),Ei,V0,hn,h1,f1.m]}),n})();(0,W.G48)(),u.q6().bootstrapModule(p1).catch(n=>console.log(n))},5867:($t,ze,$)=>{"use strict";$.d(ze,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=$(9681);(0,u.registerVersion)("firebase","9.12.1","app")},127:($t,ze,$)=>{"use strict";$.d(ze,{Z:()=>u.Z});var u=$(3942);u.Z.registerVersion("firebase","9.12.1","app-compat")},9545:($t,ze,$)=>{"use strict";$.r(ze);var u=$(5861),W=$(3942),j=$(2090),Ae=$(9681),Te=$(1877),ae=$(655),he=$(4859);const $e=function ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ie=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new Te.Yd("@firebase/auth");function Ke(b,...f){Qe.logLevel<=Te.in.ERROR&&Qe.error(`Auth (${Ae.SDK_VERSION}): ${b}`,...f)}function ut(b,...f){throw et(b,...f)}function ot(b,...f){return et(b,...f)}function Ct(b,f,m){const D=Object.assign(Object.assign({},Le()),{[f]:m});return new j.LL("auth","Firebase",D).create(f,{appName:b.name})}function ke(b,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&ut(b,"argument-error"),Ct(b,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(b,...f){if("string"!=typeof b){const m=f[0],D=[...f.slice(1)];return D[0]&&(D[0].appName=b.name),b._errorFactory.create(m,...D)}return Ie.create(b,...f)}function fe(b,f,...m){if(!b)throw et(f,...m)}function je(b){const f="INTERNAL ASSERTION FAILED: "+b;throw Ke(f),new Error(f)}function de(b,f){b||je(f)}const ie=new Map;function ve(b){de(b instanceof Function,"Expected a class definition");let f=ie.get(b);return f?(de(f instanceof b,"Instance stored in cache mismatched with class"),f):(f=new b,ie.set(b,f),f)}function wt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function kt(){return"http:"===ht()||"https:"===ht()}function ht(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ze{constructor(f,m){this.shortDelay=f,this.longDelay=m,de(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function qe(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kt()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nt(b,f){de(b.emulator,"Emulator should always be set here");const{url:m}=b.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class it{static initialize(f,m,D){this.fetchImpl=f,m&&(this.headersImpl=m),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mt=new Ze(3e4,6e4);function jt(b,f){return b.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:b.tenantId}):f}function Ot(b,f,m,D){return An.apply(this,arguments)}function An(){return(An=(0,u.Z)(function*(b,f,m,D,G={}){return On(b,G,(0,u.Z)(function*(){let ne={},He={};D&&("GET"===f?He=D:ne={body:JSON.stringify(D)});const Et=(0,j.xO)(Object.assign({key:b.config.apiKey},He)).slice(1),qt=yield b._getAdditionalHeaders();return qt["Content-Type"]="application/json",b.languageCode&&(qt["X-Firebase-Locale"]=b.languageCode),it.fetch()(bn(b,b.config.apiHost,m,Et),Object.assign({method:f,headers:qt,referrerPolicy:"no-referrer"},ne))}))})).apply(this,arguments)}function On(b,f,m){return tr.apply(this,arguments)}function tr(){return(tr=(0,u.Z)(function*(b,f,m){b._canInitEmulator=!1;const D=Object.assign(Object.assign({},Tt),f);try{const G=new Fn(b),ne=yield Promise.race([m(),G.promise]);G.clearNetworkTimeout();const He=yield ne.json();if("needConfirmation"in He)throw re(b,"account-exists-with-different-credential",He);if(ne.ok&&!("errorMessage"in He))return He;{const Et=ne.ok?He.errorMessage:He.error.message,[qt,fn]=Et.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qt)throw re(b,"credential-already-in-use",He);if("EMAIL_EXISTS"===qt)throw re(b,"email-already-in-use",He);if("USER_DISABLED"===qt)throw re(b,"user-disabled",He);const Ln=D[qt]||qt.toLowerCase().replace(/[_\s]+/g,"-");if(fn)throw Ct(b,Ln,fn);ut(b,Ln)}}catch(G){if(G instanceof j.ZR)throw G;ut(b,"network-request-failed")}})).apply(this,arguments)}function Mn(b,f,m,D){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,u.Z)(function*(b,f,m,D,G={}){const ne=yield Ot(b,f,m,D,G);return"mfaPendingCredential"in ne&&ut(b,"multi-factor-auth-required",{_serverResponse:ne}),ne})).apply(this,arguments)}function bn(b,f,m,D){const G=`${f}${m}?${D}`;return b.config.emulator?nt(b.config,G):`${b.config.apiScheme}://${G}`}class Fn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,D)=>{this.timer=setTimeout(()=>D(ot(this.auth,"network-request-failed")),mt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function re(b,f,m){const D={appName:b.name};m.email&&(D.email=m.email),m.phoneNumber&&(D.phoneNumber=m.phoneNumber);const G=ot(b,f,D);return G.customData._tokenResponse=m,G}function Nt(){return(Nt=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Fr(b,f){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Un(b,f){return kn.apply(this,arguments)}function kn(){return(kn=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Wr(b){if(b)try{const f=new Date(Number(b));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function un(){return(un=(0,u.Z)(function*(b,f=!1){const m=(0,j.m9)(b),D=yield m.getIdToken(f),G=yt(D);fe(G&&G.exp&&G.auth_time&&G.iat,m.auth,"internal-error");const ne="object"==typeof G.firebase?G.firebase:void 0,He=null==ne?void 0:ne.sign_in_provider;return{claims:G,token:D,authTime:Wr(nn(G.auth_time)),issuedAtTime:Wr(nn(G.iat)),expirationTime:Wr(nn(G.exp)),signInProvider:He||null,signInSecondFactor:(null==ne?void 0:ne.sign_in_second_factor)||null}})).apply(this,arguments)}function nn(b){return 1e3*Number(b)}function yt(b){var f;const[m,D,G]=b.split(".");if(void 0===m||void 0===D||void 0===G)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const ne=(0,j.tV)(D);return ne?JSON.parse(ne):(Ke("Failed to decode base64 JWT payload"),null)}catch(ne){return Ke("Caught error parsing JWT payload as JSON",null===(f=ne)||void 0===f?void 0:f.toString()),null}}function Jn(b,f){return nr.apply(this,arguments)}function nr(){return(nr=(0,u.Z)(function*(b,f,m=!1){if(m)return f;try{return yield f}catch(D){throw D instanceof j.ZR&&_r(D)&&b.auth.currentUser===b&&(yield b.auth.signOut()),D}})).apply(this,arguments)}function _r({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class rn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const G=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const D=this.getInterval(f);this.timerId=setTimeout((0,u.Z)(function*(){yield m.iteration()}),D)}iteration(){var f=this;return(0,u.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===(null===(m=D)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Qr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wr(this.lastLoginAt),this.creationTime=Wr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _n(b){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,u.Z)(function*(b){var f;const m=b.auth,D=yield b.getIdToken(),G=yield Jn(b,Un(m,{idToken:D}));fe(null==G?void 0:G.users.length,m,"internal-error");const ne=G.users[0];b._notifyReloadListener(ne);const He=null!==(f=ne.providerUserInfo)&&void 0!==f&&f.length?Jt(ne.providerUserInfo):[],Et=Lr(b.providerData,He),Ln=!!b.isAnonymous&&!(b.email&&ne.passwordHash||null!=Et&&Et.length),Rn={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:Et,metadata:new Qr(ne.createdAt,ne.lastLoginAt),isAnonymous:Ln};Object.assign(b,Rn)})).apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(b){const f=(0,j.m9)(b);yield _n(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Lr(b,f){return[...b.filter(D=>!f.some(G=>G.providerId===D.providerId)),...f]}function Jt(b){return b.map(f=>{var{providerId:m}=f,D=(0,ae._T)(f,["providerId"]);return{providerId:m,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function Zt(){return(Zt=(0,u.Z)(function*(b,f){const m=yield On(b,{},(0,u.Z)(function*(){const D=(0,j.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:G,apiKey:ne}=b.config,He=bn(b,G,"/v1/token",`key=${ne}`),Et=yield b._getAdditionalHeaders();return Et["Content-Type"]="application/x-www-form-urlencoded",it.fetch()(He,{method:"POST",headers:Et,body:D})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class gn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){fe(f.idToken,"internal-error"),fe(void 0!==f.idToken,"internal-error"),fe(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Xn(b){const f=yt(b);return fe(f,"internal-error"),fe(void 0!==f.exp,"internal-error"),fe(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var D=this;return(0,u.Z)(function*(){return fe(!D.accessToken||D.refreshToken,f,"user-token-expired"),m||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(f,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var D=this;return(0,u.Z)(function*(){const{accessToken:G,refreshToken:ne,expiresIn:He}=yield function St(b,f){return Zt.apply(this,arguments)}(f,m);D.updateTokensAndExpiration(G,ne,Number(He))})()}updateTokensAndExpiration(f,m,D){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(f,m){const{refreshToken:D,accessToken:G,expirationTime:ne}=m,He=new gn;return D&&(fe("string"==typeof D,"internal-error",{appName:f}),He.refreshToken=D),G&&(fe("string"==typeof G,"internal-error",{appName:f}),He.accessToken=G),ne&&(fe("number"==typeof ne,"internal-error",{appName:f}),He.expirationTime=ne),He}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new gn,this.toJSON())}_performRefresh(){return je("not implemented")}}function cn(b,f){fe("string"==typeof b||void 0===b,"internal-error",{appName:f})}class dn{constructor(f){var{uid:m,auth:D,stsTokenManager:G}=f,ne=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=D,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=ne.displayName||null,this.email=ne.email||null,this.emailVerified=ne.emailVerified||!1,this.phoneNumber=ne.phoneNumber||null,this.photoURL=ne.photoURL||null,this.isAnonymous=ne.isAnonymous||!1,this.tenantId=ne.tenantId||null,this.providerData=ne.providerData?[...ne.providerData]:[],this.metadata=new Qr(ne.createdAt||void 0,ne.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,u.Z)(function*(){const D=yield Jn(m,m.stsTokenManager.getToken(m.auth,f));return fe(D,m.auth,"internal-error"),m.accessToken!==D&&(m.accessToken=D,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),D})()}getIdTokenResult(f){return function or(b){return un.apply(this,arguments)}(this,f)}reload(){return function Vn(b){return Ar.apply(this,arguments)}(this)}_assign(f){this!==f&&(fe(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new dn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var D=this;return(0,u.Z)(function*(){let G=!1;f.idToken&&f.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(f),G=!0),m&&(yield _n(D)),yield D.auth._persistUserIfCurrent(D),G&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var f=this;return(0,u.Z)(function*(){const m=yield f.getIdToken();return yield Jn(f,function Qn(b,f){return Nt.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var D,G,ne,He,Et,qt,fn,Ln;const Rn=null!==(D=m.displayName)&&void 0!==D?D:void 0,ds=null!==(G=m.email)&&void 0!==G?G:void 0,Jo=null!==(ne=m.phoneNumber)&&void 0!==ne?ne:void 0,Ol=null!==(He=m.photoURL)&&void 0!==He?He:void 0,kl=null!==(Et=m.tenantId)&&void 0!==Et?Et:void 0,Jl=null!==(qt=m._redirectEventId)&&void 0!==qt?qt:void 0,wh=null!==(fn=m.createdAt)&&void 0!==fn?fn:void 0,jg=null!==(Ln=m.lastLoginAt)&&void 0!==Ln?Ln:void 0,{uid:Ti,emailVerified:Eh,isAnonymous:pd,providerData:Bu,stsTokenManager:ep}=m;fe(Ti&&ep,f,"internal-error");const Ih=gn.fromJSON(this.name,ep);fe("string"==typeof Ti,f,"internal-error"),cn(Rn,f.name),cn(ds,f.name),fe("boolean"==typeof Eh,f,"internal-error"),fe("boolean"==typeof pd,f,"internal-error"),cn(Jo,f.name),cn(Ol,f.name),cn(kl,f.name),cn(Jl,f.name),cn(wh,f.name),cn(jg,f.name);const Ch=new dn({uid:Ti,auth:f,email:ds,emailVerified:Eh,displayName:Rn,isAnonymous:pd,photoURL:Ol,phoneNumber:Jo,tenantId:kl,stsTokenManager:Ih,createdAt:wh,lastLoginAt:jg});return Bu&&Array.isArray(Bu)&&(Ch.providerData=Bu.map(Hg=>Object.assign({},Hg))),Jl&&(Ch._redirectEventId=Jl),Ch}static _fromIdTokenResponse(f,m,D=!1){return(0,u.Z)(function*(){const G=new gn;G.updateFromServerResponse(m);const ne=new dn({uid:m.localId,auth:f,stsTokenManager:G,isAnonymous:D});return yield _n(ne),ne})()}}const Ce=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(m,D){var G=this;return(0,u.Z)(function*(){G.storage[m]=D})()}_get(m){var D=this;return(0,u.Z)(function*(){const G=D.storage[m];return void 0===G?null:G})()}_remove(m){var D=this;return(0,u.Z)(function*(){delete D.storage[m]})()}_addListener(m,D){}_removeListener(m,D){}}return b.type="NONE",b})();function Oe(b,f,m){return`firebase:${b}:${f}:${m}`}class rt{constructor(f,m,D){this.persistence=f,this.auth=m,this.userKey=D;const{config:G,name:ne}=this.auth;this.fullUserKey=Oe(this.userKey,G.apiKey,ne),this.fullPersistenceKey=Oe("persistence",G.apiKey,ne),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,u.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?dn._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,u.Z)(function*(){if(m.persistence===f)return;const D=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,D?m.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,D="authUser"){return(0,u.Z)(function*(){if(!m.length)return new rt(ve(Ce),f,D);const G=(yield Promise.all(m.map(function(){var fn=(0,u.Z)(function*(Ln){if(yield Ln._isAvailable())return Ln});return function(Ln){return fn.apply(this,arguments)}}()))).filter(fn=>fn);let ne=G[0]||ve(Ce);const He=Oe(D,f.config.apiKey,f.name);let Et=null;for(const fn of m)try{const Ln=yield fn._get(He);if(Ln){const Rn=dn._fromJSON(f,Ln);fn!==ne&&(Et=Rn),ne=fn;break}}catch(Ln){}const qt=G.filter(fn=>fn._shouldAllowMigration);return ne._shouldAllowMigration&&qt.length?(ne=qt[0],Et&&(yield ne._set(He,Et.toJSON())),yield Promise.all(m.map(function(){var fn=(0,u.Z)(function*(Ln){if(Ln!==ne)try{yield Ln._remove(He)}catch(Rn){}});return function(Ln){return fn.apply(this,arguments)}}())),new rt(ne,f,D)):new rt(ne,f,D)})()}}function Ge(b){const f=b.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Kn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(zt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Je(f))return"Blackberry";if(xe(f))return"Webos";if(en(f))return"Safari";if((f.includes("chrome/")||jn(f))&&!f.includes("edge/"))return"Chrome";if(dr(f))return"Android";{const D=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function zt(b=(0,j.z$)()){return/firefox\//i.test(b)}function en(b=(0,j.z$)()){const f=b.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function jn(b=(0,j.z$)()){return/crios\//i.test(b)}function Kn(b=(0,j.z$)()){return/iemobile/i.test(b)}function dr(b=(0,j.z$)()){return/android/i.test(b)}function Je(b=(0,j.z$)()){return/blackberry/i.test(b)}function xe(b=(0,j.z$)()){return/webos/i.test(b)}function we(b=(0,j.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function yn(b=(0,j.z$)()){return we(b)||dr(b)||xe(b)||Je(b)||/windows phone/i.test(b)||Kn(b)}function on(b,f=[]){let m;switch(b){case"Browser":m=Ge((0,j.z$)());break;case"Worker":m=`${Ge((0,j.z$)())}-${b}`;break;default:m=b}const D=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${Ae.SDK_VERSION}/${D}`}class Nn{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const D=ne=>new Promise((He,Et)=>{try{He(f(ne))}catch(qt){Et(qt)}});D.onAbort=m,this.queue.push(D);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,u.Z)(function*(){var D;if(m.auth.currentUser===f)return;const G=[];try{for(const ne of m.queue)yield ne(f),ne.onAbort&&G.push(ne.onAbort)}catch(ne){G.reverse();for(const He of G)try{He()}catch(Et){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(D=ne)||void 0===D?void 0:D.message})}})()}}class pr{constructor(f,m,D){this.app=f,this.heartbeatServiceProvider=m,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Or(this),this.idTokenSubscription=new Or(this),this.beforeStateQueue=new Nn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ie,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(f,m){var D=this;return m&&(this._popupRedirectResolver=ve(m)),this._initializationPromise=this.queue((0,u.Z)(function*(){var G,ne;if(!D._deleted&&(D.persistenceManager=yield rt.create(D,f),!D._deleted)){if(null!==(G=D._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(He){}yield D.initializeCurrentUser(m),D.lastNotifiedUid=(null===(ne=D.currentUser)||void 0===ne?void 0:ne.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,u.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,u.Z)(function*(){var D;const G=yield m.assertedPersistence.getCurrentUser();let ne=G,He=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Et=null===(D=m.redirectUser)||void 0===D?void 0:D._redirectEventId,qt=null==ne?void 0:ne._redirectEventId,fn=yield m.tryRedirectSignIn(f);(!Et||Et===qt)&&(null==fn?void 0:fn.user)&&(ne=fn.user,He=!0)}if(!ne)return m.directlySetCurrentUser(null);if(!ne._redirectEventId){if(He)try{yield m.beforeStateQueue.runMiddleware(ne)}catch(Et){ne=G,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Et))}return ne?m.reloadAndSetCurrentUserOrClear(ne):m.directlySetCurrentUser(null)}return fe(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===ne._redirectEventId?m.directlySetCurrentUser(ne):m.reloadAndSetCurrentUserOrClear(ne)})()}tryRedirectSignIn(f){var m=this;return(0,u.Z)(function*(){let D=null;try{D=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(G){yield m._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,u.Z)(function*(){var D;try{yield _n(f)}catch(G){if("auth/network-request-failed"!==(null===(D=G)||void 0===D?void 0:D.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ne(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var f=this;return(0,u.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,u.Z)(function*(){const D=f?(0,j.m9)(f):null;return D&&fe(D.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(D&&D._clone(m))})()}_updateCurrentUser(f,m=!1){var D=this;return(0,u.Z)(function*(){if(!D._deleted)return f&&fe(D.tenantId===f.tenantId,D,"tenant-id-mismatch"),m||(yield D.beforeStateQueue.runMiddleware(f)),D.queue((0,u.Z)(function*(){yield D.directlySetCurrentUser(f),D.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,u.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,u.Z)(function*(){yield m.assertedPersistence.setPersistence(ve(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new j.LL("auth","Firebase",f())}onAuthStateChanged(f,m,D){return this.registerStateListener(this.authStateSubscription,f,m,D)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,D){return this.registerStateListener(this.idTokenSubscription,f,m,D)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var D=this;return(0,u.Z)(function*(){const G=yield D.getOrInitRedirectPersistenceManager(m);return null===f?G.removeCurrentUser():G.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,u.Z)(function*(){if(!m.redirectPersistenceManager){const D=f&&ve(f)||m._popupRedirectResolver;fe(D,m,"argument-error"),m.redirectPersistenceManager=yield rt.create(m,[ve(D._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,u.Z)(function*(){var D,G;return m._isInitialized&&(yield m.queue((0,u.Z)(function*(){}))),(null===(D=m._currentUser)||void 0===D?void 0:D._redirectEventId)===f?m._currentUser:(null===(G=m.redirectUser)||void 0===G?void 0:G._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,u.Z)(function*(){if(f===m.currentUser)return m.queue((0,u.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,D,G){if(this._deleted)return()=>{};const ne="function"==typeof m?m:m.next.bind(m),He=this._isInitialized?Promise.resolve():this._initializationPromise;return fe(He,this,"internal-error"),He.then(()=>ne(this.currentUser)),"function"==typeof m?f.addObserver(m,D,G):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,u.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=on(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,u.Z)(function*(){var m;const D={"X-Client-Version":f.clientVersion};f.app.options.appId&&(D["X-Firebase-gmpid"]=f.app.options.appId);const G=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return G&&(D["X-Firebase-Client"]=G),D})()}}function vr(b){return(0,j.m9)(b)}class Or{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wn(b){const f=b.indexOf(":");return f<0?"":b.substr(0,f+1)}function Br(b){if(!b)return null;const f=Number(b);return isNaN(f)?null:f}class ci{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return je("not implemented")}_getIdTokenResponse(f){return je("not implemented")}_linkToIdToken(f,m){return je("not implemented")}_getReauthenticationResolver(f){return je("not implemented")}}function xr(b,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:resetPassword",jt(b,f))})).apply(this,arguments)}function Xr(b,f){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Jr(b,f){return bi.apply(this,arguments)}function bi(){return(bi=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:update",jt(b,f))})).apply(this,arguments)}function $i(){return($i=(0,u.Z)(function*(b,f){return Mn(b,"POST","/v1/accounts:signInWithPassword",jt(b,f))})).apply(this,arguments)}function Ai(b,f){return Y.apply(this,arguments)}function Y(){return(Y=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:sendOobCode",jt(b,f))})).apply(this,arguments)}function me(b,f){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,u.Z)(function*(b,f){return Ai(b,f)})).apply(this,arguments)}function We(b,f){return pt.apply(this,arguments)}function pt(){return(pt=(0,u.Z)(function*(b,f){return Ai(b,f)})).apply(this,arguments)}function ue(b,f){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,u.Z)(function*(b,f){return Ai(b,f)})).apply(this,arguments)}function st(b,f){return _t.apply(this,arguments)}function _t(){return(_t=(0,u.Z)(function*(b,f){return Ai(b,f)})).apply(this,arguments)}function Yt(){return(Yt=(0,u.Z)(function*(b,f){return Mn(b,"POST","/v1/accounts:signInWithEmailLink",jt(b,f))})).apply(this,arguments)}function Cn(){return(Cn=(0,u.Z)(function*(b,f){return Mn(b,"POST","/v1/accounts:signInWithEmailLink",jt(b,f))})).apply(this,arguments)}class Er extends ci{constructor(f,m,D,G=null){super("password",D),this._email=f,this._password=m,this._tenantId=G}static _fromEmailAndPassword(f,m){return new Er(f,m,"password")}static _fromEmailAndCode(f,m,D=null){return new Er(f,m,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,u.Z)(function*(){switch(m.signInMethod){case"password":return function di(b,f){return $i.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function At(b,f){return Yt.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:ut(f,"internal-error")}})()}_linkToIdToken(f,m){var D=this;return(0,u.Z)(function*(){switch(D.signInMethod){case"password":return Xr(f,{idToken:m,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function ln(b,f){return Cn.apply(this,arguments)}(f,{idToken:m,email:D._email,oobCode:D._password});default:ut(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ur(b,f){return hi.apply(this,arguments)}function hi(){return(hi=(0,u.Z)(function*(b,f){return Mn(b,"POST","/v1/accounts:signInWithIdp",jt(b,f))})).apply(this,arguments)}class wi extends ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new wi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):ut("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:D,signInMethod:G}=m,ne=(0,ae._T)(m,["providerId","signInMethod"]);if(!D||!G)return null;const He=new wi(D,G);return He.idToken=ne.idToken||void 0,He.accessToken=ne.accessToken||void 0,He.secret=ne.secret,He.nonce=ne.nonce,He.pendingToken=ne.pendingToken||null,He}_getIdTokenResponse(f){return ur(f,this.buildRequest())}_linkToIdToken(f,m){const D=this.buildRequest();return D.idToken=m,ur(f,D)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ur(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,j.xO)(m)}return f}}function Yi(b,f){return _s.apply(this,arguments)}function _s(){return(_s=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:sendVerificationCode",jt(b,f))})).apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(function*(b,f){return Mn(b,"POST","/v1/accounts:signInWithPhoneNumber",jt(b,f))})).apply(this,arguments)}function Fo(){return(Fo=(0,u.Z)(function*(b,f){const m=yield Mn(b,"POST","/v1/accounts:signInWithPhoneNumber",jt(b,f));if(m.temporaryProof)throw re(b,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Wa={USER_NOT_FOUND:"user-not-found"};function lo(){return(lo=(0,u.Z)(function*(b,f){return Mn(b,"POST","/v1/accounts:signInWithPhoneNumber",jt(b,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Wa)})).apply(this,arguments)}class Mi extends ci{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Mi({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Mi({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Ki(b,f){return Ui.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function No(b,f){return Fo.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function la(b,f){return lo.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:D,verificationCode:G}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:D,code:G}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:D,phoneNumber:G,temporaryProof:ne}=f;return D||m||G||ne?new Mi({verificationId:m,verificationCode:D,phoneNumber:G,temporaryProof:ne}):null}}class wo{constructor(f){var m,D,G,ne,He,Et;const qt=(0,j.zd)((0,j.pd)(f)),fn=null!==(m=qt.apiKey)&&void 0!==m?m:null,Ln=null!==(D=qt.oobCode)&&void 0!==D?D:null,Rn=function ua(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=qt.mode)&&void 0!==G?G:null);fe(fn&&Ln&&Rn,"argument-error"),this.apiKey=fn,this.operation=Rn,this.code=Ln,this.continueUrl=null!==(ne=qt.continueUrl)&&void 0!==ne?ne:null,this.languageCode=null!==(He=qt.languageCode)&&void 0!==He?He:null,this.tenantId=null!==(Et=qt.tenantId)&&void 0!==Et?Et:null}static parseLink(f){const m=function Lo(b){const f=(0,j.zd)((0,j.pd)(b)).link,m=f?(0,j.zd)((0,j.pd)(f)).deep_link_id:null,D=(0,j.zd)((0,j.pd)(b)).deep_link_id;return(D?(0,j.zd)((0,j.pd)(D)).link:null)||D||m||f||b}(f);try{return new wo(m)}catch(D){return null}}}let Zi=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(m,D){return Er._fromEmailAndPassword(m,D)}static credentialWithLink(m,D){const G=wo.parseLink(D);return fe(G,"argument-error"),Er._fromEmailAndCode(m,G.code,G.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class vs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class xi extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ws extends xi{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return fe("providerId"in m&&"signInMethod"in m,"argument-error"),wi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return fe(f.idToken||f.accessToken,"argument-error"),wi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ws.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ws.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:D,oauthTokenSecret:G,pendingToken:ne,nonce:He,providerId:Et}=f;if(!D&&!G&&!m&&!ne||!Et)return null;try{return new Ws(Et)._credential({idToken:m,accessToken:D,nonce:He,pendingToken:ne})}catch(qt){return null}}}let Eo=(()=>{class b extends xi{constructor(){super("facebook.com")}static credential(m){return wi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch(D){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),ks=(()=>{class b extends xi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,D){return wi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:D})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:D,oauthAccessToken:G}=m;if(!D&&!G)return null;try{return b.credential(D,G)}catch(ne){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Io=(()=>{class b extends xi{constructor(){super("github.com")}static credential(m){return wi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch(D){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class ws extends ci{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return ur(f,this.buildRequest())}_linkToIdToken(f,m){const D=this.buildRequest();return D.idToken=m,ur(f,D)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ur(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:D,signInMethod:G,pendingToken:ne}=m;return D&&G&&ne&&D===G?new ws(D,ne):null}static _create(f,m){return new ws(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ri extends vs{constructor(f){fe(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ri.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ri.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=ws.fromJSON(f);return fe(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:D}=f;if(!m||!D)return null;try{return ws._create(D,m)}catch(G){return null}}}let ai=(()=>{class b extends xi{constructor(){super("twitter.com")}static credential(m,D){return wi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:D})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:D,oauthTokenSecret:G}=m;if(!D||!G)return null;try{return b.credential(D,G)}catch(ne){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function fi(b,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,u.Z)(function*(b,f){return Mn(b,"POST","/v1/accounts:signUp",jt(b,f))})).apply(this,arguments)}class pi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,D,G=!1){return(0,u.Z)(function*(){const ne=yield dn._fromIdTokenResponse(f,D,G),He=Oi(D);return new pi({user:ne,providerId:He,_tokenResponse:D,operationType:m})})()}static _forOperation(f,m,D){return(0,u.Z)(function*(){yield f._updateTokensIfNecessary(D,!0);const G=Oi(D);return new pi({user:f,providerId:G,_tokenResponse:D,operationType:m})})()}}function Oi(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Mr(){return(Mr=(0,u.Z)(function*(b){var f;const m=vr(b);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new pi({user:m.currentUser,providerId:null,operationType:"signIn"});const D=yield fi(m,{returnSecureToken:!0}),G=yield pi._fromIdTokenResponse(m,"signIn",D,!0);return yield m._updateCurrentUser(G.user),G})).apply(this,arguments)}class Is extends j.ZR{constructor(f,m,D,G){var ne;super(m.code,m.message),this.operationType=D,this.user=G,Object.setPrototypeOf(this,Is.prototype),this.customData={appName:f.name,tenantId:null!==(ne=f.tenantId)&&void 0!==ne?ne:void 0,_serverResponse:m.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(f,m,D,G){return new Is(f,m,D,G)}}function Hi(b,f,m,D){return("reauthenticate"===f?m._getReauthenticationResolver(b):m._getIdTokenResponse(b)).catch(ne=>{throw"auth/multi-factor-auth-required"===ne.code?Is._fromErrorAndOperation(b,ne,f,D):ne})}function Yr(b){return new Set(b.map(({providerId:f})=>f).filter(f=>!!f))}function ns(){return(ns=(0,u.Z)(function*(b,f){const m=(0,j.m9)(b);yield ir(!0,m,f);const{providerUserInfo:D}=yield Fr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),G=Yr(D||[]);return m.providerData=m.providerData.filter(ne=>G.has(ne.providerId)),G.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Cs(b,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,u.Z)(function*(b,f,m=!1){const D=yield Jn(b,f._linkToIdToken(b.auth,yield b.getIdToken()),m);return pi._forOperation(b,"link",D)})).apply(this,arguments)}function ir(b,f,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,u.Z)(function*(b,f,m){yield _n(f);const G=!1===b?"provider-already-linked":"no-such-provider";fe(Yr(f.providerData).has(m)===b,f.auth,G)})).apply(this,arguments)}function rs(b,f){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,u.Z)(function*(b,f,m=!1){var D;const{auth:G}=b,ne="reauthenticate";try{const He=yield Jn(b,Hi(G,ne,f,b),m);fe(He.idToken,G,"internal-error");const Et=yt(He.idToken);fe(Et,G,"internal-error");const{sub:qt}=Et;return fe(b.uid===qt,G,"user-mismatch"),pi._forOperation(b,ne,He)}catch(He){throw"auth/user-not-found"===(null===(D=He)||void 0===D?void 0:D.code)&&ut(G,"user-mismatch"),He}})).apply(this,arguments)}function Ii(b,f){return Do.apply(this,arguments)}function Do(){return(Do=(0,u.Z)(function*(b,f,m=!1){const D="signIn",G=yield Hi(b,D,f),ne=yield pi._fromIdTokenResponse(b,D,G);return m||(yield b._updateCurrentUser(ne.user)),ne})).apply(this,arguments)}function Dr(b,f){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(b,f){return Ii(vr(b),f)})).apply(this,arguments)}function uo(b,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(b,f){const m=(0,j.m9)(b);return yield ir(!1,m,f.providerId),Cs(m,f)})).apply(this,arguments)}function co(b,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,u.Z)(function*(b,f){return rs((0,j.m9)(b),f)})).apply(this,arguments)}function da(b,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,u.Z)(function*(b,f){return Mn(b,"POST","/v1/accounts:signInWithCustomToken",jt(b,f))})).apply(this,arguments)}function To(){return(To=(0,u.Z)(function*(b,f){const m=vr(b),D=yield da(m,{token:f,returnSecureToken:!0}),G=yield pi._fromIdTokenResponse(m,"signIn",D);return yield m._updateCurrentUser(G.user),G})).apply(this,arguments)}class Pt{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?qn._fromServerResponse(f,m):ut(f,"internal-error")}}class qn extends Pt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new qn(m)}}function zo(b,f,m){var D;fe((null===(D=m.url)||void 0===D?void 0:D.length)>0,b,"invalid-continue-uri"),fe(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(fe(m.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(fe(m.android.packageName.length>0,b,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function ei(){return(ei=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b),G={requestType:"PASSWORD_RESET",email:f};m&&zo(D,G,m),yield We(D,G)})).apply(this,arguments)}function gi(){return(gi=(0,u.Z)(function*(b,f,m){yield xr((0,j.m9)(b),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ns(){return(Ns=(0,u.Z)(function*(b,f){yield Jr((0,j.m9)(b),{oobCode:f})})).apply(this,arguments)}function V(b,f){return P.apply(this,arguments)}function P(){return(P=(0,u.Z)(function*(b,f){const m=(0,j.m9)(b),D=yield xr(m,{oobCode:f}),G=D.requestType;switch(fe(G,m,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(D.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(D.mfaInfo,m,"internal-error");default:fe(D.email,m,"internal-error")}let ne=null;return D.mfaInfo&&(ne=Pt._fromServerResponse(vr(m),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:ne},operation:G}})).apply(this,arguments)}function p(){return(p=(0,u.Z)(function*(b,f){const{data:m}=yield V((0,j.m9)(b),f);return m.email})).apply(this,arguments)}function _(){return(_=(0,u.Z)(function*(b,f,m){const D=vr(b),G=yield fi(D,{returnSecureToken:!0,email:f,password:m}),ne=yield pi._fromIdTokenResponse(D,"signIn",G);return yield D._updateCurrentUser(ne.user),ne})).apply(this,arguments)}function lt(){return(lt=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b),G={requestType:"EMAIL_SIGNIN",email:f};fe(m.handleCodeInApp,D,"argument-error"),m&&zo(D,G,m),yield ue(D,G)})).apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b),G=Zi.credentialWithLink(f,m||wt());return fe(G._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Dr(D,G)})).apply(this,arguments)}function mr(b,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:createAuthUri",jt(b,f))})).apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(b,f){const D={identifier:f,continueUri:kt()?wt():"http://localhost"},{signinMethods:G}=yield mr((0,j.m9)(b),D);return G||[]})).apply(this,arguments)}function ki(){return(ki=(0,u.Z)(function*(b,f){const m=(0,j.m9)(b),G={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};f&&zo(m.auth,G,f);const{email:ne}=yield me(m.auth,G);ne!==b.email&&(yield b.reload())})).apply(this,arguments)}function Fs(){return(Fs=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b),ne={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:f};m&&zo(D.auth,ne,m);const{email:He}=yield st(D.auth,ne);He!==b.email&&(yield b.reload())})).apply(this,arguments)}function fa(b,f){return So.apply(this,arguments)}function So(){return(So=(0,u.Z)(function*(b,f){return Ot(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function dl(){return(dl=(0,u.Z)(function*(b,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const D=(0,j.m9)(b),ne={idToken:yield D.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},He=yield Jn(D,fa(D.auth,ne));D.displayName=He.displayName||null,D.photoURL=He.photoUrl||null;const Et=D.providerData.find(({providerId:qt})=>"password"===qt);Et&&(Et.displayName=D.displayName,Et.photoURL=D.photoURL),yield D._updateTokensIfNecessary(He)})).apply(this,arguments)}function N(b,f,m){return Q.apply(this,arguments)}function Q(){return(Q=(0,u.Z)(function*(b,f,m){const{auth:D}=b,ne={idToken:yield b.getIdToken(),returnSecureToken:!0};f&&(ne.email=f),m&&(ne.password=m);const He=yield Jn(b,Xr(D,ne));yield b._updateTokensIfNecessary(He,!0)})).apply(this,arguments)}class gt{constructor(f,m,D={}){this.isNewUser=f,this.providerId=m,this.profile=D}}class It extends gt{constructor(f,m,D,G){super(f,m,D),this.username=G}}class Kt extends gt{constructor(f,m){super(f,"facebook.com",m)}}class hr extends It{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Ir extends gt{constructor(f,m){super(f,"google.com",m)}}class br extends It{constructor(f,m,D){super(f,"twitter.com",m,D)}}function fr(b){const{user:f,_tokenResponse:m}=b;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function De(b){var f,m;if(!b)return null;const{providerId:D}=b,G=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},ne=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!D&&(null==b?void 0:b.idToken)){const He=null===(m=null===(f=yt(b.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(He)return new gt(ne,"anonymous"!==He&&"custom"!==He?He:null)}if(!D)return null;switch(D){case"facebook.com":return new Kt(ne,G);case"github.com":return new hr(ne,G);case"google.com":return new Ir(ne,G);case"twitter.com":return new br(ne,G,b.screenName||null);case"custom":case"anonymous":return new gt(ne,null);default:return new gt(ne,D,G)}}(m)}class Bs{constructor(f,m,D){this.type=f,this.credential=m,this.auth=D}static _fromIdtoken(f,m){return new Bs("enroll",f,m)}static _fromMfaPendingCredential(f){return new Bs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,D;if(null!=f&&f.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Bs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(D=f.multiFactorSession)&&void 0!==D&&D.idToken)return Bs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ta{constructor(f,m,D){this.session=f,this.hints=m,this.signInResolver=D}static _fromError(f,m){const D=vr(f),G=m.customData._serverResponse,ne=(G.mfaInfo||[]).map(Et=>Pt._fromServerResponse(D,Et));fe(G.mfaPendingCredential,D,"internal-error");const He=Bs._fromMfaPendingCredential(G.mfaPendingCredential);return new Ta(He,ne,function(){var Et=(0,u.Z)(function*(qt){const fn=yield qt._process(D,He);delete G.mfaInfo,delete G.mfaPendingCredential;const Ln=Object.assign(Object.assign({},G),{idToken:fn.idToken,refreshToken:fn.refreshToken});switch(m.operationType){case"signIn":const Rn=yield pi._fromIdTokenResponse(D,m.operationType,Ln);return yield D._updateCurrentUser(Rn.user),Rn;case"reauthenticate":return fe(m.user,D,"internal-error"),pi._forOperation(m.user,m.operationType,Ln);default:ut(D,"internal-error")}});return function(qt){return Et.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,u.Z)(function*(){return m.signInResolver(f)})()}}function Ao(b,f){return Ot(b,"POST","/v2/accounts/mfaEnrollment:start",jt(b,f))}class sc{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(D=>Pt._fromServerResponse(f.auth,D)))})}static _fromUser(f){return new sc(f)}getSession(){var f=this;return(0,u.Z)(function*(){return Bs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var D=this;return(0,u.Z)(function*(){const G=f,ne=yield D.getSession(),He=yield Jn(D.user,G._process(D.user.auth,ne,m));return yield D.user._updateTokensIfNecessary(He),D.user.reload()})()}unenroll(f){var m=this;return(0,u.Z)(function*(){var D;const G="string"==typeof f?f:f.uid,ne=yield m.user.getIdToken(),He=yield Jn(m.user,function hl(b,f){return Ot(b,"POST","/v2/accounts/mfaEnrollment:withdraw",jt(b,f))}(m.user.auth,{idToken:ne,mfaEnrollmentId:G}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Et})=>Et!==G),yield m.user._updateTokensIfNecessary(He);try{yield m.user.reload()}catch(Et){if("auth/user-token-expired"!==(null===(D=Et)||void 0===D?void 0:D.code))throw Et}})()}}const Gl=new WeakMap,Sa="__sak";class pa{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Sa,"1"),this.storage.removeItem(Sa),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zs=(()=>{class b extends pa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,D)=>this.onStorageEvent(m,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pl(){const b=(0,j.z$)();return en(b)||we(b)}()&&function Bt(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=yn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const D of Object.keys(this.listeners)){const G=this.storage.getItem(D),ne=this.localCache[D];G!==ne&&m(D,ne,G)}}onStorageEvent(m,D=!1){if(!m.key)return void this.forAllChangedKeys((Et,qt,fn)=>{this.notifyListeners(Et,fn)});const G=m.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Et=this.storage.getItem(G);if(m.newValue!==Et)null!==m.newValue?this.storage.setItem(G,m.newValue):this.storage.removeItem(G);else if(this.localCache[G]===m.newValue&&!D)return}const ne=()=>{const Et=this.storage.getItem(G);!D&&this.localCache[G]===Et||this.notifyListeners(G,Et)},He=this.storage.getItem(G);!function mn(){return(0,j.w1)()&&10===document.documentMode}()||He===m.newValue||m.newValue===m.oldValue?ne():setTimeout(ne,10)}notifyListeners(m,D){this.localCache[m]=D;const G=this.listeners[m];if(G)for(const ne of Array.from(G))ne(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,D,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:D,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(D)}_removeListener(m,D){this.listeners[m]&&(this.listeners[m].delete(D),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,D){var G=()=>super._set,ne=this;return(0,u.Z)(function*(){yield G().call(ne,m,D),ne.localCache[m]=JSON.stringify(D)})()}_get(m){var D=()=>super._get,G=this;return(0,u.Z)(function*(){const ne=yield D().call(G,m);return G.localCache[m]=JSON.stringify(ne),ne})()}_remove(m){var D=()=>super._remove,G=this;return(0,u.Z)(function*(){yield D().call(G,m),delete G.localCache[m]})()}}return b.type="LOCAL",b})(),Qs=(()=>{class b extends pa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,D){}_removeListener(m,D){}}return b.type="SESSION",b})();let rh=(()=>{class b{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const D=this.receivers.find(ne=>ne.isListeningto(m));if(D)return D;const G=new b(m);return this.receivers.push(G),G}isListeningto(m){return this.eventTarget===m}handleEvent(m){var D=this;return(0,u.Z)(function*(){const G=m,{eventId:ne,eventType:He,data:Et}=G.data,qt=D.handlersMap[He];if(null==qt||!qt.size)return;G.ports[0].postMessage({status:"ack",eventId:ne,eventType:He});const fn=Array.from(qt).map(function(){var Rn=(0,u.Z)(function*(ds){return ds(G.origin,Et)});return function(ds){return Rn.apply(this,arguments)}}()),Ln=yield function za(b){return Promise.all(b.map(function(){var f=(0,u.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(D){return{fulfilled:!1,reason:D}}});return function(m){return f.apply(this,arguments)}}()))}(fn);G.ports[0].postMessage({status:"done",eventId:ne,eventType:He,response:Ln})})()}_subscribe(m,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(D)}_unsubscribe(m,D){this.handlersMap[m]&&D&&this.handlersMap[m].delete(D),(!D||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function po(b="",f=10){let m="";for(let D=0;D<f;D++)m+=Math.floor(10*Math.random());return b+m}class qo{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,D=50){var G=this;return(0,u.Z)(function*(){const ne="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ne)throw new Error("connection_unavailable");let He,Et;return new Promise((qt,fn)=>{const Ln=po("",20);ne.port1.start();const Rn=setTimeout(()=>{fn(new Error("unsupported_event"))},D);Et={messageChannel:ne,onMessage(ds){const Jo=ds;if(Jo.data.eventId===Ln)switch(Jo.data.status){case"ack":clearTimeout(Rn),He=setTimeout(()=>{fn(new Error("timeout"))},3e3);break;case"done":clearTimeout(He),qt(Jo.data.response);break;default:clearTimeout(Rn),clearTimeout(He),fn(new Error("invalid_response"))}}},G.handlers.add(Et),ne.port1.addEventListener("message",Et.onMessage),G.target.postMessage({eventType:f,eventId:Ln,data:m},[ne.port2])}).finally(()=>{Et&&G.removeMessageHandler(Et)})})()}}function Di(){return window}function qa(){return void 0!==Di().WorkerGlobalScope&&"function"==typeof Di().importScripts}function gl(){return(gl=(0,u.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const ga="firebaseLocalStorageDb",xo="firebaseLocalStorage",xa="fbase_key";class Yo{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Ya(b,f){return b.transaction([xo],f?"readwrite":"readonly").objectStore(xo)}function Ka(){const b=indexedDB.open(ga,1);return new Promise((f,m)=>{b.addEventListener("error",()=>{m(b.error)}),b.addEventListener("upgradeneeded",()=>{const D=b.result;try{D.createObjectStore(xo,{keyPath:xa})}catch(G){m(G)}}),b.addEventListener("success",(0,u.Z)(function*(){const D=b.result;D.objectStoreNames.contains(xo)?f(D):(D.close(),yield function Eu(){const b=indexedDB.deleteDatabase(ga);return new Yo(b).toPromise()}(),f(yield Ka()))}))})}function ma(b,f,m){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,u.Z)(function*(b,f,m){const D=Ya(b,!0).put({[xa]:f,value:m});return new Yo(D).toPromise()})).apply(this,arguments)}function Ko(){return(Ko=(0,u.Z)(function*(b,f){const m=Ya(b,!1).get(f),D=yield new Yo(m).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function $s(b,f){const m=Ya(b,!0).delete(f);return new Yo(m).toPromise()}const ss=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,u.Z)(function*(){return m.db||(m.db=yield Ka()),m.db})()}_withRetries(m){var D=this;return(0,u.Z)(function*(){let G=0;for(;;)try{const ne=yield D._openDb();return yield m(ne)}catch(ne){if(G++>3)throw ne;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,u.Z)(function*(){return qa()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,u.Z)(function*(){m.receiver=rh._getInstance(function Wl(){return qa()?self:null}()),m.receiver._subscribe("keyChanged",function(){var D=(0,u.Z)(function*(G,ne){return{keyProcessed:(yield m._poll()).includes(ne.key)}});return function(G,ne){return D.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var D=(0,u.Z)(function*(G,ne){return["keyChanged"]});return function(G,ne){return D.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,u.Z)(function*(){var D,G;if(m.activeServiceWorker=yield function Aa(){return gl.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new qo(m.activeServiceWorker);const ne=yield m.sender._send("ping",{},800);!ne||(null===(D=ne[0])||void 0===D?void 0:D.fulfilled)&&(null===(G=ne[0])||void 0===G?void 0:G.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var D=this;return(0,u.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function wu(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:m},D.serviceWorkerReceiverAvailable?800:50)}catch(G){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ka();return yield ma(m,Sa,"1"),yield $s(m,Sa),!0}catch(m){}return!1})()}_withPendingWrite(m){var D=this;return(0,u.Z)(function*(){D.pendingWrites++;try{yield m()}finally{D.pendingWrites--}})()}_set(m,D){var G=this;return(0,u.Z)(function*(){return G._withPendingWrite((0,u.Z)(function*(){return yield G._withRetries(ne=>ma(ne,m,D)),G.localCache[m]=D,G.notifyServiceWorker(m)}))})()}_get(m){var D=this;return(0,u.Z)(function*(){const G=yield D._withRetries(ne=>function Za(b,f){return Ko.apply(this,arguments)}(ne,m));return D.localCache[m]=G,G})()}_remove(m){var D=this;return(0,u.Z)(function*(){return D._withPendingWrite((0,u.Z)(function*(){return yield D._withRetries(G=>$s(G,m)),delete D.localCache[m],D.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,u.Z)(function*(){const D=yield m._withRetries(He=>{const Et=Ya(He,!1).getAll();return new Yo(Et).toPromise()});if(!D)return[];if(0!==m.pendingWrites)return[];const G=[],ne=new Set;for(const{fbase_key:He,value:Et}of D)ne.add(He),JSON.stringify(m.localCache[He])!==JSON.stringify(Et)&&(m.notifyListeners(He,Et),G.push(He));for(const He of Object.keys(m.localCache))m.localCache[He]&&!ne.has(He)&&(m.notifyListeners(He,null),G.push(He));return G})()}notifyListeners(m,D){this.localCache[m]=D;const G=this.listeners[m];if(G)for(const ne of Array.from(G))ne(D)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(D)}_removeListener(m,D){this.listeners[m]&&(this.listeners[m].delete(D),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Ma(b,f){return Ot(b,"POST","/v2/accounts/mfaSignIn:start",jt(b,f))}function Zo(){return(Zo=(0,u.Z)(function*(b){return(yield Ot(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function go(b){return new Promise((f,m)=>{const D=document.createElement("script");D.setAttribute("src",b),D.onload=f,D.onerror=G=>{const ne=ot("internal-error");ne.customData=G,m(ne)},D.type="text/javascript",D.charset="UTF-8",function ya(){var b,f;return null!==(f=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==f?f:document}().appendChild(D)})}function Qa(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ra=1e12;class jr{constructor(f){this.auth=f,this.counter=Ra,this._widgets=new Map}render(f,m){const D=this.counter;return this._widgets.set(D,new lc(f,this.auth.name,m||{})),this.counter++,D}reset(f){var m;const D=f||Ra;null===(m=this._widgets.get(D))||void 0===m||m.delete(),this._widgets.delete(D)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Ra))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,u.Z)(function*(){var D;return null===(D=m._widgets.get(f||Ra))||void 0===D||D.execute(),""})()}}class lc{constructor(f,m,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof f?document.getElementById(f):f;fe(G,"argument-error",{appName:m}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xc(b){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<b;D++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cu=Qa("rcb"),uc=new Ze(3e4,6e4);class Jc{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Di().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return fe(function Ff(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Di().grecaptcha):new Promise((D,G)=>{const ne=Di().setTimeout(()=>{G(ot(f,"network-request-failed"))},uc.get());Di()[Cu]=()=>{Di().clearTimeout(ne),delete Di()[Cu];const Et=Di().grecaptcha;if(!Et)return void G(ot(f,"internal-error"));const qt=Et.render;Et.render=(fn,Ln)=>{const Rn=qt(fn,Ln);return this.counter++,Rn},this.hostLanguage=m,D(Et)},go(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Cu,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(ne),G(ot(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Di().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xa{load(f){return(0,u.Z)(function*(){return new jr(f)})()}clearedOneInstance(){}}const cc="recaptcha",dc={theme:"light",type:"image"};class es{constructor(f,m=Object.assign({},dc),D){this.parameters=m,this.type=cc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vr(D),this.isInvisible="invisible"===this.parameters.size,fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof f?document.getElementById(f):f;fe(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xa:new Jc,this.validateStartingState()}verify(){var f=this;return(0,u.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),D=f.getAssertedRecaptcha();return D.getResponse(m)||new Promise(ne=>{const He=Et=>{!Et||(f.tokenChangeListeners.delete(He),ne(Et))};f.tokenChangeListeners.add(He),f.isInvisible&&D.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(D=>D(m)),"function"==typeof f)f(m);else if("string"==typeof f){const D=Di()[f];"function"==typeof D&&D(m)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,u.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const D=document.createElement("div");m.appendChild(D),m=D}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,u.Z)(function*(){fe(kt()&&!qa(),f.auth,"internal-error"),yield function yl(){let b=null;return new Promise(f=>{"complete"!==document.readyState?(b=()=>f(),window.addEventListener("load",b)):f()}).catch(f=>{throw b&&window.removeEventListener("load",b),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Us(b){return Zo.apply(this,arguments)}(f.auth);fe(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mo{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Mi._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Du(){return(Du=(0,u.Z)(function*(b,f,m){const D=vr(b),G=yield _a(D,f,(0,j.m9)(m));return new Mo(G,ne=>Dr(D,ne))})).apply(this,arguments)}function Js(){return(Js=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b);yield ir(!1,D,"phone");const G=yield _a(D.auth,f,(0,j.m9)(m));return new Mo(G,ne=>uo(D,ne))})).apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b),G=yield _a(D.auth,f,(0,j.m9)(m));return new Mo(G,ne=>co(D,ne))})).apply(this,arguments)}function _a(b,f,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,u.Z)(function*(b,f,m){var D;const G=yield m.verify();try{let ne;if(fe("string"==typeof G,b,"argument-error"),fe(m.type===cc,b,"argument-error"),ne="string"==typeof f?{phoneNumber:f}:f,"session"in ne){const He=ne.session;if("phoneNumber"in ne)return fe("enroll"===He.type,b,"internal-error"),(yield Ao(b,{idToken:He.credential,phoneEnrollmentInfo:{phoneNumber:ne.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{fe("signin"===He.type,b,"internal-error");const Et=(null===(D=ne.multiFactorHint)||void 0===D?void 0:D.uid)||ne.multiFactorUid;return fe(Et,b,"missing-multi-factor-info"),(yield Ma(b,{mfaPendingCredential:He.credential,mfaEnrollmentId:Et,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:He}=yield Yi(b,{phoneNumber:ne.phoneNumber,recaptchaToken:G});return He}}finally{m._reset()}})).apply(this,arguments)}function vl(){return(vl=(0,u.Z)(function*(b,f){yield Cs((0,j.m9)(b),f)})).apply(this,arguments)}let bl=(()=>{class b{constructor(m){this.providerId=b.PROVIDER_ID,this.auth=vr(m)}verifyPhoneNumber(m,D){return _a(this.auth,m,(0,j.m9)(D))}static credential(m,D){return Mi._fromVerification(m,D)}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:D,temporaryProof:G}=m;return D&&G?Mi._fromTokenResponse(D,G):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Ro(b,f){return f?ve(f):(fe(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class wl extends ci{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ur(f,this._buildIdpRequest())}_linkToIdToken(f,m){return ur(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return ur(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function as(b){return Ii(b.auth,new wl(b),b.bypassAuthState)}function El(b){const{auth:f,user:m}=b;return fe(m,f,"internal-error"),rs(m,new wl(b),b.bypassAuthState)}function va(b){return hc.apply(this,arguments)}function hc(){return(hc=(0,u.Z)(function*(b){const{auth:f,user:m}=b;return fe(m,f,"internal-error"),Cs(m,new wl(b),b.bypassAuthState)})).apply(this,arguments)}class fc{constructor(f,m,D,G,ne=!1){this.auth=f,this.resolver=D,this.user=G,this.bypassAuthState=ne,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,u.Z)(function*(D,G){f.pendingPromise={resolve:D,reject:G};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(ne){f.reject(ne)}});return function(D,G){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,u.Z)(function*(){const{urlResponse:D,sessionId:G,postBody:ne,tenantId:He,error:Et,type:qt}=f;if(Et)return void m.reject(Et);const fn={auth:m.auth,requestUri:D,sessionId:G,tenantId:He||void 0,postBody:ne||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(qt)(fn))}catch(Ln){m.reject(Ln)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return as;case"linkViaPopup":case"linkViaRedirect":return va;case"reauthViaPopup":case"reauthViaRedirect":return El;default:ut(this.auth,"internal-error")}}resolve(f){de(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){de(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lf=new Ze(2e3,1e4);function gc(){return(gc=(0,u.Z)(function*(b,f,m){const D=vr(b);ke(b,f,vs);const G=Ro(D,m);return new I(D,"signInViaPopup",f,G).executeNotNull()})).apply(this,arguments)}function Cl(){return(Cl=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b);ke(D.auth,f,vs);const G=Ro(D.auth,m);return new I(D.auth,"reauthViaPopup",f,G,D).executeNotNull()})).apply(this,arguments)}function ka(){return(ka=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b);ke(D.auth,f,vs);const G=Ro(D.auth,m);return new I(D.auth,"linkViaPopup",f,G,D).executeNotNull()})).apply(this,arguments)}let I=(()=>{class b extends fc{constructor(m,D,G,ne,He){super(m,D,ne,He),this.provider=G,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var m=this;return(0,u.Z)(function*(){const D=yield m.execute();return fe(D,m.auth,"internal-error"),D})()}onExecution(){var m=this;return(0,u.Z)(function*(){de(1===m.filter.length,"Popup operations only handle one event");const D=po();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],D),m.authWindow.associatedEvent=D,m.resolver._originValidation(m.auth).catch(G=>{m.reject(G)}),m.resolver._isIframeWebStorageSupported(m.auth,G=>{G||m.reject(ot(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const m=()=>{var D,G;this.pollId=null!==(G=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ot(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Lf.get())};m()}}return b.currentPopupAction=null,b})();const v=new Map;class x extends fc{constructor(f,m,D=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,D),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,u.Z)(function*(){let D=v.get(m.auth._key());if(!D){try{const ne=(yield function B(b,f){return Z.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;D=()=>Promise.resolve(ne)}catch(G){D=()=>Promise.reject(G)}v.set(m.auth._key(),D)}return m.bypassAuthState||v.set(m.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,D=this;return(0,u.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(D,f);if("unknown"!==f.type){if(f.eventId){const G=yield D.auth._redirectUserForId(f.eventId);if(G)return D.user=G,m().call(D,f);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Z(){return(Z=(0,u.Z)(function*(b,f){const m=q(f),D=L(b);if(!(yield D._isAvailable()))return!1;const G="true"===(yield D._get(m));return yield D._remove(m),G})).apply(this,arguments)}function Ee(b,f){return Se.apply(this,arguments)}function Se(){return(Se=(0,u.Z)(function*(b,f){return L(b)._set(q(f),"true")})).apply(this,arguments)}function A(b,f){v.set(b._key(),f)}function L(b){return ve(b._redirectPersistence)}function q(b){return Oe("pendingRedirect",b.config.apiKey,b.name)}function ct(){return(ct=(0,u.Z)(function*(b,f,m){const D=vr(b);ke(b,f,vs);const G=Ro(D,m);return yield Ee(G,D),G._openRedirect(D,f,"signInViaRedirect")})).apply(this,arguments)}function vn(){return(vn=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b);ke(D.auth,f,vs);const G=Ro(D.auth,m);yield Ee(G,D.auth);const ne=yield Uo(D);return G._openRedirect(D.auth,f,"reauthViaRedirect",ne)})).apply(this,arguments)}function hn(){return(hn=(0,u.Z)(function*(b,f,m){const D=(0,j.m9)(b);ke(D.auth,f,vs);const G=Ro(D.auth,m);yield ir(!1,D,f.providerId),yield Ee(G,D.auth);const ne=yield Uo(D);return G._openRedirect(D.auth,f,"linkViaRedirect",ne)})).apply(this,arguments)}function ls(){return(ls=(0,u.Z)(function*(b,f){return yield vr(b)._initializationPromise,Xo(b,f,!1)})).apply(this,arguments)}function Xo(b,f){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,u.Z)(function*(b,f,m=!1){const D=vr(b),G=Ro(D,f),He=yield new x(D,G,m).execute();return He&&!m&&(delete He.user._redirectEventId,yield D._persistUserIfCurrent(He.user),yield D._setRedirectUser(null,f)),He})).apply(this,arguments)}function Uo(b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,u.Z)(function*(b){const f=po(`${b.uid}:::`);return b._redirectEventId=f,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),f})).apply(this,arguments)}class Tl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(f,D)&&(m=!0,this.sendToConsumer(f,D),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Pa(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pn(b);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var D;if(f.error&&!pn(f)){const G=(null===(D=f.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";m.onError(ot(this.auth,G))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const D=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&D}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(js(f))}saveEventToCache(f){this.cachedEventUids.add(js(f)),this.lastProcessedEventTime=Date.now()}}function js(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(f=>f).join("-")}function pn({type:b,error:f}){return"unknown"===b&&"auth/no-auth-event"===(null==f?void 0:f.code)}function zn(b){return mc.apply(this,arguments)}function mc(){return(mc=(0,u.Z)(function*(b,f={}){return Ot(b,"GET","/v1/projects",f)})).apply(this,arguments)}const Bf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yc=/^https?/;function sh(){return(sh=(0,u.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:f}=yield zn(b);for(const m of f)try{if(qy(m))return}catch(D){}ut(b,"unauthorized-domain")})).apply(this,arguments)}function qy(b){const f=wt(),{protocol:m,hostname:D}=new URL(f);if(b.startsWith("chrome-extension://")){const He=new URL(b);return""===He.hostname&&""===D?"chrome-extension:"===m&&b.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&He.hostname===D}if(!yc.test(m))return!1;if(Bf.test(b))return D===b;const G=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(D)}const Yy=new Ze(3e4,6e4);function bg(){const b=Di().___jsl;if(null!=b&&b.H)for(const f of Object.keys(b.H))if(b.H[f].r=b.H[f].r||[],b.H[f].L=b.H[f].L||[],b.H[f].r=[...b.H[f].L],b.CP)for(let m=0;m<b.CP.length;m++)b.CP[m]=null}let Kl=null;function eo(b){return Kl=Kl||function Ts(b){return new Promise((f,m)=>{var D,G,ne;function He(){bg(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{bg(),m(ot(b,"network-request-failed"))},timeout:Yy.get()})}if(null!==(G=null===(D=Di().gapi)||void 0===D?void 0:D.iframes)&&void 0!==G&&G.Iframe)f(gapi.iframes.getContext());else{if(null===(ne=Di().gapi)||void 0===ne||!ne.load){const Et=Qa("iframefcb");return Di()[Et]=()=>{gapi.load?He():m(ot(b,"network-request-failed"))},go(`https://apis.google.com/js/api.js?onload=${Et}`).catch(qt=>m(qt))}He()}}).catch(f=>{throw Kl=null,f})}(b),Kl}const Sl=new Ze(5e3,15e3),Ky={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Eg(b){const f=b.config;fe(f.authDomain,b,"auth-domain-config-required");const m=f.emulator?nt(f,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,D={apiKey:f.apiKey,appName:b.name,v:Ae.SDK_VERSION},G=nd.get(b.config.apiHost);G&&(D.eid=G);const ne=b._getFrameworks();return ne.length&&(D.fw=ne.join(",")),`${m}?${(0,j.xO)(D).slice(1)}`}function _c(){return _c=(0,u.Z)(function*(b){const f=yield eo(b),m=Di().gapi;return fe(m,b,"internal-error"),f.open({where:document.body,url:Eg(b),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ky,dontclear:!0},D=>new Promise(function(){var G=(0,u.Z)(function*(ne,He){yield D.restyle({setHideOnLeave:!1});const Et=ot(b,"network-request-failed"),qt=Di().setTimeout(()=>{He(Et)},Sl.get());function fn(){Di().clearTimeout(qt),ne(D)}D.ping(fn).then(fn,()=>{He(Et)})});return function(ne,He){return G.apply(this,arguments)}}()))}),_c.apply(this,arguments)}const vc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xu{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function bc(b,f,m,D,G,ne){fe(b.config.authDomain,b,"auth-domain-config-required"),fe(b.config.apiKey,b,"invalid-api-key");const He={apiKey:b.config.apiKey,appName:b.name,authType:m,redirectUrl:D,v:Ae.SDK_VERSION,eventId:G};if(f instanceof vs){f.setDefaultLanguage(b.languageCode),He.providerId=f.providerId||"",(0,j.xb)(f.getCustomParameters())||(He.customParameters=JSON.stringify(f.getCustomParameters()));for(const[qt,fn]of Object.entries(ne||{}))He[qt]=fn}if(f instanceof xi){const qt=f.getScopes().filter(fn=>""!==fn);qt.length>0&&(He.scopes=qt.join(","))}b.tenantId&&(He.tid=b.tenantId);const Et=He;for(const qt of Object.keys(Et))void 0===Et[qt]&&delete Et[qt];return`${function Cg({config:b}){return b.emulator?nt(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,j.xO)(Et).slice(1)}`}const jf="webStorageSupport";class ba extends class Hf{constructor(f){this.factorId=f}_process(f,m,D){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,D);case"signin":return this._finalizeSignIn(f,m.credential);default:return je("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ba(f)}_finalizeEnroll(f,m,D){return function ic(b,f){return Ot(b,"POST","/v2/accounts/mfaEnrollment:finalize",jt(b,f))}(f,{idToken:m,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Iu(b,f){return Ot(b,"POST","/v2/accounts/mfaSignIn:finalize",jt(b,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ru=(()=>{class b{constructor(){}static assertion(m){return ba._fromCredential(m)}}return b.FACTOR_ID="phone",b})();var Tg="@firebase/auth",Zy="0.20.10";class Sg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,u.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(D=>{var G;f((null===(G=D)||void 0===G?void 0:G.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function el(){return window}function Zl(){return(Zl=(0,u.Z)(function*(b,f,m){var D;const{BuildInfo:G}=el();de(f.sessionId,"AuthEvent did not contain a session ID");const ne=yield ch(f.sessionId),He={};return we()?He.ibi=G.packageName:dr()?He.apn=G.packageName:ut(b,"operation-not-supported-in-this-environment"),G.displayName&&(He.appDisplayName=G.displayName),He.sessionId=ne,bc(b,m,f.type,void 0,null!==(D=f.eventId)&&void 0!==D?D:void 0,He)})).apply(this,arguments)}function Ou(){return(Ou=(0,u.Z)(function*(b){const{BuildInfo:f}=el(),m={};we()?m.iosBundleId=f.packageName:dr()?m.androidPackageName=f.packageName:ut(b,"operation-not-supported-in-this-environment"),yield zn(b,m)})).apply(this,arguments)}function uh(){return(uh=(0,u.Z)(function*(b,f,m){const{cordova:D}=el();let G=()=>{};try{yield new Promise((ne,He)=>{let Et=null;function qt(){var Rn;ne();const ds=null===(Rn=D.plugins.browsertab)||void 0===Rn?void 0:Rn.close;"function"==typeof ds&&ds(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function fn(){Et||(Et=window.setTimeout(()=>{He(ot(b,"redirect-cancelled-by-user"))},2e3))}function Ln(){"visible"===(null==document?void 0:document.visibilityState)&&fn()}f.addPassiveListener(qt),document.addEventListener("resume",fn,!1),dr()&&document.addEventListener("visibilitychange",Ln,!1),G=()=>{f.removePassiveListener(qt),document.removeEventListener("resume",fn,!1),document.removeEventListener("visibilitychange",Ln,!1),Et&&window.clearTimeout(Et)}})}finally{G()}})).apply(this,arguments)}function ch(b){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,u.Z)(function*(b){const f=bb(b),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function bb(b){if(de(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const f=new ArrayBuffer(b.length),m=new Uint8Array(f);for(let D=0;D<b.length;D++)m[D]=b.charCodeAt(D);return m}(0,j.Pz)("authIdTokenMaxAge"),function _b(b){(0,Ae._registerComponent)(new he.wA("auth",(f,{options:m})=>{const D=f.getProvider("app").getImmediate(),G=f.getProvider("heartbeat"),{apiKey:ne,authDomain:He}=D.options;return((Et,qt)=>{fe(ne&&!ne.includes(":"),"invalid-api-key",{appName:Et.name}),fe(!(null!=He&&He.includes(":")),"argument-error",{appName:Et.name});const fn={apiKey:ne,authDomain:He,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:on(b)},Ln=new pr(Et,qt,fn);return function tt(b,f){const m=(null==f?void 0:f.persistence)||[],D=(Array.isArray(m)?m:[m]).map(ve);null!=f&&f.errorMap&&b._updateErrorMap(f.errorMap),b._initializeWithPersistence(D,null==f?void 0:f.popupRedirectResolver)}(Ln,m),Ln})(D,G)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,D)=>{f.getProvider("auth-internal").initialize()})),(0,Ae._registerComponent)(new he.wA("auth-internal",f=>{const m=vr(f.getProvider("auth").getImmediate());return new Sg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)(Tg,Zy,function Qy(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,Ae.registerVersion)(Tg,Zy,"esm2017")}("Browser");class Wf extends Tl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,u.Z)(function*(){yield f.initPromise})()}}function Og(b){return sd.apply(this,arguments)}function sd(){return(sd=(0,u.Z)(function*(b){const f=yield us()._get(ts(b));return f&&(yield us()._remove(ts(b))),f})).apply(this,arguments)}function Ic(){const b=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const D=Math.floor(Math.random()*f.length);b.push(f.charAt(D))}return b.join("")}function us(){return ve(Zs)}function ts(b){return Oe("authEvent",b.config.apiKey,b.name)}function fh(b){if(null==b||!b.includes("?"))return{};const[f,...m]=b.split("?");return(0,j.zd)(m.join("?"))}function Pg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ot("no-auth-event")}}function od(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function xl(b=(0,j.z$)()){return!("file:"!==od()&&"ionic:"!==od()&&"capacitor:"!==od()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cc(){try{const b=self.localStorage,f=po();if(b)return b.setItem(f,"1"),b.removeItem(f),!function Fg(b=(0,j.z$)()){return function gh(){return(0,j.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Kf(b=(0,j.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,j.hl)()}catch(b){return ld()&&(0,j.hl)()}return!1}function ld(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ud(){return(function wb(){return"http:"===od()||"https:"===od()}()||(0,j.ru)()||xl())&&!function ad(){return(0,j.b$)()||(0,j.UG)()}()&&Cc()&&!ld()}function cd(){return xl()&&"undefined"!=typeof document}function Qf(){return(Qf=(0,u.Z)(function*(){return!!cd()&&new Promise(b=>{const f=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),b(!0)})})})).apply(this,arguments)}const Ss={LOCAL:"local",NONE:"none",SESSION:"session"},Dc=fe,Ql="persistence";function Tc(b){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,u.Z)(function*(b){yield b._initializationPromise;const f=Xl(),m=Oe(Ql,b.config.apiKey,b.name);f&&f.setItem(m,b._getPersistence())})).apply(this,arguments)}function Xl(){var b;try{return(null===(b=function Xf(){return"undefined"!=typeof window?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(f){return null}}const dd=fe;class ii{constructor(){this.browserResolver=ve(class Dg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qs,this._completeRedirectFn=Xo,this._overrideRedirectResult=A}_openPopup(f,m,D,G){var ne=this;return(0,u.Z)(function*(){var He;de(null===(He=ne.eventManagers[f._key()])||void 0===He?void 0:He.manager,"_initialize() not called before _openPopup()");const Et=bc(f,m,D,wt(),G);return function $f(b,f,m,D=500,G=600){const ne=Math.max((window.screen.availHeight-G)/2,0).toString(),He=Math.max((window.screen.availWidth-D)/2,0).toString();let Et="";const qt=Object.assign(Object.assign({},vc),{width:D.toString(),height:G.toString(),top:ne,left:He}),fn=(0,j.z$)().toLowerCase();m&&(Et=jn(fn)?"_blank":m),zt(fn)&&(f=f||"http://localhost",qt.scrollbars="yes");const Ln=Object.entries(qt).reduce((ds,[Jo,Ol])=>`${ds}${Jo}=${Ol},`,"");if(function vt(b=(0,j.z$)()){var f;return we(b)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(fn)&&"_self"!==Et)return function Ig(b,f){const m=document.createElement("a");m.href=b,m.target=f;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(D)}(f||"",Et),new xu(null);const Rn=window.open(f||"",Et,Ln);fe(Rn,b,"popup-blocked");try{Rn.focus()}catch(ds){}return new xu(Rn)}(f,Et,po())})()}_openRedirect(f,m,D,G){var ne=this;return(0,u.Z)(function*(){return yield ne._originValidation(f),function Xs(b){Di().location.href=b}(bc(f,m,D,wt(),G)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:G,promise:ne}=this.eventManagers[m];return G?Promise.resolve(G):(de(ne,"If manager is not set, promise should be"),ne)}const D=this.initAndGetManager(f);return this.eventManagers[m]={promise:D},D.catch(()=>{delete this.eventManagers[m]}),D}initAndGetManager(f){var m=this;return(0,u.Z)(function*(){const D=yield function to(b){return _c.apply(this,arguments)}(f),G=new Tl(f);return D.register("authEvent",ne=>(fe(null==ne?void 0:ne.authEvent,f,"invalid-auth-event"),{status:G.onEvent(ne.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:G},m.iframes[f._key()]=D,G})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(jf,{type:jf},G=>{var ne;const He=null===(ne=null==G?void 0:G[0])||void 0===ne?void 0:ne[jf];void 0!==He&&m(!!He),ut(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function zy(b){return sh.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return yn()||en()||we()}}),this.cordovaResolver=ve(class ph{constructor(){this._redirectPersistence=Qs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xo,this._overrideRedirectResult=A}_initialize(f){var m=this;return(0,u.Z)(function*(){const D=f._key();let G=m.eventManagers.get(D);return G||(G=new Wf(f),m.eventManagers.set(D,G),m.attachCallbackListeners(f,G)),G})()}_openPopup(f){ut(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,D,G){var ne=this;return(0,u.Z)(function*(){!function Mg(b){var f,m,D,G,ne,He,Et,qt,fn,Ln;const Rn=el();fe("function"==typeof(null===(f=null==Rn?void 0:Rn.universalLinks)||void 0===f?void 0:f.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fe(void 0!==(null===(m=null==Rn?void 0:Rn.BuildInfo)||void 0===m?void 0:m.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fe("function"==typeof(null===(ne=null===(G=null===(D=null==Rn?void 0:Rn.cordova)||void 0===D?void 0:D.plugins)||void 0===G?void 0:G.browsertab)||void 0===ne?void 0:ne.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(qt=null===(Et=null===(He=null==Rn?void 0:Rn.cordova)||void 0===He?void 0:He.plugins)||void 0===Et?void 0:Et.browsertab)||void 0===qt?void 0:qt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(Ln=null===(fn=null==Rn?void 0:Rn.cordova)||void 0===fn?void 0:fn.InAppBrowser)||void 0===Ln?void 0:Ln.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const He=yield ne._initialize(f);yield He.initialized(),He.resetRedirect(),function dt(){v.clear()}(),yield ne._originValidation(f);const Et=function zf(b,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Ic(),postBody:null,tenantId:b.tenantId,error:ot(b,"no-auth-event")}}(f,D,G);yield function Rg(b,f){return us()._set(ts(b),f)}(f,Et);const qt=yield function tl(b,f,m){return Zl.apply(this,arguments)}(f,Et,m),fn=yield function lh(b){const{cordova:f}=el();return new Promise(m=>{f.plugins.browsertab.isAvailable(D=>{let G=null;D?f.plugins.browsertab.openUrl(b):G=f.InAppBrowser.open(b,function at(b=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),m(G)})})}(qt);return function xg(b,f,m){return uh.apply(this,arguments)}(f,He,fn)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Gf(b){return Ou.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:D,handleOpenURL:G,BuildInfo:ne}=el(),He=setTimeout((0,u.Z)(function*(){yield Og(f),m.onEvent(Pg())}),500),Et=function(){var Ln=(0,u.Z)(function*(Rn){clearTimeout(He);const ds=yield Og(f);let Jo=null;ds&&(null==Rn?void 0:Rn.url)&&(Jo=function dh(b,f){var m,D;const G=function Gi(b){const f=fh(b),m=f.link?decodeURIComponent(f.link):void 0,D=fh(m).link,G=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return fh(G).link||G||D||m||b}(f);if(G.includes("/__/auth/callback")){const ne=fh(G),He=ne.firebaseError?function hh(b){try{return JSON.parse(b)}catch(f){return null}}(decodeURIComponent(ne.firebaseError)):null,Et=null===(D=null===(m=null==He?void 0:He.code)||void 0===m?void 0:m.split("auth/"))||void 0===D?void 0:D[1],qt=Et?ot(Et):null;return qt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:qt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:G,postBody:null}}return null}(ds,Rn.url)),m.onEvent(Jo||Pg())});return function(ds){return Ln.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,Et);const qt=G,fn=`${ne.packageName.toLowerCase()}://`;el().handleOpenURL=function(){var Ln=(0,u.Z)(function*(Rn){if(Rn.toLowerCase().startsWith(fn)&&Et({url:Rn}),"function"==typeof qt)try{qt(Rn)}catch(ds){console.error(ds)}});return function(Rn){return Ln.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qs,this._completeRedirectFn=Xo,this._overrideRedirectResult=A}_initialize(f){var m=this;return(0,u.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,D,G){var ne=this;return(0,u.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._openPopup(f,m,D,G)})()}_openRedirect(f,m,D,G){var ne=this;return(0,u.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._openRedirect(f,m,D,G)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return cd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,u.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Zf(){return Qf.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function mh(b){return b.unwrap()}function yh(b){return hd(b)}function hd(b){const{_tokenResponse:f}=b instanceof j.ZR?b.customData:b;if(!f)return null;if(!(b instanceof j.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return bl.credentialFromResult(b);const m=f.providerId;if(!m||"password"===m)return null;let D;switch(m){case"google.com":D=ks;break;case"facebook.com":D=Eo;break;case"github.com":D=Io;break;case"twitter.com":D=ai;break;default:const{oauthIdToken:G,oauthAccessToken:ne,oauthTokenSecret:He,pendingToken:Et,nonce:qt}=f;return ne||He||G||Et?Et?m.startsWith("saml.")?ws._create(m,Et):wi._fromParams({providerId:m,signInMethod:m,pendingToken:Et,idToken:G,accessToken:ne}):new Ws(m).credential({idToken:G,accessToken:ne,rawNonce:qt}):null}return b instanceof j.ZR?D.credentialFromError(b):D.credentialFromResult(b)}function cs(b,f){return f.catch(m=>{throw m instanceof j.ZR&&function Bg(b,f){var m,D;const G=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(D=f)||void 0===D?void 0:D.code))f.resolver=new Jf(b,function wr(b,f){var m;const D=(0,j.m9)(b),G=f;return fe(f.customData.operationType,D,"argument-error"),fe(null===(m=G.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,D,"argument-error"),Ta._fromError(D,G)}(b,f));else if(G){const ne=hd(f),He=f;ne&&(He.credential=ne,He.tenantId=G.tenantId||void 0,He.email=G.email||void 0,He.phoneNumber=G.phoneNumber||void 0)}}(b,m),m}).then(m=>{const G=m.user;return{operationType:m.operationType,credential:yh(m),additionalUserInfo:fr(m),user:Na.getOrCreate(G)}})}function _h(b,f){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,u.Z)(function*(b,f){const m=yield f;return{verificationId:m.verificationId,confirm:D=>cs(b,m.confirm(D))}})).apply(this,arguments)}class Jf{constructor(f,m){this.resolver=m,this.auth=function Pu(b){return b.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return cs(mh(this.auth),this.resolver.resolveSignIn(f))}}class Na{constructor(f){this._delegate=f,this.multiFactor=function fl(b){const f=(0,j.m9)(b);return Gl.has(f)||Gl.set(f,sc._fromUser(f)),Gl.get(f)}(f)}static getOrCreate(f){return Na.USER_MAP.has(f)||Na.USER_MAP.set(f,new Na(f)),Na.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,u.Z)(function*(){return cs(m.auth,uo(m._delegate,f))})()}linkWithPhoneNumber(f,m){var D=this;return(0,u.Z)(function*(){return _h(D.auth,function os(b,f,m){return Js.apply(this,arguments)}(D._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,u.Z)(function*(){return cs(m.auth,function td(b,f,m){return ka.apply(this,arguments)}(m._delegate,f,ii))})()}linkWithRedirect(f){var m=this;return(0,u.Z)(function*(){return yield Tc(vr(m.auth)),function Hn(b,f,m){return function ar(b,f,m){return hn.apply(this,arguments)}(b,f,m)}(m._delegate,f,ii)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,u.Z)(function*(){return cs(m.auth,co(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return _h(this.auth,function _l(b,f,m){return Oa.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return cs(this.auth,function Il(b,f,m){return Cl.apply(this,arguments)}(this._delegate,f,ii))}reauthenticateWithRedirect(f){var m=this;return(0,u.Z)(function*(){return yield Tc(vr(m.auth)),function Rt(b,f,m){return function Gt(b,f,m){return vn.apply(this,arguments)}(b,f,m)}(m._delegate,f,ii)})()}sendEmailVerification(f){return function ti(b,f){return ki.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,u.Z)(function*(){return yield function Ei(b,f){return ns.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function k(b,f){return N((0,j.m9)(b),f,null)}(this._delegate,f)}updatePassword(f){return function z(b,f){return N((0,j.m9)(b),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ed(b,f){return vl.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Vo(b,f){return dl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function is(b,f,m){return Fs.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Na.USER_MAP=new WeakMap;const Rl=fe;let fd=(()=>{class b{constructor(m,D){if(this.app=m,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=m.options;Rl(G,"invalid-api-key",{appName:m.name}),Rl(G,"invalid-api-key",{appName:m.name});const ne="undefined"!=typeof window?ii:void 0;this._delegate=D.initialize({options:{persistence:Vg(G,m.name),popupRedirectResolver:ne}}),this._delegate._updateErrorMap($e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Na.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,D){!function Zr(b,f,m){const D=vr(b);fe(D._canInitEmulator,D,"emulator-config-failed"),fe(/^https?:\/\//.test(f),D,"invalid-emulator-scheme");const G=!(null==m||!m.disableWarnings),ne=Wn(f),{host:He,port:Et}=function ui(b){const f=Wn(b),m=/(\/\/)?([^?#/]+)/.exec(b.substr(f.length));if(!m)return{host:"",port:null};const D=m[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(D);if(G){const ne=G[1];return{host:ne,port:Br(D.substr(ne.length+1))}}{const[ne,He]=D.split(":");return{host:ne,port:Br(He)}}}(f);D.config.emulator={url:`${ne}//${He}${null===Et?"":`:${Et}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:He,port:Et,protocol:ne.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function In(){function b(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,m,D)}applyActionCode(m){return function Qi(b,f){return Ns.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return V(this._delegate,m)}confirmPasswordReset(m,D){return function Bo(b,f,m){return gi.apply(this,arguments)}(this._delegate,m,D)}createUserWithEmailAndPassword(m,D){var G=this;return(0,u.Z)(function*(){return cs(G._delegate,function M(b,f,m){return _.apply(this,arguments)}(G._delegate,m,D))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Sr(b,f){return li.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Ft(b,f){const m=wo.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,u.Z)(function*(){Rl(ud(),m._delegate,"operation-not-supported-in-this-environment");const D=yield function yi(b,f){return ls.apply(this,arguments)}(m._delegate,ii);return D?cs(m._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Ng(b,f){vr(b)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,D,G){const{next:ne,error:He,complete:Et}=Fu(m,D,G);return this._delegate.onAuthStateChanged(ne,He,Et)}onIdTokenChanged(m,D,G){const{next:ne,error:He,complete:Et}=Fu(m,D,G);return this._delegate.onIdTokenChanged(ne,He,Et)}sendSignInLinkToEmail(m,D){return function ee(b,f,m){return lt.apply(this,arguments)}(this._delegate,m,D)}sendPasswordResetEmail(m,D){return function ha(b,f,m){return ei.apply(this,arguments)}(this._delegate,m,D||void 0)}setPersistence(m){var D=this;return(0,u.Z)(function*(){let G;switch(function ku(b,f){Dc(Object.values(Ss).includes(f),b,"invalid-persistence-type"),(0,j.b$)()?Dc(f!==Ss.SESSION,b,"unsupported-persistence-type"):(0,j.UG)()?Dc(f===Ss.NONE,b,"unsupported-persistence-type"):ld()?Dc(f===Ss.NONE||f===Ss.LOCAL&&(0,j.hl)(),b,"unsupported-persistence-type"):Dc(f===Ss.NONE||Cc(),b,"unsupported-persistence-type")}(D._delegate,m),m){case Ss.SESSION:G=Qs;break;case Ss.LOCAL:G=(yield ve(ss)._isAvailable())?ss:Zs;break;case Ss.NONE:G=Ce;break;default:return ut("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return cs(this._delegate,function Es(b){return Mr.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return cs(this._delegate,Dr(this._delegate,m))}signInWithCustomToken(m){return cs(this._delegate,function Da(b,f){return To.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,D){return cs(this._delegate,function F(b,f,m){return Dr((0,j.m9)(b),Zi.credential(f,m))}(this._delegate,m,D))}signInWithEmailLink(m,D){return cs(this._delegate,function Xt(b,f,m){return Tn.apply(this,arguments)}(this._delegate,m,D))}signInWithPhoneNumber(m,D){return _h(this._delegate,function Yl(b,f,m){return Du.apply(this,arguments)}(this._delegate,m,D))}signInWithPopup(m){var D=this;return(0,u.Z)(function*(){return Rl(ud(),D._delegate,"operation-not-supported-in-this-environment"),cs(D._delegate,function pc(b,f,m){return gc.apply(this,arguments)}(D._delegate,m,ii))})()}signInWithRedirect(m){var D=this;return(0,u.Z)(function*(){return Rl(ud(),D._delegate,"operation-not-supported-in-this-environment"),yield Tc(D._delegate),function le(b,f,m){return function Be(b,f,m){return ct.apply(this,arguments)}(b,f,m)}(D._delegate,m,ii)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function R(b,f){return p.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Ss,b})();function Fu(b,f,m){let D=b;"function"!=typeof b&&({next:D,error:f,complete:m}=b);const G=D;return{next:He=>G(He&&Na.getOrCreate(He)),error:f,complete:m}}function Vg(b,f){const m=function Lg(b,f){const m=Xl();if(!m)return[];const D=Oe(Ql,b,f);switch(m.getItem(D)){case Ss.NONE:return[Ce];case Ss.LOCAL:return[ss,Qs];case Ss.SESSION:return[Qs];default:return[]}}(b,f);if("undefined"!=typeof self&&!m.includes(ss)&&m.push(ss),"undefined"!=typeof window)for(const D of[Zs,Qs])m.includes(D)||m.push(D);return m.includes(Ce)||m.push(Ce),m}class vh{constructor(){this.providerId="phone",this._delegate=new bl(mh(W.Z.auth()))}static credential(f,m){return bl.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}vh.PHONE_SIGN_IN_METHOD=bl.PHONE_SIGN_IN_METHOD,vh.PROVIDER_ID=bl.PROVIDER_ID;const $g=fe;class bh{constructor(f,m,D=W.Z.app()){var G;$g(null===(G=D.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new es(f,m,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ug(b){b.INTERNAL.registerComponent(new he.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),D=f.getProvider("auth");return new fd(m,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zi,FacebookAuthProvider:Eo,GithubAuthProvider:Io,GoogleAuthProvider:ks,OAuthProvider:Ws,SAMLAuthProvider:Ri,PhoneAuthProvider:vh,PhoneMultiFactorGenerator:Ru,RecaptchaVerifier:bh,TwitterAuthProvider:ai,Auth:fd,AuthCredential:ci,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.23")}(W.Z)},591:($t,ze,$)=>{"use strict";$.d(ze,{X:()=>j});var u=$(8929),W=$(5279);class j extends u.xQ{constructor(Te){super(),this._value=Te}get value(){return this.getValue()}_subscribe(Te){const ae=super._subscribe(Te);return ae&&!ae.closed&&Te.next(this._value),ae}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new W.N;return this._value}next(Te){super.next(this._value=Te)}}},6498:($t,ze,$)=>{"use strict";$.d(ze,{y:()=>ye});var u=$(3489),j=$(7668),Ae=$(3292),ae=$(3821),he=$(4843),oe=$(2830);let ye=(()=>{class se{constructor(ge){this._isScalar=!1,ge&&(this._subscribe=ge)}lift(ge){const Re=new se;return Re.source=this,Re.operator=ge,Re}subscribe(ge,Re,$e){const{operator:Le}=this,Ie=function Te(se,X,ge){if(se){if(se instanceof u.L)return se;if(se[j.b])return se[j.b]()}return se||X||ge?new u.L(se,X,ge):new u.L(Ae.c)}(ge,Re,$e);if(Ie.add(Le?Le.call(Ie,this.source):this.source||oe.v.useDeprecatedSynchronousErrorHandling&&!Ie.syncErrorThrowable?this._subscribe(Ie):this._trySubscribe(Ie)),oe.v.useDeprecatedSynchronousErrorHandling&&Ie.syncErrorThrowable&&(Ie.syncErrorThrowable=!1,Ie.syncErrorThrown))throw Ie.syncErrorValue;return Ie}_trySubscribe(ge){try{return this._subscribe(ge)}catch(Re){oe.v.useDeprecatedSynchronousErrorHandling&&(ge.syncErrorThrown=!0,ge.syncErrorValue=Re),function W(se){for(;se;){const{closed:X,destination:ge,isStopped:Re}=se;if(X||Re)return!1;se=ge&&ge instanceof u.L?ge:null}return!0}(ge)?ge.error(Re):console.warn(Re)}}forEach(ge,Re){return new(Re=te(Re))(($e,Le)=>{let Ie;Ie=this.subscribe(_e=>{try{ge(_e)}catch(Qe){Le(Qe),Ie&&Ie.unsubscribe()}},Le,$e)})}_subscribe(ge){const{source:Re}=this;return Re&&Re.subscribe(ge)}[ae.L](){return this}pipe(...ge){return 0===ge.length?this:(0,he.U)(ge)(this)}toPromise(ge){return new(ge=te(ge))((Re,$e)=>{let Le;this.subscribe(Ie=>Le=Ie,Ie=>$e(Ie),()=>Re(Le))})}}return se.create=X=>new se(X),se})();function te(se){if(se||(se=oe.v.Promise||Promise),!se)throw new Error("no Promise impl found");return se}},3292:($t,ze,$)=>{"use strict";$.d(ze,{c:()=>j});var u=$(2830),W=$(2782);const j={closed:!0,next(Ae){},error(Ae){if(u.v.useDeprecatedSynchronousErrorHandling)throw Ae;(0,W.z)(Ae)},complete(){}}},826:($t,ze,$)=>{"use strict";$.d(ze,{L:()=>W});var u=$(3489);class W extends u.L{notifyNext(Ae,Te,ae,he,oe){this.destination.next(Te)}notifyError(Ae,Te){this.destination.error(Ae)}notifyComplete(Ae){this.destination.complete()}}},8929:($t,ze,$)=>{"use strict";$.d(ze,{Yc:()=>he,xQ:()=>oe});var u=$(6498),W=$(3489),j=$(2654),Ae=$(5279),Te=$(5283),ae=$(7668);class he extends W.L{constructor(se){super(se),this.destination=se}}let oe=(()=>{class te extends u.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ae.b](){return new he(this)}lift(X){const ge=new ye(this,this);return ge.operator=X,ge}next(X){if(this.closed)throw new Ae.N;if(!this.isStopped){const{observers:ge}=this,Re=ge.length,$e=ge.slice();for(let Le=0;Le<Re;Le++)$e[Le].next(X)}}error(X){if(this.closed)throw new Ae.N;this.hasError=!0,this.thrownError=X,this.isStopped=!0;const{observers:ge}=this,Re=ge.length,$e=ge.slice();for(let Le=0;Le<Re;Le++)$e[Le].error(X);this.observers.length=0}complete(){if(this.closed)throw new Ae.N;this.isStopped=!0;const{observers:X}=this,ge=X.length,Re=X.slice();for(let $e=0;$e<ge;$e++)Re[$e].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(X){if(this.closed)throw new Ae.N;return super._trySubscribe(X)}_subscribe(X){if(this.closed)throw new Ae.N;return this.hasError?(X.error(this.thrownError),j.w.EMPTY):this.isStopped?(X.complete(),j.w.EMPTY):(this.observers.push(X),new Te.W(this,X))}asObservable(){const X=new u.y;return X.source=this,X}}return te.create=(se,X)=>new ye(se,X),te})();class ye extends oe{constructor(se,X){super(),this.destination=se,this.source=X}next(se){const{destination:X}=this;X&&X.next&&X.next(se)}error(se){const{destination:X}=this;X&&X.error&&this.destination.error(se)}complete(){const{destination:se}=this;se&&se.complete&&this.destination.complete()}_subscribe(se){const{source:X}=this;return X?this.source.subscribe(se):j.w.EMPTY}}},5283:($t,ze,$)=>{"use strict";$.d(ze,{W:()=>W});var u=$(2654);class W extends u.w{constructor(Ae,Te){super(),this.subject=Ae,this.subscriber=Te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Ae=this.subject,Te=Ae.observers;if(this.subject=null,!Te||0===Te.length||Ae.isStopped||Ae.closed)return;const ae=Te.indexOf(this.subscriber);-1!==ae&&Te.splice(ae,1)}}},3489:($t,ze,$)=>{"use strict";$.d(ze,{L:()=>he});var u=$(7043),W=$(3292),j=$(2654),Ae=$(7668),Te=$(2830),ae=$(2782);class he extends j.w{constructor(te,se,X){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=W.c;break;case 1:if(!te){this.destination=W.c;break}if("object"==typeof te){te instanceof he?(this.syncErrorThrowable=te.syncErrorThrowable,this.destination=te,te.add(this)):(this.syncErrorThrowable=!0,this.destination=new oe(this,te));break}default:this.syncErrorThrowable=!0,this.destination=new oe(this,te,se,X)}}[Ae.b](){return this}static create(te,se,X){const ge=new he(te,se,X);return ge.syncErrorThrowable=!1,ge}next(te){this.isStopped||this._next(te)}error(te){this.isStopped||(this.isStopped=!0,this._error(te))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(te){this.destination.next(te)}_error(te){this.destination.error(te),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:te}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=te,this}}class oe extends he{constructor(te,se,X,ge){super(),this._parentSubscriber=te;let Re,$e=this;(0,u.m)(se)?Re=se:se&&(Re=se.next,X=se.error,ge=se.complete,se!==W.c&&($e=Object.create(se),(0,u.m)($e.unsubscribe)&&this.add($e.unsubscribe.bind($e)),$e.unsubscribe=this.unsubscribe.bind(this))),this._context=$e,this._next=Re,this._error=X,this._complete=ge}next(te){if(!this.isStopped&&this._next){const{_parentSubscriber:se}=this;Te.v.useDeprecatedSynchronousErrorHandling&&se.syncErrorThrowable?this.__tryOrSetError(se,this._next,te)&&this.unsubscribe():this.__tryOrUnsub(this._next,te)}}error(te){if(!this.isStopped){const{_parentSubscriber:se}=this,{useDeprecatedSynchronousErrorHandling:X}=Te.v;if(this._error)X&&se.syncErrorThrowable?(this.__tryOrSetError(se,this._error,te),this.unsubscribe()):(this.__tryOrUnsub(this._error,te),this.unsubscribe());else if(se.syncErrorThrowable)X?(se.syncErrorValue=te,se.syncErrorThrown=!0):(0,ae.z)(te),this.unsubscribe();else{if(this.unsubscribe(),X)throw te;(0,ae.z)(te)}}}complete(){if(!this.isStopped){const{_parentSubscriber:te}=this;if(this._complete){const se=()=>this._complete.call(this._context);Te.v.useDeprecatedSynchronousErrorHandling&&te.syncErrorThrowable?(this.__tryOrSetError(te,se),this.unsubscribe()):(this.__tryOrUnsub(se),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(te,se){try{te.call(this._context,se)}catch(X){if(this.unsubscribe(),Te.v.useDeprecatedSynchronousErrorHandling)throw X;(0,ae.z)(X)}}__tryOrSetError(te,se,X){if(!Te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{se.call(this._context,X)}catch(ge){return Te.v.useDeprecatedSynchronousErrorHandling?(te.syncErrorValue=ge,te.syncErrorThrown=!0,!0):((0,ae.z)(ge),!0)}return!1}_unsubscribe(){const{_parentSubscriber:te}=this;this._context=null,this._parentSubscriber=null,te.unsubscribe()}}},2654:($t,ze,$)=>{"use strict";$.d(ze,{w:()=>ae});var u=$(6688),W=$(7830),j=$(7043);const Te=(()=>{function oe(ye){return Error.call(this),this.message=ye?`${ye.length} errors occurred during unsubscription:\n${ye.map((te,se)=>`${se+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ye,this}return oe.prototype=Object.create(Error.prototype),oe})();class ae{constructor(ye){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ye&&(this._ctorUnsubscribe=!0,this._unsubscribe=ye)}unsubscribe(){let ye;if(this.closed)return;let{_parentOrParents:te,_ctorUnsubscribe:se,_unsubscribe:X,_subscriptions:ge}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,te instanceof ae)te.remove(this);else if(null!==te)for(let Re=0;Re<te.length;++Re)te[Re].remove(this);if((0,j.m)(X)){se&&(this._unsubscribe=void 0);try{X.call(this)}catch(Re){ye=Re instanceof Te?he(Re.errors):[Re]}}if((0,u.k)(ge)){let Re=-1,$e=ge.length;for(;++Re<$e;){const Le=ge[Re];if((0,W.K)(Le))try{Le.unsubscribe()}catch(Ie){ye=ye||[],Ie instanceof Te?ye=ye.concat(he(Ie.errors)):ye.push(Ie)}}}if(ye)throw new Te(ye)}add(ye){let te=ye;if(!ye)return ae.EMPTY;switch(typeof ye){case"function":te=new ae(ye);case"object":if(te===this||te.closed||"function"!=typeof te.unsubscribe)return te;if(this.closed)return te.unsubscribe(),te;if(!(te instanceof ae)){const ge=te;te=new ae,te._subscriptions=[ge]}break;default:throw new Error("unrecognized teardown "+ye+" added to Subscription.")}let{_parentOrParents:se}=te;if(null===se)te._parentOrParents=this;else if(se instanceof ae){if(se===this)return te;te._parentOrParents=[se,this]}else{if(-1!==se.indexOf(this))return te;se.push(this)}const X=this._subscriptions;return null===X?this._subscriptions=[te]:X.push(te),te}remove(ye){const te=this._subscriptions;if(te){const se=te.indexOf(ye);-1!==se&&te.splice(se,1)}}}var oe;function he(oe){return oe.reduce((ye,te)=>ye.concat(te instanceof Te?te.errors:te),[])}ae.EMPTY=((oe=new ae).closed=!0,oe)},2830:($t,ze,$)=>{"use strict";$.d(ze,{v:()=>W});let u=!1;const W={Promise:void 0,set useDeprecatedSynchronousErrorHandling(j){if(j){const Ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Ae.stack)}else u&&console.log("RxJS: Back to a better error behavior. Thank you. <3");u=j},get useDeprecatedSynchronousErrorHandling(){return u}}},1177:($t,ze,$)=>{"use strict";$.d(ze,{Ds:()=>ae,IY:()=>Ae,ft:()=>oe});var u=$(3489),W=$(6498),j=$(9249);class Ae extends u.L{constructor(te){super(),this.parent=te}_next(te){this.parent.notifyNext(te)}_error(te){this.parent.notifyError(te),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ae extends u.L{notifyNext(te){this.destination.next(te)}notifyError(te){this.destination.error(te)}notifyComplete(){this.destination.complete()}}function oe(ye,te){if(te.closed)return;if(ye instanceof W.y)return ye.subscribe(te);let se;try{se=(0,j.s)(ye)(te)}catch(X){te.error(X)}return se}},1762:($t,ze,$)=>{"use strict";$.d(ze,{N:()=>ae,c:()=>Te});var u=$(8929),W=$(6498),j=$(2654),Ae=$(4327);class Te extends W.y{constructor(se,X){super(),this.source=se,this.subjectFactory=X,this._refCount=0,this._isComplete=!1}_subscribe(se){return this.getSubject().subscribe(se)}getSubject(){const se=this._subject;return(!se||se.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let se=this._connection;return se||(this._isComplete=!1,se=this._connection=new j.w,se.add(this.source.subscribe(new he(this.getSubject(),this))),se.closed&&(this._connection=null,se=j.w.EMPTY)),se}refCount(){return(0,Ae.x)()(this)}}const ae=(()=>{const te=Te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:te._subscribe},_isComplete:{value:te._isComplete,writable:!0},getSubject:{value:te.getSubject},connect:{value:te.connect},refCount:{value:te.refCount}}})();class he extends u.Yc{constructor(se,X){super(se),this.connectable=X}_error(se){this._unsubscribe(),super._error(se)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const se=this.connectable;if(se){this.connectable=null;const X=se._connection;se._refCount=0,se._subject=null,se._connection=null,X&&X.unsubscribe()}}}},1221:($t,ze,$)=>{"use strict";$.d(ze,{z:()=>Ae});var u=$(1086),W=$(9146);function Ae(...Te){return function j(){return(0,W.J)(1)}()((0,u.of)(...Te))}},8896:($t,ze,$)=>{"use strict";$.d(ze,{E:()=>W,c:()=>j});var u=$(6498);const W=new u.y(Te=>Te.complete());function j(Te){return Te?function Ae(Te){return new u.y(ae=>Te.schedule(()=>ae.complete()))}(Te):W}},5254:($t,ze,$)=>{"use strict";$.d(ze,{D:()=>$e});var u=$(6498),W=$(9249),j=$(2654),Ae=$(3821),he=$(6454),oe=$(5430),se=$(8955),X=$(8515);function $e(Le,Ie){return Ie?function Re(Le,Ie){if(null!=Le){if(function te(Le){return Le&&"function"==typeof Le[Ae.L]}(Le))return function Te(Le,Ie){return new u.y(_e=>{const Qe=new j.w;return Qe.add(Ie.schedule(()=>{const Ke=Le[Ae.L]();Qe.add(Ke.subscribe({next(ut){Qe.add(Ie.schedule(()=>_e.next(ut)))},error(ut){Qe.add(Ie.schedule(()=>_e.error(ut)))},complete(){Qe.add(Ie.schedule(()=>_e.complete()))}}))})),Qe})}(Le,Ie);if((0,se.t)(Le))return function ae(Le,Ie){return new u.y(_e=>{const Qe=new j.w;return Qe.add(Ie.schedule(()=>Le.then(Ke=>{Qe.add(Ie.schedule(()=>{_e.next(Ke),Qe.add(Ie.schedule(()=>_e.complete()))}))},Ke=>{Qe.add(Ie.schedule(()=>_e.error(Ke)))}))),Qe})}(Le,Ie);if((0,X.z)(Le))return(0,he.r)(Le,Ie);if(function ge(Le){return Le&&"function"==typeof Le[oe.hZ]}(Le)||"string"==typeof Le)return function ye(Le,Ie){if(!Le)throw new Error("Iterable cannot be null");return new u.y(_e=>{const Qe=new j.w;let Ke;return Qe.add(()=>{Ke&&"function"==typeof Ke.return&&Ke.return()}),Qe.add(Ie.schedule(()=>{Ke=Le[oe.hZ](),Qe.add(Ie.schedule(function(){if(_e.closed)return;let ut,ot;try{const Ct=Ke.next();ut=Ct.value,ot=Ct.done}catch(Ct){return void _e.error(Ct)}ot?_e.complete():(_e.next(ut),this.schedule())}))})),Qe})}(Le,Ie)}throw new TypeError((null!==Le&&typeof Le||Le)+" is not observable")}(Le,Ie):Le instanceof u.y?Le:new u.y((0,W.s)(Le))}},3009:($t,ze,$)=>{"use strict";$.d(ze,{n:()=>Ae});var u=$(6498),W=$(3650),j=$(6454);function Ae(Te,ae){return ae?(0,j.r)(Te,ae):new u.y((0,W.V)(Te))}},6787:($t,ze,$)=>{"use strict";$.d(ze,{T:()=>Te});var u=$(6498),W=$(2866),j=$(9146),Ae=$(3009);function Te(...ae){let he=Number.POSITIVE_INFINITY,oe=null,ye=ae[ae.length-1];return(0,W.K)(ye)?(oe=ae.pop(),ae.length>1&&"number"==typeof ae[ae.length-1]&&(he=ae.pop())):"number"==typeof ye&&(he=ae.pop()),null===oe&&1===ae.length&&ae[0]instanceof u.y?ae[0]:(0,j.J)(he)((0,Ae.n)(ae,oe))}},1086:($t,ze,$)=>{"use strict";$.d(ze,{of:()=>Ae});var u=$(2866),W=$(3009),j=$(6454);function Ae(...Te){let ae=Te[Te.length-1];return(0,u.K)(ae)?(Te.pop(),(0,j.r)(Te,ae)):(0,W.n)(Te)}},1737:($t,ze,$)=>{"use strict";$.d(ze,{_:()=>W});var u=$(6498);function W(Ae,Te){return new u.y(Te?ae=>Te.schedule(j,0,{error:Ae,subscriber:ae}):ae=>ae.error(Ae))}function j({error:Ae,subscriber:Te}){Te.error(Ae)}},7314:($t,ze,$)=>{"use strict";$.d(ze,{d:()=>W});var u=$(3489);function W(Te=null){return ae=>ae.lift(new j(Te))}class j{constructor(ae){this.defaultValue=ae}call(ae,he){return he.subscribe(new Ae(ae,this.defaultValue))}}class Ae extends u.L{constructor(ae,he){super(ae),this.defaultValue=he,this.isEmpty=!0}_next(ae){this.isEmpty=!1,this.destination.next(ae)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:($t,ze,$)=>{"use strict";$.d(ze,{x:()=>W});var u=$(3489);function W(Te,ae){return he=>he.lift(new j(Te,ae))}class j{constructor(ae,he){this.compare=ae,this.keySelector=he}call(ae,he){return he.subscribe(new Ae(ae,this.compare,this.keySelector))}}class Ae extends u.L{constructor(ae,he,oe){super(ae),this.keySelector=oe,this.hasKey=!1,"function"==typeof he&&(this.compare=he)}compare(ae,he){return ae===he}_next(ae){let he;try{const{keySelector:ye}=this;he=ye?ye(ae):ae}catch(ye){return this.destination.error(ye)}let oe=!1;if(this.hasKey)try{const{compare:ye}=this;oe=ye(this.key,he)}catch(ye){return this.destination.error(ye)}else this.hasKey=!0;oe||(this.key=he,this.destination.next(ae))}}},2198:($t,ze,$)=>{"use strict";$.d(ze,{h:()=>W});var u=$(3489);function W(Te,ae){return function(oe){return oe.lift(new j(Te,ae))}}class j{constructor(ae,he){this.predicate=ae,this.thisArg=he}call(ae,he){return he.subscribe(new Ae(ae,this.predicate,this.thisArg))}}class Ae extends u.L{constructor(ae,he,oe){super(ae),this.predicate=he,this.thisArg=oe,this.count=0}_next(ae){let he;try{he=this.predicate.call(this.thisArg,ae,this.count++)}catch(oe){return void this.destination.error(oe)}he&&this.destination.next(ae)}}},7224:($t,ze,$)=>{"use strict";$.d(ze,{P:()=>he});var u=$(4450),W=$(2198),j=$(2986),Ae=$(7314),Te=$(4907),ae=$(5379);function he(oe,ye){const te=arguments.length>=2;return se=>se.pipe(oe?(0,W.h)((X,ge)=>oe(X,ge,se)):ae.y,(0,j.q)(1),te?(0,Ae.d)(ye):(0,Te.T)(()=>new u.K))}},4850:($t,ze,$)=>{"use strict";$.d(ze,{U:()=>W});var u=$(3489);function W(Te,ae){return function(oe){if("function"!=typeof Te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return oe.lift(new j(Te,ae))}}class j{constructor(ae,he){this.project=ae,this.thisArg=he}call(ae,he){return he.subscribe(new Ae(ae,this.project,this.thisArg))}}class Ae extends u.L{constructor(ae,he,oe){super(ae),this.project=he,this.count=0,this.thisArg=oe||this}_next(ae){let he;try{he=this.project.call(this.thisArg,ae,this.count++)}catch(oe){return void this.destination.error(oe)}this.destination.next(he)}}},9146:($t,ze,$)=>{"use strict";$.d(ze,{J:()=>j});var u=$(1709),W=$(5379);function j(Ae=Number.POSITIVE_INFINITY){return(0,u.zg)(W.y,Ae)}},1709:($t,ze,$)=>{"use strict";$.d(ze,{zg:()=>Ae});var u=$(4850),W=$(5254),j=$(1177);function Ae(oe,ye,te=Number.POSITIVE_INFINITY){return"function"==typeof ye?se=>se.pipe(Ae((X,ge)=>(0,W.D)(oe(X,ge)).pipe((0,u.U)((Re,$e)=>ye(X,Re,ge,$e))),te)):("number"==typeof ye&&(te=ye),se=>se.lift(new Te(oe,te)))}class Te{constructor(ye,te=Number.POSITIVE_INFINITY){this.project=ye,this.concurrent=te}call(ye,te){return te.subscribe(new ae(ye,this.project,this.concurrent))}}class ae extends j.Ds{constructor(ye,te,se=Number.POSITIVE_INFINITY){super(ye),this.project=te,this.concurrent=se,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ye){this.active<this.concurrent?this._tryNext(ye):this.buffer.push(ye)}_tryNext(ye){let te;const se=this.index++;try{te=this.project(ye,se)}catch(X){return void this.destination.error(X)}this.active++,this._innerSub(te)}_innerSub(ye){const te=new j.IY(this),se=this.destination;se.add(te);const X=(0,j.ft)(ye,te);X!==te&&se.add(X)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ye){this.destination.next(ye)}notifyComplete(){const ye=this.buffer;this.active--,ye.length>0?this._next(ye.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:($t,ze,$)=>{"use strict";$.d(ze,{ht:()=>ye,QV:()=>he});var u=$(3489),W=$(8896),j=$(1086),Ae=$(1737);class ae{constructor(X,ge,Re){this.kind=X,this.value=ge,this.error=Re,this.hasValue="N"===X}observe(X){switch(this.kind){case"N":return X.next&&X.next(this.value);case"E":return X.error&&X.error(this.error);case"C":return X.complete&&X.complete()}}do(X,ge,Re){switch(this.kind){case"N":return X&&X(this.value);case"E":return ge&&ge(this.error);case"C":return Re&&Re()}}accept(X,ge,Re){return X&&"function"==typeof X.next?this.observe(X):this.do(X,ge,Re)}toObservable(){switch(this.kind){case"N":return(0,j.of)(this.value);case"E":return(0,Ae._)(this.error);case"C":return(0,W.c)()}throw new Error("unexpected notification kind value")}static createNext(X){return void 0!==X?new ae("N",X):ae.undefinedValueNotification}static createError(X){return new ae("E",void 0,X)}static createComplete(){return ae.completeNotification}}function he(se,X=0){return function(Re){return Re.lift(new oe(se,X))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class oe{constructor(X,ge=0){this.scheduler=X,this.delay=ge}call(X,ge){return ge.subscribe(new ye(X,this.scheduler,this.delay))}}class ye extends u.L{constructor(X,ge,Re=0){super(X),this.scheduler=ge,this.delay=Re}static dispatch(X){const{notification:ge,destination:Re}=X;ge.observe(Re),this.unsubscribe()}scheduleMessage(X){this.destination.add(this.scheduler.schedule(ye.dispatch,this.delay,new te(X,this.destination)))}_next(X){this.scheduleMessage(ae.createNext(X))}_error(X){this.scheduleMessage(ae.createError(X)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class te{constructor(X,ge){this.notification=X,this.destination=ge}}},4327:($t,ze,$)=>{"use strict";$.d(ze,{x:()=>W});var u=$(3489);function W(){return function(ae){return ae.lift(new j(ae))}}class j{constructor(ae){this.connectable=ae}call(ae,he){const{connectable:oe}=this;oe._refCount++;const ye=new Ae(ae,oe),te=he.subscribe(ye);return ye.closed||(ye.connection=oe.connect()),te}}class Ae extends u.L{constructor(ae,he){super(ae),this.connectable=he}_unsubscribe(){const{connectable:ae}=this;if(!ae)return void(this.connection=null);this.connectable=null;const he=ae._refCount;if(he<=0)return void(this.connection=null);if(ae._refCount=he-1,he>1)return void(this.connection=null);const{connection:oe}=this,ye=ae._connection;this.connection=null,ye&&(!oe||ye===oe)&&ye.unsubscribe()}}},2014:($t,ze,$)=>{"use strict";$.d(ze,{R:()=>W});var u=$(3489);function W(Te,ae){let he=!1;return arguments.length>=2&&(he=!0),function(ye){return ye.lift(new j(Te,ae,he))}}class j{constructor(ae,he,oe=!1){this.accumulator=ae,this.seed=he,this.hasSeed=oe}call(ae,he){return he.subscribe(new Ae(ae,this.accumulator,this.seed,this.hasSeed))}}class Ae extends u.L{constructor(ae,he,oe,ye){super(ae),this.accumulator=he,this._seed=oe,this.hasSeed=ye,this.index=0}get seed(){return this._seed}set seed(ae){this.hasSeed=!0,this._seed=ae}_next(ae){if(this.hasSeed)return this._tryNext(ae);this.seed=ae,this.destination.next(ae)}_tryNext(ae){const he=this.index++;let oe;try{oe=this.accumulator(this.seed,ae,he)}catch(ye){this.destination.error(ye)}this.seed=oe,this.destination.next(oe)}}},2474:($t,ze,$)=>{"use strict";$.d(ze,{B:()=>he});var u=$(1762);class j{constructor(ye,te){this.subjectFactory=ye,this.selector=te}call(ye,te){const{selector:se}=this,X=this.subjectFactory(),ge=se(X).subscribe(ye);return ge.add(te.subscribe(X)),ge}}var Ae=$(4327),Te=$(8929);function ae(){return new Te.xQ}function he(){return oe=>(0,Ae.x)()(function W(oe,ye){return function(se){let X;if(X="function"==typeof oe?oe:function(){return oe},"function"==typeof ye)return se.lift(new j(X,ye));const ge=Object.create(se,u.N);return ge.source=se,ge.subjectFactory=X,ge}}(ae)(oe))}},1059:($t,ze,$)=>{"use strict";$.d(ze,{O:()=>j});var u=$(1221),W=$(2866);function j(...Ae){const Te=Ae[Ae.length-1];return(0,W.K)(Te)?(Ae.pop(),ae=>(0,u.z)(Ae,ae,Te)):ae=>(0,u.z)(Ae,ae)}},8915:($t,ze,$)=>{"use strict";$.d(ze,{R:()=>Ie});var u=$(6498);let W=1;const j=Promise.resolve(),Ae={};function Te(Qe){return Qe in Ae&&(delete Ae[Qe],!0)}const ae={setImmediate(Qe){const Ke=W++;return Ae[Ke]=!0,j.then(()=>Te(Ke)&&Qe()),Ke},clearImmediate(Qe){Te(Qe)}};var oe=$(6686),te=$(2268);const ge=new class se extends te.v{flush(Ke){this.active=!0,this.scheduled=void 0;const{actions:ut}=this;let ot,Ct=-1,ke=ut.length;Ke=Ke||ut.shift();do{if(ot=Ke.execute(Ke.state,Ke.delay))break}while(++Ct<ke&&(Ke=ut.shift()));if(this.active=!1,ot){for(;++Ct<ke&&(Ke=ut.shift());)Ke.unsubscribe();throw ot}}}(class ye extends oe.o{constructor(Ke,ut){super(Ke,ut),this.scheduler=Ke,this.work=ut}requestAsyncId(Ke,ut,ot=0){return null!==ot&&ot>0?super.requestAsyncId(Ke,ut,ot):(Ke.actions.push(this),Ke.scheduled||(Ke.scheduled=ae.setImmediate(Ke.flush.bind(Ke,null))))}recycleAsyncId(Ke,ut,ot=0){if(null!==ot&&ot>0||null===ot&&this.delay>0)return super.recycleAsyncId(Ke,ut,ot);0===Ke.actions.length&&(ae.clearImmediate(ut),Ke.scheduled=void 0)}});var Re=$(6688);class Le extends u.y{constructor(Ke,ut=0,ot=ge){super(),this.source=Ke,this.delayTime=ut,this.scheduler=ot,(!function $e(Qe){return!(0,Re.k)(Qe)&&Qe-parseFloat(Qe)+1>=0}(ut)||ut<0)&&(this.delayTime=0),(!ot||"function"!=typeof ot.schedule)&&(this.scheduler=ge)}static create(Ke,ut=0,ot=ge){return new Le(Ke,ut,ot)}static dispatch(Ke){const{source:ut,subscriber:ot}=Ke;return this.add(ut.subscribe(ot))}_subscribe(Ke){return this.scheduler.schedule(Le.dispatch,this.delayTime,{source:this.source,subscriber:Ke})}}function Ie(Qe,Ke=0){return function(ot){return ot.lift(new _e(Qe,Ke))}}class _e{constructor(Ke,ut){this.scheduler=Ke,this.delay=ut}call(Ke,ut){return new Le(ut,this.delay,this.scheduler).subscribe(Ke)}}},7545:($t,ze,$)=>{"use strict";$.d(ze,{w:()=>Ae});var u=$(4850),W=$(5254),j=$(1177);function Ae(he,oe){return"function"==typeof oe?ye=>ye.pipe(Ae((te,se)=>(0,W.D)(he(te,se)).pipe((0,u.U)((X,ge)=>oe(te,X,se,ge))))):ye=>ye.lift(new Te(he))}class Te{constructor(oe){this.project=oe}call(oe,ye){return ye.subscribe(new ae(oe,this.project))}}class ae extends j.Ds{constructor(oe,ye){super(oe),this.project=ye,this.index=0}_next(oe){let ye;const te=this.index++;try{ye=this.project(oe,te)}catch(se){return void this.destination.error(se)}this._innerSub(ye)}_innerSub(oe){const ye=this.innerSubscription;ye&&ye.unsubscribe();const te=new j.IY(this),se=this.destination;se.add(te),this.innerSubscription=(0,j.ft)(oe,te),this.innerSubscription!==te&&se.add(this.innerSubscription)}_complete(){const{innerSubscription:oe}=this;(!oe||oe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(oe){this.destination.next(oe)}}},2986:($t,ze,$)=>{"use strict";$.d(ze,{q:()=>Ae});var u=$(3489),W=$(4231),j=$(8896);function Ae(he){return oe=>0===he?(0,j.c)():oe.lift(new Te(he))}class Te{constructor(oe){if(this.total=oe,this.total<0)throw new W.W}call(oe,ye){return ye.subscribe(new ae(oe,this.total))}}class ae extends u.L{constructor(oe,ye){super(oe),this.total=ye,this.count=0}_next(oe){const ye=this.total,te=++this.count;te<=ye&&(this.destination.next(oe),te===ye&&(this.destination.complete(),this.unsubscribe()))}}},2868:($t,ze,$)=>{"use strict";$.d(ze,{b:()=>Ae});var u=$(3489);function W(){}var j=$(7043);function Ae(he,oe,ye){return function(se){return se.lift(new Te(he,oe,ye))}}class Te{constructor(oe,ye,te){this.nextOrObserver=oe,this.error=ye,this.complete=te}call(oe,ye){return ye.subscribe(new ae(oe,this.nextOrObserver,this.error,this.complete))}}class ae extends u.L{constructor(oe,ye,te,se){super(oe),this._tapNext=W,this._tapError=W,this._tapComplete=W,this._tapError=te||W,this._tapComplete=se||W,(0,j.m)(ye)?(this._context=this,this._tapNext=ye):ye&&(this._context=ye,this._tapNext=ye.next||W,this._tapError=ye.error||W,this._tapComplete=ye.complete||W)}_next(oe){try{this._tapNext.call(this._context,oe)}catch(ye){return void this.destination.error(ye)}this.destination.next(oe)}_error(oe){try{this._tapError.call(this._context,oe)}catch(ye){return void this.destination.error(ye)}this.destination.error(oe)}_complete(){try{this._tapComplete.call(this._context)}catch(oe){return void this.destination.error(oe)}return this.destination.complete()}}},4907:($t,ze,$)=>{"use strict";$.d(ze,{T:()=>j});var u=$(4450),W=$(3489);function j(he=ae){return oe=>oe.lift(new Ae(he))}class Ae{constructor(oe){this.errorFactory=oe}call(oe,ye){return ye.subscribe(new Te(oe,this.errorFactory))}}class Te extends W.L{constructor(oe,ye){super(oe),this.errorFactory=ye,this.hasValue=!1}_next(oe){this.hasValue=!0,this.destination.next(oe)}_complete(){if(this.hasValue)return this.destination.complete();{let oe;try{oe=this.errorFactory()}catch(ye){oe=ye}this.destination.error(oe)}}}function ae(){return new u.K}},6454:($t,ze,$)=>{"use strict";$.d(ze,{r:()=>j});var u=$(6498),W=$(2654);function j(Ae,Te){return new u.y(ae=>{const he=new W.w;let oe=0;return he.add(Te.schedule(function(){oe!==Ae.length?(ae.next(Ae[oe++]),ae.closed||he.add(this.schedule())):ae.complete()})),he})}},6686:($t,ze,$)=>{"use strict";$.d(ze,{o:()=>j});var u=$(2654);class W extends u.w{constructor(Te,ae){super()}schedule(Te,ae=0){return this}}class j extends W{constructor(Te,ae){super(Te,ae),this.scheduler=Te,this.work=ae,this.pending=!1}schedule(Te,ae=0){if(this.closed)return this;this.state=Te;const he=this.id,oe=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(oe,he,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(oe,this.id,ae),this}requestAsyncId(Te,ae,he=0){return setInterval(Te.flush.bind(Te,this),he)}recycleAsyncId(Te,ae,he=0){if(null!==he&&this.delay===he&&!1===this.pending)return ae;clearInterval(ae)}execute(Te,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(Te,ae);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Te,ae){let oe,he=!1;try{this.work(Te)}catch(ye){he=!0,oe=!!ye&&ye||new Error(ye)}if(he)return this.unsubscribe(),oe}_unsubscribe(){const Te=this.id,ae=this.scheduler,he=ae.actions,oe=he.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==oe&&he.splice(oe,1),null!=Te&&(this.id=this.recycleAsyncId(ae,Te,null)),this.delay=null}}},2268:($t,ze,$)=>{"use strict";$.d(ze,{v:()=>W});let u=(()=>{class j{constructor(Te,ae=j.now){this.SchedulerAction=Te,this.now=ae}schedule(Te,ae=0,he){return new this.SchedulerAction(this,Te).schedule(he,ae)}}return j.now=()=>Date.now(),j})();class W extends u{constructor(Ae,Te=u.now){super(Ae,()=>W.delegate&&W.delegate!==this?W.delegate.now():Te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Ae,Te=0,ae){return W.delegate&&W.delegate!==this?W.delegate.schedule(Ae,Te,ae):super.schedule(Ae,Te,ae)}flush(Ae){const{actions:Te}=this;if(this.active)return void Te.push(Ae);let ae;this.active=!0;do{if(ae=Ae.execute(Ae.state,Ae.delay))break}while(Ae=Te.shift());if(this.active=!1,ae){for(;Ae=Te.shift();)Ae.unsubscribe();throw ae}}}},353:($t,ze,$)=>{"use strict";$.d(ze,{P:()=>Ae,z:()=>j});var u=$(6686);const j=new($(2268).v)(u.o),Ae=j},341:($t,ze,$)=>{"use strict";$.d(ze,{c:()=>ae,N:()=>Te});var u=$(6686),j=$(2268);const Te=new class Ae extends j.v{}(class W extends u.o{constructor(oe,ye){super(oe,ye),this.scheduler=oe,this.work=ye}schedule(oe,ye=0){return ye>0?super.schedule(oe,ye):(this.delay=ye,this.state=oe,this.scheduler.flush(this),this)}execute(oe,ye){return ye>0||this.closed?super.execute(oe,ye):this._execute(oe,ye)}requestAsyncId(oe,ye,te=0){return null!==te&&te>0||null===te&&this.delay>0?super.requestAsyncId(oe,ye,te):oe.flush(this)}}),ae=Te},5430:($t,ze,$)=>{"use strict";$.d(ze,{hZ:()=>W});const W=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:($t,ze,$)=>{"use strict";$.d(ze,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:($t,ze,$)=>{"use strict";$.d(ze,{b:()=>u});const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:($t,ze,$)=>{"use strict";$.d(ze,{W:()=>W});const W=(()=>{function j(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return j.prototype=Object.create(Error.prototype),j})()},4450:($t,ze,$)=>{"use strict";$.d(ze,{K:()=>W});const W=(()=>{function j(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return j.prototype=Object.create(Error.prototype),j})()},5279:($t,ze,$)=>{"use strict";$.d(ze,{N:()=>W});const W=(()=>{function j(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return j.prototype=Object.create(Error.prototype),j})()},2782:($t,ze,$)=>{"use strict";function u(W){setTimeout(()=>{throw W},0)}$.d(ze,{z:()=>u})},5379:($t,ze,$)=>{"use strict";function u(W){return W}$.d(ze,{y:()=>u})},6688:($t,ze,$)=>{"use strict";$.d(ze,{k:()=>u});const u=Array.isArray||(W=>W&&"number"==typeof W.length)},8515:($t,ze,$)=>{"use strict";$.d(ze,{z:()=>u});const u=W=>W&&"number"==typeof W.length&&"function"!=typeof W},7043:($t,ze,$)=>{"use strict";function u(W){return"function"==typeof W}$.d(ze,{m:()=>u})},7830:($t,ze,$)=>{"use strict";function u(W){return null!==W&&"object"==typeof W}$.d(ze,{K:()=>u})},8955:($t,ze,$)=>{"use strict";function u(W){return!!W&&"function"!=typeof W.subscribe&&"function"==typeof W.then}$.d(ze,{t:()=>u})},2866:($t,ze,$)=>{"use strict";function u(W){return W&&"function"==typeof W.schedule}$.d(ze,{K:()=>u})},4843:($t,ze,$)=>{"use strict";$.d(ze,{U:()=>j,z:()=>W});var u=$(5379);function W(...Ae){return j(Ae)}function j(Ae){return 0===Ae.length?u.y:1===Ae.length?Ae[0]:function(ae){return Ae.reduce((he,oe)=>oe(he),ae)}}},9249:($t,ze,$)=>{"use strict";$.d(ze,{s:()=>se});var u=$(3650),W=$(2782),Ae=$(5430),ae=$(3821),oe=$(8515),ye=$(8955),te=$(7830);const se=X=>{if(X&&"function"==typeof X[ae.L])return(X=>ge=>{const Re=X[ae.L]();if("function"!=typeof Re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Re.subscribe(ge)})(X);if((0,oe.z)(X))return(0,u.V)(X);if((0,ye.t)(X))return(X=>ge=>(X.then(Re=>{ge.closed||(ge.next(Re),ge.complete())},Re=>ge.error(Re)).then(null,W.z),ge))(X);if(X&&"function"==typeof X[Ae.hZ])return(X=>ge=>{const Re=X[Ae.hZ]();for(;;){let $e;try{$e=Re.next()}catch(Le){return ge.error(Le),ge}if($e.done){ge.complete();break}if(ge.next($e.value),ge.closed)break}return"function"==typeof Re.return&&ge.add(()=>{Re.return&&Re.return()}),ge})(X);{const Re=`You provided ${(0,te.K)(X)?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Re)}}},3650:($t,ze,$)=>{"use strict";$.d(ze,{V:()=>u});const u=W=>j=>{for(let Ae=0,Te=W.length;Ae<Te&&!j.closed;Ae++)j.next(W[Ae]);j.complete()}},448:($t,ze,$)=>{"use strict";$.d(ze,{D:()=>Te});var u=$(3489);class W extends u.L{constructor(he,oe,ye){super(),this.parent=he,this.outerValue=oe,this.outerIndex=ye,this.index=0}_next(he){this.parent.notifyNext(this.outerValue,he,this.outerIndex,this.index++,this)}_error(he){this.parent.notifyError(he,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var j=$(9249),Ae=$(6498);function Te(ae,he,oe,ye,te=new W(ae,oe,ye)){if(!te.closed)return he instanceof Ae.y?he.subscribe(te):(0,j.s)(he)(te)}},863:($t,ze,$)=>{var u={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,4328,9230],"./ion-datetime_3.entry.js":[4959,4328,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[7066,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[3545,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function W(j){if(!$.o(u,j))return Promise.resolve().then(()=>{var ae=new Error("Cannot find module '"+j+"'");throw ae.code="MODULE_NOT_FOUND",ae});var Ae=u[j],Te=Ae[0];return Promise.all(Ae.slice(1).map($.e)).then(()=>$(Te))}W.keys=()=>Object.keys(u),W.id=863,$t.exports=W},655:($t,ze,$)=>{"use strict";function Ae(de,ie){var ve={};for(var be in de)Object.prototype.hasOwnProperty.call(de,be)&&ie.indexOf(be)<0&&(ve[be]=de[be]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var tt=0;for(be=Object.getOwnPropertySymbols(de);tt<be.length;tt++)ie.indexOf(be[tt])<0&&Object.prototype.propertyIsEnumerable.call(de,be[tt])&&(ve[be[tt]]=de[be[tt]])}return ve}function Te(de,ie,ve,be){var kt,tt=arguments.length,wt=tt<3?ie:null===be?be=Object.getOwnPropertyDescriptor(ie,ve):be;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)wt=Reflect.decorate(de,ie,ve,be);else for(var ht=de.length-1;ht>=0;ht--)(kt=de[ht])&&(wt=(tt<3?kt(wt):tt>3?kt(ie,ve,wt):kt(ie,ve))||wt);return tt>3&&wt&&Object.defineProperty(ie,ve,wt),wt}function oe(de,ie,ve,be){return new(ve||(ve=Promise))(function(wt,kt){function ht(Ze){try{Ne(be.next(Ze))}catch(nt){kt(nt)}}function qe(Ze){try{Ne(be.throw(Ze))}catch(nt){kt(nt)}}function Ne(Ze){Ze.done?wt(Ze.value):function tt(wt){return wt instanceof ve?wt:new ve(function(kt){kt(wt)})}(Ze.value).then(ht,qe)}Ne((be=be.apply(de,ie||[])).next())})}$.d(ze,{_T:()=>Ae,gn:()=>Te,mG:()=>oe})},9808:($t,ze,$)=>{"use strict";$.d(ze,{Do:()=>Ke,EM:()=>Is,HT:()=>Te,JF:()=>Cs,K0:()=>he,Mx:()=>oi,O5:()=>me,PM:()=>pi,S$:()=>Ie,V_:()=>te,Ye:()=>ut,b0:()=>Qe,bD:()=>ji,ez:()=>ws,mk:()=>Xr,q:()=>j,tP:()=>Cn,w_:()=>ae});var u=$(5e3);let W=null;function j(){return W}function Te(k){W||(W=k)}class ae{}const he=new u.OlP("DocumentToken");let oe=(()=>{class k{historyGo(N){throw new Error("Not implemented")}}return k.\u0275fac=function(N){return new(N||k)},k.\u0275prov=u.Yz7({token:k,factory:function(){return function ye(){return(0,u.LFG)(se)}()},providedIn:"platform"}),k})();const te=new u.OlP("Location Initialized");let se=(()=>{class k extends oe{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(N){const Q=j().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",N,!1),()=>Q.removeEventListener("popstate",N)}onHashChange(N){const Q=j().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",N,!1),()=>Q.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,Q,De){X()?this._history.pushState(N,Q,De):this.location.hash=De}replaceState(N,Q,De){X()?this._history.replaceState(N,Q,De):this.location.hash=De}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return k.\u0275fac=function(N){return new(N||k)(u.LFG(he))},k.\u0275prov=u.Yz7({token:k,factory:function(){return function ge(){return new se((0,u.LFG)(he))}()},providedIn:"platform"}),k})();function X(){return!!window.history.pushState}function Re(k,z){if(0==k.length)return z;if(0==z.length)return k;let N=0;return k.endsWith("/")&&N++,z.startsWith("/")&&N++,2==N?k+z.substring(1):1==N?k+z:k+"/"+z}function $e(k){const z=k.match(/#|\?|$/),N=z&&z.index||k.length;return k.slice(0,N-("/"===k[N-1]?1:0))+k.slice(N)}function Le(k){return k&&"?"!==k[0]?"?"+k:k}let Ie=(()=>{class k{historyGo(N){throw new Error("Not implemented")}}return k.\u0275fac=function(N){return new(N||k)},k.\u0275prov=u.Yz7({token:k,factory:function(){return(0,u.f3M)(Qe)},providedIn:"root"}),k})();const _e=new u.OlP("appBaseHref");let Qe=(()=>{class k extends Ie{constructor(N,Q){var De,gt,It;super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=null!==(It=null!==(De=null!=Q?Q:this._platformLocation.getBaseHrefFromDOM())&&void 0!==De?De:null===(gt=(0,u.f3M)(he).location)||void 0===gt?void 0:gt.origin)&&void 0!==It?It:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return Re(this._baseHref,N)}path(N=!1){const Q=this._platformLocation.pathname+Le(this._platformLocation.search),De=this._platformLocation.hash;return De&&N?`${Q}${De}`:Q}pushState(N,Q,De,gt){const It=this.prepareExternalUrl(De+Le(gt));this._platformLocation.pushState(N,Q,It)}replaceState(N,Q,De,gt){const It=this.prepareExternalUrl(De+Le(gt));this._platformLocation.replaceState(N,Q,It)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){var Q,De;null===(De=(Q=this._platformLocation).historyGo)||void 0===De||De.call(Q,N)}}return k.\u0275fac=function(N){return new(N||k)(u.LFG(oe),u.LFG(_e,8))},k.\u0275prov=u.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),Ke=(()=>{class k extends Ie{constructor(N,Q){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(N){const Q=Re(this._baseHref,N);return Q.length>0?"#"+Q:Q}pushState(N,Q,De,gt){let It=this.prepareExternalUrl(De+Le(gt));0==It.length&&(It=this._platformLocation.pathname),this._platformLocation.pushState(N,Q,It)}replaceState(N,Q,De,gt){let It=this.prepareExternalUrl(De+Le(gt));0==It.length&&(It=this._platformLocation.pathname),this._platformLocation.replaceState(N,Q,It)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){var Q,De;null===(De=(Q=this._platformLocation).historyGo)||void 0===De||De.call(Q,N)}}return k.\u0275fac=function(N){return new(N||k)(u.LFG(oe),u.LFG(_e,8))},k.\u0275prov=u.Yz7({token:k,factory:k.\u0275fac}),k})(),ut=(()=>{class k{constructor(N){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const Q=this._locationStrategy.getBaseHref();this._baseHref=$e(ke(Q)),this._locationStrategy.onPopState(De=>{this._subject.emit({url:this.path(!0),pop:!0,state:De.state,type:De.type})})}ngOnDestroy(){var N;null===(N=this._urlChangeSubscription)||void 0===N||N.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,Q=""){return this.path()==this.normalize(N+Le(Q))}normalize(N){return k.stripTrailingSlash(function Ct(k,z){return k&&z.startsWith(k)?z.substring(k.length):z}(this._baseHref,ke(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,Q="",De=null){this._locationStrategy.pushState(De,"",N,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Le(Q)),De)}replaceState(N,Q="",De=null){this._locationStrategy.replaceState(De,"",N,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Le(Q)),De)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){var Q,De;null===(De=(Q=this._locationStrategy).historyGo)||void 0===De||De.call(Q,N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{var Q;const De=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(De,1),0===this._urlChangeListeners.length&&(null===(Q=this._urlChangeSubscription)||void 0===Q||Q.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",Q){this._urlChangeListeners.forEach(De=>De(N,Q))}subscribe(N,Q,De){return this._subject.subscribe({next:N,error:Q,complete:De})}}return k.normalizeQueryParams=Le,k.joinWithSlash=Re,k.stripTrailingSlash=$e,k.\u0275fac=function(N){return new(N||k)(u.LFG(Ie))},k.\u0275prov=u.Yz7({token:k,factory:function(){return function ot(){return new ut((0,u.LFG)(Ie))}()},providedIn:"root"}),k})();function ke(k){return k.replace(/\/index.html$/,"")}function oi(k,z){z=encodeURIComponent(z);for(const N of k.split(";")){const Q=N.indexOf("="),[De,gt]=-1==Q?[N,""]:[N.slice(0,Q),N.slice(Q+1)];if(De.trim()===z)return decodeURIComponent(gt)}return null}let Xr=(()=>{class k{constructor(N,Q,De,gt){this._iterableDiffers=N,this._keyValueDiffers=Q,this._ngEl=De,this._renderer=gt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(N){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof N?N.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(N){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof N?N.split(/\s+/):N,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const N=this._iterableDiffer.diff(this._rawClass);N&&this._applyIterableChanges(N)}else if(this._keyValueDiffer){const N=this._keyValueDiffer.diff(this._rawClass);N&&this._applyKeyValueChanges(N)}}_applyKeyValueChanges(N){N.forEachAddedItem(Q=>this._toggleClass(Q.key,Q.currentValue)),N.forEachChangedItem(Q=>this._toggleClass(Q.key,Q.currentValue)),N.forEachRemovedItem(Q=>{Q.previousValue&&this._toggleClass(Q.key,!1)})}_applyIterableChanges(N){N.forEachAddedItem(Q=>{if("string"!=typeof Q.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(Q.item)}`);this._toggleClass(Q.item,!0)}),N.forEachRemovedItem(Q=>this._toggleClass(Q.item,!1))}_applyClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(Q=>this._toggleClass(Q,!0)):Object.keys(N).forEach(Q=>this._toggleClass(Q,!!N[Q])))}_removeClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(Q=>this._toggleClass(Q,!1)):Object.keys(N).forEach(Q=>this._toggleClass(Q,!1)))}_toggleClass(N,Q){(N=N.trim())&&N.split(/\s+/g).forEach(De=>{Q?this._renderer.addClass(this._ngEl.nativeElement,De):this._renderer.removeClass(this._ngEl.nativeElement,De)})}}return k.\u0275fac=function(N){return new(N||k)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},k.\u0275dir=u.lG2({type:k,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),k})(),me=(()=>{class k{constructor(N,Q){this._viewContainer=N,this._context=new Ve,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){We("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){We("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,Q){return!0}}return k.\u0275fac=function(N){return new(N||k)(u.Y36(u.s_b),u.Y36(u.Rgc))},k.\u0275dir=u.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),k})();class Ve{constructor(){this.$implicit=null,this.ngIf=null}}function We(k,z){if(z&&!z.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,u.AaK)(z)}'.`)}let Cn=(()=>{class k{constructor(N){this._viewContainerRef=N,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(N){if(N.ngTemplateOutlet||N.ngTemplateOutletInjector){const Q=this._viewContainerRef;if(this._viewRef&&Q.remove(Q.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:De,ngTemplateOutletContext:gt,ngTemplateOutletInjector:It}=this;this._viewRef=Q.createEmbeddedView(De,gt,It?{injector:It}:void 0)}else this._viewRef=null}else this._viewRef&&N.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return k.\u0275fac=function(N){return new(N||k)(u.Y36(u.s_b))},k.\u0275dir=u.lG2({type:k,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[u.TTD]}),k})(),ws=(()=>{class k{}return k.\u0275fac=function(N){return new(N||k)},k.\u0275mod=u.oAB({type:k}),k.\u0275inj=u.cJS({}),k})();const ji="browser";function pi(k){return"server"===k}let Is=(()=>{class k{}return k.\u0275prov=(0,u.Yz7)({token:k,providedIn:"root",factory:()=>new Hi((0,u.LFG)(he),window)}),k})();class Hi{constructor(z,N){this.document=z,this.window=N,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const N=function Ei(k,z){const N=k.getElementById(z)||k.getElementsByName(z)[0];if(N)return N;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const Q=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let De=Q.currentNode;for(;De;){const gt=De.shadowRoot;if(gt){const It=gt.getElementById(z)||gt.querySelector(`[name="${z}"]`);if(It)return It}De=Q.nextNode()}}return null}(this.document,z);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=z)}}scrollToElement(z){const N=z.getBoundingClientRect(),Q=N.left+this.window.pageXOffset,De=N.top+this.window.pageYOffset,gt=this.offset();this.window.scrollTo(Q-gt[0],De-gt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=Yr(this.window.history)||Yr(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch(z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(z){return!1}}}function Yr(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Cs{}},5e3:($t,ze,$)=>{"use strict";$.d(ze,{$8M:()=>Iu,$Z:()=>C_,AFp:()=>cI,AaK:()=>oe,CHM:()=>zo,CRH:()=>JE,CZH:()=>wy,CqO:()=>z_,D6c:()=>H0,EJc:()=>ZD,EpF:()=>Wu,F$t:()=>K_,F4k:()=>Gw,FYo:()=>G,FiY:()=>yi,G48:()=>lT,Gf:()=>l0,GfV:()=>qt,GkF:()=>Ap,Gpc:()=>se,Hsn:()=>Z_,JOm:()=>Fa,KtG:()=>ha,LFG:()=>le,LSH:()=>ph,Lbi:()=>C0,Lck:()=>jv,MMx:()=>Gv,NdJ:()=>Zh,OlP:()=>jr,PXZ:()=>x0,Q6J:()=>bm,QGY:()=>Em,QP$:()=>jn,Qsj:()=>ne,R0b:()=>Ia,RDi:()=>Eg,Rgc:()=>zp,SBq:()=>f,Sil:()=>JD,Suo:()=>XE,TTD:()=>xi,TgZ:()=>Cp,X6Q:()=>eh,XFs:()=>Nt,Xpm:()=>St,Xts:()=>ad,Y36:()=>nu,YKP:()=>Xm,YNc:()=>jw,Yjl:()=>rt,Yz7:()=>Tt,Z0I:()=>An,ZZ4:()=>ig,_Bn:()=>Qm,_UZ:()=>Dp,_Vd:()=>Lu,_c5:()=>bo,_uU:()=>iE,aQg:()=>My,c2e:()=>Yu,cJS:()=>jt,cg1:()=>nf,dDg:()=>iT,dqk:()=>Xn,eFA:()=>wI,ekj:()=>cu,eoX:()=>_I,f3M:()=>ct,g9A:()=>I0,h0i:()=>hf,hGG:()=>ag,iGM:()=>QE,ifc:()=>yt,ip1:()=>w0,jDz:()=>hu,kL8:()=>Np,lG2:()=>Oe,lqb:()=>ii,lri:()=>mI,n5z:()=>zl,oAB:()=>dn,oxw:()=>Im,q4F:()=>fn,qLn:()=>Dh,qOj:()=>rl,qZA:()=>wm,rWj:()=>yI,sBO:()=>CI,sIi:()=>qh,s_b:()=>ay,soG:()=>Bl,tb:()=>eg,tp0:()=>Xo,uIk:()=>G_,vHH:()=>$e,vpe:()=>ll,wAp:()=>$n,xp6:()=>Xb,z2F:()=>vo,zSh:()=>Tc,zs3:()=>Ed});var u=$(8929),W=$(2654),j=$(6498),Ae=$(6787),Te=$(2474);function ae(i){for(let s in i)if(i[s]===ae)return s;throw Error("Could not find renamed property on target object.")}function he(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function oe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(oe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ye(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const te=ae({__forward_ref__:ae});function se(i){return i.__forward_ref__=se,i.toString=function(){return oe(this())},i}function X(i){return ge(i)?i():i}function ge(i){return"function"==typeof i&&i.hasOwnProperty(te)&&i.__forward_ref__===se}class $e extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function Ie(i){return"string"==typeof i?i:null==i?"":String(i)}function ot(i,s){throw new $e(-201,!1)}function qe(i,s){null==i&&function Ne(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Tt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function jt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ot(i){return On(i,bn)||On(i,re)}function An(i){return null!==Ot(i)}function On(i,s){return i.hasOwnProperty(s)?i[s]:null}function Xe(i){return i&&(i.hasOwnProperty(Fn)||i.hasOwnProperty(Qn))?i[Fn]:null}const bn=ae({\u0275prov:ae}),Fn=ae({\u0275inj:ae}),re=ae({ngInjectableDef:ae}),Qn=ae({ngInjectorDef:ae});var Nt=(()=>((Nt=Nt||{})[Nt.Default=0]="Default",Nt[Nt.Host=1]="Host",Nt[Nt.Self=2]="Self",Nt[Nt.SkipSelf=4]="SkipSelf",Nt[Nt.Optional=8]="Optional",Nt))();let Fr;function Un(i){const s=Fr;return Fr=i,s}function kn(i,s,a){const c=Ot(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Nt.Optional?null:void 0!==s?s:void ot(oe(i))}function Qt(i){return{toString:i}.toString()}var or=(()=>((or=or||{})[or.OnPush=0]="OnPush",or[or.Default=1]="Default",or))(),yt=(()=>{return(i=yt||(yt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",yt;var i})();const Xn=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),_r={},rn=[],Qr=ae({\u0275cmp:ae}),_n=ae({\u0275dir:ae}),Rr=ae({\u0275pipe:ae}),Vn=ae({\u0275mod:ae}),Ar=ae({\u0275fac:ae}),Lr=ae({__NG_ELEMENT_ID__:ae});let Jt=0;function St(i){return Qt(()=>{const a=!0===i.standalone,c={},h={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===or.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||rn,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||yt.Emulated,id:"c"+Jt++,styles:i.styles||rn,_:null,setInput:null,schemas:i.schemas||null,tView:null},g=i.dependencies,w=i.features;return h.inputs=Ce(i.inputs,c),h.outputs=Ce(i.outputs),w&&w.forEach(T=>T(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(gn).filter(cn):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(en).filter(cn):null,h})}function gn(i){return Ge(i)||zt(i)}function cn(i){return null!==i}function dn(i){return Qt(()=>({type:i.type,bootstrap:i.bootstrap||rn,declarations:i.declarations||rn,imports:i.imports||rn,exports:i.exports||rn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ce(i,s){if(null==i)return _r;const a={};for(const c in i)if(i.hasOwnProperty(c)){let h=i[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=c,s&&(s[h]=g)}return a}const Oe=St;function rt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ge(i){return i[Qr]||null}function zt(i){return i[_n]||null}function en(i){return i[Rr]||null}function jn(i){const s=Ge(i)||zt(i)||en(i);return null!==s&&s.standalone}function Kn(i,s){const a=i[Vn]||null;if(!a&&!0===s)throw new Error(`Type ${oe(i)} does not have '\u0275mod' property.`);return a}const Y=22;function We(i){return Array.isArray(i)&&"object"==typeof i[1]}function pt(i){return Array.isArray(i)&&!0===i[1]}function ue(i){return 0!=(8&i.flags)}function Fe(i){return 2==(2&i.flags)}function st(i){return 1==(1&i.flags)}function _t(i){return null!==i.template}function At(i){return 0!=(256&i[2])}function Zi(i,s){return i.hasOwnProperty(Ar)?i[Ar]:null}class vs{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function xi(){return Ws}function Ws(i){return i.type.prototype.ngOnChanges&&(i.setInput=ks),Eo}function Eo(){const i=bs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===_r)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function ks(i,s,a,c){const h=bs(i)||function ws(i,s){return i[Io]=s}(i,{previous:_r,current:null}),g=h.current||(h.current={}),w=h.previous,T=this.declaredInputs[a],O=w[T];g[T]=new vs(O&&O.currentValue,s,w===_r),i[c]=s}xi.ngInherit=!0;const Io="__ngSimpleChanges__";function bs(i){return i[Io]||null}function Mr(i){for(;Array.isArray(i);)i=i[0];return i}function Ei(i,s){return Mr(s[i.index])}function Cs(i,s){return i.data[s]}function ir(i,s){const a=s[i];return We(a)?a:a[0]}function rs(i){return 64==(64&i[2])}function Ii(i,s){return null==s?null:i[s]}function Do(i){i[18]=0}function Dr(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Dn={lFrame:Vo(null),bindingsEnabled:!0};function Ys(){return Dn.bindingsEnabled}function Pt(){return Dn.lFrame.lView}function qn(){return Dn.lFrame.tView}function zo(i){return Dn.lFrame.contextLView=i,i[8]}function ha(i){return Dn.lFrame.contextLView=null,i}function ei(){let i=Bo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Bo(){return Dn.lFrame.currentTNode}function Qi(i,s){const a=Dn.lFrame;a.currentTNode=i,a.isParent=s}function Ns(){return Dn.lFrame.isParent}function V(){Dn.lFrame.isParent=!1}function lt(){return Dn.lFrame.bindingIndex++}function mr(i,s){const a=Dn.lFrame;a.bindingIndex=a.bindingRootIndex=i,Sr(s)}function Sr(i){Dn.lFrame.currentDirectiveIndex=i}function ti(){return Dn.lFrame.currentQueryIndex}function ki(i){Dn.lFrame.currentQueryIndex=i}function is(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Fs(i,s,a){if(a&Nt.SkipSelf){let h=s,g=i;for(;!(h=h.parent,null!==h||a&Nt.Host||(h=is(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;s=h,i=g}const c=Dn.lFrame=So();return c.currentTNode=s,c.lView=i,!0}function fa(i){const s=So(),a=i[1];Dn.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function So(){const i=Dn.lFrame,s=null===i?null:i.child;return null===s?Vo(i):s}function Vo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function dl(){const i=Dn.lFrame;return Dn.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const k=dl;function z(){const i=dl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function De(){return Dn.lFrame.selectedIndex}function gt(i){Dn.lFrame.selectedIndex=i}function It(){const i=Dn.lFrame;return Cs(i.tView,i.selectedIndex)}function Tr(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:T,ngAfterViewInit:O,ngAfterViewChecked:H,ngOnDestroy:J}=g;w&&(i.contentHooks||(i.contentHooks=[])).push(-a,w),T&&((i.contentHooks||(i.contentHooks=[])).push(a,T),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,T)),O&&(i.viewHooks||(i.viewHooks=[])).push(-a,O),H&&((i.viewHooks||(i.viewHooks=[])).push(a,H),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,H)),null!=J&&(i.destroyHooks||(i.destroyHooks=[])).push(a,J)}}function ni(i,s,a){Ci(i,s,3,a)}function $o(i,s,a,c){(3&i[2])===a&&Ci(i,s,a,c)}function ho(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Ci(i,s,a,c){const g=null!=c?c:-1,w=s.length-1;let T=0;for(let O=void 0!==c?65535&i[18]:0;O<w;O++)if("number"==typeof s[O+1]){if(T=s[O],null!=c&&T>=c)break}else s[O]<0&&(i[18]+=65536),(T<g||-1==g)&&(Ls(i,a,s,O),i[18]=(4294901760&i[18])+O+2),O++}function Ls(i,s,a,c){const h=a[c]<0,g=a[c+1],T=i[h?-a[c]:a[c]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(T)}finally{}}}else try{g.call(T)}finally{}}class fo{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function fl(i,s,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const g=a[c++],w=a[c++],T=a[c++];i.setAttribute(s,w,T,g)}else{const g=h,w=a[++c];pa(g)?i.setProperty(s,g,w):i.setAttribute(s,g,w),c++}}return c}function Sa(i){return 3===i||4===i||6===i}function pa(i){return 64===i.charCodeAt(0)}function pl(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const h=s[c];"number"==typeof h?a=h:0===a||bu(i,a,h,null,-1===a||2===a?s[++c]:null)}}return i}function bu(i,s,a,c,h){let g=0,w=i.length;if(-1===s)w=-1;else for(;g<i.length;){const T=i[g++];if("number"==typeof T){if(T===s){w=-1;break}if(T>s){w=g-1;break}}}for(;g<i.length;){const T=i[g];if("number"==typeof T)break;if(T===a){if(null===c)return void(null!==h&&(i[g+1]=h));if(c===i[g+1])return void(i[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==w&&(i.splice(w,0,s),g=w+1),i.splice(g++,0,a),null!==c&&i.splice(g++,0,c),null!==h&&i.splice(g++,0,h)}function oc(i){return-1!==i}function Xi(i){return 32767&i}function Vs(i,s){let a=function Zs(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Qs=!0;function za(i){const s=Qs;return Qs=i,s}let Di=0;const Xs={};function Aa(i,s){const a=wu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,gl(c.data,i),gl(s,null),gl(c.blueprint,null));const h=Wl(i,s),g=i.injectorIndex;if(oc(h)){const w=Xi(h),T=Vs(h,s),O=T[1].data;for(let H=0;H<8;H++)s[g+H]=T[w+H]|O[w+H]}return s[g+8]=h,g}function gl(i,s){i.push(0,0,0,0,0,0,0,0,s)}function wu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Wl(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,h=s;for(;null!==h;){if(c=Ma(h),null===c)return-1;if(a++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function ga(i,s,a){!function qa(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Lr)&&(c=a[Lr]),null==c&&(c=a[Lr]=Di++);const h=255&c;s.data[i+(h>>5)]|=1<<h}(i,s,a)}function xo(i,s,a){if(a&Nt.Optional||void 0!==i)return i;ot()}function xa(i,s,a,c){if(a&Nt.Optional&&void 0===c&&(c=null),0==(a&(Nt.Self|Nt.Host))){const h=i[9],g=Un(void 0);try{return h?h.get(s,c,a&Nt.Optional):kn(s,c,a&Nt.Optional)}finally{Un(g)}}return xo(c,0,a)}function Yo(i,s,a,c=Nt.Default,h){if(null!==i){if(1024&s[2]){const w=function ss(i,s,a,c,h){let g=i,w=s;for(;null!==g&&null!==w&&1024&w[2]&&!(256&w[2]);){const T=Ya(g,w,a,c|Nt.Self,Xs);if(T!==Xs)return T;let O=g.parent;if(!O){const H=w[21];if(H){const J=H.get(a,Xs,c);if(J!==Xs)return J}O=Ma(w),w=w[15]}g=O}return h}(i,s,a,c,Xs);if(w!==Xs)return w}const g=Ya(i,s,a,c,Xs);if(g!==Xs)return g}return xa(s,a,c,h)}function Ya(i,s,a,c,h){const g=function Ji(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Lr)?i[Lr]:void 0;return"number"==typeof s?s>=0?255&s:ml:s}(a);if("function"==typeof g){if(!Fs(s,i,c))return c&Nt.Host?xo(h,0,c):xa(s,a,c,h);try{const w=g(c);if(null!=w||c&Nt.Optional)return w;ot()}finally{k()}}else if("number"==typeof g){let w=null,T=wu(i,s),O=-1,H=c&Nt.Host?s[16][6]:null;for((-1===T||c&Nt.SkipSelf)&&(O=-1===T?Wl(i,s):s[T+8],-1!==O&&Ko(c,!1)?(w=s[1],T=Xi(O),s=Vs(O,s)):T=-1);-1!==T;){const J=s[1];if(Za(g,T,J.data)){const pe=Eu(T,s,a,w,c,H);if(pe!==Xs)return pe}O=s[T+8],-1!==O&&Ko(c,s[1].data[T+8]===H)&&Za(g,T,s)?(w=J,T=Xi(O),s=Vs(O,s)):T=-1}}return h}function Eu(i,s,a,c,h,g){const w=s[1],T=w.data[i+8],J=Ka(T,w,a,null==c?Fe(T)&&Qs:c!=w&&0!=(3&T.type),h&Nt.Host&&g===T);return null!==J?ma(s,w,J,T):Xs}function Ka(i,s,a,c,h){const g=i.providerIndexes,w=s.data,T=1048575&g,O=i.directiveStart,J=g>>20,Ue=h?T+J:i.directiveEnd;for(let ft=c?T:T+J;ft<Ue;ft++){const xt=w[ft];if(ft<O&&a===xt||ft>=O&&xt.type===a)return ft}if(h){const ft=w[O];if(ft&&_t(ft)&&ft.type===a)return O}return null}function ma(i,s,a,c){let h=i[a];const g=s.data;if(function Bs(i){return i instanceof fo}(h)){const w=h;w.resolving&&function Qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new $e(-200,`Circular dependency in DI detected for ${i}${a}`)}(function _e(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ie(i)}(g[a]));const T=za(w.canSeeViewProviders);w.resolving=!0;const O=w.injectImpl?Un(w.injectImpl):null;Fs(i,c,Nt.Default);try{h=i[a]=w.factory(void 0,g,i,c),s.firstCreatePass&&a>=c.directiveStart&&function mi(i,s,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=s.type.prototype;if(c){const w=Ws(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,w),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,w)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==O&&Un(O),za(T),w.resolving=!1,k()}}return h}function Za(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ko(i,s){return!(i&Nt.Self||i&Nt.Host&&s)}class $s{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Yo(this._tNode,this._lView,s,c,a)}}function ml(){return new $s(ei(),Pt())}function zl(i){return Qt(()=>{const s=i.prototype.constructor,a=s[Ar]||ql(s),c=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==c;){const g=h[Ar]||ql(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function ql(i){return ge(i)?()=>{const s=ql(X(i));return s&&s()}:Zi(i)}function Ma(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Iu(i){return function ac(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const g=a[h];if(Sa(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(g===s)return a[h+1];h+=2}}}return null}(ei(),i)}const Zo="__parameters__";function ri(i,s,a){return Qt(()=>{const c=function Qa(i){return function(...a){if(i){const c=i(...a);for(const h in c)this[h]=c[h]}}}(s);function h(...g){if(this instanceof h)return c.apply(this,g),this;const w=new h(...g);return T.annotation=w,T;function T(O,H,J){const pe=O.hasOwnProperty(Zo)?O[Zo]:Object.defineProperty(O,Zo,{value:[]})[Zo];for(;pe.length<=J;)pe.push(null);return(pe[J]=pe[J]||[]).push(w),O}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class jr{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Tt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function os(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),os(c,s)):s!==i&&s.push(c)}return s}function Js(i,s){i.forEach(a=>Array.isArray(a)?Js(a,s):s(a))}function _l(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Oa(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function _a(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}function as(i,s,a){let c=va(i,s);return c>=0?i[1|c]=a:(c=~c,function vl(i,s,a,c){let h=i.length;if(h==s)i.push(a,c);else if(1===h)i.push(c,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>s;)i[h]=i[h-2],h--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function El(i,s){const a=va(i,s);if(a>=0)return i[1|a]}function va(i,s){return function fc(i,s,a){let c=0,h=i.length>>a;for(;h!==c;){const g=c+(h-c>>1),w=i[g<<a];if(s===w)return g<<a;w>s?h=g:c=g+1}return~(h<<a)}(i,s,1)}const v={},x="__NG_DI_FLAG__",B="ngTempTokenPath",Ee=/\n/gm,dt="__source";let A;function L(i){const s=A;return A=i,s}function q(i,s=Nt.Default){if(void 0===A)throw new $e(-203,!1);return null===A?kn(i,void 0,s):A.get(i,s&Nt.Optional?null:void 0,s)}function le(i,s=Nt.Default){return(function Ur(){return Fr}()||q)(X(i),s)}function ct(i,s=Nt.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),le(i,s)}function Rt(i){const s=[];for(let a=0;a<i.length;a++){const c=X(i[a]);if(Array.isArray(c)){if(0===c.length)throw new $e(900,!1);let h,g=Nt.Default;for(let w=0;w<c.length;w++){const T=c[w],O=vn(T);"number"==typeof O?-1===O?h=T.token:g|=O:h=T}s.push(le(h,g))}else s.push(le(c))}return s}function Gt(i,s){return i[x]=s,i.prototype[x]=s,i}function vn(i){return i[x]}const yi=Gt(ri("Optional"),8),Xo=Gt(ri("SkipSelf"),4);let nd;function Eg(i){nd=i}class bc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ba(i){return i instanceof bc?i.changingThisBreaksApplicationSecurity:i}const el=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Gi=(()=>((Gi=Gi||{})[Gi.NONE=0]="NONE",Gi[Gi.HTML=1]="HTML",Gi[Gi.STYLE=2]="STYLE",Gi[Gi.SCRIPT=3]="SCRIPT",Gi[Gi.URL=4]="URL",Gi[Gi.RESOURCE_URL=5]="RESOURCE_URL",Gi))();function ph(i){const s=function xl(){const i=Pt();return i&&i[12]}();return s?s.sanitize(Gi.URL,i)||"":function Ru(i,s){const a=function Tg(i){return i instanceof bc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ba(i):function id(i){return(i=String(i)).match(el)?i:"unsafe:"+i}(Ie(i))}const ad=new jr("ENVIRONMENT_INITIALIZER"),gh=new jr("INJECTOR",-1),Kf=new jr("INJECTOR_DEF_TYPES");class Fg{get(s,a=v){if(a===v){const c=new Error(`NullInjectorError: No provider for ${oe(s)}!`);throw c.name="NullInjectorError",c}return a}}function Cc(...i){return{\u0275providers:ld(0,i)}}function ld(i,...s){const a=[],c=new Set;let h;return Js(s,g=>{const w=g;cd(w,a,[],c)&&(h||(h=[]),h.push(w))}),void 0!==h&&ud(h,a),a}function ud(i,s){for(let a=0;a<i.length;a++){const{providers:h}=i[a];Js(h,g=>{s.push(g)})}}function cd(i,s,a,c){if(!(i=X(i)))return!1;let h=null,g=Xe(i);const w=!g&&Ge(i);if(g||w){if(w&&!w.standalone)return!1;h=i}else{const O=i.ngModule;if(g=Xe(O),!g)return!1;h=O}const T=c.has(h);if(w){if(T)return!1;if(c.add(h),w.dependencies){const O="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const H of O)cd(H,s,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!T){let H;c.add(h);try{Js(g.imports,J=>{cd(J,s,a,c)&&(H||(H=[]),H.push(J))})}finally{}void 0!==H&&ud(H,s)}if(!T){const H=Zi(h)||(()=>new h);s.push({provide:h,useFactory:H,deps:rn},{provide:Kf,useValue:h,multi:!0},{provide:ad,useValue:()=>le(h),multi:!0})}const O=g.providers;null==O||T||Js(O,J=>{s.push(J)})}}return h!==i&&void 0!==i.providers}const Qf=ae({provide:String,useValue:ae});function Xf(i){return null!==i&&"object"==typeof i&&Qf in i}function Ql(i){return"function"==typeof i}const Tc=new jr("Set Injector scope."),Ml={},Lg={};let Xl;function dd(){return void 0===Xl&&(Xl=new Fg),Xl}class ii{}class mh extends ii{constructor(s,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rl(s,w=>this.processProvider(w)),this.records.set(gh,cs(void 0,this)),h.has("environment")&&this.records.set(ii,cs(void 0,this));const g=this.records.get(Tc);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Kf.multi,rn,Nt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=L(this),c=Un(void 0);try{return s()}finally{L(a),Un(c)}}get(s,a=v,c=Nt.Default){this.assertNotDestroyed();const h=L(this),g=Un(void 0);try{if(!(c&Nt.SkipSelf)){let T=this.records.get(s);if(void 0===T){const O=function Jf(i){return"function"==typeof i||"object"==typeof i&&i instanceof jr}(s)&&Ot(s);T=O&&this.injectableDefInScope(O)?cs(Pu(s),Ml):null,this.records.set(s,T)}if(null!=T)return this.hydrate(s,T)}return(c&Nt.Self?dd():this.parent).get(s,a=c&Nt.Optional&&a===v?null:a)}catch(w){if("NullInjectorError"===w.name){if((w[B]=w[B]||[]).unshift(oe(s)),h)throw w;return function Hn(i,s,a,c){const h=i[B];throw s[dt]&&h.unshift(s[dt]),i.message=function ar(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=oe(s);if(Array.isArray(s))h=s.map(oe).join(" -> ");else if("object"==typeof s){let g=[];for(let w in s)if(s.hasOwnProperty(w)){let T=s[w];g.push(w+":"+("string"==typeof T?JSON.stringify(T):oe(T)))}h=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${i.replace(Ee,"\n  ")}`}("\n"+i.message,h,a,c),i.ngTokenPath=h,i[B]=null,i}(w,s,"R3InjectorError",this.source)}throw w}finally{Un(g),L(h)}}resolveInjectorInitializers(){const s=L(this),a=Un(void 0);try{const c=this.get(ad.multi,rn,Nt.Self);for(const h of c)h()}finally{L(s),Un(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(oe(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $e(205,!1)}processProvider(s){let a=Ql(s=X(s))?s:X(s&&s.provide);const c=function Bg(i){return Xf(i)?cs(void 0,i.useValue):cs(hd(i),Ml)}(s);if(Ql(s)||!0!==s.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=cs(void 0,Ml,!0),h.factory=()=>Rt(h.multi),this.records.set(a,h)),a=s,h.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Ml&&(a.value=Lg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Nu(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=X(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Pu(i){const s=Ot(i),a=null!==s?s.factory:Zi(i);if(null!==a)return a;if(i instanceof jr)throw new $e(204,!1);if(i instanceof Function)return function yh(i){const s=i.length;if(s>0)throw _a(s,"?"),new $e(204,!1);const a=function tr(i){const s=i&&(i[bn]||i[re]);if(s){const a=function Mn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new $e(204,!1)}function hd(i,s,a){let c;if(Ql(i)){const h=X(i);return Zi(h)||Pu(h)}if(Xf(i))c=()=>X(i.useValue);else if(function Dc(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Rt(i.deps||[]));else if(function Ss(i){return!(!i||!i.useExisting)}(i))c=()=>le(X(i.useExisting));else{const h=X(i&&(i.useClass||i.provide));if(!function _h(i){return!!i.deps}(i))return Zi(h)||Pu(h);c=()=>new h(...Rt(i.deps))}return c}function cs(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Na(i){return!!i.\u0275providers}function Rl(i,s){for(const a of i)Array.isArray(a)?Rl(a,s):Na(a)?Rl(a.\u0275providers,s):s(a)}class Fu{}class bh{resolveComponentFactory(s){throw function Vg(i){const s=Error(`No component factory found for ${oe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Lu=(()=>{class i{}return i.NULL=new bh,i})();function Ug(){return b(ei(),Pt())}function b(i,s){return new f(Ei(i,s))}let f=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Ug,i})();function m(i){return i instanceof f?i.nativeElement:i}class G{}let ne=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function He(){const i=Pt(),a=ir(ei().index,i);return(We(a)?a:i)[11]}(),i})(),Et=(()=>{class i{}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:()=>null}),i})();class qt{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const fn=new qt("14.2.7"),Ln={};function eu(i){return i.ngOriginalError}class Dh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&eu(s);for(;a&&eu(a);)a=eu(a);return a||null}}const Gg=new Map;let r_=0;const gd="__ngContext__";function no(i,s){We(s)?(i[gd]=s[20],function Ab(i){Gg.set(i[20],i)}(s)):i[gd]=s}function Oo(i){return i instanceof Function?i():i}var Fa=(()=>((Fa=Fa||{})[Fa.Important=1]="Important",Fa[Fa.DashCase=2]="DashCase",Fa))();function Sh(i,s){return undefined(i,s)}function Ah(i){const s=i[3];return pt(s)?s[3]:s}function op(i){return ap(i[13])}function Yg(i){return ap(i[4])}function ap(i){for(;null!==i&&!pt(i);)i=i[4];return i}function _d(i,s,a,c,h){if(null!=c){let g,w=!1;pt(c)?g=c:We(c)&&(w=!0,c=c[0]);const T=Mr(c);0===i&&null!==a?null==h?m_(s,a,T):vd(s,a,T,h||null,!0):1===i&&null!==a?vd(s,a,T,h||null,!0):2===i?function Ut(i,s,a){const c=Rh(i,s);c&&function Mh(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,T,w):3===i&&s.destroyNode(T),null!=g&&function CC(i,s,a,c,h){const g=a[7];g!==Mr(a)&&_d(s,i,c,g,h);for(let T=10;T<a.length;T++){const O=a[T];Oh(O[1],O,i,s,c,g)}}(s,i,g,a,h)}}function Kg(i,s,a){return i.createElement(s,a)}function Hb(i,s){const a=i[9],c=a.indexOf(s),h=s[3];512&s[2]&&(s[2]&=-513,Dr(h,-1)),a.splice(c,1)}function p_(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const h=c[17];null!==h&&h!==i&&Hb(h,c),s>0&&(i[a-1][4]=c[4]);const g=Oa(i,10+s);!function $b(i,s){Oh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const w=g[19];null!==w&&w.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Qg(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Oh(i,s,a,3,null,null),function Ub(i){let s=i[13];if(!s)return g_(i[1],i);for(;s;){let a=null;if(We(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)We(s)&&g_(s[1],s),s=s[3];null===s&&(s=i),We(s)&&g_(s[1],s),a=s&&s[4]}s=a}}(s)}}function g_(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Gb(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const h=s[a[c]];if(!(h instanceof fo)){const g=a[c+1];if(Array.isArray(g))for(let w=0;w<g.length;w+=2){const T=h[g[w]],O=g[w+1];try{O.call(T)}finally{}}else try{g.call(h)}finally{}}}}(i,s),function wC(i,s){const a=i.cleanup,c=s[7];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const w=a[g+1],T="function"==typeof w?w(s):Mr(s[w]),O=c[h=a[g+2]],H=a[g+3];"boolean"==typeof H?T.removeEventListener(a[g],O,H):H>=0?c[h=H]():c[h=-H].unsubscribe(),g+=2}else{const w=c[h=a[g+1]];a[g].call(w)}if(null!==c){for(let g=h+1;g<c.length;g++)(0,c[g])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&pt(s[3])){a!==s[3]&&Hb(a,s);const c=s[19];null!==c&&c.detachView(i)}!function o_(i){Gg.delete(i[20])}(s)}}function Wb(i,s,a){return function lp(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const h=i.data[c.directiveStart].encapsulation;if(h===yt.None||h===yt.Emulated)return null}return Ei(c,a)}(i,s.parent,a)}function vd(i,s,a,c,h){i.insertBefore(s,a,c,h)}function m_(i,s,a){i.appendChild(s,a)}function ro(i,s,a,c,h){null!==c?vd(i,s,a,c,h):m_(i,s,a)}function Rh(i,s){return i.parentNode(s)}function Ht(i,s,a){return Sc(i,s,a)}let Sc=function fs(i,s,a){return 40&i.type?Ei(i,a):null};function Gn(i,s,a,c){const h=Wb(i,c,s),g=s[11],T=Ht(c.parent||s[6],c,s);if(null!=h)if(Array.isArray(a))for(let O=0;O<a.length;O++)ro(g,h,a[O],T,!1);else ro(g,h,a,T,!1)}function Xg(i,s){if(null!==s){const a=s.type;if(3&a)return Ei(s,i);if(4&a)return Dt(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Xg(i,c);{const h=i[s.index];return pt(h)?Dt(-1,h):Mr(h)}}if(32&a)return Sh(s,i)()||Mr(i[s.index]);{const c=an(i,s);return null!==c?Array.isArray(c)?c[0]:Xg(Ah(i[16]),c):Xg(i,s.next)}}return null}function an(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Dt(i,s){const a=10+i+1;if(a<s.length){const c=s[a],h=c[1].firstChild;if(null!==h)return Xg(c,h)}return s[7]}function As(i,s,a,c,h,g,w){for(;null!=a;){const T=c[a.index],O=a.type;if(w&&0===s&&(T&&no(Mr(T),c),a.flags|=4),64!=(64&a.flags))if(8&O)As(i,s,a.child,c,h,g,!1),_d(s,i,h,T,g);else if(32&O){const H=Sh(a,c);let J;for(;J=H();)_d(s,i,h,J,g);_d(s,i,h,T,g)}else 16&O?zb(i,s,c,a,h,g):_d(s,i,h,T,g);a=w?a.projectionNext:a.next}}function Oh(i,s,a,c,h,g){As(a,c,i.firstChild,s,h,g,!1)}function zb(i,s,a,c,h,g){const w=a[16],O=w[6].projection[c.projection];if(Array.isArray(O))for(let H=0;H<O.length;H++)_d(s,i,h,O[H],g);else As(i,s,O,w[3],h,g,!0)}function qb(i,s,a){i.setAttribute(s,"style",a)}function Jg(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Yb(i,s,a){let c=i.length;for(;;){const h=i.indexOf(s,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const g=s.length;if(h+g===c||i.charCodeAt(h+g)<=32)return h}a=h+1}}const Kb="ng-template";function Zb(i,s,a){let c=0;for(;c<i.length;){let h=i[c++];if(a&&"class"===h){if(h=i[c],-1!==Yb(h.toLowerCase(),s,0))return!0}else if(1===h){for(;c<i.length&&"string"==typeof(h=i[c++]);)if(h.toLowerCase()===s)return!0;return!1}}return!1}function lr(i){return 4===i.type&&i.value!==Kb}function kh(i,s,a){return s===(4!==i.type||a?i.value:Kb)}function Qb(i,s,a){let c=4;const h=i.attrs||[],g=function TC(i){for(let s=0;s<i.length;s++)if(Sa(i[s]))return s;return i.length}(h);let w=!1;for(let T=0;T<s.length;T++){const O=s[T];if("number"!=typeof O){if(!w)if(4&c){if(c=2|1&c,""!==O&&!kh(i,O,a)||""===O&&1===s.length){if(zr(c))return!1;w=!0}}else{const H=8&c?O:s[++T];if(8&c&&null!==i.attrs){if(!Zb(i.attrs,H,a)){if(zr(c))return!1;w=!0}continue}const pe=Zn(8&c?"class":O,h,lr(i),a);if(-1===pe){if(zr(c))return!1;w=!0;continue}if(""!==H){let Ue;Ue=pe>g?"":h[pe+1].toLowerCase();const ft=8&c?Ue:null;if(ft&&-1!==Yb(ft,H,0)||2&c&&H!==Ue){if(zr(c))return!1;w=!0}}}}else{if(!w&&!zr(c)&&!zr(O))return!1;if(w&&zr(O))continue;w=!1,c=O|1&c}}return zr(c)||w}function zr(i){return 0==(1&i)}function Zn(i,s,a,c){if(null===s)return-1;let h=0;if(c||!a){let g=!1;for(;h<s.length;){const w=s[h];if(w===i)return h;if(3===w||6===w)g=!0;else{if(1===w||2===w){let T=s[++h];for(;"string"==typeof T;)T=s[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=g?1:2}return-1}return function ps(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Ph(i,s,a=!1){for(let c=0;c<s.length;c++)if(Qb(i,s[c],a))return!0;return!1}function sn(i,s){e:for(let a=0;a<s.length;a++){const c=s[a];if(i.length===c.length){for(let h=0;h<i.length;h++)if(i[h]!==c[h])continue e;return!0}}return!1}function cp(i,s){return i?":not("+s.trim()+")":s}function y_(i){let s=i[0],a=1,c=2,h="",g=!1;for(;a<i.length;){let w=i[a];if("string"==typeof w)if(2&c){const T=i[++a];h+="["+w+(T.length>0?'="'+T+'"':"")+"]"}else 8&c?h+="."+w:4&c&&(h+=" "+w);else""!==h&&!zr(w)&&(s+=cp(g,h),h=""),c=w,g=g||!zr(c);a++}return""!==h&&(s+=cp(g,h)),s}const sr={};function Xb(i){Nh(qn(),Pt(),De()+i,!1)}function Nh(i,s,a,c){if(!c)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&ni(s,g,a)}else{const g=i.preOrderHooks;null!==g&&$o(s,g,0,a)}gt(a)}function dp(i,s=null,a=null,c){const h=nl(i,s,a,c);return h.resolveInjectorInitializers(),h}function nl(i,s=null,a=null,c,h=new Set){const g=[a||rn,Cc(i)];return c=c||("object"==typeof i?void 0:oe(i)),new mh(g,s||dd(),c||null,h)}let Ed=(()=>{class i{static create(a,c){var h;if(Array.isArray(a))return dp({name:""},c,a,"");{const g=null!==(h=a.name)&&void 0!==h?h:"";return dp({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=v,i.NULL=new Fg,i.\u0275prov=Tt({token:i,providedIn:"any",factory:()=>le(gh)}),i.__NG_ELEMENT_ID__=-1,i})();function nu(i,s=Nt.Default){const a=Pt();return null===a?le(i,s):Yo(ei(),a,X(i),s)}function C_(){throw new Error("invalid")}function Td(i,s){return i<<17|s<<2}function ko(i){return i>>17&32767}function ru(i){return 2|i}function iu(i){return(131068&i)>>2}function Rc(i,s){return-131069&i|s<<2}function ju(i){return 1|i}function um(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c],g=a[c+1];if(-1!==g){const w=i.data[g];ki(h),w.contentQueries(2,s[g],g)}}}function xd(i,s,a,c,h,g,w,T,O,H,J){const pe=s.blueprint.slice();return pe[0]=h,pe[2]=76|c,(null!==J||i&&1024&i[2])&&(pe[2]|=1024),Do(pe),pe[3]=pe[15]=i,pe[8]=a,pe[10]=w||i&&i[10],pe[11]=T||i&&i[11],pe[12]=O||i&&i[12]||null,pe[9]=H||i&&i[9]||null,pe[6]=g,pe[20]=function i_(){return r_++}(),pe[21]=J,pe[16]=2==s.type?i[16]:pe,pe}function ou(i,s,a,c,h){let g=i.data[s];if(null===g)g=function cm(i,s,a,c,h){const g=Bo(),w=Ns(),O=i.data[s]=function Rd(i,s,a,c,h,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?g:g&&g.parent,a,s,c,h);return null===i.firstChild&&(i.firstChild=O),null!==g&&(w?null==g.child&&null!==O.parent&&(g.child=O):null===g.next&&(g.next=O)),O}(i,s,a,c,h),function Xt(){return Dn.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=c,g.attrs=h;const w=function gi(){const i=Dn.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===w?-1:w.injectorIndex}return Qi(g,!0),g}function kc(i,s,a,c){if(0===a)return-1;const h=s.length;for(let g=0;g<a;g++)s.push(c),i.blueprint.push(c),i.data.push(null);return h}function mp(i,s,a){fa(s);try{const c=i.viewQuery;null!==c&&Od(1,c,a);const h=i.template;null!==h&&M_(i,s,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&um(i,s),i.staticViewQueries&&Od(2,i.viewQuery,a);const g=i.components;null!==g&&function na(i,s){for(let a=0;a<s.length;a++)wa(i,s[a])}(s,g)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,z()}}function yp(i,s,a,c){const h=s[2];if(128!=(128&h)){fa(s);try{Do(s),function ee(i){return Dn.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&M_(i,s,a,2,c);const w=3==(3&h);if(w){const H=i.preOrderCheckHooks;null!==H&&ni(s,H,null)}else{const H=i.preOrderHooks;null!==H&&$o(s,H,0,null),ho(s,0)}if(function bw(i){for(let s=op(i);null!==s;s=Yg(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const h=a[c],g=h[3];0==(512&h[2])&&Dr(g,1),h[2]|=512}}}(s),function vw(i){for(let s=op(i);null!==s;s=Yg(s))for(let a=10;a<s.length;a++){const c=s[a],h=c[1];rs(c)&&yp(h,c,h.template,c[8])}}(s),null!==i.contentQueries&&um(i,s),w){const H=i.contentCheckHooks;null!==H&&ni(s,H)}else{const H=i.contentHooks;null!==H&&$o(s,H,1),ho(s,1)}!function x_(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)gt(~h);else{const g=h,w=a[++c],T=a[++c];mr(w,g),T(2,s[g])}}}finally{gt(-1)}}(i,s);const T=i.components;null!==T&&function jh(i,s){for(let a=0;a<s.length;a++)Fc(i,s[a])}(s,T);const O=i.viewQuery;if(null!==O&&Od(2,O,c),w){const H=i.viewCheckHooks;null!==H&&ni(s,H)}else{const H=i.viewHooks;null!==H&&$o(s,H,2),ho(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Dr(s[3],-1))}finally{z()}}}function M_(i,s,a,c,h){const g=De(),w=2&c;try{gt(-1),w&&s.length>Y&&Nh(i,s,Y,!1),a(c,h)}finally{gt(g)}}function cw(i,s,a){if(ue(s)){const h=s.directiveEnd;for(let g=s.directiveStart;g<h;g++){const w=i.data[g];w.contentQueries&&w.contentQueries(1,a[g],g)}}}function dm(i,s,a){!Ys()||(function gm(i,s,a,c){const h=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||Aa(a,s),no(c,s);const w=a.initialInputs;for(let T=h;T<g;T++){const O=i.data[T],H=_t(O);H&&_w(s,a,O);const J=ma(s,i,T,a);no(J,s),null!==w&&F_(0,T-h,J,O,0,w),H&&(ir(a.index,s)[8]=J)}}(i,s,a,Ei(a,s)),128==(128&a.flags)&&function pw(i,s,a){const c=a.directiveStart,h=a.directiveEnd,g=a.index,w=function Kr(){return Dn.lFrame.currentDirectiveIndex}();try{gt(g);for(let T=c;T<h;T++){const O=i.data[T],H=s[T];Sr(T),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&gw(O,H)}}finally{gt(-1),Sr(w)}}(i,s,a))}function hm(i,s,a=Ei){const c=s.localNames;if(null!==c){let h=s.index+1;for(let g=0;g<c.length;g+=2){const w=c[g+1],T=-1===w?a(s,i):i[w];i[h++]=T}}}function R_(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Hh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Hh(i,s,a,c,h,g,w,T,O,H){const J=Y+c,pe=J+h,Ue=function LC(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:sr);return a}(J,pe),ft="function"==typeof H?H():H;return Ue[1]={type:i,blueprint:Ue,template:a,queries:null,viewQuery:T,declTNode:s,data:Ue.slice().fill(null,J),bindingStartIndex:J,expandoStartIndex:pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:O,consts:ft,incompleteFirstPass:!1}}function Md(i,s,a,c){const h=Ew(s);null===a?h.push(c):(h.push(a),i.firstCreatePass&&yr(i).push(c,h.length-1))}function O_(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const h=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,h):a[c]=[s,h]}return a}function Pc(i,s){const c=s.directiveEnd,h=i.data,g=s.attrs,w=[];let T=null,O=null;for(let H=s.directiveStart;H<c;H++){const J=h[H],pe=J.inputs,Ue=null===g||lr(s)?null:VC(pe,g);w.push(Ue),T=O_(pe,H,T),O=O_(J.outputs,H,O)}null!==T&&(T.hasOwnProperty("class")&&(s.flags|=16),T.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=w,s.inputs=T,s.outputs=O}function k_(i,s){const a=ir(s,i);16&a[2]||(a[2]|=32)}function P_(i,s,a,c){let h=!1;if(Ys()){const g=function _p(i,s,a){const c=i.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const w=c[g];Ph(a,w.selectors,!1)&&(h||(h=[]),ga(Aa(a,s),i,w.type),_t(w)?(mw(i,a),h.unshift(w)):h.push(w))}return h}(i,s,a),w=null===c?null:{"":-1};if(null!==g){h=!0,au(a,i.data.length,g.length);for(let J=0;J<g.length;J++){const pe=g[J];pe.providersResolver&&pe.providersResolver(pe)}let T=!1,O=!1,H=kc(i,s,g.length,null);for(let J=0;J<g.length;J++){const pe=g[J];a.mergedAttrs=pl(a.mergedAttrs,pe.hostAttrs),N_(i,a,s,H,pe),Gh(H,pe,w),null!==pe.contentQueries&&(a.flags|=8),(null!==pe.hostBindings||null!==pe.hostAttrs||0!==pe.hostVars)&&(a.flags|=128);const Ue=pe.type.prototype;!T&&(Ue.ngOnChanges||Ue.ngOnInit||Ue.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),T=!0),!O&&(Ue.ngOnChanges||Ue.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),O=!0),H++}Pc(i,a)}w&&function yw(i,s,a){if(s){const c=i.localNames=[];for(let h=0;h<s.length;h+=2){const g=a[s[h+1]];if(null==g)throw new $e(-301,!1);c.push(s[h],g)}}}(a,c,w)}return a.mergedAttrs=pl(a.mergedAttrs,a.attrs),h}function Pi(i,s,a,c,h,g){const w=g.hostBindings;if(w){let T=i.hostBindingOpCodes;null===T&&(T=i.hostBindingOpCodes=[]);const O=~s.index;(function pm(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(T)!=O&&T.push(O),T.push(c,h,w)}}function gw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function mw(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Gh(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;_t(s)&&(a[""]=i)}}function au(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function N_(i,s,a,c,h){i.data[c]=h;const g=h.factory||(h.factory=Zi(h.type)),w=new fo(g,_t(h),nu);i.blueprint[c]=w,a[c]=w,Pi(i,s,0,c,kc(i,a,h.hostVars,sr),h)}function _w(i,s,a){const c=Ei(s,i),h=R_(a),g=i[10],w=Lc(i,xd(i,h,null,a.onPush?32:16,c,s,g,g.createRenderer(c,a),null,null,null));i[s.index]=w}function Fl(i,s,a,c,h,g){const w=Ei(i,s);!function Nc(i,s,a,c,h,g,w){if(null==g)i.removeAttribute(s,h,a);else{const T=null==w?Ie(g):w(g,c||"",h);i.setAttribute(s,h,T,a)}}(s[11],w,g,i.value,a,c,h)}function F_(i,s,a,c,h,g){const w=g[s];if(null!==w){const T=c.setInput;for(let O=0;O<w.length;){const H=w[O++],J=w[O++],pe=w[O++];null!==T?c.setInput(a,pe,H,J):a[J]=pe}}}function VC(i,s){let a=null,c=0;for(;c<s.length;){const h=s[c];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Hr(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Fc(i,s){const a=ir(s,i);if(rs(a)){const c=a[1];48&a[2]?yp(c,a,c.template,a[8]):a[5]>0&&L_(a)}}function L_(i){for(let c=op(i);null!==c;c=Yg(c))for(let h=10;h<c.length;h++){const g=c[h];if(rs(g))if(512&g[2]){const w=g[1];yp(w,g,w.template,g[8])}else g[5]>0&&L_(g)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const h=ir(a[c],i);rs(h)&&h[5]>0&&L_(h)}}function wa(i,s){const a=ir(s,i),c=a[1];(function ww(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),mp(c,a,a[8])}function Lc(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function mm(i){for(;i;){i[2]|=32;const s=Ah(i);if(At(i)&&!s)return i;i=s}return null}function Ua(i,s,a,c=!0){const h=s[10];h.begin&&h.begin();try{yp(i,s,i.template,a)}catch(w){throw c&&vp(s,w),w}finally{h.end&&h.end()}}function Od(i,s,a){ki(0),s(i,a)}function Ew(i){return i[7]||(i[7]=[])}function yr(i){return i.cleanup||(i.cleanup=[])}function vp(i,s){const a=i[9],c=a?a.get(Dh,null):null;c&&c.handleError(s)}function kd(i,s,a,c,h){for(let g=0;g<a.length;){const w=a[g++],T=a[g++],O=s[w],H=i.data[w];null!==H.setInput?H.setInput(O,h,c,T):O[T]=h}}function Pd(i,s,a){let c=a?i.styles:null,h=a?i.classes:null,g=0;if(null!==s)for(let w=0;w<s.length;w++){const T=s[w];"number"==typeof T?g=T:1==g?h=ye(h,T):2==g&&(c=ye(c,T+": "+s[++w]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=h:i.classesWithoutHost=h}function bp(i,s,a,c,h=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&c.push(Mr(g)),pt(g))for(let T=10;T<g.length;T++){const O=g[T],H=O[1].firstChild;null!==H&&bp(O[1],O,H,c)}const w=a.type;if(8&w)bp(i,s,a.child,c);else if(32&w){const T=Sh(a,s);let O;for(;O=T();)c.push(O)}else if(16&w){const T=an(s,a);if(Array.isArray(T))c.push(...T);else{const O=Ah(s[16]);bp(O[1],O,T,c,!0)}}a=h?a.projectionNext:a.next}return c}class Wh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return bp(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(pt(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(p_(s,c),Oa(a,c))}this._attachedToViewContainer=!1}Qg(this._lView[1],this._lView)}onDestroy(s){Md(this._lView[1],this._lView,null,s)}markForCheck(){mm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ua(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function La(i,s){Oh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new $e(902,!1);this._appRef=s}}class Cw extends Wh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Ua(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class B_ extends Lu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ge(s);return new wp(a,this.ngModule)}}function V_(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class UC{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const h=this.injector.get(s,Ln,c);return h!==Ln||a===Ln?h:this.parentInjector.get(s,a,c)}}class wp extends Fu{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function wd(i){return i.map(y_).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return V_(this.componentDef.inputs)}get outputs(){return V_(this.componentDef.outputs)}create(s,a,c,h){let g=(h=h||this.ngModule)instanceof ii?h:null==h?void 0:h.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const w=g?new UC(s,g):s,T=w.get(G,null);if(null===T)throw new $e(407,!1);const O=w.get(Et,null),H=T.createRenderer(null,this.componentDef),J=this.componentDef.selectors[0][0]||"div",pe=c?function dw(i,s,a){return i.selectRootElement(s,a===yt.ShadowDom)}(H,c,this.componentDef.encapsulation):Kg(T.createRenderer(null,this.componentDef),J,function Dw(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(J)),Ue=this.componentDef.onPush?288:272,ft=Hh(0,null,null,1,0,null,null,null,null,null),xt=xd(null,ft,null,Ue,null,null,T,H,O,w,null);let Wt,tn;fa(xt);try{const En=function yo(i,s,a,c,h,g){const w=a[1];a[22]=i;const O=ou(w,22,2,"#host",null),H=O.mergedAttrs=s.hostAttrs;null!==H&&(Pd(O,H,!0),null!==i&&(fl(h,i,H),null!==O.classes&&Jg(h,i,O.classes),null!==O.styles&&qb(h,i,O.styles)));const J=c.createRenderer(i,s),pe=xd(a,R_(s),null,s.onPush?32:16,a[22],O,c,J,g||null,null,null);return w.firstCreatePass&&(ga(Aa(O,a),w,s.type),mw(w,O),au(O,a.length,1)),Lc(a,pe),a[22]=pe}(pe,this.componentDef,xt,T,H);if(pe)if(c)fl(H,pe,["ng-version",fn.full]);else{const{attrs:Bn,classes:Vt}=function SC(i){const s=[],a=[];let c=1,h=2;for(;c<i.length;){let g=i[c];if("string"==typeof g)2===h?""!==g&&s.push(g,i[++c]):8===h&&a.push(g);else{if(!zr(h))break;h=g}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Bn&&fl(H,pe,Bn),Vt&&Vt.length>0&&Jg(H,pe,Vt.join(" "))}if(tn=Cs(ft,Y),void 0!==a){const Bn=tn.projection=[];for(let Vt=0;Vt<this.ngContentSelectors.length;Vt++){const Yn=a[Vt];Bn.push(null!=Yn?Array.from(Yn):null)}}Wt=function $_(i,s,a,c){const h=a[1],g=function BC(i,s,a){const c=ei();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),N_(i,c,s,kc(i,s,1,null),a),Pc(i,c));const h=ma(s,i,c.directiveStart,c);no(h,s);const g=Ei(c,s);return g&&no(g,s),h}(h,a,s);if(i[8]=a[8]=g,null!==c)for(const T of c)T(g,s);if(s.contentQueries){const T=ei();s.contentQueries(1,g,T.directiveStart)}const w=ei();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(gt(w.index),Pi(a[1],w,0,w.directiveStart,w.directiveEnd,s),gw(s,g)),g}(En,this.componentDef,xt,[Sw]),mp(ft,xt,null)}finally{z()}return new Tw(this.componentType,Wt,b(tn,xt),xt,tn)}}class Tw extends class fd{}{constructor(s,a,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Cw(h),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[s])){const g=this._rootLView;kd(g[1],g,h,s,a),k_(g,this._tNode.index)}}get injector(){return new $s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Sw(){const i=ei();Tr(Pt()[1],i)}function rl(i){let s=function zh(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let h;if(_t(i))h=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new $e(903,!1);h=s.\u0275dir}if(h){if(a){c.push(h);const w=i;w.inputs=_m(i.inputs),w.declaredInputs=_m(i.declaredInputs),w.outputs=_m(i.outputs);const T=h.hostBindings;T&&xw(i,T);const O=h.viewQuery,H=h.contentQueries;if(O&&Ep(i,O),H&&Aw(i,H),he(i.inputs,h.inputs),he(i.declaredInputs,h.declaredInputs),he(i.outputs,h.outputs),_t(h)&&h.data.animation){const J=i.data;J.animation=(J.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let w=0;w<g.length;w++){const T=g[w];T&&T.ngInherit&&T(i),T===rl&&(a=!1)}}s=Object.getPrototypeOf(s)}!function U_(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const h=i[c];h.hostVars=s+=h.hostVars,h.hostAttrs=pl(h.hostAttrs,a=pl(a,h.hostAttrs))}}(c)}function _m(i){return i===_r?{}:i===rn?[]:i}function Ep(i,s){const a=i.viewQuery;i.viewQuery=a?(c,h)=>{s(c,h),a(c,h)}:s}function Aw(i,s){const a=i.contentQueries;i.contentQueries=a?(c,h,g)=>{s(c,h,g),a(c,h,g)}:s}function xw(i,s){const a=i.hostBindings;i.hostBindings=a?(c,h)=>{s(c,h),a(c,h)}:s}let Bc=null;function Hu(){if(!Bc){const i=Xn.Symbol;if(i&&i.iterator)Bc=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Bc=c)}}}return Bc}function qh(i){return!!H_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Hu()in i)}function H_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function xs(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function G_(i,s,a,c){const h=Pt();return xs(h,lt(),s)&&(qn(),Fl(It(),h,i,s,a,c)),G_}function jw(i,s,a,c,h,g,w,T){const O=Pt(),H=qn(),J=i+Y,pe=H.firstCreatePass?function zC(i,s,a,c,h,g,w,T,O){const H=s.consts,J=ou(s,i,4,w||null,Ii(H,T));P_(s,a,J,Ii(H,O)),Tr(s,J);const pe=J.tViews=Hh(2,J,c,h,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,H);return null!==s.queries&&(s.queries.template(s,J),pe.queries=s.queries.embeddedTView(J)),J}(J,H,O,s,a,c,h,g,w):H.data[J];Qi(pe,!1);const Ue=O[11].createComment("");Gn(H,O,Ue,pe),no(Ue,O),Lc(O,O[J]=Hr(Ue,O,Ue,pe)),st(pe)&&dm(H,O,pe),null!=w&&hm(O,pe,T)}function bm(i,s,a){const c=Pt();return xs(c,lt(),s)&&function mo(i,s,a,c,h,g,w,T){const O=Ei(s,a);let J,H=s.inputs;!T&&null!=H&&(J=H[c])?(kd(i,a,J,c,h),Fe(s)&&k_(a,s.index)):3&s.type&&(c=function hw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),h=null!=w?w(h,s.value||"",c):h,g.setProperty(O,c,h))}(qn(),It(),c,i,s,c[11],a,!1),bm}function W_(i,s,a,c,h){const w=h?"class":"style";kd(i,a,s.inputs[w],w,c)}function Cp(i,s,a,c){const h=Pt(),g=qn(),w=Y+i,T=h[11],O=h[w]=Kg(T,s,function fr(){return Dn.lFrame.currentNamespace}()),H=g.firstCreatePass?function Hw(i,s,a,c,h,g,w){const T=s.consts,H=ou(s,i,2,h,Ii(T,g));return P_(s,a,H,Ii(T,w)),null!==H.attrs&&Pd(H,H.attrs,!1),null!==H.mergedAttrs&&Pd(H,H.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,H),H}(w,g,h,0,s,a,c):g.data[w];Qi(H,!0);const J=H.mergedAttrs;null!==J&&fl(T,O,J);const pe=H.classes;null!==pe&&Jg(T,O,pe);const Ue=H.styles;return null!==Ue&&qb(T,O,Ue),64!=(64&H.flags)&&Gn(g,h,O,H),0===function co(){return Dn.lFrame.elementDepthCount}()&&no(O,h),function qs(){Dn.lFrame.elementDepthCount++}(),st(H)&&(dm(g,h,H),cw(g,H,h)),null!==c&&hm(h,H),Cp}function wm(){let i=ei();Ns()?V():(i=i.parent,Qi(i,!1));const s=i;!function da(){Dn.lFrame.elementDepthCount--}();const a=qn();return a.firstCreatePass&&(Tr(a,i),ue(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ic(i){return 0!=(16&i.flags)}(s)&&W_(a,s,Pt(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function hl(i){return 0!=(32&i.flags)}(s)&&W_(a,s,Pt(),s.stylesWithoutHost,!1),wm}function Dp(i,s,a,c){return Cp(i,s,a,c),wm(),Dp}function Tp(i,s,a){const c=Pt(),h=qn(),g=i+Y,w=h.firstCreatePass?function _o(i,s,a,c,h){const g=s.consts,w=Ii(g,c),T=ou(s,i,8,"ng-container",w);return null!==w&&Pd(T,w,!0),P_(s,a,T,Ii(g,h)),null!==s.queries&&s.queries.elementStart(s,T),T}(g,h,c,s,a):h.data[g];Qi(w,!0);const T=c[g]=c[11].createComment("");return Gn(h,c,T,w),no(T,c),st(w)&&(dm(h,c,w),cw(h,w,c)),null!=a&&hm(c,w),Tp}function Sp(){let i=ei();const s=qn();return Ns()?V():(i=i.parent,Qi(i,!1)),s.firstCreatePass&&(Tr(s,i),ue(i)&&s.queries.elementEnd(i)),Sp}function Ap(i,s,a){return Tp(i,s,a),Sp(),Ap}function Wu(){return Pt()}function Em(i){return!!i&&"function"==typeof i.then}function Gw(i){return!!i&&"function"==typeof i.subscribe}const z_=Gw;function Zh(i,s,a,c){const h=Pt(),g=qn(),w=ei();return function $c(i,s,a,c,h,g,w,T){const O=st(c),J=i.firstCreatePass&&yr(i),pe=s[8],Ue=Ew(s);let ft=!0;if(3&c.type||T){const tn=Ei(c,s),En=T?T(tn):tn,Bn=Ue.length,Vt=T?Gr=>T(Mr(Gr[c.index])):c.index;let Yn=null;if(!T&&O&&(Yn=function Vd(i,s,a,c){const h=i.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const w=h[g];if(w===a&&h[g+1]===c){const T=s[7],O=h[g+2];return T.length>O?T[O]:null}"string"==typeof w&&(g+=2)}return null}(i,s,h,c.index)),null!==Yn)(Yn.__ngLastListenerFn__||Yn).__ngNextListenerFn__=g,Yn.__ngLastListenerFn__=g,ft=!1;else{g=q_(c,s,pe,g,!1);const Gr=a.listen(En,h,g);Ue.push(g,Gr),J&&J.push(h,Vt,Bn,Bn+1)}}else g=q_(c,s,pe,g,!1);const xt=c.outputs;let Wt;if(ft&&null!==xt&&(Wt=xt[h])){const tn=Wt.length;if(tn)for(let En=0;En<tn;En+=2){const Bi=s[Wt[En]][Wt[En+1]].subscribe(g),Xu=Ue.length;Ue.push(g,Bi),J&&J.push(h,c.index,Xu,-(Xu+1))}}}(g,h,h[11],w,i,s,0,c),Zh}function Qh(i,s,a,c){try{return!1!==a(c)}catch(h){return vp(i,h),!1}}function q_(i,s,a,c,h){return function g(w){if(w===Function)return c;mm(2&i.flags?ir(i.index,s):s);let O=Qh(s,0,c,w),H=g.__ngNextListenerFn__;for(;H;)O=Qh(s,0,H,w)&&O,H=H.__ngNextListenerFn__;return h&&!1===O&&(w.preventDefault(),w.returnValue=!1),O}}function Im(i=1){return function N(i){return(Dn.lFrame.contextLView=function Q(i,s){for(;i>0;)s=s[15],i--;return s}(i,Dn.lFrame.contextLView))[8]}(i)}function Y_(i,s){let a=null;const c=function qr(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let h=0;h<s.length;h++){const g=s[h];if("*"!==g){if(null===c?Ph(i,g,!0):sn(c,g))return h}else a=h}return a}function K_(i){const s=Pt()[16][6];if(!s.projection){const c=s.projection=_a(i?i.length:1,null),h=c.slice();let g=s.child;for(;null!==g;){const w=i?Y_(g,i):0;null!==w&&(h[w]?h[w].projectionNext=g:c[w]=g,h[w]=g),g=g.next}}}function Z_(i,s=0,a){const c=Pt(),h=qn(),g=ou(h,Y+i,16,null,a||null);null===g.projection&&(g.projection=s),V(),64!=(64&g.flags)&&function IC(i,s,a){zb(s[11],0,s,a,Wb(i,a,s),Ht(a.parent||s[6],a,s))}(h,c,g)}function jc(i,s,a,c,h){const g=i[a+1],w=null===s;let T=c?ko(g):iu(g),O=!1;for(;0!==T&&(!1===O||w);){const J=i[T+1];Kw(i[T],s)&&(O=!0,i[T+1]=c?ju(J):ru(J)),T=c?ko(J):iu(J)}O&&(i[a+1]=c?ru(g):ju(g))}function Kw(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&va(i,s)>=0}function cu(i,s){return function Ho(i,s,a,c){const h=Pt(),g=qn(),w=function Ft(i){const s=Dn.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);g.firstUpdatePass&&function nv(i,s,a,c){const h=i.data;if(null===h[a+1]){const g=h[De()],w=function zu(i,s){return s>=i.expandoStartIndex}(i,a);(function sv(i,s){return 0!=(i.flags&(s?16:32))})(g,c)&&null===s&&!w&&(s=!1),s=function KC(i,s,a,c){const h=function li(i){const s=Dn.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=c?s.residualClasses:s.residualStyles;if(null===h)0===(c?s.classBindings:s.styleBindings)&&(a=tf(a=ef(null,i,s,a,c),s.attrs,c),g=null);else{const w=s.directiveStylingLast;if(-1===w||i[w]!==h)if(a=ef(h,i,s,a,c),null===g){let O=function ZC(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==iu(c))return i[ko(c)]}(i,s,c);void 0!==O&&Array.isArray(O)&&(O=ef(null,i,s,O[1],c),O=tf(O,s.attrs,c),function QC(i,s,a,c){i[ko(a?s.classBindings:s.styleBindings)]=c}(i,s,c,O))}else g=function XC(i,s,a){let c;const h=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<h;g++)c=tf(c,i[g].hostAttrs,a);return tf(c,s.attrs,a)}(i,s,c)}return void 0!==g&&(c?s.residualClasses=g:s.residualStyles=g),a}(h,g,s,c),function Mp(i,s,a,c,h,g){let w=g?s.classBindings:s.styleBindings,T=ko(w),O=iu(w);i[c]=a;let J,H=!1;if(Array.isArray(a)){const pe=a;J=pe[1],(null===J||va(pe,J)>0)&&(H=!0)}else J=a;if(h)if(0!==O){const Ue=ko(i[T+1]);i[c+1]=Td(Ue,T),0!==Ue&&(i[Ue+1]=Rc(i[Ue+1],c)),i[T+1]=function pp(i,s){return 131071&i|s<<17}(i[T+1],c)}else i[c+1]=Td(T,0),0!==T&&(i[T+1]=Rc(i[T+1],c)),T=c;else i[c+1]=Td(O,0),0===T?T=c:i[O+1]=Rc(i[O+1],c),O=c;H&&(i[c+1]=ru(i[c+1])),jc(i,J,c,!0),jc(i,J,c,!1),function $d(i,s,a,c,h){const g=h?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&va(g,s)>=0&&(a[c+1]=ju(a[c+1]))}(s,J,i,c,g),w=Td(T,O),g?s.classBindings=w:s.styleBindings=w}(h,g,s,a,w,c)}}(g,i,w,c),s!==sr&&xs(h,w,s)&&function iv(i,s,a,c,h,g,w,T){if(!(3&s.type))return;const O=i.data,H=O[T+1];Gc(function sm(i){return 1==(1&i)}(H)?Hc(O,s,a,h,iu(H),w):void 0)||(Gc(g)||function Pl(i){return 2==(2&i)}(H)&&(g=Hc(O,null,a,h,T,w)),function DC(i,s,a,c,h){if(s)h?i.addClass(a,c):i.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:Fa.DashCase;null==h?i.removeStyle(a,c,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Fa.Important),i.setStyle(a,c,h,g))}}(c,w,function Yr(i,s){return Mr(s[i])}(De(),a),h,g))}(g,g.data[De()],h,h[11],i,h[w+1]=function rE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=oe(ba(i)))),i}(s,a),c,w)}(i,s,null,!0),cu}function ef(i,s,a,c,h){let g=null;const w=a.directiveEnd;let T=a.directiveStylingLast;for(-1===T?T=a.directiveStart:T++;T<w&&(g=s[T],c=tf(c,g.hostAttrs,h),g!==i);)T++;return null!==i&&(a.directiveStylingLast=T),c}function tf(i,s,a){const c=a?1:2;let h=-1;if(null!==s)for(let g=0;g<s.length;g++){const w=s[g];"number"==typeof w?h=w:h===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),as(i,w,!!a||s[++g]))}return void 0===i?null:i}function Hc(i,s,a,c,h,g){const w=null===s;let T;for(;h>0;){const O=i[h],H=Array.isArray(O),J=H?O[1]:O,pe=null===J;let Ue=a[h+1];Ue===sr&&(Ue=pe?rn:void 0);let ft=pe?El(Ue,c):J===c?Ue:void 0;if(H&&!Gc(ft)&&(ft=El(O,c)),Gc(ft)&&(T=ft,w))return T;const xt=i[h+1];h=w?ko(xt):iu(xt)}if(null!==s){let O=g?s.residualClasses:s.residualStyles;null!=O&&(T=El(O,c))}return T}function Gc(i){return void 0!==i}function iE(i,s=""){const a=Pt(),c=qn(),h=i+Y,g=c.firstCreatePass?ou(c,h,1,s,null):c.data[h],w=a[h]=function Vu(i,s){return i.createText(s)}(a[11],s);Gn(c,a,w,g),Qi(g,!1)}const Gd=void 0;var yE=["en",[["a","p"],["AM","PM"],Gd],[["AM","PM"],Gd,Gd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gd,"{1} 'at' {0}",Gd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _v(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Wd={};function nf(i){const s=function bE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Om(s);if(a)return a;const c=s.split("-")[0];if(a=Om(c),a)return a;if("en"===c)return yE;throw new $e(701,!1)}function Np(i){return nf(i)[$n.PluralCase]}function Om(i){return i in Wd||(Wd[i]=Xn.ng&&Xn.ng.common&&Xn.ng.common.locales&&Xn.ng.common.locales[i]),Wd[i]}var $n=(()=>(($n=$n||{})[$n.LocaleId=0]="LocaleId",$n[$n.DayPeriodsFormat=1]="DayPeriodsFormat",$n[$n.DayPeriodsStandalone=2]="DayPeriodsStandalone",$n[$n.DaysFormat=3]="DaysFormat",$n[$n.DaysStandalone=4]="DaysStandalone",$n[$n.MonthsFormat=5]="MonthsFormat",$n[$n.MonthsStandalone=6]="MonthsStandalone",$n[$n.Eras=7]="Eras",$n[$n.FirstDayOfWeek=8]="FirstDayOfWeek",$n[$n.WeekendRange=9]="WeekendRange",$n[$n.DateFormat=10]="DateFormat",$n[$n.TimeFormat=11]="TimeFormat",$n[$n.DateTimeFormat=12]="DateTimeFormat",$n[$n.NumberSymbols=13]="NumberSymbols",$n[$n.NumberFormats=14]="NumberFormats",$n[$n.CurrencyCode=15]="CurrencyCode",$n[$n.CurrencySymbol=16]="CurrencySymbol",$n[$n.CurrencyName=17]="CurrencyName",$n[$n.Currencies=18]="Currencies",$n[$n.Directionality=19]="Directionality",$n[$n.PluralCase=20]="PluralCase",$n[$n.ExtraData=21]="ExtraData",$n))();const rf="en-US";let Nm=rf;function Zm(i,s,a,c,h){if(i=X(i),Array.isArray(i))for(let g=0;g<i.length;g++)Zm(i[g],s,a,c,h);else{const g=qn(),w=Pt();let T=Ql(i)?i:X(i.provide),O=hd(i);const H=ei(),J=1048575&H.providerIndexes,pe=H.directiveStart,Ue=H.providerIndexes>>20;if(Ql(i)||!i.multi){const ft=new fo(O,h,nu),xt=$v(T,s,h?J:J+Ue,pe);-1===xt?(ga(Aa(H,w),g,T),Up(g,i,s.length),s.push(T),H.directiveStart++,H.directiveEnd++,h&&(H.providerIndexes+=1048576),a.push(ft),w.push(ft)):(a[xt]=ft,w[xt]=ft)}else{const ft=$v(T,s,J+Ue,pe),xt=$v(T,s,J,J+Ue),Wt=ft>=0&&a[ft],tn=xt>=0&&a[xt];if(h&&!tn||!h&&!Wt){ga(Aa(H,w),g,T);const En=function TD(i,s,a,c,h){const g=new fo(i,a,nu);return g.multi=[],g.index=s,g.componentProviders=0,Vv(g,h,c&&!a),g}(h?DD:Uv,a.length,h,c,O);!h&&tn&&(a[xt].providerFactory=En),Up(g,i,s.length,0),s.push(T),H.directiveStart++,H.directiveEnd++,h&&(H.providerIndexes+=1048576),a.push(En),w.push(En)}else Up(g,i,ft>-1?ft:xt,Vv(a[h?xt:ft],O,!h&&c));!h&&c&&tn&&a[xt].componentProviders++}}}function Up(i,s,a,c){const h=Ql(s),g=function ku(i){return!!i.useClass}(s);if(h||g){const O=(g?X(s.useClass):s).prototype.ngOnDestroy;if(O){const H=i.destroyHooks||(i.destroyHooks=[]);if(!h&&s.multi){const J=H.indexOf(a);-1===J?H.push(a,[c,O]):H[J+1].push(c,O)}else H.push(a,O)}}}function Vv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function $v(i,s,a,c){for(let h=a;h<c;h++)if(s[h]===i)return h;return-1}function Uv(i,s,a,c){return jp(this.multi,[])}function DD(i,s,a,c){const h=this.multi;let g;if(this.providerFactory){const w=this.providerFactory.componentProviders,T=ma(a,a[1],this.providerFactory.index,c);g=T.slice(0,w),jp(h,g);for(let O=w;O<T.length;O++)g.push(T[O])}else g=[],jp(h,g);return g}function jp(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Qm(i,s=[]){return a=>{a.providersResolver=(c,h)=>function Bv(i,s,a){const c=qn();if(c.firstCreatePass){const h=_t(i);Zm(a,c.data,c.blueprint,h,!0),Zm(s,c.data,c.blueprint,h,!1)}}(c,h?h(i):i,s)}}class hf{}class Xm{}function jv(i,s){return new Yd(i,null!=s?s:null)}class Yd extends hf{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new B_(this);const c=Kn(s);this._bootstrapComponents=Oo(c.bootstrap),this._r3Injector=nl(s,a,[{provide:hf,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver}],oe(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Jm extends Xm{constructor(s){super(),this.moduleType=s}create(s){return new Yd(this.moduleType,s)}}class Hv extends hf{constructor(s,a,c){super(),this.componentFactoryResolver=new B_(this),this.instance=null;const h=new mh([...s,{provide:hf,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver}],a||dd(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Gv(i,s,a=null){return new Hv(i,s,a).injector}let Wv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=ld(0,a.type),h=c.length>0?Gv([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Tt({token:i,providedIn:"environment",factory:()=>new i(le(ii))}),i})();function hu(i){i.getStandaloneInjector=s=>s.get(Wv).getOrCreateStandaloneInjector(i)}function sy(i){return s=>{setTimeout(i,void 0,s)}}const ll=class iy extends u.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var h,g,w;let T=s,O=a||(()=>null),H=c;if(s&&"object"==typeof s){const pe=s;T=null===(h=pe.next)||void 0===h?void 0:h.bind(pe),O=null===(g=pe.error)||void 0===g?void 0:g.bind(pe),H=null===(w=pe.complete)||void 0===w?void 0:w.bind(pe)}this.__isAsync&&(O=sy(O),T&&(T=sy(T)),H&&(H=sy(H)));const J=super.subscribe({next:T,error:O,complete:H});return s instanceof W.w&&s.add(J),J}};function qE(){return this._results[Hu()]()}class pf{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Hu(),c=pf.prototype;c[a]||(c[a]=qE)}get changes(){return this._changes||(this._changes=new ll)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const h=os(s);(this._changesDetected=!function Du(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let h=i[c],g=s[c];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zp=(()=>{class i{}return i.__NG_ELEMENT_ID__=ND,i})();const BS=zp,PD=class extends BS{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,h=xd(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(h[19]=w.createEmbeddedView(c)),mp(c,h,s),new Wh(h)}};function ND(){return oy(ei(),Pt())}function oy(i,s){return 4&i.type?new PD(s,i,b(i,s)):null}let ay=(()=>{class i{}return i.__NG_ELEMENT_ID__=FD,i})();function FD(){return uy(ei(),Pt())}const YE=ay,ly=class extends YE{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return b(this._hostTNode,this._hostLView)}get injector(){return new $s(this._hostTNode,this._hostLView)}get parentInjector(){const s=Wl(this._hostTNode,this._hostLView);if(oc(s)){const a=Vs(s,this._hostLView),c=Xi(s);return new $s(a[1].data[c+8],a)}return new $s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=s0(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let h,g;"number"==typeof c?h=c:null!=c&&(h=c.index,g=c.injector);const w=s.createEmbeddedView(a||{},g);return this.insert(w,h),w}createComponent(s,a,c,h,g){const w=s&&!function Mo(i){return"function"==typeof i}(s);let T;if(w)T=a;else{const pe=a||{};T=pe.index,c=pe.injector,h=pe.projectableNodes,g=pe.environmentInjector||pe.ngModuleRef}const O=w?s:new wp(Ge(s)),H=c||this.parentInjector;if(!g&&null==O.ngModule){const Ue=(w?H:this.parentInjector).get(ii,null);Ue&&(g=Ue)}const J=O.create(H,h,void 0,g);return this.insert(J.hostView,T),J}insert(s,a){const c=s._lView,h=c[1];if(function Ps(i){return pt(i[3])}(c)){const J=this.indexOf(s);if(-1!==J)this.detach(J);else{const pe=c[3],Ue=new ly(pe,pe[6],pe[3]);Ue.detach(Ue.indexOf(s))}}const g=this._adjustIndex(a),w=this._lContainer;!function jb(i,s,a,c){const h=10+c,g=a.length;c>0&&(a[h-1][4]=s),c<g-10?(s[4]=a[h],_l(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const w=s[17];null!==w&&a!==w&&function xh(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(w,s);const T=s[19];null!==T&&T.insertView(i),s[2]|=64}(h,c,w,g);const T=Dt(g,w),O=c[11],H=Rh(O,w[7]);return null!==H&&function Zg(i,s,a,c,h,g){c[0]=h,c[6]=s,Oh(i,c,a,1,h,g)}(h,w[6],O,c,H,T),s.attachToViewContainerRef(),_l(qp(w),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=s0(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=p_(this._lContainer,a);c&&(Oa(qp(this._lContainer),a),Qg(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=p_(this._lContainer,a);return c&&null!=Oa(qp(this._lContainer),a)?new Wh(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function s0(i){return i[8]}function qp(i){return i[8]||(i[8]=[])}function uy(i,s){let a;const c=s[i.index];if(pt(c))a=c;else{let h;if(8&i.type)h=Mr(c);else{const g=s[11];h=g.createComment("");const w=Ei(i,s);vd(g,Rh(g,w),h,function EC(i,s){return i.nextSibling(s)}(g,w),!1)}s[i.index]=a=Hr(c,s,h,i),Lc(s,a)}return new ly(a,i,s)}class dy{constructor(s){this.queryList=s,this.matches=null}clone(){return new dy(this.queryList)}setDirty(){this.queryList.setDirty()}}class gf{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,h=[];for(let g=0;g<c;g++){const w=a.getByIndex(g);h.push(this.queries[w.indexInDeclarationView].clone())}return new gf(h)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==tI(s,a).matches&&this.queries[a].setDirty()}}class hy{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Yp{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(s,h);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new Yp(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class fy{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new fy(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(s,a,mf(a,g)),this.matchTNodeWithReadOption(s,a,Ka(a,s,g,!1,!1))}else c===zp?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ka(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===f||h===ay||h===zp&&4&a.type)this.addMatch(a.index,-2);else{const g=Ka(a,s,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function mf(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function LD(i,s,a,c){return-1===a?function a0(i,s){return 11&i.type?b(i,s):4&i.type?oy(i,s):null}(s,i):-2===a?function BD(i,s,a){return a===f?b(s,i):a===zp?oy(s,i):a===ay?uy(s,i):void 0}(i,s,c):ma(i,i[1],a,s)}function ZE(i,s,a,c){const h=s[19].queries[c];if(null===h.matches){const g=i.data,w=a.matches,T=[];for(let O=0;O<w.length;O+=2){const H=w[O];T.push(H<0?null:LD(s,g[H],w[O+1],a.metadata.read))}h.matches=T}return h.matches}function py(i,s,a,c){const h=i.queries.getByIndex(a),g=h.matches;if(null!==g){const w=ZE(i,s,h,a);for(let T=0;T<g.length;T+=2){const O=g[T];if(O>0)c.push(w[T/2]);else{const H=g[T+1],J=s[-O];for(let pe=10;pe<J.length;pe++){const Ue=J[pe];Ue[17]===Ue[3]&&py(Ue[1],Ue,H,c)}if(null!==J[9]){const pe=J[9];for(let Ue=0;Ue<pe.length;Ue++){const ft=pe[Ue];py(ft[1],ft,H,c)}}}}}return c}function QE(i){const s=Pt(),a=qn(),c=ti();ki(c+1);const h=tI(a,c);if(i.dirty&&function zs(i){return 4==(4&i[2])}(s)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const g=h.crossesNgTemplate?py(a,s,c,[]):ZE(a,s,h,c);i.reset(g,m),i.notifyOnChanges()}return!0}return!1}function l0(i,s,a){const c=qn();c.firstCreatePass&&(gy(c,new hy(i,s,a),-1),2==(2&s)&&(c.staticViewQueries=!0)),eI(c,Pt(),s)}function XE(i,s,a,c){const h=qn();if(h.firstCreatePass){const g=ei();gy(h,new hy(s,a,c),g.index),function $D(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}eI(h,Pt(),a)}function JE(){return function VD(i,s){return i[19].queries[s].queryList}(Pt(),ti())}function eI(i,s,a){const c=new pf(4==(4&a));Md(i,s,c,c.destroy),null===s[19]&&(s[19]=new gf),s[19].queries.push(new dy(c))}function gy(i,s,a){null===i.queries&&(i.queries=new Yp),i.queries.track(new fy(s,a))}function tI(i,s){return i.queries.getByIndex(s)}function by(...i){}const w0=new jr("Application Initializer");let wy=(()=>{class i{constructor(a){this.appInits=a,this.resolve=by,this.reject=by,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Em(g))a.push(g);else if(z_(g)){const w=new Promise((T,O)=>{g.subscribe({complete:T,error:O})});a.push(w)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(le(w0,8))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cI=new jr("AppId",{providedIn:"root",factory:function E0(){return`${Ey()}${Ey()}${Ey()}`}});function Ey(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const I0=new jr("Platform Initializer"),C0=new jr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eg=new jr("appBootstrapListener");let Yu=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Bl=new jr("LocaleId",{providedIn:"root",factory:()=>ct(Bl,Nt.Optional|Nt.SkipSelf)||function tg(){return"undefined"!=typeof $localize&&$localize.locale||rf}()}),ZD=new jr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class XD{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let JD=(()=>{class i{compileModuleSync(a){return new Jm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=Oo(Kn(a).declarations).reduce((w,T)=>{const O=Ge(T);return O&&w.push(new wp(O)),w},[]);return new XD(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const dI=(()=>Promise.resolve(0))();function S0(i){"undefined"==typeof Zone?dI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ia{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ll(!1),this.onMicrotaskEmpty=new ll(!1),this.onStable=new ll(!1),this.onError=new ll(!1),"undefined"==typeof Zone)throw new $e(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function bf(){let i=Xn.requestAnimationFrame,s=Xn.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function fI(i){const s=()=>{!function nT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Xn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,gu(i),i.isCheckStableRunning=!0,hI(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),gu(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,g,w,T)=>{try{return pI(i),a.invokeTask(h,g,w,T)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),gI(i)}},onInvoke:(a,c,h,g,w,T,O)=>{try{return pI(i),a.invoke(h,g,w,T,O)}finally{i.shouldCoalesceRunChangeDetection&&s(),gI(i)}},onHasTask:(a,c,h,g)=>{a.hasTask(h,g),c===h&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,gu(i),hI(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,h,g)=>(a.handleError(h,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ia.isInAngularZone())throw new $e(909,!1)}static assertNotInAngularZone(){if(Ia.isInAngularZone())throw new $e(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,h){const g=this._inner,w=g.scheduleEventTask("NgZoneEvent: "+h,s,tA,by,by);try{return g.runTask(w,a,c)}finally{g.cancelTask(w)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const tA={};function hI(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function gu(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function pI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function gI(i){i._nesting--,hI(i)}class rT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ll,this.onMicrotaskEmpty=new ll,this.onStable=new ll,this.onError=new ll}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,h){return s.apply(a,c)}}const mI=new jr(""),yI=new jr("");let Iy,iT=(()=>{class i{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Iy||(function nA(i){Iy=i}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ia.assertNotInAngularZone(),S0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())S0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(le(Ia),le(_I),le(yI))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})(),_I=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){var h;return null!==(h=null==Iy?void 0:Iy.findTestabilityInTree(this,a,c))&&void 0!==h?h:null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),$l=null;const vI=new jr("AllowMultipleToken"),A0=new jr("PlatformDestroyListeners");class x0{constructor(s,a){this.name=s,this.token=a}}function wI(i,s,a=[]){const c=`Platform: ${s}`,h=new jr(c);return(g=[])=>{let w=Ca();if(!w||w.injector.get(vI,!1)){const T=[...a,...g,{provide:h,useValue:!0}];i?i(T):function oT(i){if($l&&!$l.get(vI,!1))throw new $e(400,!1);$l=i;const s=i.get(Wo);(function M0(i){const s=i.get(I0,null);s&&s.forEach(a=>a())})(i)}(function O0(i=[],s){return Ed.create({name:s,providers:[{provide:Tc,useValue:"platform"},{provide:A0,useValue:new Set([()=>$l=null])},...i]})}(T,c))}return function EI(i){const s=Ca();if(!s)throw new $e(401,!1);return s}()}}function Ca(){var i;return null!==(i=null==$l?void 0:$l.get(Wo))&&void 0!==i?i:null}let Wo=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function P0(i,s){let a;return a="noop"===i?new rT:("zone.js"===i?void 0:i)||new Ia(s),a}(null==c?void 0:c.ngZone,function k0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Ia,useValue:h}];return h.run(()=>{const w=Ed.create({providers:g,parent:this.injector,name:a.moduleType.name}),T=a.create(w),O=T.injector.get(Dh,null);if(!O)throw new $e(402,!1);return h.runOutsideAngular(()=>{const H=h.onError.subscribe({next:J=>{O.handleError(J)}});T.onDestroy(()=>{Cy(this._modules,T),H.unsubscribe()})}),function Ef(i,s,a){try{const c=a();return Em(c)?c.catch(h=>{throw s.runOutsideAngular(()=>i.handleError(h)),h}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(O,h,()=>{const H=T.injector.get(wy);return H.runInitializers(),H.donePromise.then(()=>(function vv(i){qe(i,"Expected localeId to be defined"),"string"==typeof i&&(Nm=i.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Bl,rf)||rf),this._moduleDoBootstrap(T),T))})})}bootstrapModule(a,c=[]){const h=If({},c);return function bI(i,s,a){const c=new Jm(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const c=a.injector.get(vo);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new $e(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(A0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(le(Ed))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function If(i,s){return Array.isArray(s)?s.reduce(If,i):Object.assign(Object.assign({},i),s)}let vo=(()=>{class i{constructor(a,c,h){this._zone=a,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new j.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),w=new j.y(T=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{Ia.assertNotInAngularZone(),S0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{Ia.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{O.unsubscribe(),H.unsubscribe()}});this.isStable=(0,Ae.T)(g,w.pipe((0,Te.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof Fu;if(!this._injector.get(wy).done)throw!h&&jn(a),new $e(405,false);let w;w=h?a:this._injector.get(Lu).resolveComponentFactory(a),this.componentTypes.push(w.componentType);const T=function ng(i){return i.isBoundToModule}(w)?void 0:this._injector.get(hf),H=w.create(Ed.NULL,[],c||w.selector,T),J=H.location.nativeElement,pe=H.injector.get(mI,null);return null==pe||pe.registerApplication(J),H.onDestroy(()=>{this.detachView(H.hostView),Cy(this.components,H),null==pe||pe.unregisterApplication(J)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new $e(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Cy(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(eg,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Cy(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new $e(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(le(Ia),le(ii),le(Dh))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Cy(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let qc=!0,Ty=!1;function eh(){return Ty=!0,qc}function lT(){if(Ty)throw new Error("Cannot enable prod mode after platform setup.");qc=!1}let CI=(()=>{class i{}return i.__NG_ELEMENT_ID__=uT,i})();function uT(i){return function N0(i,s,a){if(Fe(i)&&!a){const c=ir(i.index,s);return new Wh(c,c)}return 47&i.type?new Wh(s[16],s):null}(ei(),Pt(),16==(16&i))}class xI{constructor(){}supports(s){return qh(s)}create(s){return new pT(s)}}const fT=(i,s)=>s;class pT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||fT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,h=0,g=null;for(;a||c;){const w=!c||a&&a.currentIndex<U0(c,h,g)?a:c,T=U0(w,h,g),O=w.currentIndex;if(w===c)h--,c=c._nextRemoved;else if(a=a._next,null==w.previousIndex)h++;else{g||(g=[]);const H=T-h,J=O-h;if(H!=J){for(let Ue=0;Ue<H;Ue++){const ft=Ue<g.length?g[Ue]:g[Ue]=0,xt=ft+Ue;J<=xt&&xt<H&&(g[Ue]=ft+1)}g[w.previousIndex]=J-H}}T!==O&&s(w,T,O)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!qh(s))throw new $e(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let h,g,w,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let T=0;T<this.length;T++)g=s[T],w=this._trackByFn(T,g),null!==a&&Object.is(a.trackById,w)?(c&&(a=this._verifyReinsertion(a,g,w,T)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,w,T),c=!0),a=a._next}else h=0,function Rw(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Hu()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,T=>{w=this._trackByFn(h,T),null!==a&&Object.is(a.trackById,w)?(c&&(a=this._verifyReinsertion(a,T,w,h)),Object.is(a.item,T)||this._addIdentityChange(a,T)):(a=this._mismatch(a,T,w,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,h){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,h)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,h)):s=this._addAfter(new MI(a,c),g,h),s}_verifyReinsertion(s,a,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?s=this._reinsertAfter(g,s._prev,h):s.currentIndex!=h&&(s.currentIndex=h,this._addToMoves(s,h)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const h=s._prevRemoved,g=s._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const h=null===a?this._itHead:a._next;return s._next=h,s._prev=a,null===h?this._itTail=s:h._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new xy),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xy),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class MI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class xy{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new RI,this.map.set(a,c)),c.add(s)}get(s,a){const h=this.map.get(s);return h?h.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function U0(i,s,a){const c=i.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+s+h}class OI{constructor(){}supports(s){return s instanceof Map||H_(s)}create(){return new gT}}class gT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||H_(s)))throw new $e(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const h=this._records.get(s);this._maybeAddToChanges(h,a);const g=h._prev,w=h._next;return g&&(g._next=w),w&&(w._prev=g),h._next=null,h._prev=null,h}const c=new kI(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class kI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kc(){return new ig([new xI])}let ig=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Kc()),deps:[[i,new Xo,new yi]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new $e(901,!1)}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:Kc}),i})();function j0(){return new My([new OI])}let My=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||j0()),deps:[[i,new Xo,new yi]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new $e(901,!1)}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:j0}),i})();const bo=wI(null,"core",[]);let ag=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(le(vo))},i.\u0275mod=dn({type:i}),i.\u0275inj=jt({}),i})();function H0(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},4182:($t,ze,$)=>{"use strict";$.d(ze,{u5:()=>To,JU:()=>X,a5:()=>Qn});var u=$(5e3),j=($(9808),$(5254)),Ae=$(6498),Te=$(6688),ae=$(4850),he=$(7830);function ye(V,P){return new Ae.y(R=>{const p=V.length;if(0===p)return void R.complete();const M=new Array(p);let _=0,F=0;for(let ee=0;ee<p;ee++){const lt=(0,j.D)(V[ee]);let Ft=!1;R.add(lt.subscribe({next:Xt=>{Ft||(Ft=!0,F++),M[ee]=Xt},error:Xt=>R.error(Xt),complete:()=>{_++,(_===p||!Ft)&&(F===p&&R.next(P?P.reduce((Xt,Tn,mr)=>(Xt[Tn]=M[mr],Xt),{}):M),R.complete())}}))}})}const X=new u.OlP("NgValueAccessor");function ht(V){return null!=V}function qe(V){return(0,u.QGY)(V)?(0,j.D)(V):V}function Ne(V){let P={};return V.forEach(R=>{P=null!=R?Object.assign(Object.assign({},P),R):P}),0===Object.keys(P).length?null:P}function Ze(V,P){return P.map(R=>R(V))}function it(V){return V.map(P=>function nt(V){return!V.validate}(P)?P:R=>P.validate(R))}function mt(V){return null!=V?function Tt(V){if(!V)return null;const P=V.filter(ht);return 0==P.length?null:function(R){return Ne(Ze(R,P))}}(it(V)):null}function Ot(V){return null!=V?function jt(V){if(!V)return null;const P=V.filter(ht);return 0==P.length?null:function(R){return function oe(...V){if(1===V.length){const P=V[0];if((0,Te.k)(P))return ye(P,null);if((0,he.K)(P)&&Object.getPrototypeOf(P)===Object.prototype){const R=Object.keys(P);return ye(R.map(p=>P[p]),R)}}if("function"==typeof V[V.length-1]){const P=V.pop();return ye(V=1===V.length&&(0,Te.k)(V[0])?V[0]:V,null).pipe((0,ae.U)(R=>P(...R)))}return ye(V,null)}(Ze(R,P).map(qe)).pipe((0,ae.U)(Ne))}}(it(V)):null}class Qn extends class re{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=mt(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=Ot(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,R){return!!this.control&&this.control.hasError(P,R)}getError(P,R){return this.control?this.control.getError(P,R):null}}{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Ui=(()=>{class V{}return V.\u0275fac=function(R){return new(R||V)},V.\u0275mod=u.oAB({type:V}),V.\u0275inj=u.cJS({}),V})(),Da=(()=>{class V{}return V.\u0275fac=function(R){return new(R||V)},V.\u0275mod=u.oAB({type:V}),V.\u0275inj=u.cJS({imports:[Ui]}),V})(),To=(()=>{class V{}return V.\u0275fac=function(R){return new(R||V)},V.\u0275mod=u.oAB({type:V}),V.\u0275inj=u.cJS({imports:[Da]}),V})()},2313:($t,ze,$)=>{"use strict";$.d(ze,{Dx:()=>or,b2:()=>Ur,q6:()=>re});var u=$(9808),W=$(5e3);class j extends u.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ae extends j{static makeCurrent(){(0,u.HT)(new Ae)}onAndCancel(xe,we,at){return xe.addEventListener(we,at,!1),()=>{xe.removeEventListener(we,at,!1)}}dispatchEvent(xe,we){xe.dispatchEvent(we)}remove(xe){xe.parentNode&&xe.parentNode.removeChild(xe)}createElement(xe,we){return(we=we||this.getDefaultDocument()).createElement(xe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(xe){return xe.nodeType===Node.ELEMENT_NODE}isShadowRoot(xe){return xe instanceof DocumentFragment}getGlobalEventTarget(xe,we){return"window"===we?window:"document"===we?xe:"body"===we?xe.body:null}getBaseHref(xe){const we=function ae(){return Te=Te||document.querySelector("base"),Te?Te.getAttribute("href"):null}();return null==we?null:function oe(Je){he=he||document.createElement("a"),he.setAttribute("href",Je);const xe=he.pathname;return"/"===xe.charAt(0)?xe:`/${xe}`}(we)}resetBaseElement(){Te=null}getUserAgent(){return window.navigator.userAgent}getCookie(xe){return(0,u.Mx)(document.cookie,xe)}}let he,Te=null;const ye=new W.OlP("TRANSITION_ID"),se=[{provide:W.ip1,useFactory:function te(Je,xe,we){return()=>{we.get(W.CZH).donePromise.then(()=>{const at=(0,u.q)(),vt=xe.querySelectorAll(`style[ng-transition="${Je}"]`);for(let mn=0;mn<vt.length;mn++)at.remove(vt[mn])})}},deps:[ye,u.K0,W.zs3],multi:!0}];let ge=(()=>{class Je{build(){return new XMLHttpRequest}}return Je.\u0275fac=function(we){return new(we||Je)},Je.\u0275prov=W.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const Re=new W.OlP("EventManagerPlugins");let $e=(()=>{class Je{constructor(we,at){this._zone=at,this._eventNameToPlugin=new Map,we.forEach(vt=>vt.manager=this),this._plugins=we.slice().reverse()}addEventListener(we,at,vt){return this._findPluginFor(at).addEventListener(we,at,vt)}addGlobalEventListener(we,at,vt){return this._findPluginFor(at).addGlobalEventListener(we,at,vt)}getZone(){return this._zone}_findPluginFor(we){const at=this._eventNameToPlugin.get(we);if(at)return at;const vt=this._plugins;for(let mn=0;mn<vt.length;mn++){const yn=vt[mn];if(yn.supports(we))return this._eventNameToPlugin.set(we,yn),yn}throw new Error(`No event manager plugin found for event ${we}`)}}return Je.\u0275fac=function(we){return new(we||Je)(W.LFG(Re),W.LFG(W.R0b))},Je.\u0275prov=W.Yz7({token:Je,factory:Je.\u0275fac}),Je})();class Le{constructor(xe){this._doc=xe}addGlobalEventListener(xe,we,at){const vt=(0,u.q)().getGlobalEventTarget(this._doc,xe);if(!vt)throw new Error(`Unsupported event target ${vt} for event ${we}`);return this.addEventListener(vt,we,at)}}let Ie=(()=>{class Je{constructor(){this._stylesSet=new Set}addStyles(we){const at=new Set;we.forEach(vt=>{this._stylesSet.has(vt)||(this._stylesSet.add(vt),at.add(vt))}),this.onStylesAdded(at)}onStylesAdded(we){}getAllStyles(){return Array.from(this._stylesSet)}}return Je.\u0275fac=function(we){return new(we||Je)},Je.\u0275prov=W.Yz7({token:Je,factory:Je.\u0275fac}),Je})(),_e=(()=>{class Je extends Ie{constructor(we){super(),this._doc=we,this._hostNodes=new Map,this._hostNodes.set(we.head,[])}_addStylesToHost(we,at,vt){we.forEach(mn=>{const yn=this._doc.createElement("style");yn.textContent=mn,vt.push(at.appendChild(yn))})}addHost(we){const at=[];this._addStylesToHost(this._stylesSet,we,at),this._hostNodes.set(we,at)}removeHost(we){const at=this._hostNodes.get(we);at&&at.forEach(Qe),this._hostNodes.delete(we)}onStylesAdded(we){this._hostNodes.forEach((at,vt)=>{this._addStylesToHost(we,vt,at)})}ngOnDestroy(){this._hostNodes.forEach(we=>we.forEach(Qe))}}return Je.\u0275fac=function(we){return new(we||Je)(W.LFG(u.K0))},Je.\u0275prov=W.Yz7({token:Je,factory:Je.\u0275fac}),Je})();function Qe(Je){(0,u.q)().remove(Je)}const Ke={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ut=/%COMP%/g;function de(Je,xe,we){for(let at=0;at<xe.length;at++){let vt=xe[at];Array.isArray(vt)?de(Je,vt,we):(vt=vt.replace(ut,Je),we.push(vt))}return we}function ie(Je){return xe=>{if("__ngUnwrap__"===xe)return Je;!1===Je(xe)&&(xe.preventDefault(),xe.returnValue=!1)}}let be=(()=>{class Je{constructor(we,at,vt){this.eventManager=we,this.sharedStylesHost=at,this.appId=vt,this.rendererByCompId=new Map,this.defaultRenderer=new tt(we)}createRenderer(we,at){if(!we||!at)return this.defaultRenderer;switch(at.encapsulation){case W.ifc.Emulated:{let vt=this.rendererByCompId.get(at.id);return vt||(vt=new qe(this.eventManager,this.sharedStylesHost,at,this.appId),this.rendererByCompId.set(at.id,vt)),vt.applyToHost(we),vt}case 1:case W.ifc.ShadowDom:return new Ne(this.eventManager,this.sharedStylesHost,we,at);default:if(!this.rendererByCompId.has(at.id)){const vt=de(at.id,at.styles,[]);this.sharedStylesHost.addStyles(vt),this.rendererByCompId.set(at.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Je.\u0275fac=function(we){return new(we||Je)(W.LFG($e),W.LFG(_e),W.LFG(W.AFp))},Je.\u0275prov=W.Yz7({token:Je,factory:Je.\u0275fac}),Je})();class tt{constructor(xe){this.eventManager=xe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(xe,we){return we?document.createElementNS(Ke[we]||we,xe):document.createElement(xe)}createComment(xe){return document.createComment(xe)}createText(xe){return document.createTextNode(xe)}appendChild(xe,we){(ht(xe)?xe.content:xe).appendChild(we)}insertBefore(xe,we,at){xe&&(ht(xe)?xe.content:xe).insertBefore(we,at)}removeChild(xe,we){xe&&xe.removeChild(we)}selectRootElement(xe,we){let at="string"==typeof xe?document.querySelector(xe):xe;if(!at)throw new Error(`The selector "${xe}" did not match any elements`);return we||(at.textContent=""),at}parentNode(xe){return xe.parentNode}nextSibling(xe){return xe.nextSibling}setAttribute(xe,we,at,vt){if(vt){we=vt+":"+we;const mn=Ke[vt];mn?xe.setAttributeNS(mn,we,at):xe.setAttribute(we,at)}else xe.setAttribute(we,at)}removeAttribute(xe,we,at){if(at){const vt=Ke[at];vt?xe.removeAttributeNS(vt,we):xe.removeAttribute(`${at}:${we}`)}else xe.removeAttribute(we)}addClass(xe,we){xe.classList.add(we)}removeClass(xe,we){xe.classList.remove(we)}setStyle(xe,we,at,vt){vt&(W.JOm.DashCase|W.JOm.Important)?xe.style.setProperty(we,at,vt&W.JOm.Important?"important":""):xe.style[we]=at}removeStyle(xe,we,at){at&W.JOm.DashCase?xe.style.removeProperty(we):xe.style[we]=""}setProperty(xe,we,at){xe[we]=at}setValue(xe,we){xe.nodeValue=we}listen(xe,we,at){return"string"==typeof xe?this.eventManager.addGlobalEventListener(xe,we,ie(at)):this.eventManager.addEventListener(xe,we,ie(at))}}function ht(Je){return"TEMPLATE"===Je.tagName&&void 0!==Je.content}class qe extends tt{constructor(xe,we,at,vt){super(xe),this.component=at;const mn=de(vt+"-"+at.id,at.styles,[]);we.addStyles(mn),this.contentAttr=function fe(Je){return"_ngcontent-%COMP%".replace(ut,Je)}(vt+"-"+at.id),this.hostAttr=function je(Je){return"_nghost-%COMP%".replace(ut,Je)}(vt+"-"+at.id)}applyToHost(xe){super.setAttribute(xe,this.hostAttr,"")}createElement(xe,we){const at=super.createElement(xe,we);return super.setAttribute(at,this.contentAttr,""),at}}class Ne extends tt{constructor(xe,we,at,vt){super(xe),this.sharedStylesHost=we,this.hostEl=at,this.shadowRoot=at.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const mn=de(vt.id,vt.styles,[]);for(let yn=0;yn<mn.length;yn++){const Bt=document.createElement("style");Bt.textContent=mn[yn],this.shadowRoot.appendChild(Bt)}}nodeOrShadowRoot(xe){return xe===this.hostEl?this.shadowRoot:xe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(xe,we){return super.appendChild(this.nodeOrShadowRoot(xe),we)}insertBefore(xe,we,at){return super.insertBefore(this.nodeOrShadowRoot(xe),we,at)}removeChild(xe,we){return super.removeChild(this.nodeOrShadowRoot(xe),we)}parentNode(xe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(xe)))}}let Ze=(()=>{class Je extends Le{constructor(we){super(we)}supports(we){return!0}addEventListener(we,at,vt){return we.addEventListener(at,vt,!1),()=>this.removeEventListener(we,at,vt)}removeEventListener(we,at,vt){return we.removeEventListener(at,vt)}}return Je.\u0275fac=function(we){return new(we||Je)(W.LFG(u.K0))},Je.\u0275prov=W.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const nt=["alt","control","meta","shift"],it={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tt={alt:Je=>Je.altKey,control:Je=>Je.ctrlKey,meta:Je=>Je.metaKey,shift:Je=>Je.shiftKey};let mt=(()=>{class Je extends Le{constructor(we){super(we)}supports(we){return null!=Je.parseEventName(we)}addEventListener(we,at,vt){const mn=Je.parseEventName(at),yn=Je.eventCallback(mn.fullKey,vt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,u.q)().onAndCancel(we,mn.domEventName,yn))}static parseEventName(we){const at=we.toLowerCase().split("."),vt=at.shift();if(0===at.length||"keydown"!==vt&&"keyup"!==vt)return null;const mn=Je._normalizeKey(at.pop());let yn="",Bt=at.indexOf("code");if(Bt>-1&&(at.splice(Bt,1),yn="code."),nt.forEach(Nn=>{const pr=at.indexOf(Nn);pr>-1&&(at.splice(pr,1),yn+=Nn+".")}),yn+=mn,0!=at.length||0===mn.length)return null;const on={};return on.domEventName=vt,on.fullKey=yn,on}static matchEventFullKeyCode(we,at){let vt=it[we.key]||we.key,mn="";return at.indexOf("code.")>-1&&(vt=we.code,mn="code."),!(null==vt||!vt)&&(vt=vt.toLowerCase()," "===vt?vt="space":"."===vt&&(vt="dot"),nt.forEach(yn=>{yn!==vt&&(0,Tt[yn])(we)&&(mn+=yn+".")}),mn+=vt,mn===at)}static eventCallback(we,at,vt){return mn=>{Je.matchEventFullKeyCode(mn,we)&&vt.runGuarded(()=>at(mn))}}static _normalizeKey(we){return"esc"===we?"escape":we}}return Je.\u0275fac=function(we){return new(we||Je)(W.LFG(u.K0))},Je.\u0275prov=W.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const re=(0,W.eFA)(W._c5,"browser",[{provide:W.Lbi,useValue:u.bD},{provide:W.g9A,useValue:function Mn(){Ae.makeCurrent()},multi:!0},{provide:u.K0,useFactory:function bn(){return(0,W.RDi)(document),document},deps:[]}]),Qn=new W.OlP(""),Nt=[{provide:W.rWj,useClass:class X{addToWindow(xe){W.dqk.getAngularTestability=(at,vt=!0)=>{const mn=xe.findTestabilityInTree(at,vt);if(null==mn)throw new Error("Could not find testability for element.");return mn},W.dqk.getAllAngularTestabilities=()=>xe.getAllTestabilities(),W.dqk.getAllAngularRootElements=()=>xe.getAllRootElements(),W.dqk.frameworkStabilizers||(W.dqk.frameworkStabilizers=[]),W.dqk.frameworkStabilizers.push(at=>{const vt=W.dqk.getAllAngularTestabilities();let mn=vt.length,yn=!1;const Bt=function(on){yn=yn||on,mn--,0==mn&&at(yn)};vt.forEach(function(on){on.whenStable(Bt)})})}findTestabilityInTree(xe,we,at){if(null==we)return null;const vt=xe.getTestability(we);return null!=vt?vt:at?(0,u.q)().isShadowRoot(we)?this.findTestabilityInTree(xe,we.host,!0):this.findTestabilityInTree(xe,we.parentElement,!0):null}},deps:[]},{provide:W.lri,useClass:W.dDg,deps:[W.R0b,W.eoX,W.rWj]},{provide:W.dDg,useClass:W.dDg,deps:[W.R0b,W.eoX,W.rWj]}],Fr=[{provide:W.zSh,useValue:"root"},{provide:W.qLn,useFactory:function Xe(){return new W.qLn},deps:[]},{provide:Re,useClass:Ze,multi:!0,deps:[u.K0,W.R0b,W.Lbi]},{provide:Re,useClass:mt,multi:!0,deps:[u.K0]},{provide:be,useClass:be,deps:[$e,_e,W.AFp]},{provide:W.FYo,useExisting:be},{provide:Ie,useExisting:_e},{provide:_e,useClass:_e,deps:[u.K0]},{provide:$e,useClass:$e,deps:[Re,W.R0b]},{provide:u.JF,useClass:ge,deps:[]},[]];let Ur=(()=>{class Je{constructor(we){}static withServerTransition(we){return{ngModule:Je,providers:[{provide:W.AFp,useValue:we.appId},{provide:ye,useExisting:W.AFp},se]}}}return Je.\u0275fac=function(we){return new(we||Je)(W.LFG(Qn,12))},Je.\u0275mod=W.oAB({type:Je}),Je.\u0275inj=W.cJS({providers:[...Fr,...Nt],imports:[u.ez,W.hGG]}),Je})(),or=(()=>{class Je{constructor(we){this._doc=we}getTitle(){return this._doc.title}setTitle(we){this._doc.title=we||""}}return Je.\u0275fac=function(we){return new(we||Je)(W.LFG(u.K0))},Je.\u0275prov=W.Yz7({token:Je,factory:function(we){let at=null;return at=we?new we:function Qt(){return new or((0,W.LFG)(u.K0))}(),at},providedIn:"root"}),Je})();"undefined"!=typeof window&&window},4740:($t,ze,$)=>{"use strict";$.d(ze,{gz:()=>fi,y6:()=>Dr,OD:()=>_s,eC:()=>Qt,wm:()=>ih,F0:()=>ri,rH:()=>jr,Bz:()=>hc,Hx:()=>Kn});var u=$(5e3),W=$(5254),j=$(1086),Ae=$(591),Te=$(4450),ae=$(2866),he=$(6688),oe=$(826),ye=$(448),te=$(3009);const se={};function X(...I){let C,v;return(0,ae.K)(I[I.length-1])&&(v=I.pop()),"function"==typeof I[I.length-1]&&(C=I.pop()),1===I.length&&(0,he.k)(I[0])&&(I=I[0]),(0,te.n)(I,v).lift(new ge(C))}class ge{constructor(C){this.resultSelector=C}call(C,v){return v.subscribe(new Re(C,this.resultSelector))}}class Re extends oe.L{constructor(C,v){super(C),this.resultSelector=v,this.active=0,this.values=[],this.observables=[]}_next(C){this.values.push(se),this.observables.push(C)}_complete(){const C=this.observables,v=C.length;if(0===v)this.destination.complete();else{this.active=v,this.toRespond=v;for(let x=0;x<v;x++)this.add((0,ye.D)(this,C[x],void 0,x))}}notifyComplete(C){0==(this.active-=1)&&this.destination.complete()}notifyNext(C,v,x){const B=this.values,Ee=this.toRespond?B[x]===se?--this.toRespond:this.toRespond:0;B[x]=v,0===Ee&&(this.resultSelector?this._tryResultSelector(B):this.destination.next(B.slice()))}_tryResultSelector(C){let v;try{v=this.resultSelector.apply(this,C)}catch(x){return void this.destination.error(x)}this.destination.next(v)}}var $e=$(1221),Le=$(6498),Ie=$(8896);function _e(I){return new Le.y(C=>{let v;try{v=I()}catch(B){return void C.error(B)}return(v?(0,W.D)(v):(0,Ie.c)()).subscribe(C)})}var Qe=$(4843),Ke=$(1737),ut=$(1762),ot=$(8929),Ct=$(9808),ke=$(4850),et=$(7545),fe=$(2986),je=$(1059),de=$(2198),ie=$(1709),ve=$(7224);function be(I,C){return(0,ie.zg)(I,C,1)}var tt=$(2868),wt=$(1177);function kt(I){return function(v){const x=new ht(I),B=v.lift(x);return x.caught=B}}class ht{constructor(C){this.selector=C}call(C,v){return v.subscribe(new qe(C,this.selector,this.caught))}}class qe extends wt.Ds{constructor(C,v,x){super(C),this.selector=v,this.caught=x}error(C){if(!this.isStopped){let v;try{v=this.selector(C,this.caught)}catch(Z){return void super.error(Z)}this._unsubscribeAndRecycle();const x=new wt.IY(this);this.add(x);const B=(0,wt.ft)(v,x);B!==x&&this.add(B)}}}var Ne=$(2014),Ze=$(3489),nt=$(4231);function it(I){return function(v){return 0===I?(0,Ie.c)():v.lift(new Tt(I))}}class Tt{constructor(C){if(this.total=C,this.total<0)throw new nt.W}call(C,v){return v.subscribe(new mt(C,this.total))}}class mt extends Ze.L{constructor(C,v){super(C),this.total=v,this.ring=new Array,this.count=0}_next(C){const v=this.ring,x=this.total,B=this.count++;v.length<x?v.push(C):v[B%x]=C}_complete(){const C=this.destination;let v=this.count;if(v>0){const x=this.count>=this.total?this.total:this.count,B=this.ring;for(let Z=0;Z<x;Z++){const Ee=v++%x;C.next(B[Ee])}}C.complete()}}var jt=$(4907),Ot=$(7314),An=$(5379);function On(I,C){const v=arguments.length>=2;return x=>x.pipe(I?(0,de.h)((B,Z)=>I(B,Z,x)):An.y,it(1),v?(0,Ot.d)(C):(0,jt.T)(()=>new Te.K))}class Mn{constructor(C,v){this.predicate=C,this.inclusive=v}call(C,v){return v.subscribe(new Xe(C,this.predicate,this.inclusive))}}class Xe extends Ze.L{constructor(C,v,x){super(C),this.predicate=v,this.inclusive=x,this.index=0}_next(C){const v=this.destination;let x;try{x=this.predicate(C,this.index++)}catch(B){return void v.error(B)}this.nextOrComplete(C,x)}nextOrComplete(C,v){const x=this.destination;Boolean(v)?x.next(C):(this.inclusive&&x.next(C),x.complete())}}class Fn{constructor(C){this.value=C}call(C,v){return v.subscribe(new re(C,this.value))}}class re extends Ze.L{constructor(C,v){super(C),this.value=v}_next(C){this.destination.next(this.value)}}var Qn=$(2654);function Nt(I){return C=>C.lift(new Fr(I))}class Fr{constructor(C){this.callback=C}call(C,v){return v.subscribe(new Ur(C,this.callback))}}class Ur extends Ze.L{constructor(C,v){super(C),this.add(new Qn.w(v))}}var Un=$(4327),kn=$(9146),Wr=$(2313);const Qt="primary",or=Symbol("RouteTitle");class un{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v[0]:v}return null}getAll(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function nn(I){return new un(I)}function yt(I,C,v){const x=v.path.split("/");if(x.length>I.length||"full"===v.pathMatch&&(C.hasChildren()||x.length<I.length))return null;const B={};for(let Z=0;Z<x.length;Z++){const Ee=x[Z],Se=I[Z];if(Ee.startsWith(":"))B[Ee.substring(1)]=Se;else if(Ee!==Se.path)return null}return{consumed:I.slice(0,x.length),posParams:B}}function Jn(I,C){const v=I?Object.keys(I):void 0,x=C?Object.keys(C):void 0;if(!v||!x||v.length!=x.length)return!1;let B;for(let Z=0;Z<v.length;Z++)if(B=v[Z],!nr(I[B],C[B]))return!1;return!0}function nr(I,C){if(Array.isArray(I)&&Array.isArray(C)){if(I.length!==C.length)return!1;const v=[...I].sort(),x=[...C].sort();return v.every((B,Z)=>x[Z]===B)}return I===C}function _r(I){return Array.prototype.concat.apply([],I)}function rn(I){return I.length>0?I[I.length-1]:null}function _n(I,C){for(const v in I)I.hasOwnProperty(v)&&C(I[v],v)}function Rr(I){return(0,u.CqO)(I)?I:(0,u.QGY)(I)?(0,W.D)(Promise.resolve(I)):(0,j.of)(I)}const Lr={exact:function gn(I,C,v){if(!en(I.segments,C.segments)||!Ce(I.segments,C.segments,v)||I.numberOfChildren!==C.numberOfChildren)return!1;for(const x in C.children)if(!I.children[x]||!gn(I.children[x],C.children[x],v))return!1;return!0},subset:dn},Jt={exact:function Zt(I,C){return Jn(I,C)},subset:function cn(I,C){return Object.keys(C).length<=Object.keys(I).length&&Object.keys(C).every(v=>nr(I[v],C[v]))},ignored:()=>!0};function St(I,C,v){return Lr[v.paths](I.root,C.root,v.matrixParams)&&Jt[v.queryParams](I.queryParams,C.queryParams)&&!("exact"===v.fragment&&I.fragment!==C.fragment)}function dn(I,C,v){return Me(I,C,C.segments,v)}function Me(I,C,v,x){if(I.segments.length>v.length){const B=I.segments.slice(0,v.length);return!(!en(B,v)||C.hasChildren()||!Ce(B,v,x))}if(I.segments.length===v.length){if(!en(I.segments,v)||!Ce(I.segments,v,x))return!1;for(const B in C.children)if(!I.children[B]||!dn(I.children[B],C.children[B],x))return!1;return!0}{const B=v.slice(0,I.segments.length),Z=v.slice(I.segments.length);return!!(en(I.segments,B)&&Ce(I.segments,B,x)&&I.children[Qt])&&Me(I.children[Qt],C,Z,x)}}function Ce(I,C,v){return C.every((x,B)=>Jt[v](I[B].parameters,x.parameters))}class Oe{constructor(C,v,x){this.root=C,this.queryParams=v,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nn(this.queryParams)),this._queryParamMap}toString(){return Je.serialize(this)}}class rt{constructor(C,v){this.segments=C,this.children=v,this.parent=null,_n(v,(x,B)=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xe(this)}}class Ge{constructor(C,v){this.path=C,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=nn(this.parameters)),this._parameterMap}toString(){return Nn(this)}}function en(I,C){return I.length===C.length&&I.every((v,x)=>v.path===C[x].path)}let Kn=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=u.Yz7({token:I,factory:function(){return new dr},providedIn:"root"}),I})();class dr{parse(C){const v=new ci(C);return new Oe(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(C){const v=`/${we(C.root,!0)}`,x=function vr(I){const C=Object.keys(I).map(v=>{const x=I[v];return Array.isArray(x)?x.map(B=>`${vt(v)}=${vt(B)}`).join("&"):`${vt(v)}=${vt(x)}`}).filter(v=>!!v);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${v}${x}${"string"==typeof C.fragment?`#${function mn(I){return encodeURI(I)}(C.fragment)}`:""}`}}const Je=new dr;function xe(I){return I.segments.map(C=>Nn(C)).join("/")}function we(I,C){if(!I.hasChildren())return xe(I);if(C){const v=I.children[Qt]?we(I.children[Qt],!1):"",x=[];return _n(I.children,(B,Z)=>{Z!==Qt&&x.push(`${Z}:${we(B,!1)}`)}),x.length>0?`${v}(${x.join("//")})`:v}{const v=function jn(I,C){let v=[];return _n(I.children,(x,B)=>{B===Qt&&(v=v.concat(C(x,B)))}),_n(I.children,(x,B)=>{B!==Qt&&(v=v.concat(C(x,B)))}),v}(I,(x,B)=>B===Qt?[we(I.children[Qt],!1)]:[`${B}:${we(x,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Qt]?`${xe(I)}/${v[0]}`:`${xe(I)}/(${v.join("//")})`}}function at(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vt(I){return at(I).replace(/%3B/gi,";")}function yn(I){return at(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bt(I){return decodeURIComponent(I)}function on(I){return Bt(I.replace(/\+/g,"%20"))}function Nn(I){return`${yn(I.path)}${function pr(I){return Object.keys(I).map(C=>`;${yn(C)}=${yn(I[C])}`).join("")}(I.parameters)}`}const Or=/^[^\/()?;=#]+/;function Zr(I){const C=I.match(Or);return C?C[0]:""}const Wn=/^[^=?&#]+/,Br=/^[^&#]+/;class ci{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(C.length>0||Object.keys(v).length>0)&&(x[Qt]=new rt(C,v)),x}parseSegment(){const C=Zr(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(C),new Ge(Bt(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const v=Zr(this.remaining);if(!v)return;this.capture(v);let x="";if(this.consumeOptional("=")){const B=Zr(this.remaining);B&&(x=B,this.capture(x))}C[Bt(v)]=Bt(x)}parseQueryParam(C){const v=function ui(I){const C=I.match(Wn);return C?C[0]:""}(this.remaining);if(!v)return;this.capture(v);let x="";if(this.consumeOptional("=")){const Ee=function In(I){const C=I.match(Br);return C?C[0]:""}(this.remaining);Ee&&(x=Ee,this.capture(x))}const B=on(v),Z=on(x);if(C.hasOwnProperty(B)){let Ee=C[B];Array.isArray(Ee)||(Ee=[Ee],C[B]=Ee),Ee.push(Z)}else C[B]=Z}parseParens(C){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=Zr(this.remaining),B=this.remaining[x.length];if("/"!==B&&")"!==B&&";"!==B)throw new u.vHH(4010,!1);let Z;x.indexOf(":")>-1?(Z=x.slice(0,x.indexOf(":")),this.capture(Z),this.capture(":")):C&&(Z=Qt);const Ee=this.parseChildren();v[Z]=1===Object.keys(Ee).length?Ee[Qt]:new rt([],Ee),this.consumeOptional("//")}return v}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new u.vHH(4011,!1)}}function xr(I){return I.segments.length>0?new rt([],{[Qt]:I}):I}function oi(I){const C={};for(const x of Object.keys(I.children)){const Z=oi(I.children[x]);(Z.segments.length>0||Z.hasChildren())&&(C[x]=Z)}return function Xr(I){if(1===I.numberOfChildren&&I.children[Qt]){const C=I.children[Qt];return new rt(I.segments.concat(C.segments),C.children)}return I}(new rt(I.segments,C))}function gr(I){return I instanceof Oe}function Ai(I,C,v,x,B){var Z;if(0===v.length)return Ve(C.root,C.root,C.root,x,B);const Se=function ue(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new pt(!0,0,I);let C=0,v=!1;const x=I.reduce((B,Z,Ee)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const Se={};return _n(Z.outlets,(dt,A)=>{Se[A]="string"==typeof dt?dt.split("/"):dt}),[...B,{outlets:Se}]}if(Z.segmentPath)return[...B,Z.segmentPath]}return"string"!=typeof Z?[...B,Z]:0===Ee?(Z.split("/").forEach((Se,dt)=>{0==dt&&"."===Se||(0==dt&&""===Se?v=!0:".."===Se?C++:""!=Se&&B.push(Se))}),B):[...B,Z]},[]);return new pt(v,C,x)}(v);return Se.toRoot()?Ve(C.root,C.root,new rt([],{}),x,B):function dt(L){var q;const le=function _t(I,C,v,x){if(I.isAbsolute)return new Fe(C.root,!0,0);if(-1===x)return new Fe(v,v===C.root,0);return function At(I,C,v){let x=I,B=C,Z=v;for(;Z>B;){if(Z-=B,x=x.parent,!x)throw new u.vHH(4005,!1);B=x.segments.length}return new Fe(x,!1,B-Z)}(v,x+(Y(I.commands[0])?0:1),I.numberOfDoubleDots)}(Se,C,null===(q=I.snapshot)||void 0===q?void 0:q._urlSegment,L),Be=le.processChildren?Cn(le.segmentGroup,le.index,Se.commands):ln(le.segmentGroup,le.index,Se.commands);return Ve(C.root,le.segmentGroup,Be,x,B)}(null===(Z=I.snapshot)||void 0===Z?void 0:Z._lastPathIndex)}function Y(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function me(I){return"object"==typeof I&&null!=I&&I.outlets}function Ve(I,C,v,x,B){let Ee,Z={};x&&_n(x,(dt,A)=>{Z[A]=Array.isArray(dt)?dt.map(L=>`${L}`):`${dt}`}),Ee=I===C?v:We(I,C,v);const Se=xr(oi(Ee));return new Oe(Se,Z,B)}function We(I,C,v){const x={};return _n(I.children,(B,Z)=>{x[Z]=B===C?v:We(B,C,v)}),new rt(I.segments,x)}class pt{constructor(C,v,x){if(this.isAbsolute=C,this.numberOfDoubleDots=v,this.commands=x,C&&x.length>0&&Y(x[0]))throw new u.vHH(4003,!1);const B=x.find(me);if(B&&B!==rn(x))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fe{constructor(C,v,x){this.segmentGroup=C,this.processChildren=v,this.index=x}}function ln(I,C,v){if(I||(I=new rt([],{})),0===I.segments.length&&I.hasChildren())return Cn(I,C,v);const x=function Er(I,C,v){let x=0,B=C;const Z={match:!1,pathIndex:0,commandIndex:0};for(;B<I.segments.length;){if(x>=v.length)return Z;const Ee=I.segments[B],Se=v[x];if(me(Se))break;const dt=`${Se}`,A=x<v.length-1?v[x+1]:null;if(B>0&&void 0===dt)break;if(dt&&A&&"object"==typeof A&&void 0===A.outlets){if(!wi(dt,A,Ee))return Z;x+=2}else{if(!wi(dt,{},Ee))return Z;x++}B++}return{match:!0,pathIndex:B,commandIndex:x}}(I,C,v),B=v.slice(x.commandIndex);if(x.match&&x.pathIndex<I.segments.length){const Z=new rt(I.segments.slice(0,x.pathIndex),{});return Z.children[Qt]=new rt(I.segments.slice(x.pathIndex),I.children),Cn(Z,0,B)}return x.match&&0===B.length?new rt(I.segments,{}):x.match&&!I.hasChildren()?ur(I,C,v):x.match?Cn(I,0,B):ur(I,C,v)}function Cn(I,C,v){if(0===v.length)return new rt(I.segments,{});{const x=function Yt(I){return me(I[0])?I[0].outlets:{[Qt]:I}}(v),B={};return _n(x,(Z,Ee)=>{"string"==typeof Z&&(Z=[Z]),null!==Z&&(B[Ee]=ln(I.children[Ee],C,Z))}),_n(I.children,(Z,Ee)=>{void 0===x[Ee]&&(B[Ee]=Z)}),new rt(I.segments,B)}}function ur(I,C,v){const x=I.segments.slice(0,C);let B=0;for(;B<v.length;){const Z=v[B];if(me(Z)){const dt=hi(Z.outlets);return new rt(x,dt)}if(0===B&&Y(v[0])){x.push(new Ge(I.segments[C].path,qi(v[0]))),B++;continue}const Ee=me(Z)?Z.outlets[Qt]:`${Z}`,Se=B<v.length-1?v[B+1]:null;Ee&&Se&&Y(Se)?(x.push(new Ge(Ee,qi(Se))),B+=2):(x.push(new Ge(Ee,{})),B++)}return new rt(x,{})}function hi(I){const C={};return _n(I,(v,x)=>{"string"==typeof v&&(v=[v]),null!==v&&(C[x]=ur(new rt([],{}),0,v))}),C}function qi(I){const C={};return _n(I,(v,x)=>C[x]=`${v}`),C}function wi(I,C,v){return I==v.path&&Jn(C,v.parameters)}class Yi{constructor(C,v){this.id=C,this.url=v}}class _s extends Yi{constructor(C,v,x="imperative",B=null){super(C,v),this.type=0,this.navigationTrigger=x,this.restoredState=B}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ki extends Yi{constructor(C,v,x){super(C,v),this.urlAfterRedirects=x,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ui extends Yi{constructor(C,v,x,B){super(C,v),this.reason=x,this.code=B,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class No extends Yi{constructor(C,v,x,B){super(C,v),this.error=x,this.target=B,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fo extends Yi{constructor(C,v,x,B){super(C,v),this.urlAfterRedirects=x,this.state=B,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wa extends Yi{constructor(C,v,x,B){super(C,v),this.urlAfterRedirects=x,this.state=B,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class la extends Yi{constructor(C,v,x,B,Z){super(C,v),this.urlAfterRedirects=x,this.state=B,this.shouldActivate=Z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lo extends Yi{constructor(C,v,x,B){super(C,v),this.urlAfterRedirects=x,this.state=B,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mi extends Yi{constructor(C,v,x,B){super(C,v),this.urlAfterRedirects=x,this.state=B,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ua{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Lo{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wo{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ca{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zi{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vs{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xi{constructor(C,v,x){this.routerEvent=C,this.position=v,this.anchor=x,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Eo{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const v=this.pathFromRoot(C);return v.length>1?v[v.length-2]:null}children(C){const v=ks(C,this._root);return v?v.children.map(x=>x.value):[]}firstChild(C){const v=ks(C,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(C){const v=Io(C,this._root);return v.length<2?[]:v[v.length-2].children.map(B=>B.value).filter(B=>B!==C)}pathFromRoot(C){return Io(C,this._root).map(v=>v.value)}}function ks(I,C){if(I===C.value)return C;for(const v of C.children){const x=ks(I,v);if(x)return x}return null}function Io(I,C){if(I===C.value)return[C];for(const v of C.children){const x=Io(I,v);if(x.length)return x.unshift(C),x}return[]}class bs{constructor(C,v){this.value=C,this.children=v}toString(){return`TreeNode(${this.value})`}}function ws(I){const C={};return I&&I.children.forEach(v=>C[v.value.outlet]=v),C}class ji extends Eo{constructor(C,v){super(C),this.snapshot=v,Mr(this,C)}toString(){return this.snapshot.toString()}}function Ri(I,C){const v=function ai(I,C){const Ee=new Oi([],{},{},"",{},Qt,C,null,I.root,-1,{});return new Es("",new bs(Ee,[]))}(I,C),x=new Ae.X([new Ge("",{})]),B=new Ae.X({}),Z=new Ae.X({}),Ee=new Ae.X({}),Se=new Ae.X(""),dt=new fi(x,B,Ee,Se,Z,Qt,C,v.root);return dt.snapshot=v.root,new ji(new bs(dt,[]),v)}class fi{constructor(C,v,x,B,Z,Ee,Se,dt){var A,L;this.url=C,this.params=v,this.queryParams=x,this.fragment=B,this.data=Z,this.outlet=Ee,this.component=Se,this.title=null!==(L=null===(A=this.data)||void 0===A?void 0:A.pipe((0,ke.U)(q=>q[or])))&&void 0!==L?L:(0,j.of)(void 0),this._futureSnapshot=dt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ke.U)(C=>nn(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ke.U)(C=>nn(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Co(I,C="emptyOnly"){const v=I.pathFromRoot;let x=0;if("always"!==C)for(x=v.length-1;x>=1;){const B=v[x],Z=v[x-1];if(B.routeConfig&&""===B.routeConfig.path)x--;else{if(Z.component)break;x--}}return function pi(I){return I.reduce((C,v)=>{var x;return{params:Object.assign(Object.assign({},C.params),v.params),data:Object.assign(Object.assign({},C.data),v.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},v.data),C.resolve),null===(x=v.routeConfig)||void 0===x?void 0:x.data),v._resolvedData)}},{params:{},data:{},resolve:{}})}(v.slice(x))}class Oi{constructor(C,v,x,B,Z,Ee,Se,dt,A,L,q,le){var Be;this.url=C,this.params=v,this.queryParams=x,this.fragment=B,this.data=Z,this.outlet=Ee,this.component=Se,this.title=null===(Be=this.data)||void 0===Be?void 0:Be[or],this.routeConfig=dt,this._urlSegment=A,this._lastPathIndex=L,this._correctedLastPathIndex=null!=le?le:L,this._resolve=q}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Es extends Eo{constructor(C,v){super(v),this.url=C,Mr(this,v)}toString(){return Is(this._root)}}function Mr(I,C){C.value._routerState=I,C.children.forEach(v=>Mr(I,v))}function Is(I){const C=I.children.length>0?` { ${I.children.map(Is).join(", ")} } `:"";return`${I.value}${C}`}function Hi(I){if(I.snapshot){const C=I.snapshot,v=I._futureSnapshot;I.snapshot=v,Jn(C.queryParams,v.queryParams)||I.queryParams.next(v.queryParams),C.fragment!==v.fragment&&I.fragment.next(v.fragment),Jn(C.params,v.params)||I.params.next(v.params),function Xn(I,C){if(I.length!==C.length)return!1;for(let v=0;v<I.length;++v)if(!Jn(I[v],C[v]))return!1;return!0}(C.url,v.url)||I.url.next(v.url),Jn(C.data,v.data)||I.data.next(v.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Yr(I,C){const v=Jn(I.params,C.params)&&function zt(I,C){return en(I,C)&&I.every((v,x)=>Jn(v.parameters,C[x].parameters))}(I.url,C.url);return v&&!(!I.parent!=!C.parent)&&(!I.parent||Yr(I.parent,C.parent))}function ns(I,C,v){if(v&&I.shouldReuseRoute(C.value,v.value.snapshot)){const x=v.value;x._futureSnapshot=C.value;const B=function Cs(I,C,v){return C.children.map(x=>{for(const B of v.children)if(I.shouldReuseRoute(x.value,B.value.snapshot))return ns(I,x,B);return ns(I,x)})}(I,C,v);return new bs(x,B)}{if(I.shouldAttach(C.value)){const Z=I.retrieve(C.value);if(null!==Z){const Ee=Z.route;return Ee.value._futureSnapshot=C.value,Ee.children=C.children.map(Se=>ns(I,Se)),Ee}}const x=function Ds(I){return new fi(new Ae.X(I.url),new Ae.X(I.params),new Ae.X(I.queryParams),new Ae.X(I.fragment),new Ae.X(I.data),I.outlet,I.component,I)}(C.value),B=C.children.map(Z=>ns(I,Z));return new bs(x,B)}}const ir="ngNavigationCancelingError";function zs(I,C){const{redirectTo:v,navigationBehaviorOptions:x}=gr(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,B=rs(!1,0,C);return B.url=v,B.navigationBehaviorOptions=x,B}function rs(I,C,v){const x=new Error("NavigationCancelingError: "+(I||""));return x[ir]=!0,x.cancellationCode=C,v&&(x.url=v),x}function Ps(I){return Ii(I)&&gr(I.url)}function Ii(I){return I&&I[ir]}class Do{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Dr,this.attachRef=null}}let Dr=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(v,x){const B=this.getOrCreateContext(v);B.outlet=x,this.contexts.set(v,B)}onChildOutletDestroyed(v){const x=this.getContext(v);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let x=this.getContext(v);return x||(x=new Do,this.contexts.set(v,x)),x}getContext(v){return this.contexts.get(v)||null}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Dn=!1;let uo=(()=>{class I{constructor(v,x,B,Z,Ee){this.parentContexts=v,this.location=x,this.changeDetector=Z,this.environmentInjector=Ee,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=B||Qt,v.onChildOutletCreated(this.name,this)}ngOnDestroy(){var v;(null===(v=this.parentContexts.getContext(this.name))||void 0===v?void 0:v.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const v=this.parentContexts.getContext(this.name);v&&v.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,Dn);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,Dn);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,Dn);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,x){this.activated=v,this._activatedRoute=x,this.location.insert(v.hostView),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,x){if(this.isActivated)throw new u.vHH(4013,Dn);this._activatedRoute=v;const B=this.location,Ee=v._futureSnapshot.component,Se=this.parentContexts.getOrCreateContext(this.name).children,dt=new Vr(v,Se,B.injector);if(x&&function co(I){return!!I.resolveComponentFactory}(x)){const A=x.resolveComponentFactory(Ee);this.activated=B.createComponent(A,B.length,dt)}else this.activated=B.createComponent(Ee,{index:B.length,injector:dt,environmentInjector:null!=x?x:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(v){return new(v||I)(u.Y36(Dr),u.Y36(u.s_b),u.$8M("name"),u.Y36(u.sBO),u.Y36(u.lqb))},I.\u0275dir=u.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),I})();class Vr{constructor(C,v,x){this.route=C,this.childContexts=v,this.parent=x}get(C,v){return C===fi?this.route:C===Dr?this.childContexts:this.parent.get(C,v)}}let qs=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275cmp=u.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(v,x){1&v&&u._UZ(0,"router-outlet")},dependencies:[uo],encapsulation:2}),I})();function da(I,C){var v;return I.providers&&!I._injector&&(I._injector=(0,u.MMx)(I.providers,C,`Route: ${I.path}`)),null!==(v=I._injector)&&void 0!==v?v:C}function Bo(I){const C=I.children&&I.children.map(Bo),v=C?Object.assign(Object.assign({},I),{children:C}):Object.assign({},I);return!v.component&&!v.loadComponent&&(C||v.loadChildren)&&v.outlet&&v.outlet!==Qt&&(v.component=qs),v}function gi(I){return I.outlet||Qt}function Qi(I,C){const v=I.filter(x=>gi(x)===C);return v.push(...I.filter(x=>gi(x)!==C)),v}function Ns(I){var C;if(!I)return null;if(null!==(C=I.routeConfig)&&void 0!==C&&C._injector)return I.routeConfig._injector;for(let v=I.parent;v;v=v.parent){const x=v.routeConfig;if(null!=x&&x._loadedInjector)return x._loadedInjector;if(null!=x&&x._injector)return x._injector}return null}class P{constructor(C,v,x,B){this.routeReuseStrategy=C,this.futureState=v,this.currState=x,this.forwardEvent=B}activate(C){const v=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,x,C),Hi(this.futureState.root),this.activateChildRoutes(v,x,C)}deactivateChildRoutes(C,v,x){const B=ws(v);C.children.forEach(Z=>{const Ee=Z.value.outlet;this.deactivateRoutes(Z,B[Ee],x),delete B[Ee]}),_n(B,(Z,Ee)=>{this.deactivateRouteAndItsChildren(Z,x)})}deactivateRoutes(C,v,x){const B=C.value,Z=v?v.value:null;if(B===Z)if(B.component){const Ee=x.getContext(B.outlet);Ee&&this.deactivateChildRoutes(C,v,Ee.children)}else this.deactivateChildRoutes(C,v,x);else Z&&this.deactivateRouteAndItsChildren(v,x)}deactivateRouteAndItsChildren(C,v){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,v):this.deactivateRouteAndOutlet(C,v)}detachAndStoreRouteSubtree(C,v){const x=v.getContext(C.value.outlet),B=x&&C.value.component?x.children:v,Z=ws(C);for(const Ee of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[Ee],B);if(x&&x.outlet){const Ee=x.outlet.detach(),Se=x.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:Ee,route:C,contexts:Se})}}deactivateRouteAndOutlet(C,v){const x=v.getContext(C.value.outlet),B=x&&C.value.component?x.children:v,Z=ws(C);for(const Ee of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[Ee],B);x&&x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated(),x.attachRef=null,x.resolver=null,x.route=null)}activateChildRoutes(C,v,x){const B=ws(v);C.children.forEach(Z=>{this.activateRoutes(Z,B[Z.value.outlet],x),this.forwardEvent(new vs(Z.value.snapshot))}),C.children.length&&this.forwardEvent(new ca(C.value.snapshot))}activateRoutes(C,v,x){var B;const Z=C.value,Ee=v?v.value:null;if(Hi(Z),Z===Ee)if(Z.component){const Se=x.getOrCreateContext(Z.outlet);this.activateChildRoutes(C,v,Se.children)}else this.activateChildRoutes(C,v,x);else if(Z.component){const Se=x.getOrCreateContext(Z.outlet);if(this.routeReuseStrategy.shouldAttach(Z.snapshot)){const dt=this.routeReuseStrategy.retrieve(Z.snapshot);this.routeReuseStrategy.store(Z.snapshot,null),Se.children.onOutletReAttached(dt.contexts),Se.attachRef=dt.componentRef,Se.route=dt.route.value,Se.outlet&&Se.outlet.attach(dt.componentRef,dt.route.value),Hi(dt.route.value),this.activateChildRoutes(C,null,Se.children)}else{const dt=Ns(Z.snapshot),A=null!==(B=null==dt?void 0:dt.get(u._Vd))&&void 0!==B?B:null;Se.attachRef=null,Se.route=Z,Se.resolver=A,Se.injector=dt,Se.outlet&&Se.outlet.activateWith(Z,Se.injector),this.activateChildRoutes(C,null,Se.children)}}else this.activateChildRoutes(C,null,x)}}class R{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class p{constructor(C,v){this.component=C,this.route=v}}function M(I,C,v){const x=I._root;return ee(x,C?C._root:null,v,[x.value])}function F(I,C){const v=Symbol(),x=C.get(I,v);return x===v?"function"!=typeof I||(0,u.Z0I)(I)?C.get(I):I:x}function ee(I,C,v,x,B={canDeactivateChecks:[],canActivateChecks:[]}){const Z=ws(C);return I.children.forEach(Ee=>{(function lt(I,C,v,x,B={canDeactivateChecks:[],canActivateChecks:[]}){const Z=I.value,Ee=C?C.value:null,Se=v?v.getContext(I.value.outlet):null;if(Ee&&Z.routeConfig===Ee.routeConfig){const dt=function Ft(I,C,v){if("function"==typeof v)return v(I,C);switch(v){case"pathParamsChange":return!en(I.url,C.url);case"pathParamsOrQueryParamsChange":return!en(I.url,C.url)||!Jn(I.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yr(I,C)||!Jn(I.queryParams,C.queryParams);default:return!Yr(I,C)}}(Ee,Z,Z.routeConfig.runGuardsAndResolvers);dt?B.canActivateChecks.push(new R(x)):(Z.data=Ee.data,Z._resolvedData=Ee._resolvedData),ee(I,C,Z.component?Se?Se.children:null:v,x,B),dt&&Se&&Se.outlet&&Se.outlet.isActivated&&B.canDeactivateChecks.push(new p(Se.outlet.component,Ee))}else Ee&&Xt(C,Se,B),B.canActivateChecks.push(new R(x)),ee(I,null,Z.component?Se?Se.children:null:v,x,B)})(Ee,Z[Ee.value.outlet],v,x.concat([Ee.value]),B),delete Z[Ee.value.outlet]}),_n(Z,(Ee,Se)=>Xt(Ee,v.getContext(Se),B)),B}function Xt(I,C,v){const x=ws(I),B=I.value;_n(x,(Z,Ee)=>{Xt(Z,B.component?C?C.children.getContext(Ee):null:C,v)}),v.canDeactivateChecks.push(new p(B.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,B))}function Tn(I){return"function"==typeof I}function fa(I){return I instanceof Te.K||"EmptyError"===(null==I?void 0:I.name)}const So=Symbol("INITIAL_VALUE");function Vo(){return(0,et.w)(I=>X(I.map(C=>C.pipe((0,fe.q)(1),(0,je.O)(So)))).pipe((0,ke.U)(C=>{for(const v of C)if(!0!==v){if(v===So)return So;if(!1===v||v instanceof Oe)return v}return!0}),(0,de.h)(C=>C!==So),(0,fe.q)(1)))}function hr(I){return(0,Qe.z)((0,tt.b)(C=>{if(gr(C))throw zs(0,C)}),(0,ke.U)(C=>!0===C))}const br={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fr(I,C,v,x,B){const Z=mi(I,C,v);return Z.matched?function Ir(I,C,v,x){const B=C.canMatch;if(!B||0===B.length)return(0,j.of)(!0);const Z=B.map(Ee=>{const Se=F(Ee,I);return Rr(function ki(I){return I&&Tn(I.canMatch)}(Se)?Se.canMatch(C,v):I.runInContext(()=>Se(C,v)))});return(0,j.of)(Z).pipe(Vo(),hr())}(x=da(C,x),C,v).pipe((0,ke.U)(Ee=>!0===Ee?Z:Object.assign({},br))):(0,j.of)(Z)}function mi(I,C,v){var x;if(""===C.path)return"full"===C.pathMatch&&(I.hasChildren()||v.length>0)?Object.assign({},br):{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const Z=(C.matcher||yt)(v,I,C);if(!Z)return Object.assign({},br);const Ee={};_n(Z.posParams,(dt,A)=>{Ee[A]=dt.path});const Se=Z.consumed.length>0?Object.assign(Object.assign({},Ee),Z.consumed[Z.consumed.length-1].parameters):Ee;return{matched:!0,consumedSegments:Z.consumed,remainingSegments:v.slice(Z.consumed.length),parameters:Se,positionalParamSegments:null!==(x=Z.posParams)&&void 0!==x?x:{}}}function Tr(I,C,v,x,B="corrected"){if(v.length>0&&function ho(I,C,v){return v.some(x=>Ls(I,C,x)&&gi(x)!==Qt)}(I,v,x)){const Ee=new rt(C,function $o(I,C,v,x){const B={};B[Qt]=x,x._sourceSegment=I,x._segmentIndexShift=C.length;for(const Z of v)if(""===Z.path&&gi(Z)!==Qt){const Ee=new rt([],{});Ee._sourceSegment=I,Ee._segmentIndexShift=C.length,B[gi(Z)]=Ee}return B}(I,C,x,new rt(v,I.children)));return Ee._sourceSegment=I,Ee._segmentIndexShift=C.length,{segmentGroup:Ee,slicedSegments:[]}}if(0===v.length&&function Ci(I,C,v){return v.some(x=>Ls(I,C,x))}(I,v,x)){const Ee=new rt(I.segments,function ni(I,C,v,x,B,Z){const Ee={};for(const Se of x)if(Ls(I,v,Se)&&!B[gi(Se)]){const dt=new rt([],{});dt._sourceSegment=I,dt._segmentIndexShift="legacy"===Z?I.segments.length:C.length,Ee[gi(Se)]=dt}return Object.assign(Object.assign({},B),Ee)}(I,C,v,x,I.children,B));return Ee._sourceSegment=I,Ee._segmentIndexShift=C.length,{segmentGroup:Ee,slicedSegments:v}}const Z=new rt(I.segments,I.children);return Z._sourceSegment=I,Z._segmentIndexShift=C.length,{segmentGroup:Z,slicedSegments:v}}function Ls(I,C,v){return(!(I.hasChildren()||C.length>0)||"full"!==v.pathMatch)&&""===v.path}function Ks(I,C,v,x){return!!(gi(I)===x||x!==Qt&&Ls(C,v,I))&&("**"===I.path||mi(C,I,v).matched)}function fo(I,C,v){return 0===C.length&&!I.children[v]}const Bs=!1;class Ta{constructor(C){this.segmentGroup=C||null}}class wr{constructor(C){this.urlTree=C}}function Ao(I){return(0,Ke._)(new Ta(I))}function ic(I){return(0,Ke._)(new wr(I))}class fl{constructor(C,v,x,B,Z){this.injector=C,this.configLoader=v,this.urlSerializer=x,this.urlTree=B,this.config=Z,this.allowRedirects=!0}apply(){const C=Tr(this.urlTree.root,[],[],this.config).segmentGroup,v=new rt(C.segments,C.children);return this.expandSegmentGroup(this.injector,this.config,v,Qt).pipe((0,ke.U)(Z=>this.createUrlTree(oi(Z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(kt(Z=>{if(Z instanceof wr)return this.allowRedirects=!1,this.match(Z.urlTree);throw Z instanceof Ta?this.noMatchError(Z):Z}))}match(C){return this.expandSegmentGroup(this.injector,this.config,C.root,Qt).pipe((0,ke.U)(B=>this.createUrlTree(oi(B),C.queryParams,C.fragment))).pipe(kt(B=>{throw B instanceof Ta?this.noMatchError(B):B}))}noMatchError(C){return new u.vHH(4002,Bs)}createUrlTree(C,v,x){const B=xr(C);return new Oe(B,v,x)}expandSegmentGroup(C,v,x,B){return 0===x.segments.length&&x.hasChildren()?this.expandChildren(C,v,x).pipe((0,ke.U)(Z=>new rt([],Z))):this.expandSegment(C,x,v,x.segments,B,!0)}expandChildren(C,v,x){const B=[];for(const Z of Object.keys(x.children))"primary"===Z?B.unshift(Z):B.push(Z);return(0,W.D)(B).pipe(be(Z=>{const Ee=x.children[Z],Se=Qi(v,Z);return this.expandSegmentGroup(C,Se,Ee,Z).pipe((0,ke.U)(dt=>({segment:dt,outlet:Z})))}),(0,Ne.R)((Z,Ee)=>(Z[Ee.outlet]=Ee.segment,Z),{}),On())}expandSegment(C,v,x,B,Z,Ee){return(0,W.D)(x).pipe(be(Se=>this.expandSegmentAgainstRoute(C,v,x,Se,B,Z,Ee).pipe(kt(A=>{if(A instanceof Ta)return(0,j.of)(null);throw A}))),(0,ve.P)(Se=>!!Se),kt((Se,dt)=>{if(fa(Se))return fo(v,B,Z)?(0,j.of)(new rt([],{})):Ao(v);throw Se}))}expandSegmentAgainstRoute(C,v,x,B,Z,Ee,Se){return Ks(B,v,Z,Ee)?void 0===B.redirectTo?this.matchSegmentAgainstRoute(C,v,B,Z,Ee):Se&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,v,x,B,Z,Ee):Ao(v):Ao(v)}expandSegmentAgainstRouteUsingRedirect(C,v,x,B,Z,Ee){return"**"===B.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,x,B,Ee):this.expandRegularSegmentAgainstRouteUsingRedirect(C,v,x,B,Z,Ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,v,x,B){const Z=this.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?ic(Z):this.lineralizeSegments(x,Z).pipe((0,ie.zg)(Ee=>{const Se=new rt(Ee,{});return this.expandSegment(C,Se,v,Ee,B,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,v,x,B,Z,Ee){const{matched:Se,consumedSegments:dt,remainingSegments:A,positionalParamSegments:L}=mi(v,B,Z);if(!Se)return Ao(v);const q=this.applyRedirectCommands(dt,B.redirectTo,L);return B.redirectTo.startsWith("/")?ic(q):this.lineralizeSegments(B,q).pipe((0,ie.zg)(le=>this.expandSegment(C,v,x,le.concat(A),Ee,!1)))}matchSegmentAgainstRoute(C,v,x,B,Z){return"**"===x.path?(C=da(x,C),x.loadChildren?(x._loadedRoutes?(0,j.of)({routes:x._loadedRoutes,injector:x._loadedInjector}):this.configLoader.loadChildren(C,x)).pipe((0,ke.U)(Se=>(x._loadedRoutes=Se.routes,x._loadedInjector=Se.injector,new rt(B,{})))):(0,j.of)(new rt(B,{}))):fr(v,x,B,C).pipe((0,et.w)(({matched:Ee,consumedSegments:Se,remainingSegments:dt})=>{var A;return Ee?(C=null!==(A=x._injector)&&void 0!==A?A:C,this.getChildConfig(C,x,B).pipe((0,ie.zg)(q=>{var le;const Be=null!==(le=q.injector)&&void 0!==le?le:C,ct=q.routes,{segmentGroup:Rt,slicedSegments:Gt}=Tr(v,Se,dt,ct),vn=new rt(Rt.segments,Rt.children);if(0===Gt.length&&vn.hasChildren())return this.expandChildren(Be,ct,vn).pipe((0,ke.U)(yi=>new rt(Se,yi)));if(0===ct.length&&0===Gt.length)return(0,j.of)(new rt(Se,{}));const Hn=gi(x)===Z;return this.expandSegment(Be,vn,ct,Gt,Hn?Qt:Z,!0).pipe((0,ke.U)(hn=>new rt(Se.concat(hn.segments),hn.children)))}))):Ao(v)}))}getChildConfig(C,v,x){return v.children?(0,j.of)({routes:v.children,injector:C}):v.loadChildren?void 0!==v._loadedRoutes?(0,j.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function Kt(I,C,v,x){const B=C.canLoad;if(void 0===B||0===B.length)return(0,j.of)(!0);const Z=B.map(Ee=>{const Se=F(Ee,I);return Rr(function Kr(I){return I&&Tn(I.canLoad)}(Se)?Se.canLoad(C,v):I.runInContext(()=>Se(C,v)))});return(0,j.of)(Z).pipe(Vo(),hr())}(C,v,x).pipe((0,ie.zg)(B=>B?this.configLoader.loadChildren(C,v).pipe((0,tt.b)(Z=>{v._loadedRoutes=Z.routes,v._loadedInjector=Z.injector})):function sc(I){return(0,Ke._)(rs(Bs,3))}())):(0,j.of)({routes:[],injector:C})}lineralizeSegments(C,v){let x=[],B=v.root;for(;;){if(x=x.concat(B.segments),0===B.numberOfChildren)return(0,j.of)(x);if(B.numberOfChildren>1||!B.children[Qt])return(0,Ke._)(new u.vHH(4e3,Bs));B=B.children[Qt]}}applyRedirectCommands(C,v,x){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),C,x)}applyRedirectCreateUrlTree(C,v,x,B){const Z=this.createSegmentGroup(C,v.root,x,B);return new Oe(Z,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(C,v){const x={};return _n(C,(B,Z)=>{if("string"==typeof B&&B.startsWith(":")){const Se=B.substring(1);x[Z]=v[Se]}else x[Z]=B}),x}createSegmentGroup(C,v,x,B){const Z=this.createSegments(C,v.segments,x,B);let Ee={};return _n(v.children,(Se,dt)=>{Ee[dt]=this.createSegmentGroup(C,Se,x,B)}),new rt(Z,Ee)}createSegments(C,v,x,B){return v.map(Z=>Z.path.startsWith(":")?this.findPosParam(C,Z,B):this.findOrReturn(Z,x))}findPosParam(C,v,x){const B=x[v.path.substring(1)];if(!B)throw new u.vHH(4001,Bs);return B}findOrReturn(C,v){let x=0;for(const B of v){if(B.path===C.path)return v.splice(x),B;x++}return C}}class pl{}class Xi{constructor(C,v,x,B,Z,Ee,Se,dt){this.injector=C,this.rootComponentType=v,this.config=x,this.urlTree=B,this.url=Z,this.paramsInheritanceStrategy=Ee,this.relativeLinkResolution=Se,this.urlSerializer=dt}recognize(){const C=Tr(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,Qt).pipe((0,ke.U)(v=>{if(null===v)return null;const x=new Oi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),B=new bs(x,v),Z=new Es(this.url,B);return this.inheritParamsAndData(Z._root),Z}))}inheritParamsAndData(C){const v=C.value,x=Co(v,this.paramsInheritanceStrategy);v.params=Object.freeze(x.params),v.data=Object.freeze(x.data),C.children.forEach(B=>this.inheritParamsAndData(B))}processSegmentGroup(C,v,x,B){return 0===x.segments.length&&x.hasChildren()?this.processChildren(C,v,x):this.processSegment(C,v,x,x.segments,B)}processChildren(C,v,x){return(0,W.D)(Object.keys(x.children)).pipe(be(B=>{const Z=x.children[B],Ee=Qi(v,B);return this.processSegmentGroup(C,Ee,Z,B)}),(0,Ne.R)((B,Z)=>B&&Z?(B.push(...Z),B):null),function tr(I,C=!1){return v=>v.lift(new Mn(I,C))}(B=>null!==B),(0,Ot.d)(null),On(),(0,ke.U)(B=>{if(null===B)return null;const Z=za(B);return function Zs(I){I.sort((C,v)=>C.value.outlet===Qt?-1:v.value.outlet===Qt?1:C.value.outlet.localeCompare(v.value.outlet))}(Z),Z}))}processSegment(C,v,x,B,Z){return(0,W.D)(v).pipe(be(Ee=>{var Se;return this.processSegmentAgainstRoute(null!==(Se=Ee._injector)&&void 0!==Se?Se:C,Ee,x,B,Z)}),(0,ve.P)(Ee=>!!Ee),kt(Ee=>{if(fa(Ee))return fo(x,B,Z)?(0,j.of)([]):(0,j.of)(null);throw Ee}))}processSegmentAgainstRoute(C,v,x,B,Z){var Ee,Se;if(v.redirectTo||!Ks(v,x,B,Z))return(0,j.of)(null);let dt;if("**"===v.path){const A=B.length>0?rn(B).parameters:{},L=qo(x)+B.length,q=new Oi(B,A,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xs(v),gi(v),null!==(Se=null!==(Ee=v.component)&&void 0!==Ee?Ee:v._loadedComponent)&&void 0!==Se?Se:null,v,po(x),L,qa(v),L);dt=(0,j.of)({snapshot:q,consumedSegments:[],remainingSegments:[]})}else dt=fr(x,v,B,C).pipe((0,ke.U)(({matched:A,consumedSegments:L,remainingSegments:q,parameters:le})=>{var Be,ct;if(!A)return null;const Rt=qo(x)+L.length;return{snapshot:new Oi(L,le,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xs(v),gi(v),null!==(ct=null!==(Be=v.component)&&void 0!==Be?Be:v._loadedComponent)&&void 0!==ct?ct:null,v,po(x),Rt,qa(v),Rt),consumedSegments:L,remainingSegments:q}}));return dt.pipe((0,et.w)(A=>{var L,q;if(null===A)return(0,j.of)(null);const{snapshot:le,consumedSegments:Be,remainingSegments:ct}=A;C=null!==(L=v._injector)&&void 0!==L?L:C;const Rt=null!==(q=v._loadedInjector)&&void 0!==q?q:C,Gt=function Vs(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(v),{segmentGroup:vn,slicedSegments:Hn}=Tr(x,Be,ct,Gt.filter(hn=>void 0===hn.redirectTo),this.relativeLinkResolution);if(0===Hn.length&&vn.hasChildren())return this.processChildren(Rt,Gt,vn).pipe((0,ke.U)(hn=>null===hn?null:[new bs(le,hn)]));if(0===Gt.length&&0===Hn.length)return(0,j.of)([new bs(le,[])]);const ar=gi(v)===Z;return this.processSegment(Rt,Gt,vn,Hn,ar?Qt:Z).pipe((0,ke.U)(hn=>null===hn?null:[new bs(le,hn)]))}))}}function Qs(I){const C=I.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function za(I){const C=[],v=new Set;for(const x of I){if(!Qs(x)){C.push(x);continue}const B=C.find(Z=>x.value.routeConfig===Z.value.routeConfig);void 0!==B?(B.children.push(...x.children),v.add(B)):C.push(x)}for(const x of v){const B=za(x.children);C.push(new bs(x.value,B))}return C.filter(x=>!v.has(x))}function po(I){let C=I;for(;C._sourceSegment;)C=C._sourceSegment;return C}function qo(I){var C,v;let x=I,B=null!==(C=x._segmentIndexShift)&&void 0!==C?C:0;for(;x._sourceSegment;)x=x._sourceSegment,B+=null!==(v=x._segmentIndexShift)&&void 0!==v?v:0;return B-1}function Xs(I){return I.data||{}}function qa(I){return I.resolve||{}}function xo(I){return"string"==typeof I.title||null===I.title}function xa(I){return(0,et.w)(C=>{const v=I(C);return v?(0,W.D)(v).pipe((0,ke.U)(()=>C)):(0,j.of)(C)})}let Yo=(()=>{class I{buildTitle(v){var x;let B,Z=v.root;for(;void 0!==Z;)B=null!==(x=this.getResolvedTitleForRoute(Z))&&void 0!==x?x:B,Z=Z.children.find(Ee=>Ee.outlet===Qt);return B}getResolvedTitleForRoute(v){return v.data[or]}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=u.Yz7({token:I,factory:function(){return(0,u.f3M)(Ya)},providedIn:"root"}),I})(),Ya=(()=>{class I extends Yo{constructor(v){super(),this.title=v}updateTitle(v){const x=this.buildTitle(v);void 0!==x&&this.title.setTitle(x)}}return I.\u0275fac=function(v){return new(v||I)(u.LFG(Wr.Dx))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class Ka{}class Ji extends class ma{shouldDetach(C){return!1}store(C,v){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,v){return C.routeConfig===v.routeConfig}}{}const Ko=new u.OlP("",{providedIn:"root",factory:()=>({})}),ml=new u.OlP("ROUTES");let zl=(()=>{class I{constructor(v,x){this.injector=v,this.compiler=x,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,j.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const x=Rr(v.loadComponent()).pipe((0,tt.b)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=Z}),Nt(()=>{this.componentLoaders.delete(v)})),B=new ut.c(x,()=>new ot.xQ).pipe((0,Un.x)());return this.componentLoaders.set(v,B),B}loadChildren(v,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,j.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const Z=this.loadModuleFactoryOrRoutes(x.loadChildren).pipe((0,ke.U)(Se=>{this.onLoadEndListener&&this.onLoadEndListener(x);let dt,A,L=!1;Array.isArray(Se)?A=Se:(dt=Se.create(v).injector,A=_r(dt.get(ml,[],u.XFs.Self|u.XFs.Optional)));return{routes:A.map(Bo),injector:dt}}),Nt(()=>{this.childrenLoaders.delete(x)})),Ee=new ut.c(Z,()=>new ot.xQ).pipe((0,Un.x)());return this.childrenLoaders.set(x,Ee),Ee}loadModuleFactoryOrRoutes(v){return Rr(v()).pipe((0,ie.zg)(x=>x instanceof u.YKP||Array.isArray(x)?(0,j.of)(x):(0,W.D)(this.compiler.compileModuleAsync(x))))}}return I.\u0275fac=function(v){return new(v||I)(u.LFG(u.zs3),u.LFG(u.Sil))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class ql{}class ss{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,v){return C}}function Iu(I){throw I}function Us(I,C,v){return C.parse("/")}const Zo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ya={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Qa(){var I,C;const v=(0,u.f3M)(Kn),x=(0,u.f3M)(Dr),B=(0,u.f3M)(Ct.Ye),Z=(0,u.f3M)(u.zs3),Ee=(0,u.f3M)(u.Sil),Se=null!==(I=(0,u.f3M)(ml,{optional:!0}))&&void 0!==I?I:[],dt=null!==(C=(0,u.f3M)(Ko,{optional:!0}))&&void 0!==C?C:{},A=(0,u.f3M)(Ya),L=(0,u.f3M)(Yo,{optional:!0}),q=(0,u.f3M)(ql,{optional:!0}),le=(0,u.f3M)(Ka,{optional:!0}),Be=new ri(null,v,x,B,Z,Ee,_r(Se));return q&&(Be.urlHandlingStrategy=q),le&&(Be.routeReuseStrategy=le),Be.titleStrategy=null!=L?L:A,function go(I,C){I.errorHandler&&(C.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(C.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(C.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(C.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(C.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(C.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(C.canceledNavigationResolution=I.canceledNavigationResolution)}(dt,Be),Be}let ri=(()=>{class I{constructor(v,x,B,Z,Ee,Se,dt){this.rootComponentType=v,this.urlSerializer=x,this.rootContexts=B,this.location=Z,this.config=dt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ot.xQ,this.errorHandler=Iu,this.malformedUriErrorHandler=Us,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,j.of)(void 0),this.urlHandlingStrategy=new ss,this.routeReuseStrategy=new Ji,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ee.get(zl),this.configLoader.onLoadEndListener=le=>this.triggerEvent(new Lo(le)),this.configLoader.onLoadStartListener=le=>this.triggerEvent(new ua(le)),this.ngModule=Ee.get(u.h0i),this.console=Ee.get(u.c2e);const q=Ee.get(u.R0b);this.isNgZoneEnabled=q instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(dt),this.currentUrlTree=function Ar(){return new Oe(new rt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ri(this.currentUrlTree,this.rootComponentType),this.transitions=new Ae.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var v;return null===(v=this.location.getState())||void 0===v?void 0:v.\u0275routerPageId}setupNavigations(v){const x=this.events;return v.pipe((0,de.h)(B=>0!==B.id),(0,ke.U)(B=>Object.assign(Object.assign({},B),{extractedUrl:this.urlHandlingStrategy.extract(B.rawUrl)})),(0,et.w)(B=>{let Z=!1,Ee=!1;return(0,j.of)(B).pipe((0,tt.b)(Se=>{this.currentNavigation={id:Se.id,initialUrl:Se.rawUrl,extractedUrl:Se.extractedUrl,trigger:Se.source,extras:Se.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,et.w)(Se=>{const dt=this.browserUrlTree.toString(),A=!this.navigated||Se.extractedUrl.toString()!==dt||dt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(Se.rawUrl))return Ra(Se.source)&&(this.browserUrlTree=Se.extractedUrl),(0,j.of)(Se).pipe((0,et.w)(q=>{const le=this.transitions.getValue();return x.next(new _s(q.id,this.serializeUrl(q.extractedUrl),q.source,q.restoredState)),le!==this.transitions.getValue()?Ie.E:Promise.resolve(q)}),function Sa(I,C,v,x){return(0,et.w)(B=>function Gl(I,C,v,x,B){return new fl(I,C,v,x,B).apply()}(I,C,v,B.extractedUrl,x).pipe((0,ke.U)(Z=>Object.assign(Object.assign({},B),{urlAfterRedirects:Z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,tt.b)(q=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:q.urlAfterRedirects}),B.urlAfterRedirects=q.urlAfterRedirects}),function Aa(I,C,v,x,B,Z){return(0,ie.zg)(Ee=>function oc(I,C,v,x,B,Z,Ee="emptyOnly",Se="legacy"){return new Xi(I,C,v,x,B,Ee,Se,Z).recognize().pipe((0,et.w)(dt=>null===dt?function bu(I){return new Le.y(C=>C.error(I))}(new pl):(0,j.of)(dt)))}(I,C,v,Ee.urlAfterRedirects,x.serialize(Ee.urlAfterRedirects),x,B,Z).pipe((0,ke.U)(Se=>Object.assign(Object.assign({},Ee),{targetSnapshot:Se}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,tt.b)(q=>{if(B.targetSnapshot=q.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!q.extras.skipLocationChange){const Be=this.urlHandlingStrategy.merge(q.urlAfterRedirects,q.rawUrl);this.setBrowserUrl(Be,q)}this.browserUrlTree=q.urlAfterRedirects}const le=new Fo(q.id,this.serializeUrl(q.extractedUrl),this.serializeUrl(q.urlAfterRedirects),q.targetSnapshot);x.next(le)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:le,extractedUrl:Be,source:ct,restoredState:Rt,extras:Gt}=Se,vn=new _s(le,this.serializeUrl(Be),ct,Rt);x.next(vn);const Hn=Ri(Be,this.rootComponentType).snapshot;return B=Object.assign(Object.assign({},Se),{targetSnapshot:Hn,urlAfterRedirects:Be,extras:Object.assign(Object.assign({},Gt),{skipLocationChange:!1,replaceUrl:!1})}),(0,j.of)(B)}return this.rawUrlTree=Se.rawUrl,Se.resolve(null),Ie.E}),(0,tt.b)(Se=>{const dt=new Wa(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot);this.triggerEvent(dt)}),(0,ke.U)(Se=>B=Object.assign(Object.assign({},Se),{guards:M(Se.targetSnapshot,Se.currentSnapshot,this.rootContexts)})),function dl(I,C){return(0,ie.zg)(v=>{const{targetSnapshot:x,currentSnapshot:B,guards:{canActivateChecks:Z,canDeactivateChecks:Ee}}=v;return 0===Ee.length&&0===Z.length?(0,j.of)(Object.assign(Object.assign({},v),{guardsResult:!0})):function k(I,C,v,x){return(0,W.D)(I).pipe((0,ie.zg)(B=>function It(I,C,v,x,B){const Z=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,j.of)(!0);const Ee=Z.map(Se=>{var dt;const A=null!==(dt=Ns(C))&&void 0!==dt?dt:B,L=F(Se,A);return Rr(function ti(I){return I&&Tn(I.canDeactivate)}(L)?L.canDeactivate(I,C,v,x):A.runInContext(()=>L(I,C,v,x))).pipe((0,ve.P)())});return(0,j.of)(Ee).pipe(Vo())}(B.component,B.route,v,C,x)),(0,ve.P)(B=>!0!==B,!0))}(Ee,x,B,I).pipe((0,ie.zg)(Se=>Se&&function mr(I){return"boolean"==typeof I}(Se)?function z(I,C,v,x){return(0,W.D)(C).pipe(be(B=>(0,$e.z)(function Q(I,C){return null!==I&&C&&C(new wo(I)),(0,j.of)(!0)}(B.route.parent,x),function N(I,C){return null!==I&&C&&C(new Zi(I)),(0,j.of)(!0)}(B.route,x),function gt(I,C,v){const x=C[C.length-1],Z=C.slice(0,C.length-1).reverse().map(Ee=>function _(I){const C=I.routeConfig?I.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:I,guards:C}:null}(Ee)).filter(Ee=>null!==Ee).map(Ee=>_e(()=>{const Se=Ee.guards.map(dt=>{var A;const L=null!==(A=Ns(Ee.node))&&void 0!==A?A:v,q=F(dt,L);return Rr(function li(I){return I&&Tn(I.canActivateChild)}(q)?q.canActivateChild(x,I):L.runInContext(()=>q(x,I))).pipe((0,ve.P)())});return(0,j.of)(Se).pipe(Vo())}));return(0,j.of)(Z).pipe(Vo())}(I,B.path,v),function De(I,C,v){const x=C.routeConfig?C.routeConfig.canActivate:null;if(!x||0===x.length)return(0,j.of)(!0);const B=x.map(Z=>_e(()=>{var Ee;const Se=null!==(Ee=Ns(C))&&void 0!==Ee?Ee:v,dt=F(Z,Se);return Rr(function Sr(I){return I&&Tn(I.canActivate)}(dt)?dt.canActivate(C,I):Se.runInContext(()=>dt(C,I))).pipe((0,ve.P)())}));return(0,j.of)(B).pipe(Vo())}(I,B.route,v))),(0,ve.P)(B=>!0!==B,!0))}(x,Z,I,C):(0,j.of)(Se)),(0,ke.U)(Se=>Object.assign(Object.assign({},v),{guardsResult:Se})))})}(this.ngModule.injector,Se=>this.triggerEvent(Se)),(0,tt.b)(Se=>{if(B.guardsResult=Se.guardsResult,gr(Se.guardsResult))throw zs(0,Se.guardsResult);const dt=new la(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot,!!Se.guardsResult);this.triggerEvent(dt)}),(0,de.h)(Se=>!!Se.guardsResult||(this.restoreHistory(Se),this.cancelNavigationTransition(Se,"",3),!1)),xa(Se=>{if(Se.guards.canActivateChecks.length)return(0,j.of)(Se).pipe((0,tt.b)(dt=>{const A=new lo(dt.id,this.serializeUrl(dt.extractedUrl),this.serializeUrl(dt.urlAfterRedirects),dt.targetSnapshot);this.triggerEvent(A)}),(0,et.w)(dt=>{let A=!1;return(0,j.of)(dt).pipe(function gl(I,C){return(0,ie.zg)(v=>{const{targetSnapshot:x,guards:{canActivateChecks:B}}=v;if(!B.length)return(0,j.of)(v);let Z=0;return(0,W.D)(B).pipe(be(Ee=>function wu(I,C,v,x){const B=I.routeConfig,Z=I._resolve;return void 0!==(null==B?void 0:B.title)&&!xo(B)&&(Z[or]=B.title),function Wl(I,C,v,x){const B=function ga(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===B.length)return(0,j.of)({});const Z={};return(0,W.D)(B).pipe((0,ie.zg)(Ee=>function ac(I,C,v,x){var B;const Z=null!==(B=Ns(C))&&void 0!==B?B:x,Ee=F(I,Z);return Rr(Ee.resolve?Ee.resolve(C,v):Z.runInContext(()=>Ee(C,v)))}(I[Ee],C,v,x).pipe((0,ve.P)(),(0,tt.b)(Se=>{Z[Ee]=Se}))),it(1),function bn(I){return C=>C.lift(new Fn(I))}(Z),kt(Ee=>fa(Ee)?Ie.E:(0,Ke._)(Ee)))}(Z,I,C,x).pipe((0,ke.U)(Ee=>(I._resolvedData=Ee,I.data=Co(I,v).resolve,B&&xo(B)&&(I.data[or]=B.title),null)))}(Ee.route,x,I,C)),(0,tt.b)(()=>Z++),it(1),(0,ie.zg)(Ee=>Z===B.length?(0,j.of)(v):Ie.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,tt.b)({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(dt),this.cancelNavigationTransition(dt,"",2))}}))}),(0,tt.b)(dt=>{const A=new Mi(dt.id,this.serializeUrl(dt.extractedUrl),this.serializeUrl(dt.urlAfterRedirects),dt.targetSnapshot);this.triggerEvent(A)}))}),xa(Se=>{const dt=A=>{var L;const q=[];(null===(L=A.routeConfig)||void 0===L?void 0:L.loadComponent)&&!A.routeConfig._loadedComponent&&q.push(this.configLoader.loadComponent(A.routeConfig).pipe((0,tt.b)(le=>{A.component=le}),(0,ke.U)(()=>{})));for(const le of A.children)q.push(...dt(le));return q};return X(dt(Se.targetSnapshot.root)).pipe((0,Ot.d)(),(0,fe.q)(1))}),xa(()=>this.afterPreactivation()),(0,ke.U)(Se=>{const dt=function Ei(I,C,v){const x=ns(I,C._root,v?v._root:void 0);return new ji(x,C)}(this.routeReuseStrategy,Se.targetSnapshot,Se.currentRouterState);return B=Object.assign(Object.assign({},Se),{targetRouterState:dt})}),(0,tt.b)(Se=>{this.currentUrlTree=Se.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Se.urlAfterRedirects,Se.rawUrl),this.routerState=Se.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Se.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Se),this.browserUrlTree=Se.urlAfterRedirects)}),((I,C,v)=>(0,ke.U)(x=>(new P(C,x.targetRouterState,x.currentRouterState,v).activate(I),x)))(this.rootContexts,this.routeReuseStrategy,Se=>this.triggerEvent(Se)),(0,tt.b)({next(){Z=!0},complete(){Z=!0}}),Nt(()=>{var Se;Z||Ee||this.cancelNavigationTransition(B,"",1),(null===(Se=this.currentNavigation)||void 0===Se?void 0:Se.id)===B.id&&(this.currentNavigation=null)}),kt(Se=>{var dt;if(Ee=!0,Ii(Se)){Ps(Se)||(this.navigated=!0,this.restoreHistory(B,!0));const A=new Ui(B.id,this.serializeUrl(B.extractedUrl),Se.message,Se.cancellationCode);if(x.next(A),Ps(Se)){const L=this.urlHandlingStrategy.merge(Se.url,this.rawUrlTree),q={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ra(B.source)};this.scheduleNavigation(L,"imperative",null,q,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{this.restoreHistory(B,!0);const A=new No(B.id,this.serializeUrl(B.extractedUrl),Se,null!==(dt=B.targetSnapshot)&&void 0!==dt?dt:void 0);x.next(A);try{B.resolve(this.errorHandler(Se))}catch(L){B.reject(L)}}return Ie.E}))}))}resetRootComponentType(v){this.rootComponentType=v,this.routerState.root.component=this.rootComponentType}setTransition(v){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),v))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const x="popstate"===v.type?"popstate":"hashchange";"popstate"===x&&setTimeout(()=>{var B;const Z={replaceUrl:!0},Ee=null!==(B=v.state)&&void 0!==B&&B.navigationId?v.state:null;if(Ee){const dt=Object.assign({},Ee);delete dt.navigationId,delete dt.\u0275routerPageId,0!==Object.keys(dt).length&&(Z.state=dt)}const Se=this.parseUrl(v.url);this.scheduleNavigation(Se,x,Ee,Z)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(v){this.events.next(v)}resetConfig(v){this.config=v.map(Bo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,x={}){const{relativeTo:B,queryParams:Z,fragment:Ee,queryParamsHandling:Se,preserveFragment:dt}=x,A=B||this.routerState.root,L=dt?this.currentUrlTree.fragment:Ee;let q=null;switch(Se){case"merge":q=Object.assign(Object.assign({},this.currentUrlTree.queryParams),Z);break;case"preserve":q=this.currentUrlTree.queryParams;break;default:q=Z||null}return null!==q&&(q=this.removeEmptyProps(q)),Ai(A,this.currentUrlTree,v,q,null!=L?L:null)}navigateByUrl(v,x={skipLocationChange:!1}){const B=gr(v)?v:this.parseUrl(v),Z=this.urlHandlingStrategy.merge(B,this.rawUrlTree);return this.scheduleNavigation(Z,"imperative",null,x)}navigate(v,x={skipLocationChange:!1}){return function Qo(I){for(let C=0;C<I.length;C++){if(null==I[C])throw new u.vHH(4008,false)}}(v),this.navigateByUrl(this.createUrlTree(v,x),x)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let x;try{x=this.urlSerializer.parse(v)}catch(B){x=this.malformedUriErrorHandler(B,this.urlSerializer,v)}return x}isActive(v,x){let B;if(B=!0===x?Object.assign({},Zo):!1===x?Object.assign({},ya):x,gr(v))return St(this.currentUrlTree,v,B);const Z=this.parseUrl(v);return St(this.currentUrlTree,Z,B)}removeEmptyProps(v){return Object.keys(v).reduce((x,B)=>{const Z=v[B];return null!=Z&&(x[B]=Z),x},{})}processNavigations(){this.navigations.subscribe(v=>{var x;this.navigated=!0,this.lastSuccessfulId=v.id,this.currentPageId=v.targetPageId,this.events.next(new Ki(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(x=this.titleStrategy)||void 0===x||x.updateTitle(this.routerState.snapshot),v.resolve(!0)},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}scheduleNavigation(v,x,B,Z,Ee){var Se,dt;if(this.disposed)return Promise.resolve(!1);let A,L,q;Ee?(A=Ee.resolve,L=Ee.reject,q=Ee.promise):q=new Promise((ct,Rt)=>{A=ct,L=Rt});const le=++this.navigationId;let Be;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(B=this.location.getState()),Be=B&&B.\u0275routerPageId?B.\u0275routerPageId:Z.replaceUrl||Z.skipLocationChange?null!==(Se=this.browserPageId)&&void 0!==Se?Se:0:(null!==(dt=this.browserPageId)&&void 0!==dt?dt:0)+1):Be=0,this.setTransition({id:le,targetPageId:Be,source:x,restoredState:B,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:v,extras:Z,resolve:A,reject:L,promise:q,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),q.catch(ct=>Promise.reject(ct))}setBrowserUrl(v,x){const B=this.urlSerializer.serialize(v),Z=Object.assign(Object.assign({},x.extras.state),this.generateNgRouterState(x.id,x.targetPageId));this.location.isCurrentPathEqualTo(B)||x.extras.replaceUrl?this.location.replaceState(B,"",Z):this.location.go(B,"",Z)}restoreHistory(v,x=!1){var B,Z;if("computed"===this.canceledNavigationResolution){const Ee=this.currentPageId-v.targetPageId;"popstate"!==v.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(B=this.currentNavigation)||void 0===B?void 0:B.finalUrl)||0===Ee?this.currentUrlTree===(null===(Z=this.currentNavigation)||void 0===Z?void 0:Z.finalUrl)&&0===Ee&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ee)}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(v,x,B){const Z=new Ui(v.id,this.serializeUrl(v.extractedUrl),x,B);this.triggerEvent(Z),v.resolve(!1)}generateNgRouterState(v,x){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:x}:{navigationId:v}}}return I.\u0275fac=function(v){u.$Z()},I.\u0275prov=u.Yz7({token:I,factory:function(){return Qa()},providedIn:"root"}),I})();function Ra(I){return"imperative"!==I}let jr=(()=>{class I{constructor(v,x,B,Z,Ee){this.router=v,this.route=x,this.tabIndexAttribute=B,this.renderer=Z,this.el=Ee,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ot.xQ,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(v){this._preserveFragment=(0,u.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,u.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,u.D6c)(v)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(v){if(null!=this.tabIndexAttribute)return;const x=this.renderer,B=this.el.nativeElement;null!==v?x.setAttribute(B,"tabindex",v):x.removeAttribute(B,"tabindex")}ngOnChanges(v){this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(v){return new(v||I)(u.Y36(ri),u.Y36(fi),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},I.\u0275dir=u.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(v,x){1&v&&u.NdJ("click",function(){return x.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),I})();class uc{}let ih=(()=>{class I{preload(v,x){return x().pipe(kt(()=>(0,j.of)(null)))}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),Ff=(()=>{class I{constructor(v,x,B,Z,Ee){this.router=v,this.injector=B,this.preloadingStrategy=Z,this.loader=Ee}setUpPreloading(){this.subscription=this.router.events.pipe((0,de.h)(v=>v instanceof Ki),be(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,x){var B,Z,Ee;const Se=[];for(const dt of x){dt.providers&&!dt._injector&&(dt._injector=(0,u.MMx)(dt.providers,v,`Route: ${dt.path}`));const A=null!==(B=dt._injector)&&void 0!==B?B:v,L=null!==(Z=dt._loadedInjector)&&void 0!==Z?Z:A;dt.loadChildren&&!dt._loadedRoutes&&void 0===dt.canLoad||dt.loadComponent&&!dt._loadedComponent?Se.push(this.preloadConfig(A,dt)):(dt.children||dt._loadedRoutes)&&Se.push(this.processRoutes(L,null!==(Ee=dt.children)&&void 0!==Ee?Ee:dt._loadedRoutes))}return(0,W.D)(Se).pipe((0,kn.J)())}preloadConfig(v,x){return this.preloadingStrategy.preload(x,()=>{let B;B=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(v,x):(0,j.of)(null);const Z=B.pipe((0,ie.zg)(Ee=>{var Se;return null===Ee?(0,j.of)(void 0):(x._loadedRoutes=Ee.routes,x._loadedInjector=Ee.injector,this.processRoutes(null!==(Se=Ee.injector)&&void 0!==Se?Se:v,Ee.routes))}));if(x.loadComponent&&!x._loadedComponent){const Ee=this.loader.loadComponent(x);return(0,W.D)([Z,Ee]).pipe((0,kn.J)())}return Z})}}return I.\u0275fac=function(v){return new(v||I)(u.LFG(ri),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(uc),u.LFG(zl))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Xa=new u.OlP("");let cc=(()=>{class I{constructor(v,x,B={}){this.router=v,this.viewportScroller=x,this.options=B,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},B.scrollPositionRestoration=B.scrollPositionRestoration||"disabled",B.anchorScrolling=B.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(v=>{v instanceof _s?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Ki&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.router.parseUrl(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(v=>{v instanceof xi&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,x){this.router.triggerEvent(new xi(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(v){u.$Z()},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac}),I})();function Mo(I,C){return{\u0275kind:I,\u0275providers:C}}function Yl(I){return[{provide:ml,multi:!0,useValue:I}]}function os(){const I=(0,u.f3M)(u.zs3);return C=>{var v,x;const B=I.get(u.z2F);if(C!==B.components[0])return;const Z=I.get(ri),Ee=I.get(Js);1===I.get(_l)&&Z.initialNavigation(),null===(v=I.get(ed,null,u.XFs.Optional))||void 0===v||v.setUpPreloading(),null===(x=I.get(Xa,null,u.XFs.Optional))||void 0===x||x.init(),Z.resetRootComponentType(B.componentTypes[0]),Ee.next(),Ee.complete()}}const Js=new u.OlP("",{factory:()=>new ot.xQ}),_l=new u.OlP("",{providedIn:"root",factory:()=>1});const ed=new u.OlP("");function vl(I){return Mo(0,[{provide:ed,useExisting:Ff},{provide:uc,useExisting:I}])}const as=new u.OlP("ROUTER_FORROOT_GUARD"),El=[Ct.Ye,{provide:Kn,useClass:dr},{provide:ri,useFactory:Qa},Dr,{provide:fi,useFactory:function yl(I){return I.routerState.root},deps:[ri]},zl];function va(){return new u.PXZ("Router",ri)}let hc=(()=>{class I{constructor(v){}static forRoot(v,x){return{ngModule:I,providers:[El,[],Yl(v),{provide:as,useFactory:gc,deps:[[ri,new u.FiY,new u.tp0]]},{provide:Ko,useValue:x||{}},null!=x&&x.useHash?{provide:Ct.S$,useClass:Ct.Do}:{provide:Ct.S$,useClass:Ct.b0},{provide:Xa,useFactory:()=>{const I=(0,u.f3M)(ri),C=(0,u.f3M)(Ct.EM),v=(0,u.f3M)(Ko);return v.scrollOffset&&C.setOffset(v.scrollOffset),new cc(I,C,v)}},null!=x&&x.preloadingStrategy?vl(x.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:va},null!=x&&x.initialNavigation?Il(x):[],[{provide:Cl,useFactory:os},{provide:u.tb,multi:!0,useExisting:Cl}]]}}static forChild(v){return{ngModule:I,providers:[Yl(v)]}}}return I.\u0275fac=function(v){return new(v||I)(u.LFG(as,8))},I.\u0275mod=u.oAB({type:I}),I.\u0275inj=u.cJS({imports:[qs]}),I})();function gc(I){return"guarded"}function Il(I){return["disabled"===I.initialNavigation?Mo(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const C=(0,u.f3M)(ri);return()=>{C.setUpLocationChangeListener()}}},{provide:_l,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?Mo(2,[{provide:_l,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:C=>{const v=C.get(Ct.V_,Promise.resolve());let x=!1;return()=>v.then(()=>new Promise(Z=>{const Ee=C.get(ri),Se=C.get(Js);(function B(Z){C.get(ri).events.pipe((0,de.h)(Se=>Se instanceof Ki||Se instanceof Ui||Se instanceof No),(0,ke.U)(Se=>Se instanceof Ki||Se instanceof Ui&&(0===Se.code||1===Se.code)&&null),(0,de.h)(Se=>null!==Se),(0,fe.q)(1)).subscribe(()=>{Z()})})(()=>{Z(!0),x=!0}),Ee.afterPreactivation=()=>(Z(!0),x||Se.closed?(0,j.of)(void 0):Se),Ee.initialNavigation()}))}}]).\u0275providers:[]]}const Cl=new u.OlP("")},3942:($t,ze,$)=>{"use strict";$.d(ze,{Z:()=>$e});var u=$(2090),W=$(4859),j=$(9681),Ae=$(1877);class Te{constructor(Ie,_e){this._delegate=Ie,this.firebase=_e,(0,j._addComponent)(Ie,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(Ie,_e=j._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(Ie);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Qe=Ke.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:_e})}_removeServiceInstance(Ie,_e=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(_e)}_addComponent(Ie){(0,j._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,j._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function ye(){const Le=function oe(Le){const Ie={},_e={__esModule:!0,initializeApp:function ut(et,fe={}){const je=j.initializeApp(et,fe);if((0,u.r3)(Ie,je.name))return Ie[je.name];const de=new Le(je,_e);return Ie[je.name]=de,de},app:Ke,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Ct(et){const fe=et.name,je=fe.replace("-compat","");if(j._registerComponent(et)&&"PUBLIC"===et.type){const de=(ie=Ke())=>{if("function"!=typeof ie[je])throw he.create("invalid-app-argument",{appName:fe});return ie[je]()};void 0!==et.serviceProps&&(0,u.ZB)(de,et.serviceProps),_e[je]=de,Le.prototype[je]=function(...ie){return this._getService.bind(this,fe).apply(this,et.multipleInstances?ie:[])}}return"PUBLIC"===et.type?_e[je]:null},removeApp:function Qe(et){delete Ie[et]},useAsService:function ke(et,fe){return"serverAuth"===fe?null:fe},modularAPIs:j}};function Ke(et){if(!(0,u.r3)(Ie,et=et||j._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:et});return Ie[et]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function ot(){return Object.keys(Ie).map(et=>Ie[et])}}),Ke.App=Le,_e}(Te);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function Ie(_e){(0,u.ZB)(Le,_e)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Le}(),se=new Ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=te;!function Re(Le){(0,j.registerVersion)("@firebase/app-compat","0.1.37",Le)}()},9681:($t,ze,$)=>{"use strict";$.r(ze),$.d(ze,{FirebaseError:()=>Ae.ZR,SDK_VERSION:()=>Xe,_DEFAULT_ENTRY_NAME:()=>qe,_addComponent:()=>it,_addOrOverwriteComponent:()=>Tt,_apps:()=>Ze,_clearComponents:()=>An,_components:()=>nt,_getProvider:()=>jt,_registerComponent:()=>mt,_removeServiceInstance:()=>Ot,deleteApp:()=>Qn,getApp:()=>Fn,getApps:()=>re,initializeApp:()=>bn,onLog:()=>Ur,registerVersion:()=>Fr,setLogLevel:()=>Un});var u=$(5861),W=$(4859),j=$(1877),Ae=$(2090),Te=$(8766);class ae{constructor(St){this.container=St}getPlatformInfoString(){return this.container.getProviders().map(Zt=>{if(function he(Jt){const St=Jt.getComponent();return"VERSION"===(null==St?void 0:St.type)}(Zt)){const gn=Zt.getImmediate();return`${gn.library}/${gn.version}`}return null}).filter(Zt=>Zt).join(" ")}}const oe="@firebase/app",te=new j.Yd("@firebase/app"),qe="[DEFAULT]",Ne={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ze=new Map,nt=new Map;function it(Jt,St){try{Jt.container.addComponent(St)}catch(Zt){te.debug(`Component ${St.name} failed to register with FirebaseApp ${Jt.name}`,Zt)}}function Tt(Jt,St){Jt.container.addOrOverwriteComponent(St)}function mt(Jt){const St=Jt.name;if(nt.has(St))return te.debug(`There were multiple attempts to register component ${St}.`),!1;nt.set(St,Jt);for(const Zt of Ze.values())it(Zt,Jt);return!0}function jt(Jt,St){const Zt=Jt.container.getProvider("heartbeat").getImmediate({optional:!0});return Zt&&Zt.triggerHeartbeat(),Jt.container.getProvider(St)}function Ot(Jt,St,Zt=qe){jt(Jt,St).clearInstance(Zt)}function An(){nt.clear()}const tr=new Ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mn{constructor(St,Zt,gn){this._isDeleted=!1,this._options=Object.assign({},St),this._config=Object.assign({},Zt),this._name=Zt.name,this._automaticDataCollectionEnabled=Zt.automaticDataCollectionEnabled,this._container=gn,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(St){this.checkDestroyed(),this._automaticDataCollectionEnabled=St}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(St){this._isDeleted=St}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}const Xe="9.12.1";function bn(Jt,St={}){let Zt=Jt;"object"!=typeof St&&(St={name:St});const gn=Object.assign({name:qe,automaticDataCollectionEnabled:!1},St),cn=gn.name;if("string"!=typeof cn||!cn)throw tr.create("bad-app-name",{appName:String(cn)});if(Zt||(Zt=(0,Ae.aH)()),!Zt)throw tr.create("no-options");const dn=Ze.get(cn);if(dn){if((0,Ae.vZ)(Zt,dn.options)&&(0,Ae.vZ)(gn,dn.config))return dn;throw tr.create("duplicate-app",{appName:cn})}const Me=new W.H0(cn);for(const Oe of nt.values())Me.addComponent(Oe);const Ce=new Mn(Zt,gn,Me);return Ze.set(cn,Ce),Ce}function Fn(Jt=qe){const St=Ze.get(Jt);if(!St&&Jt===qe)return bn();if(!St)throw tr.create("no-app",{appName:Jt});return St}function re(){return Array.from(Ze.values())}function Qn(Jt){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,u.Z)(function*(Jt){const St=Jt.name;Ze.has(St)&&(Ze.delete(St),yield Promise.all(Jt.container.getProviders().map(Zt=>Zt.delete())),Jt.isDeleted=!0)})).apply(this,arguments)}function Fr(Jt,St,Zt){var gn;let cn=null!==(gn=Ne[Jt])&&void 0!==gn?gn:Jt;Zt&&(cn+=`-${Zt}`);const dn=cn.match(/\s|\//),Me=St.match(/\s|\//);if(dn||Me){const Ce=[`Unable to register library "${cn}" with version "${St}":`];return dn&&Ce.push(`library name "${cn}" contains illegal characters (whitespace or "/")`),dn&&Me&&Ce.push("and"),Me&&Ce.push(`version name "${St}" contains illegal characters (whitespace or "/")`),void te.warn(Ce.join(" "))}mt(new W.wA(`${cn}-version`,()=>({library:cn,version:St}),"VERSION"))}function Ur(Jt,St){if(null!==Jt&&"function"!=typeof Jt)throw tr.create("invalid-log-argument");(0,j.Am)(Jt,St)}function Un(Jt){(0,j.Ub)(Jt)}const Qt="firebase-heartbeat-store";let or=null;function un(){return or||(or=(0,Te.X3)("firebase-heartbeat-database",1,{upgrade:(Jt,St)=>{0===St&&Jt.createObjectStore(Qt)}}).catch(Jt=>{throw tr.create("idb-open",{originalErrorMessage:Jt.message})})),or}function yt(){return(yt=(0,u.Z)(function*(Jt){var St;try{return(yield un()).transaction(Qt).objectStore(Qt).get(nr(Jt))}catch(Zt){if(Zt instanceof Ae.ZR)te.warn(Zt.message);else{const gn=tr.create("idb-get",{originalErrorMessage:null===(St=Zt)||void 0===St?void 0:St.message});te.warn(gn.message)}}})).apply(this,arguments)}function Xn(Jt,St){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,u.Z)(function*(Jt,St){var Zt;try{const cn=(yield un()).transaction(Qt,"readwrite");return yield cn.objectStore(Qt).put(St,nr(Jt)),cn.done}catch(gn){if(gn instanceof Ae.ZR)te.warn(gn.message);else{const cn=tr.create("idb-set",{originalErrorMessage:null===(Zt=gn)||void 0===Zt?void 0:Zt.message});te.warn(cn.message)}}})).apply(this,arguments)}function nr(Jt){return`${Jt.name}!${Jt.options.appId}`}class Qr{constructor(St){this.container=St,this._heartbeatsCache=null;const Zt=this.container.getProvider("app").getImmediate();this._storage=new Vn(Zt),this._heartbeatsCachePromise=this._storage.read().then(gn=>(this._heartbeatsCache=gn,gn))}triggerHeartbeat(){var St=this;return(0,u.Z)(function*(){const gn=St.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),cn=_n();if(null===St._heartbeatsCache&&(St._heartbeatsCache=yield St._heartbeatsCachePromise),St._heartbeatsCache.lastSentHeartbeatDate!==cn&&!St._heartbeatsCache.heartbeats.some(dn=>dn.date===cn))return St._heartbeatsCache.heartbeats.push({date:cn,agent:gn}),St._heartbeatsCache.heartbeats=St._heartbeatsCache.heartbeats.filter(dn=>{const Me=new Date(dn.date).valueOf();return Date.now()-Me<=2592e6}),St._storage.overwrite(St._heartbeatsCache)})()}getHeartbeatsHeader(){var St=this;return(0,u.Z)(function*(){if(null===St._heartbeatsCache&&(yield St._heartbeatsCachePromise),null===St._heartbeatsCache||0===St._heartbeatsCache.heartbeats.length)return"";const Zt=_n(),{heartbeatsToSend:gn,unsentEntries:cn}=function Rr(Jt,St=1024){const Zt=[];let gn=Jt.slice();for(const cn of Jt){const dn=Zt.find(Me=>Me.agent===cn.agent);if(dn){if(dn.dates.push(cn.date),Ar(Zt)>St){dn.dates.pop();break}}else if(Zt.push({agent:cn.agent,dates:[cn.date]}),Ar(Zt)>St){Zt.pop();break}gn=gn.slice(1)}return{heartbeatsToSend:Zt,unsentEntries:gn}}(St._heartbeatsCache.heartbeats),dn=(0,Ae.L)(JSON.stringify({version:2,heartbeats:gn}));return St._heartbeatsCache.lastSentHeartbeatDate=Zt,cn.length>0?(St._heartbeatsCache.heartbeats=cn,yield St._storage.overwrite(St._heartbeatsCache)):(St._heartbeatsCache.heartbeats=[],St._storage.overwrite(St._heartbeatsCache)),dn})()}}function _n(){return(new Date).toISOString().substring(0,10)}class Vn{constructor(St){this.app=St,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,Ae.hl)()&&(0,Ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var St=this;return(0,u.Z)(function*(){return(yield St._canUseIndexedDBPromise)&&(yield function nn(Jt){return yt.apply(this,arguments)}(St.app))||{heartbeats:[]}})()}overwrite(St){var Zt=this;return(0,u.Z)(function*(){var gn;if(yield Zt._canUseIndexedDBPromise){const dn=yield Zt.read();return Xn(Zt.app,{lastSentHeartbeatDate:null!==(gn=St.lastSentHeartbeatDate)&&void 0!==gn?gn:dn.lastSentHeartbeatDate,heartbeats:St.heartbeats})}})()}add(St){var Zt=this;return(0,u.Z)(function*(){var gn;if(yield Zt._canUseIndexedDBPromise){const dn=yield Zt.read();return Xn(Zt.app,{lastSentHeartbeatDate:null!==(gn=St.lastSentHeartbeatDate)&&void 0!==gn?gn:dn.lastSentHeartbeatDate,heartbeats:[...dn.heartbeats,...St.heartbeats]})}})()}}function Ar(Jt){return(0,Ae.L)(JSON.stringify({version:2,heartbeats:Jt})).length}!function Lr(Jt){mt(new W.wA("platform-logger",St=>new ae(St),"PRIVATE")),mt(new W.wA("heartbeat",St=>new Qr(St),"PRIVATE")),Fr(oe,"0.8.2",Jt),Fr(oe,"0.8.2","esm2017"),Fr("fire-js","")}("")},4859:($t,ze,$)=>{"use strict";$.d(ze,{H0:()=>oe,wA:()=>j,zt:()=>Te});var u=$(5861),W=$(2090);class j{constructor(te,se,X){this.name=te,this.instanceFactory=se,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const Ae="[DEFAULT]";class Te{constructor(te,se){this.name=te,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const se=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(se)){const X=new W.BH;if(this.instancesDeferred.set(se,X),this.isInitialized(se)||this.shouldAutoInitialize())try{const ge=this.getOrInitializeService({instanceIdentifier:se});ge&&X.resolve(ge)}catch(ge){}}return this.instancesDeferred.get(se).promise}getImmediate(te){var se;const X=this.normalizeInstanceIdentifier(null==te?void 0:te.identifier),ge=null!==(se=null==te?void 0:te.optional)&&void 0!==se&&se;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Re){if(ge)return null;throw Re}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if(function he(ye){return"EAGER"===ye.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:Ae})}catch(se){}for(const[se,X]of this.instancesDeferred.entries()){const ge=this.normalizeInstanceIdentifier(se);try{const Re=this.getOrInitializeService({instanceIdentifier:ge});X.resolve(Re)}catch(Re){}}}}clearInstance(te=Ae){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,u.Z)(function*(){const se=Array.from(te.instances.values());yield Promise.all([...se.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...se.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=Ae){return this.instances.has(te)}getOptions(te=Ae){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:se={}}=te,X=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ge=this.getOrInitializeService({instanceIdentifier:X,options:se});for(const[Re,$e]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Re)&&$e.resolve(ge);return ge}onInit(te,se){var X;const ge=this.normalizeInstanceIdentifier(se),Re=null!==(X=this.onInitCallbacks.get(ge))&&void 0!==X?X:new Set;Re.add(te),this.onInitCallbacks.set(ge,Re);const $e=this.instances.get(ge);return $e&&te($e,ge),()=>{Re.delete(te)}}invokeOnInitCallbacks(te,se){const X=this.onInitCallbacks.get(se);if(X)for(const ge of X)try{ge(te,se)}catch(Re){}}getOrInitializeService({instanceIdentifier:te,options:se={}}){let X=this.instances.get(te);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=te,ye===Ae?void 0:ye),options:se}),this.instances.set(te,X),this.instancesOptions.set(te,se),this.invokeOnInitCallbacks(X,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,X)}catch(ge){}var ye;return X||null}normalizeInstanceIdentifier(te=Ae){return this.component?this.component.multipleInstances?te:Ae:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const se=this.getProvider(te.name);if(se.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);se.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const se=new Te(te,this);return this.providers.set(te,se),se}getProviders(){return Array.from(this.providers.values())}}},1877:($t,ze,$)=>{"use strict";$.d(ze,{Am:()=>ye,Ub:()=>oe,Yd:()=>he,in:()=>W});const u=[];var W=(()=>{return(te=W||(W={}))[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",W;var te})();const j={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},Ae=W.INFO,Te={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},ae=(te,se,...X)=>{if(se<te.logLevel)return;const ge=(new Date).toISOString(),Re=Te[se];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[Re](`[${ge}]  ${te.name}:`,...X)};class he{constructor(se){this.name=se,this._logLevel=Ae,this._logHandler=ae,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in W))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?j[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...se),this._logHandler(this,W.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...se),this._logHandler(this,W.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,W.INFO,...se),this._logHandler(this,W.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,W.WARN,...se),this._logHandler(this,W.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...se),this._logHandler(this,W.ERROR,...se)}}function oe(te){u.forEach(se=>{se.setLogLevel(te)})}function ye(te,se){for(const X of u){let ge=null;se&&se.level&&(ge=j[se.level]),X.userLogHandler=null===te?null:(Re,$e,...Le)=>{const Ie=Le.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch(Qe){return null}}).filter(_e=>_e).join(" ");$e>=(null!=ge?ge:Re.logLevel)&&te({level:W[$e].toLowerCase(),message:Ie,args:Le,type:Re.name})}}}},8766:($t,ze,$)=>{"use strict";$.d(ze,{Lj:()=>ut,X3:()=>Ke});var u=$(5861);let j,Ae;const he=new WeakMap,oe=new WeakMap,ye=new WeakMap,te=new WeakMap,se=new WeakMap;let Re={get(fe,je,de){if(fe instanceof IDBTransaction){if("done"===je)return oe.get(fe);if("objectStoreNames"===je)return fe.objectStoreNames||ye.get(fe);if("store"===je)return de.objectStoreNames[1]?void 0:de.objectStore(de.objectStoreNames[0])}return _e(fe[je])},set:(fe,je,de)=>(fe[je]=de,!0),has:(fe,je)=>fe instanceof IDBTransaction&&("done"===je||"store"===je)||je in fe};function Ie(fe){return"function"==typeof fe?function Le(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return Ae||(Ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...je){return fe.apply(Qe(this),je),_e(he.get(this))}:function(...je){return _e(fe.apply(Qe(this),je))}:function(je,...de){const ie=fe.call(Qe(this),je,...de);return ye.set(ie,je.sort?je.sort():[je]),_e(ie)}}(fe):(fe instanceof IDBTransaction&&function ge(fe){if(oe.has(fe))return;const je=new Promise((de,ie)=>{const ve=()=>{fe.removeEventListener("complete",be),fe.removeEventListener("error",tt),fe.removeEventListener("abort",tt)},be=()=>{de(),ve()},tt=()=>{ie(fe.error||new DOMException("AbortError","AbortError")),ve()};fe.addEventListener("complete",be),fe.addEventListener("error",tt),fe.addEventListener("abort",tt)});oe.set(fe,je)}(fe),((fe,je)=>je.some(de=>fe instanceof de))(fe,function Te(){return j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Re):fe)}function _e(fe){if(fe instanceof IDBRequest)return function X(fe){const je=new Promise((de,ie)=>{const ve=()=>{fe.removeEventListener("success",be),fe.removeEventListener("error",tt)},be=()=>{de(_e(fe.result)),ve()},tt=()=>{ie(fe.error),ve()};fe.addEventListener("success",be),fe.addEventListener("error",tt)});return je.then(de=>{de instanceof IDBCursor&&he.set(de,fe)}).catch(()=>{}),se.set(je,fe),je}(fe);if(te.has(fe))return te.get(fe);const je=Ie(fe);return je!==fe&&(te.set(fe,je),se.set(je,fe)),je}const Qe=fe=>se.get(fe);function Ke(fe,je,{blocked:de,upgrade:ie,blocking:ve,terminated:be}={}){const tt=indexedDB.open(fe,je),wt=_e(tt);return ie&&tt.addEventListener("upgradeneeded",kt=>{ie(_e(tt.result),kt.oldVersion,kt.newVersion,_e(tt.transaction))}),de&&tt.addEventListener("blocked",()=>de()),wt.then(kt=>{be&&kt.addEventListener("close",()=>be()),ve&&kt.addEventListener("versionchange",()=>ve())}).catch(()=>{}),wt}function ut(fe,{blocked:je}={}){const de=indexedDB.deleteDatabase(fe);return je&&de.addEventListener("blocked",()=>je()),_e(de).then(()=>{})}const ot=["get","getKey","getAll","getAllKeys","count"],Ct=["put","add","delete","clear"],ke=new Map;function et(fe,je){if(!(fe instanceof IDBDatabase)||je in fe||"string"!=typeof je)return;if(ke.get(je))return ke.get(je);const de=je.replace(/FromIndex$/,""),ie=je!==de,ve=Ct.includes(de);if(!(de in(ie?IDBIndex:IDBObjectStore).prototype)||!ve&&!ot.includes(de))return;const be=function(){var tt=(0,u.Z)(function*(wt,...kt){const ht=this.transaction(wt,ve?"readwrite":"readonly");let qe=ht.store;return ie&&(qe=qe.index(kt.shift())),(yield Promise.all([qe[de](...kt),ve&&ht.done]))[0]});return function(kt){return tt.apply(this,arguments)}}();return ke.set(je,be),be}!function $e(fe){Re=fe(Re)}(fe=>_M(yM({},fe),{get:(je,de,ie)=>et(je,de)||fe.get(je,de,ie),has:(je,de)=>!!et(je,de)||fe.has(je,de)}))},5861:($t,ze,$)=>{"use strict";function u(j,Ae,Te,ae,he,oe,ye){try{var te=j[oe](ye),se=te.value}catch(X){return void Te(X)}te.done?Ae(se):Promise.resolve(se).then(ae,he)}function W(j){return function(){var Ae=this,Te=arguments;return new Promise(function(ae,he){var oe=j.apply(Ae,Te);function ye(se){u(oe,ae,he,ye,te,"next",se)}function te(se){u(oe,ae,he,ye,te,"throw",se)}ye(void 0)})}}$.d(ze,{Z:()=>W})}},$t=>{$t($t.s=5284)}]);