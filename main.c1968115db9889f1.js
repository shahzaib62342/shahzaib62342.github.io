var BI=Object.defineProperty,VI=Object.defineProperties,$I=Object.getOwnPropertyDescriptors,ob=Object.getOwnPropertySymbols,UI=Object.prototype.hasOwnProperty,jI=Object.prototype.propertyIsEnumerable,ab=(on,ut,H)=>ut in on?BI(on,ut,{enumerable:!0,configurable:!0,writable:!0,value:H}):on[ut]=H,lb=(on,ut)=>{for(var H in ut||(ut={}))UI.call(ut,H)&&ab(on,H,ut[H]);if(ob)for(var H of ob(ut))jI.call(ut,H)&&ab(on,H,ut[H]);return on},ub=(on,ut)=>VI(on,$I(ut));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(on,ut,H)=>{"use strict";H.d(ut,{nm:()=>Li});var a=H(6351);H(5e3),H(5867);var ht=H(5861),yt=H(9681),kt=H(4859),je=H(2090),rt=H(1877);const Ee=new Map,Z={activated:!1,tokenObservers:[]},te={initialized:!1,enabled:!1};function he(tt){return Ee.get(tt)||Z}function Ie(tt,Ye){Ee.set(tt,Ye)}function Te(){return te}class $e{constructor(Ye,vt,Vt,Ht,Xt){if(this.operation=Ye,this.retryPolicy=vt,this.getWaitDuration=Vt,this.lowerBound=Ht,this.upperBound=Xt,this.pending=null,this.nextErrorWaitInterval=Ht,Ht>Xt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ye){var vt=this;return(0,ht.Z)(function*(){vt.stop();try{vt.pending=new je.BH,yield function Xe(tt){return new Promise(Ye=>{setTimeout(Ye,tt)})}(vt.getNextRun(Ye)),vt.pending.resolve(),yield vt.pending.promise,vt.pending=new je.BH,yield vt.operation(),vt.pending.resolve(),yield vt.pending.promise,vt.process(!0).catch(()=>{})}catch(Vt){vt.retryPolicy(Vt)?vt.process(!1).catch(()=>{}):vt.stop()}})()}getNextRun(Ye){if(Ye)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const vt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),vt}}}const gt=new je.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ut(tt){if(!he(tt).activated)throw gt.create("use-before-activation",{appName:tt.name})}function un(tt,Ye){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,ht.Z)(function*({url:tt,body:Ye},vt){var Vt,Ht;const Xt={"Content-Type":"application/json"},fn=vt.getImmediate({optional:!0});if(fn){const Yr=yield fn.getHeartbeatsHeader();Yr&&(Xt["X-Firebase-Client"]=Yr)}const Ir={method:"POST",body:JSON.stringify(Ye),headers:Xt};let zn,Zi;try{zn=yield fetch(tt,Ir)}catch(Yr){throw gt.create("fetch-network-error",{originalErrorMessage:null===(Vt=Yr)||void 0===Vt?void 0:Vt.message})}if(200!==zn.status)throw gt.create("fetch-status-error",{httpStatus:zn.status});try{Zi=yield zn.json()}catch(Yr){throw gt.create("fetch-parse-error",{originalErrorMessage:null===(Ht=Yr)||void 0===Ht?void 0:Ht.message})}const Ms=Zi.ttl.match(/^([\d.]+)(s)$/);if(!Ms||!Ms[2]||isNaN(Number(Ms[1])))throw gt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Zi.ttl}`});const Is=1e3*Number(Ms[1]),ls=Date.now();return{token:Zi.token,expireTimeMillis:ls+Is,issuedAtTimeMillis:ls}})).apply(this,arguments)}function vr(tt,Ye){const{projectId:vt,appId:Vt,apiKey:Ht}=tt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${vt}/apps/${Vt}:exchangeDebugToken?key=${Ht}`,body:{debug_token:Ye}}}const er="firebase-app-check-store";let Yn=null;function Qr(){return Yn||(Yn=new Promise((tt,Ye)=>{var vt;try{const Vt=indexedDB.open("firebase-app-check-database",1);Vt.onsuccess=Ht=>{tt(Ht.target.result)},Vt.onerror=Ht=>{var Xt;Ye(gt.create("storage-open",{originalErrorMessage:null===(Xt=Ht.target.error)||void 0===Xt?void 0:Xt.message}))},Vt.onupgradeneeded=Ht=>{0===Ht.oldVersion&&Ht.target.result.createObjectStore(er,{keyPath:"compositeKey"})}}catch(Vt){Ye(gt.create("storage-open",{originalErrorMessage:null===(vt=Vt)||void 0===vt?void 0:vt.message}))}}),Yn)}function Tn(){return(Tn=(0,ht.Z)(function*(tt,Ye){const Vt=(yield Qr()).transaction(er,"readwrite"),Xt=Vt.objectStore(er).put({compositeKey:tt,value:Ye});return new Promise((fn,Ir)=>{Xt.onsuccess=zn=>{fn()},Vt.onerror=zn=>{var Zi;Ir(gt.create("storage-set",{originalErrorMessage:null===(Zi=zn.target.error)||void 0===Zi?void 0:Zi.message}))}})})).apply(this,arguments)}const mr=new rt.Yd("@firebase/app-check");function Pn(tt,Ye){return(0,je.hl)()?function nr(tt,Ye){return function ur(tt,Ye){return Tn.apply(this,arguments)}(function gr(tt){return`${tt.options.appId}-${tt.name}`}(tt),Ye)}(tt,Ye).catch(vt=>{mr.warn(`Failed to write token to IndexedDB. Error: ${vt}`)}):Promise.resolve()}function Or(){return Te().enabled}function cr(){return jr.apply(this,arguments)}function jr(){return(jr=(0,ht.Z)(function*(){const tt=Te();if(tt.enabled&&tt.token)return tt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wn={error:"UNKNOWN_ERROR"};function Gt(tt){return je.US.encodeString(JSON.stringify(tt),!1)}function mn(tt){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,ht.Z)(function*(tt,Ye=!1){const vt=tt.app;Ut(vt);const Vt=he(vt);let Xt,Ht=Vt.token;if(Ht&&!pt(Ht)&&(Ie(vt,Object.assign(Object.assign({},Vt),{token:void 0})),Ht=void 0),!Ht){const zn=yield Vt.cachedTokenPromise;zn&&(pt(zn)?Ht=zn:yield Pn(vt,void 0))}if(!Ye&&Ht&&pt(Ht))return{token:Ht.token};let Ir,fn=!1;if(Or()){Vt.exchangeTokenPromise||(Vt.exchangeTokenPromise=un(vr(vt,yield cr()),tt.heartbeatServiceProvider).finally(()=>{Vt.exchangeTokenPromise=void 0}),fn=!0);const zn=yield Vt.exchangeTokenPromise;return yield Pn(vt,zn),Ie(vt,Object.assign(Object.assign({},Vt),{token:zn})),{token:zn.token}}try{Vt.exchangeTokenPromise||(Vt.exchangeTokenPromise=Vt.provider.getToken().finally(()=>{Vt.exchangeTokenPromise=void 0}),fn=!0),Ht=yield Vt.exchangeTokenPromise}catch(zn){"appCheck/throttled"===zn.code?mr.warn(zn.message):mr.error(zn),Xt=zn}return Ht?Xt?Ir=pt(Ht)?{token:Ht.token,internalError:Xt}:et(Xt):(Ir={token:Ht.token},Ie(vt,Object.assign(Object.assign({},Vt),{token:Ht})),yield Pn(vt,Ht)):Ir=et(Xt),fn&&He(vt,Ir),Ir})).apply(this,arguments)}function jn(tt,Ye){const vt=he(tt),Vt=vt.tokenObservers.filter(Ht=>Ht.next!==Ye);0===Vt.length&&vt.tokenRefresher&&vt.tokenRefresher.isRunning()&&vt.tokenRefresher.stop(),Ie(tt,Object.assign(Object.assign({},vt),{tokenObservers:Vt}))}function Ve(tt){const{app:Ye}=tt,vt=he(Ye);let Vt=vt.tokenRefresher;Vt||(Vt=function Pe(tt){const{app:Ye}=tt;return new $e((0,ht.Z)(function*(){let Vt;if(Vt=he(Ye).token?yield mn(tt,!0):yield mn(tt),Vt.error)throw Vt.error;if(Vt.internalError)throw Vt.internalError}),()=>!0,()=>{const vt=he(Ye);if(vt.token){let Vt=vt.token.issuedAtTimeMillis+.5*(vt.token.expireTimeMillis-vt.token.issuedAtTimeMillis)+3e5;return Vt=Math.min(Vt,vt.token.expireTimeMillis-3e5),Math.max(0,Vt-Date.now())}return 0},3e4,96e4)}(tt),Ie(Ye,Object.assign(Object.assign({},vt),{tokenRefresher:Vt}))),!Vt.isRunning()&&vt.isTokenAutoRefreshEnabled&&Vt.start()}function He(tt,Ye){const vt=he(tt).tokenObservers;for(const Vt of vt)try{"EXTERNAL"===Vt.type&&null!=Ye.error?Vt.error(Ye.error):Vt.next(Ye)}catch(Ht){}}function pt(tt){return tt.expireTimeMillis-Date.now()>0}function et(tt){return{token:Gt(wn),error:tt}}class hn{constructor(Ye,vt){this.app=Ye,this.heartbeatServiceProvider=vt}_delete(){const{tokenObservers:Ye}=he(this.app);for(const vt of Ye)jn(this.app,vt.next);return Promise.resolve()}}const _i="app-check-internal";!function Ii(){(0,yt._registerComponent)(new kt.wA("app-check",tt=>function dn(tt,Ye){return new hn(tt,Ye)}(tt.getProvider("app").getImmediate(),tt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((tt,Ye,vt)=>{tt.getProvider(_i).initialize()})),(0,yt._registerComponent)(new kt.wA(_i,tt=>function dr(tt){return{getToken:Ye=>mn(tt,Ye),addTokenListener:Ye=>function xn(tt,Ye,vt,Vt){const{app:Ht}=tt,Xt=he(Ht),fn={next:vt,error:Vt,type:Ye};if(Ie(Ht,Object.assign(Object.assign({},Xt),{tokenObservers:[...Xt.tokenObservers,fn]})),Xt.token&&pt(Xt.token)){const Ir=Xt.token;Promise.resolve().then(()=>{vt({token:Ir.token}),Ve(tt)}).catch(()=>{})}Xt.cachedTokenPromise.then(()=>Ve(tt))}(tt,"INTERNAL",Ye),removeTokenListener:Ye=>jn(tt.app,Ye)}}(tt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yt.registerVersion)("@firebase/app-check","0.5.15")}();class Li{constructor(){return(0,a.vb)("app-check")}}"undefined"!=typeof window&&window},4941:(on,ut,H)=>{"use strict";H.d(ut,{zQ:()=>ze,ww:()=>ot,rT:()=>Te,f7:()=>Ot,L6:()=>he,_Q:()=>Ie,lh:()=>Je,Qv:()=>te,nw:()=>Wt});var a=H(5e3),se=H(8929),z=H(1086),Le=H(6498),Ne=H(5254),fe=H(6787),ve=H(2102),ge=H(7545),be=H(4850),ue=H(341),de=H(2654),oe=H(5279),pe=H(5283);class Ue extends se.xQ{constructor($e=Number.POSITIVE_INFINITY,Xe=Number.POSITIVE_INFINITY,at){super(),this.scheduler=at,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=$e<1?1:$e,this._windowTime=Xe<1?1:Xe,Xe===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow($e){if(!this.isStopped){const Xe=this._events;Xe.push($e),Xe.length>this._bufferSize&&Xe.shift()}super.next($e)}nextTimeWindow($e){this.isStopped||(this._events.push(new Qe(this._getNow(),$e)),this._trimBufferThenGetEvents()),super.next($e)}_subscribe($e){const Xe=this._infiniteTimeWindow,at=Xe?this._events:this._trimBufferThenGetEvents(),gt=this.scheduler,ft=at.length;let Ut;if(this.closed)throw new oe.N;if(this.isStopped||this.hasError?Ut=de.w.EMPTY:(this.observers.push($e),Ut=new pe.W(this,$e)),gt&&$e.add($e=new ve.ht($e,gt)),Xe)for(let Nt=0;Nt<ft&&!$e.closed;Nt++)$e.next(at[Nt]);else for(let Nt=0;Nt<ft&&!$e.closed;Nt++)$e.next(at[Nt].value);return this.hasError?$e.error(this.thrownError):this.isStopped&&$e.complete(),Ut}_getNow(){return(this.scheduler||ue.c).now()}_trimBufferThenGetEvents(){const $e=this._getNow(),Xe=this._bufferSize,at=this._windowTime,gt=this._events,ft=gt.length;let Ut=0;for(;Ut<ft&&!($e-gt[Ut].time<at);)Ut++;return ft>Xe&&(Ut=Math.max(Ut,ft-Xe)),Ut>0&&gt.splice(0,Ut),gt}}class Qe{constructor($e,Xe){this.time=$e,this.value=Xe}}function nt(De,$e,Xe){let at;return at=De&&"object"==typeof De?De:{bufferSize:De,windowTime:$e,refCount:!1,scheduler:Xe},gt=>gt.lift(function Oe({bufferSize:De=Number.POSITIVE_INFINITY,windowTime:$e=Number.POSITIVE_INFINITY,refCount:Xe,scheduler:at}){let gt,Ut,ft=0,Nt=!1,cn=!1;return function(Jn){let yn;ft++,!gt||Nt?(Nt=!1,gt=new Ue(De,$e,at),yn=gt.subscribe(this),Ut=Jn.subscribe({next(En){gt.next(En)},error(En){Nt=!0,gt.error(En)},complete(){cn=!0,Ut=void 0,gt.complete()}}),cn&&(Ut=void 0)):yn=gt.subscribe(this),this.add(()=>{ft--,yn.unsubscribe(),yn=void 0,Ut&&!cn&&Xe&&0===ft&&(Ut.unsubscribe(),Ut=void 0,gt=void 0)})}}(at))}var we=H(7224);function dt(De,$e){return $e?(0,ge.w)(()=>De,$e):(0,ge.w)(()=>De)}var st=H(8915),ht=H(2198),yt=H(6351),kt=H(2011),je=H(9808),rt=H(440),Ee=H(127);const te=new a.OlP("angularfire2.auth.use-emulator"),he=new a.OlP("angularfire2.auth.settings"),Ie=new a.OlP("angularfire2.auth.tenant-id"),Te=new a.OlP("angularfire2.auth.langugage-code"),Je=new a.OlP("angularfire2.auth.use-device-language"),Ot=new a.OlP("angularfire.auth.persistence"),Wt=(De,$e,Xe,at,gt,ft,Ut,Nt)=>(0,kt.cc)(`${De.name}.auth`,"AngularFireAuth",De.name,()=>{const cn=$e.runOutsideAngular(()=>De.auth());if(Xe&&cn.useEmulator(...Xe),at&&(cn.tenantId=at),cn.languageCode=gt,ft&&cn.useDeviceLanguage(),Ut)for(const[un,Jn]of Object.entries(Ut))cn.settings[un]=Jn;return Nt&&cn.setPersistence(Nt),cn},[Xe,at,gt,ft,Ut,Nt]);let ze=(()=>{class De{constructor(Xe,at,gt,ft,Ut,Nt,cn,un,Jn,yn,En,vr){const Tr=new se.xQ,Wr=(0,z.of)(void 0).pipe((0,ve.QV)(Ut.outsideAngular),(0,ge.w)(()=>ft.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,9545)))),(0,be.U)(()=>(0,kt.on)(Xe,ft,at)),(0,be.U)(er=>Wt(er,ft,Nt,un,Jn,yn,cn,En)),nt({bufferSize:1,refCount:!1}));if((0,je.PM)(gt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,z.of)(null);else{Wr.pipe((0,we.P)()).subscribe();const qt=Wr.pipe((0,ge.w)(Un=>Un.getRedirectResult().then(nr=>nr,()=>null)),yt.iC,nt({bufferSize:1,refCount:!1})),Yn=Wr.pipe((0,ge.w)(Un=>new Le.y(nr=>({unsubscribe:ft.runOutsideAngular(()=>Un.onAuthStateChanged(Nr=>nr.next(Nr),Nr=>nr.error(Nr),()=>nr.complete()))})))),Qr=Wr.pipe((0,ge.w)(Un=>new Le.y(nr=>({unsubscribe:ft.runOutsideAngular(()=>Un.onIdTokenChanged(Nr=>nr.next(Nr),Nr=>nr.error(Nr),()=>nr.complete()))}))));this.authState=qt.pipe(dt(Yn),(0,st.R)(Ut.outsideAngular),(0,ve.QV)(Ut.insideAngular)),this.user=qt.pipe(dt(Qr),(0,st.R)(Ut.outsideAngular),(0,ve.QV)(Ut.insideAngular)),this.idToken=this.user.pipe((0,ge.w)(Un=>Un?(0,Ne.D)(Un.getIdToken()):(0,z.of)(null))),this.idTokenResult=this.user.pipe((0,ge.w)(Un=>Un?(0,Ne.D)(Un.getIdTokenResult()):(0,z.of)(null))),this.credential=(0,fe.T)(qt,Tr,this.authState.pipe((0,ht.h)(Un=>!Un))).pipe((0,be.U)(Un=>null!=Un&&Un.user?Un:null),(0,st.R)(Ut.outsideAngular),(0,ve.QV)(Ut.insideAngular))}return(0,kt.pX)(this,Wr,ft,{spy:{apply:(er,qt,Yn)=>{(er.startsWith("signIn")||er.startsWith("createUser"))&&Yn.then(Qr=>Tr.next(Qr))}}})}}return De.\u0275fac=function(Xe){return new(Xe||De)(a.LFG(kt.Dh),a.LFG(kt.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(yt.HU),a.LFG(te,8),a.LFG(he,8),a.LFG(Ie,8),a.LFG(Te,8),a.LFG(Je,8),a.LFG(Ot,8),a.LFG(rt.nm,8))},De.\u0275prov=a.Yz7({token:De,factory:De.\u0275fac,providedIn:"any"}),De})(),ot=(()=>{class De{constructor(){Ee.Z.registerVersion("angularfire",yt.q4.full,"auth-compat")}}return De.\u0275fac=function(Xe){return new(Xe||De)},De.\u0275mod=a.oAB({type:De}),De.\u0275inj=a.cJS({providers:[ze]}),De})()},791:(on,ut,H)=>{"use strict";H.d(ut,{KQ:()=>ac,JS:()=>Cf});var a=H(5e3),se=H(353),z=H(6498),Le=H(1086),Ne=H(6787),fe=H(4850),ve=H(2474),ge=H(7545),be=H(2014),ue=H(5778),de=H(826),oe=H(448);class Ue{constructor(u,c){this.observables=u,this.project=c}call(u,c){return c.subscribe(new Qe(u,this.observables,this.project))}}class Qe extends de.L{constructor(u,c,_){super(u),this.observables=c,this.project=_,this.toRespond=[];const S=c.length;this.values=new Array(S);for(let F=0;F<S;F++)this.toRespond.push(F);for(let F=0;F<S;F++)this.add((0,oe.D)(this,c[F],void 0,F))}notifyNext(u,c,_){this.values[_]=c;const S=this.toRespond;if(S.length>0){const F=S.indexOf(_);-1!==F&&S.splice(F,1)}}notifyComplete(){}_next(u){if(0===this.toRespond.length){const c=[u,...this.values];this.project?this._tryProject(c):this.destination.next(c)}}_tryProject(u){let c;try{c=this.project.apply(this,u)}catch(_){return void this.destination.error(_)}this.destination.next(c)}}var nt=H(3489);class we{constructor(u){this.predicate=u}call(u,c){return c.subscribe(new dt(u,this.predicate))}}class dt extends nt.L{constructor(u,c){super(u),this.predicate=c,this.skipping=!0,this.index=0}_next(u){const c=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||c.next(u)}tryCallPredicate(u){try{const c=this.predicate(u,this.index++);this.skipping=Boolean(c)}catch(c){this.destination.error(c)}}}var st=H(6351),ht=H(2011),kt=(H(9545),H(3942)),je=H(4859),rt=H(5861),Ee=H(9681),Z=H(2090),te=H(1877);const he="@firebase/database";let Te="";function Je(f){Te=f}class Ot{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,Z.Wl)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,Z.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class Wt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,Z.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const ze=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const u=window[f];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Ot(u)}}catch(u){}return new Wt},ot=ze("localStorage"),De=ze("sessionStorage"),$e=new te.Yd("@firebase/database"),Xe=function(){let f=1;return function(){return f++}}(),at=function(f){const u=(0,Z.dS)(f),c=new Z.gQ;c.update(u);const _=c.digest();return Z.US.encodeByteArray(_)},gt=function(...f){let u="";for(let c=0;c<f.length;c++){const _=f[c];Array.isArray(_)||_&&"object"==typeof _&&"number"==typeof _.length?u+=gt.apply(null,_):u+="object"==typeof _?(0,Z.Wl)(_):_,u+=" "}return u};let ft=null,Ut=!0;const Nt=function(f,u){(0,Z.hu)(!u||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?($e.logLevel=te.in.VERBOSE,ft=$e.log.bind($e),u&&De.set("logging_enabled",!0)):"function"==typeof f?ft=f:(ft=null,De.remove("logging_enabled"))},cn=function(...f){if(!0===Ut&&(Ut=!1,null===ft&&!0===De.get("logging_enabled")&&Nt(!0)),ft){const u=gt.apply(null,f);ft(u)}},un=function(f){return function(...u){cn(f,...u)}},Jn=function(...f){const u="FIREBASE INTERNAL ERROR: "+gt(...f);$e.error(u)},yn=function(...f){const u=`FIREBASE FATAL ERROR: ${gt(...f)}`;throw $e.error(u),new Error(u)},En=function(...f){const u="FIREBASE WARNING: "+gt(...f);$e.warn(u)},Tr=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},er="[MIN_NAME]",qt="[MAX_NAME]",Yn=function(f,u){if(f===u)return 0;if(f===er||u===qt)return-1;if(u===er||f===qt)return 1;{const c=Lr(f),_=Lr(u);return null!==c?null!==_?c-_==0?f.length-u.length:c-_:-1:null!==_?1:f<u?-1:1}},Qr=function(f,u){return f===u?0:f<u?-1:1},Un=function(f,u){if(u&&f in u)return u[f];throw new Error("Missing required key ("+f+") in object: "+(0,Z.Wl)(u))},nr=function(f){if("object"!=typeof f||null===f)return(0,Z.Wl)(f);const u=[];for(const _ in f)u.push(_);u.sort();let c="{";for(let _=0;_<u.length;_++)0!==_&&(c+=","),c+=(0,Z.Wl)(u[_]),c+=":",c+=nr(f[u[_]]);return c+="}",c},Nr=function(f,u){const c=f.length;if(c<=u)return[f];const _=[];for(let S=0;S<c;S+=u)_.push(f.substring(S,S+u>c?c:S+u));return _};function an(f,u){for(const c in f)f.hasOwnProperty(c)&&u(c,f[c])}const ur=function(f){(0,Z.hu)(!Tr(f),"Invalid JSON number");const _=1023;let S,F,W,ae,Re;0===f?(F=0,W=0,S=1/f==-1/0?1:0):(S=f<0,(f=Math.abs(f))>=Math.pow(2,1-_)?(ae=Math.min(Math.floor(Math.log(f)/Math.LN2),_),F=ae+_,W=Math.round(f*Math.pow(2,52-ae)-Math.pow(2,52))):(F=0,W=Math.round(f/Math.pow(2,-1074))));const Ge=[];for(Re=52;Re;Re-=1)Ge.push(W%2?1:0),W=Math.floor(W/2);for(Re=11;Re;Re-=1)Ge.push(F%2?1:0),F=Math.floor(F/2);Ge.push(S?1:0),Ge.reverse();const $t=Ge.join("");let Bt="";for(Re=0;Re<64;Re+=8){let Kt=parseInt($t.substr(Re,8),2).toString(16);1===Kt.length&&(Kt="0"+Kt),Bt+=Kt}return Bt.toLowerCase()},gr=new RegExp("^-?(0*)\\d{1,10}$"),mr=-2147483648,wr=2147483647,Lr=function(f){if(gr.test(f)){const u=Number(f);if(u>=mr&&u<=wr)return u}return null},Pn=function(f){try{f()}catch(u){setTimeout(()=>{throw En("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},On=function(f,u){const c=setTimeout(f,u);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class Or{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(_=>this.appCheck=_)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,_)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,_):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(_=>_.addTokenListener(u))}notifyForInvalidToken(){En(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cr{constructor(u,c,_){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=_,this.auth_=null,this.auth_=_.getImmediate({optional:!0}),this.auth_||_.onInit(S=>this.auth_=S)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,_)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,_):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',En(u)}}let jr=(()=>{class f{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const xn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,He="websocket",pt="long_polling";class et{constructor(u,c,_,S,F=!1,W="",ae=!1){this.secure=c,this.namespace=_,this.webSocketOnly=S,this.nodeAdmin=F,this.persistenceKey=W,this.includeNamespaceInQueryParams=ae,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ot.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&ot.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function dn(f,u,c){let _;if((0,Z.hu)("string"==typeof u,"typeof type must == string"),(0,Z.hu)("object"==typeof c,"typeof params must == object"),u===He)_=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(u!==pt)throw new Error("Unknown connection type: "+u);_=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function hn(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(c.ns=f.namespace);const S=[];return an(c,(F,W)=>{S.push(F+"="+W)}),_+S.join("&")}class dr{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,Z.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,Z.p$)(this.counters_)}}const Er={},Sr={};function mt(f){const u=f.toString();return Er[u]||(Er[u]=new dr),Er[u]}class Me{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const _=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let S=0;S<_.length;++S)_[S]&&Pn(()=>{this.onMessage_(_[S])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ui{constructor(u,c,_,S,F,W,ae){this.connId=u,this.repoInfo=c,this.applicationId=_,this.appCheckToken=S,this.authToken=F,this.transportSessionId=W,this.lastSessionId=ae,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=un(u),this.stats_=mt(c),this.urlFn=Re=>(this.appCheckToken&&(Re.ac=this.appCheckToken),dn(c,pt,Re))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Me(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,Z.Yr)()||"complete"===document.readyState)f();else{let u=!1;const c=function(){document.body?u||(u=!0,f()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gi((...F)=>{const[W,ae,Re,Ge,$t]=F;if(this.incrementIncomingBytes_(F),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===W)this.id=ae,this.password=Re;else{if("close"!==W)throw new Error("Unrecognized command received: "+W);ae?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ae,()=>{this.onClosed_()})):this.onClosed_()}},(...F)=>{const[W,ae]=F;this.incrementIncomingBytes_(F),this.myPacketOrderer.handleResponse(W,ae)},()=>{this.onClosed_()},this.urlFn);const _={start:"t"};_.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(_.cb=this.scriptTagHolder.uniqueCallbackIdentifier),_.v="5",this.transportSessionId&&(_.s=this.transportSessionId),this.lastSessionId&&(_.ls=this.lastSessionId),this.applicationId&&(_.p=this.applicationId),this.appCheckToken&&(_.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&xn.test(location.hostname)&&(_.r="f");const S=this.urlFn(_);this.log_("Connecting via long-poll to "+S),this.scriptTagHolder.addTag(S,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ui.forceAllow_=!0}static forceDisallow(){ui.forceDisallow_=!0}static isAvailable(){return!((0,Z.Yr)()||!ui.forceAllow_&&(ui.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,Z.Wl)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const _=(0,Z.h$)(c),S=Nr(_,1840);for(let F=0;F<S.length;F++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,S.length,S[F]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,Z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const _={dframe:"t"};_.id=u,_.pw=c,this.myDisconnFrame.src=this.urlFn(_),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,Z.Wl)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Gi{constructor(u,c,_,S){if(this.onDisconnect=_,this.urlFn=S,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Z.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Xe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Gi.createIFrame_();let F="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(F='<script>document.domain="'+document.domain+'";<\/script>');const W="<html><body>"+F+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(W),this.myIFrame.doc.close()}catch(ae){cn("frame writing exception"),ae.stack&&cn(ae.stack),cn(ae)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||cn("No IE domain setting required")}catch(c){const _=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+_+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),_="",S=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+_.length<=1870;){const W=this.pendingSegs.shift();_=_+"&seg"+S+"="+W.seg+"&ts"+S+"="+W.ts+"&d"+S+"="+W.d,S++}return c+=_,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,_){this.pendingSegs.push({seg:u,ts:c,d:_}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const _=()=>{this.outstandingRequests.delete(c),this.newRequest_()},S=setTimeout(_,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(S),_()})}addTag(u,c){(0,Z.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const _=this.myIFrame.doc.createElement("script");_.type="text/javascript",_.async=!0,_.src=u,_.onload=_.onreadystatechange=function(){const S=_.readyState;(!S||"loaded"===S||"complete"===S)&&(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),c())},_.onerror=()=>{cn("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(_)}catch(_){}},Math.floor(1))}}let Ii=null;"undefined"!=typeof MozWebSocket?Ii=MozWebSocket:"undefined"!=typeof WebSocket&&(Ii=WebSocket);let fi=(()=>{class f{constructor(c,_,S,F,W,ae,Re){this.connId=c,this.applicationId=S,this.appCheckToken=F,this.authToken=W,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=un(this.connId),this.stats_=mt(_),this.connURL=f.connectionURL_(_,ae,Re,F,S),this.nodeAdmin=_.nodeAdmin}static connectionURL_(c,_,S,F,W){const ae={v:"5"};return!(0,Z.Yr)()&&"undefined"!=typeof location&&location.hostname&&xn.test(location.hostname)&&(ae.r="f"),_&&(ae.s=_),S&&(ae.ls=S),F&&(ae.ac=F),W&&(ae.p=W),dn(c,He,ae)}open(c,_){this.onDisconnect=_,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ot.set("previous_websocket_failure",!0);try{let S;if((0,Z.Yr)()){S={headers:{"User-Agent":`Firebase/5/${Te}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(S.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(S.headers["X-Firebase-AppCheck"]=this.appCheckToken);const W=process.env,ae=0===this.connURL.indexOf("wss://")?W.HTTPS_PROXY||W.https_proxy:W.HTTP_PROXY||W.http_proxy;ae&&(S.proxy={origin:ae})}this.mySock=new Ii(this.connURL,[],S)}catch(S){this.log_("Error instantiating WebSocket.");const F=S.message||S.data;return F&&this.log_(F),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=S=>{this.handleIncomingFrame(S)},this.mySock.onerror=S=>{this.log_("WebSocket error.  Closing connection.");const F=S.message||S.data;F&&this.log_(F),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const S=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);S&&S.length>1&&parseFloat(S[1])<4.4&&(c=!0)}return!c&&null!==Ii&&!f.forceDisallow_}static previouslyFailed(){return ot.isInMemoryStorage||!0===ot.get("previous_websocket_failure")}markConnectionHealthy(){ot.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const _=this.frames.join("");this.frames=null;const S=(0,Z.cI)(_);this.onMessage(S)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,Z.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const _=Number(c);if(!isNaN(_))return this.handleNewFrameCount_(_),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const _=c.data;if(this.bytesReceived+=_.length,this.stats_.incrementCounter("bytes_received",_.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(_);else{const S=this.extractFrameCount_(_);null!==S&&this.appendFrame_(S)}}send(c){this.resetKeepAlive();const _=(0,Z.Wl)(c);this.bytesSent+=_.length,this.stats_.incrementCounter("bytes_sent",_.length);const S=Nr(_,16384);S.length>1&&this.sendString_(String(S.length));for(let F=0;F<S.length;F++)this.sendString_(S[F])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(_){this.log_("Exception thrown from WebSocket.send():",_.message||_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),Ti=(()=>{class f{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[ui,fi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const _=fi&&fi.isAvailable();let S=_&&!fi.previouslyFailed();if(c.webSocketOnly&&(_||En("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),S=!0),S)this.transports_=[fi];else{const F=this.transports_=[];for(const W of f.ALL_TRANSPORTS)W&&W.isAvailable()&&F.push(W);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class zr{constructor(u,c,_,S,F,W,ae,Re,Ge,$t){this.id=u,this.repoInfo_=c,this.applicationId_=_,this.appCheckToken_=S,this.authToken_=F,this.onMessage_=W,this.onReady_=ae,this.onDisconnect_=Re,this.onKill_=Ge,this.lastSessionId=$t,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=un("c:"+this.id+":"),this.transportManager_=new Ti(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),_=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,_)},Math.floor(0));const S=u.healthyTimeout||0;S>0&&(this.healthyTimeout_=On(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(S)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=Un("t",u),_=Un("d",u);if("c"===c)this.onSecondaryControl_(_);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(_)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=Un("t",u),_=Un("d",u);"c"===c?this.onControl_(_):"d"===c&&this.onDataMessage_(_)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=Un("t",u);if("d"in u){const _=u.d;if("h"===c)this.onHandshake_(_);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let S=0;S<this.pendingDataMessages.length;++S)this.onDataMessage_(this.pendingDataMessages[S]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(_):"r"===c?this.onReset_(_):"e"===c?Jn("Server Error: "+_):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jn("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,_=u.v,S=u.h;this.sessionId=u.s,this.repoInfo_.host=S,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==_&&En("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),_=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,_),On(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):On(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ot.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qr{put(u,c,_,S){}merge(u,c,_,S){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,_){}onDisconnectMerge(u,c,_){}onDisconnectCancel(u,c){}reportStats(u){}}class tt{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,Z.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const _=[...this.listeners_[u]];for(let S=0;S<_.length;S++)_[S].callback.apply(_[S].context,c)}}on(u,c,_){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:_});const S=this.getInitialEvent(u);S&&c.apply(_,S)}off(u,c,_){this.validateEventType_(u);const S=this.listeners_[u]||[];for(let F=0;F<S.length;F++)if(S[F].callback===c&&(!_||_===S[F].context))return void S.splice(F,1)}validateEventType_(u){(0,Z.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class Ye extends tt{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ye}getInitialEvent(u){return(0,Z.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Ht{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let _=0;for(let S=0;S<this.pieces_.length;S++)this.pieces_[S].length>0&&(this.pieces_[_]=this.pieces_[S],_++);this.pieces_.length=_,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function Xt(){return new Ht("")}function fn(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function Ir(f){return f.pieces_.length-f.pieceNum_}function zn(f){let u=f.pieceNum_;return u<f.pieces_.length&&u++,new Ht(f.pieces_,u)}function Zi(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Is(f,u=0){return f.pieces_.slice(f.pieceNum_+u)}function ls(f){if(f.pieceNum_>=f.pieces_.length)return null;const u=[];for(let c=f.pieceNum_;c<f.pieces_.length-1;c++)u.push(f.pieces_[c]);return new Ht(u,0)}function Yr(f,u){const c=[];for(let _=f.pieceNum_;_<f.pieces_.length;_++)c.push(f.pieces_[_]);if(u instanceof Ht)for(let _=u.pieceNum_;_<u.pieces_.length;_++)c.push(u.pieces_[_]);else{const _=u.split("/");for(let S=0;S<_.length;S++)_[S].length>0&&c.push(_[S])}return new Ht(c,0)}function Ar(f){return f.pieceNum_>=f.pieces_.length}function vi(f,u){const c=fn(f),_=fn(u);if(null===c)return u;if(c===_)return vi(zn(f),zn(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+f+")")}function So(f,u){const c=Is(f,0),_=Is(u,0);for(let S=0;S<c.length&&S<_.length;S++){const F=Yn(c[S],_[S]);if(0!==F)return F}return c.length===_.length?0:c.length<_.length?-1:1}function Qi(f,u){if(Ir(f)!==Ir(u))return!1;for(let c=f.pieceNum_,_=u.pieceNum_;c<=f.pieces_.length;c++,_++)if(f.pieces_[c]!==u.pieces_[_])return!1;return!0}function Si(f,u){let c=f.pieceNum_,_=u.pieceNum_;if(Ir(f)>Ir(u))return!1;for(;c<f.pieces_.length;){if(f.pieces_[c]!==u.pieces_[_])return!1;++c,++_}return!0}class Bi{constructor(u,c){this.errorPrefix_=c,this.parts_=Is(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let _=0;_<this.parts_.length;_++)this.byteLength_+=(0,Z.ug)(this.parts_[_]);Gs(this)}}function Gs(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Xi(f))}function Xi(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class Ji extends tt{constructor(){let u,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",u="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const _=!document[u];_!==this.visible_&&(this.visible_=_,this.trigger("visible",_))},!1)}static getInstance(){return new Ji}getInitialEvent(u){return(0,Z.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const Wi=1e3;let Ds,Mi=(()=>{class f extends qr{constructor(c,_,S,F,W,ae,Re,Ge){if(super(),this.repoInfo_=c,this.applicationId_=_,this.onDataUpdate_=S,this.onConnectStatus_=F,this.onServerInfoUpdate_=W,this.authTokenProvider_=ae,this.appCheckTokenProvider_=Re,this.authOverride_=Ge,this.id=f.nextPersistentConnectionId_++,this.log_=un("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ge&&!(0,Z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ji.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Ye.getInstance().on("online",this.onOnline_,this)}sendRequest(c,_,S){const F=++this.requestNumber_,W={r:F,a:c,b:_};this.log_((0,Z.Wl)(W)),(0,Z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(W),S&&(this.requestCBHash_[F]=S)}get(c){this.initConnection_();const _=new Z.BH,S={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:S,onComplete:ae=>{const Re=ae.d;"ok"===ae.s?_.resolve(Re):_.reject(Re)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),_.promise}listen(c,_,S,F){this.initConnection_();const W=c._queryIdentifier,ae=c._path.toString();this.log_("Listen called for "+ae+" "+W),this.listens.has(ae)||this.listens.set(ae,new Map),(0,Z.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Z.hu)(!this.listens.get(ae).has(W),"listen() called twice for same path/queryId.");const Re={onComplete:F,hashFn:_,query:c,tag:S};this.listens.get(ae).set(W,Re),this.connected_&&this.sendListen_(Re)}sendGet_(c){const _=this.outstandingGets_[c];this.sendRequest("g",_.request,S=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),_.onComplete&&_.onComplete(S)})}sendListen_(c){const _=c.query,S=_._path.toString(),F=_._queryIdentifier;this.log_("Listen on "+S+" for "+F);const W={p:S};c.tag&&(W.q=_._queryObject,W.t=c.tag),W.h=c.hashFn(),this.sendRequest("q",W,Re=>{const Ge=Re.d,$t=Re.s;f.warnOnListenWarnings_(Ge,_),(this.listens.get(S)&&this.listens.get(S).get(F))===c&&(this.log_("listen response",Re),"ok"!==$t&&this.removeListen_(S,F),c.onComplete&&c.onComplete($t,Ge))})}static warnOnListenWarnings_(c,_){if(c&&"object"==typeof c&&(0,Z.r3)(c,"w")){const S=(0,Z.DV)(c,"w");if(Array.isArray(S)&&~S.indexOf("no_index")){const F='".indexOn": "'+_._queryParams.getIndex().toString()+'"',W=_._path.toString();En(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${F} at ${W} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,Z.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,_=(0,Z.w9)(c)?"auth":"gauth",S={cred:c};null===this.authOverride_?S.noauth=!0:"object"==typeof this.authOverride_&&(S.authvar=this.authOverride_),this.sendRequest(_,S,F=>{const W=F.s,ae=F.d||"error";this.authToken_===c&&("ok"===W?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(W,ae))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const _=c.s,S=c.d||"error";"ok"===_?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(_,S)})}unlisten(c,_){const S=c._path.toString(),F=c._queryIdentifier;this.log_("Unlisten called for "+S+" "+F),(0,Z.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(S,F)&&this.connected_&&this.sendUnlisten_(S,F,c._queryObject,_)}sendUnlisten_(c,_,S,F){this.log_("Unlisten on "+c+" for "+_);const W={p:c};F&&(W.q=S,W.t=F),this.sendRequest("n",W)}onDisconnectPut(c,_,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,_,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:_,onComplete:S})}onDisconnectMerge(c,_,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,_,S):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:_,onComplete:S})}onDisconnectCancel(c,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,_):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:_})}sendOnDisconnect_(c,_,S,F){const W={p:_,d:S};this.log_("onDisconnect "+c,W),this.sendRequest(c,W,ae=>{F&&setTimeout(()=>{F(ae.s,ae.d)},Math.floor(0))})}put(c,_,S,F){this.putInternal("p",c,_,S,F)}merge(c,_,S,F){this.putInternal("m",c,_,S,F)}putInternal(c,_,S,F,W){this.initConnection_();const ae={p:_,d:S};void 0!==W&&(ae.h=W),this.outstandingPuts_.push({action:c,request:ae,onComplete:F}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+_)}sendPut_(c){const _=this.outstandingPuts_[c].action,S=this.outstandingPuts_[c].request,F=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(_,S,W=>{this.log_(_+" response",W),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),F&&F(W.s,W.d)})}reportStats(c){if(this.connected_){const _={c};this.log_("reportStats",_),this.sendRequest("s",_,S=>{"ok"!==S.s&&this.log_("reportStats","Error sending stats: "+S.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,Z.Wl)(c));const _=c.r,S=this.requestCBHash_[_];S&&(delete this.requestCBHash_[_],S(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,_){this.log_("handleServerMessage",c,_),"d"===c?this.onDataUpdate_(_.p,_.d,!1,_.t):"m"===c?this.onDataUpdate_(_.p,_.d,!0,_.t):"c"===c?this.onListenRevoked_(_.p,_.q):"ac"===c?this.onAuthRevoked_(_.s,_.d):"apc"===c?this.onAppCheckRevoked_(_.s,_.d):"sd"===c?this.onSecurityDebugPacket_(_):Jn("Unrecognized action received from server: "+(0,Z.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,_){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=_,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,Z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Wi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let _=Math.max(0,this.reconnectDelay_-c);_=Math.random()*_,this.log_("Trying to reconnect in "+_+"ms"),this.scheduleConnect_(_),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,rt.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const _=c.onDataMessage_.bind(c),S=c.onReady_.bind(c),F=c.onRealtimeDisconnect_.bind(c),W=c.id+":"+f.nextConnectionId_++,ae=c.lastSessionId;let Re=!1,Ge=null;const $t=function(){Ge?Ge.close():(Re=!0,F())};c.realtime_={close:$t,sendRequest:function(kn){(0,Z.hu)(Ge,"sendRequest call when we're not connected not allowed."),Ge.sendRequest(kn)}};const Kt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[kn,sr]=yield Promise.all([c.authTokenProvider_.getToken(Kt),c.appCheckTokenProvider_.getToken(Kt)]);Re?cn("getToken() completed but was canceled"):(cn("getToken() completed. Creating connection."),c.authToken_=kn&&kn.accessToken,c.appCheckToken_=sr&&sr.token,Ge=new zr(W,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,_,S,F,xi=>{En(xi+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},ae))}catch(kn){c.log_("Failed to get token: "+kn),Re||(c.repoInfo_.nodeAdmin&&En(kn),$t())}}})()}interrupt(c){cn("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){cn("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,Z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const _=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:_})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const _=this.outstandingPuts_[c];_&&"h"in _.request&&_.queued&&(_.onComplete&&_.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,_){let S;S=_?_.map(W=>nr(W)).join("$"):"default";const F=this.removeListen_(c,S);F&&F.onComplete&&F.onComplete("permission_denied")}removeListen_(c,_){const S=new Ht(c).toString();let F;if(this.listens.has(S)){const W=this.listens.get(S);F=W.get(_),W.delete(_),0===W.size&&this.listens.delete(S)}else F=void 0;return F}onAuthRevoked_(c,_){cn("Auth token revoked: "+c+"/"+_),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,_){cn("App check token revoked: "+c+"/"+_),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const _ of c.values())this.sendListen_(_);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let _="js";(0,Z.Yr)()&&(_=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+_+"."+Te.replace(/\./g,"-")]=1,(0,Z.uI)()?c["framework.cordova"]=1:(0,Z.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Ye.getInstance().currentlyOnline();return(0,Z.xb)(this.interruptReasons_)&&c}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class ar{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new ar(u,c)}}class Kr{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const _=new ar(er,u),S=new ar(er,c);return 0!==this.compare(_,S)}minPost(){return ar.MIN}}class Rs extends Kr{static get __EMPTY_NODE(){return Ds}static set __EMPTY_NODE(u){Ds=u}compare(u,c){return Yn(u.name,c.name)}isDefinedOn(u){throw(0,Z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return ar.MIN}maxPost(){return new ar(qt,Ds)}makePost(u,c){return(0,Z.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new ar(u,Ds)}toString(){return".key"}}const ci=new Rs;class Pi{constructor(u,c,_,S,F=null){this.isReverse_=S,this.resultGenerator_=F,this.nodeStack_=[];let W=1;for(;!u.isEmpty();)if(W=c?_(u.key,c):1,S&&(W*=-1),W<0)u=this.isReverse_?u.left:u.right;else{if(0===W){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let hs,Vi=(()=>{class f{constructor(c,_,S,F,W){this.key=c,this.value=_,this.color=null!=S?S:f.RED,this.left=null!=F?F:pi.EMPTY_NODE,this.right=null!=W?W:pi.EMPTY_NODE}copy(c,_,S,F,W){return new f(null!=c?c:this.key,null!=_?_:this.value,null!=S?S:this.color,null!=F?F:this.left,null!=W?W:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,_,S){let F=this;const W=S(c,F.key);return F=W<0?F.copy(null,null,null,F.left.insert(c,_,S),null):0===W?F.copy(null,_,null,null,null):F.copy(null,null,null,null,F.right.insert(c,_,S)),F.fixUp_()}removeMin_(){if(this.left.isEmpty())return pi.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,_){let S,F;if(S=this,_(c,S.key)<0)!S.left.isEmpty()&&!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),S=S.copy(null,null,null,S.left.remove(c,_),null);else{if(S.left.isRed_()&&(S=S.rotateRight_()),!S.right.isEmpty()&&!S.right.isRed_()&&!S.right.left.isRed_()&&(S=S.moveRedRight_()),0===_(c,S.key)){if(S.right.isEmpty())return pi.EMPTY_NODE;F=S.right.min_(),S=S.copy(F.key,F.value,null,null,S.right.removeMin_())}S=S.copy(null,null,null,null,S.right.remove(c,_))}return S.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),_=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,_)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class pi{constructor(u,c=pi.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new pi(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,Vi.BLACK,null,null))}remove(u){return new pi(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,Vi.BLACK,null,null))}get(u){let c,_=this.root_;for(;!_.isEmpty();){if(c=this.comparator_(u,_.key),0===c)return _.value;c<0?_=_.left:c>0&&(_=_.right)}return null}getPredecessorKey(u){let c,_=this.root_,S=null;for(;!_.isEmpty();){if(c=this.comparator_(u,_.key),0===c){if(_.left.isEmpty())return S?S.key:null;for(_=_.left;!_.right.isEmpty();)_=_.right;return _.key}c<0?_=_.left:c>0&&(S=_,_=_.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Pi(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new Pi(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new Pi(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new Pi(this.root_,null,this.comparator_,!0,u)}}function Cr(f,u){return Yn(f.name,u.name)}function Ts(f,u){return Yn(f,u)}pi.EMPTY_NODE=new class Xs{copy(u,c,_,S,F){return this}insert(u,c,_){return new Vi(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Fr=function(f){return"number"==typeof f?"number:"+ur(f):"string:"+f},Ws=function(f){if(f.isLeafNode()){const u=f.val();(0,Z.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,Z.r3)(u,".sv"),"Priority must be a string or number.")}else(0,Z.hu)(f===hs||f.isEmpty(),"priority of unexpected type.");(0,Z.hu)(f===hs||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xr,Js,go,Hn=(()=>{class f{constructor(c,_=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=_,this.lazyHash_=null,(0,Z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ws(this.priorityNode_)}static set __childrenNodeConstructor(c){xr=c}static get __childrenNodeConstructor(){return xr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new f(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return Ar(c)?this:".priority"===fn(c)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,_){return null}updateImmediateChild(c,_){return".priority"===c?this.updatePriority(_):_.isEmpty()&&".priority"!==c?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,_).updatePriority(this.priorityNode_)}updateChild(c,_){const S=fn(c);return null===S?_:_.isEmpty()&&".priority"!==S?this:((0,Z.hu)(".priority"!==S||1===Ir(c),".priority must be the last token in a path"),this.updateImmediateChild(S,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(zn(c),_)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,_){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Fr(this.priorityNode_.val())+":");const _=typeof this.value_;c+=_+":",c+="number"===_?ur(this.value_):this.value_,this.lazyHash_=at(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===f.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof f.__childrenNodeConstructor?-1:((0,Z.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const _=typeof c.value_,S=typeof this.value_,F=f.VALUE_TYPE_ORDER.indexOf(_),W=f.VALUE_TYPE_ORDER.indexOf(S);return(0,Z.hu)(F>=0,"Unknown leaf type: "+_),(0,Z.hu)(W>=0,"Unknown leaf type: "+S),F===W?"object"===S?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:W-F}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const _=c;return this.value_===_.value_&&this.priorityNode_.equals(_.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const Jr=new class qo extends Kr{compare(u,c){const _=u.node.getPriority(),S=c.node.getPriority(),F=_.compareTo(S);return 0===F?Yn(u.name,c.name):F}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return ar.MIN}maxPost(){return new ar(qt,new Hn("[PRIORITY-POST]",go))}makePost(u,c){const _=Js(u);return new ar(c,new Hn("[PRIORITY-POST]",_))}toString(){return".priority"}},xo=Math.log(2);class Ss{constructor(u){this.count=parseInt(Math.log(u+1)/xo,10),this.current_=this.count-1;const S=(F=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&S}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Zt=function(f,u,c,_){f.sort(u);const S=function(Re,Ge){const $t=Ge-Re;let Bt,Kt;if(0===$t)return null;if(1===$t)return Bt=f[Re],Kt=c?c(Bt):Bt,new Vi(Kt,Bt.node,Vi.BLACK,null,null);{const kn=parseInt($t/2,10)+Re,sr=S(Re,kn),xi=S(kn+1,Ge);return Bt=f[kn],Kt=c?c(Bt):Bt,new Vi(Kt,Bt.node,Vi.BLACK,sr,xi)}},ae=function(Re){let Ge=null,$t=null,Bt=f.length;const Kt=function(sr,xi){const Zs=Bt-sr,Sl=Bt;Bt-=sr;const sa=S(Zs+1,Sl),Nu=f[Zs],lc=c?c(Nu):Nu;kn(new Vi(lc,Nu.node,xi,null,sa))},kn=function(sr){Ge?(Ge.left=sr,Ge=sr):($t=sr,Ge=sr)};for(let sr=0;sr<Re.count;++sr){const xi=Re.nextBitIsOne(),Zs=Math.pow(2,Re.count-(sr+1));xi?Kt(Zs,Vi.BLACK):(Kt(Zs,Vi.BLACK),Kt(Zs,Vi.RED))}return $t}(new Ss(f.length));return new pi(_||u,ae)};let Dr;const Os={};class fs{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,Z.hu)(Os&&Jr,"ChildrenNode.ts has not been loaded"),Dr=Dr||new fs({".priority":Os},{".priority":Jr}),Dr}get(u){const c=(0,Z.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof pi?c:null}hasIndex(u){return(0,Z.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,Z.hu)(u!==ci,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const _=[];let S=!1;const F=c.getIterator(ar.Wrap);let ae,W=F.getNext();for(;W;)S=S||u.isDefinedOn(W.node),_.push(W),W=F.getNext();ae=S?Zt(_,u.getCompare()):Os;const Re=u.toString(),Ge=Object.assign({},this.indexSet_);Ge[Re]=u;const $t=Object.assign({},this.indexes_);return $t[Re]=ae,new fs($t,Ge)}addToIndexes(u,c){const _=(0,Z.UI)(this.indexes_,(S,F)=>{const W=(0,Z.DV)(this.indexSet_,F);if((0,Z.hu)(W,"Missing index implementation for "+F),S===Os){if(W.isDefinedOn(u.node)){const ae=[],Re=c.getIterator(ar.Wrap);let Ge=Re.getNext();for(;Ge;)Ge.name!==u.name&&ae.push(Ge),Ge=Re.getNext();return ae.push(u),Zt(ae,W.getCompare())}return Os}{const ae=c.get(u.name);let Re=S;return ae&&(Re=Re.remove(new ar(u.name,ae))),Re.insert(u,u.node)}});return new fs(_,this.indexSet_)}removeFromIndexes(u,c){const _=(0,Z.UI)(this.indexes_,S=>{if(S===Os)return S;{const F=c.get(u.name);return F?S.remove(new ar(u.name,F)):S}});return new fs(_,this.indexSet_)}}let Ci,hr=(()=>{class f{constructor(c,_,S){this.children_=c,this.priorityNode_=_,this.indexMap_=S,this.lazyHash_=null,this.priorityNode_&&Ws(this.priorityNode_),this.children_.isEmpty()&&(0,Z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ci||(Ci=new f(new pi(Ts),null,fs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ci}updatePriority(c){return this.children_.isEmpty()?this:new f(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const _=this.children_.get(c);return null===_?Ci:_}}getChild(c){const _=fn(c);return null===_?this:this.getImmediateChild(_).getChild(zn(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,_){if((0,Z.hu)(_,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(_);{const S=new ar(c,_);let F,W;_.isEmpty()?(F=this.children_.remove(c),W=this.indexMap_.removeFromIndexes(S,this.children_)):(F=this.children_.insert(c,_),W=this.indexMap_.addToIndexes(S,this.children_));const ae=F.isEmpty()?Ci:this.priorityNode_;return new f(F,ae,W)}}updateChild(c,_){const S=fn(c);if(null===S)return _;{(0,Z.hu)(".priority"!==fn(c)||1===Ir(c),".priority must be the last token in a path");const F=this.getImmediateChild(S).updateChild(zn(c),_);return this.updateImmediateChild(S,F)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const _={};let S=0,F=0,W=!0;if(this.forEachChild(Jr,(ae,Re)=>{_[ae]=Re.val(c),S++,W&&f.INTEGER_REGEXP_.test(ae)?F=Math.max(F,Number(ae)):W=!1}),!c&&W&&F<2*S){const ae=[];for(const Re in _)ae[Re]=_[Re];return ae}return c&&!this.getPriority().isEmpty()&&(_[".priority"]=this.getPriority().val()),_}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Fr(this.getPriority().val())+":"),this.forEachChild(Jr,(_,S)=>{const F=S.hash();""!==F&&(c+=":"+_+":"+F)}),this.lazyHash_=""===c?"":at(c)}return this.lazyHash_}getPredecessorChildName(c,_,S){const F=this.resolveIndex_(S);if(F){const W=F.getPredecessorKey(new ar(c,_));return W?W.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const _=this.resolveIndex_(c);if(_){const S=_.minKey();return S&&S.name}return this.children_.minKey()}getFirstChild(c){const _=this.getFirstChildName(c);return _?new ar(_,this.children_.get(_)):null}getLastChildName(c){const _=this.resolveIndex_(c);if(_){const S=_.maxKey();return S&&S.name}return this.children_.maxKey()}getLastChild(c){const _=this.getLastChildName(c);return _?new ar(_,this.children_.get(_)):null}forEachChild(c,_){const S=this.resolveIndex_(c);return S?S.inorderTraversal(F=>_(F.name,F.node)):this.children_.inorderTraversal(_)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,_){const S=this.resolveIndex_(_);if(S)return S.getIteratorFrom(c,F=>F);{const F=this.children_.getIteratorFrom(c.name,ar.Wrap);let W=F.peek();for(;null!=W&&_.compare(W,c)<0;)F.getNext(),W=F.peek();return F}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,_){const S=this.resolveIndex_(_);if(S)return S.getReverseIteratorFrom(c,F=>F);{const F=this.children_.getReverseIteratorFrom(c.name,ar.Wrap);let W=F.peek();for(;null!=W&&_.compare(W,c)>0;)F.getNext(),W=F.peek();return F}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===ns?-1:0}withIndex(c){if(c===ci||this.indexMap_.hasIndex(c))return this;{const _=this.indexMap_.addIndex(c,this.children_);return new f(this.children_,this.priorityNode_,_)}}isIndexed(c){return c===ci||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const _=c;if(this.getPriority().equals(_.getPriority())){if(this.children_.count()===_.children_.count()){const S=this.getIterator(Jr),F=_.getIterator(Jr);let W=S.getNext(),ae=F.getNext();for(;W&&ae;){if(W.name!==ae.name||!W.node.equals(ae.node))return!1;W=S.getNext(),ae=F.getNext()}return null===W&&null===ae}return!1}return!1}}resolveIndex_(c){return c===ci?null:this.indexMap_.get(c.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const ns=new class ts extends hr{constructor(){super(new pi(Ts),hr.EMPTY_NODE,fs.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return hr.EMPTY_NODE}isEmpty(){return!1}};function G(f,u=null){if(null===f)return hr.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(u=f[".priority"]),(0,Z.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new Hn(f,G(u));if(f instanceof Array){let c=hr.EMPTY_NODE;return an(f,(_,S)=>{if((0,Z.r3)(f,_)&&"."!==_.substring(0,1)){const F=G(S);(F.isLeafNode()||!F.isEmpty())&&(c=c.updateImmediateChild(_,F))}}),c.updatePriority(G(u))}{const c=[];let _=!1;if(an(f,(W,ae)=>{if("."!==W.substring(0,1)){const Re=G(ae);Re.isEmpty()||(_=_||!Re.getPriority().isEmpty(),c.push(new ar(W,Re)))}}),0===c.length)return hr.EMPTY_NODE;const F=Zt(c,Cr,W=>W.name,Ts);if(_){const W=Zt(c,Jr.getCompare());return new hr(F,G(u),new fs({".priority":W},{".priority":Jr}))}return new hr(F,G(u),fs.Default)}}Object.defineProperties(ar,{MIN:{value:new ar(er,hr.EMPTY_NODE)},MAX:{value:new ar(qt,ns)}}),Rs.__EMPTY_NODE=hr.EMPTY_NODE,Hn.__childrenNodeConstructor=hr,function Fs(f){hs=f}(ns),function Ao(f){go=f}(ns),function Vo(f){Js=f}(G);class V extends Kr{constructor(u){super(),this.indexPath_=u,(0,Z.hu)(!Ar(u)&&".priority"!==fn(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const _=this.extractChild(u.node),S=this.extractChild(c.node),F=_.compareTo(S);return 0===F?Yn(u.name,c.name):F}makePost(u,c){const _=G(u),S=hr.EMPTY_NODE.updateChild(this.indexPath_,_);return new ar(c,S)}maxPost(){const u=hr.EMPTY_NODE.updateChild(this.indexPath_,ns);return new ar(qt,u)}toString(){return Is(this.indexPath_,0).join("/")}}const d=new class b extends Kr{compare(u,c){const _=u.node.compareTo(c.node);return 0===_?Yn(u.name,c.name):_}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return ar.MIN}maxPost(){return ar.MAX}makePost(u,c){const _=G(u);return new ar(c,_)}toString(){return".value"}},I="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ke=function(){let f=0;const u=[];return function(c){const _=c===f;let S;f=c;const F=new Array(8);for(S=7;S>=0;S--)F[S]=I.charAt(c%64),c=Math.floor(c/64);(0,Z.hu)(0===c,"Cannot push at time == 0");let W=F.join("");if(_){for(S=11;S>=0&&63===u[S];S--)u[S]=0;u[S]++}else for(S=0;S<12;S++)u[S]=Math.floor(64*Math.random());for(S=0;S<12;S++)W+=I.charAt(u[S]);return(0,Z.hu)(20===W.length,"nextPushId: Length should be 20."),W}}(),It=function(f){if(f===""+wr)return"-";const u=Lr(f);if(null!=u)return""+(u+1);const c=new Array(f.length);for(let W=0;W<c.length;W++)c[W]=f.charAt(W);if(c.length<786)return c.push("-"),c.join("");let _=c.length-1;for(;_>=0&&"z"===c[_];)_--;if(-1===_)return qt;const F=I.charAt(I.indexOf(c[_])+1);return c[_]=F,c.slice(0,_+1).join("")},Pt=function(f){if(f===""+mr)return er;const u=Lr(f);if(null!=u)return""+(u-1);const c=new Array(f.length);for(let _=0;_<c.length;_++)c[_]=f.charAt(_);return"-"===c[c.length-1]?1===c.length?""+wr:(delete c[c.length-1],c.join("")):(c[c.length-1]=I.charAt(I.indexOf(c[c.length-1])-1),c.join("")+"z".repeat(786-c.length))};function rn(f){return{type:"value",snapshotNode:f}}function Mn(f,u){return{type:"child_added",snapshotNode:u,childName:f}}function yr(f,u){return{type:"child_removed",snapshotNode:u,childName:f}}function Zn(f,u,c){return{type:"child_changed",snapshotNode:u,childName:f,oldSnap:c}}class ei{constructor(u){this.index_=u}updateChild(u,c,_,S,F,W){(0,Z.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ae=u.getImmediateChild(c);return ae.getChild(S).equals(_.getChild(S))&&ae.isEmpty()===_.isEmpty()||(null!=W&&(_.isEmpty()?u.hasChild(c)?W.trackChildChange(yr(c,ae)):(0,Z.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ae.isEmpty()?W.trackChildChange(Mn(c,_)):W.trackChildChange(Zn(c,_,ae))),u.isLeafNode()&&_.isEmpty())?u:u.updateImmediateChild(c,_).withIndex(this.index_)}updateFullNode(u,c,_){return null!=_&&(u.isLeafNode()||u.forEachChild(Jr,(S,F)=>{c.hasChild(S)||_.trackChildChange(yr(S,F))}),c.isLeafNode()||c.forEachChild(Jr,(S,F)=>{if(u.hasChild(S)){const W=u.getImmediateChild(S);W.equals(F)||_.trackChildChange(Zn(S,F,W))}else _.trackChildChange(Mn(S,F))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?hr.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class lr{constructor(u){this.indexedFilter_=new ei(u.getIndex()),this.index_=u.getIndex(),this.startPost_=lr.getStartPost_(u),this.endPost_=lr.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,c,_,S,F,W){return this.matches(new ar(c,_))||(_=hr.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,_,S,F,W)}updateFullNode(u,c,_){c.isLeafNode()&&(c=hr.EMPTY_NODE);let S=c.withIndex(this.index_);S=S.updatePriority(hr.EMPTY_NODE);const F=this;return c.forEachChild(Jr,(W,ae)=>{F.matches(new ar(W,ae))||(S=S.updateImmediateChild(W,hr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,S,_)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class Di{constructor(u){this.rangedFilter_=new lr(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,c,_,S,F,W){return this.rangedFilter_.matches(new ar(c,_))||(_=hr.EMPTY_NODE),u.getImmediateChild(c).equals(_)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,_,S,F,W):this.fullLimitUpdateChild_(u,c,_,F,W)}updateFullNode(u,c,_){let S;if(c.isLeafNode()||c.isEmpty())S=hr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let F;S=hr.EMPTY_NODE.withIndex(this.index_),F=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let W=0;for(;F.hasNext()&&W<this.limit_;){const ae=F.getNext();let Re;if(Re=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ae)<=0:this.index_.compare(ae,this.rangedFilter_.getEndPost())<=0,!Re)break;S=S.updateImmediateChild(ae.name,ae.node),W++}}else{let F,W,ae,Re;if(S=c.withIndex(this.index_),S=S.updatePriority(hr.EMPTY_NODE),this.reverse_){Re=S.getReverseIterator(this.index_),F=this.rangedFilter_.getEndPost(),W=this.rangedFilter_.getStartPost();const Bt=this.index_.getCompare();ae=(Kt,kn)=>Bt(kn,Kt)}else Re=S.getIterator(this.index_),F=this.rangedFilter_.getStartPost(),W=this.rangedFilter_.getEndPost(),ae=this.index_.getCompare();let Ge=0,$t=!1;for(;Re.hasNext();){const Bt=Re.getNext();!$t&&ae(F,Bt)<=0&&($t=!0),$t&&Ge<this.limit_&&ae(Bt,W)<=0?Ge++:S=S.updateImmediateChild(Bt.name,hr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,S,_)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,_,S,F){let W;if(this.reverse_){const Bt=this.index_.getCompare();W=(Kt,kn)=>Bt(kn,Kt)}else W=this.index_.getCompare();const ae=u;(0,Z.hu)(ae.numChildren()===this.limit_,"");const Re=new ar(c,_),Ge=this.reverse_?ae.getFirstChild(this.index_):ae.getLastChild(this.index_),$t=this.rangedFilter_.matches(Re);if(ae.hasChild(c)){const Bt=ae.getImmediateChild(c);let Kt=S.getChildAfterChild(this.index_,Ge,this.reverse_);for(;null!=Kt&&(Kt.name===c||ae.hasChild(Kt.name));)Kt=S.getChildAfterChild(this.index_,Kt,this.reverse_);const kn=null==Kt?1:W(Kt,Re);if($t&&!_.isEmpty()&&kn>=0)return null!=F&&F.trackChildChange(Zn(c,_,Bt)),ae.updateImmediateChild(c,_);{null!=F&&F.trackChildChange(yr(c,Bt));const xi=ae.updateImmediateChild(c,hr.EMPTY_NODE);return null!=Kt&&this.rangedFilter_.matches(Kt)?(null!=F&&F.trackChildChange(Mn(Kt.name,Kt.node)),xi.updateImmediateChild(Kt.name,Kt.node)):xi}}return _.isEmpty()?u:$t&&W(Ge,Re)>=0?(null!=F&&(F.trackChildChange(yr(Ge.name,Ge.node)),F.trackChildChange(Mn(c,_))),ae.updateImmediateChild(c,_).updateImmediateChild(Ge.name,hr.EMPTY_NODE)):u}}class $i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:er}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jr}copy(){const u=new $i;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function io(f,u,c){const _=f.copy();return _.startSet_=!0,void 0===u&&(u=null),_.indexStartValue_=u,null!=c?(_.startNameSet_=!0,_.indexStartName_=c):(_.startNameSet_=!1,_.indexStartName_=""),_}function X(f,u,c){const _=f.copy();return _.endSet_=!0,void 0===u&&(u=null),_.indexEndValue_=u,void 0!==c?(_.endNameSet_=!0,_.indexEndName_=c):(_.endNameSet_=!1,_.indexEndName_=""),_}function ie(f,u){const c=f.copy();return c.index_=u,c}function Fe(f){const u={};if(f.isDefault())return u;let c;return f.index_===Jr?c="$priority":f.index_===d?c="$value":f.index_===ci?c="$key":((0,Z.hu)(f.index_ instanceof V,"Unrecognized index type!"),c=f.index_.toString()),u.orderBy=(0,Z.Wl)(c),f.startSet_&&(u.startAt=(0,Z.Wl)(f.indexStartValue_),f.startNameSet_&&(u.startAt+=","+(0,Z.Wl)(f.indexStartName_))),f.endSet_&&(u.endAt=(0,Z.Wl)(f.indexEndValue_),f.endNameSet_&&(u.endAt+=","+(0,Z.Wl)(f.indexEndName_))),f.limitSet_&&(f.isViewFromLeft()?u.limitToFirst=f.limit_:u.limitToLast=f.limit_),u}function Dt(f){const u={};if(f.startSet_&&(u.sp=f.indexStartValue_,f.startNameSet_&&(u.sn=f.indexStartName_)),f.endSet_&&(u.ep=f.indexEndValue_,f.endNameSet_&&(u.en=f.indexEndName_)),f.limitSet_){u.l=f.limit_;let c=f.viewFrom_;""===c&&(c=f.isViewFromLeft()?"l":"r"),u.vf=c}return f.index_!==Jr&&(u.i=f.index_.toString()),u}class Lt extends qr{constructor(u,c,_,S){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=_,this.appCheckTokenProvider_=S,this.log_=un("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,Z.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,_,S){const F=u._path.toString();this.log_("Listen called for "+F+" "+u._queryIdentifier);const W=Lt.getListenId_(u,_),ae={};this.listens_[W]=ae;const Re=Fe(u._queryParams);this.restRequest_(F+".json",Re,(Ge,$t)=>{let Bt=$t;if(404===Ge&&(Bt=null,Ge=null),null===Ge&&this.onDataUpdate_(F,Bt,!1,_),(0,Z.DV)(this.listens_,W)===ae){let Kt;Kt=Ge?401===Ge?"permission_denied":"rest_error:"+Ge:"ok",S(Kt,null)}})}unlisten(u,c){const _=Lt.getListenId_(u,c);delete this.listens_[_]}get(u){const c=Fe(u._queryParams),_=u._path.toString(),S=new Z.BH;return this.restRequest_(_+".json",c,(F,W)=>{let ae=W;404===F&&(ae=null,F=null),null===F?(this.onDataUpdate_(_,ae,!1,null),S.resolve(ae)):S.reject(new Error(ae))}),S.promise}refreshAuthToken(u){}restRequest_(u,c={},_){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([S,F])=>{S&&S.accessToken&&(c.auth=S.accessToken),F&&F.token&&(c.ac=F.token);const W=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,Z.xO)(c);this.log_("Sending REST request for "+W);const ae=new XMLHttpRequest;ae.onreadystatechange=()=>{if(_&&4===ae.readyState){this.log_("REST Response for "+W+" received. status:",ae.status,"response:",ae.responseText);let Re=null;if(ae.status>=200&&ae.status<300){try{Re=(0,Z.cI)(ae.responseText)}catch(Ge){En("Failed to parse JSON response for "+W+": "+ae.responseText)}_(null,Re)}else 401!==ae.status&&404!==ae.status&&En("Got unsuccessful REST response for "+W+" Status: "+ae.status),_(ae.status);_=null}},ae.open("GET",W,!0),ae.send()})}}class Rn{constructor(){this.rootNode_=hr.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function ti(){return{value:null,children:new Map}}function ni(f,u,c){if(Ar(u))f.value=c,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(u,c);else{const _=fn(u);f.children.has(_)||f.children.set(_,ti()),ni(f.children.get(_),u=zn(u),c)}}function ri(f,u){if(Ar(u))return f.value=null,f.children.clear(),!0;if(null!==f.value){if(f.value.isLeafNode())return!1;{const c=f.value;return f.value=null,c.forEachChild(Jr,(_,S)=>{ni(f,new Ht(_),S)}),ri(f,u)}}if(f.children.size>0){const c=fn(u);return u=zn(u),f.children.has(c)&&ri(f.children.get(c),u)&&f.children.delete(c),0===f.children.size}return!0}function Zr(f,u,c){null!==f.value?c(u,f.value):function rs(f,u){f.children.forEach((c,_)=>{u(_,c)})}(f,(_,S)=>{Zr(S,new Ht(u.toString()+"/"+_),c)})}class yi{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&an(this.last_,(_,S)=>{c[_]=c[_]-S}),this.last_=u,c}}class Ro{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new yi(u);const _=1e4+2e4*Math.random();On(this.reportStats_.bind(this),Math.floor(_))}reportStats_(){const u=this.statsListener_.get(),c={};let _=!1;an(u,(S,F)=>{F>0&&(0,Z.r3)(this.statsToReport_,S)&&(c[S]=F,_=!0)}),_&&this.server_.reportStats(c),On(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qi=(()=>{return(f=qi||(qi={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",qi;var f})();function Bs(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class Yo{constructor(u,c,_){this.path=u,this.affectedTree=c,this.revert=_,this.type=qi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(Ar(this.path)){if(null!=this.affectedTree.value)return(0,Z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Ht(u));return new Yo(Xt(),c,this.revert)}}return(0,Z.hu)(fn(this.path)===u,"operationForChild called for unrelated child."),new Yo(zn(this.path),this.affectedTree,this.revert)}}class Ni{constructor(u,c){this.source=u,this.path=c,this.type=qi.LISTEN_COMPLETE}operationForChild(u){return Ar(this.path)?new Ni(this.source,Xt()):new Ni(this.source,zn(this.path))}}class As{constructor(u,c,_){this.source=u,this.path=c,this.snap=_,this.type=qi.OVERWRITE}operationForChild(u){return Ar(this.path)?new As(this.source,Xt(),this.snap.getImmediateChild(u)):new As(this.source,zn(this.path),this.snap)}}class Ra{constructor(u,c,_){this.source=u,this.path=c,this.children=_,this.type=qi.MERGE}operationForChild(u){if(Ar(this.path)){const c=this.children.subtree(new Ht(u));return c.isEmpty()?null:c.value?new As(this.source,Xt(),c.value):new Ra(this.source,Xt(),c)}return(0,Z.hu)(fn(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Ra(this.source,zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ia{constructor(u,c,_){this.node_=u,this.fullyInitialized_=c,this.filtered_=_}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(Ar(u))return this.isFullyInitialized()&&!this.filtered_;const c=fn(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Ql{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function Ko(f,u,c,_,S,F){const W=_.filter(ae=>ae.type===c);W.sort((ae,Re)=>function Wa(f,u,c){if(null==u.childName||null==c.childName)throw(0,Z.g5)("Should only compare child_ events.");const _=new ar(u.childName,u.snapshotNode),S=new ar(c.childName,c.snapshotNode);return f.index_.compare(_,S)}(f,ae,Re)),W.forEach(ae=>{const Re=function ks(f,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,f.index_)),u}(f,ae,F);S.forEach(Ge=>{Ge.respondsTo(ae.type)&&u.push(Ge.createEvent(Re,f.query_))})})}function Oa(f,u){return{eventCache:f,serverCache:u}}function Zo(f,u,c,_){return Oa(new Ia(u,c,_),f.serverCache)}function Xl(f,u,c,_){return Oa(f.eventCache,new Ia(u,c,_))}function xs(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function $o(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let za;class Ei{constructor(u,c=(()=>(za||(za=new pi(Qr)),za))()){this.value=u,this.children=c}static fromObject(u){let c=new Ei(null);return an(u,(_,S)=>{c=c.set(new Ht(_),S)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:Xt(),value:this.value};if(Ar(u))return null;{const _=fn(u),S=this.children.get(_);if(null!==S){const F=S.findRootMostMatchingPathAndValue(zn(u),c);return null!=F?{path:Yr(new Ht(_),F.path),value:F.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(Ar(u))return this;{const c=fn(u),_=this.children.get(c);return null!==_?_.subtree(zn(u)):new Ei(null)}}set(u,c){if(Ar(u))return new Ei(c,this.children);{const _=fn(u),F=(this.children.get(_)||new Ei(null)).set(zn(u),c),W=this.children.insert(_,F);return new Ei(this.value,W)}}remove(u){if(Ar(u))return this.children.isEmpty()?new Ei(null):new Ei(null,this.children);{const c=fn(u),_=this.children.get(c);if(_){const S=_.remove(zn(u));let F;return F=S.isEmpty()?this.children.remove(c):this.children.insert(c,S),null===this.value&&F.isEmpty()?new Ei(null):new Ei(this.value,F)}return this}}get(u){if(Ar(u))return this.value;{const c=fn(u),_=this.children.get(c);return _?_.get(zn(u)):null}}setTree(u,c){if(Ar(u))return c;{const _=fn(u),F=(this.children.get(_)||new Ei(null)).setTree(zn(u),c);let W;return W=F.isEmpty()?this.children.remove(_):this.children.insert(_,F),new Ei(this.value,W)}}fold(u){return this.fold_(Xt(),u)}fold_(u,c){const _={};return this.children.inorderTraversal((S,F)=>{_[S]=F.fold_(Yr(u,S),c)}),c(u,this.value,_)}findOnPath(u,c){return this.findOnPath_(u,Xt(),c)}findOnPath_(u,c,_){const S=!!this.value&&_(c,this.value);if(S)return S;if(Ar(u))return null;{const F=fn(u),W=this.children.get(F);return W?W.findOnPath_(zn(u),Yr(c,F),_):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,Xt(),c)}foreachOnPath_(u,c,_){if(Ar(u))return this;{this.value&&_(c,this.value);const S=fn(u),F=this.children.get(S);return F?F.foreachOnPath_(zn(u),Yr(c,S),_):new Ei(null)}}foreach(u){this.foreach_(Xt(),u)}foreach_(u,c){this.children.inorderTraversal((_,S)=>{S.foreach_(Yr(u,_),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,_)=>{_.value&&u(c,_.value)})}}class da{constructor(u){this.writeTree_=u}static empty(){return new da(new Ei(null))}}function yo(f,u,c){if(Ar(u))return new da(new Ei(c));{const _=f.writeTree_.findRootMostValueAndPath(u);if(null!=_){const S=_.path;let F=_.value;const W=vi(S,u);return F=F.updateChild(W,c),new da(f.writeTree_.set(S,F))}{const S=new Ei(c),F=f.writeTree_.setTree(u,S);return new da(F)}}}function qa(f,u,c){let _=f;return an(c,(S,F)=>{_=yo(_,Yr(u,S),F)}),_}function ms(f,u){if(Ar(u))return da.empty();{const c=f.writeTree_.setTree(u,new Ei(null));return new da(c)}}function bi(f,u){return null!=to(f,u)}function to(f,u){const c=f.writeTree_.findRootMostValueAndPath(u);return null!=c?f.writeTree_.get(c.path).getChild(vi(c.path,u)):null}function oo(f){const u=[],c=f.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Jr,(_,S)=>{u.push(new ar(_,S))}):f.writeTree_.children.inorderTraversal((_,S)=>{null!=S.value&&u.push(new ar(_,S.value))}),u}function _o(f,u){if(Ar(u))return f;{const c=to(f,u);return new da(null!=c?new Ei(c):f.writeTree_.subtree(u))}}function vl(f){return f.writeTree_.isEmpty()}function sn(f,u){return Ri(Xt(),f.writeTree_,u)}function Ri(f,u,c){if(null!=u.value)return c.updateChild(f,u.value);{let _=null;return u.children.inorderTraversal((S,F)=>{".priority"===S?((0,Z.hu)(null!==F.value,"Priority writes must always be leaf nodes"),_=F.value):c=Ri(Yr(f,S),F,c)}),!c.getChild(f).isEmpty()&&null!==_&&(c=c.updateChild(Yr(f,".priority"),_)),c}}function ha(f,u){return Pr(u,f)}function An(f,u){if(f.snap)return Si(f.path,u);for(const c in f.children)if(f.children.hasOwnProperty(c)&&Si(Yr(f.path,c),u))return!0;return!1}function en(f){return f.visible}function ys(f,u,c){let _=da.empty();for(let S=0;S<f.length;++S){const F=f[S];if(u(F)){const W=F.path;let ae;if(F.snap)Si(c,W)?(ae=vi(c,W),_=yo(_,ae,F.snap)):Si(W,c)&&(ae=vi(W,c),_=yo(_,Xt(),F.snap.getChild(ae)));else{if(!F.children)throw(0,Z.g5)("WriteRecord should have .snap or .children");if(Si(c,W))ae=vi(c,W),_=qa(_,ae,F.children);else if(Si(W,c))if(ae=vi(W,c),Ar(ae))_=qa(_,Xt(),F.children);else{const Re=(0,Z.DV)(F.children,fn(ae));if(Re){const Ge=Re.getChild(zn(ae));_=yo(_,Xt(),Ge)}}}}}return _}function ol(f,u,c,_,S){if(_||S){const F=_o(f.visibleWrites,u);return!S&&vl(F)?c:S||null!=c||bi(F,Xt())?sn(ys(f.allWrites,function(Ge){return(Ge.visible||S)&&(!_||!~_.indexOf(Ge.writeId))&&(Si(Ge.path,u)||Si(u,Ge.path))},u),c||hr.EMPTY_NODE):null}{const F=to(f.visibleWrites,u);if(null!=F)return F;{const W=_o(f.visibleWrites,u);return vl(W)?c:null!=c||bi(W,Xt())?sn(W,c||hr.EMPTY_NODE):null}}}function pa(f,u,c,_){return ol(f.writeTree,f.treePath,u,c,_)}function kl(f,u){return function Ca(f,u,c){let _=hr.EMPTY_NODE;const S=to(f.visibleWrites,u);if(S)return S.isLeafNode()||S.forEachChild(Jr,(F,W)=>{_=_.updateImmediateChild(F,W)}),_;if(c){const F=_o(f.visibleWrites,u);return c.forEachChild(Jr,(W,ae)=>{const Re=sn(_o(F,new Ht(W)),ae);_=_.updateImmediateChild(W,Re)}),oo(F).forEach(W=>{_=_.updateImmediateChild(W.name,W.node)}),_}return oo(_o(f.visibleWrites,u)).forEach(W=>{_=_.updateImmediateChild(W.name,W.node)}),_}(f.writeTree,f.treePath,u)}function ao(f,u,c,_){return function Da(f,u,c,_,S){(0,Z.hu)(_||S,"Either existingEventSnap or existingServerSnap must exist");const F=Yr(u,c);if(bi(f.visibleWrites,F))return null;{const W=_o(f.visibleWrites,F);return vl(W)?S.getChild(c):sn(W,S.getChild(c))}}(f.writeTree,f.treePath,u,c,_)}function Oo(f,u){return function Rl(f,u){return to(f.visibleWrites,u)}(f.writeTree,Yr(f.treePath,u))}function ko(f,u,c){return function Ml(f,u,c,_){const S=Yr(u,c),F=to(f.visibleWrites,S);return null!=F?F:_.isCompleteForChild(c)?sn(_o(f.visibleWrites,S),_.getNode().getImmediateChild(c)):null}(f.writeTree,f.treePath,u,c)}function ka(f,u){return Pr(Yr(f.treePath,u),f.writeTree)}function Pr(f,u){return{treePath:f,writeTree:u}}class or{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,_=u.childName;(0,Z.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,Z.hu)(".priority"!==_,"Only non-priority child changes can be tracked.");const S=this.changeMap.get(_);if(S){const F=S.type;if("child_added"===c&&"child_removed"===F)this.changeMap.set(_,Zn(_,u.snapshotNode,S.snapshotNode));else if("child_removed"===c&&"child_added"===F)this.changeMap.delete(_);else if("child_removed"===c&&"child_changed"===F)this.changeMap.set(_,yr(_,S.oldSnap));else if("child_changed"===c&&"child_added"===F)this.changeMap.set(_,Mn(_,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==F)throw(0,Z.g5)("Illegal combination of changes: "+u+" occurred after "+S);this.changeMap.set(_,Zn(_,u.snapshotNode,S.oldSnap))}}else this.changeMap.set(_,u)}getChanges(){return Array.from(this.changeMap.values())}}const Qn=new class Qo{getCompleteChild(u){return null}getChildAfterChild(u,c,_){return null}};class Pl{constructor(u,c,_=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=_}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const _=null!=this.optCompleteServerCache_?new Ia(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ko(this.writes_,u,_)}}getChildAfterChild(u,c,_){const S=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$o(this.viewCache_),F=function br(f,u,c,_,S,F){return function Ol(f,u,c,_,S,F,W){let ae;const Re=_o(f.visibleWrites,u),Ge=to(Re,Xt());if(null!=Ge)ae=Ge;else{if(null==c)return[];ae=sn(Re,c)}if(ae=ae.withIndex(W),ae.isEmpty()||ae.isLeafNode())return[];{const $t=[],Bt=W.getCompare(),Kt=F?ae.getReverseIteratorFrom(_,W):ae.getIteratorFrom(_,W);let kn=Kt.getNext();for(;kn&&$t.length<S;)0!==Bt(kn,_)&&$t.push(kn),kn=Kt.getNext();return $t}}(f.writeTree,f.treePath,u,c,_,S,F)}(this.writes_,S,c,1,_,u);return 0===F.length?null:F[0]}}function Pa(f,u,c,_,S,F){const W=u.eventCache;if(null!=Oo(_,c))return u;{let ae,Re;if(Ar(c))if((0,Z.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Ge=$o(u),Bt=kl(_,Ge instanceof hr?Ge:hr.EMPTY_NODE);ae=f.filter.updateFullNode(u.eventCache.getNode(),Bt,F)}else{const Ge=pa(_,$o(u));ae=f.filter.updateFullNode(u.eventCache.getNode(),Ge,F)}else{const Ge=fn(c);if(".priority"===Ge){(0,Z.hu)(1===Ir(c),"Can't have a priority with additional path components");const $t=W.getNode();Re=u.serverCache.getNode();const Bt=ao(_,c,$t,Re);ae=null!=Bt?f.filter.updatePriority($t,Bt):W.getNode()}else{const $t=zn(c);let Bt;if(W.isCompleteForChild(Ge)){Re=u.serverCache.getNode();const Kt=ao(_,c,W.getNode(),Re);Bt=null!=Kt?W.getNode().getImmediateChild(Ge).updateChild($t,Kt):W.getNode().getImmediateChild(Ge)}else Bt=ko(_,Ge,u.serverCache);ae=null!=Bt?f.filter.updateChild(W.getNode(),Ge,Bt,$t,S,F):W.getNode()}}return Zo(u,ae,W.isFullyInitialized()||Ar(c),f.filter.filtersNodes())}}function mu(f,u,c,_,S,F,W,ae){const Re=u.serverCache;let Ge;const $t=W?f.filter:f.filter.getIndexedFilter();if(Ar(c))Ge=$t.updateFullNode(Re.getNode(),_,null);else if($t.filtersNodes()&&!Re.isFiltered()){const kn=Re.getNode().updateChild(c,_);Ge=$t.updateFullNode(Re.getNode(),kn,null)}else{const kn=fn(c);if(!Re.isCompleteForPath(c)&&Ir(c)>1)return u;const sr=zn(c),Zs=Re.getNode().getImmediateChild(kn).updateChild(sr,_);Ge=".priority"===kn?$t.updatePriority(Re.getNode(),Zs):$t.updateChild(Re.getNode(),kn,Zs,sr,Qn,null)}const Bt=Xl(u,Ge,Re.isFullyInitialized()||Ar(c),$t.filtersNodes());return Pa(f,Bt,c,S,new Pl(S,Bt,F),ae)}function Xo(f,u,c,_,S,F,W){const ae=u.eventCache;let Re,Ge;const $t=new Pl(S,u,F);if(Ar(c))Ge=f.filter.updateFullNode(u.eventCache.getNode(),_,W),Re=Zo(u,Ge,!0,f.filter.filtersNodes());else{const Bt=fn(c);if(".priority"===Bt)Ge=f.filter.updatePriority(u.eventCache.getNode(),_),Re=Zo(u,Ge,ae.isFullyInitialized(),ae.isFiltered());else{const Kt=zn(c),kn=ae.getNode().getImmediateChild(Bt);let sr;if(Ar(Kt))sr=_;else{const xi=$t.getCompleteChild(Bt);sr=null!=xi?".priority"===Zi(Kt)&&xi.getChild(ls(Kt)).isEmpty()?xi:xi.updateChild(Kt,_):hr.EMPTY_NODE}Re=kn.equals(sr)?u:Zo(u,f.filter.updateChild(ae.getNode(),Bt,sr,Kt,$t,W),ae.isFullyInitialized(),f.filter.filtersNodes())}}return Re}function yu(f,u){return f.eventCache.isCompleteForChild(u)}function Ps(f,u,c){return c.foreach((_,S)=>{u=u.updateChild(_,S)}),u}function Ka(f,u,c,_,S,F,W,ae){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Ge,Re=u;Ge=Ar(c)?_:new Ei(null).setTree(c,_);const $t=u.serverCache.getNode();return Ge.children.inorderTraversal((Bt,Kt)=>{if($t.hasChild(Bt)){const sr=Ps(0,u.serverCache.getNode().getImmediateChild(Bt),Kt);Re=mu(f,Re,new Ht(Bt),sr,S,F,W,ae)}}),Ge.children.inorderTraversal((Bt,Kt)=>{const kn=!u.serverCache.isCompleteForChild(Bt)&&null===Kt.value;if(!$t.hasChild(Bt)&&!kn){const xi=Ps(0,u.serverCache.getNode().getImmediateChild(Bt),Kt);Re=mu(f,Re,new Ht(Bt),xi,S,F,W,ae)}}),Re}class lo{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const _=this.query_._queryParams,S=new ei(_.getIndex()),F=function Ls(f){return f.loadsAllData()?new ei(f.getIndex()):f.hasLimit()?new Di(f):new lr(f)}(_);this.processor_=function bs(f){return{filter:f}}(F);const W=c.serverCache,ae=c.eventCache,Re=S.updateFullNode(hr.EMPTY_NODE,W.getNode(),null),Ge=F.updateFullNode(hr.EMPTY_NODE,ae.getNode(),null),$t=new Ia(Re,W.isFullyInitialized(),S.filtersNodes()),Bt=new Ia(Ge,ae.isFullyInitialized(),F.filtersNodes());this.viewCache_=Oa(Bt,$t),this.eventGenerator_=new Ql(this.query_)}get query(){return this.query_}}function At(f,u){const c=$o(f.viewCache_);return c&&(f.query._queryParams.loadsAllData()||!Ar(u)&&!c.getImmediateChild(fn(u)).isEmpty())?c.getChild(u):null}function Po(f){return 0===f.eventRegistrations_.length}function Jl(f,u,c){const _=[];if(c){(0,Z.hu)(null==u,"A cancel should cancel all event registrations.");const S=f.query._path;f.eventRegistrations_.forEach(F=>{const W=F.createCancelEvent(c,S);W&&_.push(W)})}if(u){let S=[];for(let F=0;F<f.eventRegistrations_.length;++F){const W=f.eventRegistrations_[F];if(W.matches(u)){if(u.hasAnyCallback()){S=S.concat(f.eventRegistrations_.slice(F+1));break}}else S.push(W)}f.eventRegistrations_=S}else f.eventRegistrations_=[];return _}function ga(f,u,c,_){u.type===qi.MERGE&&null!==u.source.queryId&&((0,Z.hu)($o(f.viewCache_),"We should always have a full cache before handling merges"),(0,Z.hu)(xs(f.viewCache_),"Missing event cache, even though we have a server cache"));const S=f.viewCache_,F=function Nl(f,u,c,_,S){const F=new or;let W,ae;if(c.type===qi.OVERWRITE){const Ge=c;Ge.source.fromUser?W=Xo(f,u,Ge.path,Ge.snap,_,S,F):((0,Z.hu)(Ge.source.fromServer,"Unknown source."),ae=Ge.source.tagged||u.serverCache.isFiltered()&&!Ar(Ge.path),W=mu(f,u,Ge.path,Ge.snap,_,S,ae,F))}else if(c.type===qi.MERGE){const Ge=c;Ge.source.fromUser?W=function al(f,u,c,_,S,F,W){let ae=u;return _.foreach((Re,Ge)=>{const $t=Yr(c,Re);yu(u,fn($t))&&(ae=Xo(f,ae,$t,Ge,S,F,W))}),_.foreach((Re,Ge)=>{const $t=Yr(c,Re);yu(u,fn($t))||(ae=Xo(f,ae,$t,Ge,S,F,W))}),ae}(f,u,Ge.path,Ge.children,_,S,F):((0,Z.hu)(Ge.source.fromServer,"Unknown source."),ae=Ge.source.tagged||u.serverCache.isFiltered(),W=Ka(f,u,Ge.path,Ge.children,_,S,ae,F))}else if(c.type===qi.ACK_USER_WRITE){const Ge=c;W=Ge.revert?function Fl(f,u,c,_,S,F){let W;if(null!=Oo(_,c))return u;{const ae=new Pl(_,u,S),Re=u.eventCache.getNode();let Ge;if(Ar(c)||".priority"===fn(c)){let $t;if(u.serverCache.isFullyInitialized())$t=pa(_,$o(u));else{const Bt=u.serverCache.getNode();(0,Z.hu)(Bt instanceof hr,"serverChildren would be complete if leaf node"),$t=kl(_,Bt)}Ge=f.filter.updateFullNode(Re,$t,F)}else{const $t=fn(c);let Bt=ko(_,$t,u.serverCache);null==Bt&&u.serverCache.isCompleteForChild($t)&&(Bt=Re.getImmediateChild($t)),Ge=null!=Bt?f.filter.updateChild(Re,$t,Bt,zn(c),ae,F):u.eventCache.getNode().hasChild($t)?f.filter.updateChild(Re,$t,hr.EMPTY_NODE,zn(c),ae,F):Re,Ge.isEmpty()&&u.serverCache.isFullyInitialized()&&(W=pa(_,$o(u)),W.isLeafNode()&&(Ge=f.filter.updateFullNode(Ge,W,F)))}return W=u.serverCache.isFullyInitialized()||null!=Oo(_,Xt()),Zo(u,Ge,W,f.filter.filtersNodes())}}(f,u,Ge.path,_,S,F):function ps(f,u,c,_,S,F,W){if(null!=Oo(S,c))return u;const ae=u.serverCache.isFiltered(),Re=u.serverCache;if(null!=_.value){if(Ar(c)&&Re.isFullyInitialized()||Re.isCompleteForPath(c))return mu(f,u,c,Re.getNode().getChild(c),S,F,ae,W);if(Ar(c)){let Ge=new Ei(null);return Re.getNode().forEachChild(ci,($t,Bt)=>{Ge=Ge.set(new Ht($t),Bt)}),Ka(f,u,c,Ge,S,F,ae,W)}return u}{let Ge=new Ei(null);return _.foreach(($t,Bt)=>{const Kt=Yr(c,$t);Re.isCompleteForPath(Kt)&&(Ge=Ge.set($t,Re.getNode().getChild(Kt)))}),Ka(f,u,c,Ge,S,F,ae,W)}}(f,u,Ge.path,Ge.affectedTree,_,S,F)}else{if(c.type!==qi.LISTEN_COMPLETE)throw(0,Z.g5)("Unknown operation type: "+c.type);W=function El(f,u,c,_,S){const F=u.serverCache;return Pa(f,Xl(u,F.getNode(),F.isFullyInitialized()||Ar(c),F.isFiltered()),c,_,Qn,S)}(f,u,c.path,_,F)}const Re=F.getChanges();return function gu(f,u,c){const _=u.eventCache;if(_.isFullyInitialized()){const S=_.getNode().isLeafNode()||_.getNode().isEmpty(),F=xs(f);(c.length>0||!f.eventCache.isFullyInitialized()||S&&!_.getNode().equals(F)||!_.getNode().getPriority().equals(F.getPriority()))&&c.push(rn(xs(u)))}}(u,W,Re),{viewCache:W,changes:Re}}(f.processor_,S,u,c,_);return function Cn(f,u){(0,Z.hu)(u.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,Z.hu)(u.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,F.viewCache),(0,Z.hu)(F.viewCache.serverCache.isFullyInitialized()||!S.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=F.viewCache,jo(f,F.changes,F.viewCache.eventCache.getNode(),null)}function jo(f,u,c,_){return function _l(f,u,c,_){const S=[],F=[];return u.forEach(W=>{"child_changed"===W.type&&f.index_.indexedValueChanged(W.oldSnap,W.snapshotNode)&&F.push(function Mr(f,u){return{type:"child_moved",snapshotNode:u,childName:f}}(W.childName,W.snapshotNode))}),Ko(f,S,"child_removed",u,_,c),Ko(f,S,"child_added",u,_,c),Ko(f,S,"child_moved",F,_,c),Ko(f,S,"child_changed",u,_,c),Ko(f,S,"value",u,_,c),S}(f.eventGenerator_,u,c,_?[_]:f.eventRegistrations_)}let Eo,C;class Vs{constructor(){this.views=new Map}}function qs(f,u,c,_){const S=u.source.queryId;if(null!==S){const F=f.views.get(S);return(0,Z.hu)(null!=F,"SyncTree gave us an op for an invalid query."),ga(F,u,c,_)}{let F=[];for(const W of f.views.values())F=F.concat(ga(W,u,c,_));return F}}function _u(f,u,c,_,S){const W=f.views.get(u._queryIdentifier);if(!W){let ae=pa(c,S?_:null),Re=!1;ae?Re=!0:_ instanceof hr?(ae=kl(c,_),Re=!1):(ae=hr.EMPTY_NODE,Re=!1);const Ge=Oa(new Ia(ae,Re,!1),new Ia(_,S,!1));return new lo(u,Ge)}return W}function Oi(f){const u=[];for(const c of f.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function uo(f,u){let c=null;for(const _ of f.views.values())c=c||At(_,u);return c}function $s(f,u){return u._queryParams.loadsAllData()?x(f):f.views.get(u._queryIdentifier)}function wi(f,u){return null!=$s(f,u)}function A(f){return null!=x(f)}function x(f){for(const u of f.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let re=1;class Ae{constructor(u){this.listenProvider_=u,this.syncPointTree_=new Ei(null),this.pendingWriteTree_=function Ya(){return{visibleWrites:da.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xe(f,u,c,_,S){return function fa(f,u,c,_,S){(0,Z.hu)(_>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===S&&(S=!0),f.allWrites.push({path:u,snap:c,writeId:_,visible:S}),S&&(f.visibleWrites=yo(f.visibleWrites,u,c)),f.lastWriteId=_}(f.pendingWriteTree_,u,c,_,S),S?Dn(f,new As({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function P(f,u,c=!1){const _=function ir(f,u){for(let c=0;c<f.allWrites.length;c++){const _=f.allWrites[c];if(_.writeId===u)return _}return null}(f.pendingWriteTree_,u);if(function sl(f,u){const c=f.allWrites.findIndex(ae=>ae.writeId===u);(0,Z.hu)(c>=0,"removeWrite called with nonexistent writeId.");const _=f.allWrites[c];f.allWrites.splice(c,1);let S=_.visible,F=!1,W=f.allWrites.length-1;for(;S&&W>=0;){const ae=f.allWrites[W];ae.visible&&(W>=c&&An(ae,_.path)?S=!1:Si(_.path,ae.path)&&(F=!0)),W--}return!!S&&(F?(function Ft(f){f.visibleWrites=ys(f.allWrites,en,Xt()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(_.snap?f.visibleWrites=ms(f.visibleWrites,_.path):an(_.children,Re=>{f.visibleWrites=ms(f.visibleWrites,Yr(_.path,Re))}),!0))}(f.pendingWriteTree_,u)){let F=new Ei(null);return null!=_.snap?F=F.set(Xt(),!0):an(_.children,W=>{F=F.set(new Ht(W),!0)}),Dn(f,new Yo(_.path,F,c))}return[]}function U(f,u,c){return Dn(f,new As({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function wt(f,u,c,_,S=!1){const F=u._path,W=f.syncPointTree_.get(F);let ae=[];if(W&&("default"===u._queryIdentifier||wi(W,u))){const Re=function Ll(f,u,c,_){const S=u._queryIdentifier,F=[];let W=[];const ae=A(f);if("default"===S)for(const[Re,Ge]of f.views.entries())W=W.concat(Jl(Ge,c,_)),Po(Ge)&&(f.views.delete(Re),Ge.query._queryParams.loadsAllData()||F.push(Ge.query));else{const Re=f.views.get(S);Re&&(W=W.concat(Jl(Re,c,_)),Po(Re)&&(f.views.delete(S),Re.query._queryParams.loadsAllData()||F.push(Re.query)))}return ae&&!A(f)&&F.push(new(function Na(){return(0,Z.hu)(Eo,"Reference.ts has not been loaded"),Eo}())(u._repo,u._path)),{removed:F,events:W}}(W,u,c,_);(function Uu(f){return 0===f.views.size})(W)&&(f.syncPointTree_=f.syncPointTree_.remove(F));const Ge=Re.removed;if(ae=Re.events,!S){const $t=-1!==Ge.findIndex(Kt=>Kt._queryParams.loadsAllData()),Bt=f.syncPointTree_.findOnPath(F,(Kt,kn)=>A(kn));if($t&&!Bt){const Kt=f.syncPointTree_.subtree(F);if(!Kt.isEmpty()){const kn=function Xa(f){return f.fold((u,c,_)=>{if(c&&A(c))return[x(c)];{let S=[];return c&&(S=Oi(c)),an(_,(F,W)=>{S=S.concat(W)}),S}})}(Kt);for(let sr=0;sr<kn.length;++sr){const xi=kn[sr],Zs=xi.query,Sl=Jo(f,xi);f.listenProvider_.startListening(ma(Zs),bo(f,Zs),Sl.hashFn,Sl.onComplete)}}}!Bt&&Ge.length>0&&!_&&($t?f.listenProvider_.stopListening(ma(u),null):Ge.forEach(Kt=>{const kn=f.queryToTagMap.get(ea(Kt));f.listenProvider_.stopListening(ma(Kt),kn)}))}!function La(f,u){for(let c=0;c<u.length;++c){const _=u[c];if(!_._queryParams.loadsAllData()){const S=ea(_),F=f.queryToTagMap.get(S);f.queryToTagMap.delete(S),f.tagToQueryMap.delete(F)}}}(f,Ge)}return ae}function Yt(f,u,c,_){const S=No(f,_);if(null!=S){const F=Fa(S),W=F.path,ae=F.queryId,Re=vi(W,u);return ta(f,W,new As(Bs(ae),Re,c))}return[]}function Ln(f,u,c,_=!1){const S=u._path;let F=null,W=!1;f.syncPointTree_.foreachOnPath(S,(Kt,kn)=>{const sr=vi(Kt,S);F=F||uo(kn,sr),W=W||A(kn)});let Re,ae=f.syncPointTree_.get(S);ae?(W=W||A(ae),F=F||uo(ae,Xt())):(ae=new Vs,f.syncPointTree_=f.syncPointTree_.set(S,ae)),null!=F?Re=!0:(Re=!1,F=hr.EMPTY_NODE,f.syncPointTree_.subtree(S).foreachChild((kn,sr)=>{const xi=uo(sr,Xt());xi&&(F=F.updateImmediateChild(kn,xi))}));const Ge=wi(ae,u);if(!Ge&&!u._queryParams.loadsAllData()){const Kt=ea(u);(0,Z.hu)(!f.queryToTagMap.has(Kt),"View does not exist, but we have a tag");const kn=function ul(){return re++}();f.queryToTagMap.set(Kt,kn),f.tagToQueryMap.set(kn,Kt)}let Bt=function Qa(f,u,c,_,S,F){const W=_u(f,u,_,S,F);return f.views.has(u._queryIdentifier)||f.views.set(u._queryIdentifier,W),function vo(f,u){f.eventRegistrations_.push(u)}(W,c),function Uo(f,u){const c=f.viewCache_.eventCache,_=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(Jr,(F,W)=>{_.push(Mn(F,W))}),c.isFullyInitialized()&&_.push(rn(c.getNode())),jo(f,_,c.getNode(),u)}(W,c)}(ae,u,c,ha(f.pendingWriteTree_,S),F,Re);if(!Ge&&!W&&!_){const Kt=$s(ae,u);Bt=Bt.concat(function bc(f,u,c){const _=u._path,S=bo(f,u),F=Jo(f,c),W=f.listenProvider_.startListening(ma(u),S,F.hashFn,F.onComplete),ae=f.syncPointTree_.subtree(_);if(S)(0,Z.hu)(!A(ae.value),"If we're adding a query, it shouldn't be shadowed");else{const Re=ae.fold((Ge,$t,Bt)=>{if(!Ar(Ge)&&$t&&A($t))return[x($t).query];{let Kt=[];return $t&&(Kt=Kt.concat(Oi($t).map(kn=>kn.query))),an(Bt,(kn,sr)=>{Kt=Kt.concat(sr)}),Kt}});for(let Ge=0;Ge<Re.length;++Ge){const $t=Re[Ge];f.listenProvider_.stopListening(ma($t),bo(f,$t))}}return W}(f,u,Kt))}return Bt}function fr(f,u,c){const S=f.pendingWriteTree_,F=f.syncPointTree_.findOnPath(u,(W,ae)=>{const Ge=uo(ae,vi(W,u));if(Ge)return Ge});return ol(S,u,F,c,!0)}function Dn(f,u){return Yi(u,f.syncPointTree_,null,ha(f.pendingWriteTree_,Xt()))}function Yi(f,u,c,_){if(Ar(f.path))return _s(f,u,c,_);{const S=u.get(Xt());null==c&&null!=S&&(c=uo(S,Xt()));let F=[];const W=fn(f.path),ae=f.operationForChild(W),Re=u.children.get(W);if(Re&&ae){const Ge=c?c.getImmediateChild(W):null,$t=ka(_,W);F=F.concat(Yi(ae,Re,Ge,$t))}return S&&(F=F.concat(qs(S,f,_,c))),F}}function _s(f,u,c,_){const S=u.get(Xt());null==c&&null!=S&&(c=uo(S,Xt()));let F=[];return u.children.inorderTraversal((W,ae)=>{const Re=c?c.getImmediateChild(W):null,Ge=ka(_,W),$t=f.operationForChild(W);$t&&(F=F.concat(_s($t,ae,Re,Ge)))}),S&&(F=F.concat(qs(S,f,_,c))),F}function Jo(f,u){const c=u.query,_=bo(f,c);return{hashFn:()=>(function Ns(f){return f.viewCache_.serverCache.getNode()}(u)||hr.EMPTY_NODE).hash(),onComplete:S=>{if("ok"===S)return _?function Ke(f,u,c){const _=No(f,c);if(_){const S=Fa(_),F=S.path,W=S.queryId,ae=vi(F,u);return ta(f,F,new Ni(Bs(W),ae))}return[]}(f,c._path,_):function _e(f,u){return Dn(f,new Ni({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(f,c._path);{const F=function St(f,u){let c="Unknown Error";"too_big"===f?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?c="Client doesn't have permission to access the desired data.":"unavailable"===f&&(c="The service is unavailable");const _=new Error(f+" at "+u._path.toString()+": "+c);return _.code=f.toUpperCase(),_}(S,c);return wt(f,c,null,F)}}}}function bo(f,u){const c=ea(u);return f.queryToTagMap.get(c)}function ea(f){return f._path.toString()+"$"+f._queryIdentifier}function No(f,u){return f.tagToQueryMap.get(u)}function Fa(f){const u=f.indexOf("$");return(0,Z.hu)(-1!==u&&u<f.length-1,"Bad queryKey."),{queryId:f.substr(u+1),path:new Ht(f.substr(0,u))}}function ta(f,u,c){const _=f.syncPointTree_.get(u);return(0,Z.hu)(_,"Missing sync point for query tag that we're tracking"),qs(_,c,ha(f.pendingWriteTree_,u),null)}function ma(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function j(){return(0,Z.hu)(C,"Reference.ts has not been loaded"),C}())(f._repo,f._path):f}class wd{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new wd(c)}node(){return this.node_}}class wc{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=Yr(this.path_,u);return new wc(this.syncTree_,c)}node(){return fr(this.syncTree_,this.path_)}}const Ic=function(f,u,c){return f&&"object"==typeof f?((0,Z.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?Fo(f[".sv"],u,c):"object"==typeof f[".sv"]?Cd(f[".sv"],u):void(0,Z.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},Fo=function(f,u,c){if("timestamp"===f)return c.timestamp;(0,Z.hu)(!1,"Unexpected server value: "+f)},Cd=function(f,u,c){f.hasOwnProperty("increment")||(0,Z.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const _=f.increment;"number"!=typeof _&&(0,Z.hu)(!1,"Unexpected increment value: "+_);const S=u.node();if((0,Z.hu)(null!=S,"Expected ChildrenNode.EMPTY_NODE for nulls"),!S.isLeafNode())return _;const W=S.getValue();return"number"!=typeof W?_:W+_},is=function(f,u,c,_){return Bl(u,new wc(c,f),_)},vu=function(f,u,c){return Bl(f,new wd(u),c)};function Bl(f,u,c){const _=f.getPriority().val(),S=Ic(_,u.getImmediateChild(".priority"),c);let F;if(f.isLeafNode()){const W=f,ae=Ic(W.getValue(),u,c);return ae!==W.getValue()||S!==W.getPriority().val()?new Hn(ae,G(S)):f}{const W=f;return F=W,S!==W.getPriority().val()&&(F=F.updatePriority(new Hn(S))),W.forEachChild(Jr,(ae,Re)=>{const Ge=Bl(Re,u.getImmediateChild(ae),c);Ge!==Re&&(F=F.updateImmediateChild(ae,Ge))}),F}}class bl{constructor(u="",c=null,_={children:{},childCount:0}){this.name=u,this.parent=c,this.node=_}}function ju(f,u){let c=u instanceof Ht?u:new Ht(u),_=f,S=fn(c);for(;null!==S;){const F=(0,Z.DV)(_.node.children,S)||{children:{},childCount:0};_=new bl(S,_,F),c=zn(c),S=fn(c)}return _}function cl(f){return f.node.value}function eu(f,u){f.node.value=u,Vl(f)}function Cc(f){return f.node.childCount>0}function Hu(f,u){an(f.node.children,(c,_)=>{u(new bl(c,f,_))})}function co(f,u,c,_){c&&!_&&u(f),Hu(f,S=>{co(S,u,!0,_)}),c&&_&&u(f)}function tu(f){return new Ht(null===f.parent?f.name:tu(f.parent)+"/"+f.name)}function Vl(f){null!==f.parent&&function Dd(f,u,c){const _=function Dc(f){return void 0===cl(f)&&!Cc(f)}(c),S=(0,Z.r3)(f.node.children,u);_&&S?(delete f.node.children[u],f.node.childCount--,Vl(f)):!_&&!S&&(f.node.children[u]=c.node,f.node.childCount++,Vl(f))}(f.parent,f.name,f)}const gh=/[\[\].#$\/\u0000-\u001F\u007F]/,ff=/[\[\].#$\u0000-\u001F\u007F]/,nu=10485760,bu=function(f){return"string"==typeof f&&0!==f.length&&!gh.test(f)},dl=function(f){return"string"==typeof f&&0!==f.length&&!ff.test(f)},wu=function(f){return null===f||"string"==typeof f||"number"==typeof f&&!Tr(f)||f&&"object"==typeof f&&(0,Z.r3)(f,".sv")},ya=function(f,u,c,_){_&&void 0===u||Iu((0,Z.gK)(f,"value"),u,c)},Iu=function(f,u,c){const _=c instanceof Ht?new Bi(c,f):c;if(void 0===u)throw new Error(f+"contains undefined "+Xi(_));if("function"==typeof u)throw new Error(f+"contains a function "+Xi(_)+" with contents = "+u.toString());if(Tr(u))throw new Error(f+"contains "+u.toString()+" "+Xi(_));if("string"==typeof u&&u.length>nu/3&&(0,Z.ug)(u)>nu)throw new Error(f+"contains a string greater than "+nu+" utf8 bytes "+Xi(_)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let S=!1,F=!1;if(an(u,(W,ae)=>{if(".value"===W)S=!0;else if(".priority"!==W&&".sv"!==W&&(F=!0,!bu(W)))throw new Error(f+" contains an invalid key ("+W+") "+Xi(_)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Cs(f,u){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(u),f.byteLength_+=(0,Z.ug)(u),Gs(f)})(_,W),Iu(f,ae,_),function Qs(f){const u=f.parts_.pop();f.byteLength_-=(0,Z.ug)(u),f.parts_.length>0&&(f.byteLength_-=1)}(_)}),S&&F)throw new Error(f+' contains ".value" child '+Xi(_)+" in addition to actual children.")}},Yc=function(f,u,c,_){if(_&&void 0===u)return;const S=(0,Z.gK)(f,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(S+" must be an object containing the children to replace.");const F=[];an(u,(W,ae)=>{const Re=new Ht(W);if(Iu(S,ae,Yr(c,Re)),".priority"===Zi(Re)&&!wu(ae))throw new Error(S+"contains an invalid value for '"+Re.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");F.push(Re)}),function(f,u){let c,_;for(c=0;c<u.length;c++){_=u[c];const F=Is(_);for(let W=0;W<F.length;W++)if((".priority"!==F[W]||W!==F.length-1)&&!bu(F[W]))throw new Error(f+"contains an invalid key ("+F[W]+") in path "+_.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(So);let S=null;for(c=0;c<u.length;c++){if(_=u[c],null!==S&&Si(S,_))throw new Error(f+"contains a path "+S.toString()+" that is ancestor of another path "+_.toString());S=_}}(S,F)},wl=function(f,u,c){if(!c||void 0!==u){if(Tr(u))throw new Error((0,Z.gK)(f,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wu(u))throw new Error((0,Z.gK)(f,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cu=function(f,u,c,_){if(!(_&&void 0===c||bu(c)))throw new Error((0,Z.gK)(f,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ho=function(f,u,c,_){if(!(_&&void 0===c||dl(c)))throw new Error((0,Z.gK)(f,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},na=function(f,u){if(".info"===fn(u))throw new Error(f+" failed = Can't modify data under /.info/")},su=function(f,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!bu(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),dl(f)}(c))throw new Error((0,Z.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _a{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Du(f,u){let c=null;for(let _=0;_<u.length;_++){const S=u[_],F=S.getPath();null!==c&&!Qi(F,c.path)&&(f.eventLists_.push(c),c=null),null===c&&(c={events:[],path:F}),c.events.push(S)}c&&f.eventLists_.push(c)}function Gu(f,u,c){Du(f,c),Wu(f,_=>Qi(_,u))}function Ta(f,u,c){Du(f,c),Wu(f,_=>Si(_,u)||Si(u,_))}function Wu(f,u){f.recursionDepth_++;let c=!0;for(let _=0;_<f.eventLists_.length;_++){const S=f.eventLists_[_];S&&(u(S.path)?(Tc(f.eventLists_[_]),f.eventLists_[_]=null):c=!1)}c&&(f.eventLists_=[]),f.recursionDepth_--}function Tc(f){for(let u=0;u<f.events.length;u++){const c=f.events[u];if(null!==c){f.events[u]=null;const _=c.getEventRunner();ft&&cn("event: "+c.toString()),Pn(_)}}}const Kc="repo_interrupt";class ou{constructor(u,c,_,S){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=_,this.appCheckProvider_=S,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _a,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ti(),this.transactionQueueTree_=new bl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function el(f){const c=f.infoData_.getNode(new Ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function Ba(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:el(f)})}function Tu(f,u,c,_,S){f.dataUpdateCount++;const F=new Ht(u);c=f.interceptServerDataCallback_?f.interceptServerDataCallback_(u,c):c;let W=[];if(S)if(_){const Re=(0,Z.UI)(c,Ge=>G(Ge));W=function gn(f,u,c,_){const S=No(f,_);if(S){const F=Fa(S),W=F.path,ae=F.queryId,Re=vi(W,u),Ge=Ei.fromObject(c);return ta(f,W,new Ra(Bs(ae),Re,Ge))}return[]}(f.serverSyncTree_,F,Re,S)}else{const Re=G(c);W=Yt(f.serverSyncTree_,F,Re,S)}else if(_){const Re=(0,Z.UI)(c,Ge=>G(Ge));W=function J(f,u,c){const _=Ei.fromObject(c);return Dn(f,new Ra({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,_))}(f.serverSyncTree_,F,Re)}else{const Re=G(c);W=U(f.serverSyncTree_,F,Re)}let ae=F;W.length>0&&(ae=Aa(f,F)),Ta(f.eventQueue_,ae,W)}function zu(f,u){Zc(f,"connected",u),!1===u&&function yh(f){nl(f,"onDisconnectEvents");const u=Ba(f),c=ti();Zr(f.onDisconnect_,Xt(),(S,F)=>{const W=is(S,F,f.serverSyncTree_,u);ni(c,S,W)});let _=[];Zr(c,Xt(),(S,F)=>{_=_.concat(U(f.serverSyncTree_,S,F));const W=Zu(f,S);Aa(f,W)}),f.onDisconnect_=ti(),Ta(f.eventQueue_,Xt(),_)}(f)}function Zc(f,u,c){const _=new Ht("/.info/"+u),S=G(c);f.infoData_.updateSnapshot(_,S);const F=U(f.infoSyncTree_,_,S);Ta(f.eventQueue_,_,F)}function hl(f){return f.nextWriteId_++}function Au(f,u,c,_,S){nl(f,"set",{path:u.toString(),value:c,priority:_});const F=Ba(f),W=G(c,_),ae=fr(f.serverSyncTree_,u),Re=vu(W,ae,F),Ge=hl(f),$t=xe(f.serverSyncTree_,u,Re,Ge,!0);Du(f.eventQueue_,$t),f.server_.put(u.toString(),W.val(!0),(Kt,kn)=>{const sr="ok"===Kt;sr||En("set at "+u+" failed: "+Kt);const xi=P(f.serverSyncTree_,Ge,!sr);Ta(f.eventQueue_,u,xi),Sa(0,S,Kt,kn)});const Bt=Zu(f,u);Aa(f,Bt),Ta(f.eventQueue_,Bt,[])}function qu(f,u,c){f.server_.onDisconnectCancel(u.toString(),(_,S)=>{"ok"===_&&ri(f.onDisconnect_,u),Sa(0,c,_,S)})}function Ac(f,u,c,_){const S=G(c);f.server_.onDisconnectPut(u.toString(),S.val(!0),(F,W)=>{"ok"===F&&ni(f.onDisconnect_,u,S),Sa(0,_,F,W)})}function Ku(f,u,c){let _;_=".info"===fn(u._path)?wt(f.infoSyncTree_,u,c):wt(f.serverSyncTree_,u,c),Gu(f.eventQueue_,u._path,_)}function vs(f){f.persistentConnection_&&f.persistentConnection_.interrupt(Kc)}function nl(f,...u){let c="";f.persistentConnection_&&(c=f.persistentConnection_.id+":"),cn(c,...u)}function Sa(f,u,c,_){u&&Pn(()=>{if("ok"===c)u(null);else{const S=(c||"error").toUpperCase();let F=S;_&&(F+=": "+_);const W=new Error(F);W.code=S,u(W)}})}function Es(f,u,c){return fr(f.serverSyncTree_,u,c)||hr.EMPTY_NODE}function lu(f,u=f.transactionQueueTree_){if(u||Il(f,u),cl(u)){const c=Qc(f,u);(0,Z.hu)(c.length>0,"Sending zero length transaction queue"),c.every(S=>0===S.status)&&function xd(f,u,c){const _=c.map(Ge=>Ge.currentWriteId),S=Es(f,u,_);let F=S;const W=S.hash();for(let Ge=0;Ge<c.length;Ge++){const $t=c[Ge];(0,Z.hu)(0===$t.status,"tryToSendTransactionQueue_: items in queue should all be run."),$t.status=1,$t.retryCount++;const Bt=vi(u,$t.path);F=F.updateChild(Bt,$t.currentOutputSnapshotRaw)}const ae=F.val(!0),Re=u;f.server_.put(Re.toString(),ae,Ge=>{nl(f,"transaction put response",{path:Re.toString(),status:Ge});let $t=[];if("ok"===Ge){const Bt=[];for(let Kt=0;Kt<c.length;Kt++)c[Kt].status=2,$t=$t.concat(P(f.serverSyncTree_,c[Kt].currentWriteId)),c[Kt].onComplete&&Bt.push(()=>c[Kt].onComplete(null,!0,c[Kt].currentOutputSnapshotResolved)),c[Kt].unwatcher();Il(f,ju(f.transactionQueueTree_,u)),lu(f,f.transactionQueueTree_),Ta(f.eventQueue_,u,$t);for(let Kt=0;Kt<Bt.length;Kt++)Pn(Bt[Kt])}else{if("datastale"===Ge)for(let Bt=0;Bt<c.length;Bt++)c[Bt].status=3===c[Bt].status?4:0;else{En("transaction at "+Re.toString()+" failed: "+Ge);for(let Bt=0;Bt<c.length;Bt++)c[Bt].status=4,c[Bt].abortReason=Ge}Aa(f,u)}},W)}(f,tu(u),c)}else Cc(u)&&Hu(u,c=>{lu(f,c)})}function Aa(f,u){const c=xc(f,u),_=tu(c);return function fl(f,u,c){if(0===u.length)return;const _=[];let S=[];const W=u.filter(ae=>0===ae.status).map(ae=>ae.currentWriteId);for(let ae=0;ae<u.length;ae++){const Re=u[ae],Ge=vi(c,Re.path);let Bt,$t=!1;if((0,Z.hu)(null!==Ge,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Re.status)$t=!0,Bt=Re.abortReason,S=S.concat(P(f.serverSyncTree_,Re.currentWriteId,!0));else if(0===Re.status)if(Re.retryCount>=25)$t=!0,Bt="maxretry",S=S.concat(P(f.serverSyncTree_,Re.currentWriteId,!0));else{const Kt=Es(f,Re.path,W);Re.currentInputSnapshot=Kt;const kn=u[ae].update(Kt.val());if(void 0!==kn){Iu("transaction failed: Data returned ",kn,Re.path);let sr=G(kn);"object"==typeof kn&&null!=kn&&(0,Z.r3)(kn,".priority")||(sr=sr.updatePriority(Kt.getPriority()));const Zs=Re.currentWriteId,Sl=Ba(f),sa=vu(sr,Kt,Sl);Re.currentOutputSnapshotRaw=sr,Re.currentOutputSnapshotResolved=sa,Re.currentWriteId=hl(f),W.splice(W.indexOf(Zs),1),S=S.concat(xe(f.serverSyncTree_,Re.path,sa,Re.currentWriteId,Re.applyLocally)),S=S.concat(P(f.serverSyncTree_,Zs,!0))}else $t=!0,Bt="nodata",S=S.concat(P(f.serverSyncTree_,Re.currentWriteId,!0))}Ta(f.eventQueue_,c,S),S=[],$t&&(u[ae].status=2,setTimeout(u[ae].unwatcher,Math.floor(0)),u[ae].onComplete&&_.push("nodata"===Bt?()=>u[ae].onComplete(null,!1,u[ae].currentInputSnapshot):()=>u[ae].onComplete(new Error(Bt),!1,null)))}Il(f,f.transactionQueueTree_);for(let ae=0;ae<_.length;ae++)Pn(_[ae]);lu(f,f.transactionQueueTree_)}(f,Qc(f,c),_),_}function xc(f,u){let c,_=f.transactionQueueTree_;for(c=fn(u);null!==c&&void 0===cl(_);)_=ju(_,c),c=fn(u=zn(u));return _}function Qc(f,u){const c=[];return Xc(f,u,c),c.sort((_,S)=>_.order-S.order),c}function Xc(f,u,c){const _=cl(u);if(_)for(let S=0;S<_.length;S++)c.push(_[S]);Hu(u,S=>{Xc(f,S,c)})}function Il(f,u){const c=cl(u);if(c){let _=0;for(let S=0;S<c.length;S++)2!==c[S].status&&(c[_]=c[S],_++);c.length=_,eu(u,c.length>0?c:void 0)}Hu(u,_=>{Il(f,_)})}function Zu(f,u){const c=tu(xc(f,u)),_=ju(f.transactionQueueTree_,u);return function Eu(f,u,c){let _=c?f:f.parent;for(;null!==_;){if(u(_))return!0;_=_.parent}}(_,S=>{xu(f,S)}),xu(f,_),co(_,S=>{xu(f,S)}),c}function xu(f,u){const c=cl(u);if(c){const _=[];let S=[],F=-1;for(let W=0;W<c.length;W++)3===c[W].status||(1===c[W].status?((0,Z.hu)(F===W-1,"All SENT items should be at beginning of queue."),F=W,c[W].status=3,c[W].abortReason="set"):((0,Z.hu)(0===c[W].status,"Unexpected transaction status in abort"),c[W].unwatcher(),S=S.concat(P(f.serverSyncTree_,c[W].currentWriteId,!0)),c[W].onComplete&&_.push(c[W].onComplete.bind(null,new Error("set"),!1,null))));-1===F?eu(u,void 0):c.length=F+1,Ta(f.eventQueue_,tu(u),S);for(let W=0;W<_.length;W++)Pn(_[W])}}const Mu=function(f,u){const c=Jc(f),_=c.namespace;return"firebase.com"===c.domain&&yn(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!_||"undefined"===_)&&"localhost"!==c.domain&&yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&En("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new et(c.host,c.secure,_,"ws"===c.scheme||"wss"===c.scheme,u,"",_!==c.subdomain),path:new Ht(c.pathString)}},Jc=function(f){let u="",c="",_="",S="",F="",W=!0,ae="https",Re=443;if("string"==typeof f){let Ge=f.indexOf("//");Ge>=0&&(ae=f.substring(0,Ge-1),f=f.substring(Ge+2));let $t=f.indexOf("/");-1===$t&&($t=f.length);let Bt=f.indexOf("?");-1===Bt&&(Bt=f.length),u=f.substring(0,Math.min($t,Bt)),$t<Bt&&(S=function ho(f){let u="";const c=f.split("/");for(let _=0;_<c.length;_++)if(c[_].length>0){let S=c[_];try{S=decodeURIComponent(S.replace(/\+/g," "))}catch(F){}u+="/"+S}return u}(f.substring($t,Bt)));const Kt=function gi(f){const u={};"?"===f.charAt(0)&&(f=f.substring(1));for(const c of f.split("&")){if(0===c.length)continue;const _=c.split("=");2===_.length?u[decodeURIComponent(_[0])]=decodeURIComponent(_[1]):En(`Invalid query segment '${c}' in query '${f}'`)}return u}(f.substring(Math.min(f.length,Bt)));Ge=u.indexOf(":"),Ge>=0?(W="https"===ae||"wss"===ae,Re=parseInt(u.substring(Ge+1),10)):Ge=u.length;const kn=u.slice(0,Ge);if("localhost"===kn.toLowerCase())c="localhost";else if(kn.split(".").length<=2)c=kn;else{const sr=u.indexOf(".");_=u.substring(0,sr).toLowerCase(),c=u.substring(sr+1),F=_}"ns"in Kt&&(F=Kt.ns)}return{host:u,port:Re,domain:c,subdomain:_,secure:W,scheme:ae,pathString:S,namespace:F}};class pl{constructor(u,c,_,S){this.eventType=u,this.eventRegistration=c,this.snapshot=_,this.prevName=S}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Z.Wl)(this.snapshot.exportVal())}}class ed{constructor(u,c,_){this.eventRegistration=u,this.error=c,this.path=_}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Lo{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,Z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class Ru{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new Z.BH;return qu(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){na("OnDisconnect.remove",this._path);const u=new Z.BH;return Ac(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){na("OnDisconnect.set",this._path),ya("OnDisconnect.set",u,this._path,!1);const c=new Z.BH;return Ac(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){na("OnDisconnect.setWithPriority",this._path),ya("OnDisconnect.setWithPriority",u,this._path,!1),wl("OnDisconnect.setWithPriority",c,!1);const _=new Z.BH;return function Sd(f,u,c,_,S){const F=G(c,_);f.server_.onDisconnectPut(u.toString(),F.val(!0),(W,ae)=>{"ok"===W&&ni(f.onDisconnect_,u,F),Sa(0,S,W,ae)})}(this._repo,this._path,u,c,_.wrapCallback(()=>{})),_.promise}update(u){na("OnDisconnect.update",this._path),Yc("OnDisconnect.update",u,this._path,!1);const c=new Z.BH;return function Yu(f,u,c,_){if((0,Z.xb)(c))return cn("onDisconnect().update() called with empty data.  Don't do anything."),void Sa(0,_,"ok",void 0);f.server_.onDisconnectMerge(u.toString(),c,(S,F)=>{"ok"===S&&an(c,(W,ae)=>{const Re=G(ae);ni(f.onDisconnect_,Yr(u,W),Re)}),Sa(0,_,S,F)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class Ys{constructor(u,c,_,S){this._repo=u,this._path=c,this._queryParams=_,this._orderByCalled=S}get key(){return Ar(this._path)?null:Zi(this._path)}get ref(){return new wo(this._repo,this._path)}get _queryIdentifier(){const u=Dt(this._queryParams),c=nr(u);return"{}"===c?"default":c}get _queryObject(){return Dt(this._queryParams)}isEqual(u){if(!((u=(0,Z.m9)(u))instanceof Ys))return!1;const c=this._repo===u._repo,_=Qi(this._path,u._path);return c&&_&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ms(f){let u="";for(let c=f.pieceNum_;c<f.pieces_.length;c++)""!==f.pieces_[c]&&(u+="/"+encodeURIComponent(String(f.pieces_[c])));return u||"/"}(this._path)}}function $l(f,u){if(!0===f._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function Go(f){let u=null,c=null;if(f.hasStart()&&(u=f.getIndexStartValue()),f.hasEnd()&&(c=f.getIndexEndValue()),f.getIndex()===ci){const _="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",S="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(f.hasStart()){if(f.getIndexStartName()!==er)throw new Error(_);if("string"!=typeof u)throw new Error(S)}if(f.hasEnd()){if(f.getIndexEndName()!==qt)throw new Error(_);if("string"!=typeof c)throw new Error(S)}}else if(f.getIndex()===Jr){if(null!=u&&!wu(u)||null!=c&&!wu(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Z.hu)(f.getIndex()instanceof V||f.getIndex()===d,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function uu(f){if(f.hasStart()&&f.hasEnd()&&f.hasLimit()&&!f.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class wo extends Ys{constructor(u,c){super(u,c,new $i,!1)}get parent(){const u=ls(this._path);return null===u?null:new wo(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class no{constructor(u,c,_){this._node=u,this.ref=c,this._index=_}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new Ht(u),_=du(this.ref,u);return new no(this._node.getChild(c),_,Jr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(_,S)=>u(new no(S,du(this.ref,_),Jr)))}hasChild(u){const c=new Ht(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function cu(f,u){return(f=(0,Z.m9)(f))._checkNotDeleted("ref"),void 0!==u?du(f._root,u):f._root}function Ur(f,u){(f=(0,Z.m9)(f))._checkNotDeleted("refFromURL");const c=Mu(u,f._repo.repoInfo_.nodeAdmin);su("refFromURL",c);const _=c.repoInfo;return!f._repo.repoInfo_.isCustomHost()&&_.host!==f._repo.repoInfo_.host&&yn("refFromURL: Host name does not match the current database: (found "+_.host+" but expected "+f._repo.repoInfo_.host+")"),cu(f,c.path.toString())}function du(f,u){return null===fn((f=(0,Z.m9)(f))._path)?(c=u,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Ho("child","path",c,!1)):Ho("child","path",u,!1),new wo(f._repo,Yr(f._path,u));var c}function Cl(f,u){f=(0,Z.m9)(f),na("set",f._path),ya("set",u,f._path,!1);const c=new Z.BH;return Au(f._repo,f._path,u,null,c.wrapCallback(()=>{})),c.promise}function Mc(f,u){Yc("update",u,f._path,!1);const c=new Z.BH;return function tl(f,u,c,_){nl(f,"update",{path:u.toString(),value:c});let S=!0;const F=Ba(f),W={};if(an(c,(ae,Re)=>{S=!1,W[ae]=is(Yr(u,ae),G(Re),f.serverSyncTree_,F)}),S)cn("update() called with empty data.  Don't do anything."),Sa(0,_,"ok",void 0);else{const ae=hl(f),Re=function Ct(f,u,c,_){!function $n(f,u,c,_){(0,Z.hu)(_>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:u,children:c,writeId:_,visible:!0}),f.visibleWrites=qa(f.visibleWrites,u,c),f.lastWriteId=_}(f.pendingWriteTree_,u,c,_);const S=Ei.fromObject(c);return Dn(f,new Ra({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,S))}(f.serverSyncTree_,u,W,ae);Du(f.eventQueue_,Re),f.server_.merge(u.toString(),c,(Ge,$t)=>{const Bt="ok"===Ge;Bt||En("update at "+u+" failed: "+Ge);const Kt=P(f.serverSyncTree_,ae,!Bt),kn=Kt.length>0?Aa(f,u):u;Ta(f.eventQueue_,kn,Kt),Sa(0,_,Ge,$t)}),an(c,Ge=>{const $t=Zu(f,Yr(u,Ge));Aa(f,$t)}),Ta(f.eventQueue_,u,[])}}(f._repo,f._path,u,c.wrapCallback(()=>{})),c.promise}function td(f){f=(0,Z.m9)(f);const u=new Lo(()=>{}),c=new Ou(u);return function Su(f,u,c){const _=function $r(f,u){const c=u._path;let _=null;f.syncPointTree_.foreachOnPath(c,(Ge,$t)=>{const Bt=vi(Ge,c);_=_||uo($t,Bt)});let S=f.syncPointTree_.get(c);S?_=_||uo(S,Xt()):(S=new Vs,f.syncPointTree_=f.syncPointTree_.set(c,S));const F=null!=_,W=F?new Ia(_,!0,!1):null;return function ll(f){return xs(f.viewCache_)}(_u(S,u,ha(f.pendingWriteTree_,u._path),F?W.getNode():hr.EMPTY_NODE,F))}(f.serverSyncTree_,u);return null!=_?Promise.resolve(_):f.server_.get(u).then(S=>{const F=G(S).withIndex(u._queryParams.getIndex());let W;if(Ln(f.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())W=U(f.serverSyncTree_,u._path,F);else{const ae=bo(f.serverSyncTree_,u);W=Yt(f.serverSyncTree_,u._path,F,ae)}return Ta(f.eventQueue_,u._path,W),wt(f.serverSyncTree_,u,c,null,!0),F},S=>(nl(f,"get for query "+(0,Z.Wl)(u)+" failed: "+S),Promise.reject(new Error(S))))}(f._repo,f,c).then(_=>new no(_,new wo(f._repo,f._path),f._queryParams.getIndex()))}class Ou{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const _=c._queryParams.getIndex();return new pl("value",this,new no(u.snapshotNode,new wo(c._repo,c._path),_))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new ed(this,u,c):null}matches(u){return u instanceof Ou&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ju{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new ed(this,u,c):null}createEvent(u,c){(0,Z.hu)(null!=u.childName,"Child events should have a childName.");const _=du(new wo(c._repo,c._path),u.childName),S=c._queryParams.getIndex();return new pl(u.type,this,new no(u.snapshotNode,_,S),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof Ju&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fu(f,u,c,_,S){let F;if("object"==typeof _&&(F=void 0,S=_),"function"==typeof _&&(F=_),S&&S.onlyOnce){const Re=c,Ge=($t,Bt)=>{Ku(f._repo,f,ae),Re($t,Bt)};Ge.userCallback=c.userCallback,Ge.context=c.context,c=Ge}const W=new Lo(c,F||void 0),ae="value"===u?new Ou(W):new Ju(u,W);return function Ad(f,u,c){let _;_=".info"===fn(u._path)?Ln(f.infoSyncTree_,u,c):Ln(f.serverSyncTree_,u,c),Gu(f.eventQueue_,u._path,_)}(f._repo,f,ae),()=>Ku(f._repo,f,ae)}function Ks(f,u,c,_){return fu(f,"value",u,c,_)}function Rc(f,u,c,_){return fu(f,"child_added",u,c,_)}function Ul(f,u,c,_){return fu(f,"child_changed",u,c,_)}function nd(f,u,c,_){return fu(f,"child_moved",u,c,_)}function ml(f,u,c,_){return fu(f,"child_removed",u,c,_)}function ws(f,u,c){let _=null;const S=c?new Lo(c):null;"value"===u?_=new Ou(S):u&&(_=new Ju(u,S)),Ku(f._repo,f,_)}class va{}class ec extends va{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ya("endAt",this._value,u._path,!0);const c=X(u._queryParams,this._value,this._key);if(uu(c),Go(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ys(u._repo,u._path,c,u._orderByCalled)}}class xa extends va{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ya("endBefore",this._value,u._path,!1);const c=function $(f,u,c){let _,S;return f.index_===ci?("string"==typeof u&&(u=Pt(u)),S=X(f,u,c)):(_=null==c?er:Pt(c),S=X(f,u,_)),S.endBeforeSet_=!0,S}(u._queryParams,this._value,this._key);if(uu(c),Go(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ys(u._repo,u._path,c,u._orderByCalled)}}class rd extends va{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ya("startAt",this._value,u._path,!0);const c=io(u._queryParams,this._value,this._key);if(uu(c),Go(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ys(u._repo,u._path,c,u._orderByCalled)}}class Rd extends va{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ya("startAfter",this._value,u._path,!1);const c=function L(f,u,c){let _;if(f.index_===ci)"string"==typeof u&&(u=It(u)),_=io(f,u,c);else{let S;S=null==c?qt:It(c),_=io(f,u,S)}return _.startAfterSet_=!0,_}(u._queryParams,this._value,this._key);if(uu(c),Go(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ys(u._repo,u._path,c,u._orderByCalled)}}class g extends va{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ys(u._repo,u._path,function zi(f,u){const c=f.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}class M extends va{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ys(u._repo,u._path,function Ai(f,u){const c=f.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}class ce extends va{constructor(u){super(),this._path=u}_apply(u){$l(u,"orderByChild");const c=new Ht(this._path);if(Ar(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const _=new V(c),S=ie(u._queryParams,_);return Go(S),new Ys(u._repo,u._path,S,!0)}}class jt extends va{_apply(u){$l(u,"orderByKey");const c=ie(u._queryParams,ci);return Go(c),new Ys(u._repo,u._path,c,!0)}}class qn extends va{_apply(u){$l(u,"orderByPriority");const c=ie(u._queryParams,Jr);return Go(c),new Ys(u._repo,u._path,c,!0)}}class _r extends va{_apply(u){$l(u,"orderByValue");const c=ie(u._queryParams,d);return Go(c),new Ys(u._repo,u._path,c,!0)}}class Ma extends va{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(ya("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ec(this._value,this._key)._apply(new rd(this._value,this._key)._apply(u))}}function Wo(f,...u){let c=(0,Z.m9)(f);for(const _ of u)c=_._apply(c);return c}(function Za(f){(0,Z.hu)(!Eo,"__referenceConstructor has already been defined"),Eo=f})(wo),function N(f){(0,Z.hu)(!C,"__referenceConstructor has already been defined"),C=f}(wo);const id={};function zo(f,u,c,_,S){let F=_||f.options.databaseURL;void 0===F&&(f.options.projectId||yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cn("Using default host for project ",f.options.projectId),F=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Re,Ge,W=Mu(F,S),ae=W.repoInfo;"undefined"!=typeof process&&process.env&&(Ge=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ge?(Re=!0,F=`http://${Ge}?ns=${ae.namespace}`,W=Mu(F,S),ae=W.repoInfo):Re=!W.repoInfo.secure;const $t=S&&Re?new jr(jr.OWNER):new cr(f.name,f.options,u);su("Invalid Firebase Database URL",W),Ar(W.path)||yn("Database URL must point to the root of a Firebase Database (not including a child path).");const Bt=function Oc(f,u,c,_){let S=id[u.name];S||(S={},id[u.name]=S);let F=S[f.toURLString()];return F&&yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),F=new ou(f,false,c,_),S[f.toURLString()]=F,F}(ae,f,$t,new Or(f.name,c));return new kc(Bt,f)}class kc{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Sc(f,u,c){if(f.stats_=mt(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new Lt(f.repoInfo_,(_,S,F,W)=>{Tu(f,_,S,F,W)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>zu(f,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Z.Wl)(c)}catch(_){throw new Error("Invalid authOverride provided: "+_)}}f.persistentConnection_=new Mi(f.repoInfo_,u,(_,S,F,W)=>{Tu(f,_,S,F,W)},_=>{zu(f,_)},_=>{!function Td(f,u){an(u,(c,_)=>{Zc(f,c,_)})}(f,_)},f.authTokenProvider_,f.appCheckProvider_,c),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(_=>{f.server_.refreshAuthToken(_)}),f.appCheckProvider_.addTokenChangeListener(_=>{f.server_.refreshAppCheckToken(_.token)}),f.statsReporter_=function Be(f,u){const c=f.toString();return Sr[c]||(Sr[c]=u()),Sr[c]}(f.repoInfo_,()=>new Ro(f.stats_,f.server_)),f.infoData_=new Rn,f.infoSyncTree_=new Ae({startListening:(_,S,F,W)=>{let ae=[];const Re=f.infoData_.getNode(_._path);return Re.isEmpty()||(ae=U(f.infoSyncTree_,_._path,Re),setTimeout(()=>{W("ok")},0)),ae},stopListening:()=>{}}),Zc(f,"connected",!1),f.serverSyncTree_=new Ae({startListening:(_,S,F,W)=>(f.server_.listen(_,F,S,(ae,Re)=>{const Ge=W(ae,Re);Ta(f.eventQueue_,_._path,Ge)}),[]),stopListening:(_,S)=>{f.server_.unlisten(_,S)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wo(this._repo,Xt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function vh(f,u){const c=id[u];(!c||c[f.key]!==f)&&yn(`Database ${u}(${f.repoInfo_}) has already been deleted.`),vs(f),delete c[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&yn("Cannot call "+u+" on a deleted database.")}}function Hl(){Ti.IS_TRANSPORT_INITIALIZED&&En("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function od(){Hl(),ui.forceDisallow()}function pf(){Hl(),fi.forceDisallow(),ui.forceAllow()}function _p(f,u){Nt(f,u)}const Ep={".sv":"timestamp"};class wp{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Mi.prototype.simpleListen=function(f,u){this.sendRequest("q",{p:f},u)},Mi.prototype.echo=function(f,u){this.sendRequest("echo",{d:f},u)},function vp(f){Je(Ee.SDK_VERSION),(0,Ee._registerComponent)(new je.wA("database",(u,{instanceIdentifier:c})=>zo(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,Ee.registerVersion)(he,"0.13.9",f),(0,Ee.registerVersion)(he,"0.13.9","esm2017")}();const Dp=new te.Yd("@firebase/database-compat"),kd=function(f){Dp.warn("FIREBASE WARNING: "+f)};class ia{constructor(u){this._delegate=u}cancel(u){(0,Z.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Z.Wj)("OnDisconnect.cancel","onComplete",u,!0);const c=this._delegate.cancel();return u&&c.then(()=>u(null),_=>u(_)),c}remove(u){(0,Z.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Z.Wj)("OnDisconnect.remove","onComplete",u,!0);const c=this._delegate.remove();return u&&c.then(()=>u(null),_=>u(_)),c}set(u,c){(0,Z.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Z.Wj)("OnDisconnect.set","onComplete",c,!0);const _=this._delegate.set(u);return c&&_.then(()=>c(null),S=>c(S)),_}setWithPriority(u,c,_){(0,Z.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Z.Wj)("OnDisconnect.setWithPriority","onComplete",_,!0);const S=this._delegate.setWithPriority(u,c);return _&&S.then(()=>_(null),F=>_(F)),S}update(u,c){if((0,Z.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const S={};for(let F=0;F<u.length;++F)S[""+F]=u[F];u=S,kd("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Z.Wj)("OnDisconnect.update","onComplete",c,!0);const _=this._delegate.update(u);return c&&_.then(()=>c(null),S=>c(S)),_}}class Io{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return(0,Z.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tl{constructor(u,c){this._database=u,this._delegate=c}val(){return(0,Z.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Z.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Z.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Z.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,Z.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),Ho("DataSnapshot.child","path",u,!1),new Tl(this._database,this._delegate.child(u))}hasChild(u){return(0,Z.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ho("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,Z.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,Z.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Z.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(c=>u(new Tl(this._database,c)))}hasChildren(){return(0,Z.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Z.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Z.Dv)("DataSnapshot.ref",0,0,arguments.length),new ss(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class po{constructor(u,c){this.database=u,this._delegate=c}on(u,c,_,S){var F;(0,Z.Dv)("Query.on",2,4,arguments.length),(0,Z.Wj)("Query.on","callback",c,!1);const W=po.getCancelAndContextArgs_("Query.on",_,S),ae=(Ge,$t)=>{c.call(W.context,new Tl(this.database,Ge),$t)};ae.userCallback=c,ae.context=W.context;const Re=null===(F=W.cancel)||void 0===F?void 0:F.bind(W.context);switch(u){case"value":return Ks(this._delegate,ae,Re),c;case"child_added":return Rc(this._delegate,ae,Re),c;case"child_removed":return ml(this._delegate,ae,Re),c;case"child_changed":return Ul(this._delegate,ae,Re),c;case"child_moved":return nd(this._delegate,ae,Re),c;default:throw new Error((0,Z.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,c,_){if((0,Z.Dv)("Query.off",0,3,arguments.length),function(f,u,c){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Z.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,Z.Wj)("Query.off","callback",c,!0),(0,Z.lb)("Query.off","context",_,!0),c){const S=()=>{};S.userCallback=c,S.context=_,ws(this._delegate,u,S)}else ws(this._delegate,u)}get(){return td(this._delegate).then(u=>new Tl(this.database,u))}once(u,c,_,S){(0,Z.Dv)("Query.once",1,4,arguments.length),(0,Z.Wj)("Query.once","callback",c,!0);const F=po.getCancelAndContextArgs_("Query.once",_,S),W=new Z.BH,ae=(Ge,$t)=>{const Bt=new Tl(this.database,Ge);c&&c.call(F.context,Bt,$t),W.resolve(Bt)};ae.userCallback=c,ae.context=F.context;const Re=Ge=>{F.cancel&&F.cancel.call(F.context,Ge),W.reject(Ge)};switch(u){case"value":Ks(this._delegate,ae,Re,{onlyOnce:!0});break;case"child_added":Rc(this._delegate,ae,Re,{onlyOnce:!0});break;case"child_removed":ml(this._delegate,ae,Re,{onlyOnce:!0});break;case"child_changed":Ul(this._delegate,ae,Re,{onlyOnce:!0});break;case"child_moved":nd(this._delegate,ae,Re,{onlyOnce:!0});break;default:throw new Error((0,Z.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return W.promise}limitToFirst(u){return(0,Z.Dv)("Query.limitToFirst",1,1,arguments.length),new po(this.database,Wo(this._delegate,function E(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new g(f)}(u)))}limitToLast(u){return(0,Z.Dv)("Query.limitToLast",1,1,arguments.length),new po(this.database,Wo(this._delegate,function Q(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new M(f)}(u)))}orderByChild(u){return(0,Z.Dv)("Query.orderByChild",1,1,arguments.length),new po(this.database,Wo(this._delegate,function ct(f){if("$key"===f)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===f)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===f)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ho("orderByChild","path",f,!1),new ce(f)}(u)))}orderByKey(){return(0,Z.Dv)("Query.orderByKey",0,0,arguments.length),new po(this.database,Wo(this._delegate,function _n(){return new jt}()))}orderByPriority(){return(0,Z.Dv)("Query.orderByPriority",0,0,arguments.length),new po(this.database,Wo(this._delegate,function Rr(){return new qn}()))}orderByValue(){return(0,Z.Dv)("Query.orderByValue",0,0,arguments.length),new po(this.database,Wo(this._delegate,function fo(){return new _r}()))}startAt(u=null,c){return(0,Z.Dv)("Query.startAt",0,2,arguments.length),new po(this.database,Wo(this._delegate,function Dl(f=null,u){return Cu("startAt","key",u,!0),new rd(f,u)}(u,c)))}startAfter(u=null,c){return(0,Z.Dv)("Query.startAfter",0,2,arguments.length),new po(this.database,Wo(this._delegate,function D(f,u){return Cu("startAfter","key",u,!0),new Rd(f,u)}(u,c)))}endAt(u=null,c){return(0,Z.Dv)("Query.endAt",0,2,arguments.length),new po(this.database,Wo(this._delegate,function tc(f,u){return Cu("endAt","key",u,!0),new ec(f,u)}(u,c)))}endBefore(u=null,c){return(0,Z.Dv)("Query.endBefore",0,2,arguments.length),new po(this.database,Wo(this._delegate,function Md(f,u){return Cu("endBefore","key",u,!0),new xa(f,u)}(u,c)))}equalTo(u,c){return(0,Z.Dv)("Query.equalTo",1,2,arguments.length),new po(this.database,Wo(this._delegate,function jl(f,u){return Cu("equalTo","key",u,!0),new Ma(f,u)}(u,c)))}toString(){return(0,Z.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Z.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,Z.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof po))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,c,_){const S={cancel:void 0,context:void 0};if(c&&_)S.cancel=c,(0,Z.Wj)(u,"cancel",S.cancel,!0),S.context=_,(0,Z.lb)(u,"context",S.context,!0);else if(c)if("object"==typeof c&&null!==c)S.context=c;else{if("function"!=typeof c)throw new Error((0,Z.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");S.cancel=c}return S}get ref(){return new ss(this.database,new wo(this._delegate._repo,this._delegate._path))}}class ss extends po{constructor(u,c){super(u,new Ys(c._repo,c._path,new $i,!1)),this.database=u,this._delegate=c}getKey(){return(0,Z.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,Z.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new ss(this.database,du(this._delegate,u))}getParent(){(0,Z.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new ss(this.database,u):null}getRoot(){return(0,Z.Dv)("Reference.root",0,0,arguments.length),new ss(this.database,this._delegate.root)}set(u,c){(0,Z.Dv)("Reference.set",1,2,arguments.length),(0,Z.Wj)("Reference.set","onComplete",c,!0);const _=Cl(this._delegate,u);return c&&_.then(()=>c(null),S=>c(S)),_}update(u,c){if((0,Z.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const S={};for(let F=0;F<u.length;++F)S[""+F]=u[F];u=S,kd("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}na("Reference.update",this._delegate._path),(0,Z.Wj)("Reference.update","onComplete",c,!0);const _=Mc(this._delegate,u);return c&&_.then(()=>c(null),S=>c(S)),_}setWithPriority(u,c,_){(0,Z.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Z.Wj)("Reference.setWithPriority","onComplete",_,!0);const S=function ra(f,u,c){if(na("setWithPriority",f._path),ya("setWithPriority",u,f._path,!1),wl("setWithPriority",c,!1),".length"===f.key||".keys"===f.key)throw"setWithPriority failed: "+f.key+" is a read-only object.";const _=new Z.BH;return Au(f._repo,f._path,u,c,_.wrapCallback(()=>{})),_.promise}(this._delegate,u,c);return _&&S.then(()=>_(null),F=>_(F)),S}remove(u){(0,Z.Dv)("Reference.remove",0,1,arguments.length),(0,Z.Wj)("Reference.remove","onComplete",u,!0);const c=function Qu(f){return na("remove",f._path),Cl(f,null)}(this._delegate);return u&&c.then(()=>u(null),_=>u(_)),c}transaction(u,c,_){(0,Z.Dv)("Reference.transaction",1,3,arguments.length),(0,Z.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,Z.Wj)("Reference.transaction","onComplete",c,!0),function(f,u,c,_){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,Z.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,_);const S=function Ip(f,u,c){var _;if(f=(0,Z.m9)(f),na("Reference.transaction",f._path),".length"===f.key||".keys"===f.key)throw"Reference.transaction failed: "+f.key+" is a read-only object.";const S=null===(_=null==c?void 0:c.applyLocally)||void 0===_||_,F=new Z.BH,ae=Ks(f,()=>{});return function _h(f,u,c,_,S,F){nl(f,"transaction on "+u);const W={path:u,update:c,onComplete:_,status:null,order:Xe(),applyLocally:F,retryCount:0,unwatcher:S,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ae=Es(f,u,void 0);W.currentInputSnapshot=ae;const Re=W.update(ae.val());if(void 0===Re)W.unwatcher(),W.currentOutputSnapshotRaw=null,W.currentOutputSnapshotResolved=null,W.onComplete&&W.onComplete(null,!1,W.currentInputSnapshot);else{Iu("transaction failed: Data returned ",Re,W.path),W.status=0;const Ge=ju(f.transactionQueueTree_,u),$t=cl(Ge)||[];let Bt;$t.push(W),eu(Ge,$t),"object"==typeof Re&&null!==Re&&(0,Z.r3)(Re,".priority")?(Bt=(0,Z.DV)(Re,".priority"),(0,Z.hu)(wu(Bt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Bt=(fr(f.serverSyncTree_,u)||hr.EMPTY_NODE).getPriority().val();const Kt=Ba(f),kn=G(Re,Bt),sr=vu(kn,ae,Kt);W.currentOutputSnapshotRaw=kn,W.currentOutputSnapshotResolved=sr,W.currentWriteId=hl(f);const xi=xe(f.serverSyncTree_,u,sr,W.currentWriteId,W.applyLocally);Ta(f.eventQueue_,u,xi),lu(f,f.transactionQueueTree_)}}(f._repo,f._path,u,(Re,Ge,$t)=>{let Bt=null;Re?F.reject(Re):(Bt=new no($t,new wo(f._repo,f._path),Jr),F.resolve(new wp(Ge,Bt)))},ae,S),F.promise}(this._delegate,u,{applyLocally:_}).then(F=>new Io(F.committed,new Tl(this.database,F.snapshot)));return c&&S.then(F=>c(null,F.committed,F.snapshot),F=>c(F,!1,null)),S}setPriority(u,c){(0,Z.Dv)("Reference.setPriority",1,2,arguments.length),(0,Z.Wj)("Reference.setPriority","onComplete",c,!0);const _=function Xu(f,u){f=(0,Z.m9)(f),na("setPriority",f._path),wl("setPriority",u,!1);const c=new Z.BH;return Au(f._repo,Yr(f._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,u);return c&&_.then(()=>c(null),S=>c(S)),_}push(u,c){(0,Z.Dv)("Reference.push",0,2,arguments.length),(0,Z.Wj)("Reference.push","onComplete",c,!0);const _=function gl(f,u){f=(0,Z.m9)(f),na("push",f._path),ya("push",u,f._path,!0);const c=el(f._repo),_=ke(c),S=du(f,_),F=du(f,_);let W;return W=null!=u?Cl(F,u).then(()=>F):Promise.resolve(F),S.then=W.then.bind(W),S.catch=W.then.bind(W,void 0),S}(this._delegate,u),S=_.then(W=>new ss(this.database,W));c&&S.then(()=>c(null),W=>c(W));const F=new ss(this.database,_);return F.then=S.then.bind(S),F.catch=S.catch.bind(S,void 0),F}onDisconnect(){return na("Reference.onDisconnect",this._delegate._path),new ia(new Ru(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Ea{constructor(u,c){this._delegate=u,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:od,forceLongPolling:pf}}useEmulator(u,c,_={}){!function mf(f,u,c,_={}){(f=(0,Z.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&yn("Cannot call useEmulator() after instance has already been initialized.");const S=f._repoInternal;let F;if(S.repoInfo_.nodeAdmin)_.mockUserToken&&yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),F=new jr(jr.OWNER);else if(_.mockUserToken){const W="string"==typeof _.mockUserToken?_.mockUserToken:(0,Z.Sg)(_.mockUserToken,f.app.options.projectId);F=new jr(W)}!function sd(f,u,c,_){f.repoInfo_=new et(`${u}:${c}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams),_&&(f.authTokenProvider_=_)}(S,u,c,F)}(this._delegate,u,c,_)}ref(u){if((0,Z.Dv)("database.ref",0,1,arguments.length),u instanceof ss){const c=Ur(this._delegate,u.toString());return new ss(this,c)}{const c=cu(this._delegate,u);return new ss(this,c)}}refFromURL(u){(0,Z.Dv)("database.refFromURL",1,1,arguments.length);const _=Ur(this._delegate,u);return new ss(this,_)}goOffline(){return(0,Z.Dv)("database.goOffline",0,0,arguments.length),function Eh(f){(f=(0,Z.m9)(f))._checkNotDeleted("goOffline"),vs(f._repo)}(this._delegate)}goOnline(){return(0,Z.Dv)("database.goOnline",0,0,arguments.length),function ad(f){(f=(0,Z.m9)(f))._checkNotDeleted("goOnline"),function au(f){f.persistentConnection_&&f.persistentConnection_.resume(Kc)}(f._repo)}(this._delegate)}}Ea.ServerValue={TIMESTAMP:function yf(){return Ep}(),increment:f=>function bp(f){return{".sv":{increment:f}}}(f)};var Sp=Object.freeze({__proto__:null,initStandalone:function bh({app:f,url:u,version:c,customAuthImpl:_,namespace:S,nodeAdmin:F=!1}){Je(c);const W=new je.zt("auth-internal",new je.H0("database-standalone"));return W.setComponent(new je.wA("auth-internal",()=>_,"PRIVATE")),{instance:new Ea(zo(f,W,void 0,u,F),f),namespace:S}}});const bf=Ea.ServerValue;!function ld(f){f.INTERNAL.registerComponent(new je.wA("database-compat",(u,{instanceIdentifier:c})=>{const _=u.getProvider("app-compat").getImmediate(),S=u.getProvider("database").getImmediate({identifier:c});return new Ea(S,_)},"PUBLIC").setServiceProps({Reference:ss,Query:po,Database:Ea,DataSnapshot:Tl,enableLogging:_p,INTERNAL:Sp,ServerValue:bf}).setMultipleInstances(!0)),f.registerVersion("@firebase/database-compat","0.2.9")}(kt.Z);var $a=H(4941),ku=H(440),rc=H(127);function Pd(f){return null==f}function Nd(f){return"function"==typeof f.set}function wh(f,u){return Nd(u)?u:f.ref(u)}function Ih(f,u){if(function Pc(f){return"string"==typeof f}(f))return u.stringCase();if(Nd(f))return u.firebaseCase();if(function wf(f){return"function"==typeof f.exportVal}(f))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof f)}function Gl(f,u,c="on",_=se.z){return new z.y(S=>{let F=null;return F=f[c](u,(W,ae)=>{_.schedule(()=>{S.next({snapshot:W,prevKey:ae})}),"once"===c&&_.schedule(()=>S.complete())},W=>{_.schedule(()=>S.error(W))}),"on"===c?{unsubscribe(){null!=F&&f.off(u,F)}}:{unsubscribe(){}}}).pipe((0,fe.U)(S=>{const{snapshot:F,prevKey:W}=S;let ae=null;return F.exists()&&(ae=F.key),{type:u,payload:F,prevKey:W,key:ae}}),(0,ve.B)())}function Ch(f,u){const c=f.length;for(let _=0;_<c;_++)if(f[_].payload.key===u)return _;return-1}function Ld(f,u){const{payload:c,prevKey:_,key:S}=u,F=Ch(f,S),W=function Fd(f,u){if(Pd(u))return 0;{const c=Ch(f,u);return-1===c?f.length:c+1}}(f,_);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let ae=null;u.payload.forEach(Re=>{const Ge={payload:Re,type:"value",prevKey:ae,key:Re.key};return ae=Re.key,f=[...f,Ge],!1})}return f;case"child_added":if(F>-1){const ae=f[F-1];(ae&&ae.key||null)!==_&&(f=f.filter(Re=>Re.payload.key!==c.key)).splice(W,0,u)}else{if(null==_)return[u,...f];(f=f.slice()).splice(W,0,u)}return f;case"child_removed":return f.filter(ae=>ae.payload.key!==c.key);case"child_changed":return f.map(ae=>ae.payload.key===S?u:ae);case"child_moved":if(F>-1){const ae=f.splice(F,1)[0];return(f=f.slice()).splice(W,0,ae),f}return f;default:return f}}function ic(f){return(Pd(f)||0===f.length)&&(f=["child_added","child_removed","child_changed","child_moved"]),f}function Dh(f,u,c){return function Wl(f,u,c){return Gl(f,"value","once",c).pipe((0,ge.w)(_=>{const S=[(0,Le.of)(_)];return u.forEach(F=>S.push(Gl(f,F,"on",c))),(0,Ne.T)(...S).pipe((0,be.R)(Ld,[]))}),(0,ue.x)())}(f,u=ic(u),c)}function If(f,u,c){const _=(u=ic(u)).map(S=>Gl(f,S,"on",c));return(0,Ne.T)(..._)}function Nc(f,u){return function(_,S){return Ih(_,{stringCase:()=>f.child(_)[u](S),firebaseCase:()=>_[u](S),snapshotCase:()=>_.ref[u](S)})}}function Pu(f){return function(c){return c?Ih(c,{stringCase:()=>f.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):f.remove()}}function oc(f,u){return function(){return Gl(f,"value","on",u)}}const xp=new a.OlP("angularfire2.realtimeDatabaseURL"),ud=new a.OlP("angularfire2.database.use-emulator");let ac=(()=>{class f{constructor(c,_,S,F,W,ae,Re,Ge,$t,Bt,Kt,kn,sr,xi,Zs){this.schedulers=ae;const Sl=Re,sa=(0,ht.on)(c,W,_);Ge&&(0,$a.nw)(sa,W,$t,Kt,kn,sr,Bt,xi),this.database=(0,ht.cc)(`${sa.name}.database.${S}`,"AngularFireDatabase",sa.name,()=>{const Nu=W.runOutsideAngular(()=>sa.database(S||void 0));return Sl&&Nu.useEmulator(...Sl),Nu},[Sl])}list(c,_){const S=this.schedulers.ngZone.runOutsideAngular(()=>wh(this.database,c));let F=S;return _&&(F=_(S)),function sc(f,u){const c=u.schedulers.outsideAngular,_=u.schedulers.ngZone.run(()=>f.ref);return{query:f,update:Nc(_,"update"),set:Nc(_,"set"),push:S=>_.push(S),remove:Pu(_),snapshotChanges:S=>Dh(f,S,c).pipe(st.iC),stateChanges:S=>If(f,S,c).pipe(st.iC),auditTrail:S=>function zl(f,u,c){return function Sh(f,u,c){return function Th(f,u){return Gl(f,"value","on",u).pipe((0,fe.U)(c=>{let _;return c.payload.forEach(S=>(_=S.key,!1)),{data:c,lastKeyToLoad:_}}))}(f,c).pipe(function pe(...f){return u=>{let c;return"function"==typeof f[f.length-1]&&(c=f.pop()),u.lift(new Ue(f,c))}}(u),(0,fe.U)(([S,F])=>{const W=S.lastKeyToLoad,ae=F.map(Re=>Re.key);return{actions:F,lastKeyToLoad:W,loadedKeys:ae}}),function Oe(f){return u=>u.lift(new we(f))}(S=>-1===S.loadedKeys.indexOf(S.lastKeyToLoad)),(0,fe.U)(S=>S.actions))}(f,If(f,u).pipe((0,be.R)((S,F)=>[...S,F],[])),c)}(f,S,c).pipe(st.iC),valueChanges:(S,F)=>Dh(f,S,c).pipe((0,fe.U)(ae=>ae.map(Re=>F&&F.idField?Object.assign(Object.assign({},Re.payload.val()),{[F.idField]:Re.key}):Re.payload.val())),st.iC)}}(F,this)}object(c){return function Ap(f,u){return{query:f,snapshotChanges:()=>oc(f,u.schedulers.outsideAngular)().pipe(st.iC),update:c=>f.ref.update(c),set:c=>f.ref.set(c),remove:()=>f.ref.remove(),valueChanges:()=>oc(f,u.schedulers.outsideAngular)().pipe(st.iC,(0,fe.U)(_=>_.payload.exists()?_.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>wh(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return f.\u0275fac=function(c){return new(c||f)(a.LFG(ht.Dh),a.LFG(ht.xv,8),a.LFG(xp,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(st.HU),a.LFG(ud,8),a.LFG($a.zQ,8),a.LFG($a.Qv,8),a.LFG($a.L6,8),a.LFG($a._Q,8),a.LFG($a.rT,8),a.LFG($a.lh,8),a.LFG($a.f7,8),a.LFG(ku.nm,8))},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac,providedIn:"any"}),f})(),Cf=(()=>{class f{constructor(){rc.Z.registerVersion("angularfire",st.q4.full,"rtdb-compat")}}return f.\u0275fac=function(c){return new(c||f)},f.\u0275mod=a.oAB({type:f}),f.\u0275inj=a.cJS({providers:[ac]}),f})()},4586:(on,ut,H)=>{"use strict";H.d(ut,{Q1:()=>ns,TE:()=>V});var a=H(6498),se=H(1086),z=H(5254),Le=H(3489),Ne=H(353);class ve{constructor(d,I){this.dueTime=d,this.scheduler=I}call(d,I){return I.subscribe(new ge(d,this.dueTime,this.scheduler))}}class ge extends Le.L{constructor(d,I,y){super(d),this.dueTime=I,this.scheduler=y,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(d){this.clearDebounce(),this.lastValue=d,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(be,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:d}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(d)}}clearDebounce(){const d=this.debouncedSubscription;null!==d&&(this.remove(d),d.unsubscribe(),this.debouncedSubscription=null)}}function be(b){b.debouncedNext()}var ue=H(4850),de=H(7545),oe=H(6351),pe=H(5e3),Ue=H(2011),Qe=H(3942),nt=H(5861),Oe=H(9681),we=H(2090),dt=H(4859);const st="firebasestorage.googleapis.com",ht="storageBucket";class rt extends we.ZR{constructor(d,I,y=0){super(Ee(d),`Firebase Storage: ${I} (${Ee(d)})`),this.status_=y,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rt.prototype)}get status(){return this.status_}set status(d){this.status_=d}_codeEquals(d){return Ee(d)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(d){this.customData.serverResponse=d,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ee(b){return"storage/"+b}function Z(){return new rt("unknown","An unknown error occurred, please check the error payload for server response.")}function Ot(){return new rt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Wt(){return new rt("canceled","User canceled the upload/download.")}function $e(){return new rt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gt(b){return new rt("invalid-argument",b)}function ft(){return new rt("app-deleted","The Firebase app was deleted.")}function Ut(b){return new rt("invalid-root-operation","The operation '"+b+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nt(b,d){return new rt("invalid-format","String does not match format '"+b+"': "+d)}function cn(b){throw new rt("internal-error","Internal error: "+b)}class un{constructor(d,I){this.bucket=d,this.path_=I}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const d=encodeURIComponent;return"/b/"+d(this.bucket)+"/o/"+d(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(d,I){let y;try{y=un.makeFromUrl(d,I)}catch(R){return new un(d,"")}if(""===y.path)return y;throw function ot(b){return new rt("invalid-default-bucket","Invalid default bucket '"+b+"'.")}(d)}static makeFromUrl(d,I){let y=null;const R="([A-Za-z0-9.\\-_]+)",It=new RegExp("^gs://"+R+"(/(.*))?$","i");function rn(Ai){Ai.path_=decodeURIComponent(Ai.path)}const yr=I.replace(/[.]/g,"\\."),zi=[{regex:It,indices:{bucket:1,path:3},postModify:function Y(Ai){"/"===Ai.path.charAt(Ai.path.length-1)&&(Ai.path_=Ai.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${yr}/v[A-Za-z0-9_]+/b/${R}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:rn},{regex:new RegExp(`^https?://${I===st?"(?:storage.googleapis.com|storage.cloud.google.com)":I}/${R}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:rn}];for(let Ai=0;Ai<zi.length;Ai++){const io=zi[Ai],L=io.regex.exec(d);if(L){let $=L[io.indices.path];$||($=""),y=new un(L[io.indices.bucket],$),io.postModify(y);break}}if(null==y)throw function ze(b){return new rt("invalid-url","Invalid URL '"+b+"'.")}(d);return y}}class Jn{constructor(d){this.promise_=Promise.reject(d)}getPromise(){return this.promise_}cancel(d=!1){}}function er(b){return"string"==typeof b||b instanceof String}function qt(b){return Yn()&&b instanceof Blob}function Yn(){return"undefined"!=typeof Blob}function Qr(b,d,I,y){if(y<d)throw gt(`Invalid value for '${b}'. Expected ${d} or greater.`);if(y>I)throw gt(`Invalid value for '${b}'. Expected ${I} or less.`)}function Un(b,d,I){let y=d;return null==I&&(y=`https://${d}`),`${I}://${y}/v0${b}`}function nr(b){const d=encodeURIComponent;let I="?";for(const y in b)b.hasOwnProperty(y)&&(I=I+(d(y)+"=")+d(b[y])+"&");return I=I.slice(0,-1),I}var Nr=(()=>{return(b=Nr||(Nr={}))[b.NO_ERROR=0]="NO_ERROR",b[b.NETWORK_ERROR=1]="NETWORK_ERROR",b[b.ABORT=2]="ABORT",Nr;var b})();function an(b,d){const I=b>=500&&b<600,R=-1!==[408,429].indexOf(b),Y=-1!==d.indexOf(b);return I||R||Y}class ur{constructor(d,I,y,R,Y,ke,It,Pt,rn,Mn,yr,Zn=!0){this.url_=d,this.method_=I,this.headers_=y,this.body_=R,this.successCodes_=Y,this.additionalRetryCodes_=ke,this.callback_=It,this.errorCallback_=Pt,this.timeout_=rn,this.progressCallback_=Mn,this.connectionFactory_=yr,this.retry=Zn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Mr,ei)=>{this.resolve_=Mr,this.reject_=ei,this.start_()})}start_(){const I=(y,R)=>{const Y=this.resolve_,ke=this.reject_,It=R.connection;if(R.wasSuccessCode)try{const Pt=this.callback_(It,It.getResponse());!function vr(b){return void 0!==b}(Pt)?Y():Y(Pt)}catch(Pt){ke(Pt)}else if(null!==It){const Pt=Z();Pt.serverResponse=It.getErrorText(),ke(this.errorCallback_?this.errorCallback_(It,Pt):Pt)}else ke(R.canceled?this.appDelete_?ft():Wt():Ot())};this.canceled_?I(0,new Tn(!1,null,!0)):this.backoffId_=function yn(b,d,I){let y=1,R=null,Y=null,ke=!1,It=0;function Pt(){return 2===It}let rn=!1;function Mn(...Di){rn||(rn=!0,d.apply(null,Di))}function yr(Di){R=setTimeout(()=>{R=null,b(Mr,Pt())},Di)}function Zn(){Y&&clearTimeout(Y)}function Mr(Di,...$i){if(rn)return void Zn();if(Di)return Zn(),void Mn.call(null,Di,...$i);if(Pt()||ke)return Zn(),void Mn.call(null,Di,...$i);let zi;y<64&&(y*=2),1===It?(It=2,zi=0):zi=1e3*(y+Math.random()),yr(zi)}let ei=!1;function lr(Di){ei||(ei=!0,Zn(),!rn&&(null!==R?(Di||(It=2),clearTimeout(R),yr(0)):Di||(It=1)))}return yr(0),Y=setTimeout(()=>{ke=!0,lr(!0)},I),lr}((y,R)=>{if(R)return void y(!1,new Tn(!1,null,!0));const Y=this.connectionFactory_();this.pendingConnection_=Y;const ke=It=>{null!==this.progressCallback_&&this.progressCallback_(It.loaded,It.lengthComputable?It.total:-1)};null!==this.progressCallback_&&Y.addUploadProgressListener(ke),Y.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Y.removeUploadProgressListener(ke),this.pendingConnection_=null;const It=Y.getErrorCode()===Nr.NO_ERROR,Pt=Y.getStatus();if((!It||an(Pt,this.additionalRetryCodes_))&&this.retry){const Mn=Y.getErrorCode()===Nr.ABORT;return void y(!1,new Tn(!1,null,Mn))}const rn=-1!==this.successCodes_.indexOf(Pt);y(!0,new Tn(rn,Y))})},I,this.timeout_)}getPromise(){return this.promise_}cancel(d){this.canceled_=!0,this.appDelete_=d||!1,null!==this.backoffId_&&function En(b){b(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Tn{constructor(d,I,y){this.wasSuccessCode=d,this.connection=I,this.canceled=!!y}}function Pn(...b){const d=function Lr(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==d){const I=new d;for(let y=0;y<b.length;y++)I.append(b[y]);return I.getBlob()}if(Yn())return new Blob(b);throw new rt("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cr{constructor(d,I){this.data=d,this.contentType=I||null}}function jr(b,d){switch(b){case Or.RAW:return new cr(ai(d));case Or.BASE64:case Or.BASE64URL:return new cr(Gt(b,d));case Or.DATA_URL:return new cr(function Nn(b){const d=new mn(b);return d.base64?Gt(Or.BASE64,d.rest):function wn(b){let d;try{d=decodeURIComponent(b)}catch(I){throw Nt(Or.DATA_URL,"Malformed data URL.")}return ai(d)}(d.rest)}(d),function xn(b){return new mn(b).contentType}(d))}throw Z()}function ai(b){const d=[];for(let I=0;I<b.length;I++){let y=b.charCodeAt(I);y<=127?d.push(y):y<=2047?d.push(192|y>>6,128|63&y):55296==(64512&y)?I<b.length-1&&56320==(64512&b.charCodeAt(I+1))?(y=65536|(1023&y)<<10|1023&b.charCodeAt(++I),d.push(240|y>>18,128|y>>12&63,128|y>>6&63,128|63&y)):d.push(239,191,189):56320==(64512&y)?d.push(239,191,189):d.push(224|y>>12,128|y>>6&63,128|63&y)}return new Uint8Array(d)}function Gt(b,d){switch(b){case Or.BASE64:{const R=-1!==d.indexOf("-"),Y=-1!==d.indexOf("_");if(R||Y)throw Nt(b,"Invalid character '"+(R?"-":"_")+"' found: is it base64url encoded?");break}case Or.BASE64URL:{const R=-1!==d.indexOf("+"),Y=-1!==d.indexOf("/");if(R||Y)throw Nt(b,"Invalid character '"+(R?"+":"/")+"' found: is it base64 encoded?");d=d.replace(/-/g,"+").replace(/_/g,"/");break}}let I;try{I=function On(b){return atob(b)}(d)}catch(R){throw Nt(b,"Invalid character found")}const y=new Uint8Array(I.length);for(let R=0;R<I.length;R++)y[R]=I.charCodeAt(R);return y}class mn{constructor(d){this.base64=!1,this.contentType=null;const I=d.match(/^data:([^,]+)?,/);if(null===I)throw Nt(Or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const y=I[1]||null;null!=y&&(this.base64=function jn(b,d){return b.length>=d.length&&b.substring(b.length-d.length)===d}(y,";base64"),this.contentType=this.base64?y.substring(0,y.length-7):y),this.rest=d.substring(d.indexOf(",")+1)}}class Ve{constructor(d,I){let y=0,R="";qt(d)?(this.data_=d,y=d.size,R=d.type):d instanceof ArrayBuffer?(I?this.data_=new Uint8Array(d):(this.data_=new Uint8Array(d.byteLength),this.data_.set(new Uint8Array(d))),y=this.data_.length):d instanceof Uint8Array&&(I?this.data_=d:(this.data_=new Uint8Array(d.length),this.data_.set(d)),y=d.length),this.size_=y,this.type_=R}size(){return this.size_}type(){return this.type_}slice(d,I){if(qt(this.data_)){const R=function ki(b,d,I){return b.webkitSlice?b.webkitSlice(d,I):b.mozSlice?b.mozSlice(d,I):b.slice?b.slice(d,I):null}(this.data_,d,I);return null===R?null:new Ve(R)}{const y=new Uint8Array(this.data_.buffer,d,I-d);return new Ve(y,!0)}}static getBlob(...d){if(Yn()){const I=d.map(y=>y instanceof Ve?y.data_:y);return new Ve(Pn.apply(null,I))}{const I=d.map(ke=>er(ke)?jr(Or.RAW,ke).data:ke.data_);let y=0;I.forEach(ke=>{y+=ke.byteLength});const R=new Uint8Array(y);let Y=0;return I.forEach(ke=>{for(let It=0;It<ke.length;It++)R[Y++]=ke[It]}),new Ve(R,!0)}}uploadData(){return this.data_}}function Pe(b){let d;try{d=JSON.parse(b)}catch(I){return null}return function Wr(b){return"object"==typeof b&&!Array.isArray(b)}(d)?d:null}function et(b){const d=b.lastIndexOf("/",b.length-2);return-1===d?b:b.slice(d+1)}function hn(b,d){return d}class dn{constructor(d,I,y,R){this.server=d,this.local=I||d,this.writable=!!y,this.xform=R||hn}}let dr=null;function Sr(){if(dr)return dr;const b=[];b.push(new dn("bucket")),b.push(new dn("generation")),b.push(new dn("metageneration")),b.push(new dn("name","fullPath",!0));const I=new dn("name");I.xform=function d(Y,ke){return function Er(b){return!er(b)||b.length<2?b:et(b)}(ke)},b.push(I);const R=new dn("size");return R.xform=function y(Y,ke){return void 0!==ke?Number(ke):ke},b.push(R),b.push(new dn("timeCreated")),b.push(new dn("updated")),b.push(new dn("md5Hash",null,!0)),b.push(new dn("cacheControl",null,!0)),b.push(new dn("contentDisposition",null,!0)),b.push(new dn("contentEncoding",null,!0)),b.push(new dn("contentLanguage",null,!0)),b.push(new dn("contentType",null,!0)),b.push(new dn("metadata","customMetadata",!0)),dr=b,dr}function Me(b,d,I){const y=Pe(d);return null===y?null:function Be(b,d,I){const y={type:"file"},R=I.length;for(let Y=0;Y<R;Y++){const ke=I[Y];y[ke.local]=ke.xform(y,d[ke.server])}return function mt(b,d){Object.defineProperty(b,"ref",{get:function I(){const Y=new un(b.bucket,b.fullPath);return d._makeStorageReference(Y)}})}(y,b),y}(b,y,I)}function Mt(b,d){const I={},y=d.length;for(let R=0;R<y;R++){const Y=d[R];Y.writable&&(I[Y.server]=b[Y.local])}return JSON.stringify(I)}const Wn="prefixes";class Kn{constructor(d,I,y,R){this.url=d,this.method=I,this.handler=y,this.timeout=R,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function kr(b){if(!b)throw Z()}function Br(b,d){return function I(y,R){const Y=Me(b,R,d);return kr(null!==Y),Y}}function Fn(b){return function d(I,y){let R;return R=401===I.getStatus()?I.getErrorText().includes("Firebase App Check token is invalid")?function Te(){return new rt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Ie(){return new rt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===I.getStatus()?function he(b){return new rt("quota-exceeded","Quota for bucket '"+b+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(b.bucket):403===I.getStatus()?function Je(b){return new rt("unauthorized","User does not have permission to access '"+b+"'.")}(b.path):y,R.status=I.getStatus(),R.serverResponse=y.serverResponse,R}}function Vr(b){const d=Fn(b);return function I(y,R){let Y=d(y,R);return 404===y.getStatus()&&(Y=function te(b){return new rt("object-not-found","Object '"+b+"' does not exist.")}(b.path)),Y.serverResponse=R.serverResponse,Y}}function li(b,d,I){const R=Un(d.fullServerUrl(),b.host,b._protocol),ke=b.maxOperationRetryTime,It=new Kn(R,"GET",Br(b,I),ke);return It.errorHandler=Vr(d),It}function Xn(b,d,I,y,R){const Y={};Y.prefix=d.isRoot?"":d.path+"/",I&&I.length>0&&(Y.delimiter=I),y&&(Y.pageToken=y),R&&(Y.maxResults=R);const It=Un(d.bucketOnlyServerUrl(),b.host,b._protocol),rn=b.maxOperationRetryTime,Mn=new Kn(It,"GET",function si(b,d){return function I(y,R){const Y=function Sn(b,d,I){const y=Pe(I);return null===y?null:function tn(b,d,I){const y={prefixes:[],items:[],nextPageToken:I.nextPageToken};if(I[Wn])for(const R of I[Wn]){const Y=R.replace(/\/$/,""),ke=b._makeStorageReference(new un(d,Y));y.prefixes.push(ke)}if(I.items)for(const R of I.items){const Y=b._makeStorageReference(new un(d,R.name));y.items.push(Y)}return y}(b,d,y)}(b,d,R);return kr(null!==Y),Y}}(b,d.bucket),rn);return Mn.urlParams=Y,Mn.errorHandler=Fn(d),Mn}function _i(b,d,I){const y=Object.assign({},I);return y.fullPath=b.path,y.size=d.size(),y.contentType||(y.contentType=function Xr(b,d){return b&&b.contentType||d&&d.type()||"application/octet-stream"}(null,d)),y}class fi{constructor(d,I,y,R){this.current=d,this.total=I,this.finalized=!!y,this.metadata=R||null}}function Ti(b,d){let I=null;try{I=b.getResponseHeader("X-Goog-Upload-Status")}catch(R){kr(!1)}return kr(!!I&&-1!==(d||["active"]).indexOf(I)),I}const it={STATE_CHANGED:"state_changed"},bt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ye(b){switch(b){case"running":case"pausing":case"canceling":return bt.RUNNING;case"paused":return bt.PAUSED;case"success":return bt.SUCCESS;case"canceled":return bt.CANCELED;default:return bt.ERROR}}class qe{constructor(d,I,y){if(function Tr(b){return"function"==typeof b}(d)||null!=I||null!=y)this.next=d,this.error=null!=I?I:void 0,this.complete=null!=y?y:void 0;else{const Y=d;this.next=Y.next,this.error=Y.error,this.complete=Y.complete}}}function _t(b){return(...d)=>{Promise.resolve().then(()=>b(...d))}}class pn extends class zt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Nr.NO_ERROR,this.sendPromise_=new Promise(d=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Nr.ABORT,d()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Nr.NETWORK_ERROR,d()}),this.xhr_.addEventListener("load",()=>{d()})})}send(d,I,y,R){if(this.sent_)throw cn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(I,d,!0),void 0!==R)for(const Y in R)R.hasOwnProperty(Y)&&this.xhr_.setRequestHeader(Y,R[Y].toString());return void 0!==y?this.xhr_.send(y):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(d){return-1}}getResponse(){if(!this.sent_)throw cn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(d){return this.xhr_.getResponseHeader(d)}addUploadProgressListener(d){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",d)}removeUploadProgressListener(d){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",d)}}{initXhr(){this.xhr_.responseType="text"}}function vn(){return new pn}class Ye{constructor(d,I,y=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=d,this._blob=I,this._metadata=y,this._mappings=Sr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=R=>{if(this._request=void 0,this._chunkMultiplier=1,R._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Y=this.isExponentialBackoffExpired();if(an(R.status,[])){if(!Y)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();R=Ot()}this._error=R,this._transition("error")}},this._metadataErrorHandler=R=>{this._request=void 0,R._codeEquals("canceled")?this.completeTransitions_():(this._error=R,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((R,Y)=>{this._resolve=R,this._reject=Y,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const d=this._transferred;return I=>this._updateProgress(d+I)}_shouldDoResumable(d){return d.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(d){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([I,y])=>{switch(this._state){case"running":d(I,y);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((d,I)=>{const y=function Li(b,d,I,y,R){const Y=d.bucketOnlyServerUrl(),ke=_i(d,y,R),It={name:ke.fullPath},Pt=Un(Y,b.host,b._protocol),Mn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${y.size()}`,"X-Goog-Upload-Header-Content-Type":ke.contentType,"Content-Type":"application/json; charset=utf-8"},yr=Mt(ke,I),ei=new Kn(Pt,"POST",function Mr(lr){let Di;Ti(lr);try{Di=lr.getResponseHeader("X-Goog-Upload-URL")}catch($i){kr(!1)}return kr(er(Di)),Di},b.maxUploadRetryTime);return ei.urlParams=It,ei.headers=Mn,ei.body=yr,ei.errorHandler=Fn(d),ei}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),R=this._ref.storage._makeRequest(y,vn,d,I);this._request=R,R.getPromise().then(Y=>{this._request=void 0,this._uploadUrl=Y,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const d=this._uploadUrl;this._resolveToken((I,y)=>{const R=function ne(b,d,I,y){const Pt=new Kn(I,"POST",function Y(rn){const Mn=Ti(rn,["active","final"]);let yr=null;try{yr=rn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Mr){kr(!1)}yr||kr(!1);const Zn=Number(yr);return kr(!isNaN(Zn)),new fi(Zn,y.size(),"final"===Mn)},b.maxUploadRetryTime);return Pt.headers={"X-Goog-Upload-Command":"query"},Pt.errorHandler=Fn(d),Pt}(this._ref.storage,this._ref._location,d,this._blob),Y=this._ref.storage._makeRequest(R,vn,I,y);this._request=Y,Y.getPromise().then(ke=>{this._request=void 0,this._updateProgress(ke.current),this._needToFetchStatus=!1,ke.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const d=262144*this._chunkMultiplier,I=new fi(this._transferred,this._blob.size()),y=this._uploadUrl;this._resolveToken((R,Y)=>{let ke;try{ke=function Ze(b,d,I,y,R,Y,ke,It){const Pt=new fi(0,0);if(ke?(Pt.current=ke.current,Pt.total=ke.total):(Pt.current=0,Pt.total=y.size()),y.size()!==Pt.total)throw function Xe(){return new rt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const rn=Pt.total-Pt.current;let Mn=rn;R>0&&(Mn=Math.min(Mn,R));const yr=Pt.current;let Mr="";Mr=0===Mn?"finalize":rn===Mn?"upload, finalize":"upload";const ei={"X-Goog-Upload-Command":Mr,"X-Goog-Upload-Offset":`${Pt.current}`},lr=y.slice(yr,yr+Mn);if(null===lr)throw $e();const zi=new Kn(I,"POST",function Di(Ai,io){const L=Ti(Ai,["active","final"]),X=Pt.current+Mn,$=y.size();let ie;return ie="final"===L?Br(d,Y)(Ai,io):null,new fi(X,$,"final"===L,ie)},d.maxUploadRetryTime);return zi.headers=ei,zi.body=lr.uploadData(),zi.progressCallback=It||null,zi.errorHandler=Fn(b),zi}(this._ref._location,this._ref.storage,y,this._blob,d,this._mappings,I,this._makeProgressCallback())}catch(Pt){return this._error=Pt,void this._transition("error")}const It=this._ref.storage._makeRequest(ke,vn,R,Y,!1);this._request=It,It.getPromise().then(Pt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Pt.current),Pt.finalized?(this._metadata=Pt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((d,I)=>{const y=li(this._ref.storage,this._ref._location,this._mappings),R=this._ref.storage._makeRequest(y,vn,d,I);this._request=R,R.getPromise().then(Y=>{this._request=void 0,this._metadata=Y,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((d,I)=>{const y=function Ii(b,d,I,y,R){const Y=d.bucketOnlyServerUrl(),ke={"X-Goog-Upload-Protocol":"multipart"},Pt=function It(){let zi="";for(let Ai=0;Ai<2;Ai++)zi+=Math.random().toString().slice(2);return zi}();ke["Content-Type"]="multipart/related; boundary="+Pt;const rn=_i(d,y,R),Mn=Mt(rn,I),Mr=Ve.getBlob("--"+Pt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Mn+"\r\n--"+Pt+"\r\nContent-Type: "+rn.contentType+"\r\n\r\n",y,"\r\n--"+Pt+"--");if(null===Mr)throw $e();const ei={name:rn.fullPath},lr=Un(Y,b.host,b._protocol),$i=b.maxUploadRetryTime,Ls=new Kn(lr,"POST",Br(b,I),$i);return Ls.urlParams=ei,Ls.headers=ke,Ls.body=Mr.uploadData(),Ls.errorHandler=Fn(d),Ls}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),R=this._ref.storage._makeRequest(y,vn,d,I);this._request=R,R.getPromise().then(Y=>{this._request=void 0,this._metadata=Y,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(d){const I=this._transferred;this._transferred=d,this._transferred!==I&&this._notifyObservers()}_transition(d){if(this._state!==d)switch(d){case"canceling":case"pausing":this._state=d,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const I="paused"===this._state;this._state=d,I&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=d,this._notifyObservers();break;case"canceled":this._error=Wt(),this._state=d,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const d=ye(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:d,metadata:this._metadata,task:this,ref:this._ref}}on(d,I,y,R){const Y=new qe(I||void 0,y||void 0,R||void 0);return this._addObserver(Y),()=>{this._removeObserver(Y)}}then(d,I){return this._promise.then(d,I)}catch(d){return this.then(null,d)}_addObserver(d){this._observers.push(d),this._notifyObserver(d)}_removeObserver(d){const I=this._observers.indexOf(d);-1!==I&&this._observers.splice(I,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(I=>{this._notifyObserver(I)})}_finishPromise(){if(void 0!==this._resolve){let d=!0;switch(ye(this._state)){case bt.SUCCESS:_t(this._resolve.bind(null,this.snapshot))();break;case bt.CANCELED:case bt.ERROR:_t(this._reject.bind(null,this._error))();break;default:d=!1}d&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(d){switch(ye(this._state)){case bt.RUNNING:case bt.PAUSED:d.next&&_t(d.next.bind(d,this.snapshot))();break;case bt.SUCCESS:d.complete&&_t(d.complete.bind(d))();break;default:d.error&&_t(d.error.bind(d,this._error))()}}resume(){const d="paused"===this._state||"pausing"===this._state;return d&&this._transition("running"),d}pause(){const d="running"===this._state;return d&&this._transition("pausing"),d}cancel(){const d="running"===this._state||"pausing"===this._state;return d&&this._transition("canceling"),d}}class vt{constructor(d,I){this._service=d,this._location=I instanceof un?I:un.makeFromUrl(I,d.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(d,I){return new vt(d,I)}get root(){const d=new un(this._location.bucket,"");return this._newRef(this._service,d)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return et(this._location.path)}get storage(){return this._service}get parent(){const d=function He(b){if(0===b.length)return null;const d=b.lastIndexOf("/");return-1===d?"":b.slice(0,d)}(this._location.path);if(null===d)return null;const I=new un(this._location.bucket,d);return new vt(this._service,I)}_throwIfRoot(d){if(""===this._location.path)throw Ut(d)}}function Zi(b,d,I){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,nt.Z)(function*(b,d,I){const R=yield Is(b,{pageToken:I});d.prefixes.push(...R.prefixes),d.items.push(...R.items),null!=R.nextPageToken&&(yield Zi(b,d,R.nextPageToken))})).apply(this,arguments)}function Is(b,d){null!=d&&"number"==typeof d.maxResults&&Qr("options.maxResults",1,1e3,d.maxResults);const I=d||{},y=Xn(b.storage,b._location,"/",I.pageToken,I.maxResults);return b.storage.makeRequestWithTokens(y,vn)}function Ar(b){b._throwIfRoot("getDownloadURL");const d=function hi(b,d,I){const R=Un(d.fullServerUrl(),b.host,b._protocol),ke=b.maxOperationRetryTime,It=new Kn(R,"GET",function mi(b,d){return function I(y,R){const Y=Me(b,R,d);return kr(null!==Y),function Et(b,d,I,y){const R=Pe(d);if(null===R||!er(R.downloadTokens))return null;const Y=R.downloadTokens;if(0===Y.length)return null;const ke=encodeURIComponent;return Y.split(",").map(rn=>{const yr=b.fullPath;return Un("/b/"+ke(b.bucket)+"/o/"+ke(yr),I,y)+nr({alt:"media",token:rn})})[0]}(Y,R,b.host,b._protocol)}}(b,I),ke);return It.errorHandler=Vr(d),It}(b.storage,b._location,Sr());return b.storage.makeRequestWithTokens(d,vn).then(I=>{if(null===I)throw function at(){return new rt("no-download-url","The given file does not have any download URLs.")}();return I})}function So(b,d){const I=function pt(b,d){const I=d.split("/").filter(y=>y.length>0).join("/");return 0===b.length?I:b+"/"+I}(b._location.path,d),y=new un(b._location.bucket,I);return new vt(b.storage,y)}function Bi(b,d){if(b instanceof Xi){const I=b;if(null==I._bucket)throw function De(){return new rt("no-default-bucket","No default bucket found. Did you set the '"+ht+"' property when initializing the app?")}();const y=new vt(I,I._bucket);return null!=d?Bi(y,d):y}return void 0!==d?So(b,d):b}function Cs(b,d){if(d&&function Qi(b){return/^[A-Za-z]+:\/\//.test(b)}(d)){if(b instanceof Xi)return function Si(b,d){return new vt(b,d)}(b,d);throw gt("To use ref(service, url), the first argument must be a Storage instance.")}return Bi(b,d)}function Qs(b,d){const I=null==d?void 0:d[ht];return null==I?null:un.makeFromBucketSpec(I,b)}class Xi{constructor(d,I,y,R,Y){this.app=d,this._authProvider=I,this._appCheckProvider=y,this._url=R,this._firebaseVersion=Y,this._bucket=null,this._host=st,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=R?un.makeFromBucketSpec(R,this._host):Qs(this._host,this.app.options)}get host(){return this._host}set host(d){this._host=d,this._bucket=null!=this._url?un.makeFromBucketSpec(this._url,d):Qs(d,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(d){Qr("time",0,Number.POSITIVE_INFINITY,d),this._maxUploadRetryTime=d}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(d){Qr("time",0,Number.POSITIVE_INFINITY,d),this._maxOperationRetryTime=d}_getAuthToken(){var d=this;return(0,nt.Z)(function*(){if(d._overrideAuthToken)return d._overrideAuthToken;const I=d._authProvider.getImmediate({optional:!0});if(I){const y=yield I.getToken();if(null!==y)return y.accessToken}return null})()}_getAppCheckToken(){var d=this;return(0,nt.Z)(function*(){const I=d._appCheckProvider.getImmediate({optional:!0});return I?(yield I.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(d=>d.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(d){return new vt(this,d)}_makeRequest(d,I,y,R,Y=!0){if(this._deleted)return new Jn(ft());{const ke=function wr(b,d,I,y,R,Y,ke=!0){const It=nr(b.urlParams),Pt=b.url+It,rn=Object.assign({},b.headers);return function gr(b,d){d&&(b["X-Firebase-GMPID"]=d)}(rn,d),function In(b,d){null!==d&&d.length>0&&(b.Authorization="Firebase "+d)}(rn,I),function St(b,d){b["X-Firebase-Storage-Version"]="webjs/"+(null!=d?d:"AppManager")}(rn,Y),function mr(b,d){null!==d&&(b["X-Firebase-AppCheck"]=d)}(rn,y),new ur(Pt,b.method,rn,b.body,b.successCodes,b.additionalRetryCodes,b.handler,b.errorHandler,b.timeout,b.progressCallback,R,ke)}(d,this._appId,y,R,I,this._firebaseVersion,Y);return this._requests.add(ke),ke.getPromise().then(()=>this._requests.delete(ke),()=>this._requests.delete(ke)),ke}}makeRequestWithTokens(d,I){var y=this;return(0,nt.Z)(function*(){const[R,Y]=yield Promise.all([y._getAuthToken(),y._getAppCheckToken()]);return y._makeRequest(d,I,R,Y).getPromise()})()}}const Ji="@firebase/storage";function ci(b,d){return Cs(b=(0,we.m9)(b),d)}function Ts(b,{instanceIdentifier:d}){const I=b.getProvider("app").getImmediate(),y=b.getProvider("auth-internal"),R=b.getProvider("app-check-internal");return new Xi(I,y,R,d,Oe.SDK_VERSION)}!function hs(){(0,Oe._registerComponent)(new dt.wA("storage",Ts,"PUBLIC").setMultipleInstances(!0)),(0,Oe.registerVersion)(Ji,"0.9.12",""),(0,Oe.registerVersion)(Ji,"0.9.12","esm2017")}();class Fs{constructor(d,I,y){this._delegate=d,this.task=I,this.ref=y}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Fr{constructor(d,I){this._delegate=d,this._ref=I,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Fs(this._delegate.snapshot,this,this._ref)}then(d,I){return this._delegate.then(y=>{if(d)return d(new Fs(y,this,this._ref))},I)}on(d,I,y,R){let Y;return I&&(Y="function"==typeof I?ke=>I(new Fs(ke,this,this._ref)):{next:I.next?ke=>I.next(new Fs(ke,this,this._ref)):void 0,complete:I.complete||void 0,error:I.error||void 0}),this._delegate.on(d,Y,y||void 0,R||void 0)}}class Ws{constructor(d,I){this._delegate=d,this._service=I}get prefixes(){return this._delegate.prefixes.map(d=>new xr(d,this._service))}get items(){return this._delegate.items.map(d=>new xr(d,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class xr{constructor(d,I){this._delegate=d,this.storage=I}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(d){const I=function Pi(b,d){return So(b,d)}(this._delegate,d);return new xr(I,this.storage)}get root(){return new xr(this._delegate.root,this.storage)}get parent(){const d=this._delegate.parent;return null==d?null:new xr(d,this.storage)}put(d,I){return this._throwIfRoot("put"),new Fr(function ro(b,d,I){return function fn(b,d,I){return b._throwIfRoot("uploadBytesResumable"),new Ye(b,new Ve(d),I)}(b=(0,we.m9)(b),d,I)}(this._delegate,d,I),this)}putString(d,I=Or.RAW,y){this._throwIfRoot("putString");const R=jr(I,d),Y=Object.assign({},y);return null==Y.contentType&&null!=R.contentType&&(Y.contentType=R.contentType),new Fr(new Ye(this._delegate,new Ve(R.data,!0),Y),this)}listAll(){return function Kr(b){return function zn(b){const d={prefixes:[],items:[]};return Zi(b,d).then(()=>d)}(b=(0,we.m9)(b))}(this._delegate).then(d=>new Ws(d,this.storage))}list(d){return function ar(b,d){return Is(b=(0,we.m9)(b),d)}(this._delegate,d||void 0).then(I=>new Ws(I,this.storage))}getMetadata(){return function es(b){return function ls(b){b._throwIfRoot("getMetadata");const d=li(b.storage,b._location,Sr());return b.storage.makeRequestWithTokens(d,vn)}(b=(0,we.m9)(b))}(this._delegate)}updateMetadata(d){return function Mi(b,d){return function Yr(b,d){b._throwIfRoot("updateMetadata");const I=function ui(b,d,I,y){const Y=Un(d.fullServerUrl(),b.host,b._protocol),It=Mt(I,y),rn=b.maxOperationRetryTime,Mn=new Kn(Y,"PATCH",Br(b,y),rn);return Mn.headers={"Content-Type":"application/json; charset=utf-8"},Mn.body=It,Mn.errorHandler=Vr(d),Mn}(b.storage,b._location,d,Sr());return b.storage.makeRequestWithTokens(I,vn)}(b=(0,we.m9)(b),d)}(this._delegate,d)}getDownloadURL(){return function Ds(b){return Ar(b=(0,we.m9)(b))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Rs(b){return function vi(b){b._throwIfRoot("deleteObject");const d=function Gi(b,d){const y=Un(d.fullServerUrl(),b.host,b._protocol),It=new Kn(y,"DELETE",function ke(Pt,rn){},b.maxOperationRetryTime);return It.successCodes=[200,204],It.errorHandler=Vr(d),It}(b.storage,b._location);return b.storage.makeRequestWithTokens(d,vn)}(b=(0,we.m9)(b))}(this._delegate)}_throwIfRoot(d){if(""===this._delegate._location.path)throw Ut(d)}}class Hn{constructor(d,I){this.app=d,this._delegate=I}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(d){if(Js(d))throw gt("ref() expected a child path but got a URL, use refFromURL instead.");return new xr(ci(this._delegate,d),this)}refFromURL(d){if(!Js(d))throw gt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{un.makeFromUrl(d,this._delegate.host)}catch(I){throw gt("refFromUrl() expected a valid full URL but got an invalid one.")}return new xr(ci(this._delegate,d),this)}setMaxUploadRetryTime(d){this._delegate.maxUploadRetryTime=d}setMaxOperationRetryTime(d){this._delegate.maxOperationRetryTime=d}useEmulator(d,I,y={}){!function Xs(b,d,I,y={}){!function Gs(b,d,I,y={}){b.host=`${d}:${I}`,b._protocol="http";const{mockUserToken:R}=y;R&&(b._overrideAuthToken="string"==typeof R?R:(0,we.Sg)(R,b.app.options.projectId))}(b,d,I,y)}(this._delegate,d,I,y)}}function Js(b){return/^[A-Za-z]+:\/\//.test(b)}function qo(b,{instanceIdentifier:d}){const I=b.getProvider("app-compat").getImmediate(),y=b.getProvider("storage").getImmediate({identifier:d});return new Hn(I,y)}!function Jr(b){const d={TaskState:bt,TaskEvent:it,StringFormat:Or,Storage:Hn,Reference:xr};b.INTERNAL.registerComponent(new dt.wA("storage-compat",qo,"PUBLIC").setServiceProps(d).setMultipleInstances(!0)),b.registerVersion("@firebase/storage-compat","0.1.20")}(Qe.Z);var xo=H(440),Ss=H(127);function Dr(b){const d=function Zt(b){return new a.y(d=>{const I=ke=>d.next(ke);I(b.snapshot);const Y=b.on("state_changed",I);return b.then(ke=>{I(ke),d.complete()},ke=>{I(b.snapshot),(ke=>{d.error(ke)})(ke)}),function(){Y()}}).pipe(function fe(b,d=Ne.P){return I=>I.lift(new ve(b,d))}(0))}(b);return{task:b,then:b.then.bind(b),catch:b.catch.bind(b),pause:b.pause.bind(b),cancel:b.cancel.bind(b),resume:b.resume.bind(b),snapshotChanges:()=>d,percentageChanges:()=>d.pipe((0,ue.U)(I=>I.bytesTransferred/I.totalBytes*100))}}function Os(b){return{getDownloadURL:()=>(0,se.of)(void 0).pipe(oe.fc,(0,de.w)(()=>b.getDownloadURL()),oe.iC),getMetadata:()=>(0,se.of)(void 0).pipe(oe.fc,(0,de.w)(()=>b.getMetadata()),oe.iC),delete:()=>(0,z.D)(b.delete()),child:d=>Os(b.child(d)),updateMetadata:d=>(0,z.D)(b.updateMetadata(d)),put:(d,I)=>Dr(b.put(d,I)),putString:(d,I,y)=>Dr(b.putString(d,I,y)),list:d=>(0,z.D)(b.list(d)),listAll:()=>(0,z.D)(b.listAll())}}const fs=new pe.OlP("angularfire2.storageBucket"),Ci=new pe.OlP("angularfire2.storage.maxUploadRetryTime"),hr=new pe.OlP("angularfire2.storage.maxOperationRetryTime"),ts=new pe.OlP("angularfire2.storage.use-emulator");let ns=(()=>{class b{constructor(I,y,R,Y,ke,It,Pt,rn,Mn,yr){const Zn=(0,Ue.on)(I,ke,y);this.storage=(0,Ue.cc)(`${Zn.name}.storage.${R}`,"AngularFireStorage",Zn.name,()=>{const Mr=ke.runOutsideAngular(()=>Zn.storage(R||void 0)),ei=Mn;return ei&&Mr.useEmulator(...ei),Pt&&Mr.setMaxUploadRetryTime(Pt),rn&&Mr.setMaxOperationRetryTime(rn),Mr},[Pt,rn])}ref(I){return Os(this.storage.ref(I))}refFromURL(I){return Os(this.storage.refFromURL(I))}upload(I,y,R){return Os(this.storage.ref(I)).put(y,R)}}return b.\u0275fac=function(I){return new(I||b)(pe.LFG(Ue.Dh),pe.LFG(Ue.xv,8),pe.LFG(fs,8),pe.LFG(pe.Lbi),pe.LFG(pe.R0b),pe.LFG(oe.HU),pe.LFG(Ci,8),pe.LFG(hr,8),pe.LFG(ts,8),pe.LFG(xo.nm,8))},b.\u0275prov=pe.Yz7({token:b,factory:b.\u0275fac,providedIn:"any"}),b})(),G=(()=>{class b{}return b.\u0275fac=function(I){return new(I||b)},b.\u0275mod=pe.oAB({type:b}),b.\u0275inj=pe.cJS({}),b})(),V=(()=>{class b{constructor(){Ss.Z.registerVersion("angularfire",oe.q4.full,"gcs-compat")}}return b.\u0275fac=function(I){return new(I||b)},b.\u0275mod=pe.oAB({type:b}),b.\u0275inj=pe.cJS({providers:[ns],imports:[G]}),b})()},2011:(on,ut,H)=>{"use strict";H.d(ut,{Dh:()=>ge,GT:()=>fe,cc:()=>Ue,hO:()=>pe,on:()=>ue,pX:()=>Ne,xv:()=>be});var a=H(5e3),se=H(127),z=H(6351);on=H.hmd(on);const Le=["ngOnDestroy"],Ne=(we,dt,st,ht={})=>new Proxy(we,{get:(yt,kt)=>st.runOutsideAngular(()=>{var je;if(we[kt])return!(null===(je=null==ht?void 0:ht.spy)||void 0===je)&&je.get&&ht.spy.get(kt,we[kt]),we[kt];if(Le.indexOf(kt)>-1)return()=>{};const rt=dt.toPromise().then(Ee=>{const Z=Ee&&Ee[kt];return"function"==typeof Z?Z.bind(Ee):Z&&Z.then?Z.then(te=>st.run(()=>te)):st.run(()=>Z)});return new Proxy(()=>{},{get:(Ee,Z)=>rt[Z],apply:(Ee,Z,te)=>rt.then(he=>{var Ie;const Te=he&&he(...te);return!(null===(Ie=null==ht?void 0:ht.spy)||void 0===Ie)&&Ie.apply&&ht.spy.apply(kt,te,Te),Te})})})}),fe=(we,dt)=>{dt.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(ht=>{Object.defineProperty(we.prototype,ht,Object.getOwnPropertyDescriptor(st.prototype||st,ht))})})};class ve{constructor(dt){return dt}}const ge=new a.OlP("angularfire2.app.options"),be=new a.OlP("angularfire2.app.name");function ue(we,dt,st){const yt="object"==typeof st&&st||{};yt.name=yt.name||"string"==typeof st&&st||"[DEFAULT]";const je=se.Z.apps.filter(rt=>rt&&rt.name===yt.name)[0]||dt.runOutsideAngular(()=>se.Z.initializeApp(we,yt));try{JSON.stringify(we)!==JSON.stringify(je.options)&&de("error",`${je.name} Firebase App already initialized with different options${on.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(rt){}return new ve(je)}const de=(we,...dt)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[we](...dt)},oe={provide:ve,useFactory:ue,deps:[ge,a.R0b,[new a.FiY,be]]};let pe=(()=>{class we{constructor(st){se.Z.registerVersion("angularfire",z.q4.full,"core"),se.Z.registerVersion("angularfire",z.q4.full,"app-compat"),se.Z.registerVersion("angular",a.q4F.full,st.toString())}static initializeApp(st,ht){return{ngModule:we,providers:[{provide:ge,useValue:st},{provide:be,useValue:ht}]}}}return we.\u0275fac=function(st){return new(st||we)(a.LFG(a.Lbi))},we.\u0275mod=a.oAB({type:we}),we.\u0275inj=a.cJS({providers:[oe]}),we})();function Ue(we,dt,st,ht,yt){const[,kt,je]=globalThis.\u0275AngularfireInstanceCache.find(rt=>rt[0]===we)||[];if(kt)return function Qe(we,dt){try{return we.toString()===dt.toString()}catch(st){return we===dt}}(yt,je)||(Oe("error",`${dt} was already initialized on the ${st} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),Oe("warn",{is:yt,was:je})),kt;{const rt=ht();return globalThis.\u0275AngularfireInstanceCache.push([we,rt,yt]),rt}}const nt=!!on.hot,Oe=(we,...dt)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[we](...dt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(on,ut,H)=>{"use strict";H.d(ut,{q4:()=>Jl,iC:()=>re,fc:()=>N,HU:()=>wi,vb:()=>Ll,JM:()=>Qa});var a=H(5e3),se=H(5867),z=H(5861),Le=H(9681),Ne=H(2090),fe=H(4859),ve=H(1877),ge=H(8766);const be="@firebase/installations",ue="0.5.15",oe=`w:${ue}`,pe="FIS_v2",dt=new Ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(P){return P instanceof Ne.ZR&&P.code.includes("request-failed")}function ht({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function yt(P){return{token:P.token,requestStatus:2,expiresIn:he(P.expiresIn),creationTime:Date.now()}}function kt(P,U){return je.apply(this,arguments)}function je(){return(je=(0,z.Z)(function*(P,U){const _e=(yield U.json()).error;return dt.create("request-failed",{requestName:P,serverCode:_e.code,serverMessage:_e.message,serverStatus:_e.status})})).apply(this,arguments)}function rt({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function Ee(P,{refreshToken:U}){const J=rt(P);return J.append("Authorization",function Ie(P){return`${pe} ${P}`}(U)),J}function Z(P){return te.apply(this,arguments)}function te(){return(te=(0,z.Z)(function*(P){const U=yield P();return U.status>=500&&U.status<600?P():U})).apply(this,arguments)}function he(P){return Number(P.replace("s","000"))}function Te(P,U){return Je.apply(this,arguments)}function Je(){return(Je=(0,z.Z)(function*({appConfig:P,heartbeatServiceProvider:U},{fid:J}){const _e=ht(P),Ke=rt(P),wt=U.getImmediate({optional:!0});if(wt){const fr=yield wt.getHeartbeatsHeader();fr&&Ke.append("x-firebase-client",fr)}const gn={method:"POST",headers:Ke,body:JSON.stringify({fid:J,authVersion:pe,appId:P.appId,sdkVersion:oe})},Ln=yield Z(()=>fetch(_e,gn));if(Ln.ok){const fr=yield Ln.json();return{fid:fr.fid||J,registrationStatus:2,refreshToken:fr.refreshToken,authToken:yt(fr.authToken)}}throw yield kt("Create Installation",Ln)})).apply(this,arguments)}function Ot(P){return new Promise(U=>{setTimeout(U,P)})}const ze=/^[cdef][\w-]{21}$/;function De(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const J=function $e(P){return function Wt(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return ze.test(J)?J:""}catch(P){return""}}function Xe(P){return`${P.appName}!${P.appId}`}const at=new Map;function gt(P,U){const J=Xe(P);Nt(J,U),function cn(P,U){const J=function Jn(){return!un&&"BroadcastChannel"in self&&(un=new BroadcastChannel("[Firebase] FID Change"),un.onmessage=P=>{Nt(P.data.key,P.data.fid)}),un}();J&&J.postMessage({key:P,fid:U}),function yn(){0===at.size&&un&&(un.close(),un=null)}()}(J,U)}function Nt(P,U){const J=at.get(P);if(J)for(const _e of J)_e(U)}let un=null;const Tr="firebase-installations-store";let Wr=null;function er(){return Wr||(Wr=(0,ge.X3)("firebase-installations-database",1,{upgrade:(P,U)=>{0===U&&P.createObjectStore(Tr)}})),Wr}function qt(P,U){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,z.Z)(function*(P,U){const J=Xe(P),Ke=(yield er()).transaction(Tr,"readwrite"),wt=Ke.objectStore(Tr),Yt=yield wt.get(J);return yield wt.put(U,J),yield Ke.done,(!Yt||Yt.fid!==U.fid)&&gt(P,U.fid),U})).apply(this,arguments)}function Qr(P){return Un.apply(this,arguments)}function Un(){return(Un=(0,z.Z)(function*(P){const U=Xe(P),_e=(yield er()).transaction(Tr,"readwrite");yield _e.objectStore(Tr).delete(U),yield _e.done})).apply(this,arguments)}function nr(P,U){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,z.Z)(function*(P,U){const J=Xe(P),Ke=(yield er()).transaction(Tr,"readwrite"),wt=Ke.objectStore(Tr),Yt=yield wt.get(J),gn=U(Yt);return void 0===gn?yield wt.delete(J):yield wt.put(gn,J),yield Ke.done,gn&&(!Yt||Yt.fid!==gn.fid)&&gt(P,gn.fid),gn})).apply(this,arguments)}function an(P){return ur.apply(this,arguments)}function ur(){return(ur=(0,z.Z)(function*(P){let U;const J=yield nr(P.appConfig,_e=>{const Ke=Tn(_e),wt=In(P,Ke);return U=wt.registrationPromise,wt.installationEntry});return""===J.fid?{installationEntry:yield U}:{installationEntry:J,registrationPromise:U}})).apply(this,arguments)}function Tn(P){return Pn(P||{fid:De(),registrationStatus:0})}function In(P,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(dt.create("app-offline"))};const J={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},_e=function St(P,U){return gr.apply(this,arguments)}(P,J);return{installationEntry:J,registrationPromise:_e}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:mr(P)}:{installationEntry:U}}function gr(){return(gr=(0,z.Z)(function*(P,U){try{const J=yield Te(P,U);return qt(P.appConfig,J)}catch(J){throw st(J)&&409===J.customData.serverCode?yield Qr(P.appConfig):yield qt(P.appConfig,{fid:U.fid,registrationStatus:0}),J}})).apply(this,arguments)}function mr(P){return wr.apply(this,arguments)}function wr(){return(wr=(0,z.Z)(function*(P){let U=yield Lr(P.appConfig);for(;1===U.registrationStatus;)yield Ot(100),U=yield Lr(P.appConfig);if(0===U.registrationStatus){const{installationEntry:J,registrationPromise:_e}=yield an(P);return _e||J}return U})).apply(this,arguments)}function Lr(P){return nr(P,U=>{if(!U)throw dt.create("installation-not-found");return Pn(U)})}function Pn(P){return function ki(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function On(P,U){return Or.apply(this,arguments)}function Or(){return(Or=(0,z.Z)(function*({appConfig:P,heartbeatServiceProvider:U},J){const _e=cr(P,J),Ke=Ee(P,J),wt=U.getImmediate({optional:!0});if(wt){const fr=yield wt.getHeartbeatsHeader();fr&&Ke.append("x-firebase-client",fr)}const gn={method:"POST",headers:Ke,body:JSON.stringify({installation:{sdkVersion:oe,appId:P.appId}})},Ln=yield Z(()=>fetch(_e,gn));if(Ln.ok)return yt(yield Ln.json());throw yield kt("Generate Auth Token",Ln)})).apply(this,arguments)}function cr(P,{fid:U}){return`${ht(P)}/${U}/authTokens:generate`}function jr(P){return ai.apply(this,arguments)}function ai(){return(ai=(0,z.Z)(function*(P,U=!1){let J;const _e=yield nr(P.appConfig,wt=>{if(!jn(wt))throw dt.create("not-registered");const Yt=wt.authToken;if(!U&&Ve(Yt))return wt;if(1===Yt.requestStatus)return J=wn(P,U),wt;{if(!navigator.onLine)throw dt.create("app-offline");const gn=He(wt);return J=Nn(P,gn),gn}});return J?yield J:_e.authToken})).apply(this,arguments)}function wn(P,U){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,z.Z)(function*(P,U){let J=yield mn(P.appConfig);for(;1===J.authToken.requestStatus;)yield Ot(100),J=yield mn(P.appConfig);const _e=J.authToken;return 0===_e.requestStatus?jr(P,U):_e})).apply(this,arguments)}function mn(P){return nr(P,U=>{if(!jn(U))throw dt.create("not-registered");return function pt(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function Nn(P,U){return xn.apply(this,arguments)}function xn(){return(xn=(0,z.Z)(function*(P,U){try{const J=yield On(P,U),_e=Object.assign(Object.assign({},U),{authToken:J});return yield qt(P.appConfig,_e),J}catch(J){if(!st(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const _e=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield qt(P.appConfig,_e)}else yield Qr(P.appConfig);throw J}})).apply(this,arguments)}function jn(P){return void 0!==P&&2===P.registrationStatus}function Ve(P){return 2===P.requestStatus&&!function Pe(P){const U=Date.now();return U<P.creationTime||P.creationTime+P.expiresIn<U+36e5}(P)}function He(P){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:U})}function hn(){return(hn=(0,z.Z)(function*(P){const U=P,{installationEntry:J,registrationPromise:_e}=yield an(U);return _e?_e.catch(console.error):jr(U).catch(console.error),J.fid})).apply(this,arguments)}function dr(){return(dr=(0,z.Z)(function*(P,U=!1){const J=P;return yield Er(J),(yield jr(J,U)).token})).apply(this,arguments)}function Er(P){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,z.Z)(function*(P){const{registrationPromise:U}=yield an(P);U&&(yield U)})).apply(this,arguments)}function Sn(P){return dt.create("missing-app-config-values",{valueName:P})}const Kn="installations",Br=P=>{const U=P.getProvider("app").getImmediate(),J=function tn(P){if(!P||!P.options)throw Sn("App Configuration");if(!P.name)throw Sn("App Name");const U=["projectId","apiKey","appId"];for(const J of U)if(!P.options[J])throw Sn(J);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(U);return{app:U,appConfig:J,heartbeatServiceProvider:(0,Le._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},si=P=>{const U=P.getProvider("app").getImmediate(),J=(0,Le._getProvider)(U,Kn).getImmediate();return{getId:()=>function et(P){return hn.apply(this,arguments)}(J),getToken:Ke=>function dn(P){return dr.apply(this,arguments)}(J,Ke)}};(function mi(){(0,Le._registerComponent)(new fe.wA(Kn,Br,"PUBLIC")),(0,Le._registerComponent)(new fe.wA("installations-internal",si,"PRIVATE"))})(),(0,Le.registerVersion)(be,ue),(0,Le.registerVersion)(be,ue,"esm2017");const Fn="@firebase/remote-config",hi=new Ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vn{constructor(U,J,_e,Ke){this.client=U,this.storage=J,this.storageCache=_e,this.logger=Ke}isCachedDataFresh(U,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const _e=Date.now()-J,Ke=_e<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${_e}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${Ke}.`),Ke}fetch(U){var J=this;return(0,z.Z)(function*(){const[_e,Ke]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(Ke&&J.isCachedDataFresh(U.cacheMaxAgeMillis,_e))return Ke;U.eTag=Ke&&Ke.eTag;const wt=yield J.client.fetch(U),Yt=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===wt.status&&Yt.push(J.storage.setLastSuccessfulFetchResponse(wt)),yield Promise.all(Yt),wt})()}}function rr(P=navigator){return P.languages&&P.languages[0]||P.language}class zr{constructor(U,J,_e,Ke,wt,Yt){this.firebaseInstallations=U,this.sdkVersion=J,this.namespace=_e,this.projectId=Ke,this.apiKey=wt,this.appId=Yt}fetch(U){var J=this;return(0,z.Z)(function*(){var _e,Ke,wt;const[Yt,gn]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),fr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,$r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},Dn={sdk_version:J.sdkVersion,app_instance_id:Yt,app_instance_id_token:gn,app_id:J.appId,language_code:rr()},Yi={method:"POST",headers:$r,body:JSON.stringify(Dn)},_s=fetch(fr,Yi),Jo=new Promise((Xa,ma)=>{U.signal.addEventListener(()=>{const La=new Error("The operation was aborted.");La.name="AbortError",ma(La)})});let bo;try{yield Promise.race([_s,Jo]),bo=yield _s}catch(Xa){let ma="fetch-client-network";throw"AbortError"===(null===(_e=Xa)||void 0===_e?void 0:_e.name)&&(ma="fetch-timeout"),hi.create(ma,{originalErrorMessage:null===(Ke=Xa)||void 0===Ke?void 0:Ke.message})}let ea=bo.status;const No=bo.headers.get("ETag")||void 0;let Fa,ta;if(200===bo.status){let Xa;try{Xa=yield bo.json()}catch(ma){throw hi.create("fetch-client-parse",{originalErrorMessage:null===(wt=ma)||void 0===wt?void 0:wt.message})}Fa=Xa.entries,ta=Xa.state}if("INSTANCE_STATE_UNSPECIFIED"===ta?ea=500:"NO_CHANGE"===ta?ea=304:("NO_TEMPLATE"===ta||"EMPTY_CONFIG"===ta)&&(Fa={}),304!==ea&&200!==ea)throw hi.create("fetch-status",{httpStatus:ea});return{status:ea,eTag:No,config:Fa}})()}}class Ye{constructor(U,J){this.client=U,this.storage=J}fetch(U){var J=this;return(0,z.Z)(function*(){const _e=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch(U,_e)})()}attemptFetch(U,{throttleEndTimeMillis:J,backoffCount:_e}){var Ke=this;return(0,z.Z)(function*(){yield function qr(P,U){return new Promise((J,_e)=>{const Ke=Math.max(U-Date.now(),0),wt=setTimeout(J,Ke);P.addEventListener(()=>{clearTimeout(wt),_e(hi.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,J);try{const wt=yield Ke.client.fetch(U);return yield Ke.storage.deleteThrottleMetadata(),wt}catch(wt){if(!function tt(P){if(!(P instanceof Ne.ZR&&P.customData))return!1;const U=Number(P.customData.httpStatus);return 429===U||500===U||503===U||504===U}(wt))throw wt;const Yt={throttleEndTimeMillis:Date.now()+(0,Ne.$s)(_e),backoffCount:_e+1};return yield Ke.storage.setThrottleMetadata(Yt),Ke.attemptFetch(U,Yt)}})()}}class Ht{constructor(U,J,_e,Ke,wt){this.app=U,this._client=J,this._storageCache=_e,this._storage=Ke,this._logger=wt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xt(P,U){var J;const _e=P.target.error||void 0;return hi.create(U,{originalErrorMessage:_e&&(null===(J=_e)||void 0===J?void 0:J.message)})}const fn="app_namespace_store";class Ms{constructor(U,J,_e,Ke=function Zi(){return new Promise((P,U)=>{var J;try{const _e=indexedDB.open("firebase_remote_config",1);_e.onerror=Ke=>{U(Xt(Ke,"storage-open"))},_e.onsuccess=Ke=>{P(Ke.target.result)},_e.onupgradeneeded=Ke=>{0===Ke.oldVersion&&Ke.target.result.createObjectStore(fn,{keyPath:"compositeKey"})}}catch(_e){U(hi.create("storage-open",{originalErrorMessage:null===(J=_e)||void 0===J?void 0:J.message}))}})}()){this.appId=U,this.appName=J,this.namespace=_e,this.openDbPromise=Ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var J=this;return(0,z.Z)(function*(){const _e=yield J.openDbPromise;return new Promise((Ke,wt)=>{var Yt;const Ln=_e.transaction([fn],"readonly").objectStore(fn),fr=J.createCompositeKey(U);try{const $r=Ln.get(fr);$r.onerror=Dn=>{wt(Xt(Dn,"storage-get"))},$r.onsuccess=Dn=>{const Yi=Dn.target.result;Ke(Yi?Yi.value:void 0)}}catch($r){wt(hi.create("storage-get",{originalErrorMessage:null===(Yt=$r)||void 0===Yt?void 0:Yt.message}))}})})()}set(U,J){var _e=this;return(0,z.Z)(function*(){const Ke=yield _e.openDbPromise;return new Promise((wt,Yt)=>{var gn;const fr=Ke.transaction([fn],"readwrite").objectStore(fn),$r=_e.createCompositeKey(U);try{const Dn=fr.put({compositeKey:$r,value:J});Dn.onerror=Yi=>{Yt(Xt(Yi,"storage-set"))},Dn.onsuccess=()=>{wt()}}catch(Dn){Yt(hi.create("storage-set",{originalErrorMessage:null===(gn=Dn)||void 0===gn?void 0:gn.message}))}})})()}delete(U){var J=this;return(0,z.Z)(function*(){const _e=yield J.openDbPromise;return new Promise((Ke,wt)=>{var Yt;const Ln=_e.transaction([fn],"readwrite").objectStore(fn),fr=J.createCompositeKey(U);try{const $r=Ln.delete(fr);$r.onerror=Dn=>{wt(Xt(Dn,"storage-delete"))},$r.onsuccess=()=>{Ke()}}catch($r){wt(hi.create("storage-delete",{originalErrorMessage:null===(Yt=$r)||void 0===Yt?void 0:Yt.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class Is{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,z.Z)(function*(){const J=U.storage.getLastFetchStatus(),_e=U.storage.getLastSuccessfulFetchTimestampMillis(),Ke=U.storage.getActiveConfig(),wt=yield J;wt&&(U.lastFetchStatus=wt);const Yt=yield _e;Yt&&(U.lastSuccessfulFetchTimestampMillis=Yt);const gn=yield Ke;gn&&(U.activeConfig=gn)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function vi(){return So.apply(this,arguments)}function So(){return(So=(0,z.Z)(function*(){if(!(0,Ne.hl)())return!1;try{return yield(0,Ne.eu)()}catch(P){return!1}})).apply(this,arguments)}!function ls(){(0,Le._registerComponent)(new fe.wA("remote-config",function P(U,{instanceIdentifier:J}){const _e=U.getProvider("app").getImmediate(),Ke=U.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw hi.create("registration-window");if(!(0,Ne.hl)())throw hi.create("indexed-db-unavailable");const{projectId:wt,apiKey:Yt,appId:gn}=_e.options;if(!wt)throw hi.create("registration-project-id");if(!Yt)throw hi.create("registration-api-key");if(!gn)throw hi.create("registration-app-id");const Ln=new Ms(gn,_e.name,J=J||"firebase"),fr=new Is(Ln),$r=new ve.Yd(Fn);$r.logLevel=ve.in.ERROR;const Dn=new zr(Ke,Le.SDK_VERSION,J,wt,Yt,gn),Yi=new Ye(Dn,Ln),_s=new vn(Yi,Ln,fr,$r),Jo=new Ht(_e,_s,fr,Ln,$r);return function Ce(P){const U=(0,Ne.m9)(P);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(Jo),Jo},"PUBLIC").setMultipleInstances(!0)),(0,Le.registerVersion)(Fn,"0.3.14"),(0,Le.registerVersion)(Fn,"0.3.14","esm2017")}();const Qi="/firebase-messaging-sw.js",Si="/firebase-cloud-messaging-push-scope",Bi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qs="google.c.a.c_id",Gs="google.c.a.c_l",Xi="google.c.a.ts",Ji="google.c.a.e";var us=(()=>{return(P=us||(us={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",us;var P})();function cs(P){const U=new Uint8Array(P);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gs(P){const J=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_e=atob(J),Ke=new Uint8Array(_e.length);for(let wt=0;wt<_e.length;++wt)Ke[wt]=_e.charCodeAt(wt);return Ke}const ds="fcm_token_details_db",es="fcm_token_object_Store";function Mi(P){return ar.apply(this,arguments)}function ar(){return ar=(0,z.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(wt=>wt.name).includes(ds))return null;let U=null;return(yield(0,ge.X3)(ds,5,{upgrade:(_e=(0,z.Z)(function*(Ke,wt,Yt,gn){var Ln;if(wt<2||!Ke.objectStoreNames.contains(es))return;const fr=gn.objectStore(es),$r=yield fr.index("fcmSenderId").get(P);if(yield fr.clear(),$r)if(2===wt){const Dn=$r;if(!Dn.auth||!Dn.p256dh||!Dn.endpoint)return;U={token:Dn.fcmToken,createTime:null!==(Ln=Dn.createTime)&&void 0!==Ln?Ln:Date.now(),subscriptionOptions:{auth:Dn.auth,p256dh:Dn.p256dh,endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:"string"==typeof Dn.vapidKey?Dn.vapidKey:cs(Dn.vapidKey)}}}else if(3===wt){const Dn=$r;U={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:cs(Dn.auth),p256dh:cs(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:cs(Dn.vapidKey)}}}else if(4===wt){const Dn=$r;U={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:cs(Dn.auth),p256dh:cs(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:cs(Dn.vapidKey)}}}}),function(wt,Yt,gn,Ln){return _e.apply(this,arguments)})})).close(),yield(0,ge.Lj)(ds),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),Kr(U)?U:null;var _e}),ar.apply(this,arguments)}function Kr(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:U}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const ci="firebase-messaging-store";let Pi=null;function Vi(){return Pi||(Pi=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(P,U)=>{0===U&&P.createObjectStore(ci)}})),Pi}function Xs(P){return pi.apply(this,arguments)}function pi(){return(pi=(0,z.Z)(function*(P){const U=Fr(P),_e=yield(yield Vi()).transaction(ci).objectStore(ci).get(U);if(_e)return _e;{const Ke=yield Mi(P.appConfig.senderId);if(Ke)return yield Cr(P,Ke),Ke}})).apply(this,arguments)}function Cr(P,U){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,z.Z)(function*(P,U){const J=Fr(P),Ke=(yield Vi()).transaction(ci,"readwrite");return yield Ke.objectStore(ci).put(U,J),yield Ke.done,U})).apply(this,arguments)}function hs(P){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,z.Z)(function*(P){const U=Fr(P),_e=(yield Vi()).transaction(ci,"readwrite");yield _e.objectStore(ci).delete(U),yield _e.done})).apply(this,arguments)}function Fr({appConfig:P}){return P.appId}const xr=new Ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hn(P,U){return Js.apply(this,arguments)}function Js(){return(Js=(0,z.Z)(function*(P,U){var J;const _e=yield xo(P),Ke=Zt(U),wt={method:"POST",headers:_e,body:JSON.stringify(Ke)};let Yt;try{Yt=yield(yield fetch(Jr(P.appConfig),wt)).json()}catch(gn){throw xr.create("token-subscribe-failed",{errorInfo:null===(J=gn)||void 0===J?void 0:J.toString()})}if(Yt.error)throw xr.create("token-subscribe-failed",{errorInfo:Yt.error.message});if(!Yt.token)throw xr.create("token-subscribe-no-token");return Yt.token})).apply(this,arguments)}function go(P,U){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,z.Z)(function*(P,U){var J;const _e=yield xo(P),Ke=Zt(U.subscriptionOptions),wt={method:"PATCH",headers:_e,body:JSON.stringify(Ke)};let Yt;try{Yt=yield(yield fetch(`${Jr(P.appConfig)}/${U.token}`,wt)).json()}catch(gn){throw xr.create("token-update-failed",{errorInfo:null===(J=gn)||void 0===J?void 0:J.toString()})}if(Yt.error)throw xr.create("token-update-failed",{errorInfo:Yt.error.message});if(!Yt.token)throw xr.create("token-update-no-token");return Yt.token})).apply(this,arguments)}function Ao(P,U){return qo.apply(this,arguments)}function qo(){return(qo=(0,z.Z)(function*(P,U){var J;const Ke={method:"DELETE",headers:yield xo(P)};try{const Yt=yield(yield fetch(`${Jr(P.appConfig)}/${U}`,Ke)).json();if(Yt.error)throw xr.create("token-unsubscribe-failed",{errorInfo:Yt.error.message})}catch(wt){throw xr.create("token-unsubscribe-failed",{errorInfo:null===(J=wt)||void 0===J?void 0:J.toString()})}})).apply(this,arguments)}function Jr({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function xo(P){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,z.Z)(function*({appConfig:P,installations:U}){const J=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function Zt({p256dh:P,auth:U,endpoint:J,vapidKey:_e}){const Ke={web:{endpoint:J,auth:U,p256dh:P}};return _e!==Bi&&(Ke.web.applicationPubKey=_e),Ke}const Dr=6048e5;function Os(P){return fs.apply(this,arguments)}function fs(){return(fs=(0,z.Z)(function*(P){const U=yield V(P.swRegistration,P.vapidKey),J={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:U.endpoint,auth:cs(U.getKey("auth")),p256dh:cs(U.getKey("p256dh"))},_e=yield Xs(P.firebaseDependencies);if(_e){if(d(_e.subscriptionOptions,J))return Date.now()>=_e.createTime+Dr?ts(P,{token:_e.token,createTime:Date.now(),subscriptionOptions:J}):_e.token;try{yield Ao(P.firebaseDependencies,_e.token)}catch(Ke){console.warn(Ke)}return eo(P.firebaseDependencies,J)}return eo(P.firebaseDependencies,J)})).apply(this,arguments)}function Ci(P){return hr.apply(this,arguments)}function hr(){return(hr=(0,z.Z)(function*(P){const U=yield Xs(P.firebaseDependencies);U&&(yield Ao(P.firebaseDependencies,U.token),yield hs(P.firebaseDependencies));const J=yield P.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()})).apply(this,arguments)}function ts(P,U){return ns.apply(this,arguments)}function ns(){return(ns=(0,z.Z)(function*(P,U){try{const J=yield go(P.firebaseDependencies,U),_e=Object.assign(Object.assign({},U),{token:J,createTime:Date.now()});return yield Cr(P.firebaseDependencies,_e),J}catch(J){throw yield Ci(P),J}})).apply(this,arguments)}function eo(P,U){return G.apply(this,arguments)}function G(){return(G=(0,z.Z)(function*(P,U){const _e={token:yield Hn(P,U),createTime:Date.now(),subscriptionOptions:U};return yield Cr(P,_e),_e.token})).apply(this,arguments)}function V(P,U){return b.apply(this,arguments)}function b(){return(b=(0,z.Z)(function*(P,U){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gs(U)})})).apply(this,arguments)}function d(P,U){return U.vapidKey===P.vapidKey&&U.endpoint===P.endpoint&&U.auth===P.auth&&U.p256dh===P.p256dh}function I(P){const U={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function y(P,U){if(!U.notification)return;P.notification={};const J=U.notification.title;J&&(P.notification.title=J);const _e=U.notification.body;_e&&(P.notification.body=_e);const Ke=U.notification.image;Ke&&(P.notification.image=Ke)}(U,P),function R(P,U){!U.data||(P.data=U.data)}(U,P),function Y(P,U){var J,_e,Ke,wt,Yt;if(!(U.fcmOptions||null!==(J=U.notification)&&void 0!==J&&J.click_action))return;P.fcmOptions={};const gn=null!==(Ke=null===(_e=U.fcmOptions)||void 0===_e?void 0:_e.link)&&void 0!==Ke?Ke:null===(wt=U.notification)||void 0===wt?void 0:wt.click_action;gn&&(P.fcmOptions.link=gn);const Ln=null===(Yt=U.fcmOptions)||void 0===Yt?void 0:Yt.analytics_label;Ln&&(P.fcmOptions.analyticsLabel=Ln)}(U,P),U}function ke(P){return"object"==typeof P&&!!P&&Qs in P}function It(P,U){const J=[];for(let _e=0;_e<P.length;_e++)J.push(P.charAt(_e)),_e<U.length&&J.push(U.charAt(_e));return J.join("")}function rn(P){return xr.create("missing-app-config-values",{valueName:P})}It("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),It("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mn{constructor(U,J,_e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ke=function Pt(P){if(!P||!P.options)throw rn("App Configuration Object");if(!P.name)throw rn("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:J}=P;for(const _e of U)if(!J[_e])throw rn(_e);return{appName:P.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:Ke,installations:J,analyticsProvider:_e}}_delete(){return Promise.resolve()}}function yr(P){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,z.Z)(function*(P){var U;try{P.swRegistration=yield navigator.serviceWorker.register(Qi,{scope:Si}),P.swRegistration.update().catch(()=>{})}catch(J){throw xr.create("failed-service-worker-registration",{browserErrorMessage:null===(U=J)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function Mr(P,U){return ei.apply(this,arguments)}function ei(){return(ei=(0,z.Z)(function*(P,U){if(!U&&!P.swRegistration&&(yield yr(P)),U||!P.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw xr.create("invalid-sw-registration");P.swRegistration=U}})).apply(this,arguments)}function lr(P,U){return Di.apply(this,arguments)}function Di(){return(Di=(0,z.Z)(function*(P,U){U?P.vapidKey=U:P.vapidKey||(P.vapidKey=Bi)})).apply(this,arguments)}function Ls(){return(Ls=(0,z.Z)(function*(P,U){if(!navigator)throw xr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xr.create("permission-blocked");return yield lr(P,null==U?void 0:U.vapidKey),yield Mr(P,null==U?void 0:U.serviceWorkerRegistration),Os(P)})).apply(this,arguments)}function zi(P,U,J){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,z.Z)(function*(P,U,J){const _e=io(U);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(_e,{message_id:J[Qs],message_name:J[Gs],message_time:J[Xi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function io(P){switch(P){case us.NOTIFICATION_CLICKED:return"notification_open";case us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function X(){return(X=(0,z.Z)(function*(P,U){const J=U.data;if(!J.isFirebaseMessaging)return;P.onMessageHandler&&J.messageType===us.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(I(J)):P.onMessageHandler.next(I(J)));const _e=J.data;ke(_e)&&"1"===_e[Ji]&&(yield zi(P,J.messageType,_e))})).apply(this,arguments)}const $="@firebase/messaging",Fe=P=>{const U=new Mn(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function L(P,U){return X.apply(this,arguments)}(U,J)),U},Dt=P=>{const U=P.getProvider("messaging").getImmediate();return{getToken:_e=>function $i(P,U){return Ls.apply(this,arguments)}(U,_e)}};function Rn(){return ti.apply(this,arguments)}function ti(){return(ti=(0,z.Z)(function*(){try{yield(0,Ne.eu)()}catch(P){return!1}return"undefined"!=typeof window&&(0,Ne.hl)()&&(0,Ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Lt(){(0,Le._registerComponent)(new fe.wA("messaging",Fe,"PUBLIC")),(0,Le._registerComponent)(new fe.wA("messaging-internal",Dt,"PRIVATE")),(0,Le.registerVersion)($,"0.9.19"),(0,Le.registerVersion)($,"0.9.19","esm2017")}();const Ro="analytics",qi="firebase_id",Bs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yo="https://www.googletagmanager.com/gtag/js",Ni=new ve.Yd("@firebase/analytics");function As(P){return Promise.all(P.map(U=>U.catch(J=>J)))}function Ra(P,U){const J=document.createElement("script");J.src=`${Yo}?l=${P}&id=${U}`,J.async=!0,document.head.appendChild(J)}function Ql(P,U,J,_e,Ke,wt){return _l.apply(this,arguments)}function _l(){return(_l=(0,z.Z)(function*(P,U,J,_e,Ke,wt){const Yt=_e[Ke];try{if(Yt)yield U[Yt];else{const Ln=(yield As(J)).find(fr=>fr.measurementId===Ke);Ln&&(yield U[Ln.appId])}}catch(gn){Ni.error(gn)}P("config",Ke,wt)})).apply(this,arguments)}function Ko(P,U,J,_e,Ke){return ks.apply(this,arguments)}function ks(){return(ks=(0,z.Z)(function*(P,U,J,_e,Ke){try{let wt=[];if(Ke&&Ke.send_to){let Yt=Ke.send_to;Array.isArray(Yt)||(Yt=[Yt]);const gn=yield As(J);for(const Ln of Yt){const fr=gn.find(Dn=>Dn.measurementId===Ln),$r=fr&&U[fr.appId];if(!$r){wt=[];break}wt.push($r)}}0===wt.length&&(wt=Object.values(U)),yield Promise.all(wt),P("event",_e,Ke||{})}catch(wt){Ni.error(wt)}})).apply(this,arguments)}function Zo(P){const U=window.document.getElementsByTagName("script");for(const J of Object.values(U))if(J.src&&J.src.includes(Yo)&&J.src.includes(P))return J;return null}const xs=new Ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ei=new class ca{constructor(U={},J=1e3){this.throttleMetadata=U,this.intervalMillis=J}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,J){this.throttleMetadata[U]=J}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function da(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function yo(P){return qa.apply(this,arguments)}function qa(){return(qa=(0,z.Z)(function*(P){var U;const{appId:J,apiKey:_e}=P,Ke={method:"GET",headers:da(_e)},wt=Bs.replace("{app-id}",J),Yt=yield fetch(wt,Ke);if(200!==Yt.status&&304!==Yt.status){let gn="";try{const Ln=yield Yt.json();null!==(U=Ln.error)&&void 0!==U&&U.message&&(gn=Ln.error.message)}catch(Ln){}throw xs.create("config-fetch-failed",{httpStatus:Yt.status,responseMessage:gn})}return Yt.json()})).apply(this,arguments)}function ms(P){return bi.apply(this,arguments)}function bi(){return(bi=(0,z.Z)(function*(P,U=Ei,J){const{appId:_e,apiKey:Ke,measurementId:wt}=P.options;if(!_e)throw xs.create("no-app-id");if(!Ke){if(wt)return{measurementId:wt,appId:_e};throw xs.create("no-api-key")}const Yt=U.getThrottleMetadata(_e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},gn=new sn;return setTimeout((0,z.Z)(function*(){gn.abort()}),void 0!==J?J:6e4),to({appId:_e,apiKey:Ke,measurementId:wt},Yt,gn,U)})).apply(this,arguments)}function to(P,U,J){return oo.apply(this,arguments)}function oo(){return(oo=(0,z.Z)(function*(P,{throttleEndTimeMillis:U,backoffCount:J},_e,Ke=Ei){var wt,Yt;const{appId:gn,measurementId:Ln}=P;try{yield _o(_e,U)}catch(fr){if(Ln)return Ni.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ln} provided in the "measurementId" field in the local Firebase config. [${null===(wt=fr)||void 0===wt?void 0:wt.message}]`),{appId:gn,measurementId:Ln};throw fr}try{const fr=yield yo(P);return Ke.deleteThrottleMetadata(gn),fr}catch(fr){const $r=fr;if(!vl($r)){if(Ke.deleteThrottleMetadata(gn),Ln)return Ni.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ln} provided in the "measurementId" field in the local Firebase config. [${null==$r?void 0:$r.message}]`),{appId:gn,measurementId:Ln};throw fr}const Dn=503===Number(null===(Yt=null==$r?void 0:$r.customData)||void 0===Yt?void 0:Yt.httpStatus)?(0,Ne.$s)(J,Ke.intervalMillis,30):(0,Ne.$s)(J,Ke.intervalMillis),Yi={throttleEndTimeMillis:Date.now()+Dn,backoffCount:J+1};return Ke.setThrottleMetadata(gn,Yi),Ni.debug(`Calling attemptFetch again in ${Dn} millis`),to(P,Yi,_e,Ke)}})).apply(this,arguments)}function _o(P,U){return new Promise((J,_e)=>{const Ke=Math.max(U-Date.now(),0),wt=setTimeout(J,Ke);P.addEventListener(()=>{clearTimeout(wt),_e(xs.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function vl(P){if(!(P instanceof Ne.ZR&&P.customData))return!1;const U=Number(P.customData.httpStatus);return 429===U||500===U||503===U||504===U}class sn{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let Ri,Ca;function fa(){return(fa=(0,z.Z)(function*(P,U,J,_e,Ke){if(Ke&&Ke.global)P("event",J,_e);else{const wt=yield U;P("event",J,Object.assign(Object.assign({},_e),{send_to:wt}))}})).apply(this,arguments)}function Da(P){Ca=P}function Ml(P){Ri=P}function Rl(){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,z.Z)(function*(){var P;if(!(0,Ne.hl)())return Ni.warn(xs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ne.eu)()}catch(U){return Ni.warn(xs.create("indexeddb-unavailable",{errorInfo:null===(P=U)||void 0===P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function pa(){return(pa=(0,z.Z)(function*(P,U,J,_e,Ke,wt,Yt){var gn;const Ln=ms(P);Ln.then(_s=>{J[_s.measurementId]=_s.appId,P.options.measurementId&&_s.measurementId!==P.options.measurementId&&Ni.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${_s.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_s=>Ni.error(_s)),U.push(Ln);const fr=Rl().then(_s=>{if(_s)return _e.getId()}),[$r,Dn]=yield Promise.all([Ln,fr]);Zo(wt)||Ra(wt,$r.measurementId),Ca&&(Ke("consent","default",Ca),Da(void 0)),Ke("js",new Date);const Yi=null!==(gn=null==Yt?void 0:Yt.config)&&void 0!==gn?gn:{};return Yi.origin="firebase",Yi.update=!0,null!=Dn&&(Yi[qi]=Dn),Ke("config",$r.measurementId,Yi),Ri&&(Ke("set",Ri),Ml(void 0)),$r.measurementId})).apply(this,arguments)}class kl{constructor(U){this.app=U}_delete(){return delete ao[this.app.options.appId],Promise.resolve()}}let ao={},Oo=[];const br={};let Pr,or,ko="dataLayer",Qo=!1;function bs(P,U,J){!function Pl(){const P=[];if((0,Ne.ru)()&&P.push("This is a browser extension environment."),(0,Ne.zI)()||P.push("Cookies are not available."),P.length>0){const U=P.map((_e,Ke)=>`(${Ke+1}) ${_e}`).join(" "),J=xs.create("invalid-analytics-context",{errorInfo:U});Ni.warn(J.message)}}();const _e=P.options.appId;if(!_e)throw xs.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw xs.create("no-api-key");Ni.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ao[_e])throw xs.create("already-exists",{id:_e});if(!Qo){!function Ia(P){let U=[];Array.isArray(window[P])?U=window[P]:window[P]=U}(ko);const{wrappedGtag:wt,gtagCore:Yt}=function Oa(P,U,J,_e,Ke){let wt=function(...Yt){window[_e].push(arguments)};return window[Ke]&&"function"==typeof window[Ke]&&(wt=window[Ke]),window[Ke]=function Wa(P,U,J,_e){function wt(){return(wt=(0,z.Z)(function*(Yt,gn,Ln){try{"event"===Yt?yield Ko(P,U,J,gn,Ln):"config"===Yt?yield Ql(P,U,J,_e,gn,Ln):"consent"===Yt?P("consent","update",Ln):P("set",gn)}catch(fr){Ni.error(fr)}})).apply(this,arguments)}return function Ke(Yt,gn,Ln){return wt.apply(this,arguments)}}(wt,P,U,J),{gtagCore:wt,wrappedGtag:window[Ke]}}(ao,Oo,br,ko,"gtag");or=wt,Pr=Yt,Qo=!0}return ao[_e]=function Ya(P,U,J,_e,Ke,wt,Yt){return pa.apply(this,arguments)}(P,Oo,br,U,Pr,ko,J),new kl(P)}function gu(){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,z.Z)(function*(){if((0,Ne.ru)()||!(0,Ne.zI)()||!(0,Ne.hl)())return!1;try{return yield(0,Ne.eu)()}catch(P){return!1}})).apply(this,arguments)}const El="@firebase/analytics";!function lo(){(0,Le._registerComponent)(new fe.wA(Ro,(U,{options:J})=>bs(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,Le._registerComponent)(new fe.wA("analytics-internal",function P(U){try{const J=U.getProvider(Ro).getImmediate();return{logEvent:(_e,Ke,wt)=>function Ka(P,U,J,_e){P=(0,Ne.m9)(P),function ha(P,U,J,_e,Ke){return fa.apply(this,arguments)}(or,ao[P.app.options.appId],U,J,_e).catch(Ke=>Ni.error(Ke))}(J,_e,Ke,wt)}}catch(J){throw xs.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,Le.registerVersion)(El,"0.8.3"),(0,Le.registerVersion)(El,"0.8.3","esm2017")}();var Ns=H(341),ll=H(353),At=H(2868),Po=H(2102),vo=H(8915);const Jl=new a.GfV("7.4.1"),ga="__angularfire_symbol__analyticsIsSupportedValue",Uo="__angularfire_symbol__analyticsIsSupported",jo="__angularfire_symbol__remoteConfigIsSupportedValue",Eo="__angularfire_symbol__remoteConfigIsSupported",Vs="__angularfire_symbol__messagingIsSupportedValue",Za="__angularfire_symbol__messagingIsSupported";function Qa(P,U,J){if(U){if(1===U.length)return U[0];const wt=U.filter(Yt=>Yt.app===J);if(1===wt.length)return wt[0]}return J.container.getProvider(P).getImmediate({optional:!0})}globalThis[Uo]||(globalThis[Uo]=gu().then(P=>globalThis[ga]=P).catch(()=>globalThis[ga]=!1)),globalThis[Za]||(globalThis[Za]=Rn().then(P=>globalThis[Vs]=P).catch(()=>globalThis[Vs]=!1)),globalThis[Eo]||(globalThis[Eo]=vi().then(P=>globalThis[jo]=P).catch(()=>globalThis[jo]=!1));const Ll=(P,U)=>{const J=U?[U]:(0,se.C6)(),_e=[];return J.forEach(Ke=>{Ke.container.getProvider(P).instances.forEach(Yt=>{_e.includes(Yt)||_e.push(Yt)})}),_e};function Oi(){}class uo{constructor(U,J=Ns.N){this.zone=U,this.delegate=J}now(){return this.delegate.now()}schedule(U,J,_e){const Ke=this.zone;return this.delegate.schedule(function(Yt){Ke.runGuarded(()=>{U.apply(this,[Yt])})},J,_e)}}class $s{constructor(U){this.zone=U,this.task=null}call(U,J){const _e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oi,{},Oi,Oi)),J.pipe((0,At.b)({next:_e,complete:_e,error:_e})).subscribe(U).add(_e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wi=(()=>{class P{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new uo(Zone.current)),this.insideAngular=J.run(()=>new uo(Zone.current,ll.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(J){return new(J||P)(a.LFG(a.R0b))},P.\u0275prov=a.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function A(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function N(P){return P.pipe((0,Po.QV)(A().outsideAngular))}function re(P){return A(),function Ae(P){return function(J){return(J=J.lift(new $s(P.ngZone))).pipe((0,vo.R)(P.outsideAngular),(0,Po.QV)(P.insideAngular))}}(A())(P)}},2090:(on,ut,H)=>{"use strict";H.d(ut,{$s:()=>mn,BH:()=>ot,DV:()=>Tr,Dv:()=>mr,G6:()=>kt,GJ:()=>En,L:()=>ge,LL:()=>at,Pz:()=>ze,Sg:()=>De,UG:()=>Qe,UI:()=>er,US:()=>fe,Wj:()=>Pn,Wl:()=>Nt,Yr:()=>yt,ZB:()=>de,ZR:()=>Xe,aH:()=>Wt,b$:()=>we,cI:()=>Ut,dS:()=>On,eu:()=>rt,g5:()=>z,gK:()=>wr,gQ:()=>an,h$:()=>ve,hl:()=>je,hu:()=>se,jU:()=>nt,lb:()=>ki,m9:()=>jn,ne:()=>ur,p$:()=>ue,pd:()=>Nr,r3:()=>vr,ru:()=>Oe,tV:()=>be,uI:()=>Ue,ug:()=>Or,vZ:()=>qt,w1:()=>st,w9:()=>yn,xO:()=>Un,xb:()=>Wr,z$:()=>pe,zI:()=>Ee,zd:()=>nr});const se=function(Ve,Pe){if(!Ve)throw z(Pe)},z=function(Ve){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ve)},Le=function(Ve){const Pe=[];let He=0;for(let pt=0;pt<Ve.length;pt++){let et=Ve.charCodeAt(pt);et<128?Pe[He++]=et:et<2048?(Pe[He++]=et>>6|192,Pe[He++]=63&et|128):55296==(64512&et)&&pt+1<Ve.length&&56320==(64512&Ve.charCodeAt(pt+1))?(et=65536+((1023&et)<<10)+(1023&Ve.charCodeAt(++pt)),Pe[He++]=et>>18|240,Pe[He++]=et>>12&63|128,Pe[He++]=et>>6&63|128,Pe[He++]=63&et|128):(Pe[He++]=et>>12|224,Pe[He++]=et>>6&63|128,Pe[He++]=63&et|128)}return Pe},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ve,Pe){if(!Array.isArray(Ve))throw Error("encodeByteArray takes an array as a parameter");this.init_();const He=Pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,pt=[];for(let et=0;et<Ve.length;et+=3){const hn=Ve[et],dn=et+1<Ve.length,dr=dn?Ve[et+1]:0,Er=et+2<Ve.length,Sr=Er?Ve[et+2]:0;let Me=(15&dr)<<2|Sr>>6,Et=63&Sr;Er||(Et=64,dn||(Me=64)),pt.push(He[hn>>2],He[(3&hn)<<4|dr>>4],He[Me],He[Et])}return pt.join("")},encodeString(Ve,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?btoa(Ve):this.encodeByteArray(Le(Ve),Pe)},decodeString(Ve,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?atob(Ve):function(Ve){const Pe=[];let He=0,pt=0;for(;He<Ve.length;){const et=Ve[He++];if(et<128)Pe[pt++]=String.fromCharCode(et);else if(et>191&&et<224){const hn=Ve[He++];Pe[pt++]=String.fromCharCode((31&et)<<6|63&hn)}else if(et>239&&et<365){const Er=((7&et)<<18|(63&Ve[He++])<<12|(63&Ve[He++])<<6|63&Ve[He++])-65536;Pe[pt++]=String.fromCharCode(55296+(Er>>10)),Pe[pt++]=String.fromCharCode(56320+(1023&Er))}else{const hn=Ve[He++],dn=Ve[He++];Pe[pt++]=String.fromCharCode((15&et)<<12|(63&hn)<<6|63&dn)}}return Pe.join("")}(this.decodeStringToByteArray(Ve,Pe))},decodeStringToByteArray(Ve,Pe){this.init_();const He=Pe?this.charToByteMapWebSafe_:this.charToByteMap_,pt=[];for(let et=0;et<Ve.length;){const hn=He[Ve.charAt(et++)],dr=et<Ve.length?He[Ve.charAt(et)]:0;++et;const Sr=et<Ve.length?He[Ve.charAt(et)]:64;++et;const Be=et<Ve.length?He[Ve.charAt(et)]:64;if(++et,null==hn||null==dr||null==Sr||null==Be)throw Error();pt.push(hn<<2|dr>>4),64!==Sr&&(pt.push(dr<<4&240|Sr>>2),64!==Be&&pt.push(Sr<<6&192|Be))}return pt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ve=0;Ve<this.ENCODED_VALS.length;Ve++)this.byteToCharMap_[Ve]=this.ENCODED_VALS.charAt(Ve),this.charToByteMap_[this.byteToCharMap_[Ve]]=Ve,this.byteToCharMapWebSafe_[Ve]=this.ENCODED_VALS_WEBSAFE.charAt(Ve),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ve]]=Ve,Ve>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ve)]=Ve,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ve)]=Ve)}}},ve=function(Ve){const Pe=Le(Ve);return fe.encodeByteArray(Pe,!0)},ge=function(Ve){return ve(Ve).replace(/\./g,"")},be=function(Ve){try{return fe.decodeString(Ve,!0)}catch(Pe){console.error("base64Decode failed: ",Pe)}return null};function ue(Ve){return de(void 0,Ve)}function de(Ve,Pe){if(!(Pe instanceof Object))return Pe;switch(Pe.constructor){case Date:return new Date(Pe.getTime());case Object:void 0===Ve&&(Ve={});break;case Array:Ve=[];break;default:return Pe}for(const He in Pe)!Pe.hasOwnProperty(He)||!oe(He)||(Ve[He]=de(Ve[He],Pe[He]));return Ve}function oe(Ve){return"__proto__"!==Ve}function pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function Qe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ve){return!1}}function nt(){return"object"==typeof self&&self.self===self}function Oe(){const Ve="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ve&&void 0!==Ve.id}function we(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function st(){const Ve=pe();return Ve.indexOf("MSIE ")>=0||Ve.indexOf("Trident/")>=0}function yt(){return!1}function kt(){return!Qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){return"object"==typeof indexedDB}function rt(){return new Promise((Ve,Pe)=>{try{let He=!0;const pt="validate-browser-context-for-indexeddb-analytics-module",et=self.indexedDB.open(pt);et.onsuccess=()=>{et.result.close(),He||self.indexedDB.deleteDatabase(pt),Ve(!0)},et.onupgradeneeded=()=>{He=!1},et.onerror=()=>{var hn;Pe((null===(hn=et.error)||void 0===hn?void 0:hn.message)||"")}}catch(He){Pe(He)}})}function Ee(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Te=()=>{try{return function Z(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Ve=process.env.__FIREBASE_DEFAULTS__;return Ve?JSON.parse(Ve):void 0})()||(()=>{if("undefined"==typeof document)return;let Ve;try{Ve=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(He){return}const Pe=Ve&&be(Ve[1]);return Pe&&JSON.parse(Pe)})()}catch(Ve){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ve}`)}},Wt=()=>{var Ve;return null===(Ve=Te())||void 0===Ve?void 0:Ve.config},ze=Ve=>{var Pe;return null===(Pe=Te())||void 0===Pe?void 0:Pe[`_${Ve}`]};class ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Pe,He)=>{this.resolve=Pe,this.reject=He})}wrapCallback(Pe){return(He,pt)=>{He?this.reject(He):this.resolve(pt),"function"==typeof Pe&&(this.promise.catch(()=>{}),1===Pe.length?Pe(He):Pe(He,pt))}}}function De(Ve,Pe){if(Ve.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pt=Pe||"demo-project",et=Ve.iat||0,hn=Ve.sub||Ve.user_id;if(!hn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const dn=Object.assign({iss:`https://securetoken.google.com/${pt}`,aud:pt,iat:et,exp:et+3600,auth_time:et,sub:hn,user_id:hn,firebase:{sign_in_provider:"custom",identities:{}}},Ve);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(dn)),""].join(".")}class Xe extends Error{constructor(Pe,He,pt){super(He),this.code=Pe,this.customData=pt,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,at.prototype.create)}}class at{constructor(Pe,He,pt){this.service=Pe,this.serviceName=He,this.errors=pt}create(Pe,...He){const pt=He[0]||{},et=`${this.service}/${Pe}`,hn=this.errors[Pe],dn=hn?function gt(Ve,Pe){return Ve.replace(ft,(He,pt)=>{const et=Pe[pt];return null!=et?String(et):`<${pt}?>`})}(hn,pt):"Error";return new Xe(et,`${this.serviceName}: ${dn} (${et}).`,pt)}}const ft=/\{\$([^}]+)}/g;function Ut(Ve){return JSON.parse(Ve)}function Nt(Ve){return JSON.stringify(Ve)}const cn=function(Ve){let Pe={},He={},pt={},et="";try{const hn=Ve.split(".");Pe=Ut(be(hn[0])||""),He=Ut(be(hn[1])||""),et=hn[2],pt=He.d||{},delete He.d}catch(hn){}return{header:Pe,claims:He,data:pt,signature:et}},yn=function(Ve){const He=cn(Ve).claims;return!!He&&"object"==typeof He&&He.hasOwnProperty("iat")},En=function(Ve){const Pe=cn(Ve).claims;return"object"==typeof Pe&&!0===Pe.admin};function vr(Ve,Pe){return Object.prototype.hasOwnProperty.call(Ve,Pe)}function Tr(Ve,Pe){if(Object.prototype.hasOwnProperty.call(Ve,Pe))return Ve[Pe]}function Wr(Ve){for(const Pe in Ve)if(Object.prototype.hasOwnProperty.call(Ve,Pe))return!1;return!0}function er(Ve,Pe,He){const pt={};for(const et in Ve)Object.prototype.hasOwnProperty.call(Ve,et)&&(pt[et]=Pe.call(He,Ve[et],et,Ve));return pt}function qt(Ve,Pe){if(Ve===Pe)return!0;const He=Object.keys(Ve),pt=Object.keys(Pe);for(const et of He){if(!pt.includes(et))return!1;const hn=Ve[et],dn=Pe[et];if(Yn(hn)&&Yn(dn)){if(!qt(hn,dn))return!1}else if(hn!==dn)return!1}for(const et of pt)if(!He.includes(et))return!1;return!0}function Yn(Ve){return null!==Ve&&"object"==typeof Ve}function Un(Ve){const Pe=[];for(const[He,pt]of Object.entries(Ve))Array.isArray(pt)?pt.forEach(et=>{Pe.push(encodeURIComponent(He)+"="+encodeURIComponent(et))}):Pe.push(encodeURIComponent(He)+"="+encodeURIComponent(pt));return Pe.length?"&"+Pe.join("&"):""}function nr(Ve){const Pe={};return Ve.replace(/^\?/,"").split("&").forEach(pt=>{if(pt){const[et,hn]=pt.split("=");Pe[decodeURIComponent(et)]=decodeURIComponent(hn)}}),Pe}function Nr(Ve){const Pe=Ve.indexOf("?");if(!Pe)return"";const He=Ve.indexOf("#",Pe);return Ve.substring(Pe,He>0?He:void 0)}class an{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Pe=1;Pe<this.blockSize;++Pe)this.pad_[Pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Pe,He){He||(He=0);const pt=this.W_;if("string"==typeof Pe)for(let Be=0;Be<16;Be++)pt[Be]=Pe.charCodeAt(He)<<24|Pe.charCodeAt(He+1)<<16|Pe.charCodeAt(He+2)<<8|Pe.charCodeAt(He+3),He+=4;else for(let Be=0;Be<16;Be++)pt[Be]=Pe[He]<<24|Pe[He+1]<<16|Pe[He+2]<<8|Pe[He+3],He+=4;for(let Be=16;Be<80;Be++){const Me=pt[Be-3]^pt[Be-8]^pt[Be-14]^pt[Be-16];pt[Be]=4294967295&(Me<<1|Me>>>31)}let Sr,mt,et=this.chain_[0],hn=this.chain_[1],dn=this.chain_[2],dr=this.chain_[3],Er=this.chain_[4];for(let Be=0;Be<80;Be++){Be<40?Be<20?(Sr=dr^hn&(dn^dr),mt=1518500249):(Sr=hn^dn^dr,mt=1859775393):Be<60?(Sr=hn&dn|dr&(hn|dn),mt=2400959708):(Sr=hn^dn^dr,mt=3395469782);const Me=(et<<5|et>>>27)+Sr+Er+mt+pt[Be]&4294967295;Er=dr,dr=dn,dn=4294967295&(hn<<30|hn>>>2),hn=et,et=Me}this.chain_[0]=this.chain_[0]+et&4294967295,this.chain_[1]=this.chain_[1]+hn&4294967295,this.chain_[2]=this.chain_[2]+dn&4294967295,this.chain_[3]=this.chain_[3]+dr&4294967295,this.chain_[4]=this.chain_[4]+Er&4294967295}update(Pe,He){if(null==Pe)return;void 0===He&&(He=Pe.length);const pt=He-this.blockSize;let et=0;const hn=this.buf_;let dn=this.inbuf_;for(;et<He;){if(0===dn)for(;et<=pt;)this.compress_(Pe,et),et+=this.blockSize;if("string"==typeof Pe){for(;et<He;)if(hn[dn]=Pe.charCodeAt(et),++dn,++et,dn===this.blockSize){this.compress_(hn),dn=0;break}}else for(;et<He;)if(hn[dn]=Pe[et],++dn,++et,dn===this.blockSize){this.compress_(hn),dn=0;break}}this.inbuf_=dn,this.total_+=He}digest(){const Pe=[];let He=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let et=this.blockSize-1;et>=56;et--)this.buf_[et]=255&He,He/=256;this.compress_(this.buf_);let pt=0;for(let et=0;et<5;et++)for(let hn=24;hn>=0;hn-=8)Pe[pt]=this.chain_[et]>>hn&255,++pt;return Pe}}function ur(Ve,Pe){const He=new Tn(Ve,Pe);return He.subscribe.bind(He)}class Tn{constructor(Pe,He){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=He,this.task.then(()=>{Pe(this)}).catch(pt=>{this.error(pt)})}next(Pe){this.forEachObserver(He=>{He.next(Pe)})}error(Pe){this.forEachObserver(He=>{He.error(Pe)}),this.close(Pe)}complete(){this.forEachObserver(Pe=>{Pe.complete()}),this.close()}subscribe(Pe,He,pt){let et;if(void 0===Pe&&void 0===He&&void 0===pt)throw new Error("Missing Observer.");et=function St(Ve,Pe){if("object"!=typeof Ve||null===Ve)return!1;for(const He of Pe)if(He in Ve&&"function"==typeof Ve[He])return!0;return!1}(Pe,["next","error","complete"])?Pe:{next:Pe,error:He,complete:pt},void 0===et.next&&(et.next=gr),void 0===et.error&&(et.error=gr),void 0===et.complete&&(et.complete=gr);const hn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?et.error(this.finalError):et.complete()}catch(dn){}}),this.observers.push(et),hn}unsubscribeOne(Pe){void 0===this.observers||void 0===this.observers[Pe]||(delete this.observers[Pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Pe){if(!this.finalized)for(let He=0;He<this.observers.length;He++)this.sendOne(He,Pe)}sendOne(Pe,He){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Pe])try{He(this.observers[Pe])}catch(pt){"undefined"!=typeof console&&console.error&&console.error(pt)}})}close(Pe){this.finalized||(this.finalized=!0,void 0!==Pe&&(this.finalError=Pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gr(){}const mr=function(Ve,Pe,He,pt){let et;if(pt<Pe?et="at least "+Pe:pt>He&&(et=0===He?"none":"no more than "+He),et)throw new Error(Ve+" failed: Was called with "+pt+(1===pt?" argument.":" arguments.")+" Expects "+et+".")};function wr(Ve,Pe){return`${Ve} failed: ${Pe} argument `}function Pn(Ve,Pe,He,pt){if((!pt||He)&&"function"!=typeof He)throw new Error(wr(Ve,Pe)+"must be a valid function.")}function ki(Ve,Pe,He,pt){if((!pt||He)&&("object"!=typeof He||null===He))throw new Error(wr(Ve,Pe)+"must be a valid context object.")}const On=function(Ve){const Pe=[];let He=0;for(let pt=0;pt<Ve.length;pt++){let et=Ve.charCodeAt(pt);if(et>=55296&&et<=56319){const hn=et-55296;pt++,se(pt<Ve.length,"Surrogate pair missing trail surrogate."),et=65536+(hn<<10)+(Ve.charCodeAt(pt)-56320)}et<128?Pe[He++]=et:et<2048?(Pe[He++]=et>>6|192,Pe[He++]=63&et|128):et<65536?(Pe[He++]=et>>12|224,Pe[He++]=et>>6&63|128,Pe[He++]=63&et|128):(Pe[He++]=et>>18|240,Pe[He++]=et>>12&63|128,Pe[He++]=et>>6&63|128,Pe[He++]=63&et|128)}return Pe},Or=function(Ve){let Pe=0;for(let He=0;He<Ve.length;He++){const pt=Ve.charCodeAt(He);pt<128?Pe++:pt<2048?Pe+=2:pt>=55296&&pt<=56319?(Pe+=4,He++):Pe+=3}return Pe};function mn(Ve,Pe=1e3,He=2){const pt=Pe*Math.pow(He,Ve),et=Math.round(.5*pt*(Math.random()-.5)*2);return Math.min(144e5,pt+et)}function jn(Ve){return Ve&&Ve._delegate?Ve._delegate:Ve}},4153:(on,ut,H)=>{"use strict";H.d(ut,{Br:()=>Ao,dr:()=>wr,YG:()=>jr,Sm:()=>ai,W2:()=>He,Gu:()=>mt,gu:()=>Be,ki:()=>Hn,jP:()=>ci,PQ:()=>vn,wd:()=>Vt,sr:()=>Xt,Pc:()=>b,HT:()=>qo,_q:()=>Jr,SH:()=>ar});var a=H(5e3),z=(H(4182),H(655)),Le=H(6498),Ne=H(6688),fe=H(7043),ve=H(4850);function be(d,I,y,R){return(0,fe.m)(y)&&(R=y,y=void 0),R?be(d,I,y).pipe((0,ve.U)(Y=>(0,Ne.k)(Y)?R(...Y):R(Y))):new Le.y(Y=>{ue(d,I,function ke(It){Y.next(arguments.length>1?Array.prototype.slice.call(arguments):It)},Y,y)})}function ue(d,I,y,R,Y){let ke;if(function pe(d){return d&&"function"==typeof d.addEventListener&&"function"==typeof d.removeEventListener}(d)){const It=d;d.addEventListener(I,y,Y),ke=()=>It.removeEventListener(I,y,Y)}else if(function oe(d){return d&&"function"==typeof d.on&&"function"==typeof d.off}(d)){const It=d;d.on(I,y),ke=()=>It.off(I,y)}else if(function de(d){return d&&"function"==typeof d.addListener&&"function"==typeof d.removeListener}(d)){const It=d;d.addListener(I,y),ke=()=>It.removeListener(I,y)}else{if(!d||!d.length)throw new TypeError("Invalid event target");for(let It=0,Pt=d.length;It<Pt;It++)ue(d[It],I,y,R,Y)}R.add(ke)}var Ue=H(8929),Qe=H(591),nt=H(4740),ht=(H(5942),H(129),H(1369),H(1911),H(9658)),yt=H(5730),kt=H(664),je=H(385),rt=H(4414),te=(H(3457),H(4349),H(1308)),Wt=H(2198),ze=H(7545),ot=H(5778),De=H(9808);const Xe=ht.i,ft=["*"];function un(d,I){if(1&d&&(a.TgZ(0,"div",1),a.GkF(1,2),a.qZA()),2&d){const y=a.oxw();a.xp6(1),a.Q6J("ngTemplateOutlet",y.template)}}const yn=d=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(d):"function"==typeof requestAnimationFrame?requestAnimationFrame(d):setTimeout(d),En=d=>!!d.resolveComponentFactory,an=(d,I)=>{const y=d.prototype;I.forEach(R=>{Object.defineProperty(y,R,{get(){return this.el[R]},set(Y){this.z.runOutsideAngular(()=>this.el[R]=Y)}})})},ur=(d,I)=>{const y=d.prototype;I.forEach(R=>{y[R]=function(){const Y=arguments;return this.z.runOutsideAngular(()=>this.el[R].apply(this.el,Y))}})},Tn=(d,I,y)=>{y.forEach(R=>d[R]=be(I,R))};function St(d){return function(y){const{defineCustomElementFn:R,inputs:Y,methods:ke}=d;return void 0!==R&&R(),Y&&an(y,Y),ke&&ur(y,ke),y}}let wr=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-app"]],ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0})],d),d})(),jr=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement,Tn(this,this.el,["ionFocus","ionBlur"])}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],d),d})(),ai=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0,inputs:["collapse"]})],d),d})(),He=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement,Tn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],d),d})(),mt=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],d),d})(),Be=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],d),d})(),vn=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0,inputs:["color","duration","name","paused"]})],d),d})(),Vt=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0,inputs:["color","size"]})],d),d})(),Xt=(()=>{let d=class{constructor(y,R,Y){this.z=Y,y.detach(),this.el=R.nativeElement}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:ft,decls:1,vars:0,template:function(y,R){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({defineCustomElementFn:void 0,inputs:["color","mode"]})],d),d})();class fn{constructor(I={}){this.data=I}get(I){return this.data[I]}}let Ir=(()=>{class d{constructor(y,R){this.zone=y,this.appRef=R}create(y,R,Y){return new zn(y,R,Y,this.appRef,this.zone)}}return d.\u0275fac=function(y){return new(y||d)(a.LFG(a.R0b),a.LFG(a.z2F))},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac}),d})();class zn{constructor(I,y,R,Y,ke){this.resolverOrInjector=I,this.injector=y,this.location=R,this.appRef=Y,this.zone=ke,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(I,y,R,Y){return this.zone.run(()=>new Promise(ke=>{ke(Zi(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,I,y,R,Y))}))}removeViewFromDom(I,y){return this.zone.run(()=>new Promise(R=>{const Y=this.elRefMap.get(y);if(Y){Y.destroy(),this.elRefMap.delete(y);const ke=this.elEventsMap.get(y);ke&&(ke(),this.elEventsMap.delete(y))}R()}))}}const Zi=(d,I,y,R,Y,ke,It,Pt,rn,Mn,yr)=>{let Zn;const Mr=a.zs3.create({providers:Yr(Mn),parent:y});if(I&&En(I)){const $i=I.resolveComponentFactory(rn);Zn=R?R.createComponent($i,R.length,Mr):$i.create(Mr)}else{if(!R)return null;Zn=R.createComponent(rn,{index:R.indexOf,injector:Mr,environmentInjector:I})}const ei=Zn.instance,lr=Zn.location.nativeElement;if(Mn&&Object.assign(ei,Mn),yr)for(const $i of yr)lr.classList.add($i);const Di=Is(d,ei,lr);return Pt.appendChild(lr),R||Y.attachView(Zn.hostView),Zn.changeDetectorRef.reattach(),ke.set(lr,Zn),It.set(lr,Di),lr},Ms=[kt.L,kt.a,kt.b,kt.c,kt.d],Is=(d,I,y)=>d.run(()=>{const R=Ms.filter(Y=>"function"==typeof I[Y]).map(Y=>{const ke=It=>I[Y](It.detail);return y.addEventListener(Y,ke),()=>y.removeEventListener(Y,ke)});return()=>R.forEach(Y=>Y())}),ls=new a.OlP("NavParamsToken"),Yr=d=>[{provide:ls,useValue:d},{provide:fn,useFactory:Ar,deps:[ls]}],Ar=d=>new fn(d),So=(d,I)=>((d=d.filter(y=>y.stackId!==I.stackId)).push(I),d),Bi=(d,I)=>{const y=d.createUrlTree(["."],{relativeTo:I});return d.serializeUrl(y)},Qs=(d,I)=>{if(!d)return;const y=Gs(I);for(let R=0;R<y.length;R++){if(R>=d.length)return y[R];if(y[R]!==d[R])return}},Gs=d=>d.split("/").map(I=>I.trim()).filter(I=>""!==I),Xi=d=>{d&&(d.ref.destroy(),d.unlistenEvents())};class Ji{constructor(I,y,R,Y,ke,It){this.containerEl=y,this.router=R,this.navCtrl=Y,this.zone=ke,this.location=It,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==I?Gs(I):void 0}createView(I,y){var R;const Y=Bi(this.router,y),ke=null===(R=null==I?void 0:I.location)||void 0===R?void 0:R.nativeElement,It=Is(this.zone,I.instance,ke);return{id:this.nextId++,stackId:Qs(this.tabsPrefix,Y),unlistenEvents:It,element:ke,ref:I,url:Y}}getExistingView(I){const y=Bi(this.router,I),R=this.views.find(Y=>Y.url===y);return R&&R.ref.changeDetectorRef.reattach(),R}setActive(I){var y,R;const Y=this.navCtrl.consumeTransition();let{direction:ke,animation:It,animationBuilder:Pt}=Y;const rn=this.activeView,Mn=((d,I)=>!I||d.stackId!==I.stackId)(I,rn);Mn&&(ke="back",It=void 0);const yr=this.views.slice();let Zn;const Mr=this.router;Mr.getCurrentNavigation?Zn=Mr.getCurrentNavigation():!(null===(y=Mr.navigations)||void 0===y)&&y.value&&(Zn=Mr.navigations.value),null!==(R=null==Zn?void 0:Zn.extras)&&void 0!==R&&R.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ei=this.views.includes(I),lr=this.insertView(I,ke);ei||I.ref.changeDetectorRef.detectChanges();const Di=I.animationBuilder;return void 0===Pt&&"back"===ke&&!Mn&&void 0!==Di&&(Pt=Di),rn&&(rn.animationBuilder=Pt),this.zone.runOutsideAngular(()=>this.wait(()=>(rn&&rn.ref.changeDetectorRef.detach(),I.ref.changeDetectorRef.reattach(),this.transition(I,rn,It,this.canGoBack(1),!1,Pt).then(()=>Wi(I,lr,yr,this.location,this.zone)).then(()=>({enteringView:I,direction:ke,animation:It,tabSwitch:Mn})))))}canGoBack(I,y=this.getActiveStackId()){return this.getStack(y).length>I}pop(I,y=this.getActiveStackId()){return this.zone.run(()=>{var R,Y;const ke=this.getStack(y);if(ke.length<=I)return Promise.resolve(!1);const It=ke[ke.length-I-1];let Pt=It.url;const rn=It.savedData;if(rn){const yr=rn.get("primary");null!==(Y=null===(R=null==yr?void 0:yr.route)||void 0===R?void 0:R._routerState)&&void 0!==Y&&Y.snapshot.url&&(Pt=yr.route._routerState.snapshot.url)}const{animationBuilder:Mn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Pt,Object.assign(Object.assign({},It.savedExtras),{animation:Mn})).then(()=>!0)})}startBackTransition(){const I=this.activeView;if(I){const y=this.getStack(I.stackId),R=y[y.length-2],Y=R.animationBuilder;return this.wait(()=>this.transition(R,I,"back",this.canGoBack(2),!0,Y))}return Promise.resolve()}endBackTransition(I){I?(this.skipTransition=!0,this.pop(1)):this.activeView&&us(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(I){const y=this.getStack(I);return y.length>0?y[y.length-1]:void 0}getRootUrl(I){const y=this.getStack(I);return y.length>0?y[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Xi),this.activeView=void 0,this.views=[]}getStack(I){return this.views.filter(y=>y.stackId===I)}insertView(I,y){return this.activeView=I,this.views=((d,I,y)=>"root"===y?So(d,I):"forward"===y?((d,I)=>(d.indexOf(I)>=0?d=d.filter(R=>R.stackId!==I.stackId||R.id<=I.id):d.push(I),d))(d,I):((d,I)=>d.indexOf(I)>=0?d.filter(R=>R.stackId!==I.stackId||R.id<=I.id):So(d,I))(d,I))(this.views,I,y),this.views.slice()}transition(I,y,R,Y,ke,It){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(y===I)return Promise.resolve(!1);const Pt=I?I.element:void 0,rn=y?y.element:void 0,Mn=this.containerEl;return Pt&&Pt!==rn&&(Pt.classList.add("ion-page"),Pt.classList.add("ion-page-invisible"),Pt.parentElement!==Mn&&Mn.appendChild(Pt),Mn.commit)?Mn.commit(Pt,rn,{deepWait:!0,duration:void 0===R?0:void 0,direction:R,showGoBack:Y,progressAnimation:ke,animationBuilder:It}):Promise.resolve(!1)}wait(I){return(0,z.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const y=this.runningTask=I();return y.finally(()=>this.runningTask=void 0),y})}}const Wi=(d,I,y,R,Y)=>"function"==typeof requestAnimationFrame?new Promise(ke=>{requestAnimationFrame(()=>{us(d,I,y,R,Y),ke()})}):Promise.resolve(),us=(d,I,y,R,Y)=>{Y.run(()=>y.filter(ke=>!I.includes(ke)).forEach(Xi)),I.forEach(ke=>{const Pt=R.path().split("?")[0].split("#")[0];if(ke!==d&&ke.url!==Pt){const rn=ke.element;rn.setAttribute("aria-hidden","true"),rn.classList.add("ion-page-hidden"),ke.ref.changeDetectorRef.detach()}})};let cs=(()=>{class d{get(y,R){const Y=ds();return Y?Y.get(y,R):null}getBoolean(y,R){const Y=ds();return!!Y&&Y.getBoolean(y,R)}getNumber(y,R){const Y=ds();return Y?Y.getNumber(y,R):0}}return d.\u0275fac=function(y){return new(y||d)},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const gs=new a.OlP("USERCONFIG"),ds=()=>{if("undefined"!=typeof window){const d=window.Ionic;if(null!=d&&d.config)return d.config}return null};let ro=(()=>{class d{constructor(y,R){this.doc=y,this.backButton=new Ue.xQ,this.keyboardDidShow=new Ue.xQ,this.keyboardDidHide=new Ue.xQ,this.pause=new Ue.xQ,this.resume=new Ue.xQ,this.resize=new Ue.xQ,R.run(()=>{var Y;let ke;this.win=y.defaultView,this.backButton.subscribeWithPriority=function(It,Pt){return this.subscribe(rn=>rn.register(It,Mn=>R.run(()=>Pt(Mn))))},Mi(this.pause,y,"pause"),Mi(this.resume,y,"resume"),Mi(this.backButton,y,"ionBackButton"),Mi(this.resize,this.win,"resize"),Mi(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Mi(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(It=>{ke=It}),null!==(Y=this.win)&&void 0!==Y&&Y.cordova?y.addEventListener("deviceready",()=>{ke("cordova")},{once:!0}):ke("dom")})}is(y){return(0,ht.a)(this.win,y)}platforms(){return(0,ht.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(y){return es(this.win.location.href,y)}isLandscape(){return!this.isPortrait()}isPortrait(){var y,R;return null===(R=(y=this.win).matchMedia)||void 0===R?void 0:R.call(y,"(orientation: portrait)").matches}testUserAgent(y){const R=this.win.navigator;return!!((null==R?void 0:R.userAgent)&&R.userAgent.indexOf(y)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return d.\u0275fac=function(y){return new(y||d)(a.LFG(De.K0),a.LFG(a.R0b))},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const es=(d,I)=>{I=I.replace(/[[\]\\]/g,"\\$&");const R=new RegExp("[\\?&]"+I+"=([^&#]*)").exec(d);return R?decodeURIComponent(R[1].replace(/\+/g," ")):null},Mi=(d,I,y)=>{I&&I.addEventListener(y,R=>{d.next(null!=R?R.detail:void 0)})};let ar=(()=>{class d{constructor(y,R,Y,ke){this.location=R,this.serializer=Y,this.router=ke,this.direction=Ds,this.animated=Rs,this.guessDirection="forward",this.lastNavId=-1,ke&&ke.events.subscribe(It=>{if(It instanceof nt.OD){const Pt=It.restoredState?It.restoredState.navigationId:It.id;this.guessDirection=Pt<this.lastNavId?"back":"forward",this.guessAnimation=It.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?It.id:Pt}}),y.backButton.subscribeWithPriority(0,It=>{this.pop(),It()})}navigateForward(y,R={}){return this.setDirection("forward",R.animated,R.animationDirection,R.animation),this.navigate(y,R)}navigateBack(y,R={}){return this.setDirection("back",R.animated,R.animationDirection,R.animation),this.navigate(y,R)}navigateRoot(y,R={}){return this.setDirection("root",R.animated,R.animationDirection,R.animation),this.navigate(y,R)}back(y={animated:!0,animationDirection:"back"}){return this.setDirection("back",y.animated,y.animationDirection,y.animation),this.location.back()}pop(){return(0,z.mG)(this,void 0,void 0,function*(){let y=this.topOutlet;for(;y&&!(yield y.pop());)y=y.parentOutlet})}setDirection(y,R,Y,ke){this.direction=y,this.animated=Kr(y,R,Y),this.animationBuilder=ke}setTopOutlet(y){this.topOutlet=y}consumeTransition(){let R,y="root";const Y=this.animationBuilder;return"auto"===this.direction?(y=this.guessDirection,R=this.guessAnimation):(R=this.animated,y=this.direction),this.direction=Ds,this.animated=Rs,this.animationBuilder=void 0,{direction:y,animation:R,animationBuilder:Y}}navigate(y,R){if(Array.isArray(y))return this.router.navigate(y,R);{const Y=this.serializer.parse(y.toString());return void 0!==R.queryParams&&(Y.queryParams=Object.assign({},R.queryParams)),void 0!==R.fragment&&(Y.fragment=R.fragment),this.router.navigateByUrl(Y,R)}}}return d.\u0275fac=function(y){return new(y||d)(a.LFG(ro),a.LFG(De.Ye),a.LFG(nt.Hx),a.LFG(nt.F0,8))},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const Kr=(d,I,y)=>{if(!1!==I){if(void 0!==y)return y;if("forward"===d||"back"===d)return d;if("root"===d&&!0===I)return"forward"}},Ds="auto",Rs=void 0;let ci=(()=>{class d{constructor(y,R,Y,ke,It,Pt,rn,Mn,yr,Zn,Mr,ei,lr){this.parentContexts=y,this.location=R,this.config=It,this.navCtrl=Pt,this.componentFactoryResolver=rn,this.parentOutlet=lr,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Qe.X(null),this.stackEvents=new a.vpe,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.nativeEl=yr.nativeElement,this.name=Y||nt.eC,this.tabsPrefix="true"===ke?Bi(Zn,ei):void 0,this.stackCtrl=new Ji(this.tabsPrefix,this.nativeEl,Zn,Pt,Mr,Mn),y.onChildOutletCreated(this.name,this)}set animation(y){this.nativeEl.animation=y}set animated(y){this.nativeEl.animated=y}set swipeGesture(y){this._swipeGesture=y,this.nativeEl.swipeHandler=y?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:R=>this.stackCtrl.endBackTransition(R)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const y=this.getContext();null!=y&&y.route&&this.activateWith(y.route,y.resolver||null)}new Promise(y=>(0,yt.c)(this.nativeEl,y)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(y,R){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const R=this.getContext();this.activatedView.savedData=new Map(R.children.contexts);const Y=this.activatedView.savedData.get("primary");if(Y&&R.route&&(Y.route=Object.assign({},R.route)),this.activatedView.savedExtras={},R.route){const ke=R.route.snapshot;this.activatedView.savedExtras.queryParams=ke.queryParams,this.activatedView.savedExtras.fragment=ke.fragment}}const y=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,R){var Y;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;let ke,It=this.stackCtrl.getExistingView(y);if(It){ke=this.activated=It.ref;const Pt=It.savedData;Pt&&(this.getContext().children.contexts=Pt),this.updateActivatedRouteProxy(ke.instance,y)}else{const Pt=y._futureSnapshot;if(null==Pt.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const rn=this.parentContexts.getOrCreateContext(this.name).children,Mn=new Qe.X(null),yr=this.createActivatedRouteProxy(Mn,y),Zn=new Pi(yr,rn,this.location.injector),Mr=null!==(Y=Pt.routeConfig.component)&&void 0!==Y?Y:Pt.component;if((R=R||this.componentFactoryResolver)&&En(R)){const ei=R.resolveComponentFactory(Mr);ke=this.activated=this.location.createComponent(ei,this.location.length,Zn)}else ke=this.activated=this.location.createComponent(Mr,{index:this.location.length,injector:Zn,environmentInjector:null!=R?R:this.environmentInjector});Mn.next(ke.instance),It=this.stackCtrl.createView(this.activated,y),this.proxyMap.set(ke.instance,yr),this.currentActivatedRoute$.next({component:ke.instance,activatedRoute:y})}this.activatedView=It,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(It).then(Pt=>{this.activateEvents.emit(ke.instance),this.stackEvents.emit(Pt)})}canGoBack(y=1,R){return this.stackCtrl.canGoBack(y,R)}pop(y=1,R){return this.stackCtrl.pop(y,R)}getLastUrl(y){const R=this.stackCtrl.getLastUrl(y);return R?R.url:void 0}getLastRouteView(y){return this.stackCtrl.getLastUrl(y)}getRootView(y){return this.stackCtrl.getRootUrl(y)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(y,R){const Y=new nt.gz;return Y._futureSnapshot=R._futureSnapshot,Y._routerState=R._routerState,Y.snapshot=R.snapshot,Y.outlet=R.outlet,Y.component=R.component,Y._paramMap=this.proxyObservable(y,"paramMap"),Y._queryParamMap=this.proxyObservable(y,"queryParamMap"),Y.url=this.proxyObservable(y,"url"),Y.params=this.proxyObservable(y,"params"),Y.queryParams=this.proxyObservable(y,"queryParams"),Y.fragment=this.proxyObservable(y,"fragment"),Y.data=this.proxyObservable(y,"data"),Y}proxyObservable(y,R){return y.pipe((0,Wt.h)(Y=>!!Y),(0,ze.w)(Y=>this.currentActivatedRoute$.pipe((0,Wt.h)(ke=>null!==ke&&ke.component===Y),(0,ze.w)(ke=>ke&&ke.activatedRoute[R]),(0,ot.x)())))}updateActivatedRouteProxy(y,R){const Y=this.proxyMap.get(y);if(!Y)throw new Error("Could not find activated route proxy for view");Y._futureSnapshot=R._futureSnapshot,Y._routerState=R._routerState,Y.snapshot=R.snapshot,Y.outlet=R.outlet,Y.component=R.component,this.currentActivatedRoute$.next({component:y,activatedRoute:R})}}return d.\u0275fac=function(y){return new(y||d)(a.Y36(nt.y6),a.Y36(a.s_b),a.$8M("name"),a.$8M("tabs"),a.Y36(cs),a.Y36(ar),a.Y36(a._Vd,8),a.Y36(De.Ye),a.Y36(a.SBq),a.Y36(nt.F0),a.Y36(a.R0b),a.Y36(nt.gz),a.Y36(d,12))},d.\u0275dir=a.lG2({type:d,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),d})();class Pi{constructor(I,y,R){this.route=I,this.childContexts=y,this.parent=R}get(I,y){return I===nt.gz?this.route:I===nt.y6?this.childContexts:this.parent.get(I,y)}}let Hn=(()=>{let d=class{constructor(y,R,Y){this.z=Y,this.isCmpOpen=!1,this.el=R.nativeElement,this.el.addEventListener("willPresent",()=>{this.isCmpOpen=!0,y.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,y.detectChanges()}),Tn(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}};return d.\u0275fac=function(y){return new(y||d)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},d.\u0275cmp=a.Xpm({type:d,selectors:[["ion-modal"]],contentQueries:function(y,R,Y){if(1&y&&a.Suo(Y,a.Rgc,5),2&y){let ke;a.iGM(ke=a.CRH())&&(R.template=ke.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",swipeToClose:"swipeToClose",translucent:"translucent",trigger:"trigger"},decls:1,vars:1,consts:[["class","ion-page",4,"ngIf"],[1,"ion-page"],[3,"ngTemplateOutlet"]],template:function(y,R){1&y&&a.YNc(0,un,2,1,"div",0),2&y&&a.Q6J("ngIf",R.isCmpOpen||R.keepContentsMounted)},dependencies:[De.O5,De.tP],encapsulation:2,changeDetection:0}),d=(0,z.gn)([St({inputs:["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","swipeToClose","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"]})],d),d})();class go{constructor(I){this.ctrl=I}create(I){return this.ctrl.create(I||{})}dismiss(I,y,R){return this.ctrl.dismiss(I,y,R)}getTop(){return this.ctrl.getTop()}}let Ao=(()=>{class d extends go{constructor(){super(rt.a)}}return d.\u0275fac=function(y){return new(y||d)},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})(),qo=(()=>{class d extends go{constructor(){super(rt.l)}}return d.\u0275fac=function(y){return new(y||d)},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})(),Jr=(()=>{class d{open(y){return je.m.open(y)}close(y){return je.m.close(y)}toggle(y){return je.m.toggle(y)}enable(y,R){return je.m.enable(y,R)}swipeGesture(y,R){return je.m.swipeGesture(y,R)}isOpen(y){return je.m.isOpen(y)}isEnabled(y){return je.m.isEnabled(y)}get(y){return je.m.get(y)}getOpen(){return je.m.getOpen()}getMenus(){return je.m.getMenus()}}return d.\u0275fac=function(y){return new(y||d)},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();class Ss{}let Zt=(()=>{class d extends go{constructor(y,R,Y,ke){super(rt.m),this.angularDelegate=y,this.resolver=R,this.injector=Y,this.environmentInjector=ke}create(y){var R;return super.create(Object.assign(Object.assign({},y),{delegate:this.angularDelegate.create(null!==(R=this.resolver)&&void 0!==R?R:this.environmentInjector,this.injector)}))}}return d.\u0275fac=function(y){return new(y||d)(a.LFG(Ir),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(Ss,8))},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac}),d})(),Dr=(()=>{class d extends go{constructor(y,R,Y,ke){super(rt.c),this.angularDelegate=y,this.resolver=R,this.injector=Y,this.environmentInjector=ke}create(y){var R;return super.create(Object.assign(Object.assign({},y),{delegate:this.angularDelegate.create(null!==(R=this.resolver)&&void 0!==R?R:this.environmentInjector,this.injector)}))}}return d.\u0275fac=function(y){return new(y||d)(a.LFG(Ir),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(Ss,8))},d.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac}),d})();const eo=(d,I,y)=>()=>{if(I.defaultView&&"undefined"!=typeof window){(d=>{const I=window,y=I.Ionic;y&&y.config&&"Object"!==y.config.constructor.name||(I.Ionic=I.Ionic||{},I.Ionic.config=Object.assign(Object.assign({},I.Ionic.config),d))})(Object.assign(Object.assign({},d),{_zoneGate:ke=>y.run(ke)}));const Y="__zone_symbol__addEventListener"in I.body?"__zone_symbol__addEventListener":"addEventListener";return function $e(){var d=[];if("undefined"!=typeof window){var I=window;(!I.customElements||I.Element&&(!I.Element.prototype.closest||!I.Element.prototype.matches||!I.Element.prototype.remove||!I.Element.prototype.getRootNode))&&d.push(H.e(6748).then(H.t.bind(H,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||I.NodeList&&!I.NodeList.prototype.forEach||!I.fetch||!function(){try{var R=new URL("b","http://a");return R.pathname="c%20d","http://a/c%20d"===R.href&&R.searchParams}catch(Y){return!1}}()||"undefined"==typeof WeakMap)&&d.push(H.e(2214).then(H.t.bind(H,4144,23)))}return Promise.all(d)}().then(()=>((d,I)=>"undefined"==typeof window?Promise.resolve():(0,te.p)().then(()=>(Xe(),(0,te.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",null,[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),I))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:yn,jmp:ke=>y.runOutsideAngular(ke),ael(ke,It,Pt,rn){ke[Y](It,Pt,rn)},rel(ke,It,Pt,rn){ke.removeEventListener(It,Pt,rn)}}))}};let b=(()=>{class d{static forRoot(y){return{ngModule:d,providers:[{provide:gs,useValue:y},{provide:a.ip1,useFactory:eo,multi:!0,deps:[gs,De.K0,a.R0b]}]}}}return d.\u0275fac=function(y){return new(y||d)},d.\u0275mod=a.oAB({type:d}),d.\u0275inj=a.cJS({providers:[Ir,Zt,Dr],imports:[[De.ez]]}),d})()},5942:(on,ut,H)=>{"use strict";H.d(ut,{c:()=>nt});var a=H(5730),se=H(3457);let z;const Ne=Oe=>Oe.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fe=Oe=>{if(void 0===z){const dt=void 0!==Oe.style.webkitAnimationName;z=void 0===Oe.style.animationName&&dt?"-webkit-":""}return z},ve=(Oe,we,dt)=>{const st=we.startsWith("animation")?fe(Oe):"";Oe.style.setProperty(st+we,dt)},ge=(Oe,we)=>{const dt=we.startsWith("animation")?fe(Oe):"";Oe.style.removeProperty(dt+we)},de=[],Qe=(Oe=[],we)=>{if(void 0!==we){const dt=Array.isArray(we)?we:[we];return[...Oe,...dt]}return Oe},nt=Oe=>{let we,dt,st,ht,yt,kt,te,ot,De,$e,Xe,Ut,Nt,je=[],rt=[],Ee=[],Z=!1,he={},Ie=[],Te=[],Je={},Ot=0,Wt=!1,ze=!1,at=!0,gt=!1,ft=!0,cn=!1;const un=Oe,Jn=[],yn=[],En=[],vr=[],Tr=[],Wr=[],er=[],qt=[],Yn=[],Qr=[],Un="function"==typeof AnimationEffect||void 0!==se.w&&"function"==typeof se.w.AnimationEffect,nr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Un,an=()=>Qr,gr=(ye,qe)=>((null!=qe&&qe.oneTimeCallback?yn:Jn).push({c:ye,o:qe}),Nt),wr=()=>{if(nr)Qr.forEach(ye=>{ye.cancel()}),Qr.length=0;else{const ye=En.slice();(0,a.r)(()=>{ye.forEach(qe=>{ge(qe,"animation-name"),ge(qe,"animation-duration"),ge(qe,"animation-timing-function"),ge(qe,"animation-iteration-count"),ge(qe,"animation-delay"),ge(qe,"animation-play-state"),ge(qe,"animation-fill-mode"),ge(qe,"animation-direction")})})}},Lr=()=>{Tr.forEach(ye=>{null!=ye&&ye.parentNode&&ye.parentNode.removeChild(ye)}),Tr.length=0},jn=()=>void 0!==yt?yt:te?te.getFill():"both",Ve=()=>void 0!==De?De:void 0!==kt?kt:te?te.getDirection():"normal",Pe=()=>Wt?"linear":void 0!==st?st:te?te.getEasing():"linear",He=()=>ze?0:void 0!==$e?$e:void 0!==dt?dt:te?te.getDuration():0,pt=()=>void 0!==ht?ht:te?te.getIterations():1,et=()=>void 0!==Xe?Xe:void 0!==we?we:te?te.getDelay():0,Kn=()=>{0!==Ot&&(Ot--,0===Ot&&((()=>{_i(),qt.forEach(zt=>zt()),Yn.forEach(zt=>zt());const ye=at?1:0,qe=Ie,_t=Te,Rt=Je;En.forEach(zt=>{const pn=zt.classList;qe.forEach(vn=>pn.add(vn)),_t.forEach(vn=>pn.remove(vn));for(const vn in Rt)Rt.hasOwnProperty(vn)&&ve(zt,vn,Rt[vn])}),Jn.forEach(zt=>zt.c(ye,Nt)),yn.forEach(zt=>zt.c(ye,Nt)),yn.length=0,ft=!0,at&&(gt=!0),at=!0})(),te&&te.animationFinish()))},kr=(ye=!0)=>{Lr();const qe=(Oe=>(Oe.forEach(we=>{for(const dt in we)if(we.hasOwnProperty(dt)){const st=we[dt];if("easing"===dt)we["animation-timing-function"]=st,delete we[dt];else{const ht=Ne(dt);ht!==dt&&(we[ht]=st,delete we[dt])}}}),Oe))(je);En.forEach(_t=>{if(qe.length>0){const Rt=((Oe=[])=>Oe.map(we=>{const dt=we.offset,st=[];for(const ht in we)we.hasOwnProperty(ht)&&"offset"!==ht&&st.push(`${ht}: ${we[ht]};`);return`${100*dt}% { ${st.join(" ")} }`}).join(" "))(qe);Ut=void 0!==Oe?Oe:(Oe=>{let we=de.indexOf(Oe);return we<0&&(we=de.push(Oe)-1),`ion-animation-${we}`})(Rt);const zt=((Oe,we,dt)=>{var st;const ht=(Oe=>{const we=void 0!==Oe.getRootNode?Oe.getRootNode():Oe;return we.head||we})(dt),yt=fe(dt),kt=ht.querySelector("#"+Oe);if(kt)return kt;const je=(null!==(st=dt.ownerDocument)&&void 0!==st?st:document).createElement("style");return je.id=Oe,je.textContent=`@${yt}keyframes ${Oe} { ${we} } @${yt}keyframes ${Oe}-alt { ${we} }`,ht.appendChild(je),je})(Ut,Rt,_t);Tr.push(zt),ve(_t,"animation-duration",`${He()}ms`),ve(_t,"animation-timing-function",Pe()),ve(_t,"animation-delay",`${et()}ms`),ve(_t,"animation-fill-mode",jn()),ve(_t,"animation-direction",Ve());const pn=pt()===1/0?"infinite":pt().toString();ve(_t,"animation-iteration-count",pn),ve(_t,"animation-play-state","paused"),ye&&ve(_t,"animation-name",`${zt.id}-alt`),(0,a.r)(()=>{ve(_t,"animation-name",zt.id||null)})}})},si=(ye=!0)=>{(()=>{Wr.forEach(Rt=>Rt()),er.forEach(Rt=>Rt());const ye=rt,qe=Ee,_t=he;En.forEach(Rt=>{const zt=Rt.classList;ye.forEach(pn=>zt.add(pn)),qe.forEach(pn=>zt.remove(pn));for(const pn in _t)_t.hasOwnProperty(pn)&&ve(Rt,pn,_t[pn])})})(),je.length>0&&(nr?(En.forEach(ye=>{const qe=ye.animate(je,{id:un,delay:et(),duration:He(),easing:Pe(),iterations:pt(),fill:jn(),direction:Ve()});qe.pause(),Qr.push(qe)}),Qr.length>0&&(Qr[0].onfinish=()=>{Kn()})):kr(ye)),Z=!0},mi=ye=>{if(ye=Math.min(Math.max(ye,0),.9999),nr)Qr.forEach(qe=>{qe.currentTime=qe.effect.getComputedTiming().delay+He()*ye,qe.pause()});else{const qe=`-${He()*ye}ms`;En.forEach(_t=>{je.length>0&&(ve(_t,"animation-delay",qe),ve(_t,"animation-play-state","paused"))})}},Fn=ye=>{Qr.forEach(qe=>{qe.effect.updateTiming({delay:et(),duration:He(),easing:Pe(),iterations:pt(),fill:jn(),direction:Ve()})}),void 0!==ye&&mi(ye)},Vr=(ye=!0,qe)=>{(0,a.r)(()=>{En.forEach(_t=>{ve(_t,"animation-name",Ut||null),ve(_t,"animation-duration",`${He()}ms`),ve(_t,"animation-timing-function",Pe()),ve(_t,"animation-delay",void 0!==qe?`-${qe*He()}ms`:`${et()}ms`),ve(_t,"animation-fill-mode",jn()||null),ve(_t,"animation-direction",Ve()||null);const Rt=pt()===1/0?"infinite":pt().toString();ve(_t,"animation-iteration-count",Rt),ye&&ve(_t,"animation-name",`${Ut}-alt`),(0,a.r)(()=>{ve(_t,"animation-name",Ut||null)})})})},li=(ye=!1,qe=!0,_t)=>(ye&&vr.forEach(Rt=>{Rt.update(ye,qe,_t)}),nr?Fn(_t):Vr(qe,_t),Nt),ui=()=>{Z&&(nr?Qr.forEach(ye=>{ye.pause()}):En.forEach(ye=>{ve(ye,"animation-play-state","paused")}),cn=!0)},Xr=()=>{ot=void 0,Kn()},_i=()=>{ot&&clearTimeout(ot)},ne=ye=>new Promise(qe=>{null!=ye&&ye.sync&&(ze=!0,gr(()=>ze=!1,{oneTimeCallback:!0})),Z||si(),gt&&(nr?(mi(0),Fn()):Vr(),gt=!1),ft&&(Ot=vr.length+1,ft=!1),gr(()=>qe(),{oneTimeCallback:!0}),vr.forEach(_t=>{_t.play()}),nr?(Qr.forEach(ye=>{ye.play()}),(0===je.length||0===En.length)&&Kn()):(()=>{if(_i(),(0,a.r)(()=>{En.forEach(ye=>{je.length>0&&ve(ye,"animation-play-state","running")})}),0===je.length||0===En.length)Kn();else{const ye=et()||0,qe=He()||0,_t=pt()||1;isFinite(_t)&&(ot=setTimeout(Xr,ye+qe*_t+100)),((Oe,we)=>{let dt;const st={passive:!0},yt=kt=>{Oe===kt.target&&(dt&&dt(),_i(),(0,a.r)(()=>{En.forEach(ye=>{ge(ye,"animation-duration"),ge(ye,"animation-delay"),ge(ye,"animation-play-state")}),(0,a.r)(Kn)}))};Oe&&(Oe.addEventListener("webkitAnimationEnd",yt,st),Oe.addEventListener("animationend",yt,st),dt=()=>{Oe.removeEventListener("webkitAnimationEnd",yt,st),Oe.removeEventListener("animationend",yt,st)})})(En[0])}})(),cn=!1}),Ze=(ye,qe)=>{const _t=je[0];return void 0===_t||void 0!==_t.offset&&0!==_t.offset?je=[{offset:0,[ye]:qe},...je]:_t[ye]=qe,Nt};return Nt={parentAnimation:te,elements:En,childAnimations:vr,id:un,animationFinish:Kn,from:Ze,to:(ye,qe)=>{const _t=je[je.length-1];return void 0===_t||void 0!==_t.offset&&1!==_t.offset?je=[...je,{offset:1,[ye]:qe}]:_t[ye]=qe,Nt},fromTo:(ye,qe,_t)=>Ze(ye,qe).to(ye,_t),parent:ye=>(te=ye,Nt),play:ne,pause:()=>(vr.forEach(ye=>{ye.pause()}),ui(),Nt),stop:()=>{vr.forEach(ye=>{ye.stop()}),Z&&(wr(),Z=!1),Wt=!1,ze=!1,ft=!0,De=void 0,$e=void 0,Xe=void 0,Ot=0,gt=!1,at=!0,cn=!1},destroy:ye=>(vr.forEach(qe=>{qe.destroy(ye)}),(ye=>{wr(),ye&&Lr()})(ye),En.length=0,vr.length=0,je.length=0,Jn.length=0,yn.length=0,Z=!1,ft=!0,Nt),keyframes:ye=>{const qe=je!==ye;return je=ye,qe&&(ye=>{nr?an().forEach(qe=>{if(qe.effect.setKeyframes)qe.effect.setKeyframes(ye);else{const _t=new KeyframeEffect(qe.effect.target,ye,qe.effect.getTiming());qe.effect=_t}}):kr()})(je),Nt},addAnimation:ye=>{if(null!=ye)if(Array.isArray(ye))for(const qe of ye)qe.parent(Nt),vr.push(qe);else ye.parent(Nt),vr.push(ye);return Nt},addElement:ye=>{if(null!=ye)if(1===ye.nodeType)En.push(ye);else if(ye.length>=0)for(let qe=0;qe<ye.length;qe++)En.push(ye[qe]);else console.error("Invalid addElement value");return Nt},update:li,fill:ye=>(yt=ye,li(!0),Nt),direction:ye=>(kt=ye,li(!0),Nt),iterations:ye=>(ht=ye,li(!0),Nt),duration:ye=>(!nr&&0===ye&&(ye=1),dt=ye,li(!0),Nt),easing:ye=>(st=ye,li(!0),Nt),delay:ye=>(we=ye,li(!0),Nt),getWebAnimations:an,getKeyframes:()=>je,getFill:jn,getDirection:Ve,getDelay:et,getIterations:pt,getEasing:Pe,getDuration:He,afterAddRead:ye=>(qt.push(ye),Nt),afterAddWrite:ye=>(Yn.push(ye),Nt),afterClearStyles:(ye=[])=>{for(const qe of ye)Je[qe]="";return Nt},afterStyles:(ye={})=>(Je=ye,Nt),afterRemoveClass:ye=>(Te=Qe(Te,ye),Nt),afterAddClass:ye=>(Ie=Qe(Ie,ye),Nt),beforeAddRead:ye=>(Wr.push(ye),Nt),beforeAddWrite:ye=>(er.push(ye),Nt),beforeClearStyles:(ye=[])=>{for(const qe of ye)he[qe]="";return Nt},beforeStyles:(ye={})=>(he=ye,Nt),beforeRemoveClass:ye=>(Ee=Qe(Ee,ye),Nt),beforeAddClass:ye=>(rt=Qe(rt,ye),Nt),onFinish:gr,isRunning:()=>0!==Ot&&!cn,progressStart:(ye=!1,qe)=>(vr.forEach(_t=>{_t.progressStart(ye,qe)}),ui(),Wt=ye,Z||si(),li(!1,!0,qe),Nt),progressStep:ye=>(vr.forEach(qe=>{qe.progressStep(ye)}),mi(ye),Nt),progressEnd:(ye,qe,_t)=>(Wt=!1,vr.forEach(Rt=>{Rt.progressEnd(ye,qe,_t)}),void 0!==_t&&($e=_t),gt=!1,at=!0,0===ye?(De="reverse"===Ve()?"normal":"reverse","reverse"===De&&(at=!1),nr?(li(),mi(1-qe)):(Xe=(1-qe)*He()*-1,li(!1,!1))):1===ye&&(nr?(li(),mi(qe)):(Xe=qe*He()*-1,li(!1,!1))),void 0!==ye&&(gr(()=>{$e=void 0,De=void 0,Xe=void 0},{oneTimeCallback:!0}),te||ne()),Nt)}}},4349:(on,ut,H)=>{"use strict";H.d(ut,{G:()=>Ne});class se{constructor(ve,ge,be,ue,de){this.id=ge,this.name=be,this.disableScroll=de,this.priority=1e6*ue+ge,this.ctrl=ve}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ve=this.ctrl.capture(this.name,this.id,this.priority);return ve&&this.disableScroll&&this.ctrl.disableScroll(this.id),ve}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class z{constructor(ve,ge,be,ue){this.id=ge,this.disable=be,this.disableScroll=ue,this.ctrl=ve}block(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.disableGesture(ve,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.enableGesture(ve,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Le="backdrop-no-scroll",Ne=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ve){var ge;return new se(this,this.newID(),ve.name,null!==(ge=ve.priority)&&void 0!==ge?ge:0,!!ve.disableScroll)}createBlocker(ve={}){return new z(this,this.newID(),ve.disable,!!ve.disableScroll)}start(ve,ge,be){return this.canStart(ve)?(this.requestedStart.set(ge,be),!0):(this.requestedStart.delete(ge),!1)}capture(ve,ge,be){if(!this.start(ve,ge,be))return!1;const ue=this.requestedStart;let de=-1e4;if(ue.forEach(oe=>{de=Math.max(de,oe)}),de===be){this.capturedId=ge,ue.clear();const oe=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ve}});return document.dispatchEvent(oe),!0}return ue.delete(ge),!1}release(ve){this.requestedStart.delete(ve),this.capturedId===ve&&(this.capturedId=void 0)}disableGesture(ve,ge){let be=this.disabledGestures.get(ve);void 0===be&&(be=new Set,this.disabledGestures.set(ve,be)),be.add(ge)}enableGesture(ve,ge){const be=this.disabledGestures.get(ve);void 0!==be&&be.delete(ge)}disableScroll(ve){this.disabledScroll.add(ve),1===this.disabledScroll.size&&document.body.classList.add(Le)}enableScroll(ve){this.disabledScroll.delete(ve),0===this.disabledScroll.size&&document.body.classList.remove(Le)}canStart(ve){return!(void 0!==this.capturedId||this.isDisabled(ve))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ve){const ge=this.disabledGestures.get(ve);return!!(ge&&ge.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(on,ut,H)=>{"use strict";H.r(ut),H.d(ut,{MENU_BACK_BUTTON_PRIORITY:()=>Ne,OVERLAY_BACK_BUTTON_PRIORITY:()=>Le,blockHardwareBackButton:()=>se,startHardwareBackButton:()=>z});var a=H(5861);const se=()=>{document.addEventListener("backbutton",()=>{})},z=()=>{const fe=document;let ve=!1;fe.addEventListener("backbutton",()=>{if(ve)return;let ge=0,be=[];const ue=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(pe,Ue){be.push({priority:pe,handler:Ue,id:ge++})}}});fe.dispatchEvent(ue);const de=function(){var pe=(0,a.Z)(function*(Ue){try{if(null!=Ue&&Ue.handler){const Qe=Ue.handler(oe);null!=Qe&&(yield Qe)}}catch(Qe){console.error(Qe)}});return function(Qe){return pe.apply(this,arguments)}}(),oe=()=>{if(be.length>0){let pe={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};be.forEach(Ue=>{Ue.priority>=pe.priority&&(pe=Ue)}),ve=!0,be=be.filter(Ue=>Ue.id!==pe.id),de(pe).then(()=>ve=!1)}};oe()})},Le=100,Ne=99},5730:(on,ut,H)=>{"use strict";H.d(ut,{a:()=>ve,b:()=>ge,c:()=>z,d:()=>Ue,e:()=>Qe,f:()=>pe,g:()=>be,h:()=>ht,i:()=>fe,j:()=>Le,k:()=>oe,l:()=>nt,m:()=>de,n:()=>Oe,o:()=>st,p:()=>dt,q:()=>yt,r:()=>ue,s:()=>kt,t:()=>a,u:()=>we});const a=(je,rt=0)=>new Promise(Ee=>{se(je,rt,Ee)}),se=(je,rt=0,Ee)=>{let Z,te;const he={passive:!0},Te=()=>{Z&&Z()},Je=Ot=>{(void 0===Ot||je===Ot.target)&&(Te(),Ee(Ot))};return je&&(je.addEventListener("webkitTransitionEnd",Je,he),je.addEventListener("transitionend",Je,he),te=setTimeout(Je,rt+500),Z=()=>{te&&(clearTimeout(te),te=void 0),je.removeEventListener("webkitTransitionEnd",Je,he),je.removeEventListener("transitionend",Je,he)}),Te},z=(je,rt)=>{je.componentOnReady?je.componentOnReady().then(Ee=>rt(Ee)):ue(()=>rt(je))},Le=(je,rt=[])=>{const Ee={};return rt.forEach(Z=>{je.hasAttribute(Z)&&(null!==je.getAttribute(Z)&&(Ee[Z]=je.getAttribute(Z)),je.removeAttribute(Z))}),Ee},Ne=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],fe=(je,rt)=>{let Ee=Ne;return rt&&rt.length>0&&(Ee=Ee.filter(Z=>!rt.includes(Z))),Le(je,Ee)},ve=(je,rt,Ee,Z)=>{var te;if("undefined"!=typeof window){const he=window,Ie=null===(te=null==he?void 0:he.Ionic)||void 0===te?void 0:te.config;if(Ie){const Te=Ie.get("_ael");if(Te)return Te(je,rt,Ee,Z);if(Ie._ael)return Ie._ael(je,rt,Ee,Z)}}return je.addEventListener(rt,Ee,Z)},ge=(je,rt,Ee,Z)=>{var te;if("undefined"!=typeof window){const he=window,Ie=null===(te=null==he?void 0:he.Ionic)||void 0===te?void 0:te.config;if(Ie){const Te=Ie.get("_rel");if(Te)return Te(je,rt,Ee,Z);if(Ie._rel)return Ie._rel(je,rt,Ee,Z)}}return je.removeEventListener(rt,Ee,Z)},be=(je,rt=je)=>je.shadowRoot||rt,ue=je=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(je):"function"==typeof requestAnimationFrame?requestAnimationFrame(je):setTimeout(je),de=je=>!!je.shadowRoot&&!!je.attachShadow,oe=je=>{const rt=je.closest("ion-item");return rt?rt.querySelector("ion-label"):null},pe=je=>{if(je.focus(),je.classList.contains("ion-focusable")){const rt=je.closest("ion-app");rt&&rt.setFocus([je])}},Ue=(je,rt)=>{let Ee;const Z=je.getAttribute("aria-labelledby"),te=je.id;let he=null!==Z&&""!==Z.trim()?Z:rt+"-lbl",Ie=null!==Z&&""!==Z.trim()?document.getElementById(Z):oe(je);return Ie?(null===Z&&(Ie.id=he),Ee=Ie.textContent,Ie.setAttribute("aria-hidden","true")):""!==te.trim()&&(Ie=document.querySelector(`label[for="${te}"]`),Ie&&(""!==Ie.id?he=Ie.id:Ie.id=he=`${te}-lbl`,Ee=Ie.textContent)),{label:Ie,labelId:he,labelText:Ee}},Qe=(je,rt,Ee,Z,te)=>{if(je||de(rt)){let he=rt.querySelector("input.aux-input");he||(he=rt.ownerDocument.createElement("input"),he.type="hidden",he.classList.add("aux-input"),rt.appendChild(he)),he.disabled=te,he.name=Ee,he.value=Z||""}},nt=(je,rt,Ee)=>Math.max(je,Math.min(rt,Ee)),Oe=(je,rt)=>{if(!je){const Ee="ASSERT: "+rt;throw console.error(Ee),new Error(Ee)}},we=je=>je.timeStamp||Date.now(),dt=je=>{if(je){const rt=je.changedTouches;if(rt&&rt.length>0){const Ee=rt[0];return{x:Ee.clientX,y:Ee.clientY}}if(void 0!==je.pageX)return{x:je.pageX,y:je.pageY}}return{x:0,y:0}},st=je=>{const rt="rtl"===document.dir;switch(je){case"start":return rt;case"end":return!rt;default:throw new Error(`"${je}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ht=(je,rt)=>{const Ee=je._original||je;return{_original:je,emit:yt(Ee.emit.bind(Ee),rt)}},yt=(je,rt=0)=>{let Ee;return(...Z)=>{clearTimeout(Ee),Ee=setTimeout(je,rt,...Z)}},kt=(je,rt)=>{if(null!=je||(je={}),null!=rt||(rt={}),je===rt)return!0;const Ee=Object.keys(je);if(Ee.length!==Object.keys(rt).length)return!1;for(const Z of Ee)if(!(Z in rt)||je[Z]!==rt[Z])return!1;return!0}},3457:(on,ut,H)=>{"use strict";H.d(ut,{w:()=>a});const a="undefined"!=typeof window?window:void 0},385:(on,ut,H)=>{"use strict";H.d(ut,{m:()=>de});var a=H(5861),se=H(7593),z=H(5730),Le=H(9658),Ne=H(5942);const fe=oe=>(0,Ne.c)().duration(oe?400:300),ve=oe=>{let pe,Ue;const Qe=oe.width+8,nt=(0,Ne.c)(),Oe=(0,Ne.c)();oe.isEndSide?(pe=Qe+"px",Ue="0px"):(pe=-Qe+"px",Ue="0px"),nt.addElement(oe.menuInnerEl).fromTo("transform",`translateX(${pe})`,`translateX(${Ue})`);const dt="ios"===(0,Le.b)(oe),st=dt?.2:.25;return Oe.addElement(oe.backdropEl).fromTo("opacity",.01,st),fe(dt).addAnimation([nt,Oe])},ge=oe=>{let pe,Ue;const Qe=(0,Le.b)(oe),nt=oe.width;oe.isEndSide?(pe=-nt+"px",Ue=nt+"px"):(pe=nt+"px",Ue=-nt+"px");const Oe=(0,Ne.c)().addElement(oe.menuInnerEl).fromTo("transform",`translateX(${Ue})`,"translateX(0px)"),we=(0,Ne.c)().addElement(oe.contentEl).fromTo("transform","translateX(0px)",`translateX(${pe})`),dt=(0,Ne.c)().addElement(oe.backdropEl).fromTo("opacity",.01,.32);return fe("ios"===Qe).addAnimation([Oe,we,dt])},be=oe=>{const pe=(0,Le.b)(oe),Ue=oe.width*(oe.isEndSide?-1:1)+"px",Qe=(0,Ne.c)().addElement(oe.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ue})`);return fe("ios"===pe).addAnimation(Qe)},de=(()=>{const oe=new Map,pe=[],Ue=function(){var ot=(0,a.Z)(function*(De){const $e=yield ht(De);return!!$e&&$e.open()});return function($e){return ot.apply(this,arguments)}}(),Qe=function(){var ot=(0,a.Z)(function*(De){const $e=yield void 0!==De?ht(De):yt();return void 0!==$e&&$e.close()});return function($e){return ot.apply(this,arguments)}}(),nt=function(){var ot=(0,a.Z)(function*(De){const $e=yield ht(De);return!!$e&&$e.toggle()});return function($e){return ot.apply(this,arguments)}}(),Oe=function(){var ot=(0,a.Z)(function*(De,$e){const Xe=yield ht($e);return Xe&&(Xe.disabled=!De),Xe});return function($e,Xe){return ot.apply(this,arguments)}}(),we=function(){var ot=(0,a.Z)(function*(De,$e){const Xe=yield ht($e);return Xe&&(Xe.swipeGesture=De),Xe});return function($e,Xe){return ot.apply(this,arguments)}}(),dt=function(){var ot=(0,a.Z)(function*(De){if(null!=De){const $e=yield ht(De);return void 0!==$e&&$e.isOpen()}return void 0!==(yield yt())});return function($e){return ot.apply(this,arguments)}}(),st=function(){var ot=(0,a.Z)(function*(De){const $e=yield ht(De);return!!$e&&!$e.disabled});return function($e){return ot.apply(this,arguments)}}(),ht=function(){var ot=(0,a.Z)(function*(De){return yield ze(),"start"===De||"end"===De?Wt(at=>at.side===De&&!at.disabled)||Wt(at=>at.side===De):null!=De?Wt(Xe=>Xe.menuId===De):Wt(Xe=>!Xe.disabled)||(pe.length>0?pe[0].el:void 0)});return function($e){return ot.apply(this,arguments)}}(),yt=function(){var ot=(0,a.Z)(function*(){return yield ze(),Te()});return function(){return ot.apply(this,arguments)}}(),kt=function(){var ot=(0,a.Z)(function*(){return yield ze(),Je()});return function(){return ot.apply(this,arguments)}}(),je=function(){var ot=(0,a.Z)(function*(){return yield ze(),Ot()});return function(){return ot.apply(this,arguments)}}(),rt=(ot,De)=>{oe.set(ot,De)},te=ot=>{const De=ot.side;pe.filter($e=>$e.side===De&&$e!==ot).forEach($e=>$e.disabled=!0)},he=function(){var ot=(0,a.Z)(function*(De,$e,Xe){if(Ot())return!1;if($e){const at=yield yt();at&&De.el!==at&&(yield at.setOpen(!1,!1))}return De._setOpen($e,Xe)});return function($e,Xe,at){return ot.apply(this,arguments)}}(),Te=()=>Wt(ot=>ot._isOpen),Je=()=>pe.map(ot=>ot.el),Ot=()=>pe.some(ot=>ot.isAnimating),Wt=ot=>{const De=pe.find(ot);if(void 0!==De)return De.el},ze=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(ot=>new Promise(De=>(0,z.c)(ot,De))));return rt("reveal",be),rt("push",ge),rt("overlay",ve),"undefined"!=typeof document&&document.addEventListener("ionBackButton",ot=>{const De=Te();De&&ot.detail.register(se.MENU_BACK_BUTTON_PRIORITY,()=>De.close())}),{registerAnimation:rt,get:ht,getMenus:kt,getOpen:yt,isEnabled:st,swipeGesture:we,isAnimating:je,isOpen:dt,enable:Oe,toggle:nt,close:Qe,open:Ue,_getOpenSync:Te,_createAnimation:(ot,De)=>{const $e=oe.get(ot);if(!$e)throw new Error("animation not registered");return $e(De)},_register:ot=>{pe.indexOf(ot)<0&&(ot.disabled||te(ot),pe.push(ot))},_unregister:ot=>{const De=pe.indexOf(ot);De>-1&&pe.splice(De,1)},_setOpen:he,_setActiveMenu:te}})()},1308:(on,ut,H)=>{"use strict";H.d(ut,{B:()=>Li,H:()=>En,a:()=>at,b:()=>tn,c:()=>Ti,e:()=>jr,f:()=>fi,g:()=>gt,h:()=>Jn,i:()=>cr,j:()=>Ve,k:()=>Sn,p:()=>nt,r:()=>Br,s:()=>Ue});var a=H(5861);let z,Le,Ne,fe=!1,ve=!1,ge=!1,be=!1,ue=!1;const de="undefined"!=typeof window?window:{},oe=de.document||{head:{}},pe={$flags$:0,$resourcesUrl$:"",jmp:ne=>ne(),raf:ne=>requestAnimationFrame(ne),ael:(ne,Ce,Ze,it)=>ne.addEventListener(Ce,Ze,it),rel:(ne,Ce,Ze,it)=>ne.removeEventListener(Ce,Ze,it),ce:(ne,Ce)=>new CustomEvent(ne,Ce)},Ue=ne=>{Object.assign(pe,ne)},nt=ne=>Promise.resolve(ne),Oe=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(ne){}return!1})(),we=(ne,Ce,Ze,it)=>{Ze&&Ze.map(([bt,ye,qe])=>{const _t=st(ne,bt),Rt=dt(Ce,qe),zt=ht(bt);pe.ael(_t,ye,Rt,zt),(Ce.$rmListeners$=Ce.$rmListeners$||[]).push(()=>pe.rel(_t,ye,Rt,zt))})},dt=(ne,Ce)=>Ze=>{try{256&ne.$flags$?ne.$lazyInstance$[Ce](Ze):(ne.$queuedListeners$=ne.$queuedListeners$||[]).push([Ce,Ze])}catch(it){Fn(it)}},st=(ne,Ce)=>4&Ce?oe:8&Ce?de:16&Ce?oe.body:ne,ht=ne=>0!=(2&ne),Ee="s-id",Z="sty-id",Ie="http://www.w3.org/1999/xlink",Ot=new WeakMap,Wt=(ne,Ce,Ze)=>{let it=Xn.get(ne);Oe&&Ze?(it=it||new CSSStyleSheet,"string"==typeof it?it=Ce:it.replaceSync(Ce)):it=Ce,Xn.set(ne,it)},ze=(ne,Ce,Ze,it)=>{let bt=De(Ce,Ze);const ye=Xn.get(bt);if(ne=11===ne.nodeType?ne:oe,ye)if("string"==typeof ye){let _t,qe=Ot.get(ne=ne.head||ne);qe||Ot.set(ne,qe=new Set),qe.has(bt)||(ne.host&&(_t=ne.querySelector(`[${Z}="${bt}"]`))?_t.innerHTML=ye:(_t=oe.createElement("style"),_t.innerHTML=ye,ne.insertBefore(_t,ne.querySelector("link"))),qe&&qe.add(bt))}else ne.adoptedStyleSheets.includes(ye)||(ne.adoptedStyleSheets=[...ne.adoptedStyleSheets,ye]);return bt},De=(ne,Ce)=>"sc-"+(Ce&&32&ne.$flags$?ne.$tagName$+"-"+Ce:ne.$tagName$),$e=ne=>ne.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),at=ne=>Hi.push(ne),gt=ne=>kr(ne).$modeName$,ft={},un=ne=>"object"==(ne=typeof ne)||"function"===ne,Jn=(ne,Ce,...Ze)=>{let it=null,bt=null,ye=null,qe=!1,_t=!1;const Rt=[],zt=vn=>{for(let rr=0;rr<vn.length;rr++)it=vn[rr],Array.isArray(it)?zt(it):null!=it&&"boolean"!=typeof it&&((qe="function"!=typeof ne&&!un(it))&&(it=String(it)),qe&&_t?Rt[Rt.length-1].$text$+=it:Rt.push(qe?yn(null,it):it),_t=qe)};if(zt(Ze),Ce){Ce.key&&(bt=Ce.key),Ce.name&&(ye=Ce.name);{const vn=Ce.className||Ce.class;vn&&(Ce.class="object"!=typeof vn?vn:Object.keys(vn).filter(rr=>vn[rr]).join(" "))}}if("function"==typeof ne)return ne(null===Ce?{}:Ce,Rt,Tr);const pn=yn(ne,null);return pn.$attrs$=Ce,Rt.length>0&&(pn.$children$=Rt),pn.$key$=bt,pn.$name$=ye,pn},yn=(ne,Ce)=>({$flags$:0,$tag$:ne,$text$:Ce,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),En={},Tr={forEach:(ne,Ce)=>ne.map(Wr).forEach(Ce),map:(ne,Ce)=>ne.map(Wr).map(Ce).map(er)},Wr=ne=>({vattrs:ne.$attrs$,vchildren:ne.$children$,vkey:ne.$key$,vname:ne.$name$,vtag:ne.$tag$,vtext:ne.$text$}),er=ne=>{if("function"==typeof ne.vtag){const Ze=Object.assign({},ne.vattrs);return ne.vkey&&(Ze.key=ne.vkey),ne.vname&&(Ze.name=ne.vname),Jn(ne.vtag,Ze,...ne.vchildren||[])}const Ce=yn(ne.vtag,ne.vtext);return Ce.$attrs$=ne.vattrs,Ce.$children$=ne.vchildren,Ce.$key$=ne.vkey,Ce.$name$=ne.vname,Ce},qt=(ne,Ce,Ze,it,bt,ye)=>{if(Ze!==it){let qe=mi(ne,Ce),_t=Ce.toLowerCase();if("class"===Ce){const Rt=ne.classList,zt=Qr(Ze),pn=Qr(it);Rt.remove(...zt.filter(vn=>vn&&!pn.includes(vn))),Rt.add(...pn.filter(vn=>vn&&!zt.includes(vn)))}else if("style"===Ce){for(const Rt in Ze)(!it||null==it[Rt])&&(Rt.includes("-")?ne.style.removeProperty(Rt):ne.style[Rt]="");for(const Rt in it)(!Ze||it[Rt]!==Ze[Rt])&&(Rt.includes("-")?ne.style.setProperty(Rt,it[Rt]):ne.style[Rt]=it[Rt])}else if("key"!==Ce)if("ref"===Ce)it&&it(ne);else if(qe||"o"!==Ce[0]||"n"!==Ce[1]){const Rt=un(it);if((qe||Rt&&null!==it)&&!bt)try{if(ne.tagName.includes("-"))ne[Ce]=it;else{const pn=null==it?"":it;"list"===Ce?qe=!1:(null==Ze||ne[Ce]!=pn)&&(ne[Ce]=pn)}}catch(pn){}let zt=!1;_t!==(_t=_t.replace(/^xlink\:?/,""))&&(Ce=_t,zt=!0),null==it||!1===it?(!1!==it||""===ne.getAttribute(Ce))&&(zt?ne.removeAttributeNS(Ie,Ce):ne.removeAttribute(Ce)):(!qe||4&ye||bt)&&!Rt&&(it=!0===it?"":it,zt?ne.setAttributeNS(Ie,Ce,it):ne.setAttribute(Ce,it))}else Ce="-"===Ce[2]?Ce.slice(3):mi(de,_t)?_t.slice(2):_t[2]+Ce.slice(3),Ze&&pe.rel(ne,Ce,Ze,!1),it&&pe.ael(ne,Ce,it,!1)}},Yn=/\s/,Qr=ne=>ne?ne.split(Yn):[],Un=(ne,Ce,Ze,it)=>{const bt=11===Ce.$elm$.nodeType&&Ce.$elm$.host?Ce.$elm$.host:Ce.$elm$,ye=ne&&ne.$attrs$||ft,qe=Ce.$attrs$||ft;for(it in ye)it in qe||qt(bt,it,ye[it],void 0,Ze,Ce.$flags$);for(it in qe)qt(bt,it,ye[it],qe[it],Ze,Ce.$flags$)},nr=(ne,Ce,Ze,it)=>{const bt=Ce.$children$[Ze];let qe,_t,Rt,ye=0;if(fe||(ge=!0,"slot"===bt.$tag$&&(z&&it.classList.add(z+"-s"),bt.$flags$|=bt.$children$?2:1)),null!==bt.$text$)qe=bt.$elm$=oe.createTextNode(bt.$text$);else if(1&bt.$flags$)qe=bt.$elm$=oe.createTextNode("");else{if(be||(be="svg"===bt.$tag$),qe=bt.$elm$=oe.createElementNS(be?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&bt.$flags$?"slot-fb":bt.$tag$),be&&"foreignObject"===bt.$tag$&&(be=!1),Un(null,bt,be),(ne=>null!=ne)(z)&&qe["s-si"]!==z&&qe.classList.add(qe["s-si"]=z),bt.$children$)for(ye=0;ye<bt.$children$.length;++ye)_t=nr(ne,bt,ye,qe),_t&&qe.appendChild(_t);"svg"===bt.$tag$?be=!1:"foreignObject"===qe.tagName&&(be=!0)}return qe["s-hn"]=Ne,3&bt.$flags$&&(qe["s-sr"]=!0,qe["s-cr"]=Le,qe["s-sn"]=bt.$name$||"",Rt=ne&&ne.$children$&&ne.$children$[Ze],Rt&&Rt.$tag$===bt.$tag$&&ne.$elm$&&Nr(ne.$elm$,!1)),qe},Nr=(ne,Ce)=>{pe.$flags$|=1;const Ze=ne.childNodes;for(let it=Ze.length-1;it>=0;it--){const bt=Ze[it];bt["s-hn"]!==Ne&&bt["s-ol"]&&(gr(bt).insertBefore(bt,St(bt)),bt["s-ol"].remove(),bt["s-ol"]=void 0,ge=!0),Ce&&Nr(bt,Ce)}pe.$flags$&=-2},an=(ne,Ce,Ze,it,bt,ye)=>{let _t,qe=ne["s-cr"]&&ne["s-cr"].parentNode||ne;for(qe.shadowRoot&&qe.tagName===Ne&&(qe=qe.shadowRoot);bt<=ye;++bt)it[bt]&&(_t=nr(null,Ze,bt,ne),_t&&(it[bt].$elm$=_t,qe.insertBefore(_t,St(Ce))))},ur=(ne,Ce,Ze,it,bt)=>{for(;Ce<=Ze;++Ce)(it=ne[Ce])&&(bt=it.$elm$,On(it),ve=!0,bt["s-ol"]?bt["s-ol"].remove():Nr(bt,!0),bt.remove())},In=(ne,Ce)=>ne.$tag$===Ce.$tag$&&("slot"===ne.$tag$?ne.$name$===Ce.$name$:ne.$key$===Ce.$key$),St=ne=>ne&&ne["s-ol"]||ne,gr=ne=>(ne["s-ol"]?ne["s-ol"]:ne).parentNode,mr=(ne,Ce)=>{const Ze=Ce.$elm$=ne.$elm$,it=ne.$children$,bt=Ce.$children$,ye=Ce.$tag$,qe=Ce.$text$;let _t;null===qe?(be="svg"===ye||"foreignObject"!==ye&&be,"slot"===ye||Un(ne,Ce,be),null!==it&&null!==bt?((ne,Ce,Ze,it)=>{let qr,tt,bt=0,ye=0,qe=0,_t=0,Rt=Ce.length-1,zt=Ce[0],pn=Ce[Rt],vn=it.length-1,rr=it[0],zr=it[vn];for(;bt<=Rt&&ye<=vn;)if(null==zt)zt=Ce[++bt];else if(null==pn)pn=Ce[--Rt];else if(null==rr)rr=it[++ye];else if(null==zr)zr=it[--vn];else if(In(zt,rr))mr(zt,rr),zt=Ce[++bt],rr=it[++ye];else if(In(pn,zr))mr(pn,zr),pn=Ce[--Rt],zr=it[--vn];else if(In(zt,zr))("slot"===zt.$tag$||"slot"===zr.$tag$)&&Nr(zt.$elm$.parentNode,!1),mr(zt,zr),ne.insertBefore(zt.$elm$,pn.$elm$.nextSibling),zt=Ce[++bt],zr=it[--vn];else if(In(pn,rr))("slot"===zt.$tag$||"slot"===zr.$tag$)&&Nr(pn.$elm$.parentNode,!1),mr(pn,rr),ne.insertBefore(pn.$elm$,zt.$elm$),pn=Ce[--Rt],rr=it[++ye];else{for(qe=-1,_t=bt;_t<=Rt;++_t)if(Ce[_t]&&null!==Ce[_t].$key$&&Ce[_t].$key$===rr.$key$){qe=_t;break}qe>=0?(tt=Ce[qe],tt.$tag$!==rr.$tag$?qr=nr(Ce&&Ce[ye],Ze,qe,ne):(mr(tt,rr),Ce[qe]=void 0,qr=tt.$elm$),rr=it[++ye]):(qr=nr(Ce&&Ce[ye],Ze,ye,ne),rr=it[++ye]),qr&&gr(zt.$elm$).insertBefore(qr,St(zt.$elm$))}bt>Rt?an(ne,null==it[vn+1]?null:it[vn+1].$elm$,Ze,it,ye,vn):ye>vn&&ur(Ce,bt,Rt)})(Ze,it,Ce,bt):null!==bt?(null!==ne.$text$&&(Ze.textContent=""),an(Ze,null,Ce,bt,0,bt.length-1)):null!==it&&ur(it,0,it.length-1),be&&"svg"===ye&&(be=!1)):(_t=Ze["s-cr"])?_t.parentNode.textContent=qe:ne.$text$!==qe&&(Ze.data=qe)},wr=ne=>{const Ce=ne.childNodes;let Ze,it,bt,ye,qe,_t;for(it=0,bt=Ce.length;it<bt;it++)if(Ze=Ce[it],1===Ze.nodeType){if(Ze["s-sr"])for(qe=Ze["s-sn"],Ze.hidden=!1,ye=0;ye<bt;ye++)if(_t=Ce[ye].nodeType,Ce[ye]["s-hn"]!==Ze["s-hn"]||""!==qe){if(1===_t&&qe===Ce[ye].getAttribute("slot")){Ze.hidden=!0;break}}else if(1===_t||3===_t&&""!==Ce[ye].textContent.trim()){Ze.hidden=!0;break}wr(Ze)}},Lr=[],Pn=ne=>{let Ce,Ze,it,bt,ye,qe,_t=0;const Rt=ne.childNodes,zt=Rt.length;for(;_t<zt;_t++){if(Ce=Rt[_t],Ce["s-sr"]&&(Ze=Ce["s-cr"])&&Ze.parentNode)for(it=Ze.parentNode.childNodes,bt=Ce["s-sn"],qe=it.length-1;qe>=0;qe--)Ze=it[qe],!Ze["s-cn"]&&!Ze["s-nr"]&&Ze["s-hn"]!==Ce["s-hn"]&&(ki(Ze,bt)?(ye=Lr.find(pn=>pn.$nodeToRelocate$===Ze),ve=!0,Ze["s-sn"]=Ze["s-sn"]||bt,ye?ye.$slotRefNode$=Ce:Lr.push({$slotRefNode$:Ce,$nodeToRelocate$:Ze}),Ze["s-sr"]&&Lr.map(pn=>{ki(pn.$nodeToRelocate$,Ze["s-sn"])&&(ye=Lr.find(vn=>vn.$nodeToRelocate$===Ze),ye&&!pn.$slotRefNode$&&(pn.$slotRefNode$=ye.$slotRefNode$))})):Lr.some(pn=>pn.$nodeToRelocate$===Ze)||Lr.push({$nodeToRelocate$:Ze}));1===Ce.nodeType&&Pn(Ce)}},ki=(ne,Ce)=>1===ne.nodeType?null===ne.getAttribute("slot")&&""===Ce||ne.getAttribute("slot")===Ce:ne["s-sn"]===Ce||""===Ce,On=ne=>{ne.$attrs$&&ne.$attrs$.ref&&ne.$attrs$.ref(null),ne.$children$&&ne.$children$.map(On)},cr=ne=>kr(ne).$hostElement$,jr=(ne,Ce,Ze)=>{const it=cr(ne);return{emit:bt=>ai(it,Ce,{bubbles:!!(4&Ze),composed:!!(2&Ze),cancelable:!!(1&Ze),detail:bt})}},ai=(ne,Ce,Ze)=>{const it=pe.ce(Ce,Ze);return ne.dispatchEvent(it),it},wn=(ne,Ce)=>{Ce&&!ne.$onRenderResolve$&&Ce["s-p"]&&Ce["s-p"].push(new Promise(Ze=>ne.$onRenderResolve$=Ze))},Gt=(ne,Ce)=>{if(ne.$flags$|=16,!(4&ne.$flags$))return wn(ne,ne.$ancestorComponent$),Ti(()=>mn(ne,Ce));ne.$flags$|=512},mn=(ne,Ce)=>{const it=ne.$lazyInstance$;let bt;return Ce&&(ne.$flags$|=256,ne.$queuedListeners$&&(ne.$queuedListeners$.map(([ye,qe])=>He(it,ye,qe)),ne.$queuedListeners$=null),bt=He(it,"componentWillLoad")),bt=pt(bt,()=>He(it,"componentWillRender")),pt(bt,()=>Nn(ne,it,Ce))},Nn=function(){var ne=(0,a.Z)(function*(Ce,Ze,it){const bt=Ce.$hostElement$,qe=bt["s-rc"];it&&(ne=>{const Ce=ne.$cmpMeta$,Ze=ne.$hostElement$,it=Ce.$flags$,ye=ze(Ze.shadowRoot?Ze.shadowRoot:Ze.getRootNode(),Ce,ne.$modeName$);10&it&&(Ze["s-sc"]=ye,Ze.classList.add(ye+"-h"),2&it&&Ze.classList.add(ye+"-s"))})(Ce);xn(Ce,Ze),qe&&(qe.map(Rt=>Rt()),bt["s-rc"]=void 0);{const Rt=bt["s-p"],zt=()=>jn(Ce);0===Rt.length?zt():(Promise.all(Rt).then(zt),Ce.$flags$|=4,Rt.length=0)}});return function(Ze,it,bt){return ne.apply(this,arguments)}}(),xn=(ne,Ce,Ze)=>{try{Ce=Ce.render&&Ce.render(),ne.$flags$&=-17,ne.$flags$|=2,((ne,Ce)=>{const Ze=ne.$hostElement$,it=ne.$cmpMeta$,bt=ne.$vnode$||yn(null,null),ye=(ne=>ne&&ne.$tag$===En)(Ce)?Ce:Jn(null,null,Ce);if(Ne=Ze.tagName,it.$attrsToReflect$&&(ye.$attrs$=ye.$attrs$||{},it.$attrsToReflect$.map(([qe,_t])=>ye.$attrs$[_t]=Ze[qe])),ye.$tag$=null,ye.$flags$|=4,ne.$vnode$=ye,ye.$elm$=bt.$elm$=Ze.shadowRoot||Ze,z=Ze["s-sc"],Le=Ze["s-cr"],fe=0!=(1&it.$flags$),ve=!1,mr(bt,ye),pe.$flags$|=1,ge){Pn(ye.$elm$);let qe,_t,Rt,zt,pn,vn,rr=0;for(;rr<Lr.length;rr++)qe=Lr[rr],_t=qe.$nodeToRelocate$,_t["s-ol"]||(Rt=oe.createTextNode(""),Rt["s-nr"]=_t,_t.parentNode.insertBefore(_t["s-ol"]=Rt,_t));for(rr=0;rr<Lr.length;rr++)if(qe=Lr[rr],_t=qe.$nodeToRelocate$,qe.$slotRefNode$){for(zt=qe.$slotRefNode$.parentNode,pn=qe.$slotRefNode$.nextSibling,Rt=_t["s-ol"];Rt=Rt.previousSibling;)if(vn=Rt["s-nr"],vn&&vn["s-sn"]===_t["s-sn"]&&zt===vn.parentNode&&(vn=vn.nextSibling,!vn||!vn["s-nr"])){pn=vn;break}(!pn&&zt!==_t.parentNode||_t.nextSibling!==pn)&&_t!==pn&&(!_t["s-hn"]&&_t["s-ol"]&&(_t["s-hn"]=_t["s-ol"].parentNode.nodeName),zt.insertBefore(_t,pn))}else 1===_t.nodeType&&(_t.hidden=!0)}ve&&wr(ye.$elm$),pe.$flags$&=-2,Lr.length=0})(ne,Ce)}catch(it){Fn(it,ne.$hostElement$)}return null},jn=ne=>{const Ze=ne.$hostElement$,bt=ne.$lazyInstance$,ye=ne.$ancestorComponent$;He(bt,"componentDidRender"),64&ne.$flags$?He(bt,"componentDidUpdate"):(ne.$flags$|=64,et(Ze),He(bt,"componentDidLoad"),ne.$onReadyResolve$(Ze),ye||Pe()),ne.$onInstanceResolve$(Ze),ne.$onRenderResolve$&&(ne.$onRenderResolve$(),ne.$onRenderResolve$=void 0),512&ne.$flags$&&Ii(()=>Gt(ne,!1)),ne.$flags$&=-517},Ve=ne=>{{const Ce=kr(ne),Ze=Ce.$hostElement$.isConnected;return Ze&&2==(18&Ce.$flags$)&&Gt(Ce,!1),Ze}},Pe=ne=>{et(oe.documentElement),Ii(()=>ai(de,"appload",{detail:{namespace:"ionic"}}))},He=(ne,Ce,Ze)=>{if(ne&&ne[Ce])try{return ne[Ce](Ze)}catch(it){Fn(it)}},pt=(ne,Ce)=>ne&&ne.then?ne.then(Ce):Ce(),et=ne=>ne.classList.add("hydrated"),dn=(ne,Ce,Ze,it,bt,ye,qe)=>{let _t,Rt,zt,pn;if(1===ye.nodeType){for(_t=ye.getAttribute("c-id"),_t&&(Rt=_t.split("."),(Rt[0]===qe||"0"===Rt[0])&&(zt={$flags$:0,$hostId$:Rt[0],$nodeId$:Rt[1],$depth$:Rt[2],$index$:Rt[3],$tag$:ye.tagName.toLowerCase(),$elm$:ye,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Ce.push(zt),ye.removeAttribute("c-id"),ne.$children$||(ne.$children$=[]),ne.$children$[zt.$index$]=zt,ne=zt,it&&"0"===zt.$depth$&&(it[zt.$index$]=zt.$elm$))),pn=ye.childNodes.length-1;pn>=0;pn--)dn(ne,Ce,Ze,it,bt,ye.childNodes[pn],qe);if(ye.shadowRoot)for(pn=ye.shadowRoot.childNodes.length-1;pn>=0;pn--)dn(ne,Ce,Ze,it,bt,ye.shadowRoot.childNodes[pn],qe)}else if(8===ye.nodeType)Rt=ye.nodeValue.split("."),(Rt[1]===qe||"0"===Rt[1])&&(_t=Rt[0],zt={$flags$:0,$hostId$:Rt[1],$nodeId$:Rt[2],$depth$:Rt[3],$index$:Rt[4],$elm$:ye,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===_t?(zt.$elm$=ye.nextSibling,zt.$elm$&&3===zt.$elm$.nodeType&&(zt.$text$=zt.$elm$.textContent,Ce.push(zt),ye.remove(),ne.$children$||(ne.$children$=[]),ne.$children$[zt.$index$]=zt,it&&"0"===zt.$depth$&&(it[zt.$index$]=zt.$elm$))):zt.$hostId$===qe&&("s"===_t?(zt.$tag$="slot",ye["s-sn"]=Rt[5]?zt.$name$=Rt[5]:"",ye["s-sr"]=!0,it&&(zt.$elm$=oe.createElement(zt.$tag$),zt.$name$&&zt.$elm$.setAttribute("name",zt.$name$),ye.parentNode.insertBefore(zt.$elm$,ye),ye.remove(),"0"===zt.$depth$&&(it[zt.$index$]=zt.$elm$)),Ze.push(zt),ne.$children$||(ne.$children$=[]),ne.$children$[zt.$index$]=zt):"r"===_t&&(it?ye.remove():(bt["s-cr"]=ye,ye["s-cn"]=!0))));else if(ne&&"style"===ne.$tag$){const vn=yn(null,ye.textContent);vn.$elm$=ye,vn.$index$="0",ne.$children$=[vn]}},dr=(ne,Ce)=>{if(1===ne.nodeType){let Ze=0;for(;Ze<ne.childNodes.length;Ze++)dr(ne.childNodes[Ze],Ce);if(ne.shadowRoot)for(Ze=0;Ze<ne.shadowRoot.childNodes.length;Ze++)dr(ne.shadowRoot.childNodes[Ze],Ce)}else if(8===ne.nodeType){const Ze=ne.nodeValue.split(".");"o"===Ze[0]&&(Ce.set(Ze[1]+"."+Ze[2],ne),ne.nodeValue="",ne["s-en"]=Ze[3])}},Be=(ne,Ce,Ze)=>{if(Ce.$members$){ne.watchers&&(Ce.$watchers$=ne.watchers);const it=Object.entries(Ce.$members$),bt=ne.prototype;if(it.map(([ye,[qe]])=>{31&qe||2&Ze&&32&qe?Object.defineProperty(bt,ye,{get(){return((ne,Ce)=>kr(this).$instanceValues$.get(Ce))(0,ye)},set(_t){((ne,Ce,Ze,it)=>{const bt=kr(ne),ye=bt.$hostElement$,qe=bt.$instanceValues$.get(Ce),_t=bt.$flags$,Rt=bt.$lazyInstance$;Ze=((ne,Ce)=>null==ne||un(ne)?ne:4&Ce?"false"!==ne&&(""===ne||!!ne):2&Ce?parseFloat(ne):1&Ce?String(ne):ne)(Ze,it.$members$[Ce][0]);const zt=Number.isNaN(qe)&&Number.isNaN(Ze);if((!(8&_t)||void 0===qe)&&Ze!==qe&&!zt&&(bt.$instanceValues$.set(Ce,Ze),Rt)){if(it.$watchers$&&128&_t){const vn=it.$watchers$[Ce];vn&&vn.map(rr=>{try{Rt[rr](Ze,qe,Ce)}catch(zr){Fn(zr,ye)}})}2==(18&_t)&&Gt(bt,!1)}})(this,ye,_t,Ce)},configurable:!0,enumerable:!0}):1&Ze&&64&qe&&Object.defineProperty(bt,ye,{value(..._t){const Rt=kr(this);return Rt.$onInstancePromise$.then(()=>Rt.$lazyInstance$[ye](..._t))}})}),1&Ze){const ye=new Map;bt.attributeChangedCallback=function(qe,_t,Rt){pe.jmp(()=>{const zt=ye.get(qe);if(this.hasOwnProperty(zt))Rt=this[zt],delete this[zt];else if(bt.hasOwnProperty(zt)&&"number"==typeof this[zt]&&this[zt]==Rt)return;this[zt]=(null!==Rt||"boolean"!=typeof this[zt])&&Rt})},ne.observedAttributes=it.filter(([qe,_t])=>15&_t[0]).map(([qe,_t])=>{const Rt=_t[1]||qe;return ye.set(Rt,qe),512&_t[0]&&Ce.$attrsToReflect$.push([qe,Rt]),Rt})}}return ne},Me=function(){var ne=(0,a.Z)(function*(Ce,Ze,it,bt,ye){if(0==(32&Ze.$flags$)){{if(Ze.$flags$|=32,(ye=li(it)).then){const zt=()=>{};ye=yield ye,zt()}ye.isProxied||(it.$watchers$=ye.watchers,Be(ye,it,2),ye.isProxied=!0);const Rt=()=>{};Ze.$flags$|=8;try{new ye(Ze)}catch(zt){Fn(zt)}Ze.$flags$&=-9,Ze.$flags$|=128,Rt(),Et(Ze.$lazyInstance$)}if(ye.style){let Rt=ye.style;"string"!=typeof Rt&&(Rt=Rt[Ze.$modeName$=(ne=>Hi.map(Ce=>Ce(ne)).find(Ce=>!!Ce))(Ce)]);const zt=De(it,Ze.$modeName$);if(!Xn.has(zt)){const pn=()=>{};Wt(zt,Rt,!!(1&it.$flags$)),pn()}}}const qe=Ze.$ancestorComponent$,_t=()=>Gt(Ze,!0);qe&&qe["s-rc"]?qe["s-rc"].push(_t):_t()});return function(Ze,it,bt,ye,qe){return ne.apply(this,arguments)}}(),Et=ne=>{He(ne,"connectedCallback")},Wn=ne=>{const Ce=ne["s-cr"]=oe.createComment("");Ce["s-cn"]=!0,ne.insertBefore(Ce,ne.firstChild)},tn=(ne,Ce={})=>{const it=[],bt=Ce.exclude||[],ye=de.customElements,qe=oe.head,_t=qe.querySelector("meta[charset]"),Rt=oe.createElement("style"),zt=[],pn=oe.querySelectorAll(`[${Z}]`);let vn,rr=!0,zr=0;for(Object.assign(pe,Ce),pe.$resourcesUrl$=new URL(Ce.resourcesUrl||"./",oe.baseURI).href,pe.$flags$|=2;zr<pn.length;zr++)Wt(pn[zr].getAttribute(Z),$e(pn[zr].innerHTML),!0);ne.map(qr=>{qr[1].map(tt=>{const Ye={$flags$:tt[0],$tagName$:tt[1],$members$:tt[2],$listeners$:tt[3]};Ye.$members$=tt[2],Ye.$listeners$=tt[3],Ye.$attrsToReflect$=[],Ye.$watchers$={};const vt=Ye.$tagName$,Vt=class extends HTMLElement{constructor(Ht){super(Ht),si(Ht=this,Ye),1&Ye.$flags$&&Ht.attachShadow({mode:"open",delegatesFocus:!!(16&Ye.$flags$)})}connectedCallback(){vn&&(clearTimeout(vn),vn=null),rr?zt.push(this):pe.jmp(()=>(ne=>{if(0==(1&pe.$flags$)){const Ce=kr(ne),Ze=Ce.$cmpMeta$,it=()=>{};if(1&Ce.$flags$)we(ne,Ce,Ze.$listeners$),Et(Ce.$lazyInstance$);else{let bt;if(Ce.$flags$|=1,bt=ne.getAttribute(Ee),bt){if(1&Ze.$flags$){const ye=ze(ne.shadowRoot,Ze,ne.getAttribute("s-mode"));ne.classList.remove(ye+"-h",ye+"-s")}((ne,Ce,Ze,it)=>{const ye=ne.shadowRoot,qe=[],Rt=ye?[]:null,zt=it.$vnode$=yn(Ce,null);pe.$orgLocNodes$||dr(oe.body,pe.$orgLocNodes$=new Map),ne[Ee]=Ze,ne.removeAttribute(Ee),dn(zt,qe,[],Rt,ne,ne,Ze),qe.map(pn=>{const vn=pn.$hostId$+"."+pn.$nodeId$,rr=pe.$orgLocNodes$.get(vn),zr=pn.$elm$;rr&&""===rr["s-en"]&&rr.parentNode.insertBefore(zr,rr.nextSibling),ye||(zr["s-hn"]=Ce,rr&&(zr["s-ol"]=rr,zr["s-ol"]["s-nr"]=zr)),pe.$orgLocNodes$.delete(vn)}),ye&&Rt.map(pn=>{pn&&ye.appendChild(pn)})})(ne,Ze.$tagName$,bt,Ce)}bt||12&Ze.$flags$&&Wn(ne);{let ye=ne;for(;ye=ye.parentNode||ye.host;)if(1===ye.nodeType&&ye.hasAttribute("s-id")&&ye["s-p"]||ye["s-p"]){wn(Ce,Ce.$ancestorComponent$=ye);break}}Ze.$members$&&Object.entries(Ze.$members$).map(([ye,[qe]])=>{if(31&qe&&ne.hasOwnProperty(ye)){const _t=ne[ye];delete ne[ye],ne[ye]=_t}}),Ii(()=>Me(ne,Ce,Ze))}it()}})(this))}disconnectedCallback(){pe.jmp(()=>(ne=>{if(0==(1&pe.$flags$)){const Ce=kr(this),Ze=Ce.$lazyInstance$;Ce.$rmListeners$&&(Ce.$rmListeners$.map(it=>it()),Ce.$rmListeners$=void 0),He(Ze,"disconnectedCallback")}})())}componentOnReady(){return kr(this).$onReadyPromise$}};Ye.$lazyBundleId$=qr[0],!bt.includes(vt)&&!ye.get(vt)&&(it.push(vt),ye.define(vt,Be(Vt,Ye,1)))})}),Rt.innerHTML=it+"{visibility:hidden}.hydrated{visibility:inherit}",Rt.setAttribute("data-styles",""),qe.insertBefore(Rt,_t?_t.nextSibling:qe.firstChild),rr=!1,zt.length?zt.map(qr=>qr.connectedCallback()):pe.jmp(()=>vn=setTimeout(Pe,30))},Sn=ne=>{const Ce=new URL(ne,pe.$resourcesUrl$);return Ce.origin!==de.location.origin?Ce.href:Ce.pathname},Kn=new WeakMap,kr=ne=>Kn.get(ne),Br=(ne,Ce)=>Kn.set(Ce.$lazyInstance$=ne,Ce),si=(ne,Ce)=>{const Ze={$flags$:0,$hostElement$:ne,$cmpMeta$:Ce,$instanceValues$:new Map};return Ze.$onInstancePromise$=new Promise(it=>Ze.$onInstanceResolve$=it),Ze.$onReadyPromise$=new Promise(it=>Ze.$onReadyResolve$=it),ne["s-p"]=[],ne["s-rc"]=[],we(ne,Ze,Ce.$listeners$),Kn.set(ne,Ze)},mi=(ne,Ce)=>Ce in ne,Fn=(ne,Ce)=>(0,console.error)(ne,Ce),Vr=new Map,li=(ne,Ce,Ze)=>{const it=ne.$tagName$.replace(/-/g,"_"),bt=ne.$lazyBundleId$,ye=Vr.get(bt);return ye?ye[it]:H(863)(`./${bt}.entry.js`).then(qe=>(Vr.set(bt,qe),qe[it]),Fn)},Xn=new Map,Hi=[],hi=[],ui=[],Gi=(ne,Ce)=>Ze=>{ne.push(Ze),ue||(ue=!0,Ce&&4&pe.$flags$?Ii(_i):pe.raf(_i))},Xr=ne=>{for(let Ce=0;Ce<ne.length;Ce++)try{ne[Ce](performance.now())}catch(Ze){Fn(Ze)}ne.length=0},_i=()=>{Xr(hi),Xr(ui),(ue=hi.length>0)&&pe.raf(_i)},Ii=ne=>nt().then(ne),fi=Gi(hi,!1),Ti=Gi(ui,!0),Li={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},664:(on,ut,H)=>{"use strict";H.d(ut,{L:()=>Le,a:()=>Ne,b:()=>fe,c:()=>ve,d:()=>ge,e:()=>rt,g:()=>te,l:()=>kt,s:()=>Ee,t:()=>de});var a=H(5861),se=H(1308),z=H(5730);const Le="ionViewWillEnter",Ne="ionViewDidEnter",fe="ionViewWillLeave",ve="ionViewDidLeave",ge="ionViewWillUnload",de=he=>new Promise((Ie,Te)=>{(0,se.c)(()=>{oe(he),pe(he).then(Je=>{Je.animation&&Je.animation.destroy(),Ue(he),Ie(Je)},Je=>{Ue(he),Te(Je)})})}),oe=he=>{const Ie=he.enteringEl,Te=he.leavingEl;Z(Ie,Te,he.direction),he.showGoBack?Ie.classList.add("can-go-back"):Ie.classList.remove("can-go-back"),Ee(Ie,!1),Ie.style.setProperty("pointer-events","none"),Te&&(Ee(Te,!1),Te.style.setProperty("pointer-events","none"))},pe=function(){var he=(0,a.Z)(function*(Ie){const Te=yield Qe(Ie);return Te&&se.B.isBrowser?nt(Te,Ie):Oe(Ie)});return function(Te){return he.apply(this,arguments)}}(),Ue=he=>{const Ie=he.enteringEl,Te=he.leavingEl;Ie.classList.remove("ion-page-invisible"),Ie.style.removeProperty("pointer-events"),void 0!==Te&&(Te.classList.remove("ion-page-invisible"),Te.style.removeProperty("pointer-events"))},Qe=function(){var he=(0,a.Z)(function*(Ie){return Ie.leavingEl&&Ie.animated&&0!==Ie.duration?Ie.animationBuilder?Ie.animationBuilder:"ios"===Ie.mode?(yield Promise.resolve().then(H.bind(H,129))).iosTransitionAnimation:(yield Promise.resolve().then(H.bind(H,1369))).mdTransitionAnimation:void 0});return function(Te){return he.apply(this,arguments)}}(),nt=function(){var he=(0,a.Z)(function*(Ie,Te){yield we(Te,!0);const Je=Ie(Te.baseEl,Te);ht(Te.enteringEl,Te.leavingEl);const Ot=yield st(Je,Te);return Te.progressCallback&&Te.progressCallback(void 0),Ot&&yt(Te.enteringEl,Te.leavingEl),{hasCompleted:Ot,animation:Je}});return function(Te,Je){return he.apply(this,arguments)}}(),Oe=function(){var he=(0,a.Z)(function*(Ie){const Te=Ie.enteringEl,Je=Ie.leavingEl;return yield we(Ie,!1),ht(Te,Je),yt(Te,Je),{hasCompleted:!0}});return function(Te){return he.apply(this,arguments)}}(),we=function(){var he=(0,a.Z)(function*(Ie,Te){const Ot=(void 0!==Ie.deepWait?Ie.deepWait:Te)?[rt(Ie.enteringEl),rt(Ie.leavingEl)]:[je(Ie.enteringEl),je(Ie.leavingEl)];yield Promise.all(Ot),yield dt(Ie.viewIsReady,Ie.enteringEl)});return function(Te,Je){return he.apply(this,arguments)}}(),dt=function(){var he=(0,a.Z)(function*(Ie,Te){Ie&&(yield Ie(Te))});return function(Te,Je){return he.apply(this,arguments)}}(),st=(he,Ie)=>{const Te=Ie.progressCallback,Je=new Promise(Ot=>{he.onFinish(Wt=>Ot(1===Wt))});return Te?(he.progressStart(!0),Te(he)):he.play(),Je},ht=(he,Ie)=>{kt(Ie,fe),kt(he,Le)},yt=(he,Ie)=>{kt(he,Ne),kt(Ie,ve)},kt=(he,Ie)=>{if(he){const Te=new CustomEvent(Ie,{bubbles:!1,cancelable:!1});he.dispatchEvent(Te)}},je=he=>he?new Promise(Ie=>(0,z.c)(he,Ie)):Promise.resolve(),rt=function(){var he=(0,a.Z)(function*(Ie){const Te=Ie;if(Te){if(null!=Te.componentOnReady){if(null!=(yield Te.componentOnReady()))return}else if(null!=Te.__registerHost)return void(yield new Promise(Ot=>(0,z.r)(Ot)));yield Promise.all(Array.from(Te.children).map(rt))}});return function(Te){return he.apply(this,arguments)}}(),Ee=(he,Ie)=>{Ie?(he.setAttribute("aria-hidden","true"),he.classList.add("ion-page-hidden")):(he.hidden=!1,he.removeAttribute("aria-hidden"),he.classList.remove("ion-page-hidden"))},Z=(he,Ie,Te)=>{void 0!==he&&(he.style.zIndex="back"===Te?"99":"101"),void 0!==Ie&&(Ie.style.zIndex="100")},te=he=>he.classList.contains("ion-page")?he:he.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||he},1911:(on,ut,H)=>{"use strict";H.r(ut),H.d(ut,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>be});var a=H(4349);const se=(pe,Ue,Qe,nt)=>{const Oe=z(pe)?{capture:!!nt.capture,passive:!!nt.passive}:!!nt.capture;let we,dt;return pe.__zone_symbol__addEventListener?(we="__zone_symbol__addEventListener",dt="__zone_symbol__removeEventListener"):(we="addEventListener",dt="removeEventListener"),pe[we](Ue,Qe,Oe),()=>{pe[dt](Ue,Qe,Oe)}},z=pe=>{if(void 0===Le)try{const Ue=Object.defineProperty({},"passive",{get:()=>{Le=!0}});pe.addEventListener("optsTest",()=>{},Ue)}catch(Ue){Le=!1}return!!Le};let Le;const ve=pe=>pe instanceof Document?pe:pe.ownerDocument,be=pe=>{let Ue=!1,Qe=!1,nt=!0,Oe=!1;const we=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},pe),dt=we.canStart,st=we.onWillStart,ht=we.onStart,yt=we.onEnd,kt=we.notCaptured,je=we.onMove,rt=we.threshold,Ee=we.passive,Z=we.blurOnStart,te={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},he=((pe,Ue,Qe)=>{const nt=Qe*(Math.PI/180),Oe="x"===pe,we=Math.cos(nt),dt=Ue*Ue;let st=0,ht=0,yt=!1,kt=0;return{start(je,rt){st=je,ht=rt,kt=0,yt=!0},detect(je,rt){if(!yt)return!1;const Ee=je-st,Z=rt-ht,te=Ee*Ee+Z*Z;if(te<dt)return!1;const he=Math.sqrt(te),Ie=(Oe?Ee:Z)/he;return kt=Ie>we?1:Ie<-we?-1:0,yt=!1,!0},isGesture:()=>0!==kt,getDirection:()=>kt}})(we.direction,we.threshold,we.maxAngle),Ie=a.G.createGesture({name:pe.gestureName,priority:pe.gesturePriority,disableScroll:pe.disableScroll}),Ot=()=>{!Ue||(Oe=!1,je&&je(te))},Wt=()=>!!Ie.capture()&&(Ue=!0,nt=!1,te.startX=te.currentX,te.startY=te.currentY,te.startTime=te.currentTime,st?st(te).then(ot):ot(),!0),ot=()=>{Z&&(()=>{if("undefined"!=typeof document){const gt=document.activeElement;null!=gt&&gt.blur&&gt.blur()}})(),ht&&ht(te),nt=!0},De=()=>{Ue=!1,Qe=!1,Oe=!1,nt=!0,Ie.release()},$e=gt=>{const ft=Ue,Ut=nt;if(De(),Ut){if(ue(te,gt),ft)return void(yt&&yt(te));kt&&kt(te)}},Xe=((pe,Ue,Qe,nt,Oe)=>{let we,dt,st,ht,yt,kt,je,rt=0;const Ee=ze=>{rt=Date.now()+2e3,Ue(ze)&&(!dt&&Qe&&(dt=se(pe,"touchmove",Qe,Oe)),st||(st=se(ze.target,"touchend",te,Oe)),ht||(ht=se(ze.target,"touchcancel",te,Oe)))},Z=ze=>{rt>Date.now()||!Ue(ze)||(!kt&&Qe&&(kt=se(ve(pe),"mousemove",Qe,Oe)),je||(je=se(ve(pe),"mouseup",he,Oe)))},te=ze=>{Ie(),nt&&nt(ze)},he=ze=>{Te(),nt&&nt(ze)},Ie=()=>{dt&&dt(),st&&st(),ht&&ht(),dt=st=ht=void 0},Te=()=>{kt&&kt(),je&&je(),kt=je=void 0},Je=()=>{Ie(),Te()},Ot=(ze=!0)=>{ze?(we||(we=se(pe,"touchstart",Ee,Oe)),yt||(yt=se(pe,"mousedown",Z,Oe))):(we&&we(),yt&&yt(),we=yt=void 0,Je())};return{enable:Ot,stop:Je,destroy:()=>{Ot(!1),nt=Qe=Ue=void 0}}})(we.el,gt=>{const ft=oe(gt);return!(Qe||!nt||(de(gt,te),te.startX=te.currentX,te.startY=te.currentY,te.startTime=te.currentTime=ft,te.velocityX=te.velocityY=te.deltaX=te.deltaY=0,te.event=gt,dt&&!1===dt(te))||(Ie.release(),!Ie.start()))&&(Qe=!0,0===rt?Wt():(he.start(te.startX,te.startY),!0))},gt=>{Ue?!Oe&&nt&&(Oe=!0,ue(te,gt),requestAnimationFrame(Ot)):(ue(te,gt),he.detect(te.currentX,te.currentY)&&(!he.isGesture()||!Wt())&&at())},$e,{capture:!1,passive:Ee}),at=()=>{De(),Xe.stop(),kt&&kt(te)};return{enable(gt=!0){gt||(Ue&&$e(void 0),De()),Xe.enable(gt)},destroy(){Ie.destroy(),Xe.destroy()}}},ue=(pe,Ue)=>{if(!Ue)return;const Qe=pe.currentX,nt=pe.currentY,Oe=pe.currentTime;de(Ue,pe);const we=pe.currentX,dt=pe.currentY,ht=(pe.currentTime=oe(Ue))-Oe;if(ht>0&&ht<100){const kt=(dt-nt)/ht;pe.velocityX=(we-Qe)/ht*.7+.3*pe.velocityX,pe.velocityY=.7*kt+.3*pe.velocityY}pe.deltaX=we-pe.startX,pe.deltaY=dt-pe.startY,pe.event=Ue},de=(pe,Ue)=>{let Qe=0,nt=0;if(pe){const Oe=pe.changedTouches;if(Oe&&Oe.length>0){const we=Oe[0];Qe=we.clientX,nt=we.clientY}else void 0!==pe.pageX&&(Qe=pe.pageX,nt=pe.pageY)}Ue.currentX=Qe,Ue.currentY=nt},oe=pe=>pe.timeStamp||Date.now()},9658:(on,ut,H)=>{"use strict";H.d(ut,{a:()=>de,b:()=>Ot,c:()=>z,g:()=>ue,i:()=>Wt});var a=H(1308);class se{constructor(){this.m=new Map}reset(ot){this.m=new Map(Object.entries(ot))}get(ot,De){const $e=this.m.get(ot);return void 0!==$e?$e:De}getBoolean(ot,De=!1){const $e=this.m.get(ot);return void 0===$e?De:"string"==typeof $e?"true"===$e:!!$e}getNumber(ot,De){const $e=parseFloat(this.m.get(ot));return isNaN($e)?void 0!==De?De:NaN:$e}set(ot,De){this.m.set(ot,De)}}const z=new se,be="ionic-persist-config",ue=ze=>oe(ze),de=(ze,ot)=>("string"==typeof ze&&(ot=ze,ze=void 0),ue(ze).includes(ot)),oe=(ze=window)=>{if(void 0===ze)return[];ze.Ionic=ze.Ionic||{};let ot=ze.Ionic.platforms;return null==ot&&(ot=ze.Ionic.platforms=pe(ze),ot.forEach(De=>ze.document.documentElement.classList.add(`plt-${De}`))),ot},pe=ze=>{const ot=z.get("platform");return Object.keys(Te).filter(De=>{const $e=null==ot?void 0:ot[De];return"function"==typeof $e?$e(ze):Te[De](ze)})},Qe=ze=>!!(he(ze,/iPad/i)||he(ze,/Macintosh/i)&&yt(ze)),we=ze=>he(ze,/android|sink/i),yt=ze=>Ie(ze,"(any-pointer:coarse)"),je=ze=>rt(ze)||Ee(ze),rt=ze=>!!(ze.cordova||ze.phonegap||ze.PhoneGap),Ee=ze=>{const ot=ze.Capacitor;return!(null==ot||!ot.isNative)},he=(ze,ot)=>ot.test(ze.navigator.userAgent),Ie=(ze,ot)=>{var De;return null===(De=ze.matchMedia)||void 0===De?void 0:De.call(ze,ot).matches},Te={ipad:Qe,iphone:ze=>he(ze,/iPhone/i),ios:ze=>he(ze,/iPhone|iPod/i)||Qe(ze),android:we,phablet:ze=>{const ot=ze.innerWidth,De=ze.innerHeight,$e=Math.min(ot,De),Xe=Math.max(ot,De);return $e>390&&$e<520&&Xe>620&&Xe<800},tablet:ze=>{const ot=ze.innerWidth,De=ze.innerHeight,$e=Math.min(ot,De),Xe=Math.max(ot,De);return Qe(ze)||(ze=>we(ze)&&!he(ze,/mobile/i))(ze)||$e>460&&$e<820&&Xe>780&&Xe<1400},cordova:rt,capacitor:Ee,electron:ze=>he(ze,/electron/i),pwa:ze=>{var ot;return!(!(null===(ot=ze.matchMedia)||void 0===ot?void 0:ot.call(ze,"(display-mode: standalone)").matches)&&!ze.navigator.standalone)},mobile:yt,mobileweb:ze=>yt(ze)&&!je(ze),desktop:ze=>!yt(ze),hybrid:je};let Je;const Ot=ze=>ze&&(0,a.g)(ze)||Je,Wt=(ze={})=>{if("undefined"==typeof window)return;const ot=window.document,De=window,$e=De.Ionic=De.Ionic||{},Xe={};ze._ael&&(Xe.ael=ze._ael),ze._rel&&(Xe.rel=ze._rel),ze._ce&&(Xe.ce=ze._ce),(0,a.s)(Xe);const at=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(ze=>{try{const ot=ze.sessionStorage.getItem(be);return null!==ot?JSON.parse(ot):{}}catch(ot){return{}}})(De)),{persistConfig:!1}),$e.config),(ze=>{const ot={};return ze.location.search.slice(1).split("&").map(De=>De.split("=")).map(([De,$e])=>[decodeURIComponent(De),decodeURIComponent($e)]).filter(([De])=>((ze,ot)=>ze.substr(0,ot.length)===ot)(De,"ionic:")).map(([De,$e])=>[De.slice("ionic:".length),$e]).forEach(([De,$e])=>{ot[De]=$e}),ot})(De)),ze);z.reset(at),z.getBoolean("persistConfig")&&((ze,ot)=>{try{ze.sessionStorage.setItem(be,JSON.stringify(ot))}catch(De){return}})(De,at),oe(De),$e.config=z,$e.mode=Je=z.get("mode",ot.documentElement.getAttribute("mode")||(de(De,"ios")?"ios":"md")),z.set("mode",Je),ot.documentElement.setAttribute("mode",Je),ot.documentElement.classList.add(Je),z.getBoolean("_testing")&&z.set("animated",!1);const gt=Ut=>{var Nt;return null===(Nt=Ut.tagName)||void 0===Nt?void 0:Nt.startsWith("ION-")},ft=Ut=>["ios","md"].includes(Ut);(0,a.a)(Ut=>{for(;Ut;){const Nt=Ut.mode||Ut.getAttribute("mode");if(Nt){if(ft(Nt))return Nt;gt(Ut)&&console.warn('Invalid ionic mode: "'+Nt+'", expected: "ios" or "md"')}Ut=Ut.parentElement}return Je})}},129:(on,ut,H)=>{"use strict";H.r(ut),H.d(ut,{iosTransitionAnimation:()=>pe,shadow:()=>ve});var a=H(5942),se=H(664);H(3457),H(1308);const fe=Ue=>document.querySelector(`${Ue}.ion-cloned-element`),ve=Ue=>Ue.shadowRoot||Ue,ge=Ue=>{const Qe="ION-TABS"===Ue.tagName?Ue:Ue.querySelector("ion-tabs"),nt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Qe){const Oe=Qe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Oe?Oe.querySelector(nt):null}return Ue.querySelector(nt)},be=(Ue,Qe)=>{const nt="ION-TABS"===Ue.tagName?Ue:Ue.querySelector("ion-tabs");let Oe=[];if(null!=nt){const we=nt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=we&&(Oe=we.querySelectorAll("ion-buttons"))}else Oe=Ue.querySelectorAll("ion-buttons");for(const we of Oe){const dt=we.closest("ion-header"),st=dt&&!dt.classList.contains("header-collapse-condense-inactive"),ht=we.querySelector("ion-back-button"),yt=we.classList.contains("buttons-collapse"),kt="start"===we.slot||""===we.slot;if(null!==ht&&kt&&(yt&&st&&Qe||!yt))return ht}return null},de=(Ue,Qe,nt,Oe,we,dt)=>{const st=Qe?`calc(100% - ${dt.right+4}px)`:dt.left-4+"px",ht=Qe?"7px":"-7px",yt=Qe?"-4px":"4px",kt=Qe?"-4px":"4px",je=Qe?"right":"left",rt=Qe?"left":"right",te=nt?[{offset:0,opacity:1,transform:`translate3d(${yt}, ${dt.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ht}, ${we.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ht}, ${we.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${yt}, ${dt.top-46}px, 0) scale(1)`}],Te=nt?[{offset:0,opacity:1,transform:`translate3d(${kt}, ${dt.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${kt}, ${dt.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${kt}, ${dt.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${kt}, ${dt.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${kt}, ${dt.top-46}px, 0) scale(1)`}],Je=(0,a.c)(),Ot=(0,a.c)(),Wt=fe("ion-back-button"),ze=ve(Wt).querySelector(".button-text"),ot=ve(Wt).querySelector("ion-icon");Wt.text=Oe.text,Wt.mode=Oe.mode,Wt.icon=Oe.icon,Wt.color=Oe.color,Wt.disabled=Oe.disabled,Wt.style.setProperty("display","block"),Wt.style.setProperty("position","fixed"),Ot.addElement(ot),Je.addElement(ze),Je.beforeStyles({"transform-origin":`${je} center`}).beforeAddWrite(()=>{Oe.style.setProperty("display","none"),Wt.style.setProperty(je,st)}).afterAddWrite(()=>{Oe.style.setProperty("display",""),Wt.style.setProperty("display","none"),Wt.style.removeProperty(je)}).keyframes(te),Ot.beforeStyles({"transform-origin":`${rt} center`}).keyframes(Te),Ue.addAnimation([Je,Ot])},oe=(Ue,Qe,nt,Oe,we,dt)=>{const st=Qe?`calc(100% - ${we.right}px)`:`${we.left}px`,ht=Qe?"-18px":"18px",yt=Qe?"right":"left",rt=nt?[{offset:0,opacity:0,transform:`translate3d(${ht}, ${dt.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${we.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${we.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ht}, ${dt.top-4}px, 0) scale(0.5)`}],Ee=fe("ion-title"),Z=(0,a.c)();Ee.innerText=Oe.innerText,Ee.size=Oe.size,Ee.color=Oe.color,Z.addElement(Ee),Z.beforeStyles({"transform-origin":`${yt} center`,height:"46px",display:"",position:"relative",[yt]:st}).beforeAddWrite(()=>{Oe.style.setProperty("display","none")}).afterAddWrite(()=>{Oe.style.setProperty("display",""),Ee.style.setProperty("display","none")}).keyframes(rt),Ue.addAnimation(Z)},pe=(Ue,Qe)=>{var nt;try{const Oe="cubic-bezier(0.32,0.72,0,1)",we="opacity",dt="transform",st="0%",yt="rtl"===Ue.ownerDocument.dir,kt=yt?"-99.5%":"99.5%",je=yt?"33%":"-33%",rt=Qe.enteringEl,Ee=Qe.leavingEl,Z="back"===Qe.direction,te=rt.querySelector(":scope > ion-content"),he=rt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ie=rt.querySelectorAll(":scope > ion-header > ion-toolbar"),Te=(0,a.c)(),Je=(0,a.c)();if(Te.addElement(rt).duration((null!==(nt=Qe.duration)&&void 0!==nt?nt:0)||540).easing(Qe.easing||Oe).fill("both").beforeRemoveClass("ion-page-invisible"),Ee&&null!=Ue){const ot=(0,a.c)();ot.addElement(Ue),Te.addAnimation(ot)}if(te||0!==Ie.length||0!==he.length?(Je.addElement(te),Je.addElement(he)):Je.addElement(rt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Te.addAnimation(Je),Z?Je.beforeClearStyles([we]).fromTo("transform",`translateX(${je})`,`translateX(${st})`).fromTo(we,.8,1):Je.beforeClearStyles([we]).fromTo("transform",`translateX(${kt})`,`translateX(${st})`),te){const ot=ve(te).querySelector(".transition-effect");if(ot){const De=ot.querySelector(".transition-cover"),$e=ot.querySelector(".transition-shadow"),Xe=(0,a.c)(),at=(0,a.c)(),gt=(0,a.c)();Xe.addElement(ot).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),at.addElement(De).beforeClearStyles([we]).fromTo(we,0,.1),gt.addElement($e).beforeClearStyles([we]).fromTo(we,.03,.7),Xe.addAnimation([at,gt]),Je.addAnimation([Xe])}}const Ot=rt.querySelector("ion-header.header-collapse-condense"),{forward:Wt,backward:ze}=((Ue,Qe,nt,Oe,we)=>{const dt=be(Oe,nt),st=ge(we),ht=ge(Oe),yt=be(we,nt),kt=null!==dt&&null!==st&&!nt,je=null!==ht&&null!==yt&&nt;if(kt){const rt=st.getBoundingClientRect(),Ee=dt.getBoundingClientRect();oe(Ue,Qe,nt,st,rt,Ee),de(Ue,Qe,nt,dt,rt,Ee)}else if(je){const rt=ht.getBoundingClientRect(),Ee=yt.getBoundingClientRect();oe(Ue,Qe,nt,ht,rt,Ee),de(Ue,Qe,nt,yt,rt,Ee)}return{forward:kt,backward:je}})(Te,yt,Z,rt,Ee);if(Ie.forEach(ot=>{const De=(0,a.c)();De.addElement(ot),Te.addAnimation(De);const $e=(0,a.c)();$e.addElement(ot.querySelector("ion-title"));const Xe=(0,a.c)(),at=Array.from(ot.querySelectorAll("ion-buttons,[menuToggle]")),gt=ot.closest("ion-header"),ft=null==gt?void 0:gt.classList.contains("header-collapse-condense-inactive");let Ut;Ut=at.filter(Z?yn=>{const En=yn.classList.contains("buttons-collapse");return En&&!ft||!En}:yn=>!yn.classList.contains("buttons-collapse")),Xe.addElement(Ut);const Nt=(0,a.c)();Nt.addElement(ot.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const cn=(0,a.c)();cn.addElement(ve(ot).querySelector(".toolbar-background"));const un=(0,a.c)(),Jn=ot.querySelector("ion-back-button");if(Jn&&un.addElement(Jn),De.addAnimation([$e,Xe,Nt,cn,un]),Xe.fromTo(we,.01,1),Nt.fromTo(we,.01,1),Z)ft||$e.fromTo("transform",`translateX(${je})`,`translateX(${st})`).fromTo(we,.01,1),Nt.fromTo("transform",`translateX(${je})`,`translateX(${st})`),un.fromTo(we,.01,1);else if(Ot||$e.fromTo("transform",`translateX(${kt})`,`translateX(${st})`).fromTo(we,.01,1),Nt.fromTo("transform",`translateX(${kt})`,`translateX(${st})`),cn.beforeClearStyles([we,"transform"]),(null==gt?void 0:gt.translucent)?cn.fromTo("transform",yt?"translateX(-100%)":"translateX(100%)","translateX(0px)"):cn.fromTo(we,.01,"var(--opacity)"),Wt||un.fromTo(we,.01,1),Jn&&!Wt){const En=(0,a.c)();En.addElement(ve(Jn).querySelector(".button-text")).fromTo("transform",yt?"translateX(-100px)":"translateX(100px)","translateX(0px)"),De.addAnimation(En)}}),Ee){const ot=(0,a.c)(),De=Ee.querySelector(":scope > ion-content"),$e=Ee.querySelectorAll(":scope > ion-header > ion-toolbar"),Xe=Ee.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(De||0!==$e.length||0!==Xe.length?(ot.addElement(De),ot.addElement(Xe)):ot.addElement(Ee.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Te.addAnimation(ot),Z){ot.beforeClearStyles([we]).fromTo("transform",`translateX(${st})`,yt?"translateX(-100%)":"translateX(100%)");const at=(0,se.g)(Ee);Te.afterAddWrite(()=>{"normal"===Te.getDirection()&&at.style.setProperty("display","none")})}else ot.fromTo("transform",`translateX(${st})`,`translateX(${je})`).fromTo(we,1,.8);if(De){const at=ve(De).querySelector(".transition-effect");if(at){const gt=at.querySelector(".transition-cover"),ft=at.querySelector(".transition-shadow"),Ut=(0,a.c)(),Nt=(0,a.c)(),cn=(0,a.c)();Ut.addElement(at).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Nt.addElement(gt).beforeClearStyles([we]).fromTo(we,.1,0),cn.addElement(ft).beforeClearStyles([we]).fromTo(we,.7,.03),Ut.addAnimation([Nt,cn]),ot.addAnimation([Ut])}}$e.forEach(at=>{const gt=(0,a.c)();gt.addElement(at);const ft=(0,a.c)();ft.addElement(at.querySelector("ion-title"));const Ut=(0,a.c)(),Nt=at.querySelectorAll("ion-buttons,[menuToggle]"),cn=at.closest("ion-header"),un=null==cn?void 0:cn.classList.contains("header-collapse-condense-inactive"),Jn=Array.from(Nt).filter(er=>{const qt=er.classList.contains("buttons-collapse");return qt&&!un||!qt});Ut.addElement(Jn);const yn=(0,a.c)(),En=at.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");En.length>0&&yn.addElement(En);const vr=(0,a.c)();vr.addElement(ve(at).querySelector(".toolbar-background"));const Tr=(0,a.c)(),Wr=at.querySelector("ion-back-button");if(Wr&&Tr.addElement(Wr),gt.addAnimation([ft,Ut,yn,Tr,vr]),Te.addAnimation(gt),Tr.fromTo(we,.99,0),Ut.fromTo(we,.99,0),yn.fromTo(we,.99,0),Z){if(un||ft.fromTo("transform",`translateX(${st})`,yt?"translateX(-100%)":"translateX(100%)").fromTo(we,.99,0),yn.fromTo("transform",`translateX(${st})`,yt?"translateX(-100%)":"translateX(100%)"),vr.beforeClearStyles([we,"transform"]),(null==cn?void 0:cn.translucent)?vr.fromTo("transform","translateX(0px)",yt?"translateX(-100%)":"translateX(100%)"):vr.fromTo(we,"var(--opacity)",0),Wr&&!ze){const qt=(0,a.c)();qt.addElement(ve(Wr).querySelector(".button-text")).fromTo("transform",`translateX(${st})`,`translateX(${(yt?-124:124)+"px"})`),gt.addAnimation(qt)}}else un||ft.fromTo("transform",`translateX(${st})`,`translateX(${je})`).fromTo(we,.99,0).afterClearStyles([dt,we]),yn.fromTo("transform",`translateX(${st})`,`translateX(${je})`).afterClearStyles([dt,we]),Tr.afterClearStyles([we]),ft.afterClearStyles([we]),Ut.afterClearStyles([we])})}return Te}catch(Oe){throw Oe}}},1369:(on,ut,H)=>{"use strict";H.r(ut),H.d(ut,{mdTransitionAnimation:()=>Ne});var a=H(5942),se=H(664);H(3457),H(1308);const Ne=(fe,ve)=>{var ge,be,ue;const pe="back"===ve.direction,Qe=ve.leavingEl,nt=(0,se.g)(ve.enteringEl),Oe=nt.querySelector("ion-toolbar"),we=(0,a.c)();if(we.addElement(nt).fill("both").beforeRemoveClass("ion-page-invisible"),pe?we.duration((null!==(ge=ve.duration)&&void 0!==ge?ge:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):we.duration((null!==(be=ve.duration)&&void 0!==be?be:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Oe){const dt=(0,a.c)();dt.addElement(Oe),we.addAnimation(dt)}if(Qe&&pe){we.duration((null!==(ue=ve.duration)&&void 0!==ue?ue:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const dt=(0,a.c)();dt.addElement((0,se.g)(Qe)).onFinish(st=>{1===st&&dt.elements.length>0&&dt.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),we.addAnimation(dt)}return we}},4414:(on,ut,H)=>{"use strict";H.d(ut,{B:()=>De,a:()=>ge,b:()=>be,c:()=>pe,d:()=>Z,e:()=>Qe,f:()=>he,g:()=>Je,h:()=>fe,i:()=>Wt,j:()=>we,k:()=>rt,l:()=>ue,m:()=>de,s:()=>ot});var a=H(5861),se=H(9658),z=H(7593),Le=H(5730);let Ne=0;const fe=new WeakMap,ve=$e=>({create:Xe=>nt($e,Xe),dismiss:(Xe,at,gt)=>kt(document,Xe,at,$e,gt),getTop:()=>(0,a.Z)(function*(){return rt(document,$e)})()}),ge=ve("ion-alert"),be=ve("ion-action-sheet"),ue=ve("ion-loading"),de=ve("ion-modal"),pe=ve("ion-popover"),Qe=$e=>{"undefined"!=typeof document&&yt(document);const Xe=Ne++;$e.overlayIndex=Xe,$e.hasAttribute("id")||($e.id=`ion-overlay-${Xe}`)},nt=($e,Xe)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined($e).then(()=>{const at=document.createElement($e);return at.classList.add("overlay-hidden"),Object.assign(at,Object.assign(Object.assign({},Xe),{hasController:!0})),Ie(document).appendChild(at),new Promise(gt=>(0,Le.c)(at,gt))}):Promise.resolve(),Oe='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',we=($e,Xe)=>{let at=$e.querySelector(Oe);const gt=null==at?void 0:at.shadowRoot;gt&&(at=gt.querySelector(Oe)||at),at?(0,Le.f)(at):Xe.focus()},st=($e,Xe)=>{const at=Array.from($e.querySelectorAll(Oe));let gt=at.length>0?at[at.length-1]:null;const ft=null==gt?void 0:gt.shadowRoot;ft&&(gt=ft.querySelector(Oe)||gt),gt?gt.focus():Xe.focus()},yt=$e=>{0===Ne&&(Ne=1,$e.addEventListener("focus",Xe=>{(($e,Xe)=>{const at=rt(Xe,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),gt=$e.target;at&&gt&&!at.classList.contains("ion-disable-focus-trap")&&(at.shadowRoot?(()=>{if(at.contains(gt))at.lastFocus=gt;else{const Nt=at.lastFocus;we(at,at),Nt===Xe.activeElement&&st(at,at),at.lastFocus=Xe.activeElement}})():(()=>{if(at===gt)at.lastFocus=void 0;else{const Nt=(0,Le.g)(at);if(!Nt.contains(gt))return;const cn=Nt.querySelector(".ion-overlay-wrapper");if(!cn)return;if(cn.contains(gt))at.lastFocus=gt;else{const un=at.lastFocus;we(cn,at),un===Xe.activeElement&&st(cn,at),at.lastFocus=Xe.activeElement}}})())})(Xe,$e)},!0),$e.addEventListener("ionBackButton",Xe=>{const at=rt($e);null!=at&&at.backdropDismiss&&Xe.detail.register(z.OVERLAY_BACK_BUTTON_PRIORITY,()=>at.dismiss(void 0,De))}),$e.addEventListener("keyup",Xe=>{if("Escape"===Xe.key){const at=rt($e);null!=at&&at.backdropDismiss&&at.dismiss(void 0,De)}}))},kt=($e,Xe,at,gt,ft)=>{const Ut=rt($e,gt,ft);return Ut?Ut.dismiss(Xe,at):Promise.reject("overlay does not exist")},rt=($e,Xe,at)=>{const gt=(($e,Xe)=>(void 0===Xe&&(Xe="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from($e.querySelectorAll(Xe)).filter(at=>at.overlayIndex>0)))($e,Xe).filter(ft=>!($e=>$e.classList.contains("overlay-hidden"))(ft));return void 0===at?gt[gt.length-1]:gt.find(ft=>ft.id===at)},Ee=($e=!1)=>{const at=Ie(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!at||($e?at.setAttribute("aria-hidden","true"):at.removeAttribute("aria-hidden"))},Z=function(){var $e=(0,a.Z)(function*(Xe,at,gt,ft,Ut){var Nt,cn;if(Xe.presented)return;Ee(!0),Xe.presented=!0,Xe.willPresent.emit(),null===(Nt=Xe.willPresentShorthand)||void 0===Nt||Nt.emit();const un=(0,se.b)(Xe),Jn=Xe.enterAnimation?Xe.enterAnimation:se.c.get(at,"ios"===un?gt:ft);(yield Te(Xe,Jn,Xe.el,Ut))&&(Xe.didPresent.emit(),null===(cn=Xe.didPresentShorthand)||void 0===cn||cn.emit()),"ION-TOAST"!==Xe.el.tagName&&te(Xe.el),Xe.keyboardClose&&(null===document.activeElement||!Xe.el.contains(document.activeElement))&&Xe.el.focus()});return function(at,gt,ft,Ut,Nt){return $e.apply(this,arguments)}}(),te=function(){var $e=(0,a.Z)(function*(Xe){let at=document.activeElement;if(!at)return;const gt=null==at?void 0:at.shadowRoot;gt&&(at=gt.querySelector(Oe)||at),yield Xe.onDidDismiss(),at.focus()});return function(at){return $e.apply(this,arguments)}}(),he=function(){var $e=(0,a.Z)(function*(Xe,at,gt,ft,Ut,Nt,cn){var un,Jn;if(!Xe.presented)return!1;Ee(!1),Xe.presented=!1;try{Xe.el.style.setProperty("pointer-events","none"),Xe.willDismiss.emit({data:at,role:gt}),null===(un=Xe.willDismissShorthand)||void 0===un||un.emit({data:at,role:gt});const yn=(0,se.b)(Xe),En=Xe.leaveAnimation?Xe.leaveAnimation:se.c.get(ft,"ios"===yn?Ut:Nt);"gesture"!==gt&&(yield Te(Xe,En,Xe.el,cn)),Xe.didDismiss.emit({data:at,role:gt}),null===(Jn=Xe.didDismissShorthand)||void 0===Jn||Jn.emit({data:at,role:gt}),fe.delete(Xe),Xe.el.classList.add("overlay-hidden"),Xe.el.style.removeProperty("pointer-events")}catch(yn){console.error(yn)}return Xe.el.remove(),!0});return function(at,gt,ft,Ut,Nt,cn,un){return $e.apply(this,arguments)}}(),Ie=$e=>$e.querySelector("ion-app")||$e.body,Te=function(){var $e=(0,a.Z)(function*(Xe,at,gt,ft){gt.classList.remove("overlay-hidden");const Nt=at(Xe.el,ft);(!Xe.animated||!se.c.getBoolean("animated",!0))&&Nt.duration(0),Xe.keyboardClose&&Nt.beforeAddWrite(()=>{const un=gt.ownerDocument.activeElement;null!=un&&un.matches("input,ion-input, ion-textarea")&&un.blur()});const cn=fe.get(Xe)||[];return fe.set(Xe,[...cn,Nt]),yield Nt.play(),!0});return function(at,gt,ft,Ut){return $e.apply(this,arguments)}}(),Je=($e,Xe)=>{let at;const gt=new Promise(ft=>at=ft);return Ot($e,Xe,ft=>{at(ft.detail)}),gt},Ot=($e,Xe,at)=>{const gt=ft=>{(0,Le.b)($e,Xe,gt),at(ft)};(0,Le.a)($e,Xe,gt)},Wt=$e=>"cancel"===$e||$e===De,ze=$e=>$e(),ot=($e,Xe)=>{if("function"==typeof $e)return se.c.get("_zoneGate",ze)(()=>{try{return $e(Xe)}catch(gt){throw gt}})},De="backdrop"},2279:(on,ut,H)=>{"use strict";H.d(ut,{m:()=>Le});var a=H(9808),se=H(4153),z=H(5e3);let Le=(()=>{class Ne{}return Ne.\u0275fac=function(ve){return new(ve||Ne)},Ne.\u0275mod=z.oAB({type:Ne}),Ne.\u0275inj=z.cJS({imports:[a.ez,se.Pc]}),Ne})()},2261:(on,ut,H)=>{"use strict";var a=H(2313),se=H(5e3),z=H(4153);let Le=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=se.Xpm({type:i,selectors:[["app-root"]],decls:2,vars:0,template:function(t,o){1&t&&(se.TgZ(0,"ion-app"),se._UZ(1,"ion-router-outlet"),se.qZA())},dependencies:[z.dr,z.jP]}),i})();var Ne=H(4740);const fe=[{path:"",redirectTo:"portfolio",pathMatch:"full"},{path:"portfolio",loadChildren:()=>H.e(7048).then(H.bind(H,7048)).then(i=>i.HomePageModule)}];let ve=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=se.oAB({type:i}),i.\u0275inj=se.cJS({imports:[Ne.Bz.forRoot(fe,{preloadingStrategy:Ne.wm}),Ne.Bz]}),i})();var ge=H(2011),be=H(4941),ue=H(4586),de=H(353),oe=H(6498),pe=H(5254),Ue=H(1086),Qe=H(6351),nt=H(1059),Oe=H(3489);function we(){return i=>i.lift(new dt)}class dt{call(e,t){return t.subscribe(new st(e))}}class st extends Oe.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var ze,ht=H(4850),yt=H(2014),kt=H(5778),je=H(2198),rt=H(9808),Z=(H(9545),H(3942)),te=H(5861),he=H(9681),Ie=H(4859),Te=H(1877),Je=H(2090),Ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wt={},ot=ot||{},De=Ot||self;function $e(){}function Xe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function at(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ft="closure_uid_"+(1e9*Math.random()>>>0),Ut=0;function Nt(i,e,t){return i.call.apply(i.bind,arguments)}function cn(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,o),i.apply(e,h)}}return function(){return i.apply(e,arguments)}}function un(i,e,t){return(un=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nt:cn).apply(null,arguments)}function Jn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function yn(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,h,m){for(var w=Array(arguments.length-2),k=2;k<arguments.length;k++)w[k-2]=arguments[k];return e.prototype[h].apply(o,w)}}function En(){this.s=this.s,this.o=this.o}var Tr={};En.prototype.s=!1,En.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function gt(i){return Object.prototype.hasOwnProperty.call(i,ft)&&i[ft]||(i[ft]=++Ut)}(this);delete Tr[i]}},En.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wr=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function er(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function qt(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(Xe(o)){const h=i.length||0,m=o.length||0;i.length=h+m;for(let w=0;w<m;w++)i[h+w]=o[w]}else i.push(o)}}function Yn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Yn.prototype.h=function(){this.defaultPrevented=!0};var Qr=function(){if(!De.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{De.addEventListener("test",$e,e),De.removeEventListener("test",$e,e)}catch(t){}return i}();function Un(i){return/^[\s\xa0]*$/.test(i)}var nr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Nr(i,e){return i<e?-1:i>e?1:0}function an(){var i=De.navigator;return i&&(i=i.userAgent)?i:""}function ur(i){return-1!=an().indexOf(i)}function Tn(i){return Tn[" "](i),i}Tn[" "]=$e;var On,i,St=ur("Opera"),gr=ur("Trident")||ur("MSIE"),mr=ur("Edge"),wr=mr||gr,Lr=ur("Gecko")&&!(-1!=an().toLowerCase().indexOf("webkit")&&!ur("Edge"))&&!(ur("Trident")||ur("MSIE"))&&!ur("Edge"),Pn=-1!=an().toLowerCase().indexOf("webkit")&&!ur("Edge");function ki(){var i=De.document;return i?i.documentMode:void 0}e:{var Or="",cr=(i=an(),Lr?/rv:([^\);]+)(\)|;)/.exec(i):mr?/Edge\/([\d\.]+)/.exec(i):gr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Pn?/WebKit\/(\S+)/.exec(i):St?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(cr&&(Or=cr?cr[1]:""),gr){var jr=ki();if(null!=jr&&jr>parseFloat(Or)){On=String(jr);break e}}On=Or}var ai={};var Nn=De.document&&gr&&(ki()||parseInt(On,10))||void 0;function xn(i,e){if(Yn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Lr){e:{try{Tn(e.nodeName);var h=!0;break e}catch(m){}h=!1}h||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:jn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&xn.X.h.call(this)}}yn(xn,Yn);var jn={2:"touch",3:"pen",4:"mouse"};xn.prototype.h=function(){xn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function He(i,e,t,o,h){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=h,this.key=++Pe,this.ba=this.ea=!1}function pt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function et(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function hn(i){const e={};for(const t in i)e[t]=i[t];return e}const dn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dr(i,e){let t,o;for(let h=1;h<arguments.length;h++){for(t in o=arguments[h],o)i[t]=o[t];for(let m=0;m<dn.length;m++)t=dn[m],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Er(i){this.src=i,this.g={},this.h=0}function Sr(i,e){var t=e.type;if(t in i.g){var m,o=i.g[t],h=Wr(o,e);(m=0<=h)&&Array.prototype.splice.call(o,h,1),m&&(pt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function mt(i,e,t,o){for(var h=0;h<i.length;++h){var m=i[h];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==o)return h}return-1}Er.prototype.add=function(i,e,t,o,h){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var w=mt(i,e,o,h);return-1<w?(e=i[w],t||(e.ea=!1)):((e=new He(e,this.src,m,!!o,h)).ea=t,i.push(e)),e};var Be="closure_lm_"+(1e6*Math.random()|0),Me={};function Et(i,e,t,o,h){if(o&&o.once)return Vn(i,e,t,o,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Et(i,e[m],t,o,h);return null}return t=mi(t),i&&i[Ve]?i.N(e,t,at(o)?!!o.capture:!!o,h):Mt(i,e,t,!1,o,h)}function Mt(i,e,t,o,h,m){if(!e)throw Error("Invalid event type");var w=at(h)?!!h.capture:!!h,k=Br(i);if(k||(i[Be]=k=new Er(i)),(t=k.add(e,t,o,w,m)).proxy)return t;if(o=function Wn(){const e=kr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Qr||(h=w),void 0===h&&(h=!1),i.addEventListener(e.toString(),o,h);else if(i.attachEvent)i.attachEvent(Kn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Vn(i,e,t,o,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)Vn(i,e[m],t,o,h);return null}return t=mi(t),i&&i[Ve]?i.O(e,t,at(o)?!!o.capture:!!o,h):Mt(i,e,t,!0,o,h)}function tn(i,e,t,o,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)tn(i,e[m],t,o,h);else o=at(o)?!!o.capture:!!o,t=mi(t),i&&i[Ve]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=mt(m=i.g[e],t,o,h))&&(pt(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Br(i))&&(e=i.g[e.toString()],i=-1,e&&(i=mt(e,t,o,h)),(t=-1<i?e[i]:null)&&Sn(t))}function Sn(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Ve])Sr(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Kn(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Br(e))?(Sr(t,i),0==t.h&&(t.src=null,e[Be]=null)):pt(i)}}}function Kn(i){return i in Me?Me[i]:Me[i]="on"+i}function kr(i,e){if(i.ba)i=!0;else{e=new xn(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&Sn(i),i=t.call(o,e)}return i}function Br(i){return(i=i[Be])instanceof Er?i:null}var si="__closure_events_fn_"+(1e9*Math.random()>>>0);function mi(i){return"function"==typeof i?i:(i[si]||(i[si]=function(e){return i.handleEvent(e)}),i[si])}function Fn(){En.call(this),this.i=new Er(this),this.P=this,this.I=null}function Vr(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Yn(e,i);else if(e instanceof Yn)e.target=e.target||i;else{var h=e;dr(e=new Yn(o,i),h)}if(h=!0,t)for(var m=t.length-1;0<=m;m--){var w=e.g=t[m];h=li(w,o,!0,e)&&h}if(h=li(w=e.g=i,o,!0,e)&&h,h=li(w,o,!1,e)&&h,t)for(m=0;m<t.length;m++)h=li(w=e.g=t[m],o,!1,e)&&h}function li(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var w=e[m];if(w&&!w.ba&&w.capture==t){var k=w.listener,q=w.ha||w.src;w.ea&&Sr(i.i,w),h=!1!==k.call(q,o)&&h}}return h&&!o.defaultPrevented}yn(Fn,En),Fn.prototype[Ve]=!0,Fn.prototype.removeEventListener=function(i,e,t,o){tn(this,i,e,t,o)},Fn.prototype.M=function(){if(Fn.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)pt(t[o]);delete i.g[e],i.h--}}this.I=null},Fn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Fn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Xn=De.JSON.stringify;function Hi(){var i=Li;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ii,ui=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Gi,i=>i.reset());class Gi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Xr(i){De.setTimeout(()=>{throw i},0)}function _i(i,e){Ii||function fi(){var i=De.Promise.resolve(void 0);Ii=function(){i.then(ne)}}(),Ti||(Ii(),Ti=!0),Li.add(i,e)}var Ti=!1,Li=new class hi{constructor(){this.h=this.g=null}add(e,t){const o=ui.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function ne(){for(var i;i=Hi();){try{i.h.call(i.g)}catch(t){Xr(t)}var e=ui;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ti=!1}function Ce(i,e){Fn.call(this),this.h=i||1,this.g=e||De,this.j=un(this.lb,this),this.l=Date.now()}function Ze(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function it(i,e,t){if("function"==typeof i)t&&(i=un(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=un(i.handleEvent,i)}return 2147483647<Number(e)?-1:De.setTimeout(i,e||0)}function bt(i){i.g=it(()=>{i.g=null,i.i&&(i.i=!1,bt(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}yn(Ce,Fn),(ze=Ce.prototype).ca=!1,ze.R=null,ze.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Vr(this,"tick"),this.ca&&(Ze(this),this.start()))}},ze.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ze.M=function(){Ce.X.M.call(this),Ze(this),delete this.g};class ye extends En{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bt(this)}M(){super.M(),this.g&&(De.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qe(i){En.call(this),this.h=i,this.g={}}yn(qe,En);var _t=[];function Rt(i,e,t,o){Array.isArray(t)||(t&&(_t[0]=t.toString()),t=_t);for(var h=0;h<t.length;h++){var m=Et(e,t[h],o||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function zt(i){et(i.g,function(e,t){this.g.hasOwnProperty(t)&&Sn(e)},i),i.g={}}function pn(){this.g=!0}function zr(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tt(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var h=o[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var w=1;w<h.length;w++)h[w]=""}}}return Xn(t)}catch(k){return e}}(i,t)+(o?" "+o:"")})}qe.prototype.M=function(){qe.X.M.call(this),zt(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pn.prototype.Aa=function(){this.g=!1},pn.prototype.info=function(){};var Ye={},vt=null;function Vt(){return vt=vt||new Fn}function Ht(i){Yn.call(this,Ye.Pa,i)}function Xt(i){const e=Vt();Vr(e,new Ht(e,i))}function fn(i,e){Yn.call(this,Ye.STAT_EVENT,i),this.stat=e}function Ir(i){const e=Vt();Vr(e,new fn(e,i))}function zn(i,e){Yn.call(this,Ye.Qa,i),this.size=e}function Zi(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return De.setTimeout(function(){i()},e)}Ye.Pa="serverreachability",yn(Ht,Yn),Ye.STAT_EVENT="statevent",yn(fn,Yn),Ye.Qa="timingevent",yn(zn,Yn);var Ms={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Is={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ls(){}function Ar(){}ls.prototype.h=null;var Si,vi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function So(){Yn.call(this,"d")}function Qi(){Yn.call(this,"c")}function Bi(){}function Cs(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new qe(this),this.O=Gs,this.T=new Ce(i=wr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Qs}function Qs(){this.i=null,this.g="",this.h=!1}yn(So,Yn),yn(Qi,Yn),yn(Bi,ls),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},Si=new Bi;var Gs=45e3,Xi={},Ji={};function Wi(i,e,t){i.K=1,i.v=Ws(Cr(e)),i.s=t,i.P=!0,us(i,null)}function us(i,e){i.F=Date.now(),ro(i),i.A=Cr(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Os(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Qs,i.g=Ql(i.l,t?e:null,!i.s),0<i.N&&(i.L=new ye(un(i.La,i,i.g),i.N)),Rt(i.S,i.g,"readystatechange",i.ib),e=i.H?hn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Xt(1),function vn(i,e,t,o,h,m){i.info(function(){if(i.g)if(m)for(var w="",k=m.split("&"),q=0;q<k.length;q++){var ee=k[q].split("=");if(1<ee.length){var me=ee[0];ee=ee[1];var We=me.split("_");w=2<=We.length&&"type"==We[1]?w+(me+"=")+ee+"&":w+(me+"=redacted&")}}else w=null;else w=m;return"XMLHTTP REQ ("+o+") [attempt "+h+"]: "+e+"\n"+t+"\n"+w})}(i.j,i.u,i.A,i.m,i.U,i.s)}function cs(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function gs(i,e,t){let h,o=!0;for(;!i.I&&i.C<t.length;){if(h=ds(i,t),h==Ji){4==e&&(i.o=4,Ir(14),o=!1),zr(i.j,i.m,null,"[Incomplete Response]");break}if(h==Xi){i.o=4,Ir(15),zr(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}zr(i.j,i.m,h,null),Ds(i,h)}cs(i)&&h!=Ji&&h!=Xi&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ir(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),zs(e),e.K=!0,Ir(11))):(zr(i.j,i.m,t,"[Invalid Chunked Response]"),Kr(i),ar(i))}function ds(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ji:(t=Number(e.substring(t,o)),isNaN(t)?Xi:(o+=1)+t>e.length?Ji:(e=e.substr(o,t),i.C=o+t,e))}function ro(i){i.V=Date.now()+i.O,es(i,i.O)}function es(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Zi(un(i.gb,i),e)}function Mi(i){i.B&&(De.clearTimeout(i.B),i.B=null)}function ar(i){0==i.l.G||i.I||Yo(i.l,i)}function Kr(i){Mi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ze(i.T),zt(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Ds(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||V(t.h,i)))if(!i.J&&V(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch(ee){o=null}if(Array.isArray(o)&&3==o.length){var h=o;if(0==h[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Bs(t),ri(t)}qi(t),Ir(18)}}else t.Ba=h[1],0<t.Ba-t.T&&37500>h[2]&&t.L&&0==t.A&&!t.v&&(t.v=Zi(un(t.cb,t),6e3));if(1>=G(t.h)&&t.ja){try{t.ja()}catch(ee){}t.ja=void 0}}else As(t,11)}else if((i.J||t.g==i)&&Bs(t),!Un(e))for(h=t.Fa.g.parse(e),e=0;e<h.length;e++){let ee=h[e];if(t.T=ee[0],ee=ee[1],2==t.G)if("c"==ee[0]){t.I=ee[1],t.ka=ee[2];const me=ee[3];null!=me&&(t.ma=me,t.j.info("VER="+t.ma));const We=ee[4];null!=We&&(t.Ca=We,t.j.info("SVER="+t.Ca));const xt=ee[5];null!=xt&&"number"==typeof xt&&0<xt&&(t.J=o=1.5*xt,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const Qt=i.g;if(Qt){const nn=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nn){var m=o.h;m.g||-1==nn.indexOf("spdy")&&-1==nn.indexOf("quic")&&-1==nn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(b(m,m.h),m.h=null))}if(o.D){const Gn=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gn&&(o.za=Gn,Fr(o.F,o.D,Gn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var w=i;if((o=t).sa=Ia(o,o.H?o.ka:null,o.V),w.J){d(o.h,w);var k=w,q=o.J;q&&k.setTimeout(q),k.B&&(Mi(k),ro(k)),o.g=w}else Ro(o);0<t.i.length&&rs(t)}else"stop"!=ee[0]&&"close"!=ee[0]||As(t,7);else 3==t.G&&("stop"==ee[0]||"close"==ee[0]?"stop"==ee[0]?As(t,7):ni(t):"noop"!=ee[0]&&t.l&&t.l.wa(ee),t.A=0)}Xt(4)}catch(ee){}}function Pi(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Xe(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ci(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(Xe(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function Rs(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Xe(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),h=o.length,m=0;m<h;m++)e.call(void 0,o[m],t&&t[m],i)}(ze=Cs.prototype).setTimeout=function(i){this.O=i},ze.ib=function(i){i=i.target;const e=this.L;e&&3==ie(i)?e.l():this.La(i)},ze.La=function(i){try{if(i==this.g)e:{const me=ie(this.g);var e=this.g.Ea();const We=this.g.aa();if(!(3>me)&&(3!=me||wr||this.g&&(this.h.h||this.g.fa()||Fe(this.g)))){this.I||4!=me||7==e||Xt(8==e||0>=We?3:2),Mi(this);var t=this.g.aa();this.Y=t;t:if(cs(this)){var o=Fe(this.g);i="";var h=o.length,m=4==ie(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Kr(this),ar(this);var w="";break t}this.h.i=new De.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:m&&e==h-1});o.splice(0,h),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==t,function rr(i,e,t,o,h,m,w){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+m+" "+w})}(this.j,this.u,this.A,this.m,this.U,me,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var k,q=this.g;if((k=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Un(k)){var ee=k;break t}}ee=null}if(!(t=ee)){this.i=!1,this.o=3,Ir(12),Kr(this),ar(this);break e}zr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ds(this,t)}this.P?(gs(this,me,w),wr&&this.i&&3==me&&(Rt(this.S,this.T,"tick",this.hb),this.T.start())):(zr(this.j,this.m,w,null),Ds(this,w)),4==me&&Kr(this),this.i&&!this.I&&(4==me?Yo(this.l,this):(this.i=!1,ro(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,Ir(12)):(this.o=0,Ir(13)),Kr(this),ar(this)}}}catch(me){}},ze.hb=function(){if(this.g){var i=ie(this.g),e=this.g.fa();this.C<e.length&&(Mi(this),gs(this,i,e),this.i&&4!=i&&ro(this))}},ze.cancel=function(){this.I=!0,Kr(this)},ze.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function qr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xt(3),Ir(17)),Kr(this),this.o=2,ar(this)):es(this,this.V-i)};var Vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pi(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof pi){this.h=void 0!==e?e:i.h,Ts(this,i.j),this.s=i.s,this.g=i.g,hs(this,i.m),this.l=i.l,e=i.i;var t=new xo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Fs(this,t),this.o=i.o}else i&&(t=String(i).match(Vi))?(this.h=!!e,Ts(this,t[1]||"",!0),this.s=xr(t[2]||""),this.g=xr(t[3]||"",!0),hs(this,t[4]),this.l=xr(t[5]||"",!0),Fs(this,t[6]||"",!0),this.o=xr(t[7]||"")):(this.h=!!e,this.i=new xo(null,this.h))}function Cr(i){return new pi(i)}function Ts(i,e,t){i.j=t?xr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function hs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Fs(i,e,t){e instanceof xo?(i.i=e,function Ci(i,e){e&&!i.j&&(Ss(i),i.i=null,i.g.forEach(function(t,o){var h=o.toLowerCase();o!=h&&(Zt(this,o),Os(this,h,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Hn(e,qo)),i.i=new xo(e,i.h))}function Fr(i,e,t){i.i.set(e,t)}function Ws(i){return Fr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function xr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Hn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Js),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Js(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}pi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Hn(e,go,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Hn(e,go,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Hn(t,"/"==t.charAt(0)?Ao:Vo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Hn(t,Jr)),i.join("")};var go=/[#\/\?@]/g,Vo=/[#\?:]/g,Ao=/[#\?]/g,qo=/[#\?@]/g,Jr=/#/g;function xo(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ss(i){i.g||(i.g=new Map,i.h=0,i.i&&function Xs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),h=null;if(0<=o){var m=i[t].substring(0,o);h=i[t].substring(o+1)}else m=i[t];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zt(i,e){Ss(i),e=fs(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Dr(i,e){return Ss(i),e=fs(i,e),i.g.has(e)}function Os(i,e,t){Zt(i,e),0<t.length&&(i.i=null,i.g.set(fs(i,e),er(t)),i.h+=t.length)}function fs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ts(i){this.l=i||ns,i=De.PerformanceNavigationTiming?0<(i=De.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(De.g&&De.g.Ga&&De.g.Ga()&&De.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ze=xo.prototype).add=function(i,e){Ss(this),this.i=null,i=fs(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ze.forEach=function(i,e){Ss(this),this.g.forEach(function(t,o){t.forEach(function(h){i.call(e,h,o,this)},this)},this)},ze.oa=function(){Ss(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const h=i[o];for(let m=0;m<h.length;m++)t.push(e[o])}return t},ze.W=function(i){Ss(this);let e=[];if("string"==typeof i)Dr(this,i)&&(e=e.concat(this.g.get(fs(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},ze.set=function(i,e){return Ss(this),this.i=null,Dr(this,i=fs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ze.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const m=encodeURIComponent(String(o)),w=this.W(o);for(o=0;o<w.length;o++){var h=m;""!==w[o]&&(h+="="+encodeURIComponent(String(w[o]))),i.push(h)}}return this.i=i.join("&")};var ns=10;function eo(i){return!!i.h||!!i.g&&i.g.size>=i.j}function G(i){return i.h?1:i.g?i.g.size:0}function V(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function b(i,e){i.g?i.g.add(e):i.h=e}function d(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function I(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return er(i.i)}function y(){}function R(){this.g=new y}function Y(i,e,t){const o=t||"";try{Pi(i,function(h,m){let w=h;at(h)&&(w=Xn(h)),e.push(o+m+"="+encodeURIComponent(w))})}catch(h){throw e.push(o+"type="+encodeURIComponent("_badmap")),h}}function It(i,e,t,o,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(o)}catch(m){}}function Pt(i){this.l=i.ac||null,this.j=i.jb||!1}function rn(i,e){Fn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Mn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ts.prototype.cancel=function(){if(this.i=I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},y.prototype.stringify=function(i){return De.JSON.stringify(i,void 0)},y.prototype.parse=function(i){return De.JSON.parse(i,void 0)},yn(Pt,ls),Pt.prototype.g=function(){return new rn(this.l,this.j)},Pt.prototype.i=function(i){return function(){return i}}({}),yn(rn,Fn);var Mn=0;function yr(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Zn(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Mr(i)}function Mr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ze=rn.prototype).open=function(i,e){if(this.readyState!=Mn)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Mr(this)},ze.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||De).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zn(this)),this.readyState=Mn},ze.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Mr(this)),this.g&&(this.readyState=3,Mr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==De.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yr(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},ze.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Zn(this):Mr(this),3==this.readyState&&yr(this)}},ze.Va=function(i){this.g&&(this.response=this.responseText=i,Zn(this))},ze.Ua=function(i){this.g&&(this.response=i,Zn(this))},ze.ga=function(){this.g&&Zn(this)},ze.setRequestHeader=function(i,e){this.v.append(i,e)},ze.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ze.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(rn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ei=De.JSON.parse;function lr(i){Fn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Di,this.K=this.L=!1}yn(lr,Fn);var Di="",$i=/^https?$/i,Ls=["POST","PUT"];function Ai(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,io(i),X(i)}function io(i){i.D||(i.D=!0,Vr(i,"complete"),Vr(i,"error"))}function L(i){if(i.h&&void 0!==ot&&(!i.C[1]||4!=ie(i)||2!=i.aa()))if(i.v&&4==ie(i))it(i.Ha,0,i);else if(Vr(i,"readystatechange"),4==ie(i)){i.h=!1;try{const k=i.aa();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===k){var h=String(i.H).match(Vi)[1]||null;if(!h&&De.self&&De.self.location){var m=De.self.location.protocol;h=m.substr(0,m.length-1)}o=!$i.test(h?h.toLowerCase():"")}t=o}if(t)Vr(i,"complete"),Vr(i,"success");else{i.m=6;try{var w=2<ie(i)?i.g.statusText:""}catch(q){w=""}i.j=w+" ["+i.aa()+"]",io(i)}}finally{X(i)}}}function X(i,e){if(i.g){$(i);const t=i.g,o=i.C[0]?$e:null;i.g=null,i.C=null,e||Vr(i,"ready");try{t.onreadystatechange=o}catch(h){}}}function $(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(De.clearTimeout(i.A),i.A=null)}function ie(i){return i.g?i.g.readyState:0}function Fe(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Di:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Dt(i){let e="";return et(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function Lt(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Dt(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Fr(i,e,t))}function Rn(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function ti(i){this.Ca=0,this.i=[],this.j=new pn,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Rn("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Rn("baseRetryDelayMs",5e3,i),this.bb=Rn("retryDelaySeedMs",1e4,i),this.$a=Rn("forwardChannelMaxRetries",2,i),this.ta=Rn("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ts(i&&i.concurrentRequestLimit),this.Fa=new R,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ni(i){if(Zr(i),3==i.G){var e=i.U++,t=Cr(i.F);Fr(t,"SID",i.I),Fr(t,"RID",e),Fr(t,"TYPE","terminate"),mo(i,t),(e=new Cs(i,i.j,e,void 0)).K=2,e.v=Ws(Cr(t)),t=!1,De.navigator&&De.navigator.sendBeacon&&(t=De.navigator.sendBeacon(e.v.toString(),"")),!t&&De.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ql(e.l,null),e.g.da(e.v)),e.F=Date.now(),ro(e)}Ra(i)}function ri(i){i.g&&(zs(i),i.g.cancel(),i.g=null)}function Zr(i){ri(i),i.u&&(De.clearTimeout(i.u),i.u=null),Bs(i),i.h.cancel(),i.m&&("number"==typeof i.m&&De.clearTimeout(i.m),i.m=null)}function rs(i){eo(i.h)||i.m||(i.m=!0,_i(i.Ja,i),i.C=0)}function Ui(i,e){var t;t=e?e.m:i.U++;const o=Cr(i.F);Fr(o,"SID",i.I),Fr(o,"RID",t),Fr(o,"AID",i.T),mo(i,o),i.o&&i.s&&Lt(o,i.o,i.s),t=new Cs(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Mo(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),b(i.h,t),Wi(t,o,e)}function mo(i,e){i.ia&&et(i.ia,function(t,o){Fr(e,o,t)}),i.l&&Pi({},function(t,o){Fr(e,o,t)})}function Mo(i,e,t){t=Math.min(i.i.length,t);var o=i.l?un(i.l.Ra,i.l,i):null;e:{var h=i.i;let m=-1;for(;;){const w=["count="+t];-1==m?0<t?(m=h[0].h,w.push("ofs="+m)):m=0:w.push("ofs="+m);let k=!0;for(let q=0;q<t;q++){let ee=h[q].h;const me=h[q].g;if(ee-=m,0>ee)m=Math.max(0,h[q].h-100),k=!1;else try{Y(me,w,"req"+ee+"_")}catch(We){o&&o(me)}}if(k){o=w.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Ro(i){i.g||i.u||(i.Z=1,_i(i.Ia,i),i.A=0)}function qi(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Zi(un(i.Ia,i),Ni(i,i.A)),i.A++,0))}function zs(i){null!=i.B&&(De.clearTimeout(i.B),i.B=null)}function so(i){i.g=new Cs(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Cr(i.sa);Fr(e,"RID","rpc"),Fr(e,"SID",i.I),Fr(e,"CI",i.L?"0":"1"),Fr(e,"AID",i.T),Fr(e,"TYPE","xmlhttp"),mo(i,e),i.o&&i.s&&Lt(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Ws(Cr(e)),t.s=null,t.P=!0,us(t,i)}function Bs(i){null!=i.v&&(De.clearTimeout(i.v),i.v=null)}function Yo(i,e){var t=null;if(i.g==e){Bs(i),zs(i),i.g=null;var o=2}else{if(!V(i.h,e))return;t=e.D,d(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=i.C;Vr(o=Vt(),new zn(o,t,e,h)),rs(i)}else Ro(i);else if(3==(h=e.o)||0==h&&0<i.pa||!(1==o&&function yi(i,e){return!(G(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Zi(un(i.Ja,i,e),Ni(i,i.C)),i.C++,0)))}(i,e)||2==o&&qi(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),h){case 1:As(i,5);break;case 4:As(i,10);break;case 3:As(i,6);break;default:As(i,2)}}function Ni(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function As(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=un(i.kb,i);t||(t=new pi("//www.google.com/images/cleardot.gif"),De.location&&"http"==De.location.protocol||Ts(t,"https"),Ws(t)),function ke(i,e){const t=new pn;if(De.Image){const o=new Image;o.onload=Jn(It,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Jn(It,t,o,"TestLoadImage: error",!1,e),o.onabort=Jn(It,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Jn(It,t,o,"TestLoadImage: timeout",!1,e),De.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Ir(2);i.G=0,i.l&&i.l.va(e),Ra(i),Zr(i)}function Ra(i){if(i.G=0,i.la=[],i.l){const e=I(i.h);(0!=e.length||0!=i.i.length)&&(qt(i.la,e),qt(i.la,i.i),i.h.i.length=0,er(i.i),i.i.length=0),i.l.ua()}}function Ia(i,e,t){var o=t instanceof pi?Cr(t):new pi(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),hs(o,o.m);else{var h=De.location;o=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var m=new pi(null,void 0);o&&Ts(m,o),e&&(m.g=e),h&&hs(m,h),t&&(m.l=t),o=m}return e=i.za,(t=i.D)&&e&&Fr(o,t,e),Fr(o,"VER",i.ma),mo(i,o),o}function Ql(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t&&i.Da&&!i.ra?new Pt({jb:!0}):i.ra)).Ka(i.H),e}function _l(){}function Ko(){if(gr&&!(10<=Number(Nn)))throw Error("Environmental error: no available transport.")}function ks(i,e){Fn.call(this),this.g=new ti(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Un(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Un(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Zo(this)}function Wa(i){So.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Oa(){Qi.call(this),this.status=1}function Zo(i){this.g=i}(ze=lr.prototype).Ka=function(i){this.L=i},ze.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Si.g(),this.C=function Yr(i){return i.h||(i.h=i.i())}(this.u?this.u:Si),this.g.onreadystatechange=un(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void Ai(this,m)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var h in o)t.set(h,o[h]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const m of o.keys())t.set(m,o.get(m))}o=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),h=De.FormData&&i instanceof De.FormData,!(0<=Wr(Ls,e))||o||h||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,w]of t)this.g.setRequestHeader(m,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$(this),0<this.B&&((this.K=function zi(i){return gr&&function wn(){return function In(i){var e=ai;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=nr(String(On)).split("."),t=nr("9").split("."),o=Math.max(e.length,t.length);for(let w=0;0==i&&w<o;w++){var h=e[w]||"",m=t[w]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;i=Nr(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||Nr(0==h[2].length,0==m[2].length)||Nr(h[2],m[2]),h=h[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=un(this.qa,this)):this.A=it(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){Ai(this,m)}},ze.qa=function(){void 0!==ot&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},ze.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Vr(this,"complete"),Vr(this,"abort"),X(this))},ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),X(this,!0)),lr.X.M.call(this)},ze.Ha=function(){this.s||(this.F||this.v||this.l?L(this):this.fb())},ze.fb=function(){L(this)},ze.aa=function(){try{return 2<ie(this)?this.g.status:-1}catch(i){return-1}},ze.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},ze.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ei(e)}},ze.Ea=function(){return this.m},ze.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ze=ti.prototype).ma=8,ze.G=1,ze.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const h=new Cs(this,this.j,i,void 0);let m=this.s;if(this.S&&(m?(m=hn(m),dr(m,this.S)):m=this.S),null!==this.o||this.N||(h.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Mo(this,h,e),Fr(t=Cr(this.F),"RID",i),Fr(t,"CVER",22),this.D&&Fr(t,"X-HTTP-Session-Id",this.D),mo(this,t),m&&(this.N?e="headers="+encodeURIComponent(String(Dt(m)))+"&"+e:this.o&&Lt(t,this.o,m)),b(this.h,h),this.Ya&&Fr(t,"TYPE","init"),this.O?(Fr(t,"$req",e),Fr(t,"SID","null"),h.Z=!0,Wi(h,t,null)):Wi(h,t,e),this.G=2}}else 3==this.G&&(i?Ui(this,i):0==this.i.length||eo(this.h)||Ui(this))},ze.Ia=function(){if(this.u=null,so(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Zi(un(this.eb,this),i)}},ze.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ir(10),ri(this),so(this))},ze.cb=function(){null!=this.v&&(this.v=null,ri(this),qi(this),Ir(19))},ze.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Ir(2)):(this.j.info("Failed to ping google.com"),Ir(1))},(ze=_l.prototype).xa=function(){},ze.wa=function(){},ze.va=function(){},ze.ua=function(){},ze.Ra=function(){},Ko.prototype.g=function(i,e){return new ks(i,e)},yn(ks,Fn),ks.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Ir(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Ia(i,null,i.V),rs(i)},ks.prototype.close=function(){ni(this.g)},ks.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Xn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&rs(e)},ks.prototype.M=function(){this.g.l=null,delete this.j,ni(this.g),delete this.g,ks.X.M.call(this)},yn(Wa,So),yn(Oa,Qi),yn(Zo,_l),Zo.prototype.xa=function(){Vr(this.g,"a")},Zo.prototype.wa=function(i){Vr(this.g,new Wa(i))},Zo.prototype.va=function(i){Vr(this.g,new Oa(i))},Zo.prototype.ua=function(){Vr(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,Is.COMPLETE="complete",Ar.EventType=vi,vi.OPEN="a",vi.CLOSE="b",vi.ERROR="c",vi.MESSAGE="d",Fn.prototype.listen=Fn.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.Oa,lr.prototype.getLastErrorCode=lr.prototype.Ea,lr.prototype.getStatus=lr.prototype.aa,lr.prototype.getResponseJson=lr.prototype.Sa,lr.prototype.getResponseText=lr.prototype.fa,lr.prototype.send=lr.prototype.da,lr.prototype.setWithCredentials=lr.prototype.Ka;var Xl=Wt.createWebChannelTransport=function(){return new Ko},xs=Wt.getStatEventTarget=function(){return Vt()},$o=Wt.ErrorCode=Ms,za=Wt.EventType=Is,ca=Wt.Event=Ye,Ei=Wt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},da=Wt.FetchXmlHttpFactory=Pt,yo=Wt.WebChannel=Ar,qa=Wt.XhrIo=lr;const ms="@firebase/firestore";class bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let to="9.12.1";const oo=new Te.Yd("@firebase/firestore");function _o(){return oo.logLevel}function sn(i,...e){if(oo.logLevel<=Te.in.DEBUG){const t=e.map(fa);oo.debug(`Firestore (${to}): ${i}`,...t)}}function Ri(i,...e){if(oo.logLevel<=Te.in.ERROR){const t=e.map(fa);oo.error(`Firestore (${to}): ${i}`,...t)}}function ha(i,...e){if(oo.logLevel<=Te.in.WARN){const t=e.map(fa);oo.warn(`Firestore (${to}): ${i}`,...t)}}function fa(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function $n(i="Unexpected state"){const e=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: `+i;throw Ri(e),new Error(e)}function ir(i,e){i||$n()}function An(i,e){return i}const Ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class en extends Je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ys{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ol{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ca{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bi.UNAUTHENTICATED))}shutdown(){}}class Da{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ml{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let h=this.i;const m=ee=>this.i!==h?(h=this.i,t(ee)):Promise.resolve();let w=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new ys,e.enqueueRetryable(()=>m(this.currentUser))};const k=()=>{const ee=w;e.enqueueRetryable((0,te.Z)(function*(){yield ee.promise,yield m(o.currentUser)}))},q=ee=>{sn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ee,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(ee=>q(ee)),setTimeout(()=>{if(!this.auth){const ee=this.t.getImmediate({optional:!0});ee?q(ee):(sn("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new ys)}},0),k()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(sn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ir("string"==typeof o.accessToken),new ol(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ir(null===e||"string"==typeof e),new bi(e)}}class Rl{constructor(e,t,o,h){this.h=e,this.l=t,this.m=o,this.g=h,this.type="FirstParty",this.user=bi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ir(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ol{constructor(e,t,o,h){this.h=e,this.l=t,this.m=o,this.g=h}getToken(){return Promise.resolve(new Rl(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ya{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pa{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=m=>{null!=m.error&&sn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const w=m.token!==this.A;return this.A=m.token,sn("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>o(m))};const h=m=>{sn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?h(m):sn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ir("string"==typeof t.token),this.A=t.token,new Ya(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ao(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Oo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const h=ao(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<t&&(o+=e.charAt(h[m]%e.length))}return o}}function br(i,e){return i<e?-1:i>e?1:0}function ko(i,e,t){return i.length===e.length&&i.every((o,h)=>t(o,e[h]))}function ka(i){return i+"\0"}class Pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new en(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new en(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new en(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new en(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pr.fromMillis(Date.now())}static fromDate(e){return Pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Pr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?br(this.nanoseconds,e.nanoseconds):br(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class or{constructor(e){this.timestamp=e}static fromTimestamp(e){return new or(e)}static min(){return new or(new Pr(0,0))}static max(){return new or(new Pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qo{constructor(e,t,o){void 0===t?t=0:t>e.length&&$n(),void 0===o?o=e.length-t:o>e.length-t&&$n(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Qo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qo?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let h=0;h<o;h++){const m=e.get(h),w=t.get(h);if(m<w)return-1;if(m>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qn extends Qo{construct(e,t,o){return new Qn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new en(Ft.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(h=>h.length>0))}return new Qn(t)}static emptyPath(){return new Qn([])}}const Pl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bs extends Qo{construct(e,t,o){return new bs(e,t,o)}static isValidIdentifier(e){return Pl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bs(["__name__"])}static fromServerFormat(e){const t=[];let o="",h=0;const m=()=>{if(0===o.length)throw new en(Ft.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let w=!1;for(;h<e.length;){const k=e[h];if("\\"===k){if(h+1===e.length)throw new en(Ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const q=e[h+1];if("\\"!==q&&"."!==q&&"`"!==q)throw new en(Ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=q,h+=2}else"`"===k?(w=!w,h++):"."!==k||w?(o+=k,h++):(m(),h++)}if(m(),w)throw new en(Ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bs(t)}static emptyPath(){return new bs([])}}class Cn{constructor(e){this.path=e}static fromPath(e){return new Cn(Qn.fromString(e))}static fromName(e){return new Cn(Qn.fromString(e).popFirst(5))}static empty(){return new Cn(Qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Cn(new Qn(e.slice()))}}class Nl{constructor(e,t,o,h){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=h}}function gu(i){return i.fields.find(e=>2===e.kind)}function Pa(i){return i.fields.filter(e=>2!==e.kind)}Nl.UNKNOWN_ID=-1;class Xo{constructor(e,t){this.fieldPath=e,this.kind=t}}class al{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new al(0,ps.min())}}function Ps(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,h=or.fromTimestamp(1e9===o?new Pr(t+1,0):new Pr(t,o));return new ps(h,Cn.empty(),e)}function Ka(i){return new ps(i.readTime,i.key,-1)}class ps{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new ps(or.min(),Cn.empty(),-1)}static max(){return new ps(or.max(),Cn.empty(),-1)}}function El(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Cn.comparator(i.documentKey,e.documentKey),0!==t?t:br(i.largestBatchId,e.largestBatchId))}const Fl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ns(i){return ll.apply(this,arguments)}function ll(){return ll=(0,te.Z)(function*(i){if(i.code!==Ft.FAILED_PRECONDITION||i.message!==Fl)throw i;sn("LocalStore","Unexpectedly lost primary lease")}),ll.apply(this,arguments)}class At{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$n(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new At((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(t,m).next(o,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof At?t:At.resolve(t)}catch(t){return At.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):At.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):At.reject(t)}static resolve(e){return new At((t,o)=>{t(e)})}static reject(e){return new At((t,o)=>{o(e)})}static waitFor(e){return new At((t,o)=>{let h=0,m=0,w=!1;e.forEach(k=>{++h,k.next(()=>{++m,w&&m===h&&t()},q=>o(q))}),w=!0,m===h&&t()})}static or(e){let t=At.resolve(!1);for(const o of e)t=t.next(h=>h?At.resolve(h):o());return t}static forEach(e,t){const o=[];return e.forEach((h,m)=>{o.push(t.call(this,h,m))}),this.waitFor(o)}static mapArray(e,t){return new At((o,h)=>{const m=e.length,w=new Array(m);let k=0;for(let q=0;q<m;q++){const ee=q;t(e[ee]).next(me=>{w[ee]=me,++k,k===m&&o(w)},me=>h(me))}})}static doWhile(e,t){return new At((o,h)=>{const m=()=>{!0===e()?t().next(()=>{m()},h):o()};m()})}}class Po{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ys,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ga(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const h=Za(o.target.error);this.P.reject(new ga(e,h))}}static open(e,t,o,h){try{return new Po(t,e.transaction(h,o))}catch(m){throw new ga(t,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(sn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jo(t)}}class vo{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===vo.D((0,Je.z$)())&&Ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return sn("SimpleDb","Removing database:",e),Eo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Je.hl)())return!1;if(vo.N())return!0;const e=(0,Je.z$)(),t=vo.D(e),o=0<t&&t<10,h=vo.k(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,te.Z)(function*(){return t.db||(sn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,h)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=w=>{o(w.target.result)},m.onblocked=()=>{h(new ga(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=w=>{const k=w.target.error;h("VersionError"===k.name?new en(Ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new en(Ft.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new ga(e,k))},m.onupgradeneeded=w=>{sn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.S.$(w.target.result,m.transaction,w.oldVersion,t.version).next(()=>{sn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,h){var m=this;return(0,te.Z)(function*(){const w="readonly"===t;let k=0;for(;;){++k;try{m.db=yield m.F(e);const q=Po.open(m.db,e,w?"readonly":"readwrite",o),ee=h(q).next(me=>(q.V(),me)).catch(me=>(q.abort(me),At.reject(me))).toPromise();return ee.catch(()=>{}),yield q.v,ee}catch(q){const ee=q,me="FirebaseError"!==ee.name&&k<3;if(sn("SimpleDb","Transaction failed with error:",ee.message,"Retrying:",me),m.close(),!me)return Promise.reject(ee)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Jl{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Eo(this.U.delete())}}class ga extends en{constructor(e,t){super(Ft.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uo(i){return"IndexedDbTransactionError"===i.name}class jo{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(sn("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(sn("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Eo(o)}add(e){return sn("SimpleDb","ADD",this.store.name,e,e),Eo(this.store.add(e))}get(e){return Eo(this.store.get(e)).next(t=>(void 0===t&&(t=null),sn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return sn("SimpleDb","DELETE",this.store.name,e),Eo(this.store.delete(e))}count(){return sn("SimpleDb","COUNT",this.store.name),Eo(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const h=this.cursor(o),m=[];return this.H(h,(w,k)=>{m.push(k)}).next(()=>m)}{const h=this.store.getAll(o.range);return new At((m,w)=>{h.onerror=k=>{w(k.target.error)},h.onsuccess=k=>{m(k.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new At((h,m)=>{o.onerror=w=>{m(w.target.error)},o.onsuccess=w=>{h(w.target.result)}})}Y(e,t){sn("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const h=this.cursor(o);return this.H(h,(m,w,k)=>k.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const h=this.cursor(o);return this.H(h,t)}tt(e){const t=this.cursor({});return new At((o,h)=>{t.onerror=m=>{const w=Za(m.target.error);h(w)},t.onsuccess=m=>{const w=m.target.result;w?e(w.primaryKey,w.value).next(k=>{k?w.continue():o()}):o()}})}H(e,t){const o=[];return new At((h,m)=>{e.onerror=w=>{m(w.target.error)},e.onsuccess=w=>{const k=w.target.result;if(!k)return void h();const q=new Jl(k),ee=t(k.primaryKey,k.value,q);if(ee instanceof At){const me=ee.catch(We=>(q.done(),At.reject(We)));o.push(me)}q.isDone?h():null===q.G?k.continue():k.continue(q.G)}}).next(()=>At.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Eo(i){return new At((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const h=Za(o.target.error);t(h)}})}let Vs=!1;function Za(i){const e=vo.D((0,Je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new en("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vs||(Vs=!0,setTimeout(()=>{throw o},0)),o}}return i}class Na{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;sn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,te.Z)(function*(){t.task=null;try{sn("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Uo(o)?sn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Ns(o)}yield t.nt(6e4)}))}}class Uu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let h=t,m=!0;return At.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!o.has(w))return sn("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,h).next(k=>{h-=k,o.add(w)});m=!1})).next(()=>t-h)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,o).next(m=>{const w=m.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(h,m)).next(k=>(sn("IndexBackiller",`Updating offset: ${k}`),this.localStore.indexManager.updateCollectionGroup(e,t,k))).next(()=>w.size)}))}ot(e,t){let o=e;return t.changes.forEach((h,m)=>{const w=Ka(m);El(w,o)>0&&(o=w)}),new ps(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class qs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function _u(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Qa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ll(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}qs.at=-1;class Oi{constructor(e,t){this.comparator=e,this.root=t||$s.EMPTY}insert(e,t){return new Oi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(e){return new Oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$s.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(0===h)return t+o.left.size;h<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uo(this.root,e,this.comparator,!0)}}class uo{constructor(e,t,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?o(e.key,t):1,t&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $s{constructor(e,t,o,h,m){this.key=e,this.value=t,this.color=null!=o?o:$s.RED,this.left=null!=h?h:$s.EMPTY,this.right=null!=m?m:$s.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,h,m){return new $s(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=h?h:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,t,o),null):0===m?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return $s.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return $s.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$s.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $n();const e=this.left.check();if(e!==this.right.check())throw $n();return e+(this.isRed()?0:1)}}$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new class{constructor(){this.size=0}get key(){throw $n()}get value(){throw $n()}get color(){throw $n()}get left(){throw $n()}get right(){throw $n()}copy(i,e,t,o,h){return this}insert(i,e,t){return new $s(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wi{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new A(this.data.getIterator())}getIteratorFrom(e){return new A(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=o.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wi(this.comparator);return t.data=e,t}}class A{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function x(i){return i.hasNext()?i.getNext():void 0}class C{constructor(e){this.fields=e,e.sort(bs.comparator)}static empty(){return new C([])}unionWith(e){let t=new wi(bs.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new C(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class j{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new j(t)}static fromUint8Array(e){const t=function(o){let h="";for(let m=0;m<o.length;++m)h+=String.fromCharCode(o[m]);return h}(e);return new j(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return br(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}j.EMPTY_BYTE_STRING=new j("");const re=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ae(i){if(ir(!!i),"string"==typeof i){let e=0;const t=re.exec(i);if(ir(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:xe(i.seconds),nanos:xe(i.nanos)}}function xe(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ct(i){return"string"==typeof i?j.fromBase64String(i):j.fromUint8Array(i)}function P(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function U(i){const e=i.mapValue.fields.__previous_value__;return P(e)?U(e):e}function J(i){const e=Ae(i.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}class _e{constructor(e,t,o,h,m,w,k,q){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=w,this.autoDetectLongPolling=k,this.useFetchStreams=q}}class Ke{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ke("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ke&&e.projectId===this.projectId&&e.database===this.database}}function wt(i){return null==i}function Yt(i){return 0===i&&1/i==-1/0}function gn(i){return"number"==typeof i&&Number.isInteger(i)&&!Yt(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Ln={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fr={nullValue:"NULL_VALUE"};function $r(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?P(i)?4:bc(i)?9007199254740991:10:$n()}function Dn(i,e){if(i===e)return!0;const t=$r(i);if(t!==$r(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return J(i).isEqual(J(e));case 3:return function(o,h){if("string"==typeof o.timestampValue&&"string"==typeof h.timestampValue&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const m=Ae(o.timestampValue),w=Ae(h.timestampValue);return m.seconds===w.seconds&&m.nanos===w.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,Ct(i.bytesValue).isEqual(Ct(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,h){return xe(o.geoPointValue.latitude)===xe(h.geoPointValue.latitude)&&xe(o.geoPointValue.longitude)===xe(h.geoPointValue.longitude)}(i,e);case 2:return function(o,h){if("integerValue"in o&&"integerValue"in h)return xe(o.integerValue)===xe(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const m=xe(o.doubleValue),w=xe(h.doubleValue);return m===w?Yt(m)===Yt(w):isNaN(m)&&isNaN(w)}return!1}(i,e);case 9:return ko(i.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:return function(o,h){const m=o.mapValue.fields||{},w=h.mapValue.fields||{};if(_u(m)!==_u(w))return!1;for(const k in m)if(m.hasOwnProperty(k)&&(void 0===w[k]||!Dn(m[k],w[k])))return!1;return!0}(i,e);default:return $n()}var h}function Yi(i,e){return void 0!==(i.values||[]).find(t=>Dn(t,e))}function _s(i,e){if(i===e)return 0;const t=$r(i),o=$r(e);if(t!==o)return br(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return br(i.booleanValue,e.booleanValue);case 2:return function(h,m){const w=xe(h.integerValue||h.doubleValue),k=xe(m.integerValue||m.doubleValue);return w<k?-1:w>k?1:w===k?0:isNaN(w)?isNaN(k)?0:-1:1}(i,e);case 3:return Jo(i.timestampValue,e.timestampValue);case 4:return Jo(J(i),J(e));case 5:return br(i.stringValue,e.stringValue);case 6:return function(h,m){const w=Ct(h),k=Ct(m);return w.compareTo(k)}(i.bytesValue,e.bytesValue);case 7:return function(h,m){const w=h.split("/"),k=m.split("/");for(let q=0;q<w.length&&q<k.length;q++){const ee=br(w[q],k[q]);if(0!==ee)return ee}return br(w.length,k.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,m){const w=br(xe(h.latitude),xe(m.latitude));return 0!==w?w:br(xe(h.longitude),xe(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,m){const w=h.values||[],k=m.values||[];for(let q=0;q<w.length&&q<k.length;++q){const ee=_s(w[q],k[q]);if(ee)return ee}return br(w.length,k.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===Ln.mapValue&&m===Ln.mapValue)return 0;if(h===Ln.mapValue)return 1;if(m===Ln.mapValue)return-1;const w=h.fields||{},k=Object.keys(w),q=m.fields||{},ee=Object.keys(q);k.sort(),ee.sort();for(let me=0;me<k.length&&me<ee.length;++me){const We=br(k[me],ee[me]);if(0!==We)return We;const xt=_s(w[k[me]],q[ee[me]]);if(0!==xt)return xt}return br(k.length,ee.length)}(i.mapValue,e.mapValue);default:throw $n()}}function Jo(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return br(i,e);const t=Ae(i),o=Ae(e),h=br(t.seconds,o.seconds);return 0!==h?h:br(t.nanos,o.nanos)}function bo(i){return ea(i)}function ea(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const h=Ae(o);return`time(${h.seconds},${h.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ct(i.bytesValue).toBase64():"referenceValue"in i?Cn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let h="[",m=!0;for(const w of o.values||[])m?m=!1:h+=",",h+=ea(w);return h+"]"}(i.arrayValue):"mapValue"in i?function(o){const h=Object.keys(o.fields||{}).sort();let m="{",w=!0;for(const k of h)w?w=!1:m+=",",m+=`${k}:${ea(o.fields[k])}`;return m+"}"}(i.mapValue):$n();var e}function No(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Fa(i){return!!i&&"integerValue"in i}function ta(i){return!!i&&"arrayValue"in i}function Xa(i){return!!i&&"nullValue"in i}function ma(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function La(i){return!!i&&"mapValue"in i}function ul(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Qa(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ul(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ul(i.arrayValue.values[t]);return e}return Object.assign({},i)}function bc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function wd(i){return"nullValue"in i?fr:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?No(Ke.empty(),Cn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:$n()}function wc(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?No(Ke.empty(),Cn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ln:$n()}function Id(i,e){const t=_s(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ic(i,e){const t=_s(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Fo{constructor(e){this.value=e}static empty(){return new Fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!La(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(t)}setAll(e){let t=bs.emptyPath(),o={},h=[];e.forEach((w,k)=>{if(!t.isImmediateParentOf(k)){const q=this.getFieldsMap(t);this.applyChanges(q,o,h),o={},h=[],t=k.popLast()}w?o[k.lastSegment()]=ul(w):h.push(k.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,o,h)}delete(e){const t=this.field(e.popLast());La(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=t.mapValue.fields[e.get(o)];La(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,o){Qa(t,(h,m)=>e[h]=m);for(const h of o)delete e[h]}clone(){return new Fo(ul(this.value))}}function Cd(i){const e=[];return Qa(i.fields,(t,o)=>{const h=new bs([t]);if(La(o)){const m=Cd(o.mapValue).fields;if(0===m.length)e.push(h);else for(const w of m)e.push(h.child(w))}else e.push(h)}),new C(e)}class is{constructor(e,t,o,h,m,w){this.key=e,this.documentType=t,this.version=o,this.readTime=h,this.data=m,this.documentState=w}static newInvalidDocument(e){return new is(e,0,or.min(),or.min(),Fo.empty(),0)}static newFoundDocument(e,t,o){return new is(e,1,t,or.min(),o,0)}static newNoDocument(e,t){return new is(e,2,t,or.min(),Fo.empty(),0)}static newUnknownDocument(e,t){return new is(e,3,t,or.min(),Fo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=or.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof is&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new is(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vu{constructor(e,t=null,o=[],h=[],m=null,w=null,k=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=w,this.endAt=k,this.ht=null}}function Bl(i,e=null,t=[],o=[],h=null,m=null,w=null){return new vu(i,e,t,o,h,m,w)}function bl(i){const e=An(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(h=o).field.canonicalString()+h.op.toString()+bo(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(h=o).field.canonicalString()+h.dir;var h}).join(","),wt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>bo(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>bo(o)).join(",")),e.ht=t}return e.ht}function cl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<i.orderBy.length;h++)if(!wu(i.orderBy[h],e.orderBy[h]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let h=0;h<i.filters.length;h++)if((t=i.filters[h]).op!==(o=e.filters[h]).op||!t.field.isEqual(o.field)||!Dn(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Iu(i.startAt,e.startAt)&&Iu(i.endAt,e.endAt)}function eu(i){return Cn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Cc(i,e){return i.filters.filter(t=>t instanceof co&&t.field.isEqual(e))}function Dc(i,e,t){let o=fr,h=!0;for(const m of Cc(i,e)){let w=fr,k=!0;switch(m.op){case"<":case"<=":w=wd(m.value);break;case"==":case"in":case">=":w=m.value;break;case">":w=m.value,k=!1;break;case"!=":case"not-in":w=fr}Id({value:o,inclusive:h},{value:w,inclusive:k})<0&&(o=w,h=k)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const w=t.position[m];Id({value:o,inclusive:h},{value:w,inclusive:t.inclusive})<0&&(o=w,h=t.inclusive);break}return{value:o,inclusive:h}}function Hu(i,e,t){let o=Ln,h=!0;for(const m of Cc(i,e)){let w=Ln,k=!0;switch(m.op){case">=":case">":w=wc(m.value),k=!1;break;case"==":case"in":case"<=":w=m.value;break;case"<":w=m.value,k=!1;break;case"!=":case"not-in":w=Ln}Ic({value:o,inclusive:h},{value:w,inclusive:k})>0&&(o=w,h=k)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const w=t.position[m];Ic({value:o,inclusive:h},{value:w,inclusive:t.inclusive})>0&&(o=w,h=t.inclusive);break}return{value:o,inclusive:h}}class co extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new Eu(e,t,o):"array-contains"===t?new gh(e,o):"in"===t?new ff(e,o):"not-in"===t?new nu(e,o):"array-contains-any"===t?new bu(e,o):new co(e,t,o)}static lt(e,t,o){return"in"===t?new tu(e,o):new Vl(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(_s(t,this.value)):null!==t&&$r(this.value)===$r(t)&&this.ft(_s(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $n()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Eu extends co{constructor(e,t,o){super(e,t,o),this.key=Cn.fromName(o.referenceValue)}matches(e){const t=Cn.comparator(e.key,this.key);return this.ft(t)}}class tu extends co{constructor(e,t){super(e,"in",t),this.keys=Dd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Vl extends co{constructor(e,t){super(e,"not-in",t),this.keys=Dd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dd(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Cn.fromName(o.referenceValue))}class gh extends co{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ta(t)&&Yi(t.arrayValue,this.value)}}class ff extends co{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yi(this.value.arrayValue,t)}}class nu extends co{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yi(this.value.arrayValue,t)}}class bu extends co{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ta(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Yi(this.value.arrayValue,o))}}class dl{constructor(e,t){this.position=e,this.inclusive=t}}class ru{constructor(e,t="asc"){this.field=e,this.dir=t}}function wu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function ya(i,e,t){let o=0;for(let h=0;h<i.position.length;h++){const m=e[h],w=i.position[h];if(o=m.field.isKeyField()?Cn.comparator(Cn.fromName(w.referenceValue),t.key):_s(w,t.data.field(m.field)),"desc"===m.dir&&(o*=-1),0!==o)break}return o}function Iu(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Dn(i.position[t],e.position[t]))return!1;return!0}class Ja{constructor(e,t=null,o=[],h=[],m=null,w="F",k=null,q=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=w,this.startAt=k,this.endAt=q,this._t=null,this.wt=null}}function Yc(i,e,t,o,h,m,w,k){return new Ja(i,e,t,o,h,m,w,k)}function wl(i){return new Ja(i)}function Cu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ho(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function iu(i){for(const e of i.filters)if(e.dt())return e.field;return null}function na(i){return null!==i.collectionGroup}function su(i){const e=An(i);if(null===e._t){e._t=[];const t=iu(e),o=Ho(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new ru(t)),e._t.push(new ru(bs.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e._t.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ru(bs.keyField(),m))}}}return e._t}function _a(i){const e=An(i);if(!e.wt)if("F"===e.limitType)e.wt=Bl(e.path,e.collectionGroup,su(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of su(e))t.push(new ru(m.field,"desc"===m.dir?"asc":"desc"));const o=e.endAt?new dl(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new dl(e.startAt.position,e.startAt.inclusive):null;e.wt=Bl(e.path,e.collectionGroup,t,e.filters,e.limit,o,h)}return e.wt}function Du(i,e,t){return new Ja(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Gu(i,e){return cl(_a(i),_a(e))&&i.limitType===e.limitType}function Ta(i){return`${bl(_a(i))}|lt:${i.limitType}`}function Wu(i){return`Query(target=${function ju(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${bo(o.value)}`;var o}).join(", ")}]`),wt(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>bo(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>bo(t)).join(",")),`Target(${e})`}(_a(i))}; limitType=${i.limitType})`}function Tc(i,e){return e.isFoundDocument()&&function(t,o){const h=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):Cn.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(i,e)&&function(t,o){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===o.data.field(h.field))return!1;return!0}(i,e)&&function(t,o){for(const h of t.filters)if(!h.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(h,m,w){const k=ya(h,m,w);return h.inclusive?k<=0:k<0}(t.startAt,su(t),o)||t.endAt&&!function(h,m,w){const k=ya(h,m,w);return h.inclusive?k>=0:k>0}(t.endAt,su(t),o)));var t,o}function Kc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function mh(i){return(e,t)=>{let o=!1;for(const h of su(i)){const m=ou(h,e,t);if(0!==m)return m;o=o||h.field.isKeyField()}return 0}}function ou(i,e,t){const o=i.field.isKeyField()?Cn.comparator(e.key,t.key):function(h,m,w){const k=m.data.field(h),q=w.data.field(h);return null!==k&&null!==q?_s(k,q):$n()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return $n()}}function Sc(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yt(e)?"-0":e}}function el(i){return{integerValue:""+i}}function Ba(i,e){return gn(e)?el(e):Sc(i,e)}class Tu{constructor(){this._=void 0}}function zu(i,e,t){return i instanceof hl?function(o,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(t,e):i instanceof Su?Au(i,e):i instanceof tl?yh(i,e):function(o,h){const m=Zc(o,h),w=Ac(m)+Ac(o.yt);return Fa(m)&&Fa(o.yt)?el(w):Sc(o.It,w)}(i,e)}function Td(i,e,t){return i instanceof Su?Au(i,e):i instanceof tl?yh(i,e):t}function Zc(i,e){return i instanceof qu?Fa(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class hl extends Tu{}class Su extends Tu{constructor(e){super(),this.elements=e}}function Au(i,e){const t=Sd(e);for(const o of i.elements)t.some(h=>Dn(h,o))||t.push(o);return{arrayValue:{values:t}}}class tl extends Tu{constructor(e){super(),this.elements=e}}function yh(i,e){let t=Sd(e);for(const o of i.elements)t=t.filter(h=>!Dn(h,o));return{arrayValue:{values:t}}}class qu extends Tu{constructor(e,t){super(),this.It=e,this.yt=t}}function Ac(i){return xe(i.integerValue||i.doubleValue)}function Sd(i){return ta(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Yu{constructor(e,t){this.field=e,this.transform=t}}class Ku{constructor(e,t){this.version=e,this.transformResults=t}}class vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class nl{}function Sa(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Il(i.key,vs.none()):new Aa(i.key,i.data,vs.none());{const t=i.data,o=Fo.empty();let h=new wi(bs.comparator);for(let m of e.fields)if(!h.has(m)){let w=t.field(m);null===w&&m.length>1&&(m=m.popLast(),w=t.field(m)),null===w?o.delete(m):o.set(m,w),h=h.add(m)}return new fl(i.key,o,new C(h.toArray()),vs.none())}}function _h(i,e,t){i instanceof Aa?function(o,h,m){const w=o.value.clone(),k=Qc(o.fieldTransforms,h,m.transformResults);w.setAll(k),h.convertToFoundDocument(m.version,w).setHasCommittedMutations()}(i,e,t):i instanceof fl?function(o,h,m){if(!au(o.precondition,h))return void h.convertToUnknownDocument(m.version);const w=Qc(o.fieldTransforms,h,m.transformResults),k=h.data;k.setAll(xc(o)),k.setAll(w),h.convertToFoundDocument(m.version,k).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Es(i,e,t,o){return i instanceof Aa?function(h,m,w,k){if(!au(h.precondition,m))return w;const q=h.value.clone(),ee=Xc(h.fieldTransforms,k,m);return q.setAll(ee),m.convertToFoundDocument(m.version,q).setHasLocalMutations(),null}(i,e,t,o):i instanceof fl?function(h,m,w,k){if(!au(h.precondition,m))return w;const q=Xc(h.fieldTransforms,k,m),ee=m.data;return ee.setAll(xc(h)),ee.setAll(q),m.convertToFoundDocument(m.version,ee).setHasLocalMutations(),null===w?null:w.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(me=>me.field))}(i,e,t,o):(w=t,au(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):w);var m,w}function lu(i,e){let t=null;for(const o of i.fieldTransforms){const h=e.data.field(o.field),m=Zc(o.transform,h||null);null!=m&&(null===t&&(t=Fo.empty()),t.set(o.field,m))}return t||null}function xd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&ko(t,o,(h,m)=>function Ad(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Su&&o instanceof Su||t instanceof tl&&o instanceof tl?ko(t.elements,o.elements,Dn):t instanceof qu&&o instanceof qu?Dn(t.yt,o.yt):t instanceof hl&&o instanceof hl);var t,o}(h,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class Aa extends nl{constructor(e,t,o,h=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class fl extends nl{constructor(e,t,o,h,m=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function xc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Qc(i,e,t){const o=new Map;ir(i.length===t.length);for(let h=0;h<t.length;h++){const m=i[h],w=m.transform,k=e.data.field(m.field);o.set(m.field,Td(w,k,t[h]))}return o}function Xc(i,e,t){const o=new Map;for(const h of i){const m=h.transform,w=t.data.field(h.field);o.set(h.field,zu(m,w,e))}return o}class Il extends nl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zu extends nl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xu{constructor(e){this.count=e}}var ho,gi;function Mu(i){switch(i){default:return $n();case Ft.CANCELLED:case Ft.UNKNOWN:case Ft.DEADLINE_EXCEEDED:case Ft.RESOURCE_EXHAUSTED:case Ft.INTERNAL:case Ft.UNAVAILABLE:case Ft.UNAUTHENTICATED:return!1;case Ft.INVALID_ARGUMENT:case Ft.NOT_FOUND:case Ft.ALREADY_EXISTS:case Ft.PERMISSION_DENIED:case Ft.FAILED_PRECONDITION:case Ft.ABORTED:case Ft.OUT_OF_RANGE:case Ft.UNIMPLEMENTED:case Ft.DATA_LOSS:return!0}}function Jc(i){if(void 0===i)return Ri("GRPC error has no .code"),Ft.UNKNOWN;switch(i){case ho.OK:return Ft.OK;case ho.CANCELLED:return Ft.CANCELLED;case ho.UNKNOWN:return Ft.UNKNOWN;case ho.DEADLINE_EXCEEDED:return Ft.DEADLINE_EXCEEDED;case ho.RESOURCE_EXHAUSTED:return Ft.RESOURCE_EXHAUSTED;case ho.INTERNAL:return Ft.INTERNAL;case ho.UNAVAILABLE:return Ft.UNAVAILABLE;case ho.UNAUTHENTICATED:return Ft.UNAUTHENTICATED;case ho.INVALID_ARGUMENT:return Ft.INVALID_ARGUMENT;case ho.NOT_FOUND:return Ft.NOT_FOUND;case ho.ALREADY_EXISTS:return Ft.ALREADY_EXISTS;case ho.PERMISSION_DENIED:return Ft.PERMISSION_DENIED;case ho.FAILED_PRECONDITION:return Ft.FAILED_PRECONDITION;case ho.ABORTED:return Ft.ABORTED;case ho.OUT_OF_RANGE:return Ft.OUT_OF_RANGE;case ho.UNIMPLEMENTED:return Ft.UNIMPLEMENTED;case ho.DATA_LOSS:return Ft.DATA_LOSS;default:return $n()}}(gi=ho||(ho={}))[gi.OK=0]="OK",gi[gi.CANCELLED=1]="CANCELLED",gi[gi.UNKNOWN=2]="UNKNOWN",gi[gi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gi[gi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gi[gi.NOT_FOUND=5]="NOT_FOUND",gi[gi.ALREADY_EXISTS=6]="ALREADY_EXISTS",gi[gi.PERMISSION_DENIED=7]="PERMISSION_DENIED",gi[gi.UNAUTHENTICATED=16]="UNAUTHENTICATED",gi[gi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gi[gi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gi[gi.ABORTED=10]="ABORTED",gi[gi.OUT_OF_RANGE=11]="OUT_OF_RANGE",gi[gi.UNIMPLEMENTED=12]="UNIMPLEMENTED",gi[gi.INTERNAL=13]="INTERNAL",gi[gi.UNAVAILABLE=14]="UNAVAILABLE",gi[gi.DATA_LOSS=15]="DATA_LOSS";class pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[h,m]of o)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),h=this.inner[o];if(void 0===h)return this.inner[o]=[[e,t]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return 1===o.length?delete this.inner[t]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,(t,o)=>{for(const[h,m]of o)e(h,m)})}isEmpty(){return Ll(this.inner)}size(){return this.innerSize}}const ed=new Oi(Cn.comparator);function Lo(){return ed}const Ru=new Oi(Cn.comparator);function Ys(...i){let e=Ru;for(const t of i)e=e.insert(t.key,t);return e}function $l(i){let e=Ru;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Go(){return wo()}function uu(){return wo()}function wo(){return new pl(i=>i.toString(),(i,e)=>i.isEqual(e))}const no=new Oi(Cn.comparator),cu=new wi(Cn.comparator);function Ur(...i){let e=cu;for(const t of i)e=e.add(t);return e}const du=new wi(br);function hu(){return du}class gl{constructor(e,t,o,h,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const h=new Map;return h.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new gl(or.min(),h,hu(),Lo(),Ur())}}class Qu{constructor(e,t,o,h,m){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Qu(o,t,Ur(),Ur(),Ur())}}class Cl{constructor(e,t,o,h){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=h}}class Xu{constructor(e,t){this.targetId=e,this.At=t}}class ra{constructor(e,t,o=j.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=h}}class Mc{constructor(){this.Rt=0,this.bt=Ju(),this.Pt=j.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ur(),t=Ur(),o=Ur();return this.bt.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:o=o.add(h);break;default:$n()}}),new Qu(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=Ju()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class td{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Lo(),this.qt=Ou(),this.Kt=new wi(br)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:$n()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,h)=>{this.Ht(h)&&t(h)})}Yt(e){const t=e.targetId,o=e.At.count,h=this.Xt(t);if(h){const m=h.target;if(eu(m))if(0===o){const w=new Cn(m.path);this.jt(t,w,is.newNoDocument(w,or.min()))}else ir(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((m,w)=>{const k=this.Xt(w);if(k){if(m.current&&eu(k.target)){const q=new Cn(k.target.path);null!==this.Ut.get(q)||this.ee(w,q)||this.jt(w,q,is.newNoDocument(q,e))}m.Dt&&(t.set(w,m.xt()),m.Nt())}});let o=Ur();this.qt.forEach((m,w)=>{let k=!0;w.forEachWhile(q=>{const ee=this.Xt(q);return!ee||2===ee.purpose||(k=!1,!1)}),k&&(o=o.add(m))}),this.Ut.forEach((m,w)=>w.setReadTime(e));const h=new gl(e,t,this.Kt,this.Ut,o);return this.Ut=Lo(),this.qt=Ou(),this.Kt=new wi(br),h}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const h=this.zt(e);this.ee(e,t)?h.kt(t,1):h.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Mc,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new wi(br),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||sn("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Mc),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Ou(){return new Oi(Cn.comparator)}function Ju(){return new Oi(Cn.comparator)}const fu={asc:"ASCENDING",desc:"DESCENDING"},Ks={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Rc{constructor(e,t){this.databaseId=e,this.gt=t}}function Ul(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nd(i,e){return i.gt?e.toBase64():e.toUint8Array()}function ml(i,e){return Ul(i,e.toTimestamp())}function ws(i){return ir(!!i),or.fromTimestamp(function(e){const t=Ae(e);return new Pr(t.seconds,t.nanos)}(i))}function va(i,e){return(t=i,new Qn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ec(i){const e=Qn.fromString(i);return ir(sd(e)),e}function tc(i,e){return va(i.databaseId,e.path)}function xa(i,e){const t=ec(e);if(t.get(1)!==i.databaseId.projectId)throw new en(Ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new en(Ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Cn(Rd(t))}function Md(i,e){return va(i.databaseId,e)}function rd(i){const e=ec(i);return 4===e.length?Qn.emptyPath():Rd(e)}function Dl(i){return new Qn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Rd(i){return ir(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function D(i,e,t){return{name:tc(i,e),fields:t.value.mapValue.fields}}function g(i,e,t){const o=xa(i,e.name),h=ws(e.updateTime),m=new Fo({mapValue:{fields:e.fields}}),w=is.newFoundDocument(o,h,m);return t&&w.setHasCommittedMutations(),t?w.setHasCommittedMutations():w}function Q(i,e){let t;if(e instanceof Aa)t={update:D(i,e.key,e.value)};else if(e instanceof Il)t={delete:tc(i,e.key)};else if(e instanceof fl)t={update:D(i,e.key,e.data),updateMask:Od(e.fieldMask)};else{if(!(e instanceof Zu))return $n();t={verify:tc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(h,m){const w=m.transform;if(w instanceof hl)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Su)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof tl)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof qu)return{fieldPath:m.field.canonicalString(),increment:w.yt};throw $n()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:ml(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:$n()),t;var h}function ce(i,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?vs.updateTime(ws(h.updateTime)):void 0!==h.exists?vs.exists(h.exists):vs.none():vs.none(),o=e.updateTransforms?e.updateTransforms.map(h=>function(m,w){let k=null;"setToServerValue"in w?(ir("REQUEST_TIME"===w.setToServerValue),k=new hl):"appendMissingElements"in w?k=new Su(w.appendMissingElements.values||[]):"removeAllFromArray"in w?k=new tl(w.removeAllFromArray.values||[]):"increment"in w?k=new qu(m,w.increment):$n();const q=bs.fromServerFormat(w.fieldPath);return new Yu(q,k)}(i,h)):[];var h;if(e.update){const h=xa(i,e.update.name),m=new Fo({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new C((e.updateMask.fieldPaths||[]).map(ee=>bs.fromServerFormat(ee)));return new fl(h,m,w,t,o)}return new Aa(h,m,t,o)}if(e.delete){const h=xa(i,e.delete);return new Il(h,t)}if(e.verify){const h=xa(i,e.verify);return new Zu(h,t)}return $n()}function jt(i,e){return{documents:[Md(i,e.path)]}}function _n(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Md(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Md(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const h=function(q){if(0===q.length)return;const ee=q.map(me=>function(We){if("=="===We.op){if(ma(We.value))return{unaryFilter:{field:jl(We.field),op:"IS_NAN"}};if(Xa(We.value))return{unaryFilter:{field:jl(We.field),op:"IS_NULL"}}}else if("!="===We.op){if(ma(We.value))return{unaryFilter:{field:jl(We.field),op:"IS_NOT_NAN"}};if(Xa(We.value))return{unaryFilter:{field:jl(We.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(We.field),op:Ma(We.op),value:We.value}}}(me));return 1===ee.length?ee[0]:{compositeFilter:{op:"AND",filters:ee}}}(e.filters);h&&(t.structuredQuery.where=h);const m=function(q){if(0!==q.length)return q.map(ee=>{return{field:jl((me=ee).field),direction:fo(me.dir)};var me})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const w=(ee=e.limit,i.gt||wt(ee)?ee:{value:ee});var ee,k,q;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(t.structuredQuery.endAt={before:!(q=e.endAt).inclusive,values:q.position}),t}function qn(i){let e=rd(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let h=null;if(o>0){ir(1===o);const me=t.from[0];me.allDescendants?h=me.collectionId:e=e.child(me.collectionId)}let m=[];t.where&&(m=_r(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(me=>{return new ru(Wo((We=me).field),function(xt){switch(xt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(We.direction));var We}));let k=null;t.limit&&(k=function(me){let We;return We="object"==typeof me?me.value:me,wt(We)?null:We}(t.limit));let q=null;var me;t.startAt&&(q=new dl((me=t.startAt).values||[],!!me.before));let ee=null;return t.endAt&&(ee=function(me){return new dl(me.values||[],!me.before)}(t.endAt)),Yc(e,h,w,m,k,"F",q,ee)}function _r(i){return i?void 0!==i.unaryFilter?[id(i)]:void 0!==i.fieldFilter?[nc(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>_r(e)).reduce((e,t)=>e.concat(t)):$n():[]}function fo(i){return fu[i]}function Ma(i){return Ks[i]}function jl(i){return{fieldPath:i.canonicalString()}}function Wo(i){return bs.fromServerFormat(i.fieldPath)}function nc(i){return co.create(Wo(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $n()}}(i.fieldFilter.op),i.fieldFilter.value)}function id(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Wo(i.unaryFilter.field);return co.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Wo(i.unaryFilter.field);return co.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wo(i.unaryFilter.field);return co.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Wo(i.unaryFilter.field);return co.create(h,"!=",{nullValue:"NULL_VALUE"});default:return $n()}}function Od(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sd(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function zo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Oc(e)),e=vh(i.get(t),e);return Oc(e)}function vh(i,e){let t=e;const o=i.length;for(let h=0;h<o;h++){const m=i.charAt(h);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function Oc(i){return i+"\x01\x01"}function Va(i){const e=i.length;if(ir(e>=2),2===e)return ir("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Qn.emptyPath();const t=e-2,o=[];let h="";for(let m=0;m<e;){const w=i.indexOf("\x01",m);switch((w<0||w>t)&&$n(),i.charAt(w+1)){case"\x01":const k=i.substring(m,w);let q;0===h.length?q=k:(h+=k,q=h,h=""),o.push(q);break;case"\x10":h+=i.substring(m,w),h+="\0";break;case"\x11":h+=i.substring(m,w+1);break;default:$n()}m=w+2}return new Qn(o)}const kc=["userId","batchId"];function Hl(i,e){return[i,zo(e)]}function od(i,e,t){return[i,zo(e),t]}const pf={},gf=["prefixPath","collectionGroup","readTime","documentId"],mf=["prefixPath","collectionGroup","documentId"],Eh=["collectionGroup","readTime","prefixPath","documentId"],ad=["canonicalId","targetId"],_p=["targetId","path"],vp=["path","targetId"],Ep=["collectionId","parent"],yf=["indexId","uid"],bp=["uid","sequenceNumber"],wp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ip=["indexId","uid","orderedDocumentKey"],pm=["userId","collectionPath","documentId"],_f=["userId","collectionPath","largestBatchId"],Cp=["userId","collectionGroup","largestBatchId"],vf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Dp=[...vf,"documentOverlays"],kd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ef=kd,Tp=[...Ef,"indexConfiguration","indexState","indexEntries"];class ia extends lo{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Io(i,e){const t=An(i);return vo.M(t.ie,e)}class Tl{constructor(e,t,o,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&_h(m,e,o[h])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Es(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Es(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=uu();return this.mutations.forEach(h=>{const m=e.get(h.key),w=m.overlayedDocument;let k=this.applyToLocalView(w,m.mutatedFields);k=t.has(h.key)?null:k;const q=Sa(w,k);null!==q&&o.set(h.key,q),w.isValidDocument()||w.convertToNoDocument(or.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ur())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(t,o)=>xd(t,o))&&ko(this.baseMutations,e.baseMutations,(t,o)=>xd(t,o))}}class po{constructor(e,t,o,h){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=h}static from(e,t,o){ir(e.mutations.length===o.length);let h=no;const m=e.mutations;for(let w=0;w<m.length;w++)h=h.insert(m[w].key,o[w].version);return new po(e,t,o,h)}}class ss{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ea{constructor(e,t,o,h,m=or.min(),w=or.min(),k=j.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=k}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class bh{constructor(e){this.re=e}}function bf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ld(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:tc(h=i.re,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Ul(h,m.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:$a(e.version)};else{if(!e.isUnknownDocument())return $n();o.unknownDocument={path:t.path.toArray(),version:$a(e.version)}}var h,m;return o}function ld(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function $a(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ku(i){const e=new Pr(i.seconds,i.nanoseconds);return or.fromTimestamp(e)}function rc(i,e){const t=(e.baseMutations||[]).map(m=>ce(i.re,m));for(let m=0;m<e.mutations.length-1;++m){const w=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(w.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const o=e.mutations.map(m=>ce(i.re,m)),h=Pr.fromMillis(e.localWriteTimeMs);return new Tl(e.batchId,h,t,o)}function Pc(i){const e=ku(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ku(i.lastLimboFreeSnapshotVersion):or.min();let o;var h;return void 0!==i.query.documents?(ir(1===(h=i.query).documents.length),o=_a(wl(rd(h.documents[0])))):o=_a(qn(i.query)),new Ea(o,i.targetId,0,i.lastListenSequenceNumber,e,t,j.fromBase64String(i.resumeToken))}function wf(i,e){const t=$a(e.snapshotVersion),o=$a(e.lastLimboFreeSnapshotVersion);let h;h=eu(e.target)?jt(i.re,e.target):_n(i.re,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:h}}function Pd(i){const e=qn({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Du(e,e.limit,"L"):e}function Nd(i,e){return new ss(e.largestBatchId,ce(i.re,e.overlayMutation))}function wh(i,e){const t=e.path.lastSegment();return[i,zo(e.path.popLast()),t]}function Ih(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:$a(o.readTime),documentKey:zo(o.documentKey.path),largestBatchId:o.largestBatchId}}class Gl{getBundleMetadata(e,t){return Wl(e).get(t).next(o=>{if(o)return{id:(h=o).bundleId,createTime:ku(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return Wl(e).put({bundleId:(o=t).id,createTime:$a(ws(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Ch(e).get(t).next(o=>{if(o)return{name:(h=o).name,query:Pd(h.bundledQuery),readTime:ku(h.readTime)};var h})}saveNamedQuery(e,t){return Ch(e).put({name:(o=t).name,readTime:$a(ws(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Wl(i){return Io(i,"bundles")}function Ch(i){return Io(i,"namedQueries")}class Fd{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Fd(e,t.uid||"")}getOverlay(e,t){return Ld(e).get(wh(this.userId,t)).next(o=>o?Nd(this.It,o):null)}getOverlays(e,t){const o=Go();return At.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&o.set(h,m)})).next(()=>o)}saveOverlays(e,t,o){const h=[];return o.forEach((m,w)=>{const k=new ss(t,w);h.push(this.ue(e,k))}),At.waitFor(h)}removeOverlaysForBatchId(e,t,o){const h=new Set;t.forEach(w=>h.add(zo(w.getCollectionPath())));const m=[];return h.forEach(w=>{const k=IDBKeyRange.bound([this.userId,w,o],[this.userId,w,o+1],!1,!0);m.push(Ld(e).Y("collectionPathOverlayIndex",k))}),At.waitFor(m)}getOverlaysForCollection(e,t,o){const h=Go(),m=zo(t),w=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Ld(e).W("collectionPathOverlayIndex",w).next(k=>{for(const q of k){const ee=Nd(this.It,q);h.set(ee.getKey(),ee)}return h})}getOverlaysForCollectionGroup(e,t,o,h){const m=Go();let w;const k=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ld(e).Z({index:"collectionGroupOverlayIndex",range:k},(q,ee,me)=>{const We=Nd(this.It,ee);m.size()<h||We.largestBatchId===w?(m.set(We.getKey(),We),w=We.largestBatchId):me.done()}).next(()=>m)}ue(e,t){return Ld(e).put(function(o,h,m){const[w,k,q]=wh(h,m.mutation.key);return{userId:h,collectionPath:k,documentId:q,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Q(o.re,m.mutation)}}(this.It,this.userId,t))}}function Ld(i){return Io(i,"documentOverlays")}class ic{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(xe(e.integerValue));else if("doubleValue"in e){const o=xe(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Yt(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ct(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?bc(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):$n()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const h of Object.keys(o))this._e(h,t),this.ae(o[h],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const h of o)this.ae(h,t)}ge(e,t){this.le(t,37),Cn.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Dh(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function If(i){const e=64-function(t){let o=0;for(let h=0;h<8;++h){const m=Dh(255&t[h]);if(o+=m,8!==m)break}return o}(i);return Math.ceil(e/8)}ic.Te=new ic;class zl{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const h=t.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const h=t.codePointAt(0);this.Pe(240|h>>>18),this.Pe(128|63&h>>>12),this.Pe(128|63&h>>>6),this.Pe(128|63&h)}}this.ve()}De(e){const t=this.Ce(e),o=If(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let h=t.length-o;h<t.length;++h)this.buffer[this.position++]=255&t[h]}Ne(e){const t=this.Ce(e),o=If(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let h=t.length-o;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let h=1;h<t.length;++h)t[h]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const h=new Uint8Array(o);h.set(this.buffer),this.buffer=h}}class Th{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Sh{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Nc{constructor(){this.Be=new zl,this.Le=new Th(this.Be),this.Ue=new Sh(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Pu{constructor(e,t,o,h){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=h}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Pu(this.indexId,this.documentKey,this.arrayValue,o)}}function sc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=oc(i.arrayValue,e.arrayValue),0!==t?t:(t=oc(i.directionalValue,e.directionalValue),0!==t?t:Cn.comparator(i.documentKey,e.documentKey)))}function oc(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Ap{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=gu(e);if(void 0!==t&&!this.ze(t))return!1;const o=Pa(e);let h=0,m=0;for(;h<o.length&&this.ze(o[h]);++h);if(h===o.length)return!0;if(void 0!==this.je){const w=o[h];if(!this.He(this.je,w)||!this.Je(this.Ge[m++],w))return!1;++h}for(;h<o.length;++h){const w=o[h];if(m>=this.Ge.length||!this.Je(this.Ge[m++],w))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class xp{constructor(){this.Ye=new ud}addToCollectionParentIndex(e,t){return this.Ye.add(t),At.resolve()}getCollectionParents(e,t){return At.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return At.resolve()}deleteFieldIndex(e,t){return At.resolve()}getDocumentsMatchingTarget(e,t){return At.resolve(null)}getIndexType(e,t){return At.resolve(0)}getFieldIndexes(e,t){return At.resolve([])}getNextCollectionGroupToUpdate(e){return At.resolve(null)}getMinOffset(e,t){return At.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return At.resolve(ps.min())}updateCollectionGroup(e,t,o){return At.resolve()}updateIndexEntries(e,t){return At.resolve()}}class ud{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),h=this.index[t]||new wi(Qn.comparator),m=!h.has(o);return this.index[t]=h.add(o),m}has(e){const t=e.lastSegment(),o=e.popLast(),h=this.index[t];return h&&h.has(o)}getEntries(e){return(this.index[e]||new wi(Qn.comparator)).toArray()}}const ac=new Uint8Array(0);class Cf{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new ud,this.Ze=new pl(o=>bl(o),(o,h)=>cl(o,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const m={collectionId:o,parent:zo(h)};return f(e).put(m)}return At.resolve()}getCollectionParents(e,t){const o=[],h=IDBKeyRange.bound([t,""],[ka(t),""],!1,!0);return f(e).W(h).next(m=>{for(const w of m){if(w.collectionId!==t)break;o.push(Va(w.parent))}return o})}addFieldIndex(e,t){const o=c(e),h={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var w;delete h.indexId;const m=o.add(h);if(t.indexState){const w=_(e);return m.next(k=>{w.put(Ih(k,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const o=c(e),h=_(e),m=u(e);return o.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=u(e);let h=!0;const m=new Map;return At.forEach(this.tn(t),w=>this.en(e,w).next(k=>{h&&(h=!!k),m.set(w,k)})).next(()=>{if(h){let w=Ur();const k=[];return At.forEach(m,(q,ee)=>{var me;sn("IndexedDbIndexManager",`Using index ${me=q,`id=${me.indexId}|cg=${me.collectionGroup}|f=${me.fields.map(Ki=>`${Ki.fieldPath}:${Ki.kind}`).join(",")}`} to execute ${bl(t)}`);const We=function(Ki,Bo){const ji=gu(Bo);if(void 0===ji)return null;for(const Fi of Cc(Ki,ji.fieldPath))switch(Fi.op){case"array-contains-any":return Fi.value.arrayValue.values||[];case"array-contains":return[Fi.value]}return null}(ee,q),xt=function(Ki,Bo){const ji=new Map;for(const Fi of Pa(Bo))for(const ua of Cc(Ki,Fi.fieldPath))switch(ua.op){case"==":case"in":ji.set(Fi.fieldPath.canonicalString(),ua.value);break;case"not-in":case"!=":return ji.set(Fi.fieldPath.canonicalString(),ua.value),Array.from(ji.values())}return null}(ee,q),Qt=function(Ki,Bo){const ji=[];let Fi=!0;for(const ua of Pa(Bo)){const cf=0===ua.kind?Dc(Ki,ua.fieldPath,Ki.startAt):Hu(Ki,ua.fieldPath,Ki.startAt);ji.push(cf.value),Fi&&(Fi=cf.inclusive)}return new dl(ji,Fi)}(ee,q),nn=function(Ki,Bo){const ji=[];let Fi=!0;for(const ua of Pa(Bo)){const cf=0===ua.kind?Hu(Ki,ua.fieldPath,Ki.endAt):Dc(Ki,ua.fieldPath,Ki.endAt);ji.push(cf.value),Fi&&(Fi=cf.inclusive)}return new dl(ji,Fi)}(ee,q),Gn=this.nn(q,ee,Qt),tr=this.nn(q,ee,nn),os=this.sn(q,ee,xt),Hs=this.rn(q.indexId,We,Gn,Qt.inclusive,tr,nn.inclusive,os);return At.forEach(Hs,Ki=>o.J(Ki,t.limit).next(Bo=>{Bo.forEach(ji=>{const Fi=Cn.fromSegments(ji.documentKey);w.has(Fi)||(w=w.add(Fi),k.push(Fi))})}))}).next(()=>k)}return At.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,h,m,w,k){const q=(null!=t?t.length:1)*Math.max(o.length,m.length),ee=q/(null!=t?t.length:1),me=[];for(let We=0;We<q;++We){const xt=t?this.on(t[We/ee]):ac,Qt=this.un(e,xt,o[We%ee],h),nn=this.cn(e,xt,m[We%ee],w),Gn=k.map(tr=>this.un(e,xt,tr,!0));me.push(...this.createRange(Qt,nn,Gn))}return me}un(e,t,o,h){const m=new Pu(e,Cn.empty(),t,o);return h?m:m.Ke()}cn(e,t,o,h){const m=new Pu(e,Cn.empty(),t,o);return h?m.Ke():m}en(e,t){const o=new Ap(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let w=null;for(const k of m)o.We(k)&&(!w||k.fields.length>w.fields.length)&&(w=k);return w})}getIndexType(e,t){let o=2;return At.forEach(this.tn(t),h=>this.en(e,h).next(m=>{m?0!==o&&m.fields.length<function(w){let k=new wi(bs.comparator),q=!1;for(const ee of w.filters){const me=ee;me.field.isKeyField()||("array-contains"===me.op||"array-contains-any"===me.op?q=!0:k=k.add(me.field))}for(const ee of w.orderBy)ee.field.isKeyField()||(k=k.add(ee.field));return k.size+(q?1:0)}(h)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new Nc;for(const h of Pa(e)){const m=t.data.field(h.fieldPath);if(null==m)return null;const w=o.qe(h.kind);ic.Te.ce(m,w)}return o.$e()}on(e){const t=new Nc;return ic.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new Nc;return ic.Te.ce(No(this.databaseId,t),o.qe(function(h){const m=Pa(h);return 0===m.length?0:m[m.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let h=[];h.push(new Nc);let m=0;for(const w of Pa(e)){const k=o[m++];for(const q of h)if(this.ln(t,w.fieldPath)&&ta(k))h=this.fn(h,w,k);else{const ee=q.qe(w.kind);ic.Te.ce(k,ee)}}return this.dn(h)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const h=[...e],m=[];for(const w of o.arrayValue.values||[])for(const k of h){const q=new Nc;q.seed(k.$e()),ic.Te.ce(w,q.qe(t.kind)),m.push(q)}return m}ln(e,t){return!!e.filters.find(o=>o instanceof co&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=c(e),h=_(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(m=>{const w=[];return At.forEach(m,k=>h.get([k.indexId,this.uid]).next(q=>{w.push(function(ee,me){const We=me?new al(me.sequenceNumber,new ps(ku(me.readTime),new Cn(Va(me.documentKey)),me.largestBatchId)):al.empty(),xt=ee.fields.map(([Qt,nn])=>new Xo(bs.fromServerFormat(Qt),nn));return new Nl(ee.indexId,ee.collectionGroup,xt,We)}(k,q))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,h)=>{const m=o.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:br(o.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const h=c(e),m=_(e);return this._n(e).next(w=>h.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(k=>At.forEach(k,q=>m.put(Ih(q.indexId,this.user,w,o)))))}updateIndexEntries(e,t){const o=new Map;return At.forEach(t,(h,m)=>{const w=o.get(h.collectionGroup);return(w?At.resolve(w):this.getFieldIndexes(e,h.collectionGroup)).next(k=>(o.set(h.collectionGroup,k),At.forEach(k,q=>this.wn(e,h,q).next(ee=>{const me=this.mn(m,q);return ee.isEqual(me)?At.resolve():this.gn(e,m,q,ee,me)}))))})}yn(e,t,o,h){return u(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,h){return u(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const h=u(e);let m=new wi(sc);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(w,k)=>{m=m.add(new Pu(o.indexId,t,k.arrayValue,k.directionalValue))}).next(()=>m)}mn(e,t){let o=new wi(sc);const h=this.an(t,e);if(null==h)return o;const m=gu(t);if(null!=m){const w=e.data.field(m.fieldPath);if(ta(w))for(const k of w.arrayValue.values||[])o=o.add(new Pu(t.indexId,e.key,this.on(k),h))}else o=o.add(new Pu(t.indexId,e.key,ac,h));return o}gn(e,t,o,h,m){sn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(k,q,ee,me,We){const xt=k.getIterator(),Qt=q.getIterator();let nn=x(xt),Gn=x(Qt);for(;nn||Gn;){let tr=!1,os=!1;if(nn&&Gn){const Hs=ee(nn,Gn);Hs<0?os=!0:Hs>0&&(tr=!0)}else null!=nn?os=!0:tr=!0;tr?(me(Gn),Gn=x(Qt)):os?(We(nn),nn=x(xt)):(nn=x(xt),Gn=x(Qt))}}(h,m,sc,k=>{w.push(this.yn(e,t,o,k))},k=>{w.push(this.pn(e,t,o,k))}),At.waitFor(w)}_n(e){let t=1;return _(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,h,m)=>{m.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((w,k)=>sc(w,k)).filter((w,k,q)=>!k||0!==sc(w,q[k-1]));const h=[];h.push(e);for(const w of o){const k=sc(w,e),q=sc(w,t);if(0===k)h[0]=e.Ke();else if(k>0&&q<0)h.push(w),h.push(w.Ke());else if(q>0)break}h.push(t);const m=[];for(let w=0;w<h.length;w+=2)m.push(IDBKeyRange.bound([h[w].indexId,this.uid,h[w].arrayValue,h[w].directionalValue,ac,[]],[h[w+1].indexId,this.uid,h[w+1].arrayValue,h[w+1].directionalValue,ac,[]]));return m}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(S)}getMinOffset(e,t){return At.mapArray(this.tn(t),o=>this.en(e,o).next(h=>h||$n())).next(S)}}function f(i){return Io(i,"collectionParents")}function u(i){return Io(i,"indexEntries")}function c(i){return Io(i,"indexConfiguration")}function _(i){return Io(i,"indexState")}function S(i){ir(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const h=i[o].indexState.offset;El(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}const F={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class W{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new W(e,W.DEFAULT_COLLECTION_PERCENTILE,W.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ae(i,e,t){const o=i.store("mutations"),h=i.store("documentMutations"),m=[],w=IDBKeyRange.only(t.batchId);let k=0;const q=o.Z({range:w},(me,We,xt)=>(k++,xt.delete()));m.push(q.next(()=>{ir(1===k)}));const ee=[];for(const me of t.mutations){const We=od(e,me.key.path,t.batchId);m.push(h.delete(We)),ee.push(me.key)}return At.waitFor(m).next(()=>ee)}function Re(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw $n();e=i.noDocument}return JSON.stringify(e).length}W.DEFAULT_COLLECTION_PERCENTILE=10,W.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,W.DEFAULT=new W(41943040,W.DEFAULT_COLLECTION_PERCENTILE,W.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),W.DISABLED=new W(-1,0,0);class Ge{constructor(e,t,o,h){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=h,this.In={}}static oe(e,t,o,h){ir(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new Ge(m,t,o,h)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bt(e).Z({index:"userMutationsIndex",range:o},(h,m,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,o,h){const m=Kt(e),w=Bt(e);return w.add({}).next(k=>{ir("number"==typeof k);const q=new Tl(k,t,o,h),ee=function(xt,Qt,nn){const Gn=nn.baseMutations.map(os=>Q(xt.re,os)),tr=nn.mutations.map(os=>Q(xt.re,os));return{userId:Qt,batchId:nn.batchId,localWriteTimeMs:nn.localWriteTime.toMillis(),baseMutations:Gn,mutations:tr}}(this.It,this.userId,q),me=[];let We=new wi((xt,Qt)=>br(xt.canonicalString(),Qt.canonicalString()));for(const xt of h){const Qt=od(this.userId,xt.key.path,k);We=We.add(xt.key.path.popLast()),me.push(w.put(ee)),me.push(m.put(Qt,pf))}return We.forEach(xt=>{me.push(this.indexManager.addToCollectionParentIndex(e,xt))}),e.addOnCommittedListener(()=>{this.In[k]=q.keys()}),At.waitFor(me).next(()=>q)})}lookupMutationBatch(e,t){return Bt(e).get(t).next(o=>o?(ir(o.userId===this.userId),rc(this.It,o)):null)}Tn(e,t){return this.In[t]?At.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const h=o.keys();return this.In[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,h=IDBKeyRange.lowerBound([this.userId,o]);let m=null;return Bt(e).Z({index:"userMutationsIndex",range:h},(w,k,q)=>{k.userId===this.userId&&(ir(k.batchId>=o),m=rc(this.It,k)),q.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Bt(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(h,m,w)=>{o=m.batchId,w.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bt(e).W("userMutationsIndex",t).next(o=>o.map(h=>rc(this.It,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Hl(this.userId,t.path),h=IDBKeyRange.lowerBound(o),m=[];return Kt(e).Z({range:h},(w,k,q)=>{const[ee,me,We]=w,xt=Va(me);if(ee===this.userId&&t.path.isEqual(xt))return Bt(e).get(We).next(Qt=>{if(!Qt)throw $n();ir(Qt.userId===this.userId),m.push(rc(this.It,Qt))});q.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new wi(br);const h=[];return t.forEach(m=>{const w=Hl(this.userId,m.path),k=IDBKeyRange.lowerBound(w),q=Kt(e).Z({range:k},(ee,me,We)=>{const[xt,Qt,nn]=ee,Gn=Va(Qt);xt===this.userId&&m.path.isEqual(Gn)?o=o.add(nn):We.done()});h.push(q)}),At.waitFor(h).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,h=o.length+1,m=Hl(this.userId,o),w=IDBKeyRange.lowerBound(m);let k=new wi(br);return Kt(e).Z({range:w},(q,ee,me)=>{const[We,xt,Qt]=q,nn=Va(xt);We===this.userId&&o.isPrefixOf(nn)?nn.length===h&&(k=k.add(Qt)):me.done()}).next(()=>this.En(e,k))}En(e,t){const o=[],h=[];return t.forEach(m=>{h.push(Bt(e).get(m).next(w=>{if(null===w)throw $n();ir(w.userId===this.userId),o.push(rc(this.It,w))}))}),At.waitFor(h).next(()=>o)}removeMutationBatch(e,t){return ae(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),At.forEach(o,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return At.resolve();const o=IDBKeyRange.lowerBound([this.userId]),h=[];return Kt(e).Z({range:o},(m,w,k)=>{if(m[0]===this.userId){const q=Va(m[1]);h.push(q)}else k.done()}).next(()=>{ir(0===h.length)})})}containsKey(e,t){return $t(e,this.userId,t)}Rn(e){return kn(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $t(i,e,t){const o=Hl(e,t.path),h=o[1],m=IDBKeyRange.lowerBound(o);let w=!1;return Kt(i).Z({range:m,X:!0},(k,q,ee)=>{const[me,We,xt]=k;me===e&&We===h&&(w=!0),ee.done()}).next(()=>w)}function Bt(i){return Io(i,"mutations")}function Kt(i){return Io(i,"documentMutations")}function kn(i){return Io(i,"mutationQueues")}class sr{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new sr(0)}static vn(){return new sr(-1)}}class xi{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new sr(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>or.fromTimestamp(new Pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(h=>(h.highestListenSequenceNumber=t,o&&(h.lastRemoteSnapshotVersion=o.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Sn(e,h)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zs(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(ir(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let h=0;const m=[];return Zs(e).Z((w,k)=>{const q=Pc(k);q.sequenceNumber<=t&&null===o.get(q.targetId)&&(h++,m.push(this.removeTargetData(e,q)))}).next(()=>At.waitFor(m)).next(()=>h)}forEachTarget(e,t){return Zs(e).Z((o,h)=>{const m=Pc(h);t(m)})}Vn(e){return Sl(e).get("targetGlobalKey").next(t=>(ir(null!==t),t))}Sn(e,t){return Sl(e).put("targetGlobalKey",t)}Dn(e,t){return Zs(e).put(wf(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=bl(t),h=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let m=null;return Zs(e).Z({range:h,index:"queryTargetsIndex"},(w,k,q)=>{const ee=Pc(k);cl(t,ee.target)&&(m=ee,q.done())}).next(()=>m)}addMatchingKeys(e,t,o){const h=[],m=sa(e);return t.forEach(w=>{const k=zo(w.path);h.push(m.put({targetId:o,path:k})),h.push(this.referenceDelegate.addReference(e,o,w))}),At.waitFor(h)}removeMatchingKeys(e,t,o){const h=sa(e);return At.forEach(t,m=>{const w=zo(m.path);return At.waitFor([h.delete([o,w]),this.referenceDelegate.removeReference(e,o,m)])})}removeMatchingKeysForTargetId(e,t){const o=sa(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(h)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),h=sa(e);let m=Ur();return h.Z({range:o,X:!0},(w,k,q)=>{const ee=Va(w[1]),me=new Cn(ee);m=m.add(me)}).next(()=>m)}containsKey(e,t){const o=zo(t.path),h=IDBKeyRange.bound([o],[ka(o)],!1,!0);let m=0;return sa(e).Z({index:"documentTargetsIndex",X:!0,range:h},([w,k],q,ee)=>{0!==w&&(m++,ee.done())}).next(()=>m>0)}se(e,t){return Zs(e).get(t).next(o=>o?Pc(o):null)}}function Zs(i){return Io(i,"targets")}function Sl(i){return Io(i,"targetGlobal")}function sa(i){return Io(i,"targetDocuments")}function Nu([i,e],[t,o]){const h=br(i,t);return 0===h?br(e,o):h}class lc{constructor(e){this.xn=e,this.buffer=new wi(Nu),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Nu(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gm{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;sn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,te.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Uo(o)?sn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Ns(o)}yield t.Fn(3e5)}))}}class mm{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return At.resolve(qs.at);const o=new lc(t);return this.$n.forEachTarget(e,h=>o.On(h.sequenceNumber)).next(()=>this.$n.Ln(e,h=>o.On(h))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector","Garbage collection skipped; disabled"),At.resolve(F)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,h,m,w,k,q,ee;const me=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(We=>(We>this.params.maximumSequenceNumbersToCollect?(sn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${We}`),h=this.params.maximumSequenceNumbersToCollect):h=We,w=Date.now(),this.nthSequenceNumber(e,h))).next(We=>(o=We,k=Date.now(),this.removeTargets(e,o,t))).next(We=>(m=We,q=Date.now(),this.removeOrphanedDocuments(e,o))).next(We=>(ee=Date.now(),_o()<=Te.in.DEBUG&&sn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-me}ms\n\tDetermined least recently used ${h} in `+(k-w)+`ms\n\tRemoved ${m} targets in `+(q-k)+`ms\n\tRemoved ${We} documents in `+(ee-q)+`ms\nTotal Duration: ${ee-me}ms`),At.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:We})))}}class u_{constructor(e,t){this.db=e,this.garbageCollector=new mm(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(h=>o+h))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,h)=>t(h))}addReference(e,t,o){return Mp(e,o)}removeReference(e,t,o){return Mp(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Mp(e,t)}Gn(e,t){return function(o,h){let m=!1;return kn(o).tt(w=>$t(o,w,h).next(k=>(k&&(m=!0),At.resolve(!k)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Kn(e,(w,k)=>{if(k<=t){const q=this.Gn(e,w).next(ee=>{if(!ee)return m++,o.getEntry(e,w).next(()=>(o.removeEntry(w,or.min()),sa(e).delete([0,zo(w.path)])))});h.push(q)}}).next(()=>At.waitFor(h)).next(()=>o.apply(e)).next(()=>m)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Mp(e,t)}Kn(e,t){const o=sa(e);let h,m=qs.at;return o.Z({index:"documentTargetsIndex"},([w,k],{path:q,sequenceNumber:ee})=>{0===w?(m!==qs.at&&t(new Cn(Va(h)),m),m=ee,h=q):m=qs.at}).next(()=>{m!==qs.at&&t(new Cn(Va(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mp(i,e){return sa(i).put((o=i.currentSequenceNumber,{targetId:0,path:zo(e.path),sequenceNumber:o}));var o}class Ah{constructor(){this.changes=new pl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,is.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?At.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class c_{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return uc(e).put(o)}removeEntry(e,t,o){return uc(e).delete(function(h,m){const w=h.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],ld(m),w[w.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=is.newInvalidDocument(t);return uc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(t))},(h,m)=>{o=this.jn(t,m)}).next(()=>o)}Wn(e,t){let o={size:0,document:is.newInvalidDocument(t)};return uc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(t))},(h,m)=>{o={document:this.jn(t,m),size:Re(m)}}).next(()=>o)}getEntries(e,t){let o=Lo();return this.zn(e,t,(h,m)=>{const w=this.jn(h,m);o=o.insert(h,w)}).next(()=>o)}Hn(e,t){let o=Lo(),h=new Oi(Cn.comparator);return this.zn(e,t,(m,w)=>{const k=this.jn(m,w);o=o.insert(m,k),h=h.insert(m,Re(w))}).next(()=>({documents:o,Jn:h}))}zn(e,t,o){if(t.isEmpty())return At.resolve();let h=new wi(Mh);t.forEach(q=>h=h.add(q));const m=IDBKeyRange.bound(Bd(h.first()),Bd(h.last())),w=h.getIterator();let k=w.getNext();return uc(e).Z({index:"documentKeyIndex",range:m},(q,ee,me)=>{const We=Cn.fromSegments([...ee.prefixPath,ee.collectionGroup,ee.documentId]);for(;k&&Mh(k,We)<0;)o(k,null),k=w.getNext();k&&k.isEqual(We)&&(o(k,ee),k=w.hasNext()?w.getNext():null),k?me.j(Bd(k)):me.done()}).next(()=>{for(;k;)o(k,null),k=w.hasNext()?w.getNext():null})}getAllFromCollection(e,t,o){const h=[t.popLast().toArray(),t.lastSegment(),ld(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uc(e).W(IDBKeyRange.bound(h,m,!0)).next(w=>{let k=Lo();for(const q of w){const ee=this.jn(Cn.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);k=k.insert(ee.key,ee)}return k})}getAllFromCollectionGroup(e,t,o,h){let m=Lo();const w=xh(t,o),k=xh(t,ps.max());return uc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,k,!0)},(q,ee,me)=>{const We=this.jn(Cn.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);m=m.insert(We.key,We),m.size===h&&me.done()}).next(()=>m)}newChangeBuffer(e){return new ym(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Op(e).get("remoteDocumentGlobalKey").next(t=>(ir(!!t),t))}Qn(e,t){return Op(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function Sp(i,e){let t;if(e.document)t=g(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Cn.fromSegments(e.noDocument.path),h=ku(e.noDocument.readTime);t=is.newNoDocument(o,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $n();{const o=Cn.fromSegments(e.unknownDocument.path),h=ku(e.unknownDocument.version);t=is.newUnknownDocument(o,h)}}return e.readTime&&t.setReadTime(function(o){const h=new Pr(o[0],o[1]);return or.fromTimestamp(h)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(or.min()))return o}return is.newInvalidDocument(e)}}function Rp(i){return new c_(i)}class ym extends Ah{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new pl(o=>o.toString(),(o,h)=>o.isEqual(h))}applyChanges(e){const t=[];let o=0,h=new wi((m,w)=>br(m.canonicalString(),w.canonicalString()));return this.changes.forEach((m,w)=>{const k=this.Xn.get(m);if(t.push(this.Yn.removeEntry(e,m,k.readTime)),w.isValidDocument()){const q=bf(this.Yn.It,w);h=h.add(m.path.popLast()),o+=Re(q)-k.size,t.push(this.Yn.addEntry(e,m,q))}else if(o-=k.size,this.trackRemovals){const q=bf(this.Yn.It,w.convertToNoDocument(or.min()));t.push(this.Yn.addEntry(e,m,q))}}),h.forEach(m=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Yn.updateMetadata(e,o)),At.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:h})=>(h.forEach((m,w)=>{this.Xn.set(m,{size:w,readTime:o.get(m).readTime})}),o))}}function Op(i){return Io(i,"remoteDocumentGlobal")}function uc(i){return Io(i,"remoteDocumentsV14")}function Bd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xh(i,e){const t=e.documentKey.path.toArray();return[i,ld(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Mh(i,e){const t=i.path.toArray(),o=e.path.toArray();let h=0;for(let m=0;m<t.length-2&&m<o.length-2;++m)if(h=br(t[m],o[m]),h)return h;return h=br(t.length,o.length),h||(h=br(t[t.length-2],o[o.length-2]),h||br(t[t.length-1],o[o.length-1]))}class _m{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Df{constructor(e,t,o,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(o=h,this.getBaseDocument(e,t,o))).next(h=>(null!==o&&Es(o.mutation,h,C.empty(),Pr.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Ur()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Ur()){const h=Go();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,o).next(m=>{let w=Ys();return m.forEach((k,q)=>{w=w.insert(k,q.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const o=Go();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Ur()))}populateOverlays(e,t,o){const h=[];return o.forEach(m=>{t.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((w,k)=>{t.set(w,k)})})}computeViews(e,t,o,h){let m=Lo();const w=wo(),k=wo();return t.forEach((q,ee)=>{const me=o.get(ee.key);h.has(ee.key)&&(void 0===me||me.mutation instanceof fl)?m=m.insert(ee.key,ee):void 0!==me&&(w.set(ee.key,me.mutation.getFieldMask()),Es(me.mutation,ee,me.mutation.getFieldMask(),Pr.now()))}),this.recalculateAndSaveOverlays(e,m).next(q=>(q.forEach((ee,me)=>w.set(ee,me)),t.forEach((ee,me)=>{var We;return k.set(ee,new _m(me,null!==(We=w.get(ee))&&void 0!==We?We:null))}),k))}recalculateAndSaveOverlays(e,t){const o=wo();let h=new Oi((w,k)=>w-k),m=Ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const k of w)k.keys().forEach(q=>{const ee=t.get(q);if(null===ee)return;let me=o.get(q)||C.empty();me=k.applyToLocalView(ee,me),o.set(q,me);const We=(h.get(k.batchId)||Ur()).add(q);h=h.insert(k.batchId,We)})}).next(()=>{const w=[],k=h.getReverseIterator();for(;k.hasNext();){const q=k.getNext(),ee=q.key,me=q.value,We=uu();me.forEach(xt=>{if(!m.has(xt)){const Qt=Sa(t.get(xt),o.get(xt));null!==Qt&&We.set(xt,Qt),m=m.add(xt)}}),w.push(this.documentOverlayCache.saveOverlays(e,ee,We))}return At.waitFor(w)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Cn.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):na(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var h}getNextDocuments(e,t,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,h).next(m=>{const w=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,h-m.size):At.resolve(Go());let k=-1,q=m;return w.next(ee=>At.forEach(ee,(me,We)=>(k<We.largestBatchId&&(k=We.largestBatchId),m.get(me)?At.resolve():this.getBaseDocument(e,me,We).next(xt=>{q=q.insert(me,xt)}))).next(()=>this.populateOverlays(e,ee,m)).next(()=>this.computeViews(e,q,ee,Ur())).next(me=>({batchId:k,changes:$l(me)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Cn(t)).next(o=>{let h=Ys();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const h=t.collectionGroup;let m=Ys();return this.indexManager.getCollectionParents(e,h).next(w=>At.forEach(w,k=>{const q=(ee=t,me=k.child(h),new Ja(me,null,ee.explicitOrderBy.slice(),ee.filters.slice(),ee.limit,ee.limitType,ee.startAt,ee.endAt));var ee,me;return this.getDocumentsMatchingCollectionQuery(e,q,o).next(ee=>{ee.forEach((me,We)=>{m=m.insert(me,We)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,o){let h;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(m=>(h=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(m=>{m.forEach((k,q)=>{const ee=q.getKey();null===h.get(ee)&&(h=h.insert(ee,is.newInvalidDocument(ee)))});let w=Ys();return h.forEach((k,q)=>{const ee=m.get(k);void 0!==ee&&Es(ee.mutation,q,C.empty(),Pr.now()),Tc(t,q)&&(w=w.insert(k,q))}),w})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):At.resolve(is.newInvalidDocument(t))}}class vm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return At.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:ws(o.createTime)}),At.resolve()}getNamedQuery(e,t){return At.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:Pd(o.bundledQuery),readTime:ws(o.readTime)}),At.resolve();var o}}class kp{constructor(){this.overlays=new Oi(Cn.comparator),this.es=new Map}getOverlay(e,t){return At.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Go();return At.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&o.set(h,m)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((h,m)=>{this.ue(e,t,m)}),At.resolve()}removeOverlaysForBatchId(e,t,o){const h=this.es.get(o);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(o)),At.resolve()}getOverlaysForCollection(e,t,o){const h=Go(),m=t.length+1,w=new Cn(t.child("")),k=this.overlays.getIteratorFrom(w);for(;k.hasNext();){const q=k.getNext().value,ee=q.getKey();if(!t.isPrefixOf(ee.path))break;ee.path.length===m&&q.largestBatchId>o&&h.set(q.getKey(),q)}return At.resolve(h)}getOverlaysForCollectionGroup(e,t,o,h){let m=new Oi((ee,me)=>ee-me);const w=this.overlays.getIterator();for(;w.hasNext();){const ee=w.getNext().value;if(ee.getKey().getCollectionGroup()===t&&ee.largestBatchId>o){let me=m.get(ee.largestBatchId);null===me&&(me=Go(),m=m.insert(ee.largestBatchId,me)),me.set(ee.getKey(),ee)}}const k=Go(),q=m.getIterator();for(;q.hasNext()&&(q.getNext().value.forEach((ee,me)=>k.set(ee,me)),!(k.size()>=h)););return At.resolve(k)}ue(e,t,o){const h=this.overlays.get(o.key);if(null!==h){const w=this.es.get(h.largestBatchId).delete(o.key);this.es.set(h.largestBatchId,w)}this.overlays=this.overlays.insert(o.key,new ss(t,o));let m=this.es.get(t);void 0===m&&(m=Ur(),this.es.set(t,m)),this.es.set(t,m.add(o.key))}}class cd{constructor(){this.ns=new wi(ba.ss),this.rs=new wi(ba.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new ba(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new ba(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Cn(new Qn([])),o=new ba(t,e),h=new ba(t,e+1),m=[];return this.rs.forEachInRange([o,h],w=>{this.cs(w),m.push(w.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Cn(new Qn([])),o=new ba(t,e),h=new ba(t,e+1);let m=Ur();return this.rs.forEachInRange([o,h],w=>{m=m.add(w.key)}),m}containsKey(e){const t=new ba(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class ba{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Cn.comparator(e.key,t.key)||br(e._s,t._s)}static os(e,t){return br(e._s,t._s)||Cn.comparator(e.key,t.key)}}class Em{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new wi(ba.ss)}checkEmpty(e){return At.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,h){const m=this.ws;this.ws++;const w=new Tl(m,t,o,h);this.mutationQueue.push(w);for(const k of h)this.gs=this.gs.add(new ba(k.key,m)),this.indexManager.addToCollectionParentIndex(e,k.key.path.popLast());return At.resolve(w)}lookupMutationBatch(e,t){return At.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ps(t+1),m=h<0?0:h;return At.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return At.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return At.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new ba(t,0),h=new ba(t,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([o,h],w=>{const k=this.ys(w._s);m.push(k)}),At.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new wi(br);return t.forEach(h=>{const m=new ba(h,0),w=new ba(h,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,w],k=>{o=o.add(k._s)})}),At.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,h=o.length+1;let m=o;Cn.isDocumentKey(m)||(m=m.child(""));const w=new ba(new Cn(m),0);let k=new wi(br);return this.gs.forEachWhile(q=>{const ee=q.key.path;return!!o.isPrefixOf(ee)&&(ee.length===h&&(k=k.add(q._s)),!0)},w),At.resolve(this.Is(k))}Is(e){const t=[];return e.forEach(o=>{const h=this.ys(o);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){ir(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return At.forEach(t.mutations,h=>{const m=new ba(h.key,t.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new ba(t,0),h=this.gs.firstAfterOrEqual(o);return At.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return At.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class d_{constructor(e){this.Es=e,this.docs=new Oi(Cn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,h=this.docs.get(o),m=h?h.size:0,w=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:w}),this.size+=w-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return At.resolve(o?o.document.mutableCopy():is.newInvalidDocument(t))}getEntries(e,t){let o=Lo();return t.forEach(h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():is.newInvalidDocument(h))}),At.resolve(o)}getAllFromCollection(e,t,o){let h=Lo();const m=new Cn(t.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:k,value:{document:q}}=w.getNext();if(!t.isPrefixOf(k.path))break;k.path.length>t.length+1||El(Ka(q),o)<=0||(h=h.insert(q.key,q.mutableCopy()))}return At.resolve(h)}getAllFromCollectionGroup(e,t,o,h){$n()}As(e,t){return At.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new h_(this)}getSize(e){return At.resolve(this.size)}}class h_ extends Ah{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,h)=>{h.isValidDocument()?t.push(this.Yn.addEntry(e,h)):this.Yn.removeEntry(o)}),At.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class bm{constructor(e){this.persistence=e,this.Rs=new pl(t=>bl(t),cl),this.lastRemoteSnapshotVersion=or.min(),this.highestTargetId=0,this.bs=0,this.Ps=new cd,this.targetCount=0,this.vs=sr.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,h)=>t(h)),At.resolve()}getLastRemoteSnapshotVersion(e){return At.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return At.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),At.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),At.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new sr(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,At.resolve()}updateTargetData(e,t){return this.Dn(t),At.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,At.resolve()}removeTargets(e,t,o){let h=0;const m=[];return this.Rs.forEach((w,k)=>{k.sequenceNumber<=t&&null===o.get(k.targetId)&&(this.Rs.delete(w),m.push(this.removeMatchingKeysForTargetId(e,k.targetId)),h++)}),At.waitFor(m).next(()=>h)}getTargetCount(e){return At.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return At.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),At.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const h=this.persistence.referenceDelegate,m=[];return h&&t.forEach(w=>{m.push(h.markPotentiallyOrphaned(e,w))}),At.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),At.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return At.resolve(o)}containsKey(e,t){return At.resolve(this.Ps.containsKey(t))}}class Tf{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new qs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new bm(this),this.indexManager=new xp,this.remoteDocumentCache=new d_(o=>this.referenceDelegate.xs(o)),this.It=new bh(t),this.Ns=new vm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new Em(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){sn("MemoryPersistence","Starting transaction:",e);const h=new wm(this.Ss.next());return this.referenceDelegate.ks(),o(h).next(m=>this.referenceDelegate.Os(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Ms(e,t){return At.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class wm extends lo{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.Fs=new cd,this.$s=null}static Bs(e){return new Pp(e)}get Ls(){if(this.$s)return this.$s;throw $n()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),At.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),At.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),At.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(h=>this.Ls.add(h.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(m=>this.Ls.add(m.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return At.forEach(this.Ls,o=>{const h=Cn.fromPath(o);return this.Us(e,h).next(m=>{m||t.removeEntry(h,or.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return At.or([()=>At.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Im{constructor(e){this.It=e}$(e,t,o,h){const m=new Po("createOrUpgrade",t);var k;o<1&&h>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kc,{unique:!0}),k.createObjectStore("documentMutations"),Cm(e),function(k){k.createObjectStore("remoteDocuments")}(e));let w=At.resolve();return o<3&&h>=3&&(0!==o&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),Cm(e)),w=w.next(()=>function(k){const q=k.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:or.min().toTimestamp(),targetCount:0};return q.put("targetGlobalKey",ee)}(m))),o<4&&h>=4&&(0!==o&&(w=w.next(()=>function(k,q){return q.store("mutations").W().next(ee=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kc,{unique:!0});const me=q.store("mutations"),We=ee.map(xt=>me.put(xt));return At.waitFor(We)})}(e,m))),w=w.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&h>=5&&(w=w.next(()=>this.qs(m))),o<6&&h>=6&&(w=w.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),o<7&&h>=7&&(w=w.next(()=>this.Gs(m))),o<8&&h>=8&&(w=w.next(()=>this.Qs(e,m))),o<9&&h>=9&&(w=w.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&h>=10&&(w=w.next(()=>this.js(m))),o<11&&h>=11&&(w=w.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&h>=12&&(w=w.next(()=>{!function(k){const q=k.createObjectStore("documentOverlays",{keyPath:pm});q.createIndex("collectionPathOverlayIndex",_f,{unique:!1}),q.createIndex("collectionGroupOverlayIndex",Cp,{unique:!1})}(e)})),o<13&&h>=13&&(w=w.next(()=>function(k){const q=k.createObjectStore("remoteDocumentsV14",{keyPath:gf});q.createIndex("documentKeyIndex",mf),q.createIndex("collectionGroupIndex",Eh)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&h>=14&&(w=w.next(()=>this.zs(e,m))),o<15&&h>=15&&(w=w.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:yf}).createIndex("sequenceNumberIndex",bp,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:wp}).createIndex("documentKeyIndex",Ip,{unique:!1})}(e))),w}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,h)=>{t+=Re(h)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(h=>At.forEach(h,m=>{const w=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",w).next(k=>At.forEach(k,q=>{ir(q.userId===m.userId);const ee=rc(this.It,q);return ae(e,m.userId,ee).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return o.Z((w,k)=>{const q=new Qn(w),ee=[0,zo(q)];m.push(t.get(ee).next(me=>me?At.resolve():t.put({targetId:0,path:zo(q),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>At.waitFor(m))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Ep});const o=t.store("collectionParents"),h=new ud,m=w=>{if(h.add(w)){const k=w.lastSegment(),q=w.popLast();return o.put({collectionId:k,parent:zo(q)})}};return t.store("remoteDocuments").Z({X:!0},(w,k)=>{const q=new Qn(w);return m(q.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([w,k,q],ee)=>{const me=Va(k);return m(me.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,h)=>{const m=Pc(h),w=wf(this.It,m);return t.put(w)})}Ws(e,t){const o=t.store("remoteDocuments"),h=[];return o.Z((m,w)=>{const k=t.store("remoteDocumentsV14"),q=(ee=w,ee.document?new Cn(Qn.fromString(ee.document.name).popFirst(5)):ee.noDocument?Cn.fromSegments(ee.noDocument.path):ee.unknownDocument?Cn.fromSegments(ee.unknownDocument.path):$n()).path.toArray();var ee;const me={prefixPath:q.slice(0,q.length-2),collectionGroup:q[q.length-2],documentId:q[q.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};h.push(k.put(me))}).next(()=>At.waitFor(h))}zs(e,t){const o=t.store("mutations"),h=Rp(this.It),m=new Tf(Pp.Bs,this.It.re);return o.W().next(w=>{const k=new Map;return w.forEach(q=>{var ee;let me=null!==(ee=k.get(q.userId))&&void 0!==ee?ee:Ur();rc(this.It,q).keys().forEach(We=>me=me.add(We)),k.set(q.userId,me)}),At.forEach(k,(q,ee)=>{const me=new bi(ee),We=Fd.oe(this.It,me),xt=m.getIndexManager(me),Qt=Ge.oe(me,this.It,xt,m.referenceDelegate);return new Df(h,Qt,We,xt).recalculateAndSaveOverlaysForDocumentKeys(new ia(t,qs.at),q).next()})})}}function Cm(i){i.createObjectStore("targetDocuments",{keyPath:_p}).createIndex("documentTargetsIndex",vp,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ad,{unique:!0}),i.createObjectStore("targetGlobal")}const Sf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Np{constructor(e,t,o,h,m,w,k,q,ee,me,We=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=m,this.window=w,this.document=k,this.Js=ee,this.Ys=me,this.Xs=We,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=xt=>Promise.resolve(),!Np.C())throw new en(Ft.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new u_(this,h),this.ii=t+"main",this.It=new bh(q),this.ri=new vo(this.ii,this.Xs,new Im(this.It)),this.Cs=new xi(this.referenceDelegate,this.It),this.remoteDocumentCache=Rp(this.It),this.Ns=new Gl,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===me&&Ri("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new en(Ft.FAILED_PRECONDITION,Sf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new qs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,te.Z)(function*(h){if(t.started)return e(h)});return function(h){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,te.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,te.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Uo(e))return sn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return sn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Rh(e).get("owner").next(t=>At.resolve(this.mi(t)))}gi(e){return yl(e).delete(this.clientId)}yi(){var e=this;return(0,te.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const h=Io(o,"clientMetadata");return h.W().next(m=>{const w=e.Ii(m,18e5),k=m.filter(q=>-1===w.indexOf(q));return At.forEach(k,q=>h.delete(q.clientId)).next(()=>k)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?At.resolve(!0):Rh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new en(Ft.FAILED_PRECONDITION,Sf);return!1}}return!(!this.networkEnabled||!this.inForeground)||yl(e).W().next(o=>void 0===this.Ii(o,5e3).find(h=>{if(this.clientId!==h.clientId){const w=!this.inForeground&&h.inForeground,k=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||w&&k)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&sn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,te.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new ia(t,qs.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>yl(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Ge.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cf(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Fd.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){sn("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",m=15===(w=this.Xs)?Tp:14===w?Ef:13===w?kd:12===w?Dp:11===w?vf:void $n();var w;let k;return this.ri.runTransaction(e,h,m,q=>(k=new ia(q,this.Ss?this.Ss.next():qs.at),"readwrite-primary"===t?this.fi(k).next(ee=>!!ee||this.di(k)).next(ee=>{if(!ee)throw Ri(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new en(Ft.FAILED_PRECONDITION,Fl);return o(k)}).next(ee=>this.wi(k).next(()=>ee)):this.Vi(k).next(()=>o(k)))).then(q=>(k.raiseOnCommittedEvent(),q))}Vi(e){return Rh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new en(Ft.FAILED_PRECONDITION,Sf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rh(e).put("owner",t)}static C(){return vo.C()}_i(e){const t=Rh(e);return t.get("owner").next(o=>this.mi(o)?(sn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):At.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Ri(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Je.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return sn("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Ri("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ri("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rh(i){return Io(i,"owner")}function yl(i){return Io(i,"clientMetadata")}function Fp(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Af{constructor(e,t,o,h){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=h}static Ci(e,t){let o=Ur(),h=Ur();for(const m of t.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Af(e,t.fromCache,o,h)}}class Dm{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,h){return this.ki(e,t).next(m=>m||this.Oi(e,t,h,o)).next(m=>m||this.Mi(e,t))}ki(e,t){if(Cu(t))return At.resolve(null);let o=_a(t);return this.indexManager.getIndexType(e,o).next(h=>0===h?null:(null!==t.limit&&1===h&&(t=Du(t,null,"F"),o=_a(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(m=>{const w=Ur(...m);return this.Ni.getDocuments(e,w).next(k=>this.indexManager.getMinOffset(e,o).next(q=>{const ee=this.Fi(t,k);return this.$i(t,ee,w,q.readTime)?this.ki(e,Du(t,null,"F")):this.Bi(e,ee,t,q)}))})))}Oi(e,t,o,h){return Cu(t)||h.isEqual(or.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(m=>{const w=this.Fi(t,m);return this.$i(t,w,o,h)?this.Mi(e,t):(_o()<=Te.in.DEBUG&&sn("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Wu(t)),this.Bi(e,w,t,Ps(h,-1)))})}Fi(e,t){let o=new wi(mh(e));return t.forEach((h,m)=>{Tc(e,m)&&(o=o.add(m))}),o}$i(e,t,o,h){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Mi(e,t){return _o()<=Te.in.DEBUG&&sn("QueryEngine","Using full collection scan to execute query:",Wu(t)),this.Ni.getDocumentsMatchingQuery(e,t,ps.min())}Bi(e,t,o,h){return this.Ni.getDocumentsMatchingQuery(e,o,h).next(m=>(t.forEach(w=>{m=m.insert(w.key,w)}),m))}}class f_{constructor(e,t,o,h){this.persistence=e,this.Li=t,this.It=h,this.Ui=new Oi(br),this.qi=new pl(m=>bl(m),cl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Df(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Tm(i,e,t,o){return new f_(i,e,t,o)}function Sm(i,e){return xf.apply(this,arguments)}function xf(){return xf=(0,te.Z)(function*(i,e){const t=An(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let h;return t.mutationQueue.getAllMutationBatches(o).next(m=>(h=m,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(m=>{const w=[],k=[];let q=Ur();for(const ee of h){w.push(ee.batchId);for(const me of ee.mutations)q=q.add(me.key)}for(const ee of m){k.push(ee.batchId);for(const me of ee.mutations)q=q.add(me.key)}return t.localDocuments.getDocuments(o,q).next(ee=>({ji:ee,removedBatchIds:w,addedBatchIds:k}))})})}),xf.apply(this,arguments)}function p_(i,e){const t=An(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const h=e.batch.keys(),m=t.Gi.newChangeBuffer({trackRemovals:!0});return function(w,k,q,ee){const me=q.batch,We=me.keys();let xt=At.resolve();return We.forEach(Qt=>{xt=xt.next(()=>ee.getEntry(k,Qt)).next(nn=>{const Gn=q.docVersions.get(Qt);ir(null!==Gn),nn.version.compareTo(Gn)<0&&(me.applyToRemoteDocument(nn,q),nn.isValidDocument()&&(nn.setReadTime(q.commitVersion),ee.addEntry(nn)))})}),xt.next(()=>w.mutationQueue.removeMutationBatch(k,me))}(t,o,e,m).next(()=>m.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(w){let k=Ur();for(let q=0;q<w.mutationResults.length;++q)w.mutationResults[q].transformResults.length>0&&(k=k.add(w.batch.mutations[q].key));return k}(e))).next(()=>t.localDocuments.getDocuments(o,h))})}function Am(i){const e=An(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function g_(i,e){const t=An(i),o=e.snapshotVersion;let h=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const w=t.Gi.newChangeBuffer({trackRemovals:!0});h=t.Ui;const k=[];e.targetChanges.forEach((me,We)=>{const xt=h.get(We);if(!xt)return;k.push(t.Cs.removeMatchingKeys(m,me.removedDocuments,We).next(()=>t.Cs.addMatchingKeys(m,me.addedDocuments,We)));let Qt=xt.withSequenceNumber(m.currentSequenceNumber);var nn,Gn,tr;e.targetMismatches.has(We)?Qt=Qt.withResumeToken(j.EMPTY_BYTE_STRING,or.min()).withLastLimboFreeSnapshotVersion(or.min()):me.resumeToken.approximateByteSize()>0&&(Qt=Qt.withResumeToken(me.resumeToken,o)),h=h.insert(We,Qt),Gn=Qt,tr=me,(0===(nn=xt).resumeToken.approximateByteSize()||Gn.snapshotVersion.toMicroseconds()-nn.snapshotVersion.toMicroseconds()>=3e8||tr.addedDocuments.size+tr.modifiedDocuments.size+tr.removedDocuments.size>0)&&k.push(t.Cs.updateTargetData(m,Qt))});let q=Lo(),ee=Ur();if(e.documentUpdates.forEach(me=>{e.resolvedLimboDocuments.has(me)&&k.push(t.persistence.referenceDelegate.updateLimboDocument(m,me))}),k.push(oi(m,w,e.documentUpdates).next(me=>{q=me.Wi,ee=me.zi})),!o.isEqual(or.min())){const me=t.Cs.getLastRemoteSnapshotVersion(m).next(We=>t.Cs.setTargetsMetadata(m,m.currentSequenceNumber,o));k.push(me)}return At.waitFor(k).next(()=>w.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,q,ee)).next(()=>q)}).then(m=>(t.Ui=h,m))}function oi(i,e,t){let o=Ur(),h=Ur();return t.forEach(m=>o=o.add(m)),e.getEntries(i,o).next(m=>{let w=Lo();return t.forEach((k,q)=>{const ee=m.get(k);q.isFoundDocument()!==ee.isFoundDocument()&&(h=h.add(k)),q.isNoDocument()&&q.version.isEqual(or.min())?(e.removeEntry(k,q.readTime),w=w.insert(k,q)):!ee.isValidDocument()||q.version.compareTo(ee.version)>0||0===q.version.compareTo(ee.version)&&ee.hasPendingWrites?(e.addEntry(q),w=w.insert(k,q)):sn("LocalStore","Ignoring outdated watch update for ",k,". Current version:",ee.version," Watch version:",q.version)}),{Wi:w,zi:h}})}function xm(i,e){const t=An(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function dd(i,e){const t=An(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let h;return t.Cs.getTargetData(o,e).next(m=>m?(h=m,At.resolve(h)):t.Cs.allocateTargetId(o).next(w=>(h=new Ea(e,w,0,o.currentSequenceNumber),t.Cs.addTargetData(o,h).next(()=>h))))}).then(o=>{const h=t.Ui.get(o.targetId);return(null===h||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function hd(i,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,te.Z)(function*(i,e,t){const o=An(i),h=o.Ui.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",m,w=>o.persistence.referenceDelegate.removeTarget(w,h)))}catch(w){if(!Uo(w))throw w;sn("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}o.Ui=o.Ui.remove(e),o.qi.delete(h.target)}),Lp.apply(this,arguments)}function Mf(i,e,t){const o=An(i);let h=or.min(),m=Ur();return o.persistence.runTransaction("Execute query","readonly",w=>function(k,q,ee){const me=An(k),We=me.qi.get(ee);return void 0!==We?At.resolve(me.Ui.get(We)):me.Cs.getTargetData(q,ee)}(o,w,_a(e)).next(k=>{if(k)return h=k.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(w,k.targetId).next(q=>{m=q})}).next(()=>o.Li.getDocumentsMatchingQuery(w,e,t?h:or.min(),t?m:Ur())).next(k=>(Vp(o,Kc(e),k),{documents:k,Hi:m})))}function Bp(i,e){const t=An(i),o=An(t.Cs),h=t.Ui.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",m=>o.se(m,e).next(w=>w?w.target:null))}function Mm(i,e){const t=An(i),o=t.Ki.get(e)||or.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Gi.getAllFromCollectionGroup(h,e,Ps(o,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Vp(t,e,h),h))}function Vp(i,e,t){let o=i.Ki.get(e)||or.min();t.forEach((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)}),i.Ki.set(e,o)}function $p(){return $p=(0,te.Z)(function*(i,e,t,o){const h=An(i);let m=Ur(),w=Lo();for(const ee of t){const me=e.Ji(ee.metadata.name);ee.document&&(m=m.add(me));const We=e.Yi(ee);We.setReadTime(e.Xi(ee.metadata.readTime)),w=w.insert(me,We)}const k=h.Gi.newChangeBuffer({trackRemovals:!0}),q=yield dd(h,(ee=o,_a(wl(Qn.fromString(`__bundle__/docs/${ee}`)))));var ee;return h.persistence.runTransaction("Apply bundle documents","readwrite",ee=>oi(ee,k,w).next(me=>(k.apply(ee),me)).next(me=>h.Cs.removeMatchingKeysForTargetId(ee,q.targetId).next(()=>h.Cs.addMatchingKeys(ee,m,q.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(ee,me.Wi,me.zi)).next(()=>me.Wi)))}),$p.apply(this,arguments)}function d0(i,e){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,te.Z)(function*(i,e,t=Ur()){const o=yield dd(i,_a(Pd(e.bundledQuery))),h=An(i);return h.persistence.runTransaction("Save named query","readwrite",m=>{const w=ws(e.readTime);if(o.snapshotVersion.compareTo(w)>=0)return h.Ns.saveNamedQuery(m,e);const k=o.withResumeToken(j.EMPTY_BYTE_STRING,w);return h.Ui=h.Ui.insert(k.targetId,k),h.Cs.updateTargetData(m,k).next(()=>h.Cs.removeMatchingKeysForTargetId(m,o.targetId)).next(()=>h.Cs.addMatchingKeys(m,t,o.targetId)).next(()=>h.Ns.saveNamedQuery(m,e))})}),Rf.apply(this,arguments)}function Up(i,e){return`firestore_clients_${i}_${e}`}function Fc(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function jp(i,e){return`firestore_targets_${i}_${e}`}class Vd{constructor(e,t,o,h){this.user=e,this.batchId=t,this.state=o,this.error=h}static Zi(e,t,o){const h=JSON.parse(o);let m,w="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return w&&h.error&&(w="string"==typeof h.error.message&&"string"==typeof h.error.code,w&&(m=new en(h.error.code,h.error.message))),w?new Vd(e,t,h.state,m):(Ri("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fd{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let h,m="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return m&&o.error&&(m="string"==typeof o.error.message&&"string"==typeof o.error.code,m&&(h=new en(o.error.code,o.error.message))),m?new fd(e,o.state,h):(Ri("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Of{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let h="object"==typeof o&&o.activeTargetIds instanceof Array,m=hu();for(let w=0;h&&w<o.activeTargetIds.length;++w)h=gn(o.activeTargetIds[w]),m=m.add(o.activeTargetIds[w]);return h?new Of(e,m):(Ri("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Rm{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Rm(t.clientId,t.onlineState):(Ri("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Om{constructor(){this.activeTargetIds=hu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class km{constructor(e,t,o,h,m){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Oi(br),this.started=!1,this.cr=[];const w=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Up(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Om),this.lr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,te.Z)(function*(){const t=yield e.syncEngine.vi();for(const h of t){if(h===e.sr)continue;const m=e.getItem(Up(e.persistenceKey,h));if(m){const w=Of.Zi(h,m);w&&(e.ur=e.ur.insert(w.clientId,w))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const h=e.yr(o);h&&e.pr(h)}for(const h of e.cr)e.rr(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(jp(this.persistenceKey,e));if(o){const h=fd.Zi(e,o);h&&(t=h.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(h=>{this.Er(h)}),this.currentUser=e,o.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return sn("SharedClientState","READ",e,t),t}setItem(e,t){sn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){sn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(sn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Ri("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,te.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const h=t.vr(o.key);return t.Vr(h,null)}{const h=t.Sr(o.key,o.newValue);if(h)return t.Vr(h.clientId,h)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const h=t.Dr(o.key,o.newValue);if(h)return t.Cr(h)}}else if(t._r.test(o.key)){if(null!==o.newValue){const h=t.Nr(o.key,o.newValue);if(h)return t.kr(h)}}else if(o.key===t.wr){if(null!==o.newValue){const h=t.yr(o.newValue);if(h)return t.pr(h)}}else if(o.key===t.hr){const h=function(m){let w=qs.at;if(null!=m)try{const k=JSON.parse(m);ir("number"==typeof k),w=k}catch(k){Ri("SharedClientState","Failed to read sequence number from WebStorage",k)}return w}(o.newValue);h!==qs.at&&t.sequenceNumberHandler(h)}else if(o.key===t.mr){const h=t.Or(o.newValue);yield Promise.all(h.map(m=>t.syncEngine.Mr(m)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const h=new Vd(this.currentUser,e,t,o),m=Fc(this.persistenceKey,this.currentUser,e);this.setItem(m,h.tr())}Er(e){const t=Fc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const h=jp(this.persistenceKey,e),m=new fd(e,t,o);this.setItem(h,m.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return Of.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),h=Number(o[1]);return Vd.Zi(new bi(void 0!==o[2]?o[2]:null),h,t)}Nr(e,t){const o=this._r.exec(e),h=Number(o[1]);return fd.Zi(h,t)}yr(e){return Rm.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);sn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),h=this.Ir(this.ur),m=this.Ir(o),w=[],k=[];return m.forEach(q=>{h.has(q)||w.push(q)}),h.forEach(q=>{m.has(q)||k.push(q)}),this.syncEngine.Br(w,k).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=hu();return e.forEach((o,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class Pm{constructor(){this.Lr=new Om,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Om,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Nm{qr(e){}shutdown(){}}class y_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){sn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){sn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const __={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $d{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class v_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,h,m){const w=this.ho(e,t);sn("RestConnection","Sending: ",w,o);const k={};return this.lo(k,h,m),this.fo(e,w,k,o).then(q=>(sn("RestConnection","Received: ",q),q),q=>{throw ha("RestConnection",`${e} failed with error: `,q,"url: ",w,"request:",o),q})}_o(e,t,o,h,m,w){return this.ao(e,t,o,h,m)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+to,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,m)=>e[m]=h),o&&o.headers.forEach((h,m)=>e[m]=h)}ho(e,t){return`${this.oo}/v1/${t}:${__[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,h){return new Promise((m,w)=>{const k=new qa;k.setWithCredentials(!0),k.listenOnce(za.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case $o.NO_ERROR:const ee=k.getResponseJson();sn("Connection","XHR received:",JSON.stringify(ee)),m(ee);break;case $o.TIMEOUT:sn("Connection",'RPC "'+e+'" timed out'),w(new en(Ft.DEADLINE_EXCEEDED,"Request time out"));break;case $o.HTTP_ERROR:const me=k.getStatus();if(sn("Connection",'RPC "'+e+'" failed with status:',me,"response text:",k.getResponseText()),me>0){const We=k.getResponseJson().error;if(We&&We.status&&We.message){const xt=function(Qt){const nn=Qt.toLowerCase().replace(/_/g,"-");return Object.values(Ft).indexOf(nn)>=0?nn:Ft.UNKNOWN}(We.status);w(new en(xt,We.message))}else w(new en(Ft.UNKNOWN,"Server responded with status "+k.getStatus()))}else w(new en(Ft.UNAVAILABLE,"Connection failed."));break;default:$n()}}finally{sn("Connection",'RPC "'+e+'" completed.')}});const q=JSON.stringify(h);k.send(t,"POST",q,o,15)})}wo(e,t,o){const h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Xl(),w=xs(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(k.xmlHttpFactory=new da({})),this.lo(k.initMessageHeaders,t,o),k.encodeInitMessageHeaders=!0;const q=h.join("");sn("Connection","Creating WebChannel: "+q,k);const ee=m.createWebChannel(q,k);let me=!1,We=!1;const xt=new $d({Hr:nn=>{We?sn("Connection","Not sending because WebChannel is closed:",nn):(me||(sn("Connection","Opening WebChannel transport."),ee.open(),me=!0),sn("Connection","WebChannel sending:",nn),ee.send(nn))},Jr:()=>ee.close()}),Qt=(nn,Gn,tr)=>{nn.listen(Gn,os=>{try{tr(os)}catch(Hs){setTimeout(()=>{throw Hs},0)}})};return Qt(ee,yo.EventType.OPEN,()=>{We||sn("Connection","WebChannel transport opened.")}),Qt(ee,yo.EventType.CLOSE,()=>{We||(We=!0,sn("Connection","WebChannel transport closed"),xt.io())}),Qt(ee,yo.EventType.ERROR,nn=>{We||(We=!0,ha("Connection","WebChannel transport errored:",nn),xt.io(new en(Ft.UNAVAILABLE,"The operation could not be completed")))}),Qt(ee,yo.EventType.MESSAGE,nn=>{var Gn;if(!We){const tr=nn.data[0];ir(!!tr);const os=tr,Hs=os.error||(null===(Gn=os[0])||void 0===Gn?void 0:Gn.error);if(Hs){sn("Connection","WebChannel received error:",Hs);const Ki=Hs.status;let Bo=function(Fi){const ua=ho[Fi];if(void 0!==ua)return Jc(ua)}(Ki),ji=Hs.message;void 0===Bo&&(Bo=Ft.INTERNAL,ji="Unknown error status: "+Ki+" with message "+Hs.message),We=!0,xt.io(new en(Bo,ji)),ee.close()}else sn("Connection","WebChannel received:",tr),xt.ro(tr)}}),Qt(w,ca.STAT_EVENT,nn=>{nn.stat===Ei.PROXY?sn("Connection","Detected buffering proxy"):nn.stat===Ei.NOPROXY&&sn("Connection","Detected no buffering proxy")}),setTimeout(()=>{xt.so()},0),xt}}function Hp(){return"undefined"!=typeof window?window:null}function pd(){return"undefined"!=typeof document?document:null}function Oh(i){return new Rc(i,!0)}class kf{constructor(e,t,o=1e3,h=1.5,m=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=h,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),h=Math.max(0,t-o);h>0&&sn("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Fm{constructor(e,t,o,h,m,w,k,q){this.Hs=e,this.vo=o,this.Vo=h,this.So=m,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=k,this.listener=q,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new kf(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,te.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,te.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,te.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===Ft.RESOURCE_EXHAUSTED?(Ri(t.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===Ft.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,h])=>{this.Do===t&&this.Qo(o,h)},o=>{e(()=>{const h=new en(Ft.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(h)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(h=>{o(()=>this.jo(h))}),this.stream.onMessage(h=>{o(()=>this.onMessage(h))})}Mo(){var e=this;this.state=5,this.No.Ro((0,te.Z)(function*(){e.state=0,e.start()}))}jo(e){return sn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(sn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class E_ extends Fm{constructor(e,t,o,h,m,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,h,w),this.It=m}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function M(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===q?1:"REMOVE"===q?2:"CURRENT"===q?3:"RESET"===q?4:$n(),h=e.targetChange.targetIds||[],m=function(q,ee){return q.gt?(ir(void 0===ee||"string"==typeof ee),j.fromBase64String(ee||"")):(ir(void 0===ee||ee instanceof Uint8Array),j.fromUint8Array(ee||new Uint8Array))}(i,e.targetChange.resumeToken),w=e.targetChange.cause,k=w&&function(q){const ee=void 0===q.code?Ft.UNKNOWN:Jc(q.code);return new en(ee,q.message||"")}(w);t=new ra(o,h,m,k||null)}else if("documentChange"in e){const o=e.documentChange,h=xa(i,o.document.name),m=ws(o.document.updateTime),w=new Fo({mapValue:{fields:o.document.fields}}),k=is.newFoundDocument(h,m,w);t=new Cl(o.targetIds||[],o.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const o=e.documentDelete,h=xa(i,o.document),m=o.readTime?ws(o.readTime):or.min(),w=is.newNoDocument(h,m);t=new Cl([],o.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const o=e.documentRemove,h=xa(i,o.document);t=new Cl([],o.removedTargetIds||[],h,null)}else{if(!("filter"in e))return $n();{const o=e.filter,m=new xu(o.count||0);t=new Xu(o.targetId,m)}}var q;return t}(this.It,e),o=function(h){if(!("targetChange"in h))return or.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?or.min():m.readTime?ws(m.readTime):or.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=Dl(this.It),t.addTarget=function(h,m){let w;const k=m.target;return w=eu(k)?{documents:jt(h,k)}:{query:_n(h,k)},w.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?w.resumeToken=nd(h,m.resumeToken):m.snapshotVersion.compareTo(or.min())>0&&(w.readTime=Ul(h,m.snapshotVersion.toTimestamp())),w}(this.It,e);const o=function Rr(i,e){const t=function(o,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $n()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=Dl(this.It),t.removeTarget=e,this.Lo(t)}}class b_ extends Fm{constructor(e,t,o,h,m,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,h,w),this.It=m,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(ir(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function ct(i,e){return i&&i.length>0?(ir(void 0!==e),i.map(t=>function(o,h){let m=ws(o.updateTime?o.updateTime:h);return m.isEqual(or.min())&&(m=ws(h)),new Ku(m,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=ws(e.commitTime);return this.listener.tu(o,t)}return ir(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Dl(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Q(this.It,o))};this.Lo(t)}}class w_ extends class{}{constructor(e,t,o,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.It=h,this.su=!1}iu(){if(this.su)throw new en(Ft.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.So.ao(e,t,o,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new en(Ft.UNKNOWN,h.toString())})}_o(e,t,o,h){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,w])=>this.So._o(e,t,o,m,w,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new en(Ft.UNKNOWN,m.toString())})}terminate(){this.su=!0}}class C_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ri(t),this.uu=!1):sn("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Lm{constructor(e,t,o,h,m){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=m,this.gu.qr(k=>{o.enqueueAndForget((0,te.Z)(function*(){var q;oa(w)&&(sn("RemoteStore","Restarting streams for network reachability change."),yield(q=(0,te.Z)(function*(ee){const me=An(ee);me.wu.add(4),yield Ph(me),me.yu.set("Unknown"),me.wu.delete(4),yield Ud(me)}),function(ee){return q.apply(this,arguments)})(w))}))}),this.yu=new C_(o,h)}}function Ud(i){return kh.apply(this,arguments)}function kh(){return kh=(0,te.Z)(function*(i){if(oa(i))for(const e of i.mu)yield e(!0)}),kh.apply(this,arguments)}function Ph(i){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,te.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Nh.apply(this,arguments)}function Nf(i,e){const t=An(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),jd(t)?Lf(t):$h(t).Oo()&&Lc(t,e))}function Ff(i,e){const t=An(i),o=$h(t);t._u.delete(e),o.Oo()&&Gp(t,e),0===t._u.size&&(o.Oo()?o.$o():oa(t)&&t.yu.set("Unknown"))}function Lc(i,e){i.pu.Mt(e.targetId),$h(i).Ho(e)}function Gp(i,e){i.pu.Mt(e),$h(i).Jo(e)}function Lf(i){i.pu=new td({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i._u.get(e)||null}),$h(i).start(),i.yu.cu()}function jd(i){return oa(i)&&!$h(i).ko()&&i._u.size>0}function oa(i){return 0===An(i).wu.size}function Wp(i){i.pu=void 0}function D_(i){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,te.Z)(function*(i){i._u.forEach((e,t)=>{Lc(i,e)})}),Fh.apply(this,arguments)}function cc(i,e){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,te.Z)(function*(i,e){Wp(i),jd(i)?(i.yu.lu(e),Lf(i)):i.yu.set("Unknown")}),Lh.apply(this,arguments)}function Bm(i,e,t){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,te.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof ra&&2===e.state&&e.cause)try{yield(o=(0,te.Z)(function*(h,m){const w=m.cause;for(const k of m.targetIds)h._u.has(k)&&(yield h.remoteSyncer.rejectListen(k,w),h._u.delete(k),h.pu.removeTarget(k))}),function(h,m){return o.apply(this,arguments)})(i,e)}catch(o){sn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield zp(i,o)}else if(e instanceof Cl?i.pu.Gt(e):e instanceof Xu?i.pu.Yt(e):i.pu.Wt(e),!t.isEqual(or.min()))try{const o=yield Am(i.localStore);t.compareTo(o)>=0&&(yield function(h,m){const w=h.pu.te(m);return w.targetChanges.forEach((k,q)=>{if(k.resumeToken.approximateByteSize()>0){const ee=h._u.get(q);ee&&h._u.set(q,ee.withResumeToken(k.resumeToken,m))}}),w.targetMismatches.forEach(k=>{const q=h._u.get(k);if(!q)return;h._u.set(k,q.withResumeToken(j.EMPTY_BYTE_STRING,q.snapshotVersion)),Gp(h,k);const ee=new Ea(q.target,k,1,q.sequenceNumber);Lc(h,ee)}),h.remoteSyncer.applyRemoteEvent(w)}(i,t))}catch(o){sn("RemoteStore","Failed to raise snapshot:",o),yield zp(i,o)}var o}),Bh.apply(this,arguments)}function zp(i,e,t){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,te.Z)(function*(i,e,t){if(!Uo(e))throw e;i.wu.add(1),yield Ph(i),i.yu.set("Offline"),t||(t=()=>Am(i.localStore)),i.asyncQueue.enqueueRetryable((0,te.Z)(function*(){sn("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield Ud(i)}))}),Bf.apply(this,arguments)}function T_(i,e){return e().catch(t=>zp(i,t,e))}function dc(i){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,te.Z)(function*(i){const e=An(i),t=gd(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;qp(e);)try{const h=yield xm(e.localStore,o);if(null===h){0===e.du.length&&t.$o();break}o=h.batchId,Yp(e,h)}catch(h){yield zp(e,h)}Vf(e)&&S_(e)}),Hd.apply(this,arguments)}function qp(i){return oa(i)&&i.du.length<10}function Yp(i,e){i.du.push(e);const t=gd(i);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function Vf(i){return oa(i)&&!gd(i).ko()&&i.du.length>0}function S_(i){gd(i).start()}function A_(i){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,te.Z)(function*(i){gd(i).nu()}),Kp.apply(this,arguments)}function x_(i){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,te.Z)(function*(i){const e=gd(i);for(const t of i.du)e.Zo(t.mutations)}),Zp.apply(this,arguments)}function Vm(i,e,t){return $m.apply(this,arguments)}function $m(){return $m=(0,te.Z)(function*(i,e,t){const o=i.du.shift(),h=po.from(o,e,t);yield T_(i,()=>i.remoteSyncer.applySuccessfulWrite(h)),yield dc(i)}),$m.apply(this,arguments)}function M_(i,e){return Um.apply(this,arguments)}function Um(){return Um=(0,te.Z)(function*(i,e){var t;e&&gd(i).Xo&&(yield(t=(0,te.Z)(function*(o,h){if(Mu(m=h.code)&&m!==Ft.ABORTED){const w=o.du.shift();gd(o).Fo(),yield T_(o,()=>o.remoteSyncer.rejectFailedWrite(w.batchId,h)),yield dc(o)}var m}),function(o,h){return t.apply(this,arguments)})(i,e)),Vf(i)&&S_(i)}),Um.apply(this,arguments)}function Qp(i,e){return $f.apply(this,arguments)}function $f(){return $f=(0,te.Z)(function*(i,e){const t=An(i);t.asyncQueue.verifyOperationInProgress(),sn("RemoteStore","RemoteStore received new credentials");const o=oa(t);t.wu.add(3),yield Ph(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Ud(t)}),$f.apply(this,arguments)}function Xp(i,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,te.Z)(function*(i,e){const t=An(i);e?(t.wu.delete(2),yield Ud(t)):e||(t.wu.add(2),yield Ph(t),t.yu.set("Unknown"))}),Vh.apply(this,arguments)}function $h(i){return i.Iu||(i.Iu=function(e,t,o){const h=An(e);return h.iu(),new E_(t,h.So,h.authCredentials,h.appCheckCredentials,h.It,o)}(i.datastore,i.asyncQueue,{Yr:D_.bind(null,i),Zr:cc.bind(null,i),zo:Bm.bind(null,i)}),i.mu.push(function(){var e=(0,te.Z)(function*(t){t?(i.Iu.Fo(),jd(i)?Lf(i):i.yu.set("Unknown")):(yield i.Iu.stop(),Wp(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function gd(i){return i.Tu||(i.Tu=function(e,t,o){const h=An(e);return h.iu(),new b_(t,h.So,h.authCredentials,h.appCheckCredentials,h.It,o)}(i.datastore,i.asyncQueue,{Yr:A_.bind(null,i),Zr:M_.bind(null,i),eu:x_.bind(null,i),tu:Vm.bind(null,i)}),i.mu.push(function(){var e=(0,te.Z)(function*(t){t?(i.Tu.Fo(),yield dc(i)):(yield i.Tu.stop(),i.du.length>0&&(sn("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class jm{constructor(e,t,o,h,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,o,h,m){const w=Date.now()+o,k=new jm(e,t,w,h,m);return k.start(o),k}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new en(Ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uh(i,e){if(Ri("AsyncQueue",`${e}: ${i}`),Uo(i))return new en(Ft.UNAVAILABLE,`${e}: ${i}`);throw i}class jh{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Cn.comparator(t.key,o.key):(t,o)=>Cn.comparator(t.key,o.key),this.keyedMap=Ys(),this.sortedSet=new Oi(this.comparator)}static emptySet(e){return new jh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new jh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class R_{constructor(){this.Eu=new Oi(Cn.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):$n():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Hh{constructor(e,t,o,h,m,w,k,q,ee){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=w,this.syncStateChanged=k,this.excludesMetadataChanges=q,this.hasCachedResults=ee}static fromInitialDocuments(e,t,o,h,m){const w=[];return t.forEach(k=>{w.push({type:0,doc:k})}),new Hh(e,t,jh.emptySet(t),w,o,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==o[h].type||!t[h].doc.isEqual(o[h].doc))return!1;return!0}}class h0{constructor(){this.Ru=void 0,this.listeners=[]}}class f0{constructor(){this.queries=new pl(e=>Ta(e),Gu),this.onlineState="Unknown",this.bu=new Set}}function Hm(i,e){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,te.Z)(function*(i,e){const t=An(i),o=e.query;let h=!1,m=t.queries.get(o);if(m||(h=!0,m=new h0),h)try{m.Ru=yield t.onListen(o)}catch(w){const k=Uh(w,`Initialization of query '${Wu(e.query)}' failed`);return void e.onError(k)}t.queries.set(o,m),m.listeners.push(e),e.Pu(t.onlineState),m.Ru&&e.vu(m.Ru)&&Uf(t)}),Fu.apply(this,arguments)}function Gh(i,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,te.Z)(function*(i,e){const t=An(i),o=e.query;let h=!1;const m=t.queries.get(o);if(m){const w=m.listeners.indexOf(e);w>=0&&(m.listeners.splice(w,1),h=0===m.listeners.length)}if(h)return t.queries.delete(o),t.onUnlisten(o)}),Jp.apply(this,arguments)}function Gm(i,e){const t=An(i);let o=!1;for(const h of e){const w=t.queries.get(h.query);if(w){for(const k of w.listeners)k.vu(h)&&(o=!0);w.Ru=h}}o&&Uf(t)}function eg(i,e,t){const o=An(i),h=o.queries.get(e);if(h)for(const m of h.listeners)m.onError(t);o.queries.delete(e)}function Uf(i){i.bu.forEach(e=>{e.next()})}class Wh{constructor(e,t,o){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)3!==h.type&&o.push(h);e=new Hh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class O_{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class hc{constructor(e){this.It=e}Ji(e){return xa(this.It,e)}Yi(e){return e.metadata.exists?g(this.It,e.document,!1):is.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ws(e)}}class Wm{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zm(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Qn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new hc(this.It);for(const h of e)if(h.metadata.queries){const m=o.Ji(h.metadata.name);for(const w of h.metadata.queries){const k=(t.get(w)||Ur()).add(m);t.set(w,k)}}return t}complete(){var e=this;return(0,te.Z)(function*(){const t=yield function m_(i,e,t,o){return $p.apply(this,arguments)}(e.localStore,new hc(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const h of e.queries)yield d0(e.localStore,h,o.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function zm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class qm{constructor(e){this.key=e}}class tg{constructor(e){this.key=e}}class Ym{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ur(),this.mutatedKeys=Ur(),this.Gu=mh(e),this.Qu=new jh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new R_,h=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,w=h,k=!1;const q="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,ee="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((me,We)=>{const xt=h.get(me),Qt=Tc(this.query,We)?We:null,nn=!!xt&&this.mutatedKeys.has(xt.key),Gn=!!Qt&&(Qt.hasLocalMutations||this.mutatedKeys.has(Qt.key)&&Qt.hasCommittedMutations);let tr=!1;xt&&Qt?xt.data.isEqual(Qt.data)?nn!==Gn&&(o.track({type:3,doc:Qt}),tr=!0):this.Hu(xt,Qt)||(o.track({type:2,doc:Qt}),tr=!0,(q&&this.Gu(Qt,q)>0||ee&&this.Gu(Qt,ee)<0)&&(k=!0)):!xt&&Qt?(o.track({type:0,doc:Qt}),tr=!0):xt&&!Qt&&(o.track({type:1,doc:xt}),tr=!0,(q||ee)&&(k=!0)),tr&&(Qt?(w=w.add(Qt),m=Gn?m.add(me):m.delete(me)):(w=w.delete(me),m=m.delete(me)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const me="F"===this.query.limitType?w.last():w.first();w=w.delete(me.key),m=m.delete(me.key),o.track({type:1,doc:me})}return{Qu:w,zu:o,$i:k,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Au();m.sort((ee,me)=>function(We,xt){const Qt=nn=>{switch(nn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $n()}};return Qt(We)-Qt(xt)}(ee.type,me.type)||this.Gu(ee.doc,me.doc)),this.Ju(o);const w=t?this.Yu():[],k=0===this.Ku.size&&this.current?1:0,q=k!==this.qu;return this.qu=k,0!==m.length||q?{snapshot:new Hh(this.query,e.Qu,h,m,e.mutatedKeys,0===k,q,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:w}:{Xu:w}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new R_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ur(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new tg(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new qm(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ur();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Hh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class k_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class jf{constructor(e){this.key=e,this.nc=!1}}class Gd{constructor(e,t,o,h,m,w){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=w,this.sc={},this.ic=new pl(k=>Ta(k),Gu),this.rc=new Map,this.oc=new Set,this.uc=new Oi(Cn.comparator),this.cc=new Map,this.ac=new cd,this.hc={},this.lc=new Map,this.fc=sr.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function ng(i,e){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,te.Z)(function*(i,e){const t=_g(i);let o,h;const m=t.ic.get(e);if(m)o=m.targetId,t.sharedClientState.addLocalQueryTarget(o),h=m.view.ec();else{const w=yield dd(t.localStore,_a(e));t.isPrimaryClient&&Nf(t.remoteStore,w);const k=t.sharedClientState.addLocalQueryTarget(w.targetId);o=w.targetId,h=yield zh(t,e,o,"current"===k,w.resumeToken)}return h}),Bc.apply(this,arguments)}function zh(i,e,t,o,h){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,te.Z)(function*(i,e,t,o,h){i._c=(We,xt,Qt)=>{return(nn=(0,te.Z)(function*(Gn,tr,os,Hs){let Ki=tr.view.Wu(os);Ki.$i&&(Ki=yield Mf(Gn.localStore,tr.query,!1).then(({documents:Fi})=>tr.view.Wu(Fi,Ki)));const Bo=Hs&&Hs.targetChanges.get(tr.targetId),ji=tr.view.applyChanges(Ki,Gn.isPrimaryClient,Bo);return Zh(Gn,tr.targetId,ji.Xu),ji.snapshot}),function(Gn,tr,os,Hs){return nn.apply(this,arguments)})(i,We,xt,Qt);var nn};const m=yield Mf(i.localStore,e,!0),w=new Ym(e,m.Hi),k=w.Wu(m.documents),q=Qu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,h),ee=w.applyChanges(k,i.isPrimaryClient,q);Zh(i,t,ee.Xu);const me=new k_(e,t,w);return i.ic.set(e,me),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),ee.snapshot}),Wd.apply(this,arguments)}function Km(i,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,te.Z)(function*(i,e){const t=An(i),o=t.ic.get(e),h=t.rc.get(o.targetId);if(h.length>1)return t.rc.set(o.targetId,h.filter(m=>!Gu(m,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield hd(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Ff(t.remoteStore,o.targetId),Kh(t,o.targetId)}).catch(Ns))):(Kh(t,o.targetId),yield hd(t.localStore,o.targetId,!0))}),Hf.apply(this,arguments)}function qh(){return qh=(0,te.Z)(function*(i,e,t){const o=zd(i);try{const h=yield function(m,w){const k=An(m),q=Pr.now(),ee=w.reduce((xt,Qt)=>xt.add(Qt.key),Ur());let me,We;return k.persistence.runTransaction("Locally write mutations","readwrite",xt=>{let Qt=Lo(),nn=Ur();return k.Gi.getEntries(xt,ee).next(Gn=>{Qt=Gn,Qt.forEach((tr,os)=>{os.isValidDocument()||(nn=nn.add(tr))})}).next(()=>k.localDocuments.getOverlayedDocuments(xt,Qt)).next(Gn=>{me=Gn;const tr=[];for(const os of w){const Hs=lu(os,me.get(os.key).overlayedDocument);null!=Hs&&tr.push(new fl(os.key,Hs,Cd(Hs.value.mapValue),vs.exists(!0)))}return k.mutationQueue.addMutationBatch(xt,q,tr,w)}).next(Gn=>{We=Gn;const tr=Gn.applyToLocalDocumentSet(me,nn);return k.documentOverlayCache.saveOverlays(xt,Gn.batchId,tr)})}).then(()=>({batchId:We.batchId,changes:$l(me)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),function(m,w,k){let q=m.hc[m.currentUser.toKey()];q||(q=new Oi(br)),q=q.insert(w,k),m.hc[m.currentUser.toKey()]=q}(o,h.batchId,t),yield fc(o,h.changes),yield dc(o.remoteStore)}catch(h){const m=Uh(h,"Failed to persist write");t.reject(m)}}),qh.apply(this,arguments)}function ig(i,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,te.Z)(function*(i,e){const t=An(i);try{const o=yield g_(t.localStore,e);e.targetChanges.forEach((h,m)=>{const w=t.cc.get(m);w&&(ir(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?w.nc=!0:h.modifiedDocuments.size>0?ir(w.nc):h.removedDocuments.size>0&&(ir(w.nc),w.nc=!1))}),yield fc(t,o,e)}catch(o){yield Ns(o)}}),Yh.apply(this,arguments)}function Zm(i,e,t){const o=An(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const h=[];o.ic.forEach((m,w)=>{const k=w.view.Pu(e);k.snapshot&&h.push(k.snapshot)}),function(m,w){const k=An(m);k.onlineState=w;let q=!1;k.queries.forEach((ee,me)=>{for(const We of me.listeners)We.Pu(w)&&(q=!0)}),q&&Uf(k)}(o.eventManager,e),h.length&&o.sc.zo(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function p0(i,e,t){return sg.apply(this,arguments)}function sg(){return sg=(0,te.Z)(function*(i,e,t){const o=An(i);o.sharedClientState.updateQueryState(e,"rejected",t);const h=o.cc.get(e),m=h&&h.key;if(m){let w=new Oi(Cn.comparator);w=w.insert(m,is.newNoDocument(m,or.min()));const k=Ur().add(m),q=new gl(or.min(),new Map,new wi(br),w,k);yield ig(o,q),o.uc=o.uc.remove(m),o.cc.delete(e),lg(o)}else yield hd(o.localStore,e,!1).then(()=>Kh(o,e,t)).catch(Ns)}),sg.apply(this,arguments)}function Qm(i,e){return og.apply(this,arguments)}function og(){return og=(0,te.Z)(function*(i,e){const t=An(i),o=e.batch.batchId;try{const h=yield p_(t.localStore,e);ag(t,o,null),Wf(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield fc(t,h)}catch(h){yield Ns(h)}}),og.apply(this,arguments)}function Xm(i,e,t){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,te.Z)(function*(i,e,t){const o=An(i);try{const h=yield function(m,w){const k=An(m);return k.persistence.runTransaction("Reject batch","readwrite-primary",q=>{let ee;return k.mutationQueue.lookupMutationBatch(q,w).next(me=>(ir(null!==me),ee=me.keys(),k.mutationQueue.removeMutationBatch(q,me))).next(()=>k.mutationQueue.performConsistencyCheck(q)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(q,ee,w)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(q,ee)).next(()=>k.localDocuments.getDocuments(q,ee))})}(o.localStore,e);ag(o,e,t),Wf(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield fc(o,h)}catch(h){yield Ns(h)}}),Gf.apply(this,arguments)}function rl(){return rl=(0,te.Z)(function*(i,e){const t=An(i);oa(t.remoteStore)||sn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const w=An(m);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>w.mutationQueue.getHighestUnacknowledgedBatchId(k))}(t.localStore);if(-1===o)return void e.resolve();const h=t.lc.get(o)||[];h.push(e),t.lc.set(o,h)}catch(o){const h=Uh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),rl.apply(this,arguments)}function Wf(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function ag(i,e,t){const o=An(i);let h=o.hc[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(t?m.reject(t):m.resolve(),h=h.remove(e)),o.hc[o.currentUser.toKey()]=h}}function Kh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||Jm(i,o)})}function Jm(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Ff(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),lg(i))}function Zh(i,e,t){for(const o of t)o instanceof qm?(i.ac.addReference(o.key,e),ey(i,o)):o instanceof tg?(sn("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||Jm(i,o.key)):$n()}function ey(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(sn("SyncEngine","New document in limbo: "+t),i.oc.add(o),lg(i))}function lg(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Cn(Qn.fromString(e)),o=i.fc.next();i.cc.set(o,new jf(t)),i.uc=i.uc.insert(t,o),Nf(i.remoteStore,new Ea(_a(wl(t.path)),o,2,qs.at))}}function fc(i,e,t){return ug.apply(this,arguments)}function ug(){return ug=(0,te.Z)(function*(i,e,t){const o=An(i),h=[],m=[],w=[];var k;o.ic.isEmpty()||(o.ic.forEach((k,q)=>{w.push(o._c(q,e,t).then(ee=>{if((ee||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(q.targetId,null!=ee&&ee.fromCache?"not-current":"current"),ee){h.push(ee);const me=Af.Ci(q.targetId,ee);m.push(me)}}))}),yield Promise.all(w),o.sc.zo(h),yield(k=(0,te.Z)(function*(q,ee){const me=An(q);try{yield me.persistence.runTransaction("notifyLocalViewChanges","readwrite",We=>At.forEach(ee,xt=>At.forEach(xt.Si,Qt=>me.persistence.referenceDelegate.addReference(We,xt.targetId,Qt)).next(()=>At.forEach(xt.Di,Qt=>me.persistence.referenceDelegate.removeReference(We,xt.targetId,Qt)))))}catch(We){if(!Uo(We))throw We;sn("LocalStore","Failed to update sequence numbers: "+We)}for(const We of ee){const xt=We.targetId;if(!We.fromCache){const Qt=me.Ui.get(xt),Gn=Qt.withLastLimboFreeSnapshotVersion(Qt.snapshotVersion);me.Ui=me.Ui.insert(xt,Gn)}}}),function(q,ee){return k.apply(this,arguments)})(o.localStore,m))}),ug.apply(this,arguments)}function ty(i,e){return cg.apply(this,arguments)}function cg(){return cg=(0,te.Z)(function*(i,e){const t=An(i);if(!t.currentUser.isEqual(e)){sn("SyncEngine","User change. New user:",e.toKey());const o=yield Sm(t.localStore,e);t.currentUser=e,(h=t).lc.forEach(w=>{w.forEach(k=>{k.reject(new en(Ft.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield fc(t,o.ji)}var h}),cg.apply(this,arguments)}function ny(i,e){const t=An(i),o=t.cc.get(e);if(o&&o.nc)return Ur().add(o.key);{let h=Ur();const m=t.rc.get(e);if(!m)return h;for(const w of m){const k=t.ic.get(w);h=h.unionWith(k.view.ju)}return h}}function N_(i,e){return dg.apply(this,arguments)}function dg(){return dg=(0,te.Z)(function*(i,e){const t=An(i),o=yield Mf(t.localStore,e.query,!0),h=e.view.tc(o);return t.isPrimaryClient&&Zh(t,e.targetId,h.Xu),h}),dg.apply(this,arguments)}function ry(i,e){return zf.apply(this,arguments)}function zf(){return zf=(0,te.Z)(function*(i,e){const t=An(i);return Mm(t.localStore,e).then(o=>fc(t,o))}),zf.apply(this,arguments)}function F_(i,e,t,o){return ql.apply(this,arguments)}function ql(){return ql=(0,te.Z)(function*(i,e,t,o){const h=An(i),m=yield function(w,k){const q=An(w),ee=An(q.mutationQueue);return q.persistence.runTransaction("Lookup mutation documents","readonly",me=>ee.Tn(me,k).next(We=>We?q.localDocuments.getDocuments(me,We):At.resolve(null)))}(h.localStore,e);var k;null!==m?("pending"===t?yield dc(h.remoteStore):"acknowledged"===t||"rejected"===t?(ag(h,e,o||null),Wf(h,e),k=e,An(An(h.localStore).mutationQueue).An(k)):$n(),yield fc(h,m)):sn("SyncEngine","Cannot apply mutation batch with id: "+e)}),ql.apply(this,arguments)}function fg(){return fg=(0,te.Z)(function*(i,e){const t=An(i);if(_g(t),zd(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),h=yield iy(t,o.toArray());t.dc=!0,yield Xp(t.remoteStore,!0);for(const m of h)Nf(t.remoteStore,m)}else if(!1===e&&!1!==t.dc){const o=[];let h=Promise.resolve();t.rc.forEach((m,w)=>{t.sharedClientState.isLocalQueryTarget(w)?o.push(w):h=h.then(()=>(Kh(t,w),hd(t.localStore,w,!0))),Ff(t.remoteStore,w)}),yield h,yield iy(t,o),function(m){const w=An(m);w.cc.forEach((k,q)=>{Ff(w.remoteStore,q)}),w.ac.fs(),w.cc=new Map,w.uc=new Oi(Cn.comparator)}(t),t.dc=!1,yield Xp(t.remoteStore,!1)}}),fg.apply(this,arguments)}function iy(i,e,t){return sy.apply(this,arguments)}function sy(){return sy=(0,te.Z)(function*(i,e,t){const o=An(i),h=[],m=[];for(const w of e){let k;const q=o.rc.get(w);if(q&&0!==q.length){k=yield dd(o.localStore,_a(q[0]));for(const ee of q){const me=o.ic.get(ee),We=yield N_(o,me);We.snapshot&&m.push(We.snapshot)}}else{const ee=yield Bp(o.localStore,w);k=yield dd(o.localStore,ee),yield zh(o,pg(ee),w,!1,k.resumeToken)}h.push(k)}return o.sc.zo(m),h}),sy.apply(this,arguments)}function pg(i){return Yc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function L_(i){const e=An(i);return An(An(e.localStore).persistence).vi()}function B_(i,e,t,o){return gg.apply(this,arguments)}function gg(){return gg=(0,te.Z)(function*(i,e,t,o){const h=An(i);if(h.dc)return void sn("SyncEngine","Ignoring unexpected query state notification.");const m=h.rc.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const w=yield Mm(h.localStore,Kc(m[0])),k=gl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,j.EMPTY_BYTE_STRING);yield fc(h,w,k);break}case"rejected":yield hd(h.localStore,e,!0),Kh(h,e,o);break;default:$n()}}),gg.apply(this,arguments)}function mg(i,e,t){return yg.apply(this,arguments)}function yg(){return yg=(0,te.Z)(function*(i,e,t){const o=_g(i);if(o.dc){for(const h of e){if(o.rc.has(h)){sn("SyncEngine","Adding an already active target "+h);continue}const m=yield Bp(o.localStore,h),w=yield dd(o.localStore,m);yield zh(o,pg(m),w.targetId,!1,w.resumeToken),Nf(o.remoteStore,w)}for(const h of t)o.rc.has(h)&&(yield hd(o.localStore,h,!1).then(()=>{Ff(o.remoteStore,h),Kh(o,h)}).catch(Ns))}}),yg.apply(this,arguments)}function _g(i){const e=An(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ig.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ny.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p0.bind(null,e),e.sc.zo=Gm.bind(null,e.eventManager),e.sc.wc=eg.bind(null,e.eventManager),e}function zd(i){const e=An(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xm.bind(null,e),e}class Qh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,te.Z)(function*(){t.It=Oh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Tm(this.persistence,new Dm,e.initialUser,this.It)}yc(e){return new Tf(Pp.Bs,this.It)}gc(e){return new Pm}terminate(){var e=this;return(0,te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class V_ extends Qh{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,te.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield zd(o.Ac.syncEngine),yield dc(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Tm(this.persistence,new Dm,e.initialUser,this.It)}Tc(e,t){return new gm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new Uu(t,this.persistence);return new Na(e.asyncQueue,o)}yc(e){const t=Fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?W.withCacheSize(this.cacheSizeBytes):W.DEFAULT;return new Np(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,Hp(),pd(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Pm}}class Eg extends V_{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,te.Z)(function*(){yield t().call(o,e);const h=o.Ac.syncEngine;o.sharedClientState instanceof km&&(o.sharedClientState.syncEngine={Fr:F_.bind(null,h),$r:B_.bind(null,h),Br:mg.bind(null,h),vi:L_.bind(null,h),Mr:ry.bind(null,h)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var m=(0,te.Z)(function*(w){yield function hg(i,e){return fg.apply(this,arguments)}(o.Ac.syncEngine,w),o.gcScheduler&&(w&&!o.gcScheduler.started?o.gcScheduler.start():w||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(w&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():w||o.indexBackfillerScheduler.stop())});return function(w){return m.apply(this,arguments)}}())})()}gc(e){const t=Hp();if(!km.C(t))throw new en(Ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new km(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class oy{initialize(e,t){var o=this;return(0,te.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=h=>Zm(o.syncEngine,h,1),o.remoteStore.remoteSyncer.handleCredentialChange=ty.bind(null,o.syncEngine),yield Xp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new f0}createDatastore(e){const t=Oh(e.databaseInfo.databaseId),o=new v_(e.databaseInfo);return new w_(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,h=e.asyncQueue,m=k=>Zm(this.syncEngine,k,0),w=y_.C()?new y_:new Nm,new Lm(t,o,h,m,w);var t,o,h,m,w}createSyncEngine(e,t){return function(o,h,m,w,k,q,ee){const me=new Gd(o,h,m,w,k,q);return ee&&(me.dc=!0),me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,te.Z)(function*(t){const o=An(t);sn("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield Ph(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function qf(i,e,t){if(!t)throw new en(Ft.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function bg(i,e,t,o){if(!0===e&&!0===o)throw new en(Ft.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function wg(i){if(!Cn.isDocumentKey(i))throw new en(Ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ig(i){if(Cn.isDocumentKey(i))throw new en(Ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function qd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":$n()}function di(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new en(Ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qd(i);throw new en(Ft.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Xh(i,e){if(e<=0)throw new en(Ft.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Jh=new Map;class Yd{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new en(Ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new en(Ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,bg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,t,o,h){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new en(Ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new en(Ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yd(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ca;switch(t.type){case"gapi":return new Ol(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new en(Ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Jh.get(e);t&&(sn("ComponentProvider","Removing Datastore"),Jh.delete(e),t.terminate())}(this),Promise.resolve()}}class Us{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Us(this.firestore,e,this._key)}}class Ua{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ua(this.firestore,e,this._query)}}class Lu extends Ua{constructor(e,t,o){super(e,t,wl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Us(this.firestore,null,new Cn(e))}withConverter(e){return new Lu(this.firestore,e,this._path)}}function Kd(i,e,...t){if(i=(0,Je.m9)(i),qf("collection","path",e),i instanceof ef){const o=Qn.fromString(e,...t);return Ig(o),new Lu(i,null,o)}{if(!(i instanceof Us||i instanceof Lu))throw new en(Ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qn.fromString(e,...t));return Ig(o),new Lu(i.firestore,null,o)}}function Cg(i,e,...t){if(i=(0,Je.m9)(i),1===arguments.length&&(e=Oo.R()),qf("doc","path",e),i instanceof ef){const o=Qn.fromString(e,...t);return wg(o),new Us(i,null,new Cn(o))}{if(!(i instanceof Us||i instanceof Lu))throw new en(Ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qn.fromString(e,...t));return wg(o),new Us(i.firestore,i instanceof Lu?i.converter:null,new Cn(o))}}function ay(i,e){return i=(0,Je.m9)(i),e=(0,Je.m9)(e),(i instanceof Us||i instanceof Lu)&&(e instanceof Us||e instanceof Lu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function ly(i,e){return i=(0,Je.m9)(i),e=(0,Je.m9)(e),i instanceof Ua&&e instanceof Ua&&i.firestore===e.firestore&&Gu(i._query,e._query)&&i.converter===e.converter}function uy(i,e=10240){let t=0;return{read:()=>(0,te.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Kf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ri("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class U_{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new ys,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,te.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,te.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,te.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),h=Number(o);isNaN(h)&&e.Dc(`length string (${o}) is not valid number`);const m=yield e.Cc(h);return new O_(JSON.parse(m),t.length+h)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,te.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,te.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Tg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new en(Ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(h=(0,te.Z)(function*(m,w){const k=An(m),q=Dl(k.It)+"/documents",ee={documents:w.map(Qt=>tc(k.It,Qt))},me=yield k._o("BatchGetDocuments",q,ee,w.length),We=new Map;me.forEach(Qt=>{const nn=function E(i,e){return"found"in e?function(t,o){ir(!!o.found);const h=xa(t,o.found.name),m=ws(o.found.updateTime),w=new Fo({mapValue:{fields:o.found.fields}});return is.newFoundDocument(h,m,w)}(i,e):"missing"in e?function(t,o){ir(!!o.missing),ir(!!o.readTime);const h=xa(t,o.missing),m=ws(o.readTime);return is.newNoDocument(h,m)}(i,e):$n()}(k.It,Qt);We.set(nn.key.toString(),nn)});const xt=[];return w.forEach(Qt=>{const nn=We.get(Qt.toString());ir(!!nn),xt.push(nn)}),xt}),function(m,w){return h.apply(this,arguments)})(t.datastore,e);var h;return o.forEach(h=>t.recordVersion(h)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,h)=>{const m=Cn.fromPath(h);e.mutations.push(new Zu(m,e.precondition(m)))}),yield(o=(0,te.Z)(function*(h,m){const w=An(h),k=Dl(w.It)+"/documents",q={writes:m.map(ee=>Q(w.It,ee))};yield w.ao("Commit",k,q)}),function(h,m){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $n();t=or.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new en(Ft.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(or.min())?vs.exists(!1):vs.updateTime(t):vs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(or.min()))throw new en(Ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vs.updateTime(t)}return vs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class G_{constructor(e,t,o,h,m){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=h,this.deferred=m,this.kc=o.maxAttempts,this.No=new kf(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,te.Z)(function*(){const t=new Tg(e.datastore),o=e.Mc(t);o&&o.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Fc(m)}))}).catch(h=>{e.Fc(h)})}))}Mc(e){try{const t=this.updateFunction(e);return!wt(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Mu(t)}return!1}}class W_{constructor(e,t,o,h){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=h,this.user=bi.UNAUTHENTICATED,this.clientId=Oo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var w=(0,te.Z)(function*(k){sn("FirestoreClient","Received user=",k.uid),yield m.authCredentialListener(k),m.user=k});return function(k){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(o,w=>(sn("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new en(Ft.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const h=Uh(o,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function cy(i,e){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,te.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),sn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var h=(0,te.Z)(function*(m){o.isEqual(m)||(yield Sm(e.localStore,m),o=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Sg.apply(this,arguments)}function dy(i,e){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,te.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Zd(i);sn("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(h=>Qp(e.remoteStore,h)),i.setAppCheckTokenChangeListener((h,m)=>Qp(e.remoteStore,m)),i.onlineComponents=e}),Ag.apply(this,arguments)}function Zd(i){return pc.apply(this,arguments)}function pc(){return pc=(0,te.Z)(function*(i){return i.offlineComponents||(sn("FirestoreClient","Using default OfflineComponentProvider"),yield cy(i,new Qh)),i.offlineComponents}),pc.apply(this,arguments)}function xg(i){return md.apply(this,arguments)}function md(){return md=(0,te.Z)(function*(i){return i.onlineComponents||(sn("FirestoreClient","Using default OnlineComponentProvider"),yield dy(i,new oy)),i.onlineComponents}),md.apply(this,arguments)}function hy(i){return Zd(i).then(e=>e.persistence)}function Zf(i){return Zd(i).then(e=>e.localStore)}function tf(i){return xg(i).then(e=>e.remoteStore)}function Mg(i){return xg(i).then(e=>e.syncEngine)}function Bu(i){return wa.apply(this,arguments)}function wa(){return wa=(0,te.Z)(function*(i){const e=yield xg(i),t=e.eventManager;return t.onListen=ng.bind(null,e.syncEngine),t.onUnlisten=Km.bind(null,e.syncEngine),t}),wa.apply(this,arguments)}function Xf(i,e,t={}){const o=new ys;return i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function(h,m,w,k,q){const ee=new Kf({next:We=>{m.enqueueAndForget(()=>Gh(h,me));const xt=We.docs.has(w);!xt&&We.fromCache?q.reject(new en(Ft.UNAVAILABLE,"Failed to get document because the client is offline.")):xt&&We.fromCache&&k&&"server"===k.source?q.reject(new en(Ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):q.resolve(We)},error:We=>q.reject(We)}),me=new Wh(wl(w.path),ee,{includeMetadataChanges:!0,ku:!0});return Hm(h,me)}(yield Bu(i),i.asyncQueue,e,t,o)})),o.promise}function _d(i,e,t={}){const o=new ys;return i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function(h,m,w,k,q){const ee=new Kf({next:We=>{m.enqueueAndForget(()=>Gh(h,me)),We.fromCache&&"server"===k.source?q.reject(new en(Ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):q.resolve(We)},error:We=>q.reject(We)}),me=new Wh(w,ee,{includeMetadataChanges:!0,ku:!0});return Hm(h,me)}(yield Bu(i),i.asyncQueue,e,t,o)})),o.promise}class th{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new kf(this,"async_queue_retry"),this.Wc=()=>{const t=pd();t&&sn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=pd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=pd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new ys;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,te.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Uo(t))throw t;sn("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Ri("INTERNAL UNHANDLED ERROR: ",function(m){let w=m.message||"";return m.stack&&(w=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),w}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const h=jm.createAndSchedule(this,e,t,o,m=>this.Yc(m));return this.qc.push(h),h}zc(){this.Kc&&$n()}verifyOperationInProgress(){}Xc(){var e=this;return(0,te.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Vc(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const h of["next","error","complete"])if(h in o&&"function"==typeof o[h])return!0;return!1}(i)}class nh{constructor(){this._progressObserver={},this._taskCompletionResolver=new ys,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class js extends ef{constructor(e,t,o,h){super(e,t,o,h),this.type="firestore",this._queue=new th,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Rg(this),this._firestoreClient.terminate()}}function Co(i){return i._firestoreClient||Rg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Rg(i){var e;const t=i._freezeSettings(),o=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new _e(i._databaseId,m,i._persistenceKey,(k=t).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,k.useFetchStreams));var m,k;i._firestoreClient=new W_(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Og(i,e,t){const o=new ys;return i.asyncQueue.enqueue((0,te.Z)(function*(){try{yield cy(i,t),yield dy(i,e),o.resolve()}catch(h){const m=h;if(!("FirebaseError"===(w=m).name?w.code===Ft.FAILED_PRECONDITION||w.code===Ft.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw m;ha("Error enabling offline persistence. Falling back to persistence disabled: "+m),o.reject(m)}var w})).then(()=>o.promise)}function Jf(i){if(i._initialized||i._terminated)throw new en(Ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vu(j.fromBase64String(e))}catch(t){throw new en(Ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vu(j.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Kl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new en(Ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gc{constructor(e){this._methodName=e}}class ep{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new en(Ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new en(Ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return br(this._lat,e._lat)||br(this._long,e._long)}}const tp=/^__.*__$/;class np{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new fl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Aa(e,this.data,t,this.fieldTransforms)}}class rp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new fl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ng(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $n()}}class ih{constructor(e,t,o,h,m,w){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=h,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=w||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ih(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ia({path:o,oa:!1});return h.ua(e),h}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ia({path:o,oa:!1});return h.na(),h}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return rf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Ng(this.sa)&&tp.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class yy{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||Oh(e)}da(e,t,o,h=!1){return new ih({sa:e,methodName:t,fa:o,path:bs.emptyPath(),oa:!1,la:h},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function $c(i){const e=i._freezeSettings(),t=Oh(i._databaseId);return new yy(i._databaseId,!!e.ignoreUndefinedProperties,t)}function sh(i,e,t,o,h,m={}){const w=i.da(m.merge||m.mergeFields?2:0,e,t,h);ap("Data must be an object, but it was:",w,o);const k=op(o,w);let q,ee;if(m.merge)q=new C(w.fieldMask),ee=w.fieldTransforms;else if(m.mergeFields){const me=[];for(const We of m.mergeFields){const xt=lp(e,We,t);if(!w.contains(xt))throw new en(Ft.INVALID_ARGUMENT,`Field '${xt}' is specified in your field mask but missing from your input data.`);Vg(me,xt)||me.push(xt)}q=new C(me),ee=w.fieldTransforms.filter(We=>q.covers(We.field))}else q=null,ee=w.fieldTransforms;return new np(new Fo(k),q,ee)}class oh extends gc{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}function _y(i,e,t){return new ih({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ip extends gc{_toFieldTransform(e){return new Yu(e.path,new hl)}isEqual(e){return e instanceof ip}}class vy extends gc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_y(this,e,!0),o=this._a.map(m=>Uc(m,t)),h=new Su(o);return new Yu(e.path,h)}isEqual(e){return this===e}}class Ey extends gc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_y(this,e,!0),o=this._a.map(m=>Uc(m,t)),h=new tl(o);return new Yu(e.path,h)}isEqual(e){return this===e}}class by extends gc{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new qu(e.It,Ba(e.It,this.wa));return new Yu(e.path,t)}isEqual(e){return this===e}}function Fg(i,e,t,o){const h=i.da(1,e,t);ap("Data must be an object, but it was:",h,o);const m=[],w=Fo.empty();Qa(o,(q,ee)=>{const me=nf(e,q,t);ee=(0,Je.m9)(ee);const We=h.ca(me);if(ee instanceof oh)m.push(me);else{const xt=Uc(ee,We);null!=xt&&(m.push(me),w.set(me,xt))}});const k=new C(m);return new rp(w,k,h.fieldTransforms)}function sp(i,e,t,o,h,m){const w=i.da(1,e,t),k=[lp(e,o,t)],q=[h];if(m.length%2!=0)throw new en(Ft.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let xt=0;xt<m.length;xt+=2)k.push(lp(e,m[xt])),q.push(m[xt+1]);const ee=[],me=Fo.empty();for(let xt=k.length-1;xt>=0;--xt)if(!Vg(ee,k[xt])){const Qt=k[xt];let nn=q[xt];nn=(0,Je.m9)(nn);const Gn=w.ca(Qt);if(nn instanceof oh)ee.push(Qt);else{const tr=Uc(nn,Gn);null!=tr&&(ee.push(Qt),me.set(Qt,tr))}}const We=new C(ee);return new rp(me,We,w.fieldTransforms)}function Lg(i,e,t,o=!1){return Uc(t,i.da(o?4:3,e))}function Uc(i,e){if(Bg(i=(0,Je.m9)(i)))return ap("Unsupported field value:",e,i),op(i,e);if(i instanceof gc)return function(t,o){if(!Ng(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(o);h&&o.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const h=[];let m=0;for(const w of t){let k=Uc(w,o.aa(m));null==k&&(k={nullValue:"NULL_VALUE"}),h.push(k),m++}return{arrayValue:{values:h}}}(i,e)}return function(t,o){if(null===(t=(0,Je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ba(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=Pr.fromDate(t);return{timestampValue:Ul(o.It,h)}}if(t instanceof Pr){const h=new Pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ul(o.It,h)}}if(t instanceof ep)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vu)return{bytesValue:nd(o.It,t._byteString)};if(t instanceof Us){const h=o.databaseId,m=t.firestore._databaseId;if(!m.isEqual(h))throw o.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:va(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${qd(t)}`)}(i,e)}function op(i,e){const t={};return Ll(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qa(i,(o,h)=>{const m=Uc(h,e.ra(o));null!=m&&(t[o]=m)}),{mapValue:{fields:t}}}function Bg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Pr||i instanceof ep||i instanceof Vu||i instanceof Us||i instanceof gc)}function ap(i,e,t){if(!Bg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=qd(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function lp(i,e,t){if((e=(0,Je.m9)(e))instanceof Kl)return e._internalPath;if("string"==typeof e)return nf(i,e);throw rf("Field path arguments must be of type string or ",i,!1,void 0,t)}const wy=new RegExp("[~\\*/\\[\\]]");function nf(i,e,t){if(e.search(wy)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Kl(...e.split("."))._internalPath}catch(o){throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function rf(i,e,t,o,h){const m=o&&!o.isEmpty(),w=void 0!==h;let k=`Function ${e}() called with invalid data`;t&&(k+=" (via `toFirestore()`)"),k+=". ";let q="";return(m||w)&&(q+=" (found",m&&(q+=` in field ${o}`),w&&(q+=` in document ${h}`),q+=")"),new en(Ft.INVALID_ARGUMENT,k+i+q)}function Vg(i,e){return i.some(t=>t.isEqual(e))}class ah{constructor(e,t,o,h,m){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Us(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new m0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(up("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class m0 extends ah{data(){return super.data()}}function up(i,e){return"string"==typeof e?nf(i,e):e instanceof Kl?e._internalPath:e._delegate._internalPath}function Iy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new en(Ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lh{}function jc(i,...e){for(const t of e)i=t._apply(i);return i}class aa extends lh{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=$c(e.firestore),o=function(h,m,w,k,q,ee,me){let We;if(q.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new en(Ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){Hg(me,ee);const Qt=[];for(const nn of me)Qt.push(nv(k,h,nn));We={arrayValue:{values:Qt}}}else We=nv(k,h,me)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||Hg(me,ee),We=Lg(w,"where",me,"in"===ee||"not-in"===ee);const xt=co.create(q,ee,We);return function(Qt,nn){if(nn.dt()){const tr=iu(Qt);if(null!==tr&&!tr.isEqual(nn.field))throw new en(Ft.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tr.toString()}' and '${nn.field.toString()}'`);const os=Ho(Qt);null!==os&&cp(0,nn.field,os)}const Gn=function(tr,os){for(const Hs of tr.filters)if(os.indexOf(Hs.op)>=0)return Hs.op;return null}(Qt,function(tr){switch(tr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(nn.op));if(null!==Gn)throw new en(Ft.INVALID_ARGUMENT,Gn===nn.op?`Invalid query. You cannot use more than one '${nn.op.toString()}' filter.`:`Invalid query. You cannot use '${nn.op.toString()}' filters with '${Gn.toString()}' filters.`)}(h,xt),xt}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ua(e.firestore,e.converter,function(h,m){const w=h.filters.concat([m]);return new Ja(h.path,h.collectionGroup,h.explicitOrderBy.slice(),w,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,o))}}class Q_ extends lh{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,h,m){if(null!==o.startAt)throw new en(Ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new en(Ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new ru(h,m);return function(k,q){if(null===Ho(k)){const ee=iu(k);null!==ee&&cp(0,ee,q.field)}}(o,w),w}(e._query,this.ma,this.pa);return new Ua(e.firestore,e.converter,function(o,h){const m=o.explicitOrderBy.concat([h]);return new Ja(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class $g extends lh{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new Ua(e.firestore,e.converter,Du(e._query,this.Ia,this.Ta))}}class Ug extends lh{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=jg(e,this.type,this.Ea,this.Aa);return new Ua(e.firestore,e.converter,(h=t,new Ja((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,h,o.endAt)));var o,h}}class Ty extends lh{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=jg(e,this.type,this.Ea,this.Aa);return new Ua(e.firestore,e.converter,(h=t,new Ja((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,h)));var o,h}}function jg(i,e,t,o){if(t[0]=(0,Je.m9)(t[0]),t[0]instanceof ah)return function(h,m,w,k,q){if(!k)throw new en(Ft.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const ee=[];for(const me of su(h))if(me.field.isKeyField())ee.push(No(m,k.key));else{const We=k.data.field(me.field);if(P(We))throw new en(Ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===We){const xt=me.field.canonicalString();throw new en(Ft.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${xt}' (used as the orderBy) does not exist.`)}ee.push(We)}return new dl(ee,q)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const h=$c(i.firestore);return function(m,w,k,q,ee,me){const We=m.explicitOrderBy;if(ee.length>We.length)throw new en(Ft.INVALID_ARGUMENT,`Too many arguments provided to ${q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const xt=[];for(let Qt=0;Qt<ee.length;Qt++){const nn=ee[Qt];if(We[Qt].field.isKeyField()){if("string"!=typeof nn)throw new en(Ft.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${q}(), but got a ${typeof nn}`);if(!na(m)&&-1!==nn.indexOf("/"))throw new en(Ft.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${q}() must be a plain document ID, but '${nn}' contains a slash.`);const Gn=m.path.child(Qn.fromString(nn));if(!Cn.isDocumentKey(Gn))throw new en(Ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${q}() must result in a valid document path, but '${Gn}' is not because it contains an odd number of segments.`);const tr=new Cn(Gn);xt.push(No(w,tr))}else{const Gn=Lg(k,q,nn);xt.push(Gn)}}return new dl(xt,me)}(i._query,i.firestore._databaseId,h,e,t,o)}}function nv(i,e,t){if("string"==typeof(t=(0,Je.m9)(t))){if(""===t)throw new en(Ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!na(e)&&-1!==t.indexOf("/"))throw new en(Ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Qn.fromString(t));if(!Cn.isDocumentKey(o))throw new en(Ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return No(i,new Cn(o))}if(t instanceof Us)return No(i,t._key);throw new en(Ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qd(t)}.`)}function Hg(i,e){if(!Array.isArray(i)||0===i.length)throw new en(Ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new en(Ft.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function cp(i,e,t){if(!t.isEqual(e))throw new en(Ft.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Zl{convertValue(e,t="none"){switch($r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ct(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $n()}}convertObject(e,t){const o={};return Qa(e.fields,(h,m)=>{o[h]=this.convertValue(m,t)}),o}convertGeoPoint(e){return new ep(xe(e.latitude),xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=U(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(J(e));default:return null}}convertTimestamp(e){const t=Ae(e);return new Pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Qn.fromString(e);ir(sd(o));const h=new Ke(o.get(1),o.get(3)),m=new Cn(o.popFirst(5));return h.isEqual(t)||Ri(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function dp(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class rv extends Zl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Us(this.firestore,null,t)}}class ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class la extends ah{constructor(e,t,o,h,m,w){super(e,t,o,h,w),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(up("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class il extends la{data(e={}){return super.data(e)}}class mc{constructor(e,t,o,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new ja(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new il(this._firestore,this._userDataWriter,o.key,o,new ja(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new en(Ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,h){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map(w=>({type:"added",doc:new il(o._firestore,o._userDataWriter,w.doc.key,w.doc,new ja(o._snapshot.mutatedKeys.has(w.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:m++}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(w=>h||3!==w.type).map(w=>{const k=new il(o._firestore,o._userDataWriter,w.doc.key,w.doc,new ja(o._snapshot.mutatedKeys.has(w.doc.key),o._snapshot.fromCache),o.query.converter);let q=-1,ee=-1;return 0!==w.type&&(q=m.indexOf(w.doc.key),m=m.delete(w.doc.key)),1!==w.type&&(m=m.add(w.doc),ee=m.indexOf(w.doc.key)),{type:Ay(w.type),doc:k,oldIndex:q,newIndex:ee}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ay(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $n()}}function xy(i,e){return i instanceof la&&e instanceof la?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof mc&&e instanceof mc&&i._firestore===e._firestore&&ly(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Hc extends Zl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Us(this.firestore,null,t)}}function Ry(i,e,t){i=di(i,Us);const o=di(i.firestore,js),h=dp(i.converter,e,t);return vd(o,[sh($c(o),"setDoc",i._key,h,null!==i.converter,t).toMutation(i._key,vs.none())])}function Wg(i,e,t,...o){i=di(i,Us);const h=di(i.firestore,js),m=$c(h);let w;return w="string"==typeof(e=(0,Je.m9)(e))||e instanceof Kl?sp(m,"updateDoc",i._key,e,t,o):Fg(m,"updateDoc",i._key,e),vd(h,[w.toMutation(i._key,vs.exists(!0))])}function ky(i,...e){var t,o,h;i=(0,Je.m9)(i);let m={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||Vc(e[w])||(m=e[w],w++);const k={includeMetadataChanges:m.includeMetadataChanges};if(Vc(e[w])){const We=e[w];e[w]=null===(t=We.next)||void 0===t?void 0:t.bind(We),e[w+1]=null===(o=We.error)||void 0===o?void 0:o.bind(We),e[w+2]=null===(h=We.complete)||void 0===h?void 0:h.bind(We)}let q,ee,me;if(i instanceof Us)ee=di(i.firestore,js),me=wl(i._key.path),q={next:We=>{e[w]&&e[w](af(ee,i,We))},error:e[w+1],complete:e[w+2]};else{const We=di(i,Ua);ee=di(We.firestore,js),me=We._query;const xt=new Hc(ee);q={next:Qt=>{e[w]&&e[w](new mc(ee,xt,We,Qt))},error:e[w+1],complete:e[w+2]},Iy(i._query)}return function(We,xt,Qt,nn){const Gn=new Kf(nn),tr=new Wh(xt,Gn,Qt);return We.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return Hm(yield Bu(We),tr)})),()=>{Gn.bc(),We.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return Gh(yield Bu(We),tr)}))}}(Co(ee),me,k,q)}function vd(i,e){return function(t,o){const h=new ys;return t.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function rg(i,e,t){return qh.apply(this,arguments)}(yield Mg(t),o,h)})),h.promise}(Co(i),e)}function af(i,e,t){const o=t.docs.get(e._key),h=new Hc(i);return new la(i,h,e._key,o,new ja(t.hasPendingWrites,t.fromCache),e.converter)}const qg={maxAttempts:5};class Yg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$c(e)}set(e,t,o){this._verifyNotCommitted();const h=yc(e,this._firestore),m=dp(h.converter,t,o),w=sh(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,o);return this._mutations.push(w.toMutation(h._key,vs.none())),this}update(e,t,o,...h){this._verifyNotCommitted();const m=yc(e,this._firestore);let w;return w="string"==typeof(t=(0,Je.m9)(t))||t instanceof Kl?sp(this._dataReader,"WriteBatch.update",m._key,t,o,h):Fg(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(w.toMutation(m._key,vs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yc(e,this._firestore);return this._mutations=this._mutations.concat(new Il(t._key,vs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new en(Ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yc(i,e){if((i=(0,Je.m9)(i)).firestore!==e)throw new en(Ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Fy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$c(e)}get(e){const t=yc(e,this._firestore),o=new rv(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return $n();const m=h[0];if(m.isFoundDocument())return new ah(this._firestore,o,m.key,m,t.converter);if(m.isNoDocument())return new ah(this._firestore,o,t._key,null,t.converter);throw $n()})}set(e,t,o){const h=yc(e,this._firestore),m=dp(h.converter,t,o),w=sh(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,o);return this._transaction.set(h._key,w),this}update(e,t,o,...h){const m=yc(e,this._firestore);let w;return w="string"==typeof(t=(0,Je.m9)(t))||t instanceof Kl?sp(this._dataReader,"Transaction.update",m._key,t,o,h):Fg(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,w),this}delete(e){const t=yc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yc(e,this._firestore),o=new Hc(this._firestore);return super.get(e).then(h=>new la(this._firestore,o,t._key,h._document,new ja(!1,!1),t.converter))}}function Kg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new en("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Uy(){if("undefined"==typeof Uint8Array)throw new en("unimplemented","Uint8Arrays are not available in this environment.")}function jy(){if(!function N(){return"undefined"!=typeof atob}())throw new en("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){to=he.SDK_VERSION,(0,he._registerComponent)(new Ie.wA("firestore",(t,{instanceIdentifier:o,options:h})=>{const m=t.getProvider("app").getImmediate(),w=new js(new Ml(t.getProvider("auth-internal")),new pa(t.getProvider("app-check-internal")),function(k,q){if(!Object.prototype.hasOwnProperty.apply(k.options,["projectId"]))throw new en(Ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ke(k.options.projectId,q)}(m,o),m);return h=Object.assign({useFetchStreams:e},h),w._setSettings(h),w},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(ms,"3.7.1",i),(0,he.registerVersion)(ms,"3.7.1","esm2017")}();class lf{constructor(e){this._delegate=e}static fromBase64String(e){return jy(),new lf(Vu.fromBase64String(e))}static fromUint8Array(e){return Uy(),new lf(Vu.fromUint8Array(e))}toBase64(){return jy(),this._delegate.toBase64()}toUint8Array(){return Uy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Zg(i){return function hv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class fv{enableIndexedDbPersistence(e,t){return function fy(i,e){Jf(i=di(i,js));const t=Co(i),o=i._freezeSettings(),h=new oy;return Og(t,h,new V_(h,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function py(i){Jf(i=di(i,js));const e=Co(i),t=i._freezeSettings(),o=new oy;return Og(e,o,new Eg(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gy(i){if(i._initialized&&!i._terminated)throw new en(Ft.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ys;return i._queue.enqueueAndForgetEvenWhileRestricted((0,te.Z)(function*(){try{yield(t=(0,te.Z)(function*(o){if(!vo.C())return Promise.resolve();const h=o+"main";yield vo.delete(h)}),function(o){return t.apply(this,arguments)})(Fp(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Hy{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ke||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ha("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Yf(i,e,t,o={}){var h;const m=(i=di(i,ef))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&ha("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let w,k;if("string"==typeof o.mockUserToken)w=o.mockUserToken,k=bi.MOCK_USER;else{w=(0,Je.Sg)(o.mockUserToken,null===(h=i._app)||void 0===h?void 0:h.options.projectId);const q=o.mockUserToken.sub||o.mockUserToken.user_id;if(!q)throw new en(Ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new bi(q)}i._authCredentials=new Da(new ol(w,k))}}(this._delegate,e,t,o)}enableNetwork(){return function K_(i){return function yd(i){return i.asyncQueue.enqueue((0,te.Z)(function*(){const e=yield hy(i),t=yield tf(i);return e.setNetworkEnabled(!0),function(o){const h=An(o);return h.wu.delete(0),Ud(h)}(t)}))}(Co(i=di(i,js)))}(this._delegate)}disableNetwork(){return function my(i){return function Qf(i){return i.asyncQueue.enqueue((0,te.Z)(function*(){const e=yield hy(i),t=yield tf(i);return e.setNetworkEnabled(!1),(o=(0,te.Z)(function*(h){const m=An(h);m.wu.add(0),yield Ph(m),m.yu.set("Offline")}),function(h){return o.apply(this,arguments)})(t);var o}))}(Co(i=di(i,js)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,bg("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Y_(i){return function(e){const t=new ys;return e.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function P_(i,e){return rl.apply(this,arguments)}(yield Mg(e),t)})),t.promise}(Co(i=di(i,js)))}(this._delegate)}onSnapshotsInSync(e){return function Py(i,e){return function Xd(i,e){const t=new Kf(e);return i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return o=yield Bu(i),h=t,An(o).bu.add(h),void h.next();var o,h})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return o=yield Bu(i),h=t,void An(o).bu.delete(h);var o,h}))}}(Co(i=di(i,js)),Vc(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new en("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hh(this,Kd(this._delegate,e))}catch(t){throw Ha(t,"collection()","Firestore.collection()")}}doc(e){try{return new Al(this,Cg(this._delegate,e))}catch(t){throw Ha(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ga(this,function $_(i,e){if(i=di(i,ef),qf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new en(Ft.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ua(i,null,(t=e,new Ja(Qn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ha(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ly(i,e,t){i=di(i,js);const o=Object.assign(Object.assign({},qg),t);return function(h){if(h.maxAttempts<1)throw new en(Ft.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(h,m,w){const k=new ys;return h.asyncQueue.enqueueAndForget((0,te.Z)(function*(){const q=yield function pu(i){return xg(i).then(e=>e.datastore)}(h);new G_(h.asyncQueue,q,w,m,k).run()})),k.promise}(Co(i),h=>e(new Fy(i,h)),o)}(this._delegate,t=>e(new Qg(this,t)))}batch(){return Co(this._delegate),new Xg(new Yg(this._delegate,e=>vd(this._delegate,e)))}loadBundle(e){return function Z_(i,e){const t=Co(i=di(i,js)),o=new nh;return function Jd(i,e,t,o){const h=function(m,w){let k;return k="string"==typeof m?(new TextEncoder).encode(m):m,q=function(q,ee){if(q instanceof Uint8Array)return uy(q,void 0);if(q instanceof ArrayBuffer)return uy(new Uint8Array(q),void 0);if(q instanceof ReadableStream)return q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new U_(q,w);var q}(t,Oh(e));i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){!function vg(i,e,t){const o=An(i);var h;(h=(0,te.Z)(function*(m,w,k){try{const q=yield w.getMetadata();if(yield function(xt,Qt){const nn=An(xt),Gn=ws(Qt.createTime);return nn.persistence.runTransaction("hasNewerBundle","readonly",tr=>nn.Ns.getBundleMetadata(tr,Qt.id)).then(tr=>!!tr&&tr.createTime.compareTo(Gn)>=0)}(m.localStore,q))return yield w.close(),k._completeWith({taskState:"Success",documentsLoaded:(xt=q).totalDocuments,bytesLoaded:xt.totalBytes,totalDocuments:xt.totalDocuments,totalBytes:xt.totalBytes}),Promise.resolve(new Set);k._updateProgress(zm(q));const ee=new Wm(q,m.localStore,w.It);let me=yield w.mc();for(;me;){const xt=yield ee.Fu(me);xt&&k._updateProgress(xt),me=yield w.mc()}const We=yield ee.complete();return yield fc(m,We.Lu,void 0),yield function(xt,Qt){const nn=An(xt);return nn.persistence.runTransaction("Save bundle","readwrite",Gn=>nn.Ns.saveBundleMetadata(Gn,Qt))}(m.localStore,q),k._completeWith(We.progress),Promise.resolve(We.Bu)}catch(q){return ha("SyncEngine",`Loading bundle failed with ${q}`),k._failWith(q),Promise.resolve(new Set)}var xt}),function(m,w,k){return h.apply(this,arguments)})(o,e,t).then(h=>{o.sharedClientState.notifyBundleLoaded(h)})}(yield Mg(i),h,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function kg(i,e){return function eh(i,e){return i.asyncQueue.enqueue((0,te.Z)(function*(){return function(t,o){const h=An(t);return h.persistence.runTransaction("Get named query","readonly",m=>h.Ns.getNamedQuery(m,o))}(yield Zf(i),e)}))}(Co(i=di(i,js)),e).then(t=>t?new Ua(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ga(this,t):null)}}class fp extends Zl{constructor(e){super(),this.firestore=e}convertBytes(e){return new lf(new Vu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Al.forKey(t,this.firestore,null)}}class Qg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fp(e)}get(e){const t=Ed(e);return this._delegate.get(t).then(o=>new ch(this._firestore,new la(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const h=Ed(e);return o?(Kg("Transaction.set",o),this._delegate.set(h,t,o)):this._delegate.set(h,t),this}update(e,t,o,...h){const m=Ed(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...h),this}delete(e){const t=Ed(e);return this._delegate.delete(t),this}}class Xg{constructor(e){this._delegate=e}set(e,t,o){const h=Ed(e);return o?(Kg("WriteBatch.set",o),this._delegate.set(h,t,o)):this._delegate.set(h,t),this}update(e,t,o,...h){const m=Ed(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...h),this}delete(e){const t=Ed(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gc{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new il(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dh(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Gc.INSTANCES;let h=o.get(e);h||(h=new WeakMap,o.set(e,h));let m=h.get(t);return m||(m=new Gc(e,new fp(e),t),h.set(t,m)),m}}Gc.INSTANCES=new WeakMap;class Al{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fp(e)}static forPath(e,t,o){if(e.length%2!=0)throw new en("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Al(t,new Us(t._delegate,o,new Cn(e)))}static forKey(e,t,o){return new Al(t,new Us(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new hh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hh(this.firestore,Kd(this._delegate,e))}catch(t){throw Ha(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Je.m9)(e))instanceof Us&&ay(this._delegate,e)}set(e,t){t=Kg("DocumentReference.set",t);try{return t?Ry(this._delegate,e,t):Ry(this._delegate,e)}catch(o){throw Ha(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Wg(this._delegate,e):Wg(this._delegate,e,t,...o)}catch(h){throw Ha(h,"updateDoc()","DocumentReference.update()")}}delete(){return function Oy(i){return vd(di(i.firestore,js),[new Il(i._key,vs.none())])}(this._delegate)}onSnapshot(...e){const t=Jg(e),o=em(e,h=>new ch(this.firestore,new la(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return ky(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function sv(i){i=di(i,Us);const e=di(i.firestore,js),t=Co(e),o=new Hc(e);return function Yl(i,e){const t=new ys;return i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return(o=(0,te.Z)(function*(h,m,w){try{const k=yield function(q,ee){const me=An(q);return me.persistence.runTransaction("read document","readonly",We=>me.localDocuments.getDocument(We,ee))}(h,m);k.isFoundDocument()?w.resolve(k):k.isNoDocument()?w.resolve(null):w.reject(new en(Ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const q=Uh(k,`Failed to get document '${m} from cache`);w.reject(q)}}),function(h,m,w){return o.apply(this,arguments)})(yield Zf(i),e,t);var o})),t.promise}(t,i._key).then(h=>new la(e,o,i._key,h,new ja(null!==h&&h.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Gg(i){i=di(i,Us);const e=di(i.firestore,js);return Xf(Co(e),i._key,{source:"server"}).then(t=>af(e,i,t))}(this._delegate):function iv(i){i=di(i,Us);const e=di(i.firestore,js);return Xf(Co(e),i._key).then(t=>af(e,i,t))}(this._delegate),t.then(o=>new ch(this.firestore,new la(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Al(this.firestore,this._delegate.withConverter(e?Gc.getInstance(this.firestore,e):null))}}function Ha(i,e,t){return i.message=i.message.replace(e,t),i}function Jg(i){for(const e of i)if("object"==typeof e&&!Zg(e))return e;return{}}function em(i,e){var t,o;let h;return h=Zg(i[0])?i[0]:Zg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{h.next&&h.next(e(m))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(o=h.complete)||void 0===o?void 0:o.bind(h)}}class ch{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Al(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xy(this._delegate,e._delegate)}}class dh extends ch{data(e){const t=this._delegate.data(e);return function sl(i,e){i||$n()}(void 0!==t),t}}class Ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fp(e)}where(e,t,o){try{return new Ga(this.firestore,jc(this._delegate,function Cy(i,e,t){const o=e,h=up("where",i);return new aa(h,o,t)}(e,t,o)))}catch(h){throw Ha(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ga(this.firestore,jc(this._delegate,function X_(i,e="asc"){const t=e,o=up("orderBy",i);return new Q_(o,t)}(e,t)))}catch(o){throw Ha(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ga(this.firestore,jc(this._delegate,function J_(i){return Xh("limit",i),new $g("limit",i,"F")}(e)))}catch(t){throw Ha(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ga(this.firestore,jc(this._delegate,function Dy(i){return Xh("limitToLast",i),new $g("limitToLast",i,"L")}(e)))}catch(t){throw Ha(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ga(this.firestore,jc(this._delegate,function uh(...i){return new Ug("startAt",i,!0)}(...e)))}catch(t){throw Ha(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ga(this.firestore,jc(this._delegate,function ev(...i){return new Ug("startAfter",i,!1)}(...e)))}catch(t){throw Ha(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ga(this.firestore,jc(this._delegate,function Sy(...i){return new Ty("endBefore",i,!1)}(...e)))}catch(t){throw Ha(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ga(this.firestore,jc(this._delegate,function tv(...i){return new Ty("endAt",i,!0)}(...e)))}catch(t){throw Ha(t,"endAt()","Query.endAt()")}}isEqual(e){return ly(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ov(i){i=di(i,Ua);const e=di(i.firestore,js),t=Co(e),o=new Hc(e);return function Qd(i,e){const t=new ys;return i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return(o=(0,te.Z)(function*(h,m,w){try{const k=yield Mf(h,m,!0),q=new Ym(m,k.Hi),ee=q.Wu(k.documents),me=q.applyChanges(ee,!1);w.resolve(me.snapshot)}catch(k){const q=Uh(k,`Failed to execute query '${m} against cache`);w.reject(q)}}),function(h,m,w){return o.apply(this,arguments)})(yield Zf(i),e,t);var o})),t.promise}(t,i._query).then(h=>new mc(e,o,i,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function My(i){i=di(i,Ua);const e=di(i.firestore,js),t=Co(e),o=new Hc(e);return _d(t,i._query,{source:"server"}).then(h=>new mc(e,o,i,h))}(this._delegate):function sf(i){i=di(i,Ua);const e=di(i.firestore,js),t=Co(e),o=new Hc(e);return Iy(i._query),_d(t,i._query).then(h=>new mc(e,o,i,h))}(this._delegate),t.then(o=>new _c(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Jg(e),o=em(e,h=>new _c(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return ky(this._delegate,t,o)}withConverter(e){return new Ga(this.firestore,this._delegate.withConverter(e?Gc.getInstance(this.firestore,e):null))}}class Gy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new dh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _c{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ga(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Gy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new dh(this._firestore,o))})}isEqual(e){return xy(this._delegate,e._delegate)}}class hh extends Ga{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Al(this.firestore,e):null}doc(e){try{return new Al(this.firestore,void 0===e?Cg(this._delegate):Cg(this._delegate,e))}catch(t){throw Ha(t,"doc()","CollectionReference.doc()")}}add(e){return function hp(i,e){const t=di(i.firestore,js),o=Cg(i),h=dp(i.converter,e);return vd(t,[sh($c(i.firestore),"addDoc",o._key,h,null!==i.converter,{}).toMutation(o._key,vs.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Al(this.firestore,t))}isEqual(e){return ay(this._delegate,e._delegate)}withConverter(e){return new hh(this.firestore,this._delegate.withConverter(e?Gc.getInstance(this.firestore,e):null))}}function Ed(i){return di(i,Us)}class Wc{constructor(...e){this._delegate=new Kl(...e)}static documentId(){return new Wc(bs.keyField().canonicalString())}isEqual(e){return(e=(0,Je.m9)(e))instanceof Kl&&this._delegate._internalPath.isEqual(e._internalPath)}}class fh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Vy(){return new ip("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fh(e)}static delete(){const e=function By(){return new oh("deleteField")}();return e._methodName="FieldValue.delete",new fh(e)}static arrayUnion(...e){const t=function av(...i){return new vy("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new fh(t)}static arrayRemove(...e){const t=function lv(...i){return new Ey("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new fh(t)}static increment(e){const t=function uv(i){return new by("increment",i)}(e);return t._methodName="FieldValue.increment",new fh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tm={Firestore:Hy,GeoPoint:ep,Timestamp:Pr,Blob:lf,Transaction:Qg,WriteBatch:Xg,DocumentReference:Al,DocumentSnapshot:ch,Query:Ga,QueryDocumentSnapshot:dh,QuerySnapshot:_c,CollectionReference:hh,FieldPath:Wc,FieldValue:fh,setLogLevel:function pv(i){!function vl(i){oo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Wy(i){(function v0(i,e){i.INTERNAL.registerComponent(new Ie.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(o,h)},"PUBLIC").setServiceProps(Object.assign({},tm)))})(i,(e,t)=>new Hy(e,t,new fv)),i.registerVersion("@firebase/firestore-compat","0.2.1")}(Z.Z);var zy=H(440),E0=H(127);function qy(i,e){return function Hr(i,e=de.z){return new oe.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function nm(i,e){return qy(i,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function vc(i,e){return nm(i,e).pipe((0,nt.O)(void 0),we(),(0,ht.U)(([t,o])=>{const h=o.payload.docChanges(),m=h.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((w,k)=>{const q=h.find(me=>me.doc.ref.isEqual(w.ref)),ee=null==t?void 0:t.payload.docs.find(me=>me.ref.isEqual(w.ref));q&&JSON.stringify(q.doc.metadata)===JSON.stringify(w.metadata)||!q&&ee&&JSON.stringify(ee.metadata)===JSON.stringify(w.metadata)||m.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:w}})}),m}))}function Yy(i,e,t){return vc(i,t).pipe((0,yt.R)((o,h)=>function pp(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Do(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return ph(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ph(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ph(i,e.oldIndex,1)}return i}(i,o))}),i}(o,h.map(m=>m.payload),e),[]),(0,kt.x)(),(0,ht.U)(o=>o.map(h=>({type:h.type,payload:h}))))}function ph(i,e,t,...o){const h=i.slice();return h.splice(e,t,...o),h}function mv(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class rm{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=vc(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(o=>o.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,nt.O)(void 0),we(),(0,je.h)(([o,h])=>h.length>0||!o),(0,ht.U)(([o,h])=>h),Qe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,yt.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=mv(e);return Yy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qe.iC)}valueChanges(e={}){return nm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Qe.iC)}get(e){return(0,pe.D)(this.query.get(e)).pipe(Qe.iC)}add(e){return this.ref.add(e)}doc(e){return new im(this.ref.doc(e),this.afs)}}class im{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:h,query:m}=Qy(o,t);return new rm(h,m,this.afs)}snapshotChanges(){return function gv(i,e){return qy(i,e).pipe((0,nt.O)(void 0),we(),(0,ht.U)(([t,o])=>o.exists?null!=t&&t.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pe.D)(this.ref.get(e)).pipe(Qe.iC)}}class yv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vc(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,je.h)(t=>t.length>0),Qe.iC):vc(this.query,this.afs.schedulers.outsideAngular).pipe(Qe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,yt.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=mv(e);return Yy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qe.iC)}valueChanges(e={}){return nm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(o=>o.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),Qe.iC)}get(e){return(0,pe.D)(this.query.get(e)).pipe(Qe.iC)}}const sm=new se.OlP("angularfire2.enableFirestorePersistence"),om=new se.OlP("angularfire2.firestore.persistenceSettings"),Ky=new se.OlP("angularfire2.firestore.settings"),Zy=new se.OlP("angularfire2.firestore.use-emulator");function Qy(i,e=(t=>t)){return{query:e(i),ref:i}}let _v=(()=>{class i{constructor(t,o,h,m,w,k,q,ee,me,We,xt,Qt,nn,Gn,tr,os,Hs){this.schedulers=q;const Ki=(0,ge.on)(t,k,o),Bo=me;We&&(0,be.nw)(Ki,k,xt,nn,Gn,tr,Qt,os),[this.firestore,this.persistenceEnabled$]=(0,ge.cc)(`${Ki.name}.firestore`,"AngularFirestore",Ki.name,()=>{const ji=k.runOutsideAngular(()=>Ki.firestore());if(m&&ji.settings(m),Bo&&ji.useEmulator(...Bo),h&&!(0,rt.PM)(w)){const Fi=()=>{try{return(0,pe.D)(ji.enablePersistence(ee||void 0).then(()=>!0,()=>!1))}catch(ua){return"undefined"!=typeof console&&console.warn(ua),(0,Ue.of)(!1)}};return[ji,k.runOutsideAngular(Fi)]}return[ji,(0,Ue.of)(!1)]},[m,Bo,h])}collection(t,o){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:w}=Qy(h,o),k=this.schedulers.ngZone.run(()=>m);return new rm(k,w,this)}collectionGroup(t,o){const h=o||(w=>w),m=this.firestore.collectionGroup(t);return new yv(h(m),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>o);return new im(h,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(se.LFG(ge.Dh),se.LFG(ge.xv,8),se.LFG(sm,8),se.LFG(Ky,8),se.LFG(se.Lbi),se.LFG(se.R0b),se.LFG(Qe.HU),se.LFG(om,8),se.LFG(Zy,8),se.LFG(be.zQ,8),se.LFG(be.Qv,8),se.LFG(be.L6,8),se.LFG(be._Q,8),se.LFG(be.rT,8),se.LFG(be.lh,8),se.LFG(be.f7,8),se.LFG(zy.nm,8))},i.\u0275prov=se.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),vv=(()=>{class i{constructor(){E0.Z.registerVersion("angularfire",Qe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:sm,useValue:!0},{provide:om,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=se.oAB({type:i}),i.\u0275inj=se.cJS({providers:[_v]}),i})();var uf=H(791);const Xy_firebaseConfig={apiKey:"AIzaSyC4FrUcx8K-_kDRxyIklBGCgc8VzvtVqJM",authDomain:"portfolio-f0d20.firebaseapp.com",projectId:"portfolio-f0d20",storageBucket:"portfolio-f0d20.appspot.com",messagingSenderId:"717137529651",appId:"1:717137529651:web:16018c13023e89ba2b8c46",databaseURL:"https://portfolio-f0d20-default-rtdb.asia-southeast1.firebasedatabase.app"};var Ev=H(2279);let bv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=se.oAB({type:i,bootstrap:[Le]}),i.\u0275inj=se.cJS({providers:[{provide:rt.S$,useClass:rt.Do}],imports:[a.b2,z.Pc.forRoot(),ve,ge.hO.initializeApp(Xy_firebaseConfig),be.ww,vv,ue.TE,uf.JS,Ev.m]}),i})();(0,se.G48)(),a.q6().bootstrapModule(bv).catch(i=>console.log(i))},5867:(on,ut,H)=>{"use strict";H.d(ut,{C6:()=>a.getApps,Mq:()=>a.getApp});var a=H(9681);(0,a.registerVersion)("firebase","9.12.1","app")},127:(on,ut,H)=>{"use strict";H.d(ut,{Z:()=>a.Z});var a=H(3942);a.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(on,ut,H)=>{"use strict";H.r(ut);var a=H(5861),se=H(3942),z=H(2090),Le=H(9681),Ne=H(1877),fe=H(655),ve=H(4859);const Qe=function pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Oe=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dt=new Ne.Yd("@firebase/auth");function st(D,...g){dt.logLevel<=Ne.in.ERROR&&dt.error(`Auth (${Le.SDK_VERSION}): ${D}`,...g)}function ht(D,...g){throw rt(D,...g)}function yt(D,...g){return rt(D,...g)}function kt(D,g,E){const M=Object.assign(Object.assign({},nt()),{[g]:E});return new z.LL("auth","Firebase",M).create(g,{appName:D.name})}function je(D,g,E){if(!(g instanceof E))throw E.name!==g.constructor.name&&ht(D,"argument-error"),kt(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rt(D,...g){if("string"!=typeof D){const E=g[0],M=[...g.slice(1)];return M[0]&&(M[0].appName=D.name),D._errorFactory.create(E,...M)}return Oe.create(D,...g)}function Ee(D,g,...E){if(!D)throw rt(g,...E)}function Z(D){const g="INTERNAL ASSERTION FAILED: "+D;throw st(g),new Error(g)}function te(D,g){D||Z(g)}const he=new Map;function Ie(D){te(D instanceof Function,"Expected a class definition");let g=he.get(D);return g?(te(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,he.set(D,g),g)}function Ot(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function Wt(){return"http:"===ze()||"https:"===ze()}function ze(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class $e{constructor(g,E){this.shortDelay=g,this.longDelay=E,te(E>g,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function ot(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xe(D,g){te(D.emulator,"Emulator should always be set here");const{url:E}=D.emulator;return g?`${E}${g.startsWith("/")?g.slice(1):g}`:E}class at{static initialize(g,E,M){this.fetchImpl=g,E&&(this.headersImpl=E),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ft=new $e(3e4,6e4);function Ut(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function Nt(D,g,E,M){return cn.apply(this,arguments)}function cn(){return(cn=(0,a.Z)(function*(D,g,E,M,Q={}){return un(D,Q,(0,a.Z)(function*(){let ce={},ct={};M&&("GET"===g?ct=M:ce={body:JSON.stringify(M)});const jt=(0,z.xO)(Object.assign({key:D.config.apiKey},ct)).slice(1),_n=yield D._getAdditionalHeaders();return _n["Content-Type"]="application/json",D.languageCode&&(_n["X-Firebase-Locale"]=D.languageCode),at.fetch()(vr(D,D.config.apiHost,E,jt),Object.assign({method:g,headers:_n,referrerPolicy:"no-referrer"},ce))}))})).apply(this,arguments)}function un(D,g,E){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(D,g,E){D._canInitEmulator=!1;const M=Object.assign(Object.assign({},gt),g);try{const Q=new Tr(D),ce=yield Promise.race([E(),Q.promise]);Q.clearNetworkTimeout();const ct=yield ce.json();if("needConfirmation"in ct)throw Wr(D,"account-exists-with-different-credential",ct);if(ce.ok&&!("errorMessage"in ct))return ct;{const jt=ce.ok?ct.errorMessage:ct.error.message,[_n,qn]=jt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===_n)throw Wr(D,"credential-already-in-use",ct);if("EMAIL_EXISTS"===_n)throw Wr(D,"email-already-in-use",ct);if("USER_DISABLED"===_n)throw Wr(D,"user-disabled",ct);const Rr=M[_n]||_n.toLowerCase().replace(/[_\s]+/g,"-");if(qn)throw kt(D,Rr,qn);ht(D,Rr)}}catch(Q){if(Q instanceof z.ZR)throw Q;ht(D,"network-request-failed")}})).apply(this,arguments)}function yn(D,g,E,M){return En.apply(this,arguments)}function En(){return(En=(0,a.Z)(function*(D,g,E,M,Q={}){const ce=yield Nt(D,g,E,M,Q);return"mfaPendingCredential"in ce&&ht(D,"multi-factor-auth-required",{_serverResponse:ce}),ce})).apply(this,arguments)}function vr(D,g,E,M){const Q=`${g}${E}?${M}`;return D.config.emulator?Xe(D.config,Q):`${D.config.apiScheme}://${Q}`}class Tr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((E,M)=>{this.timer=setTimeout(()=>M(yt(this.auth,"network-request-failed")),ft.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wr(D,g,E){const M={appName:D.name};E.email&&(M.email=E.email),E.phoneNumber&&(M.phoneNumber=E.phoneNumber);const Q=yt(D,g,M);return Q.customData._tokenResponse=E,Q}function qt(){return(qt=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Yn(D,g){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Un(D,g){return nr.apply(this,arguments)}function nr(){return(nr=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Nr(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Tn(){return(Tn=(0,a.Z)(function*(D,g=!1){const E=(0,z.m9)(D),M=yield E.getIdToken(g),Q=St(M);Ee(Q&&Q.exp&&Q.auth_time&&Q.iat,E.auth,"internal-error");const ce="object"==typeof Q.firebase?Q.firebase:void 0,ct=null==ce?void 0:ce.sign_in_provider;return{claims:Q,token:M,authTime:Nr(In(Q.auth_time)),issuedAtTime:Nr(In(Q.iat)),expirationTime:Nr(In(Q.exp)),signInProvider:ct||null,signInSecondFactor:(null==ce?void 0:ce.sign_in_second_factor)||null}})).apply(this,arguments)}function In(D){return 1e3*Number(D)}function St(D){var g;const[E,M,Q]=D.split(".");if(void 0===E||void 0===M||void 0===Q)return st("JWT malformed, contained fewer than 3 sections"),null;try{const ce=(0,z.tV)(M);return ce?JSON.parse(ce):(st("Failed to decode base64 JWT payload"),null)}catch(ce){return st("Caught error parsing JWT payload as JSON",null===(g=ce)||void 0===g?void 0:g.toString()),null}}function mr(D,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,a.Z)(function*(D,g,E=!1){if(E)return g;try{return yield g}catch(M){throw M instanceof z.ZR&&Lr(M)&&D.auth.currentUser===D&&(yield D.auth.signOut()),M}})).apply(this,arguments)}function Lr({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class Pn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var E;if(g){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const Q=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,Q)}}schedule(g=!1){var E=this;if(!this.isRunning)return;const M=this.getInterval(g);this.timerId=setTimeout((0,a.Z)(function*(){yield E.iteration()}),M)}iteration(){var g=this;return(0,a.Z)(function*(){var E;try{yield g.user.getIdToken(!0)}catch(M){return void("auth/network-request-failed"===(null===(E=M)||void 0===E?void 0:E.code)&&g.schedule(!0))}g.schedule()})()}}class ki{constructor(g,E){this.createdAt=g,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nr(this.lastLoginAt),this.creationTime=Nr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function On(D){return Or.apply(this,arguments)}function Or(){return(Or=(0,a.Z)(function*(D){var g;const E=D.auth,M=yield D.getIdToken(),Q=yield mr(D,Un(E,{idToken:M}));Ee(null==Q?void 0:Q.users.length,E,"internal-error");const ce=Q.users[0];D._notifyReloadListener(ce);const ct=null!==(g=ce.providerUserInfo)&&void 0!==g&&g.length?wn(ce.providerUserInfo):[],jt=ai(D.providerData,ct),Rr=!!D.isAnonymous&&!(D.email&&ce.passwordHash||null!=jt&&jt.length),_r={uid:ce.localId,displayName:ce.displayName||null,photoURL:ce.photoUrl||null,email:ce.email||null,emailVerified:ce.emailVerified||!1,phoneNumber:ce.phoneNumber||null,tenantId:ce.tenantId||null,providerData:jt,metadata:new ki(ce.createdAt,ce.lastLoginAt),isAnonymous:Rr};Object.assign(D,_r)})).apply(this,arguments)}function jr(){return(jr=(0,a.Z)(function*(D){const g=(0,z.m9)(D);yield On(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ai(D,g){return[...D.filter(M=>!g.some(Q=>Q.providerId===M.providerId)),...g]}function wn(D){return D.map(g=>{var{providerId:E}=g,M=(0,fe._T)(g,["providerId"]);return{providerId:E,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function mn(){return(mn=(0,a.Z)(function*(D,g){const E=yield un(D,{},(0,a.Z)(function*(){const M=(0,z.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:Q,apiKey:ce}=D.config,ct=vr(D,Q,"/v1/token",`key=${ce}`),jt=yield D._getAdditionalHeaders();return jt["Content-Type"]="application/x-www-form-urlencoded",at.fetch()(ct,{method:"POST",headers:jt,body:M})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class Nn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ee(g.idToken,"internal-error"),Ee(void 0!==g.idToken,"internal-error"),Ee(void 0!==g.refreshToken,"internal-error");const E="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function gr(D){const g=St(D);return Ee(g,"internal-error"),Ee(void 0!==g.exp,"internal-error"),Ee(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,E)}getToken(g,E=!1){var M=this;return(0,a.Z)(function*(){return Ee(!M.accessToken||M.refreshToken,g,"user-token-expired"),E||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(g,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,E){var M=this;return(0,a.Z)(function*(){const{accessToken:Q,refreshToken:ce,expiresIn:ct}=yield function Gt(D,g){return mn.apply(this,arguments)}(g,E);M.updateTokensAndExpiration(Q,ce,Number(ct))})()}updateTokensAndExpiration(g,E,M){this.refreshToken=E||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(g,E){const{refreshToken:M,accessToken:Q,expirationTime:ce}=E,ct=new Nn;return M&&(Ee("string"==typeof M,"internal-error",{appName:g}),ct.refreshToken=M),Q&&(Ee("string"==typeof Q,"internal-error",{appName:g}),ct.accessToken=Q),ce&&(Ee("number"==typeof ce,"internal-error",{appName:g}),ct.expirationTime=ce),ct}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Nn,this.toJSON())}_performRefresh(){return Z("not implemented")}}function xn(D,g){Ee("string"==typeof D||void 0===D,"internal-error",{appName:g})}class jn{constructor(g){var{uid:E,auth:M,stsTokenManager:Q}=g,ce=(0,fe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=M,this.stsTokenManager=Q,this.accessToken=Q.accessToken,this.displayName=ce.displayName||null,this.email=ce.email||null,this.emailVerified=ce.emailVerified||!1,this.phoneNumber=ce.phoneNumber||null,this.photoURL=ce.photoURL||null,this.isAnonymous=ce.isAnonymous||!1,this.tenantId=ce.tenantId||null,this.providerData=ce.providerData?[...ce.providerData]:[],this.metadata=new ki(ce.createdAt||void 0,ce.lastLoginAt||void 0)}getIdToken(g){var E=this;return(0,a.Z)(function*(){const M=yield mr(E,E.stsTokenManager.getToken(E.auth,g));return Ee(M,E.auth,"internal-error"),E.accessToken!==M&&(E.accessToken=M,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),M})()}getIdTokenResult(g){return function ur(D){return Tn.apply(this,arguments)}(this,g)}reload(){return function cr(D){return jr.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ee(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(E=>Object.assign({},E)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new jn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,E=!1){var M=this;return(0,a.Z)(function*(){let Q=!1;g.idToken&&g.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(g),Q=!0),E&&(yield On(M)),yield M.auth._persistUserIfCurrent(M),Q&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var g=this;return(0,a.Z)(function*(){const E=yield g.getIdToken();return yield mr(g,function er(D,g){return qt.apply(this,arguments)}(g.auth,{idToken:E})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,E){var M,Q,ce,ct,jt,_n,qn,Rr;const _r=null!==(M=E.displayName)&&void 0!==M?M:void 0,fo=null!==(Q=E.email)&&void 0!==Q?Q:void 0,Ma=null!==(ce=E.phoneNumber)&&void 0!==ce?ce:void 0,jl=null!==(ct=E.photoURL)&&void 0!==ct?ct:void 0,Wo=null!==(jt=E.tenantId)&&void 0!==jt?jt:void 0,nc=null!==(_n=E._redirectEventId)&&void 0!==_n?_n:void 0,id=null!==(qn=E.createdAt)&&void 0!==qn?qn:void 0,Od=null!==(Rr=E.lastLoginAt)&&void 0!==Rr?Rr:void 0,{uid:sd,emailVerified:zo,isAnonymous:vh,providerData:Oc,stsTokenManager:Va}=E;Ee(sd&&Va,g,"internal-error");const kc=Nn.fromJSON(this.name,Va);Ee("string"==typeof sd,g,"internal-error"),xn(_r,g.name),xn(fo,g.name),Ee("boolean"==typeof zo,g,"internal-error"),Ee("boolean"==typeof vh,g,"internal-error"),xn(Ma,g.name),xn(jl,g.name),xn(Wo,g.name),xn(nc,g.name),xn(id,g.name),xn(Od,g.name);const Hl=new jn({uid:sd,auth:g,email:fo,emailVerified:zo,displayName:_r,isAnonymous:vh,photoURL:jl,phoneNumber:Ma,tenantId:Wo,stsTokenManager:kc,createdAt:id,lastLoginAt:Od});return Oc&&Array.isArray(Oc)&&(Hl.providerData=Oc.map(od=>Object.assign({},od))),nc&&(Hl._redirectEventId=nc),Hl}static _fromIdTokenResponse(g,E,M=!1){return(0,a.Z)(function*(){const Q=new Nn;Q.updateFromServerResponse(E);const ce=new jn({uid:E.localId,auth:g,stsTokenManager:Q,isAnonymous:M});return yield On(ce),ce})()}}const Pe=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(E,M){var Q=this;return(0,a.Z)(function*(){Q.storage[E]=M})()}_get(E){var M=this;return(0,a.Z)(function*(){const Q=M.storage[E];return void 0===Q?null:Q})()}_remove(E){var M=this;return(0,a.Z)(function*(){delete M.storage[E]})()}_addListener(E,M){}_removeListener(E,M){}}return D.type="NONE",D})();function He(D,g,E){return`firebase:${D}:${g}:${E}`}class pt{constructor(g,E,M){this.persistence=g,this.auth=E,this.userKey=M;const{config:Q,name:ce}=this.auth;this.fullUserKey=He(this.userKey,Q.apiKey,ce),this.fullPersistenceKey=He("persistence",Q.apiKey,ce),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,a.Z)(function*(){const E=yield g.persistence._get(g.fullUserKey);return E?jn._fromJSON(g.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var E=this;return(0,a.Z)(function*(){if(E.persistence===g)return;const M=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=g,M?E.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,E,M="authUser"){return(0,a.Z)(function*(){if(!E.length)return new pt(Ie(Pe),g,M);const Q=(yield Promise.all(E.map(function(){var qn=(0,a.Z)(function*(Rr){if(yield Rr._isAvailable())return Rr});return function(Rr){return qn.apply(this,arguments)}}()))).filter(qn=>qn);let ce=Q[0]||Ie(Pe);const ct=He(M,g.config.apiKey,g.name);let jt=null;for(const qn of E)try{const Rr=yield qn._get(ct);if(Rr){const _r=jn._fromJSON(g,Rr);qn!==ce&&(jt=_r),ce=qn;break}}catch(Rr){}const _n=Q.filter(qn=>qn._shouldAllowMigration);return ce._shouldAllowMigration&&_n.length?(ce=_n[0],jt&&(yield ce._set(ct,jt.toJSON())),yield Promise.all(E.map(function(){var qn=(0,a.Z)(function*(Rr){if(Rr!==ce)try{yield Rr._remove(ct)}catch(_r){}});return function(Rr){return qn.apply(this,arguments)}}())),new pt(ce,g,M)):new pt(ce,g,M)})()}}function et(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Er(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(hn(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(mt(g))return"Blackberry";if(Be(g))return"Webos";if(dn(g))return"Safari";if((g.includes("chrome/")||dr(g))&&!g.includes("edge/"))return"Chrome";if(Sr(g))return"Android";{const M=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==M?void 0:M.length))return M[1]}return"Other"}function hn(D=(0,z.z$)()){return/firefox\//i.test(D)}function dn(D=(0,z.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function dr(D=(0,z.z$)()){return/crios\//i.test(D)}function Er(D=(0,z.z$)()){return/iemobile/i.test(D)}function Sr(D=(0,z.z$)()){return/android/i.test(D)}function mt(D=(0,z.z$)()){return/blackberry/i.test(D)}function Be(D=(0,z.z$)()){return/webos/i.test(D)}function Me(D=(0,z.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function Vn(D=(0,z.z$)()){return Me(D)||Sr(D)||Be(D)||mt(D)||/windows phone/i.test(D)||Er(D)}function Sn(D,g=[]){let E;switch(D){case"Browser":E=et((0,z.z$)());break;case"Worker":E=`${et((0,z.z$)())}-${D}`;break;default:E=D}const M=g.length?g.join(","):"FirebaseCore-web";return`${E}/JsCore/${Le.SDK_VERSION}/${M}`}class Kn{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,E){const M=ce=>new Promise((ct,jt)=>{try{ct(g(ce))}catch(_n){jt(_n)}});M.onAbort=E,this.queue.push(M);const Q=this.queue.length-1;return()=>{this.queue[Q]=()=>Promise.resolve()}}runMiddleware(g){var E=this;return(0,a.Z)(function*(){var M;if(E.auth.currentUser===g)return;const Q=[];try{for(const ce of E.queue)yield ce(g),ce.onAbort&&Q.push(ce.onAbort)}catch(ce){Q.reverse();for(const ct of Q)try{ct()}catch(jt){}throw E.auth._errorFactory.create("login-blocked",{originalMessage:null===(M=ce)||void 0===M?void 0:M.message})}})()}}class kr{constructor(g,E,M){this.app=g,this.heartbeatServiceProvider=E,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new si(this),this.idTokenSubscription=new si(this),this.beforeStateQueue=new Kn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Oe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(g,E){var M=this;return E&&(this._popupRedirectResolver=Ie(E)),this._initializationPromise=this.queue((0,a.Z)(function*(){var Q,ce;if(!M._deleted&&(M.persistenceManager=yield pt.create(M,g),!M._deleted)){if(null!==(Q=M._popupRedirectResolver)&&void 0!==Q&&Q._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch(ct){}yield M.initializeCurrentUser(E),M.lastNotifiedUid=(null===(ce=M.currentUser)||void 0===ce?void 0:ce.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,a.Z)(function*(){if(g._deleted)return;const E=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||E){if(g.currentUser&&E&&g.currentUser.uid===E.uid)return g._currentUser._assign(E),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(E,!0)}})()}initializeCurrentUser(g){var E=this;return(0,a.Z)(function*(){var M;const Q=yield E.assertedPersistence.getCurrentUser();let ce=Q,ct=!1;if(g&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const jt=null===(M=E.redirectUser)||void 0===M?void 0:M._redirectEventId,_n=null==ce?void 0:ce._redirectEventId,qn=yield E.tryRedirectSignIn(g);(!jt||jt===_n)&&(null==qn?void 0:qn.user)&&(ce=qn.user,ct=!0)}if(!ce)return E.directlySetCurrentUser(null);if(!ce._redirectEventId){if(ct)try{yield E.beforeStateQueue.runMiddleware(ce)}catch(jt){ce=Q,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(jt))}return ce?E.reloadAndSetCurrentUserOrClear(ce):E.directlySetCurrentUser(null)}return Ee(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===ce._redirectEventId?E.directlySetCurrentUser(ce):E.reloadAndSetCurrentUserOrClear(ce)})()}tryRedirectSignIn(g){var E=this;return(0,a.Z)(function*(){let M=null;try{M=yield E._popupRedirectResolver._completeRedirectFn(E,g,!0)}catch(Q){yield E._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(g){var E=this;return(0,a.Z)(function*(){var M;try{yield On(g)}catch(Q){if("auth/network-request-failed"!==(null===(M=Q)||void 0===M?void 0:M.code))return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function De(){if("undefined"==typeof navigator)return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,a.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var E=this;return(0,a.Z)(function*(){const M=g?(0,z.m9)(g):null;return M&&Ee(M.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(M&&M._clone(E))})()}_updateCurrentUser(g,E=!1){var M=this;return(0,a.Z)(function*(){if(!M._deleted)return g&&Ee(M.tenantId===g.tenantId,M,"tenant-id-mismatch"),E||(yield M.beforeStateQueue.runMiddleware(g)),M.queue((0,a.Z)(function*(){yield M.directlySetCurrentUser(g),M.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,a.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var E=this;return this.queue((0,a.Z)(function*(){yield E.assertedPersistence.setPersistence(Ie(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new z.LL("auth","Firebase",g())}onAuthStateChanged(g,E,M){return this.registerStateListener(this.authStateSubscription,g,E,M)}beforeAuthStateChanged(g,E){return this.beforeStateQueue.pushCallback(g,E)}onIdTokenChanged(g,E,M){return this.registerStateListener(this.idTokenSubscription,g,E,M)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,E){var M=this;return(0,a.Z)(function*(){const Q=yield M.getOrInitRedirectPersistenceManager(E);return null===g?Q.removeCurrentUser():Q.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var E=this;return(0,a.Z)(function*(){if(!E.redirectPersistenceManager){const M=g&&Ie(g)||E._popupRedirectResolver;Ee(M,E,"argument-error"),E.redirectPersistenceManager=yield pt.create(E,[Ie(M._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(g){var E=this;return(0,a.Z)(function*(){var M,Q;return E._isInitialized&&(yield E.queue((0,a.Z)(function*(){}))),(null===(M=E._currentUser)||void 0===M?void 0:M._redirectEventId)===g?E._currentUser:(null===(Q=E.redirectUser)||void 0===Q?void 0:Q._redirectEventId)===g?E.redirectUser:null})()}_persistUserIfCurrent(g){var E=this;return(0,a.Z)(function*(){if(g===E.currentUser)return E.queue((0,a.Z)(function*(){return E.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(E=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,E,M,Q){if(this._deleted)return()=>{};const ce="function"==typeof E?E:E.next.bind(E),ct=this._isInitialized?Promise.resolve():this._initializationPromise;return Ee(ct,this,"internal-error"),ct.then(()=>ce(this.currentUser)),"function"==typeof E?g.addObserver(E,M,Q):g.addObserver(E)}directlySetCurrentUser(g){var E=this;return(0,a.Z)(function*(){E.currentUser&&E.currentUser!==g&&E._currentUser._stopProactiveRefresh(),g&&E.isProactiveRefreshEnabled&&g._startProactiveRefresh(),E.currentUser=g,g?yield E.assertedPersistence.setCurrentUser(g):yield E.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Sn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,a.Z)(function*(){var E;const M={"X-Client-Version":g.clientVersion};g.app.options.appId&&(M["X-Firebase-gmpid"]=g.app.options.appId);const Q=yield null===(E=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();return Q&&(M["X-Firebase-Client"]=Q),M})()}}function Br(D){return(0,z.m9)(D)}class si{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,z.ne)(E=>this.observer=E)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fn(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function li(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class Hi{constructor(g,E){this.providerId=g,this.signInMethod=E}toJSON(){return Z("not implemented")}_getIdTokenResponse(g){return Z("not implemented")}_linkToIdToken(g,E){return Z("not implemented")}_getReauthenticationResolver(g){return Z("not implemented")}}function hi(D,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:resetPassword",Ut(D,g))})).apply(this,arguments)}function Gi(D,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function _i(D,g){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:update",Ut(D,g))})).apply(this,arguments)}function Ti(){return(Ti=(0,a.Z)(function*(D,g){return yn(D,"POST","/v1/accounts:signInWithPassword",Ut(D,g))})).apply(this,arguments)}function Li(D,g){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:sendOobCode",Ut(D,g))})).apply(this,arguments)}function Ce(D,g){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,a.Z)(function*(D,g){return Li(D,g)})).apply(this,arguments)}function it(D,g){return bt.apply(this,arguments)}function bt(){return(bt=(0,a.Z)(function*(D,g){return Li(D,g)})).apply(this,arguments)}function ye(D,g){return qe.apply(this,arguments)}function qe(){return(qe=(0,a.Z)(function*(D,g){return Li(D,g)})).apply(this,arguments)}function _t(D,g){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,a.Z)(function*(D,g){return Li(D,g)})).apply(this,arguments)}function pn(){return(pn=(0,a.Z)(function*(D,g){return yn(D,"POST","/v1/accounts:signInWithEmailLink",Ut(D,g))})).apply(this,arguments)}function rr(){return(rr=(0,a.Z)(function*(D,g){return yn(D,"POST","/v1/accounts:signInWithEmailLink",Ut(D,g))})).apply(this,arguments)}class zr extends Hi{constructor(g,E,M,Q=null){super("password",M),this._email=g,this._password=E,this._tenantId=Q}static _fromEmailAndPassword(g,E){return new zr(g,E,"password")}static _fromEmailAndCode(g,E,M=null){return new zr(g,E,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const E="string"==typeof g?JSON.parse(g):g;if((null==E?void 0:E.email)&&(null==E?void 0:E.password)){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(g){var E=this;return(0,a.Z)(function*(){switch(E.signInMethod){case"password":return function fi(D,g){return Ti.apply(this,arguments)}(g,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function zt(D,g){return pn.apply(this,arguments)}(g,{email:E._email,oobCode:E._password});default:ht(g,"internal-error")}})()}_linkToIdToken(g,E){var M=this;return(0,a.Z)(function*(){switch(M.signInMethod){case"password":return Gi(g,{idToken:E,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function vn(D,g){return rr.apply(this,arguments)}(g,{idToken:E,email:M._email,oobCode:M._password});default:ht(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function qr(D,g){return tt.apply(this,arguments)}function tt(){return(tt=(0,a.Z)(function*(D,g){return yn(D,"POST","/v1/accounts:signInWithIdp",Ut(D,g))})).apply(this,arguments)}class vt extends Hi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const E=new vt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(E.idToken=g.idToken),g.accessToken&&(E.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(E.nonce=g.nonce),g.pendingToken&&(E.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(E.accessToken=g.oauthToken,E.secret=g.oauthTokenSecret):ht("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const E="string"==typeof g?JSON.parse(g):g,{providerId:M,signInMethod:Q}=E,ce=(0,fe._T)(E,["providerId","signInMethod"]);if(!M||!Q)return null;const ct=new vt(M,Q);return ct.idToken=ce.idToken||void 0,ct.accessToken=ce.accessToken||void 0,ct.secret=ce.secret,ct.nonce=ce.nonce,ct.pendingToken=ce.pendingToken||null,ct}_getIdTokenResponse(g){return qr(g,this.buildRequest())}_linkToIdToken(g,E){const M=this.buildRequest();return M.idToken=E,qr(g,M)}_getReauthenticationResolver(g){const E=this.buildRequest();return E.autoCreate=!1,qr(g,E)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),g.postBody=(0,z.xO)(E)}return g}}function Vt(D,g){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:sendVerificationCode",Ut(D,g))})).apply(this,arguments)}function fn(){return(fn=(0,a.Z)(function*(D,g){return yn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ut(D,g))})).apply(this,arguments)}function zn(){return(zn=(0,a.Z)(function*(D,g){const E=yield yn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ut(D,g));if(E.temporaryProof)throw Wr(D,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const Zi={USER_NOT_FOUND:"user-not-found"};function Is(){return(Is=(0,a.Z)(function*(D,g){return yn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ut(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Zi)})).apply(this,arguments)}class ls extends Hi{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,E){return new ls({verificationId:g,verificationCode:E})}static _fromTokenResponse(g,E){return new ls({phoneNumber:g,temporaryProof:E})}_getIdTokenResponse(g){return function Xt(D,g){return fn.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,E){return function Ir(D,g){return zn.apply(this,arguments)}(g,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Ms(D,g){return Is.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:E,verificationId:M,verificationCode:Q}=this.params;return g&&E?{temporaryProof:g,phoneNumber:E}:{sessionInfo:M,code:Q}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:E,verificationCode:M,phoneNumber:Q,temporaryProof:ce}=g;return M||E||Q||ce?new ls({verificationId:E,verificationCode:M,phoneNumber:Q,temporaryProof:ce}):null}}class vi{constructor(g){var E,M,Q,ce,ct,jt;const _n=(0,z.zd)((0,z.pd)(g)),qn=null!==(E=_n.apiKey)&&void 0!==E?E:null,Rr=null!==(M=_n.oobCode)&&void 0!==M?M:null,_r=function Yr(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Q=_n.mode)&&void 0!==Q?Q:null);Ee(qn&&Rr&&_r,"argument-error"),this.apiKey=qn,this.operation=_r,this.code=Rr,this.continueUrl=null!==(ce=_n.continueUrl)&&void 0!==ce?ce:null,this.languageCode=null!==(ct=_n.languageCode)&&void 0!==ct?ct:null,this.tenantId=null!==(jt=_n.tenantId)&&void 0!==jt?jt:null}static parseLink(g){const E=function Ar(D){const g=(0,z.zd)((0,z.pd)(D)).link,E=g?(0,z.zd)((0,z.pd)(g)).deep_link_id:null,M=(0,z.zd)((0,z.pd)(D)).deep_link_id;return(M?(0,z.zd)((0,z.pd)(M)).link:null)||M||E||g||D}(g);try{return new vi(E)}catch(M){return null}}}let Qi=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(E,M){return zr._fromEmailAndPassword(E,M)}static credentialWithLink(E,M){const Q=vi.parseLink(M);return Ee(Q,"argument-error"),zr._fromEmailAndCode(E,Q.code,Q.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Si{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Bi extends Si{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Cs extends Bi{static credentialFromJSON(g){const E="string"==typeof g?JSON.parse(g):g;return Ee("providerId"in E&&"signInMethod"in E,"argument-error"),vt._fromParams(E)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ee(g.idToken||g.accessToken,"argument-error"),vt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Cs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Cs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:M,oauthTokenSecret:Q,pendingToken:ce,nonce:ct,providerId:jt}=g;if(!M&&!Q&&!E&&!ce||!jt)return null;try{return new Cs(jt)._credential({idToken:E,accessToken:M,nonce:ct,pendingToken:ce})}catch(_n){return null}}}let Qs=(()=>{class D extends Bi{constructor(){super("facebook.com")}static credential(E){return vt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return D.credential(E.oauthAccessToken)}catch(M){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Gs=(()=>{class D extends Bi{constructor(){super("google.com"),this.addScope("profile")}static credential(E,M){return vt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:M})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:M,oauthAccessToken:Q}=E;if(!M&&!Q)return null;try{return D.credential(M,Q)}catch(ce){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),Xi=(()=>{class D extends Bi{constructor(){super("github.com")}static credential(E){return vt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return D.credential(E.oauthAccessToken)}catch(M){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Wi extends Hi{constructor(g,E){super(g,g),this.pendingToken=E}_getIdTokenResponse(g){return qr(g,this.buildRequest())}_linkToIdToken(g,E){const M=this.buildRequest();return M.idToken=E,qr(g,M)}_getReauthenticationResolver(g){const E=this.buildRequest();return E.autoCreate=!1,qr(g,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const E="string"==typeof g?JSON.parse(g):g,{providerId:M,signInMethod:Q,pendingToken:ce}=E;return M&&Q&&ce&&M===Q?new Wi(M,ce):null}static _create(g,E){return new Wi(g,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cs extends Si{constructor(g){Ee(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return cs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return cs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const E=Wi.fromJSON(g);return Ee(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:E,providerId:M}=g;if(!E||!M)return null;try{return Wi._create(M,E)}catch(Q){return null}}}let gs=(()=>{class D extends Bi{constructor(){super("twitter.com")}static credential(E,M){return vt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:M})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:M,oauthTokenSecret:Q}=E;if(!M||!Q)return null;try{return D.credential(M,Q)}catch(ce){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function ds(D,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,a.Z)(function*(D,g){return yn(D,"POST","/v1/accounts:signUp",Ut(D,g))})).apply(this,arguments)}class es{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,E,M,Q=!1){return(0,a.Z)(function*(){const ce=yield jn._fromIdTokenResponse(g,M,Q),ct=Mi(M);return new es({user:ce,providerId:ct,_tokenResponse:M,operationType:E})})()}static _forOperation(g,E,M){return(0,a.Z)(function*(){yield g._updateTokensIfNecessary(M,!0);const Q=Mi(M);return new es({user:g,providerId:Q,_tokenResponse:M,operationType:E})})()}}function Mi(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Kr(){return(Kr=(0,a.Z)(function*(D){var g;const E=Br(D);if(yield E._initializationPromise,null!==(g=E.currentUser)&&void 0!==g&&g.isAnonymous)return new es({user:E.currentUser,providerId:null,operationType:"signIn"});const M=yield ds(E,{returnSecureToken:!0}),Q=yield es._fromIdTokenResponse(E,"signIn",M,!0);return yield E._updateCurrentUser(Q.user),Q})).apply(this,arguments)}class Ds extends z.ZR{constructor(g,E,M,Q){var ce;super(E.code,E.message),this.operationType=M,this.user=Q,Object.setPrototypeOf(this,Ds.prototype),this.customData={appName:g.name,tenantId:null!==(ce=g.tenantId)&&void 0!==ce?ce:void 0,_serverResponse:E.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(g,E,M,Q){return new Ds(g,E,M,Q)}}function Rs(D,g,E,M){return("reauthenticate"===g?E._getReauthenticationResolver(D):E._getIdTokenResponse(D)).catch(ce=>{throw"auth/multi-factor-auth-required"===ce.code?Ds._fromErrorAndOperation(D,ce,g,M):ce})}function ci(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function Vi(){return(Vi=(0,a.Z)(function*(D,g){const E=(0,z.m9)(D);yield Cr(!0,E,g);const{providerUserInfo:M}=yield Yn(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[g]}),Q=ci(M||[]);return E.providerData=E.providerData.filter(ce=>Q.has(ce.providerId)),Q.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E})).apply(this,arguments)}function Xs(D,g){return pi.apply(this,arguments)}function pi(){return(pi=(0,a.Z)(function*(D,g,E=!1){const M=yield mr(D,g._linkToIdToken(D.auth,yield D.getIdToken()),E);return es._forOperation(D,"link",M)})).apply(this,arguments)}function Cr(D,g,E){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,a.Z)(function*(D,g,E){yield On(g);const Q=!1===D?"provider-already-linked":"no-such-provider";Ee(ci(g.providerData).has(E)===D,g.auth,Q)})).apply(this,arguments)}function hs(D,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,a.Z)(function*(D,g,E=!1){var M;const{auth:Q}=D,ce="reauthenticate";try{const ct=yield mr(D,Rs(Q,ce,g,D),E);Ee(ct.idToken,Q,"internal-error");const jt=St(ct.idToken);Ee(jt,Q,"internal-error");const{sub:_n}=jt;return Ee(D.uid===_n,Q,"user-mismatch"),es._forOperation(D,ce,ct)}catch(ct){throw"auth/user-not-found"===(null===(M=ct)||void 0===M?void 0:M.code)&&ht(Q,"user-mismatch"),ct}})).apply(this,arguments)}function Fr(D,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,a.Z)(function*(D,g,E=!1){const M="signIn",Q=yield Rs(D,M,g),ce=yield es._fromIdTokenResponse(D,M,Q);return E||(yield D._updateCurrentUser(ce.user)),ce})).apply(this,arguments)}function xr(D,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,a.Z)(function*(D,g){return Fr(Br(D),g)})).apply(this,arguments)}function Js(D,g){return go.apply(this,arguments)}function go(){return(go=(0,a.Z)(function*(D,g){const E=(0,z.m9)(D);return yield Cr(!1,E,g.providerId),Xs(E,g)})).apply(this,arguments)}function Vo(D,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,a.Z)(function*(D,g){return hs((0,z.m9)(D),g)})).apply(this,arguments)}function qo(D,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,a.Z)(function*(D,g){return yn(D,"POST","/v1/accounts:signInWithCustomToken",Ut(D,g))})).apply(this,arguments)}function Ss(){return(Ss=(0,a.Z)(function*(D,g){const E=Br(D),M=yield qo(E,{token:g,returnSecureToken:!0}),Q=yield es._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(Q.user),Q})).apply(this,arguments)}class Zt{constructor(g,E){this.factorId=g,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(g,E){return"phoneInfo"in E?Dr._fromServerResponse(g,E):ht(g,"internal-error")}}class Dr extends Zt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,E){return new Dr(E)}}function Os(D,g,E){var M;Ee((null===(M=E.url)||void 0===M?void 0:M.length)>0,D,"invalid-continue-uri"),Ee(void 0===E.dynamicLinkDomain||E.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=E.url,g.dynamicLinkDomain=E.dynamicLinkDomain,g.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(Ee(E.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=E.iOS.bundleId),E.android&&(Ee(E.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=E.android.installApp,g.androidMinimumVersionCode=E.android.minimumVersion,g.androidPackageName=E.android.packageName)}function Ci(){return(Ci=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D),Q={requestType:"PASSWORD_RESET",email:g};E&&Os(M,Q,E),yield it(M,Q)})).apply(this,arguments)}function ts(){return(ts=(0,a.Z)(function*(D,g,E){yield hi((0,z.m9)(D),{oobCode:g,newPassword:E})})).apply(this,arguments)}function eo(){return(eo=(0,a.Z)(function*(D,g){yield _i((0,z.m9)(D),{oobCode:g})})).apply(this,arguments)}function G(D,g){return V.apply(this,arguments)}function V(){return(V=(0,a.Z)(function*(D,g){const E=(0,z.m9)(D),M=yield hi(E,{oobCode:g}),Q=M.requestType;switch(Ee(Q,E,"internal-error"),Q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ee(M.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ee(M.mfaInfo,E,"internal-error");default:Ee(M.email,E,"internal-error")}let ce=null;return M.mfaInfo&&(ce=Zt._fromServerResponse(Br(E),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:ce},operation:Q}})).apply(this,arguments)}function d(){return(d=(0,a.Z)(function*(D,g){const{data:E}=yield G((0,z.m9)(D),g);return E.email})).apply(this,arguments)}function y(){return(y=(0,a.Z)(function*(D,g,E){const M=Br(D),Q=yield ds(M,{returnSecureToken:!0,email:g,password:E}),ce=yield es._fromIdTokenResponse(M,"signIn",Q);return yield M._updateCurrentUser(ce.user),ce})).apply(this,arguments)}function ke(){return(ke=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D),Q={requestType:"EMAIL_SIGNIN",email:g};Ee(E.handleCodeInApp,M,"argument-error"),E&&Os(M,Q,E),yield ye(M,Q)})).apply(this,arguments)}function rn(){return(rn=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D),Q=Qi.credentialWithLink(g,E||Ot());return Ee(Q._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),xr(M,Q)})).apply(this,arguments)}function Mn(D,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:createAuthUri",Ut(D,g))})).apply(this,arguments)}function Mr(){return(Mr=(0,a.Z)(function*(D,g){const M={identifier:g,continueUri:Wt()?Ot():"http://localhost"},{signinMethods:Q}=yield Mn((0,z.m9)(D),M);return Q||[]})).apply(this,arguments)}function lr(){return(lr=(0,a.Z)(function*(D,g){const E=(0,z.m9)(D),Q={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&Os(E.auth,Q,g);const{email:ce}=yield Ce(E.auth,Q);ce!==D.email&&(yield D.reload())})).apply(this,arguments)}function $i(){return($i=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D),ce={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};E&&Os(M.auth,ce,E);const{email:ct}=yield _t(M.auth,ce);ct!==D.email&&(yield D.reload())})).apply(this,arguments)}function Ls(D,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,a.Z)(function*(D,g){return Nt(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function io(){return(io=(0,a.Z)(function*(D,{displayName:g,photoURL:E}){if(void 0===g&&void 0===E)return;const M=(0,z.m9)(D),ce={idToken:yield M.getIdToken(),displayName:g,photoUrl:E,returnSecureToken:!0},ct=yield mr(M,Ls(M.auth,ce));M.displayName=ct.displayName||null,M.photoURL=ct.photoUrl||null;const jt=M.providerData.find(({providerId:_n})=>"password"===_n);jt&&(jt.displayName=M.displayName,jt.photoURL=M.photoURL),yield M._updateTokensIfNecessary(ct)})).apply(this,arguments)}function $(D,g,E){return ie.apply(this,arguments)}function ie(){return(ie=(0,a.Z)(function*(D,g,E){const{auth:M}=D,ce={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(ce.email=g),E&&(ce.password=E);const ct=yield mr(D,Gi(M,ce));yield D._updateTokensIfNecessary(ct,!0)})).apply(this,arguments)}class Dt{constructor(g,E,M={}){this.isNewUser=g,this.providerId=E,this.profile=M}}class Lt extends Dt{constructor(g,E,M,Q){super(g,E,M),this.username=Q}}class Rn extends Dt{constructor(g,E){super(g,"facebook.com",E)}}class ti extends Lt{constructor(g,E){super(g,"github.com",E,"string"==typeof(null==E?void 0:E.login)?null==E?void 0:E.login:null)}}class ni extends Dt{constructor(g,E){super(g,"google.com",E)}}class ri extends Lt{constructor(g,E,M){super(g,"twitter.com",E,M)}}function Zr(D){const{user:g,_tokenResponse:E}=D;return g.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function Fe(D){var g,E;if(!D)return null;const{providerId:M}=D,Q=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},ce=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!M&&(null==D?void 0:D.idToken)){const ct=null===(E=null===(g=St(D.idToken))||void 0===g?void 0:g.firebase)||void 0===E?void 0:E.sign_in_provider;if(ct)return new Dt(ce,"anonymous"!==ct&&"custom"!==ct?ct:null)}if(!M)return null;switch(M){case"facebook.com":return new Rn(ce,Q);case"github.com":return new ti(ce,Q);case"google.com":return new ni(ce,Q);case"twitter.com":return new ri(ce,Q,D.screenName||null);case"custom":case"anonymous":return new Dt(ce,null);default:return new Dt(ce,M,Q)}}(E)}class Bs{constructor(g,E,M){this.type=g,this.credential=E,this.auth=M}static _fromIdtoken(g,E){return new Bs("enroll",g,E)}static _fromMfaPendingCredential(g){return new Bs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var E,M;if(null!=g&&g.multiFactorSession){if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.pendingCredential)return Bs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(M=g.multiFactorSession)&&void 0!==M&&M.idToken)return Bs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Yo{constructor(g,E,M){this.session=g,this.hints=E,this.signInResolver=M}static _fromError(g,E){const M=Br(g),Q=E.customData._serverResponse,ce=(Q.mfaInfo||[]).map(jt=>Zt._fromServerResponse(M,jt));Ee(Q.mfaPendingCredential,M,"internal-error");const ct=Bs._fromMfaPendingCredential(Q.mfaPendingCredential);return new Yo(ct,ce,function(){var jt=(0,a.Z)(function*(_n){const qn=yield _n._process(M,ct);delete Q.mfaInfo,delete Q.mfaPendingCredential;const Rr=Object.assign(Object.assign({},Q),{idToken:qn.idToken,refreshToken:qn.refreshToken});switch(E.operationType){case"signIn":const _r=yield es._fromIdTokenResponse(M,E.operationType,Rr);return yield M._updateCurrentUser(_r.user),_r;case"reauthenticate":return Ee(E.user,M,"internal-error"),es._forOperation(E.user,E.operationType,Rr);default:ht(M,"internal-error")}});return function(_n){return jt.apply(this,arguments)}}())}resolveSignIn(g){var E=this;return(0,a.Z)(function*(){return E.signInResolver(g)})()}}function As(D,g){return Nt(D,"POST","/v2/accounts/mfaEnrollment:start",Ut(D,g))}class Ql{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(M=>Zt._fromServerResponse(g.auth,M)))})}static _fromUser(g){return new Ql(g)}getSession(){var g=this;return(0,a.Z)(function*(){return Bs._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,E){var M=this;return(0,a.Z)(function*(){const Q=g,ce=yield M.getSession(),ct=yield mr(M.user,Q._process(M.user.auth,ce,E));return yield M.user._updateTokensIfNecessary(ct),M.user.reload()})()}unenroll(g){var E=this;return(0,a.Z)(function*(){var M;const Q="string"==typeof g?g:g.uid,ce=yield E.user.getIdToken(),ct=yield mr(E.user,function Ia(D,g){return Nt(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(D,g))}(E.user.auth,{idToken:ce,mfaEnrollmentId:Q}));E.enrolledFactors=E.enrolledFactors.filter(({uid:jt})=>jt!==Q),yield E.user._updateTokensIfNecessary(ct);try{yield E.user.reload()}catch(jt){if("auth/user-token-expired"!==(null===(M=jt)||void 0===M?void 0:M.code))throw jt}})()}}const _l=new WeakMap,ks="__sak";class Wa{constructor(g,E){this.storageRetriever=g,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(ks,"1"),this.storage.removeItem(ks),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,E){return this.storage.setItem(g,JSON.stringify(E)),Promise.resolve()}_get(g){const E=this.storage.getItem(g);return Promise.resolve(E?JSON.parse(E):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const $o=(()=>{class D extends Wa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,M)=>this.onStorageEvent(E,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Oa(){const D=(0,z.z$)();return dn(D)||Me(D)}()&&function tn(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=Vn(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const M of Object.keys(this.listeners)){const Q=this.storage.getItem(M),ce=this.localCache[M];Q!==ce&&E(M,ce,Q)}}onStorageEvent(E,M=!1){if(!E.key)return void this.forAllChangedKeys((jt,_n,qn)=>{this.notifyListeners(jt,qn)});const Q=E.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const jt=this.storage.getItem(Q);if(E.newValue!==jt)null!==E.newValue?this.storage.setItem(Q,E.newValue):this.storage.removeItem(Q);else if(this.localCache[Q]===E.newValue&&!M)return}const ce=()=>{const jt=this.storage.getItem(Q);!M&&this.localCache[Q]===jt||this.notifyListeners(Q,jt)},ct=this.storage.getItem(Q);!function Wn(){return(0,z.w1)()&&10===document.documentMode}()||ct===E.newValue||E.newValue===E.oldValue?ce():setTimeout(ce,10)}notifyListeners(E,M){this.localCache[E]=M;const Q=this.listeners[E];if(Q)for(const ce of Array.from(Q))ce(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,M,Q)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:M,newValue:Q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(M)}_removeListener(E,M){this.listeners[E]&&(this.listeners[E].delete(M),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,M){var Q=()=>super._set,ce=this;return(0,a.Z)(function*(){yield Q().call(ce,E,M),ce.localCache[E]=JSON.stringify(M)})()}_get(E){var M=()=>super._get,Q=this;return(0,a.Z)(function*(){const ce=yield M().call(Q,E);return Q.localCache[E]=JSON.stringify(ce),ce})()}_remove(E){var M=()=>super._remove,Q=this;return(0,a.Z)(function*(){yield M().call(Q,E),delete Q.localCache[E]})()}}return D.type="LOCAL",D})(),ca=(()=>{class D extends Wa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,M){}_removeListener(E,M){}}return D.type="SESSION",D})();let da=(()=>{class D{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const M=this.receivers.find(ce=>ce.isListeningto(E));if(M)return M;const Q=new D(E);return this.receivers.push(Q),Q}isListeningto(E){return this.eventTarget===E}handleEvent(E){var M=this;return(0,a.Z)(function*(){const Q=E,{eventId:ce,eventType:ct,data:jt}=Q.data,_n=M.handlersMap[ct];if(null==_n||!_n.size)return;Q.ports[0].postMessage({status:"ack",eventId:ce,eventType:ct});const qn=Array.from(_n).map(function(){var _r=(0,a.Z)(function*(fo){return fo(Q.origin,jt)});return function(fo){return _r.apply(this,arguments)}}()),Rr=yield function Ei(D){return Promise.all(D.map(function(){var g=(0,a.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(M){return{fulfilled:!1,reason:M}}});return function(E){return g.apply(this,arguments)}}()))}(qn);Q.ports[0].postMessage({status:"done",eventId:ce,eventType:ct,response:Rr})})()}_subscribe(E,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(M)}_unsubscribe(E,M){this.handlersMap[E]&&M&&this.handlersMap[E].delete(M),(!M||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function yo(D="",g=10){let E="";for(let M=0;M<g;M++)E+=Math.floor(10*Math.random());return D+E}class qa{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,E,M=50){var Q=this;return(0,a.Z)(function*(){const ce="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ce)throw new Error("connection_unavailable");let ct,jt;return new Promise((_n,qn)=>{const Rr=yo("",20);ce.port1.start();const _r=setTimeout(()=>{qn(new Error("unsupported_event"))},M);jt={messageChannel:ce,onMessage(fo){const Ma=fo;if(Ma.data.eventId===Rr)switch(Ma.data.status){case"ack":clearTimeout(_r),ct=setTimeout(()=>{qn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ct),_n(Ma.data.response);break;default:clearTimeout(_r),clearTimeout(ct),qn(new Error("invalid_response"))}}},Q.handlers.add(jt),ce.port1.addEventListener("message",jt.onMessage),Q.target.postMessage({eventType:g,eventId:Rr,data:E},[ce.port2])}).finally(()=>{jt&&Q.removeMessageHandler(jt)})})()}}function ms(){return window}function to(){return void 0!==ms().WorkerGlobalScope&&"function"==typeof ms().importScripts}function _o(){return(_o=(0,a.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const Ri="firebaseLocalStorageDb",fa="firebaseLocalStorage",$n="fbase_key";class ir{constructor(g){this.request=g}toPromise(){return new Promise((g,E)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function sl(D,g){return D.transaction([fa],g?"readwrite":"readonly").objectStore(fa)}function Ft(){const D=indexedDB.open(Ri,1);return new Promise((g,E)=>{D.addEventListener("error",()=>{E(D.error)}),D.addEventListener("upgradeneeded",()=>{const M=D.result;try{M.createObjectStore(fa,{keyPath:$n})}catch(Q){E(Q)}}),D.addEventListener("success",(0,a.Z)(function*(){const M=D.result;M.objectStoreNames.contains(fa)?g(M):(M.close(),yield function An(){const D=indexedDB.deleteDatabase(Ri);return new ir(D).toPromise()}(),g(yield Ft()))}))})}function en(D,g,E){return ys.apply(this,arguments)}function ys(){return(ys=(0,a.Z)(function*(D,g,E){const M=sl(D,!0).put({[$n]:g,value:E});return new ir(M).toPromise()})).apply(this,arguments)}function Ca(){return(Ca=(0,a.Z)(function*(D,g){const E=sl(D,!1).get(g),M=yield new ir(E).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function Da(D,g){const E=sl(D,!0).delete(g);return new ir(E).toPromise()}const Ya=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,a.Z)(function*(){return E.db||(E.db=yield Ft()),E.db})()}_withRetries(E){var M=this;return(0,a.Z)(function*(){let Q=0;for(;;)try{const ce=yield M._openDb();return yield E(ce)}catch(ce){if(Q++>3)throw ce;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,a.Z)(function*(){return to()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,a.Z)(function*(){E.receiver=da._getInstance(function sn(){return to()?self:null}()),E.receiver._subscribe("keyChanged",function(){var M=(0,a.Z)(function*(Q,ce){return{keyProcessed:(yield E._poll()).includes(ce.key)}});return function(Q,ce){return M.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var M=(0,a.Z)(function*(Q,ce){return["keyChanged"]});return function(Q,ce){return M.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,a.Z)(function*(){var M,Q;if(E.activeServiceWorker=yield function oo(){return _o.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new qa(E.activeServiceWorker);const ce=yield E.sender._send("ping",{},800);!ce||(null===(M=ce[0])||void 0===M?void 0:M.fulfilled)&&(null===(Q=ce[0])||void 0===Q?void 0:Q.value.includes("keyChanged"))&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var M=this;return(0,a.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function vl(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:E},M.serviceWorkerReceiverAvailable?800:50)}catch(Q){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const E=yield Ft();return yield en(E,ks,"1"),yield Da(E,ks),!0}catch(E){}return!1})()}_withPendingWrite(E){var M=this;return(0,a.Z)(function*(){M.pendingWrites++;try{yield E()}finally{M.pendingWrites--}})()}_set(E,M){var Q=this;return(0,a.Z)(function*(){return Q._withPendingWrite((0,a.Z)(function*(){return yield Q._withRetries(ce=>en(ce,E,M)),Q.localCache[E]=M,Q.notifyServiceWorker(E)}))})()}_get(E){var M=this;return(0,a.Z)(function*(){const Q=yield M._withRetries(ce=>function ol(D,g){return Ca.apply(this,arguments)}(ce,E));return M.localCache[E]=Q,Q})()}_remove(E){var M=this;return(0,a.Z)(function*(){return M._withPendingWrite((0,a.Z)(function*(){return yield M._withRetries(Q=>Da(Q,E)),delete M.localCache[E],M.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,a.Z)(function*(){const M=yield E._withRetries(ct=>{const jt=sl(ct,!1).getAll();return new ir(jt).toPromise()});if(!M)return[];if(0!==E.pendingWrites)return[];const Q=[],ce=new Set;for(const{fbase_key:ct,value:jt}of M)ce.add(ct),JSON.stringify(E.localCache[ct])!==JSON.stringify(jt)&&(E.notifyListeners(ct,jt),Q.push(ct));for(const ct of Object.keys(E.localCache))E.localCache[ct]&&!ce.has(ct)&&(E.notifyListeners(ct,null),Q.push(ct));return Q})()}notifyListeners(E,M){this.localCache[E]=M;const Q=this.listeners[E];if(Q)for(const ce of Array.from(Q))ce(M)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(M)}_removeListener(E,M){this.listeners[E]&&(this.listeners[E].delete(M),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function pa(D,g){return Nt(D,"POST","/v2/accounts/mfaSignIn:start",Ut(D,g))}function Oo(){return(Oo=(0,a.Z)(function*(D){return(yield Nt(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ko(D){return new Promise((g,E)=>{const M=document.createElement("script");M.setAttribute("src",D),M.onload=g,M.onerror=Q=>{const ce=yt("internal-error");ce.customData=Q,E(ce)},M.type="text/javascript",M.charset="UTF-8",function br(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(M)})}function ka(D){return`__${D}${Math.floor(1e6*Math.random())}`}const Qo=1e12;class Qn{constructor(g){this.auth=g,this.counter=Qo,this._widgets=new Map}render(g,E){const M=this.counter;return this._widgets.set(M,new Pl(g,this.auth.name,E||{})),this.counter++,M}reset(g){var E;const M=g||Qo;null===(E=this._widgets.get(M))||void 0===E||E.delete(),this._widgets.delete(M)}getResponse(g){var E;return(null===(E=this._widgets.get(g||Qo))||void 0===E?void 0:E.getResponse())||""}execute(g){var E=this;return(0,a.Z)(function*(){var M;return null===(M=E._widgets.get(g||Qo))||void 0===M||M.execute(),""})()}}class Pl{constructor(g,E,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Q="string"==typeof g?document.getElementById(g):g;Ee(Q,"argument-error",{appName:E}),this.container=Q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function bs(D){const g=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<D;M++)g.push(E.charAt(Math.floor(Math.random()*E.length)));return g.join("")}(50);const{callback:g,"expired-callback":E}=this.params;if(g)try{g(this.responseToken)}catch(M){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch(M){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cn=ka("rcb"),Nl=new $e(3e4,6e4);class Pa{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=ms().grecaptcha)||void 0===g||!g.render)}load(g,E=""){return Ee(function mu(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(E),g,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(ms().grecaptcha):new Promise((M,Q)=>{const ce=ms().setTimeout(()=>{Q(yt(g,"network-request-failed"))},Nl.get());ms()[Cn]=()=>{ms().clearTimeout(ce),delete ms()[Cn];const jt=ms().grecaptcha;if(!jt)return void Q(yt(g,"internal-error"));const _n=jt.render;jt.render=(qn,Rr)=>{const _r=_n(qn,Rr);return this.counter++,_r},this.hostLanguage=E,M(jt)},ko(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:Cn,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(ce),Q(yt(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var E;return!(null===(E=ms().grecaptcha)||void 0===E||!E.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xo{load(g){return(0,a.Z)(function*(){return new Qn(g)})()}clearedOneInstance(){}}const yu="recaptcha",al={theme:"light",type:"image"};class Ps{constructor(g,E=Object.assign({},al),M){this.parameters=E,this.type=yu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Br(M),this.isInvisible="invisible"===this.parameters.size,Ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const Q="string"==typeof g?document.getElementById(g):g;Ee(Q,this.auth,"argument-error"),this.container=Q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xo:new Pa,this.validateStartingState()}verify(){var g=this;return(0,a.Z)(function*(){g.assertNotDestroyed();const E=yield g.render(),M=g.getAssertedRecaptcha();return M.getResponse(E)||new Promise(ce=>{const ct=jt=>{!jt||(g.tokenChangeListeners.delete(ct),ce(jt))};g.tokenChangeListeners.add(ct),g.isInvisible&&M.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ee(!this.parameters.sitekey,this.auth,"argument-error"),Ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return E=>{if(this.tokenChangeListeners.forEach(M=>M(E)),"function"==typeof g)g(E);else if("string"==typeof g){const M=ms()[g];"function"==typeof M&&M(E)}}}assertNotDestroyed(){Ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,a.Z)(function*(){if(yield g.init(),!g.widgetId){let E=g.container;if(!g.isInvisible){const M=document.createElement("div");E.appendChild(M),E=M}g.widgetId=g.getAssertedRecaptcha().render(E,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,a.Z)(function*(){Ee(Wt()&&!to(),g.auth,"internal-error"),yield function Ka(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const E=yield function ao(D){return Oo.apply(this,arguments)}(g.auth);Ee(E,g.auth,"internal-error"),g.parameters.sitekey=E})()}getAssertedRecaptcha(){return Ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ps{constructor(g,E){this.verificationId=g,this.onConfirmation=E}confirm(g){const E=ls._fromVerification(this.verificationId,g);return this.onConfirmation(E)}}function Fl(){return(Fl=(0,a.Z)(function*(D,g,E){const M=Br(D),Q=yield Po(M,g,(0,z.m9)(E));return new ps(Q,ce=>xr(M,ce))})).apply(this,arguments)}function Ns(){return(Ns=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D);yield Cr(!1,M,"phone");const Q=yield Po(M.auth,g,(0,z.m9)(E));return new ps(Q,ce=>Js(M,ce))})).apply(this,arguments)}function At(){return(At=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D),Q=yield Po(M.auth,g,(0,z.m9)(E));return new ps(Q,ce=>Vo(M,ce))})).apply(this,arguments)}function Po(D,g,E){return vo.apply(this,arguments)}function vo(){return(vo=(0,a.Z)(function*(D,g,E){var M;const Q=yield E.verify();try{let ce;if(Ee("string"==typeof Q,D,"argument-error"),Ee(E.type===yu,D,"argument-error"),ce="string"==typeof g?{phoneNumber:g}:g,"session"in ce){const ct=ce.session;if("phoneNumber"in ce)return Ee("enroll"===ct.type,D,"internal-error"),(yield As(D,{idToken:ct.credential,phoneEnrollmentInfo:{phoneNumber:ce.phoneNumber,recaptchaToken:Q}})).phoneSessionInfo.sessionInfo;{Ee("signin"===ct.type,D,"internal-error");const jt=(null===(M=ce.multiFactorHint)||void 0===M?void 0:M.uid)||ce.multiFactorUid;return Ee(jt,D,"missing-multi-factor-info"),(yield pa(D,{mfaPendingCredential:ct.credential,mfaEnrollmentId:jt,phoneSignInInfo:{recaptchaToken:Q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ct}=yield Vt(D,{phoneNumber:ce.phoneNumber,recaptchaToken:Q});return ct}}finally{E._reset()}})).apply(this,arguments)}function ga(){return(ga=(0,a.Z)(function*(D,g){yield Xs((0,z.m9)(D),g)})).apply(this,arguments)}let Uo=(()=>{class D{constructor(E){this.providerId=D.PROVIDER_ID,this.auth=Br(E)}verifyPhoneNumber(E,M){return Po(this.auth,E,(0,z.m9)(M))}static credential(E,M){return ls._fromVerification(E,M)}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:M,temporaryProof:Q}=E;return M&&Q?ls._fromTokenResponse(M,Q):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function jo(D,g){return g?Ie(g):(Ee(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class Eo extends Hi{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return qr(g,this._buildIdpRequest())}_linkToIdToken(g,E){return qr(g,this._buildIdpRequest(E))}_getReauthenticationResolver(g){return qr(g,this._buildIdpRequest())}_buildIdpRequest(g){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(E.idToken=g),E}}function Vs(D){return Fr(D.auth,new Eo(D),D.bypassAuthState)}function Za(D){const{auth:g,user:E}=D;return Ee(E,g,"internal-error"),hs(E,new Eo(D),D.bypassAuthState)}function Na(D){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,a.Z)(function*(D){const{auth:g,user:E}=D;return Ee(E,g,"internal-error"),Xs(E,new Eo(D),D.bypassAuthState)})).apply(this,arguments)}class qs{constructor(g,E,M,Q,ce=!1){this.auth=g,this.resolver=M,this.user=Q,this.bypassAuthState=ce,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var g=this;return new Promise(function(){var E=(0,a.Z)(function*(M,Q){g.pendingPromise={resolve:M,reject:Q};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(ce){g.reject(ce)}});return function(M,Q){return E.apply(this,arguments)}}())}onAuthEvent(g){var E=this;return(0,a.Z)(function*(){const{urlResponse:M,sessionId:Q,postBody:ce,tenantId:ct,error:jt,type:_n}=g;if(jt)return void E.reject(jt);const qn={auth:E.auth,requestUri:M,sessionId:Q,tenantId:ct||void 0,postBody:ce||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(_n)(qn))}catch(Rr){E.reject(Rr)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Vs;case"linkViaPopup":case"linkViaRedirect":return Na;case"reauthViaPopup":case"reauthViaRedirect":return Za;default:ht(this.auth,"internal-error")}}resolve(g){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _u=new $e(2e3,1e4);function Ll(){return(Ll=(0,a.Z)(function*(D,g,E){const M=Br(D);je(D,g,Si);const Q=jo(M,E);return new A(M,"signInViaPopup",g,Q).executeNotNull()})).apply(this,arguments)}function uo(){return(uo=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D);je(M.auth,g,Si);const Q=jo(M.auth,E);return new A(M.auth,"reauthViaPopup",g,Q,M).executeNotNull()})).apply(this,arguments)}function wi(){return(wi=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D);je(M.auth,g,Si);const Q=jo(M.auth,E);return new A(M.auth,"linkViaPopup",g,Q,M).executeNotNull()})).apply(this,arguments)}let A=(()=>{class D extends qs{constructor(E,M,Q,ce,ct){super(E,M,ce,ct),this.provider=Q,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var E=this;return(0,a.Z)(function*(){const M=yield E.execute();return Ee(M,E.auth,"internal-error"),M})()}onExecution(){var E=this;return(0,a.Z)(function*(){te(1===E.filter.length,"Popup operations only handle one event");const M=yo();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],M),E.authWindow.associatedEvent=M,E.resolver._originValidation(E.auth).catch(Q=>{E.reject(Q)}),E.resolver._isIframeWebStorageSupported(E.auth,Q=>{Q||E.reject(yt(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const E=()=>{var M,Q;this.pollId=null!==(Q=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==Q&&Q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(yt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,_u.get())};E()}}return D.currentPopupAction=null,D})();const C=new Map;class N extends qs{constructor(g,E,M=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,M),this.eventId=null}execute(){var g=()=>super.execute,E=this;return(0,a.Z)(function*(){let M=C.get(E.auth._key());if(!M){try{const ce=(yield function j(D,g){return re.apply(this,arguments)}(E.resolver,E.auth))?yield g().call(E):null;M=()=>Promise.resolve(ce)}catch(Q){M=()=>Promise.reject(Q)}C.set(E.auth._key(),M)}return E.bypassAuthState||C.set(E.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(g){var E=()=>super.onAuthEvent,M=this;return(0,a.Z)(function*(){if("signInViaRedirect"===g.type)return E().call(M,g);if("unknown"!==g.type){if(g.eventId){const Q=yield M.auth._redirectUserForId(g.eventId);if(Q)return M.user=Q,E().call(M,g);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function re(){return(re=(0,a.Z)(function*(D,g){const E=J(g),M=U(D);if(!(yield M._isAvailable()))return!1;const Q="true"===(yield M._get(E));return yield M._remove(E),Q})).apply(this,arguments)}function Ae(D,g){return xe.apply(this,arguments)}function xe(){return(xe=(0,a.Z)(function*(D,g){return U(D)._set(J(g),"true")})).apply(this,arguments)}function P(D,g){C.set(D._key(),g)}function U(D){return Ie(D._redirectPersistence)}function J(D){return He("pendingRedirect",D.config.apiKey,D.name)}function wt(){return(wt=(0,a.Z)(function*(D,g,E){const M=Br(D);je(D,g,Si);const Q=jo(M,E);return yield Ae(Q,M),Q._openRedirect(M,g,"signInViaRedirect")})).apply(this,arguments)}function Ln(){return(Ln=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D);je(M.auth,g,Si);const Q=jo(M.auth,E);yield Ae(Q,M.auth);const ce=yield ea(M);return Q._openRedirect(M.auth,g,"reauthViaRedirect",ce)})).apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(D,g,E){const M=(0,z.m9)(D);je(M.auth,g,Si);const Q=jo(M.auth,E);yield Cr(!1,M,g.providerId),yield Ae(Q,M.auth);const ce=yield ea(M);return Q._openRedirect(M.auth,g,"linkViaRedirect",ce)})).apply(this,arguments)}function _s(){return(_s=(0,a.Z)(function*(D,g){return yield Br(D)._initializationPromise,Jo(D,g,!1)})).apply(this,arguments)}function Jo(D,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,a.Z)(function*(D,g,E=!1){const M=Br(D),Q=jo(M,g),ct=yield new N(M,Q,E).execute();return ct&&!E&&(delete ct.user._redirectEventId,yield M._persistUserIfCurrent(ct.user),yield M._setRedirectUser(null,g)),ct})).apply(this,arguments)}function ea(D){return No.apply(this,arguments)}function No(){return(No=(0,a.Z)(function*(D){const g=yo(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class ta{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let E=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(g,M)&&(E=!0,this.sendToConsumer(g,M),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function La(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ma(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=g,E=!0)),E}sendToConsumer(g,E){var M;if(g.error&&!ma(g)){const Q=(null===(M=g.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";E.onError(yt(this.auth,Q))}else E.onAuthEvent(g)}isEventForConsumer(g,E){const M=null===E.eventId||!!g.eventId&&g.eventId===E.eventId;return E.filter.includes(g.type)&&M}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xa(g))}saveEventToCache(g){this.cachedEventUids.add(Xa(g)),this.lastProcessedEventTime=Date.now()}}function Xa(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function ma({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===(null==g?void 0:g.code)}function ul(D){return bc.apply(this,arguments)}function bc(){return(bc=(0,a.Z)(function*(D,g={}){return Nt(D,"GET","/v1/projects",g)})).apply(this,arguments)}const wd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wc=/^https?/;function Ic(){return(Ic=(0,a.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield ul(D);for(const E of g)try{if(Fo(E))return}catch(M){}ht(D,"unauthorized-domain")})).apply(this,arguments)}function Fo(D){const g=Ot(),{protocol:E,hostname:M}=new URL(g);if(D.startsWith("chrome-extension://")){const ct=new URL(D);return""===ct.hostname&&""===M?"chrome-extension:"===E&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===E&&ct.hostname===M}if(!wc.test(E))return!1;if(wd.test(D))return M===D;const Q=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Q+"|"+Q+")$","i").test(M)}const Cd=new $e(3e4,6e4);function is(){const D=ms().___jsl;if(null!=D&&D.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let E=0;E<D.CP.length;E++)D.CP[E]=null}let Bl=null;function bl(D){return Bl=Bl||function vu(D){return new Promise((g,E)=>{var M,Q,ce;function ct(){is(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{is(),E(yt(D,"network-request-failed"))},timeout:Cd.get()})}if(null!==(Q=null===(M=ms().gapi)||void 0===M?void 0:M.iframes)&&void 0!==Q&&Q.Iframe)g(gapi.iframes.getContext());else{if(null===(ce=ms().gapi)||void 0===ce||!ce.load){const jt=ka("iframefcb");return ms()[jt]=()=>{gapi.load?ct():E(yt(D,"network-request-failed"))},ko(`https://apis.google.com/js/api.js?onload=${jt}`).catch(_n=>E(_n))}ct()}}).catch(g=>{throw Bl=null,g})}(D),Bl}const ju=new $e(5e3,15e3),Cc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hu(D){const g=D.config;Ee(g.authDomain,D,"auth-domain-config-required");const E=g.emulator?Xe(g,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,M={apiKey:g.apiKey,appName:D.name,v:Le.SDK_VERSION},Q=Dc.get(D.config.apiHost);Q&&(M.eid=Q);const ce=D._getFrameworks();return ce.length&&(M.fw=ce.join(",")),`${E}?${(0,z.xO)(M).slice(1)}`}function Eu(){return Eu=(0,a.Z)(function*(D){const g=yield bl(D),E=ms().gapi;return Ee(E,D,"internal-error"),g.open({where:document.body,url:Hu(D),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cc,dontclear:!0},M=>new Promise(function(){var Q=(0,a.Z)(function*(ce,ct){yield M.restyle({setHideOnLeave:!1});const jt=yt(D,"network-request-failed"),_n=ms().setTimeout(()=>{ct(jt)},ju.get());function qn(){ms().clearTimeout(_n),ce(M)}M.ping(qn).then(qn,()=>{ct(jt)})});return function(ce,ct){return Q.apply(this,arguments)}}()))}),Eu.apply(this,arguments)}const tu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nu{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function ya(D,g,E,M,Q,ce){Ee(D.config.authDomain,D,"auth-domain-config-required"),Ee(D.config.apiKey,D,"invalid-api-key");const ct={apiKey:D.config.apiKey,appName:D.name,authType:E,redirectUrl:M,v:Le.SDK_VERSION,eventId:Q};if(g instanceof Si){g.setDefaultLanguage(D.languageCode),ct.providerId=g.providerId||"",(0,z.xb)(g.getCustomParameters())||(ct.customParameters=JSON.stringify(g.getCustomParameters()));for(const[_n,qn]of Object.entries(ce||{}))ct[_n]=qn}if(g instanceof Bi){const _n=g.getScopes().filter(qn=>""!==qn);_n.length>0&&(ct.scopes=_n.join(","))}D.tenantId&&(ct.tid=D.tenantId);const jt=ct;for(const _n of Object.keys(jt))void 0===jt[_n]&&delete jt[_n];return`${function Iu({config:D}){return D.emulator?Xe(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,z.xO)(jt).slice(1)}`}const Ja="webStorageSupport";class Ho extends class Cu{constructor(g){this.factorId=g}_process(g,E,M){switch(E.type){case"enroll":return this._finalizeEnroll(g,E.credential,M);case"signin":return this._finalizeSignIn(g,E.credential);default:return Z("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ho(g)}_finalizeEnroll(g,E,M){return function Ra(D,g){return Nt(D,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(D,g))}(g,{idToken:E,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,E){return function kl(D,g){return Nt(D,"POST","/v2/accounts/mfaSignIn:finalize",Ut(D,g))}(g,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let iu=(()=>{class D{constructor(){}static assertion(E){return Ho._fromCredential(E)}}return D.FACTOR_ID="phone",D})();var na="@firebase/auth",su="0.20.10";class _a{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var E=this;return(0,a.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const E=this.auth.onIdTokenChanged(M=>{var Q;g((null===(Q=M)||void 0===Q?void 0:Q.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,E),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const E=this.internalListeners.get(g);!E||(this.internalListeners.delete(g),E(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ou(){return window}function Ba(){return(Ba=(0,a.Z)(function*(D,g,E){var M;const{BuildInfo:Q}=ou();te(g.sessionId,"AuthEvent did not contain a session ID");const ce=yield Au(g.sessionId),ct={};return Me()?ct.ibi=Q.packageName:Sr()?ct.apn=Q.packageName:ht(D,"operation-not-supported-in-this-environment"),Q.displayName&&(ct.appDisplayName=Q.displayName),ct.sessionId=ce,ya(D,E,g.type,void 0,null!==(M=g.eventId)&&void 0!==M?M:void 0,ct)})).apply(this,arguments)}function zu(){return(zu=(0,a.Z)(function*(D){const{BuildInfo:g}=ou(),E={};Me()?E.iosBundleId=g.packageName:Sr()?E.androidPackageName=g.packageName:ht(D,"operation-not-supported-in-this-environment"),yield ul(D,E)})).apply(this,arguments)}function hl(){return(hl=(0,a.Z)(function*(D,g,E){const{cordova:M}=ou();let Q=()=>{};try{yield new Promise((ce,ct)=>{let jt=null;function _n(){var _r;ce();const fo=null===(_r=M.plugins.browsertab)||void 0===_r?void 0:_r.close;"function"==typeof fo&&fo(),"function"==typeof(null==E?void 0:E.close)&&E.close()}function qn(){jt||(jt=window.setTimeout(()=>{ct(yt(D,"redirect-cancelled-by-user"))},2e3))}function Rr(){"visible"===(null==document?void 0:document.visibilityState)&&qn()}g.addPassiveListener(_n),document.addEventListener("resume",qn,!1),Sr()&&document.addEventListener("visibilitychange",Rr,!1),Q=()=>{g.removePassiveListener(_n),document.removeEventListener("resume",qn,!1),document.removeEventListener("visibilitychange",Rr,!1),jt&&window.clearTimeout(jt)}})}finally{Q()}})).apply(this,arguments)}function Au(D){return tl.apply(this,arguments)}function tl(){return(tl=(0,a.Z)(function*(D){const g=yh(D),E=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(E)).map(Q=>Q.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yh(D){if(te(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(D);const g=new ArrayBuffer(D.length),E=new Uint8Array(g);for(let M=0;M<D.length;M++)E[M]=D.charCodeAt(M);return E}(0,z.Pz)("authIdTokenMaxAge"),function Gu(D){(0,Le._registerComponent)(new ve.wA("auth",(g,{options:E})=>{const M=g.getProvider("app").getImmediate(),Q=g.getProvider("heartbeat"),{apiKey:ce,authDomain:ct}=M.options;return((jt,_n)=>{Ee(ce&&!ce.includes(":"),"invalid-api-key",{appName:jt.name}),Ee(!(null!=ct&&ct.includes(":")),"argument-error",{appName:jt.name});const qn={apiKey:ce,authDomain:ct,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sn(D)},Rr=new kr(jt,_n,qn);return function Je(D,g){const E=(null==g?void 0:g.persistence)||[],M=(Array.isArray(E)?E:[E]).map(Ie);null!=g&&g.errorMap&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(M,null==g?void 0:g.popupRedirectResolver)}(Rr,E),Rr})(M,Q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,E,M)=>{g.getProvider("auth-internal").initialize()})),(0,Le._registerComponent)(new ve.wA("auth-internal",g=>{const E=Br(g.getProvider("auth").getImmediate());return new _a(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Le.registerVersion)(na,su,function Du(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,Le.registerVersion)(na,su,"esm2017")}("Browser");class Ac extends ta{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(g)),super.onEvent(g)}initialized(){var g=this;return(0,a.Z)(function*(){yield g.initPromise})()}}function Ad(D){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,a.Z)(function*(D){const g=yield nl()._get(Sa(D));return g&&(yield nl()._remove(Sa(D))),g})).apply(this,arguments)}function au(){const D=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<20;E++){const M=Math.floor(Math.random()*g.length);D.push(g.charAt(M))}return D.join("")}function nl(){return Ie($o)}function Sa(D){return He("authEvent",D.config.apiKey,D.name)}function lu(D){if(null==D||!D.includes("?"))return{};const[g,...E]=D.split("?");return(0,z.zd)(E.join("?"))}function xc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yt("no-auth-event")}}function xu(){var D;return(null===(D=null==self?void 0:self.location)||void 0===D?void 0:D.protocol)||null}function gi(D=(0,z.z$)()){return!("file:"!==xu()&&"ionic:"!==xu()&&"capacitor:"!==xu()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lo(){try{const D=self.localStorage,g=yo();if(D)return D.setItem(g,"1"),D.removeItem(g),!function ed(D=(0,z.z$)()){return function Jc(){return(0,z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function pl(D=(0,z.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,z.hl)()}catch(D){return Ru()&&(0,z.hl)()}return!1}function Ru(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ys(){return(function ho(){return"http:"===xu()||"https:"===xu()}()||(0,z.ru)()||gi())&&!function Mu(){return(0,z.b$)()||(0,z.UG)()}()&&Lo()&&!Ru()}function $l(){return gi()&&"undefined"!=typeof document}function uu(){return(uu=(0,a.Z)(function*(){return!!$l()&&new Promise(D=>{const g=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),D(!0)})})})).apply(this,arguments)}const no={LOCAL:"local",NONE:"none",SESSION:"session"},cu=Ee,Ur="persistence";function hu(D){return gl.apply(this,arguments)}function gl(){return(gl=(0,a.Z)(function*(D){yield D._initializationPromise;const g=Cl(),E=He(Ur,D.config.apiKey,D.name);g&&g.setItem(E,D._getPersistence())})).apply(this,arguments)}function Cl(){var D;try{return(null===(D=function wo(){return"undefined"!=typeof window?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch(g){return null}}const Xu=Ee;class ra{constructor(){this.browserResolver=Ie(class Yc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ca,this._completeRedirectFn=Jo,this._overrideRedirectResult=P}_openPopup(g,E,M,Q){var ce=this;return(0,a.Z)(function*(){var ct;te(null===(ct=ce.eventManagers[g._key()])||void 0===ct?void 0:ct.manager,"_initialize() not called before _openPopup()");const jt=ya(g,E,M,Ot(),Q);return function bu(D,g,E,M=500,Q=600){const ce=Math.max((window.screen.availHeight-Q)/2,0).toString(),ct=Math.max((window.screen.availWidth-M)/2,0).toString();let jt="";const _n=Object.assign(Object.assign({},tu),{width:M.toString(),height:Q.toString(),top:ce,left:ct}),qn=(0,z.z$)().toLowerCase();E&&(jt=dr(qn)?"_blank":E),hn(qn)&&(g=g||"http://localhost",_n.scrollbars="yes");const Rr=Object.entries(_n).reduce((fo,[Ma,jl])=>`${fo}${Ma}=${jl},`,"");if(function Mt(D=(0,z.z$)()){var g;return Me(D)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(qn)&&"_self"!==jt)return function dl(D,g){const E=document.createElement("a");E.href=D,E.target=g;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(M)}(g||"",jt),new nu(null);const _r=window.open(g||"",jt,Rr);Ee(_r,D,"popup-blocked");try{_r.focus()}catch(fo){}return new nu(_r)}(g,jt,yo())})()}_openRedirect(g,E,M,Q){var ce=this;return(0,a.Z)(function*(){return yield ce._originValidation(g),function bi(D){ms().location.href=D}(ya(g,E,M,Ot(),Q)),new Promise(()=>{})})()}_initialize(g){const E=g._key();if(this.eventManagers[E]){const{manager:Q,promise:ce}=this.eventManagers[E];return Q?Promise.resolve(Q):(te(ce,"If manager is not set, promise should be"),ce)}const M=this.initAndGetManager(g);return this.eventManagers[E]={promise:M},M.catch(()=>{delete this.eventManagers[E]}),M}initAndGetManager(g){var E=this;return(0,a.Z)(function*(){const M=yield function co(D){return Eu.apply(this,arguments)}(g),Q=new ta(g);return M.register("authEvent",ce=>(Ee(null==ce?void 0:ce.authEvent,g,"invalid-auth-event"),{status:Q.onEvent(ce.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[g._key()]={manager:Q},E.iframes[g._key()]=M,Q})()}_isIframeWebStorageSupported(g,E){this.iframes[g._key()].send(Ja,{type:Ja},Q=>{var ce;const ct=null===(ce=null==Q?void 0:Q[0])||void 0===ce?void 0:ce[Ja];void 0!==ct&&E(!!ct),ht(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const E=g._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Id(D){return Ic.apply(this,arguments)}(g)),this.originValidationPromises[E]}get _shouldInitProactively(){return Vn()||dn()||Me()}}),this.cordovaResolver=Ie(class Aa{constructor(){this._redirectPersistence=ca,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jo,this._overrideRedirectResult=P}_initialize(g){var E=this;return(0,a.Z)(function*(){const M=g._key();let Q=E.eventManagers.get(M);return Q||(Q=new Ac(g),E.eventManagers.set(M,Q),E.attachCallbackListeners(g,Q)),Q})()}_openPopup(g){ht(g,"operation-not-supported-in-this-environment")}_openRedirect(g,E,M,Q){var ce=this;return(0,a.Z)(function*(){!function Su(D){var g,E,M,Q,ce,ct,jt,_n,qn,Rr;const _r=ou();Ee("function"==typeof(null===(g=null==_r?void 0:_r.universalLinks)||void 0===g?void 0:g.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ee(void 0!==(null===(E=null==_r?void 0:_r.BuildInfo)||void 0===E?void 0:E.packageName),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ee("function"==typeof(null===(ce=null===(Q=null===(M=null==_r?void 0:_r.cordova)||void 0===M?void 0:M.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===ce?void 0:ce.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee("function"==typeof(null===(_n=null===(jt=null===(ct=null==_r?void 0:_r.cordova)||void 0===ct?void 0:ct.plugins)||void 0===jt?void 0:jt.browsertab)||void 0===_n?void 0:_n.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee("function"==typeof(null===(Rr=null===(qn=null==_r?void 0:_r.cordova)||void 0===qn?void 0:qn.InAppBrowser)||void 0===Rr?void 0:Rr.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ct=yield ce._initialize(g);yield ct.initialized(),ct.resetRedirect(),function Ct(){C.clear()}(),yield ce._originValidation(g);const jt=function Sd(D,g,E=null){return{type:g,eventId:E,urlResponse:null,sessionId:au(),postBody:null,tenantId:D.tenantId,error:yt(D,"no-auth-event")}}(g,M,Q);yield function Yu(D,g){return nl()._set(Sa(D),g)}(g,jt);const _n=yield function el(D,g,E){return Ba.apply(this,arguments)}(g,jt,E),qn=yield function Td(D){const{cordova:g}=ou();return new Promise(E=>{g.plugins.browsertab.isAvailable(M=>{let Q=null;M?g.plugins.browsertab.openUrl(D):Q=g.InAppBrowser.open(D,function Et(D=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),E(Q)})})}(_n);return function Zc(D,g,E){return hl.apply(this,arguments)}(g,ct,qn)})()}_isIframeWebStorageSupported(g,E){throw new Error("Method not implemented.")}_originValidation(g){const E=g._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Tu(D){return zu.apply(this,arguments)}(g)),this.originValidationPromises[E]}attachCallbackListeners(g,E){const{universalLinks:M,handleOpenURL:Q,BuildInfo:ce}=ou(),ct=setTimeout((0,a.Z)(function*(){yield Ad(g),E.onEvent(xc())}),500),jt=function(){var Rr=(0,a.Z)(function*(_r){clearTimeout(ct);const fo=yield Ad(g);let Ma=null;fo&&(null==_r?void 0:_r.url)&&(Ma=function vs(D,g){var E,M;const Q=function Es(D){const g=lu(D),E=g.link?decodeURIComponent(g.link):void 0,M=lu(E).link,Q=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return lu(Q).link||Q||M||E||D}(g);if(Q.includes("/__/auth/callback")){const ce=lu(Q),ct=ce.firebaseError?function _h(D){try{return JSON.parse(D)}catch(g){return null}}(decodeURIComponent(ce.firebaseError)):null,jt=null===(M=null===(E=null==ct?void 0:ct.code)||void 0===E?void 0:E.split("auth/"))||void 0===M?void 0:M[1],_n=jt?yt(jt):null;return _n?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:_n,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:Q,postBody:null}}return null}(fo,_r.url)),E.onEvent(Ma||xc())});return function(fo){return Rr.apply(this,arguments)}}();void 0!==M&&"function"==typeof M.subscribe&&M.subscribe(null,jt);const _n=Q,qn=`${ce.packageName.toLowerCase()}://`;ou().handleOpenURL=function(){var Rr=(0,a.Z)(function*(_r){if(_r.toLowerCase().startsWith(qn)&&jt({url:_r}),"function"==typeof _n)try{_n(_r)}catch(fo){console.error(fo)}});return function(_r){return Rr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ca,this._completeRedirectFn=Jo,this._overrideRedirectResult=P}_initialize(g){var E=this;return(0,a.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,E,M,Q){var ce=this;return(0,a.Z)(function*(){return yield ce.selectUnderlyingResolver(),ce.assertedUnderlyingResolver._openPopup(g,E,M,Q)})()}_openRedirect(g,E,M,Q){var ce=this;return(0,a.Z)(function*(){return yield ce.selectUnderlyingResolver(),ce.assertedUnderlyingResolver._openRedirect(g,E,M,Q)})()}_isIframeWebStorageSupported(g,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,E)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return $l()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,a.Z)(function*(){if(g.underlyingResolver)return;const E=yield function Go(){return uu.apply(this,arguments)}();g.underlyingResolver=E?g.cordovaResolver:g.browserResolver})()}}function Mc(D){return D.unwrap()}function Ou(D){return fu(D)}function fu(D){const{_tokenResponse:g}=D instanceof z.ZR?D.customData:D;if(!g)return null;if(!(D instanceof z.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Uo.credentialFromResult(D);const E=g.providerId;if(!E||"password"===E)return null;let M;switch(E){case"google.com":M=Gs;break;case"facebook.com":M=Qs;break;case"github.com":M=Xi;break;case"twitter.com":M=gs;break;default:const{oauthIdToken:Q,oauthAccessToken:ce,oauthTokenSecret:ct,pendingToken:jt,nonce:_n}=g;return ce||ct||Q||jt?jt?E.startsWith("saml.")?Wi._create(E,jt):vt._fromParams({providerId:E,signInMethod:E,pendingToken:jt,idToken:Q,accessToken:ce}):new Cs(E).credential({idToken:Q,accessToken:ce,rawNonce:_n}):null}return D instanceof z.ZR?M.credentialFromError(D):M.credentialFromResult(D)}function Ks(D,g){return g.catch(E=>{throw E instanceof z.ZR&&function Ju(D,g){var E,M;const Q=null===(E=g.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===(null===(M=g)||void 0===M?void 0:M.code))g.resolver=new nd(D,function Ni(D,g){var E;const M=(0,z.m9)(D),Q=g;return Ee(g.customData.operationType,M,"argument-error"),Ee(null===(E=Q.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,M,"argument-error"),Yo._fromError(M,Q)}(D,g));else if(Q){const ce=fu(g),ct=g;ce&&(ct.credential=ce,ct.tenantId=Q.tenantId||void 0,ct.email=Q.email||void 0,ct.phoneNumber=Q.phoneNumber||void 0)}}(D,E),E}).then(E=>{const Q=E.user;return{operationType:E.operationType,credential:Ou(E),additionalUserInfo:Zr(E),user:ml.getOrCreate(Q)}})}function Rc(D,g){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,a.Z)(function*(D,g){const E=yield g;return{verificationId:E.verificationId,confirm:M=>Ks(D,E.confirm(M))}})).apply(this,arguments)}class nd{constructor(g,E){this.resolver=E,this.auth=function td(D){return D.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Ks(Mc(this.auth),this.resolver.resolveSignIn(g))}}class ml{constructor(g){this._delegate=g,this.multiFactor=function Ko(D){const g=(0,z.m9)(D);return _l.has(g)||_l.set(g,Ql._fromUser(g)),_l.get(g)}(g)}static getOrCreate(g){return ml.USER_MAP.has(g)||ml.USER_MAP.set(g,new ml(g)),ml.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var E=this;return(0,a.Z)(function*(){return Ks(E.auth,Js(E._delegate,g))})()}linkWithPhoneNumber(g,E){var M=this;return(0,a.Z)(function*(){return Rc(M.auth,function lo(D,g,E){return Ns.apply(this,arguments)}(M._delegate,g,E))})()}linkWithPopup(g){var E=this;return(0,a.Z)(function*(){return Ks(E.auth,function $s(D,g,E){return wi.apply(this,arguments)}(E._delegate,g,ra))})()}linkWithRedirect(g){var E=this;return(0,a.Z)(function*(){return yield hu(Br(E.auth)),function fr(D,g,E){return function $r(D,g,E){return Dn.apply(this,arguments)}(D,g,E)}(E._delegate,g,ra)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var E=this;return(0,a.Z)(function*(){return Ks(E.auth,Vo(E._delegate,g))})()}reauthenticateWithPhoneNumber(g,E){return Rc(this.auth,function ll(D,g,E){return At.apply(this,arguments)}(this._delegate,g,E))}reauthenticateWithPopup(g){return Ks(this.auth,function Oi(D,g,E){return uo.apply(this,arguments)}(this._delegate,g,ra))}reauthenticateWithRedirect(g){var E=this;return(0,a.Z)(function*(){return yield hu(Br(E.auth)),function Yt(D,g,E){return function gn(D,g,E){return Ln.apply(this,arguments)}(D,g,E)}(E._delegate,g,ra)})()}sendEmailVerification(g){return function ei(D,g){return lr.apply(this,arguments)}(this._delegate,g)}unlink(g){var E=this;return(0,a.Z)(function*(){return yield function Pi(D,g){return Vi.apply(this,arguments)}(E._delegate,g),E})()}updateEmail(g){return function L(D,g){return $((0,z.m9)(D),g,null)}(this._delegate,g)}updatePassword(g){return function X(D,g){return $((0,z.m9)(D),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Jl(D,g){return ga.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Ai(D,g){return io.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,E){return function Di(D,g,E){return $i.apply(this,arguments)}(this._delegate,g,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ml.USER_MAP=new WeakMap;const ws=Ee;let va=(()=>{class D{constructor(E,M){if(this.app=E,M.isInitialized())return this._delegate=M.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Q}=E.options;ws(Q,"invalid-api-key",{appName:E.name}),ws(Q,"invalid-api-key",{appName:E.name});const ce="undefined"!=typeof window?ra:void 0;this._delegate=M.initialize({options:{persistence:tc(Q,E.name),popupRedirectResolver:ce}}),this._delegate._updateErrorMap(Qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ml.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,M){!function mi(D,g,E){const M=Br(D);Ee(M._canInitEmulator,M,"emulator-config-failed"),Ee(/^https?:\/\//.test(g),M,"invalid-emulator-scheme");const Q=!(null==E||!E.disableWarnings),ce=Fn(g),{host:ct,port:jt}=function Vr(D){const g=Fn(D),E=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!E)return{host:"",port:null};const M=E[2].split("@").pop()||"",Q=/^(\[[^\]]+\])(:|$)/.exec(M);if(Q){const ce=Q[1];return{host:ce,port:li(M.substr(ce.length+1))}}{const[ce,ct]=M.split(":");return{host:ce,port:li(ct)}}}(g);M.config.emulator={url:`${ce}//${ct}${null===jt?"":`:${jt}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:ct,port:jt,protocol:ce.replace(":",""),options:Object.freeze({disableWarnings:Q})}),Q||function Xn(){function D(){const g=document.createElement("p"),E=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,E,M)}applyActionCode(E){return function ns(D,g){return eo.apply(this,arguments)}(this._delegate,E)}checkActionCode(E){return G(this._delegate,E)}confirmPasswordReset(E,M){return function hr(D,g,E){return ts.apply(this,arguments)}(this._delegate,E,M)}createUserWithEmailAndPassword(E,M){var Q=this;return(0,a.Z)(function*(){return Ks(Q._delegate,function I(D,g,E){return y.apply(this,arguments)}(Q._delegate,E,M))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return function Zn(D,g){return Mr.apply(this,arguments)}(this._delegate,E)}isSignInWithEmailLink(E){return function It(D,g){const E=vi.parseLink(g);return"EMAIL_SIGNIN"===(null==E?void 0:E.operation)}(0,E)}getRedirectResult(){var E=this;return(0,a.Z)(function*(){ws(Ys(),E._delegate,"operation-not-supported-in-this-environment");const M=yield function Yi(D,g){return _s.apply(this,arguments)}(E._delegate,ra);return M?Ks(E._delegate,Promise.resolve(M)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function Qc(D,g){Br(D)._logFramework(g)}(this._delegate,E)}onAuthStateChanged(E,M,Q){const{next:ce,error:ct,complete:jt}=ec(E,M,Q);return this._delegate.onAuthStateChanged(ce,ct,jt)}onIdTokenChanged(E,M,Q){const{next:ce,error:ct,complete:jt}=ec(E,M,Q);return this._delegate.onIdTokenChanged(ce,ct,jt)}sendSignInLinkToEmail(E,M){return function Y(D,g,E){return ke.apply(this,arguments)}(this._delegate,E,M)}sendPasswordResetEmail(E,M){return function fs(D,g,E){return Ci.apply(this,arguments)}(this._delegate,E,M||void 0)}setPersistence(E){var M=this;return(0,a.Z)(function*(){let Q;switch(function du(D,g){cu(Object.values(no).includes(g),D,"invalid-persistence-type"),(0,z.b$)()?cu(g!==no.SESSION,D,"unsupported-persistence-type"):(0,z.UG)()?cu(g===no.NONE,D,"unsupported-persistence-type"):Ru()?cu(g===no.NONE||g===no.LOCAL&&(0,z.hl)(),D,"unsupported-persistence-type"):cu(g===no.NONE||Lo(),D,"unsupported-persistence-type")}(M._delegate,E),E){case no.SESSION:Q=ca;break;case no.LOCAL:Q=(yield Ie(Ya)._isAvailable())?Ya:$o;break;case no.NONE:Q=Pe;break;default:return ht("argument-error",{appName:M._delegate.name})}return M._delegate.setPersistence(Q)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return Ks(this._delegate,function ar(D){return Kr.apply(this,arguments)}(this._delegate))}signInWithCredential(E){return Ks(this._delegate,xr(this._delegate,E))}signInWithCustomToken(E){return Ks(this._delegate,function xo(D,g){return Ss.apply(this,arguments)}(this._delegate,E))}signInWithEmailAndPassword(E,M){return Ks(this._delegate,function R(D,g,E){return xr((0,z.m9)(D),Qi.credential(g,E))}(this._delegate,E,M))}signInWithEmailLink(E,M){return Ks(this._delegate,function Pt(D,g,E){return rn.apply(this,arguments)}(this._delegate,E,M))}signInWithPhoneNumber(E,M){return Rc(this._delegate,function El(D,g,E){return Fl.apply(this,arguments)}(this._delegate,E,M))}signInWithPopup(E){var M=this;return(0,a.Z)(function*(){return ws(Ys(),M._delegate,"operation-not-supported-in-this-environment"),Ks(M._delegate,function Qa(D,g,E){return Ll.apply(this,arguments)}(M._delegate,E,ra))})()}signInWithRedirect(E){var M=this;return(0,a.Z)(function*(){return ws(Ys(),M._delegate,"operation-not-supported-in-this-environment"),yield hu(M._delegate),function _e(D,g,E){return function Ke(D,g,E){return wt.apply(this,arguments)}(D,g,E)}(M._delegate,E,ra)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return function b(D,g){return d.apply(this,arguments)}(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=no,D})();function ec(D,g,E){let M=D;"function"!=typeof D&&({next:M,error:g,complete:E}=D);const Q=M;return{next:ct=>Q(ct&&ml.getOrCreate(ct)),error:g,complete:E}}function tc(D,g){const E=function Qu(D,g){const E=Cl();if(!E)return[];const M=He(Ur,D,g);switch(E.getItem(M)){case no.NONE:return[Pe];case no.LOCAL:return[Ya,ca];case no.SESSION:return[ca];default:return[]}}(D,g);if("undefined"!=typeof self&&!E.includes(Ya)&&E.push(Ya),"undefined"!=typeof window)for(const M of[$o,ca])E.includes(M)||E.push(M);return E.includes(Pe)||E.push(Pe),E}class xa{constructor(){this.providerId="phone",this._delegate=new Uo(Mc(se.Z.auth()))}static credential(g,E){return Uo.credential(g,E)}verifyPhoneNumber(g,E){return this._delegate.verifyPhoneNumber(g,E)}unwrap(){return this._delegate}}xa.PHONE_SIGN_IN_METHOD=Uo.PHONE_SIGN_IN_METHOD,xa.PROVIDER_ID=Uo.PROVIDER_ID;const Md=Ee;class rd{constructor(g,E,M=se.Z.app()){var Q;Md(null===(Q=M.options)||void 0===Q?void 0:Q.apiKey,"invalid-api-key",{appName:M.name}),this._delegate=new Ps(g,E,M.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Rd(D){D.INTERNAL.registerComponent(new ve.wA("auth-compat",g=>{const E=g.getProvider("app-compat").getImmediate(),M=g.getProvider("auth");return new va(E,M)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qi,FacebookAuthProvider:Qs,GithubAuthProvider:Xi,GoogleAuthProvider:Gs,OAuthProvider:Cs,SAMLAuthProvider:cs,PhoneAuthProvider:xa,PhoneMultiFactorGenerator:iu,RecaptchaVerifier:rd,TwitterAuthProvider:gs,Auth:va,AuthCredential:Hi,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.2.23")}(se.Z)},591:(on,ut,H)=>{"use strict";H.d(ut,{X:()=>z});var a=H(8929),se=H(5279);class z extends a.xQ{constructor(Ne){super(),this._value=Ne}get value(){return this.getValue()}_subscribe(Ne){const fe=super._subscribe(Ne);return fe&&!fe.closed&&Ne.next(this._value),fe}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new se.N;return this._value}next(Ne){super.next(this._value=Ne)}}},6498:(on,ut,H)=>{"use strict";H.d(ut,{y:()=>be});var a=H(3489),z=H(7668),Le=H(3292),fe=H(3821),ve=H(4843),ge=H(2830);let be=(()=>{class de{constructor(pe){this._isScalar=!1,pe&&(this._subscribe=pe)}lift(pe){const Ue=new de;return Ue.source=this,Ue.operator=pe,Ue}subscribe(pe,Ue,Qe){const{operator:nt}=this,Oe=function Ne(de,oe,pe){if(de){if(de instanceof a.L)return de;if(de[z.b])return de[z.b]()}return de||oe||pe?new a.L(de,oe,pe):new a.L(Le.c)}(pe,Ue,Qe);if(Oe.add(nt?nt.call(Oe,this.source):this.source||ge.v.useDeprecatedSynchronousErrorHandling&&!Oe.syncErrorThrowable?this._subscribe(Oe):this._trySubscribe(Oe)),ge.v.useDeprecatedSynchronousErrorHandling&&Oe.syncErrorThrowable&&(Oe.syncErrorThrowable=!1,Oe.syncErrorThrown))throw Oe.syncErrorValue;return Oe}_trySubscribe(pe){try{return this._subscribe(pe)}catch(Ue){ge.v.useDeprecatedSynchronousErrorHandling&&(pe.syncErrorThrown=!0,pe.syncErrorValue=Ue),function se(de){for(;de;){const{closed:oe,destination:pe,isStopped:Ue}=de;if(oe||Ue)return!1;de=pe&&pe instanceof a.L?pe:null}return!0}(pe)?pe.error(Ue):console.warn(Ue)}}forEach(pe,Ue){return new(Ue=ue(Ue))((Qe,nt)=>{let Oe;Oe=this.subscribe(we=>{try{pe(we)}catch(dt){nt(dt),Oe&&Oe.unsubscribe()}},nt,Qe)})}_subscribe(pe){const{source:Ue}=this;return Ue&&Ue.subscribe(pe)}[fe.L](){return this}pipe(...pe){return 0===pe.length?this:(0,ve.U)(pe)(this)}toPromise(pe){return new(pe=ue(pe))((Ue,Qe)=>{let nt;this.subscribe(Oe=>nt=Oe,Oe=>Qe(Oe),()=>Ue(nt))})}}return de.create=oe=>new de(oe),de})();function ue(de){if(de||(de=ge.v.Promise||Promise),!de)throw new Error("no Promise impl found");return de}},3292:(on,ut,H)=>{"use strict";H.d(ut,{c:()=>z});var a=H(2830),se=H(2782);const z={closed:!0,next(Le){},error(Le){if(a.v.useDeprecatedSynchronousErrorHandling)throw Le;(0,se.z)(Le)},complete(){}}},826:(on,ut,H)=>{"use strict";H.d(ut,{L:()=>se});var a=H(3489);class se extends a.L{notifyNext(Le,Ne,fe,ve,ge){this.destination.next(Ne)}notifyError(Le,Ne){this.destination.error(Le)}notifyComplete(Le){this.destination.complete()}}},8929:(on,ut,H)=>{"use strict";H.d(ut,{Yc:()=>ve,xQ:()=>ge});var a=H(6498),se=H(3489),z=H(2654),Le=H(5279),Ne=H(5283),fe=H(7668);class ve extends se.L{constructor(de){super(de),this.destination=de}}let ge=(()=>{class ue extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[fe.b](){return new ve(this)}lift(oe){const pe=new be(this,this);return pe.operator=oe,pe}next(oe){if(this.closed)throw new Le.N;if(!this.isStopped){const{observers:pe}=this,Ue=pe.length,Qe=pe.slice();for(let nt=0;nt<Ue;nt++)Qe[nt].next(oe)}}error(oe){if(this.closed)throw new Le.N;this.hasError=!0,this.thrownError=oe,this.isStopped=!0;const{observers:pe}=this,Ue=pe.length,Qe=pe.slice();for(let nt=0;nt<Ue;nt++)Qe[nt].error(oe);this.observers.length=0}complete(){if(this.closed)throw new Le.N;this.isStopped=!0;const{observers:oe}=this,pe=oe.length,Ue=oe.slice();for(let Qe=0;Qe<pe;Qe++)Ue[Qe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(oe){if(this.closed)throw new Le.N;return super._trySubscribe(oe)}_subscribe(oe){if(this.closed)throw new Le.N;return this.hasError?(oe.error(this.thrownError),z.w.EMPTY):this.isStopped?(oe.complete(),z.w.EMPTY):(this.observers.push(oe),new Ne.W(this,oe))}asObservable(){const oe=new a.y;return oe.source=this,oe}}return ue.create=(de,oe)=>new be(de,oe),ue})();class be extends ge{constructor(de,oe){super(),this.destination=de,this.source=oe}next(de){const{destination:oe}=this;oe&&oe.next&&oe.next(de)}error(de){const{destination:oe}=this;oe&&oe.error&&this.destination.error(de)}complete(){const{destination:de}=this;de&&de.complete&&this.destination.complete()}_subscribe(de){const{source:oe}=this;return oe?this.source.subscribe(de):z.w.EMPTY}}},5283:(on,ut,H)=>{"use strict";H.d(ut,{W:()=>se});var a=H(2654);class se extends a.w{constructor(Le,Ne){super(),this.subject=Le,this.subscriber=Ne,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Le=this.subject,Ne=Le.observers;if(this.subject=null,!Ne||0===Ne.length||Le.isStopped||Le.closed)return;const fe=Ne.indexOf(this.subscriber);-1!==fe&&Ne.splice(fe,1)}}},3489:(on,ut,H)=>{"use strict";H.d(ut,{L:()=>ve});var a=H(7043),se=H(3292),z=H(2654),Le=H(7668),Ne=H(2830),fe=H(2782);class ve extends z.w{constructor(ue,de,oe){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=se.c;break;case 1:if(!ue){this.destination=se.c;break}if("object"==typeof ue){ue instanceof ve?(this.syncErrorThrowable=ue.syncErrorThrowable,this.destination=ue,ue.add(this)):(this.syncErrorThrowable=!0,this.destination=new ge(this,ue));break}default:this.syncErrorThrowable=!0,this.destination=new ge(this,ue,de,oe)}}[Le.b](){return this}static create(ue,de,oe){const pe=new ve(ue,de,oe);return pe.syncErrorThrowable=!1,pe}next(ue){this.isStopped||this._next(ue)}error(ue){this.isStopped||(this.isStopped=!0,this._error(ue))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ue){this.destination.next(ue)}_error(ue){this.destination.error(ue),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ue}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ue,this}}class ge extends ve{constructor(ue,de,oe,pe){super(),this._parentSubscriber=ue;let Ue,Qe=this;(0,a.m)(de)?Ue=de:de&&(Ue=de.next,oe=de.error,pe=de.complete,de!==se.c&&(Qe=Object.create(de),(0,a.m)(Qe.unsubscribe)&&this.add(Qe.unsubscribe.bind(Qe)),Qe.unsubscribe=this.unsubscribe.bind(this))),this._context=Qe,this._next=Ue,this._error=oe,this._complete=pe}next(ue){if(!this.isStopped&&this._next){const{_parentSubscriber:de}=this;Ne.v.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable?this.__tryOrSetError(de,this._next,ue)&&this.unsubscribe():this.__tryOrUnsub(this._next,ue)}}error(ue){if(!this.isStopped){const{_parentSubscriber:de}=this,{useDeprecatedSynchronousErrorHandling:oe}=Ne.v;if(this._error)oe&&de.syncErrorThrowable?(this.__tryOrSetError(de,this._error,ue),this.unsubscribe()):(this.__tryOrUnsub(this._error,ue),this.unsubscribe());else if(de.syncErrorThrowable)oe?(de.syncErrorValue=ue,de.syncErrorThrown=!0):(0,fe.z)(ue),this.unsubscribe();else{if(this.unsubscribe(),oe)throw ue;(0,fe.z)(ue)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ue}=this;if(this._complete){const de=()=>this._complete.call(this._context);Ne.v.useDeprecatedSynchronousErrorHandling&&ue.syncErrorThrowable?(this.__tryOrSetError(ue,de),this.unsubscribe()):(this.__tryOrUnsub(de),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ue,de){try{ue.call(this._context,de)}catch(oe){if(this.unsubscribe(),Ne.v.useDeprecatedSynchronousErrorHandling)throw oe;(0,fe.z)(oe)}}__tryOrSetError(ue,de,oe){if(!Ne.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{de.call(this._context,oe)}catch(pe){return Ne.v.useDeprecatedSynchronousErrorHandling?(ue.syncErrorValue=pe,ue.syncErrorThrown=!0,!0):((0,fe.z)(pe),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ue}=this;this._context=null,this._parentSubscriber=null,ue.unsubscribe()}}},2654:(on,ut,H)=>{"use strict";H.d(ut,{w:()=>fe});var a=H(6688),se=H(7830),z=H(7043);const Ne=(()=>{function ge(be){return Error.call(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((ue,de)=>`${de+1}) ${ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be,this}return ge.prototype=Object.create(Error.prototype),ge})();class fe{constructor(be){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,be&&(this._ctorUnsubscribe=!0,this._unsubscribe=be)}unsubscribe(){let be;if(this.closed)return;let{_parentOrParents:ue,_ctorUnsubscribe:de,_unsubscribe:oe,_subscriptions:pe}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ue instanceof fe)ue.remove(this);else if(null!==ue)for(let Ue=0;Ue<ue.length;++Ue)ue[Ue].remove(this);if((0,z.m)(oe)){de&&(this._unsubscribe=void 0);try{oe.call(this)}catch(Ue){be=Ue instanceof Ne?ve(Ue.errors):[Ue]}}if((0,a.k)(pe)){let Ue=-1,Qe=pe.length;for(;++Ue<Qe;){const nt=pe[Ue];if((0,se.K)(nt))try{nt.unsubscribe()}catch(Oe){be=be||[],Oe instanceof Ne?be=be.concat(ve(Oe.errors)):be.push(Oe)}}}if(be)throw new Ne(be)}add(be){let ue=be;if(!be)return fe.EMPTY;switch(typeof be){case"function":ue=new fe(be);case"object":if(ue===this||ue.closed||"function"!=typeof ue.unsubscribe)return ue;if(this.closed)return ue.unsubscribe(),ue;if(!(ue instanceof fe)){const pe=ue;ue=new fe,ue._subscriptions=[pe]}break;default:throw new Error("unrecognized teardown "+be+" added to Subscription.")}let{_parentOrParents:de}=ue;if(null===de)ue._parentOrParents=this;else if(de instanceof fe){if(de===this)return ue;ue._parentOrParents=[de,this]}else{if(-1!==de.indexOf(this))return ue;de.push(this)}const oe=this._subscriptions;return null===oe?this._subscriptions=[ue]:oe.push(ue),ue}remove(be){const ue=this._subscriptions;if(ue){const de=ue.indexOf(be);-1!==de&&ue.splice(de,1)}}}var ge;function ve(ge){return ge.reduce((be,ue)=>be.concat(ue instanceof Ne?ue.errors:ue),[])}fe.EMPTY=((ge=new fe).closed=!0,ge)},2830:(on,ut,H)=>{"use strict";H.d(ut,{v:()=>se});let a=!1;const se={Promise:void 0,set useDeprecatedSynchronousErrorHandling(z){if(z){const Le=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Le.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=z},get useDeprecatedSynchronousErrorHandling(){return a}}},1177:(on,ut,H)=>{"use strict";H.d(ut,{Ds:()=>fe,IY:()=>Le,ft:()=>ge});var a=H(3489),se=H(6498),z=H(9249);class Le extends a.L{constructor(ue){super(),this.parent=ue}_next(ue){this.parent.notifyNext(ue)}_error(ue){this.parent.notifyError(ue),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class fe extends a.L{notifyNext(ue){this.destination.next(ue)}notifyError(ue){this.destination.error(ue)}notifyComplete(){this.destination.complete()}}function ge(be,ue){if(ue.closed)return;if(be instanceof se.y)return be.subscribe(ue);let de;try{de=(0,z.s)(be)(ue)}catch(oe){ue.error(oe)}return de}},1762:(on,ut,H)=>{"use strict";H.d(ut,{N:()=>fe,c:()=>Ne});var a=H(8929),se=H(6498),z=H(2654),Le=H(4327);class Ne extends se.y{constructor(de,oe){super(),this.source=de,this.subjectFactory=oe,this._refCount=0,this._isComplete=!1}_subscribe(de){return this.getSubject().subscribe(de)}getSubject(){const de=this._subject;return(!de||de.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let de=this._connection;return de||(this._isComplete=!1,de=this._connection=new z.w,de.add(this.source.subscribe(new ve(this.getSubject(),this))),de.closed&&(this._connection=null,de=z.w.EMPTY)),de}refCount(){return(0,Le.x)()(this)}}const fe=(()=>{const ue=Ne.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ue._subscribe},_isComplete:{value:ue._isComplete,writable:!0},getSubject:{value:ue.getSubject},connect:{value:ue.connect},refCount:{value:ue.refCount}}})();class ve extends a.Yc{constructor(de,oe){super(de),this.connectable=oe}_error(de){this._unsubscribe(),super._error(de)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const de=this.connectable;if(de){this.connectable=null;const oe=de._connection;de._refCount=0,de._subject=null,de._connection=null,oe&&oe.unsubscribe()}}}},1221:(on,ut,H)=>{"use strict";H.d(ut,{z:()=>Le});var a=H(1086),se=H(9146);function Le(...Ne){return function z(){return(0,se.J)(1)}()((0,a.of)(...Ne))}},8896:(on,ut,H)=>{"use strict";H.d(ut,{E:()=>se,c:()=>z});var a=H(6498);const se=new a.y(Ne=>Ne.complete());function z(Ne){return Ne?function Le(Ne){return new a.y(fe=>Ne.schedule(()=>fe.complete()))}(Ne):se}},5254:(on,ut,H)=>{"use strict";H.d(ut,{D:()=>Qe});var a=H(6498),se=H(9249),z=H(2654),Le=H(3821),ve=H(6454),ge=H(5430),de=H(8955),oe=H(8515);function Qe(nt,Oe){return Oe?function Ue(nt,Oe){if(null!=nt){if(function ue(nt){return nt&&"function"==typeof nt[Le.L]}(nt))return function Ne(nt,Oe){return new a.y(we=>{const dt=new z.w;return dt.add(Oe.schedule(()=>{const st=nt[Le.L]();dt.add(st.subscribe({next(ht){dt.add(Oe.schedule(()=>we.next(ht)))},error(ht){dt.add(Oe.schedule(()=>we.error(ht)))},complete(){dt.add(Oe.schedule(()=>we.complete()))}}))})),dt})}(nt,Oe);if((0,de.t)(nt))return function fe(nt,Oe){return new a.y(we=>{const dt=new z.w;return dt.add(Oe.schedule(()=>nt.then(st=>{dt.add(Oe.schedule(()=>{we.next(st),dt.add(Oe.schedule(()=>we.complete()))}))},st=>{dt.add(Oe.schedule(()=>we.error(st)))}))),dt})}(nt,Oe);if((0,oe.z)(nt))return(0,ve.r)(nt,Oe);if(function pe(nt){return nt&&"function"==typeof nt[ge.hZ]}(nt)||"string"==typeof nt)return function be(nt,Oe){if(!nt)throw new Error("Iterable cannot be null");return new a.y(we=>{const dt=new z.w;let st;return dt.add(()=>{st&&"function"==typeof st.return&&st.return()}),dt.add(Oe.schedule(()=>{st=nt[ge.hZ](),dt.add(Oe.schedule(function(){if(we.closed)return;let ht,yt;try{const kt=st.next();ht=kt.value,yt=kt.done}catch(kt){return void we.error(kt)}yt?we.complete():(we.next(ht),this.schedule())}))})),dt})}(nt,Oe)}throw new TypeError((null!==nt&&typeof nt||nt)+" is not observable")}(nt,Oe):nt instanceof a.y?nt:new a.y((0,se.s)(nt))}},3009:(on,ut,H)=>{"use strict";H.d(ut,{n:()=>Le});var a=H(6498),se=H(3650),z=H(6454);function Le(Ne,fe){return fe?(0,z.r)(Ne,fe):new a.y((0,se.V)(Ne))}},6787:(on,ut,H)=>{"use strict";H.d(ut,{T:()=>Ne});var a=H(6498),se=H(2866),z=H(9146),Le=H(3009);function Ne(...fe){let ve=Number.POSITIVE_INFINITY,ge=null,be=fe[fe.length-1];return(0,se.K)(be)?(ge=fe.pop(),fe.length>1&&"number"==typeof fe[fe.length-1]&&(ve=fe.pop())):"number"==typeof be&&(ve=fe.pop()),null===ge&&1===fe.length&&fe[0]instanceof a.y?fe[0]:(0,z.J)(ve)((0,Le.n)(fe,ge))}},1086:(on,ut,H)=>{"use strict";H.d(ut,{of:()=>Le});var a=H(2866),se=H(3009),z=H(6454);function Le(...Ne){let fe=Ne[Ne.length-1];return(0,a.K)(fe)?(Ne.pop(),(0,z.r)(Ne,fe)):(0,se.n)(Ne)}},1737:(on,ut,H)=>{"use strict";H.d(ut,{_:()=>se});var a=H(6498);function se(Le,Ne){return new a.y(Ne?fe=>Ne.schedule(z,0,{error:Le,subscriber:fe}):fe=>fe.error(Le))}function z({error:Le,subscriber:Ne}){Ne.error(Le)}},7314:(on,ut,H)=>{"use strict";H.d(ut,{d:()=>se});var a=H(3489);function se(Ne=null){return fe=>fe.lift(new z(Ne))}class z{constructor(fe){this.defaultValue=fe}call(fe,ve){return ve.subscribe(new Le(fe,this.defaultValue))}}class Le extends a.L{constructor(fe,ve){super(fe),this.defaultValue=ve,this.isEmpty=!0}_next(fe){this.isEmpty=!1,this.destination.next(fe)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:(on,ut,H)=>{"use strict";H.d(ut,{x:()=>se});var a=H(3489);function se(Ne,fe){return ve=>ve.lift(new z(Ne,fe))}class z{constructor(fe,ve){this.compare=fe,this.keySelector=ve}call(fe,ve){return ve.subscribe(new Le(fe,this.compare,this.keySelector))}}class Le extends a.L{constructor(fe,ve,ge){super(fe),this.keySelector=ge,this.hasKey=!1,"function"==typeof ve&&(this.compare=ve)}compare(fe,ve){return fe===ve}_next(fe){let ve;try{const{keySelector:be}=this;ve=be?be(fe):fe}catch(be){return this.destination.error(be)}let ge=!1;if(this.hasKey)try{const{compare:be}=this;ge=be(this.key,ve)}catch(be){return this.destination.error(be)}else this.hasKey=!0;ge||(this.key=ve,this.destination.next(fe))}}},2198:(on,ut,H)=>{"use strict";H.d(ut,{h:()=>se});var a=H(3489);function se(Ne,fe){return function(ge){return ge.lift(new z(Ne,fe))}}class z{constructor(fe,ve){this.predicate=fe,this.thisArg=ve}call(fe,ve){return ve.subscribe(new Le(fe,this.predicate,this.thisArg))}}class Le extends a.L{constructor(fe,ve,ge){super(fe),this.predicate=ve,this.thisArg=ge,this.count=0}_next(fe){let ve;try{ve=this.predicate.call(this.thisArg,fe,this.count++)}catch(ge){return void this.destination.error(ge)}ve&&this.destination.next(fe)}}},7224:(on,ut,H)=>{"use strict";H.d(ut,{P:()=>ve});var a=H(4450),se=H(2198),z=H(2986),Le=H(7314),Ne=H(4907),fe=H(5379);function ve(ge,be){const ue=arguments.length>=2;return de=>de.pipe(ge?(0,se.h)((oe,pe)=>ge(oe,pe,de)):fe.y,(0,z.q)(1),ue?(0,Le.d)(be):(0,Ne.T)(()=>new a.K))}},4850:(on,ut,H)=>{"use strict";H.d(ut,{U:()=>se});var a=H(3489);function se(Ne,fe){return function(ge){if("function"!=typeof Ne)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ge.lift(new z(Ne,fe))}}class z{constructor(fe,ve){this.project=fe,this.thisArg=ve}call(fe,ve){return ve.subscribe(new Le(fe,this.project,this.thisArg))}}class Le extends a.L{constructor(fe,ve,ge){super(fe),this.project=ve,this.count=0,this.thisArg=ge||this}_next(fe){let ve;try{ve=this.project.call(this.thisArg,fe,this.count++)}catch(ge){return void this.destination.error(ge)}this.destination.next(ve)}}},9146:(on,ut,H)=>{"use strict";H.d(ut,{J:()=>z});var a=H(1709),se=H(5379);function z(Le=Number.POSITIVE_INFINITY){return(0,a.zg)(se.y,Le)}},1709:(on,ut,H)=>{"use strict";H.d(ut,{zg:()=>Le});var a=H(4850),se=H(5254),z=H(1177);function Le(ge,be,ue=Number.POSITIVE_INFINITY){return"function"==typeof be?de=>de.pipe(Le((oe,pe)=>(0,se.D)(ge(oe,pe)).pipe((0,a.U)((Ue,Qe)=>be(oe,Ue,pe,Qe))),ue)):("number"==typeof be&&(ue=be),de=>de.lift(new Ne(ge,ue)))}class Ne{constructor(be,ue=Number.POSITIVE_INFINITY){this.project=be,this.concurrent=ue}call(be,ue){return ue.subscribe(new fe(be,this.project,this.concurrent))}}class fe extends z.Ds{constructor(be,ue,de=Number.POSITIVE_INFINITY){super(be),this.project=ue,this.concurrent=de,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(be){this.active<this.concurrent?this._tryNext(be):this.buffer.push(be)}_tryNext(be){let ue;const de=this.index++;try{ue=this.project(be,de)}catch(oe){return void this.destination.error(oe)}this.active++,this._innerSub(ue)}_innerSub(be){const ue=new z.IY(this),de=this.destination;de.add(ue);const oe=(0,z.ft)(be,ue);oe!==ue&&de.add(oe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(be){this.destination.next(be)}notifyComplete(){const be=this.buffer;this.active--,be.length>0?this._next(be.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:(on,ut,H)=>{"use strict";H.d(ut,{ht:()=>be,QV:()=>ve});var a=H(3489),se=H(8896),z=H(1086),Le=H(1737);class fe{constructor(oe,pe,Ue){this.kind=oe,this.value=pe,this.error=Ue,this.hasValue="N"===oe}observe(oe){switch(this.kind){case"N":return oe.next&&oe.next(this.value);case"E":return oe.error&&oe.error(this.error);case"C":return oe.complete&&oe.complete()}}do(oe,pe,Ue){switch(this.kind){case"N":return oe&&oe(this.value);case"E":return pe&&pe(this.error);case"C":return Ue&&Ue()}}accept(oe,pe,Ue){return oe&&"function"==typeof oe.next?this.observe(oe):this.do(oe,pe,Ue)}toObservable(){switch(this.kind){case"N":return(0,z.of)(this.value);case"E":return(0,Le._)(this.error);case"C":return(0,se.c)()}throw new Error("unexpected notification kind value")}static createNext(oe){return void 0!==oe?new fe("N",oe):fe.undefinedValueNotification}static createError(oe){return new fe("E",void 0,oe)}static createComplete(){return fe.completeNotification}}function ve(de,oe=0){return function(Ue){return Ue.lift(new ge(de,oe))}}fe.completeNotification=new fe("C"),fe.undefinedValueNotification=new fe("N",void 0);class ge{constructor(oe,pe=0){this.scheduler=oe,this.delay=pe}call(oe,pe){return pe.subscribe(new be(oe,this.scheduler,this.delay))}}class be extends a.L{constructor(oe,pe,Ue=0){super(oe),this.scheduler=pe,this.delay=Ue}static dispatch(oe){const{notification:pe,destination:Ue}=oe;pe.observe(Ue),this.unsubscribe()}scheduleMessage(oe){this.destination.add(this.scheduler.schedule(be.dispatch,this.delay,new ue(oe,this.destination)))}_next(oe){this.scheduleMessage(fe.createNext(oe))}_error(oe){this.scheduleMessage(fe.createError(oe)),this.unsubscribe()}_complete(){this.scheduleMessage(fe.createComplete()),this.unsubscribe()}}class ue{constructor(oe,pe){this.notification=oe,this.destination=pe}}},4327:(on,ut,H)=>{"use strict";H.d(ut,{x:()=>se});var a=H(3489);function se(){return function(fe){return fe.lift(new z(fe))}}class z{constructor(fe){this.connectable=fe}call(fe,ve){const{connectable:ge}=this;ge._refCount++;const be=new Le(fe,ge),ue=ve.subscribe(be);return be.closed||(be.connection=ge.connect()),ue}}class Le extends a.L{constructor(fe,ve){super(fe),this.connectable=ve}_unsubscribe(){const{connectable:fe}=this;if(!fe)return void(this.connection=null);this.connectable=null;const ve=fe._refCount;if(ve<=0)return void(this.connection=null);if(fe._refCount=ve-1,ve>1)return void(this.connection=null);const{connection:ge}=this,be=fe._connection;this.connection=null,be&&(!ge||be===ge)&&be.unsubscribe()}}},2014:(on,ut,H)=>{"use strict";H.d(ut,{R:()=>se});var a=H(3489);function se(Ne,fe){let ve=!1;return arguments.length>=2&&(ve=!0),function(be){return be.lift(new z(Ne,fe,ve))}}class z{constructor(fe,ve,ge=!1){this.accumulator=fe,this.seed=ve,this.hasSeed=ge}call(fe,ve){return ve.subscribe(new Le(fe,this.accumulator,this.seed,this.hasSeed))}}class Le extends a.L{constructor(fe,ve,ge,be){super(fe),this.accumulator=ve,this._seed=ge,this.hasSeed=be,this.index=0}get seed(){return this._seed}set seed(fe){this.hasSeed=!0,this._seed=fe}_next(fe){if(this.hasSeed)return this._tryNext(fe);this.seed=fe,this.destination.next(fe)}_tryNext(fe){const ve=this.index++;let ge;try{ge=this.accumulator(this.seed,fe,ve)}catch(be){this.destination.error(be)}this.seed=ge,this.destination.next(ge)}}},2474:(on,ut,H)=>{"use strict";H.d(ut,{B:()=>ve});var a=H(1762);class z{constructor(be,ue){this.subjectFactory=be,this.selector=ue}call(be,ue){const{selector:de}=this,oe=this.subjectFactory(),pe=de(oe).subscribe(be);return pe.add(ue.subscribe(oe)),pe}}var Le=H(4327),Ne=H(8929);function fe(){return new Ne.xQ}function ve(){return ge=>(0,Le.x)()(function se(ge,be){return function(de){let oe;if(oe="function"==typeof ge?ge:function(){return ge},"function"==typeof be)return de.lift(new z(oe,be));const pe=Object.create(de,a.N);return pe.source=de,pe.subjectFactory=oe,pe}}(fe)(ge))}},1059:(on,ut,H)=>{"use strict";H.d(ut,{O:()=>z});var a=H(1221),se=H(2866);function z(...Le){const Ne=Le[Le.length-1];return(0,se.K)(Ne)?(Le.pop(),fe=>(0,a.z)(Le,fe,Ne)):fe=>(0,a.z)(Le,fe)}},8915:(on,ut,H)=>{"use strict";H.d(ut,{R:()=>Oe});var a=H(6498);let se=1;const z=Promise.resolve(),Le={};function Ne(dt){return dt in Le&&(delete Le[dt],!0)}const fe={setImmediate(dt){const st=se++;return Le[st]=!0,z.then(()=>Ne(st)&&dt()),st},clearImmediate(dt){Ne(dt)}};var ge=H(6686),ue=H(2268);const pe=new class de extends ue.v{flush(st){this.active=!0,this.scheduled=void 0;const{actions:ht}=this;let yt,kt=-1,je=ht.length;st=st||ht.shift();do{if(yt=st.execute(st.state,st.delay))break}while(++kt<je&&(st=ht.shift()));if(this.active=!1,yt){for(;++kt<je&&(st=ht.shift());)st.unsubscribe();throw yt}}}(class be extends ge.o{constructor(st,ht){super(st,ht),this.scheduler=st,this.work=ht}requestAsyncId(st,ht,yt=0){return null!==yt&&yt>0?super.requestAsyncId(st,ht,yt):(st.actions.push(this),st.scheduled||(st.scheduled=fe.setImmediate(st.flush.bind(st,null))))}recycleAsyncId(st,ht,yt=0){if(null!==yt&&yt>0||null===yt&&this.delay>0)return super.recycleAsyncId(st,ht,yt);0===st.actions.length&&(fe.clearImmediate(ht),st.scheduled=void 0)}});var Ue=H(6688);class nt extends a.y{constructor(st,ht=0,yt=pe){super(),this.source=st,this.delayTime=ht,this.scheduler=yt,(!function Qe(dt){return!(0,Ue.k)(dt)&&dt-parseFloat(dt)+1>=0}(ht)||ht<0)&&(this.delayTime=0),(!yt||"function"!=typeof yt.schedule)&&(this.scheduler=pe)}static create(st,ht=0,yt=pe){return new nt(st,ht,yt)}static dispatch(st){const{source:ht,subscriber:yt}=st;return this.add(ht.subscribe(yt))}_subscribe(st){return this.scheduler.schedule(nt.dispatch,this.delayTime,{source:this.source,subscriber:st})}}function Oe(dt,st=0){return function(yt){return yt.lift(new we(dt,st))}}class we{constructor(st,ht){this.scheduler=st,this.delay=ht}call(st,ht){return new nt(ht,this.delay,this.scheduler).subscribe(st)}}},7545:(on,ut,H)=>{"use strict";H.d(ut,{w:()=>Le});var a=H(4850),se=H(5254),z=H(1177);function Le(ve,ge){return"function"==typeof ge?be=>be.pipe(Le((ue,de)=>(0,se.D)(ve(ue,de)).pipe((0,a.U)((oe,pe)=>ge(ue,oe,de,pe))))):be=>be.lift(new Ne(ve))}class Ne{constructor(ge){this.project=ge}call(ge,be){return be.subscribe(new fe(ge,this.project))}}class fe extends z.Ds{constructor(ge,be){super(ge),this.project=be,this.index=0}_next(ge){let be;const ue=this.index++;try{be=this.project(ge,ue)}catch(de){return void this.destination.error(de)}this._innerSub(be)}_innerSub(ge){const be=this.innerSubscription;be&&be.unsubscribe();const ue=new z.IY(this),de=this.destination;de.add(ue),this.innerSubscription=(0,z.ft)(ge,ue),this.innerSubscription!==ue&&de.add(this.innerSubscription)}_complete(){const{innerSubscription:ge}=this;(!ge||ge.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ge){this.destination.next(ge)}}},2986:(on,ut,H)=>{"use strict";H.d(ut,{q:()=>Le});var a=H(3489),se=H(4231),z=H(8896);function Le(ve){return ge=>0===ve?(0,z.c)():ge.lift(new Ne(ve))}class Ne{constructor(ge){if(this.total=ge,this.total<0)throw new se.W}call(ge,be){return be.subscribe(new fe(ge,this.total))}}class fe extends a.L{constructor(ge,be){super(ge),this.total=be,this.count=0}_next(ge){const be=this.total,ue=++this.count;ue<=be&&(this.destination.next(ge),ue===be&&(this.destination.complete(),this.unsubscribe()))}}},2868:(on,ut,H)=>{"use strict";H.d(ut,{b:()=>Le});var a=H(3489);function se(){}var z=H(7043);function Le(ve,ge,be){return function(de){return de.lift(new Ne(ve,ge,be))}}class Ne{constructor(ge,be,ue){this.nextOrObserver=ge,this.error=be,this.complete=ue}call(ge,be){return be.subscribe(new fe(ge,this.nextOrObserver,this.error,this.complete))}}class fe extends a.L{constructor(ge,be,ue,de){super(ge),this._tapNext=se,this._tapError=se,this._tapComplete=se,this._tapError=ue||se,this._tapComplete=de||se,(0,z.m)(be)?(this._context=this,this._tapNext=be):be&&(this._context=be,this._tapNext=be.next||se,this._tapError=be.error||se,this._tapComplete=be.complete||se)}_next(ge){try{this._tapNext.call(this._context,ge)}catch(be){return void this.destination.error(be)}this.destination.next(ge)}_error(ge){try{this._tapError.call(this._context,ge)}catch(be){return void this.destination.error(be)}this.destination.error(ge)}_complete(){try{this._tapComplete.call(this._context)}catch(ge){return void this.destination.error(ge)}return this.destination.complete()}}},4907:(on,ut,H)=>{"use strict";H.d(ut,{T:()=>z});var a=H(4450),se=H(3489);function z(ve=fe){return ge=>ge.lift(new Le(ve))}class Le{constructor(ge){this.errorFactory=ge}call(ge,be){return be.subscribe(new Ne(ge,this.errorFactory))}}class Ne extends se.L{constructor(ge,be){super(ge),this.errorFactory=be,this.hasValue=!1}_next(ge){this.hasValue=!0,this.destination.next(ge)}_complete(){if(this.hasValue)return this.destination.complete();{let ge;try{ge=this.errorFactory()}catch(be){ge=be}this.destination.error(ge)}}}function fe(){return new a.K}},6454:(on,ut,H)=>{"use strict";H.d(ut,{r:()=>z});var a=H(6498),se=H(2654);function z(Le,Ne){return new a.y(fe=>{const ve=new se.w;let ge=0;return ve.add(Ne.schedule(function(){ge!==Le.length?(fe.next(Le[ge++]),fe.closed||ve.add(this.schedule())):fe.complete()})),ve})}},6686:(on,ut,H)=>{"use strict";H.d(ut,{o:()=>z});var a=H(2654);class se extends a.w{constructor(Ne,fe){super()}schedule(Ne,fe=0){return this}}class z extends se{constructor(Ne,fe){super(Ne,fe),this.scheduler=Ne,this.work=fe,this.pending=!1}schedule(Ne,fe=0){if(this.closed)return this;this.state=Ne;const ve=this.id,ge=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(ge,ve,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(ge,this.id,fe),this}requestAsyncId(Ne,fe,ve=0){return setInterval(Ne.flush.bind(Ne,this),ve)}recycleAsyncId(Ne,fe,ve=0){if(null!==ve&&this.delay===ve&&!1===this.pending)return fe;clearInterval(fe)}execute(Ne,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(Ne,fe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ne,fe){let ge,ve=!1;try{this.work(Ne)}catch(be){ve=!0,ge=!!be&&be||new Error(be)}if(ve)return this.unsubscribe(),ge}_unsubscribe(){const Ne=this.id,fe=this.scheduler,ve=fe.actions,ge=ve.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ge&&ve.splice(ge,1),null!=Ne&&(this.id=this.recycleAsyncId(fe,Ne,null)),this.delay=null}}},2268:(on,ut,H)=>{"use strict";H.d(ut,{v:()=>se});let a=(()=>{class z{constructor(Ne,fe=z.now){this.SchedulerAction=Ne,this.now=fe}schedule(Ne,fe=0,ve){return new this.SchedulerAction(this,Ne).schedule(ve,fe)}}return z.now=()=>Date.now(),z})();class se extends a{constructor(Le,Ne=a.now){super(Le,()=>se.delegate&&se.delegate!==this?se.delegate.now():Ne()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Le,Ne=0,fe){return se.delegate&&se.delegate!==this?se.delegate.schedule(Le,Ne,fe):super.schedule(Le,Ne,fe)}flush(Le){const{actions:Ne}=this;if(this.active)return void Ne.push(Le);let fe;this.active=!0;do{if(fe=Le.execute(Le.state,Le.delay))break}while(Le=Ne.shift());if(this.active=!1,fe){for(;Le=Ne.shift();)Le.unsubscribe();throw fe}}}},353:(on,ut,H)=>{"use strict";H.d(ut,{P:()=>Le,z:()=>z});var a=H(6686);const z=new(H(2268).v)(a.o),Le=z},341:(on,ut,H)=>{"use strict";H.d(ut,{c:()=>fe,N:()=>Ne});var a=H(6686),z=H(2268);const Ne=new class Le extends z.v{}(class se extends a.o{constructor(ge,be){super(ge,be),this.scheduler=ge,this.work=be}schedule(ge,be=0){return be>0?super.schedule(ge,be):(this.delay=be,this.state=ge,this.scheduler.flush(this),this)}execute(ge,be){return be>0||this.closed?super.execute(ge,be):this._execute(ge,be)}requestAsyncId(ge,be,ue=0){return null!==ue&&ue>0||null===ue&&this.delay>0?super.requestAsyncId(ge,be,ue):ge.flush(this)}}),fe=Ne},5430:(on,ut,H)=>{"use strict";H.d(ut,{hZ:()=>se});const se=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(on,ut,H)=>{"use strict";H.d(ut,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(on,ut,H)=>{"use strict";H.d(ut,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(on,ut,H)=>{"use strict";H.d(ut,{W:()=>se});const se=(()=>{function z(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return z.prototype=Object.create(Error.prototype),z})()},4450:(on,ut,H)=>{"use strict";H.d(ut,{K:()=>se});const se=(()=>{function z(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return z.prototype=Object.create(Error.prototype),z})()},5279:(on,ut,H)=>{"use strict";H.d(ut,{N:()=>se});const se=(()=>{function z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return z.prototype=Object.create(Error.prototype),z})()},2782:(on,ut,H)=>{"use strict";function a(se){setTimeout(()=>{throw se},0)}H.d(ut,{z:()=>a})},5379:(on,ut,H)=>{"use strict";function a(se){return se}H.d(ut,{y:()=>a})},6688:(on,ut,H)=>{"use strict";H.d(ut,{k:()=>a});const a=Array.isArray||(se=>se&&"number"==typeof se.length)},8515:(on,ut,H)=>{"use strict";H.d(ut,{z:()=>a});const a=se=>se&&"number"==typeof se.length&&"function"!=typeof se},7043:(on,ut,H)=>{"use strict";function a(se){return"function"==typeof se}H.d(ut,{m:()=>a})},7830:(on,ut,H)=>{"use strict";function a(se){return null!==se&&"object"==typeof se}H.d(ut,{K:()=>a})},8955:(on,ut,H)=>{"use strict";function a(se){return!!se&&"function"!=typeof se.subscribe&&"function"==typeof se.then}H.d(ut,{t:()=>a})},2866:(on,ut,H)=>{"use strict";function a(se){return se&&"function"==typeof se.schedule}H.d(ut,{K:()=>a})},4843:(on,ut,H)=>{"use strict";H.d(ut,{U:()=>z,z:()=>se});var a=H(5379);function se(...Le){return z(Le)}function z(Le){return 0===Le.length?a.y:1===Le.length?Le[0]:function(fe){return Le.reduce((ve,ge)=>ge(ve),fe)}}},9249:(on,ut,H)=>{"use strict";H.d(ut,{s:()=>de});var a=H(3650),se=H(2782),Le=H(5430),fe=H(3821),ge=H(8515),be=H(8955),ue=H(7830);const de=oe=>{if(oe&&"function"==typeof oe[fe.L])return(oe=>pe=>{const Ue=oe[fe.L]();if("function"!=typeof Ue.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ue.subscribe(pe)})(oe);if((0,ge.z)(oe))return(0,a.V)(oe);if((0,be.t)(oe))return(oe=>pe=>(oe.then(Ue=>{pe.closed||(pe.next(Ue),pe.complete())},Ue=>pe.error(Ue)).then(null,se.z),pe))(oe);if(oe&&"function"==typeof oe[Le.hZ])return(oe=>pe=>{const Ue=oe[Le.hZ]();for(;;){let Qe;try{Qe=Ue.next()}catch(nt){return pe.error(nt),pe}if(Qe.done){pe.complete();break}if(pe.next(Qe.value),pe.closed)break}return"function"==typeof Ue.return&&pe.add(()=>{Ue.return&&Ue.return()}),pe})(oe);{const Ue=`You provided ${(0,ue.K)(oe)?"an invalid object":`'${oe}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ue)}}},3650:(on,ut,H)=>{"use strict";H.d(ut,{V:()=>a});const a=se=>z=>{for(let Le=0,Ne=se.length;Le<Ne&&!z.closed;Le++)z.next(se[Le]);z.complete()}},448:(on,ut,H)=>{"use strict";H.d(ut,{D:()=>Ne});var a=H(3489);class se extends a.L{constructor(ve,ge,be){super(),this.parent=ve,this.outerValue=ge,this.outerIndex=be,this.index=0}_next(ve){this.parent.notifyNext(this.outerValue,ve,this.outerIndex,this.index++,this)}_error(ve){this.parent.notifyError(ve,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var z=H(9249),Le=H(6498);function Ne(fe,ve,ge,be,ue=new se(fe,ge,be)){if(!ue.closed)return ve instanceof Le.y?ve.subscribe(ue):(0,z.s)(ve)(ue)}},863:(on,ut,H)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,4328,9230],"./ion-datetime_3.entry.js":[4959,4328,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[7066,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[3545,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function se(z){if(!H.o(a,z))return Promise.resolve().then(()=>{var fe=new Error("Cannot find module '"+z+"'");throw fe.code="MODULE_NOT_FOUND",fe});var Le=a[z],Ne=Le[0];return Promise.all(Le.slice(1).map(H.e)).then(()=>H(Ne))}se.keys=()=>Object.keys(a),se.id=863,on.exports=se},655:(on,ut,H)=>{"use strict";function Le(te,he){var Ie={};for(var Te in te)Object.prototype.hasOwnProperty.call(te,Te)&&he.indexOf(Te)<0&&(Ie[Te]=te[Te]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(Te=Object.getOwnPropertySymbols(te);Je<Te.length;Je++)he.indexOf(Te[Je])<0&&Object.prototype.propertyIsEnumerable.call(te,Te[Je])&&(Ie[Te[Je]]=te[Te[Je]])}return Ie}function Ne(te,he,Ie,Te){var Wt,Je=arguments.length,Ot=Je<3?he:null===Te?Te=Object.getOwnPropertyDescriptor(he,Ie):Te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ot=Reflect.decorate(te,he,Ie,Te);else for(var ze=te.length-1;ze>=0;ze--)(Wt=te[ze])&&(Ot=(Je<3?Wt(Ot):Je>3?Wt(he,Ie,Ot):Wt(he,Ie))||Ot);return Je>3&&Ot&&Object.defineProperty(he,Ie,Ot),Ot}function ge(te,he,Ie,Te){return new(Ie||(Ie=Promise))(function(Ot,Wt){function ze($e){try{De(Te.next($e))}catch(Xe){Wt(Xe)}}function ot($e){try{De(Te.throw($e))}catch(Xe){Wt(Xe)}}function De($e){$e.done?Ot($e.value):function Je(Ot){return Ot instanceof Ie?Ot:new Ie(function(Wt){Wt(Ot)})}($e.value).then(ze,ot)}De((Te=Te.apply(te,he||[])).next())})}H.d(ut,{_T:()=>Le,gn:()=>Ne,mG:()=>ge})},9808:(on,ut,H)=>{"use strict";H.d(ut,{Do:()=>st,EM:()=>Ds,HT:()=>Ne,JF:()=>Xs,K0:()=>ve,Mx:()=>ui,O5:()=>Ce,PC:()=>vn,PM:()=>es,S$:()=>Oe,V_:()=>ue,Ye:()=>ht,b0:()=>dt,bD:()=>us,ez:()=>Wi,mk:()=>Gi,q:()=>z,sg:()=>Ti,tP:()=>rr,w_:()=>fe});var a=H(5e3);let se=null;function z(){return se}function Ne(L){se||(se=L)}class fe{}const ve=new a.OlP("DocumentToken");let ge=(()=>{class L{historyGo($){throw new Error("Not implemented")}}return L.\u0275fac=function($){return new($||L)},L.\u0275prov=a.Yz7({token:L,factory:function(){return function be(){return(0,a.LFG)(de)}()},providedIn:"platform"}),L})();const ue=new a.OlP("Location Initialized");let de=(()=>{class L extends ge{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState($){const ie=z().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",$,!1),()=>ie.removeEventListener("popstate",$)}onHashChange($){const ie=z().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",$,!1),()=>ie.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,ie,Fe){oe()?this._history.pushState($,ie,Fe):this.location.hash=Fe}replaceState($,ie,Fe){oe()?this._history.replaceState($,ie,Fe):this.location.hash=Fe}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return L.\u0275fac=function($){return new($||L)(a.LFG(ve))},L.\u0275prov=a.Yz7({token:L,factory:function(){return function pe(){return new de((0,a.LFG)(ve))}()},providedIn:"platform"}),L})();function oe(){return!!window.history.pushState}function Ue(L,X){if(0==L.length)return X;if(0==X.length)return L;let $=0;return L.endsWith("/")&&$++,X.startsWith("/")&&$++,2==$?L+X.substring(1):1==$?L+X:L+"/"+X}function Qe(L){const X=L.match(/#|\?|$/),$=X&&X.index||L.length;return L.slice(0,$-("/"===L[$-1]?1:0))+L.slice($)}function nt(L){return L&&"?"!==L[0]?"?"+L:L}let Oe=(()=>{class L{historyGo($){throw new Error("Not implemented")}}return L.\u0275fac=function($){return new($||L)},L.\u0275prov=a.Yz7({token:L,factory:function(){return(0,a.f3M)(dt)},providedIn:"root"}),L})();const we=new a.OlP("appBaseHref");let dt=(()=>{class L extends Oe{constructor($,ie){var Fe,Dt,Lt;super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=null!==(Lt=null!==(Fe=null!=ie?ie:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Fe?Fe:null===(Dt=(0,a.f3M)(ve).location)||void 0===Dt?void 0:Dt.origin)&&void 0!==Lt?Lt:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Ue(this._baseHref,$)}path($=!1){const ie=this._platformLocation.pathname+nt(this._platformLocation.search),Fe=this._platformLocation.hash;return Fe&&$?`${ie}${Fe}`:ie}pushState($,ie,Fe,Dt){const Lt=this.prepareExternalUrl(Fe+nt(Dt));this._platformLocation.pushState($,ie,Lt)}replaceState($,ie,Fe,Dt){const Lt=this.prepareExternalUrl(Fe+nt(Dt));this._platformLocation.replaceState($,ie,Lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var ie,Fe;null===(Fe=(ie=this._platformLocation).historyGo)||void 0===Fe||Fe.call(ie,$)}}return L.\u0275fac=function($){return new($||L)(a.LFG(ge),a.LFG(we,8))},L.\u0275prov=a.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),st=(()=>{class L extends Oe{constructor($,ie){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl($){const ie=Ue(this._baseHref,$);return ie.length>0?"#"+ie:ie}pushState($,ie,Fe,Dt){let Lt=this.prepareExternalUrl(Fe+nt(Dt));0==Lt.length&&(Lt=this._platformLocation.pathname),this._platformLocation.pushState($,ie,Lt)}replaceState($,ie,Fe,Dt){let Lt=this.prepareExternalUrl(Fe+nt(Dt));0==Lt.length&&(Lt=this._platformLocation.pathname),this._platformLocation.replaceState($,ie,Lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var ie,Fe;null===(Fe=(ie=this._platformLocation).historyGo)||void 0===Fe||Fe.call(ie,$)}}return L.\u0275fac=function($){return new($||L)(a.LFG(ge),a.LFG(we,8))},L.\u0275prov=a.Yz7({token:L,factory:L.\u0275fac}),L})(),ht=(()=>{class L{constructor($){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const ie=this._locationStrategy.getBaseHref();this._baseHref=Qe(je(ie)),this._locationStrategy.onPopState(Fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Fe.state,type:Fe.type})})}ngOnDestroy(){var $;null===($=this._urlChangeSubscription)||void 0===$||$.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,ie=""){return this.path()==this.normalize($+nt(ie))}normalize($){return L.stripTrailingSlash(function kt(L,X){return L&&X.startsWith(L)?X.substring(L.length):X}(this._baseHref,je($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,ie="",Fe=null){this._locationStrategy.pushState(Fe,"",$,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl($+nt(ie)),Fe)}replaceState($,ie="",Fe=null){this._locationStrategy.replaceState(Fe,"",$,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl($+nt(ie)),Fe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){var ie,Fe;null===(Fe=(ie=this._locationStrategy).historyGo)||void 0===Fe||Fe.call(ie,$)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)})),()=>{var ie;const Fe=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(Fe,1),0===this._urlChangeListeners.length&&(null===(ie=this._urlChangeSubscription)||void 0===ie||ie.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",ie){this._urlChangeListeners.forEach(Fe=>Fe($,ie))}subscribe($,ie,Fe){return this._subject.subscribe({next:$,error:ie,complete:Fe})}}return L.normalizeQueryParams=nt,L.joinWithSlash=Ue,L.stripTrailingSlash=Qe,L.\u0275fac=function($){return new($||L)(a.LFG(Oe))},L.\u0275prov=a.Yz7({token:L,factory:function(){return function yt(){return new ht((0,a.LFG)(Oe))}()},providedIn:"root"}),L})();function je(L){return L.replace(/\/index.html$/,"")}function ui(L,X){X=encodeURIComponent(X);for(const $ of L.split(";")){const ie=$.indexOf("="),[Fe,Dt]=-1==ie?[$,""]:[$.slice(0,ie),$.slice(ie+1)];if(Fe.trim()===X)return decodeURIComponent(Dt)}return null}let Gi=(()=>{class L{constructor($,ie,Fe,Dt){this._iterableDiffers=$,this._keyValueDiffers=ie,this._ngEl=Fe,this._renderer=Dt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass($){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof $?$.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass($){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof $?$.split(/\s+/):$,this._rawClass&&((0,a.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const $=this._iterableDiffer.diff(this._rawClass);$&&this._applyIterableChanges($)}else if(this._keyValueDiffer){const $=this._keyValueDiffer.diff(this._rawClass);$&&this._applyKeyValueChanges($)}}_applyKeyValueChanges($){$.forEachAddedItem(ie=>this._toggleClass(ie.key,ie.currentValue)),$.forEachChangedItem(ie=>this._toggleClass(ie.key,ie.currentValue)),$.forEachRemovedItem(ie=>{ie.previousValue&&this._toggleClass(ie.key,!1)})}_applyIterableChanges($){$.forEachAddedItem(ie=>{if("string"!=typeof ie.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,a.AaK)(ie.item)}`);this._toggleClass(ie.item,!0)}),$.forEachRemovedItem(ie=>this._toggleClass(ie.item,!1))}_applyClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ie=>this._toggleClass(ie,!0)):Object.keys($).forEach(ie=>this._toggleClass(ie,!!$[ie])))}_removeClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ie=>this._toggleClass(ie,!1)):Object.keys($).forEach(ie=>this._toggleClass(ie,!1)))}_toggleClass($,ie){($=$.trim())&&$.split(/\s+/g).forEach(Fe=>{ie?this._renderer.addClass(this._ngEl.nativeElement,Fe):this._renderer.removeClass(this._ngEl.nativeElement,Fe)})}}return L.\u0275fac=function($){return new($||L)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},L.\u0275dir=a.lG2({type:L,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),L})();class fi{constructor(X,$,ie,Fe){this.$implicit=X,this.ngForOf=$,this.index=ie,this.count=Fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ti=(()=>{class L{constructor($,ie,Fe){this._viewContainer=$,this._template=ie,this._differs=Fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const ie=this._viewContainer;$.forEachOperation((Fe,Dt,Lt)=>{if(null==Fe.previousIndex)ie.createEmbeddedView(this._template,new fi(Fe.item,this._ngForOf,-1,-1),null===Lt?void 0:Lt);else if(null==Lt)ie.remove(null===Dt?void 0:Dt);else if(null!==Dt){const Rn=ie.get(Dt);ie.move(Rn,Lt),Li(Rn,Fe)}});for(let Fe=0,Dt=ie.length;Fe<Dt;Fe++){const Rn=ie.get(Fe).context;Rn.index=Fe,Rn.count=Dt,Rn.ngForOf=this._ngForOf}$.forEachIdentityChange(Fe=>{Li(ie.get(Fe.currentIndex),Fe)})}static ngTemplateContextGuard($,ie){return!0}}return L.\u0275fac=function($){return new($||L)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},L.\u0275dir=a.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),L})();function Li(L,X){L.context.$implicit=X.item}let Ce=(()=>{class L{constructor($,ie){this._viewContainer=$,this._context=new Ze,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){it("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){it("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,ie){return!0}}return L.\u0275fac=function($){return new($||L)(a.Y36(a.s_b),a.Y36(a.Rgc))},L.\u0275dir=a.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),L})();class Ze{constructor(){this.$implicit=null,this.ngIf=null}}function it(L,X){if(X&&!X.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,a.AaK)(X)}'.`)}let vn=(()=>{class L{constructor($,ie,Fe){this._ngEl=$,this._differs=ie,this._renderer=Fe,this._ngStyle=null,this._differ=null}set ngStyle($){this._ngStyle=$,!this._differ&&$&&(this._differ=this._differs.find($).create())}ngDoCheck(){if(this._differ){const $=this._differ.diff(this._ngStyle);$&&this._applyChanges($)}}_setStyle($,ie){const[Fe,Dt]=$.split("."),Lt=-1===Fe.indexOf("-")?void 0:a.JOm.DashCase;null!=ie?this._renderer.setStyle(this._ngEl.nativeElement,Fe,Dt?`${ie}${Dt}`:ie,Lt):this._renderer.removeStyle(this._ngEl.nativeElement,Fe,Lt)}_applyChanges($){$.forEachRemovedItem(ie=>this._setStyle(ie.key,null)),$.forEachAddedItem(ie=>this._setStyle(ie.key,ie.currentValue)),$.forEachChangedItem(ie=>this._setStyle(ie.key,ie.currentValue))}}return L.\u0275fac=function($){return new($||L)(a.Y36(a.SBq),a.Y36(a.aQg),a.Y36(a.Qsj))},L.\u0275dir=a.lG2({type:L,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),L})(),rr=(()=>{class L{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const ie=this._viewContainerRef;if(this._viewRef&&ie.remove(ie.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Fe,ngTemplateOutletContext:Dt,ngTemplateOutletInjector:Lt}=this;this._viewRef=ie.createEmbeddedView(Fe,Dt,Lt?{injector:Lt}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return L.\u0275fac=function($){return new($||L)(a.Y36(a.s_b))},L.\u0275dir=a.lG2({type:L,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),L})(),Wi=(()=>{class L{}return L.\u0275fac=function($){return new($||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({}),L})();const us="browser";function es(L){return"server"===L}let Ds=(()=>{class L{}return L.\u0275prov=(0,a.Yz7)({token:L,providedIn:"root",factory:()=>new Rs((0,a.LFG)(ve),window)}),L})();class Rs{constructor(X,$){this.document=X,this.window=$,this.offset=()=>[0,0]}setOffset(X){this.offset=Array.isArray(X)?()=>X:X}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(X){this.supportsScrolling()&&this.window.scrollTo(X[0],X[1])}scrollToAnchor(X){if(!this.supportsScrolling())return;const $=function Pi(L,X){const $=L.getElementById(X)||L.getElementsByName(X)[0];if($)return $;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const ie=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let Fe=ie.currentNode;for(;Fe;){const Dt=Fe.shadowRoot;if(Dt){const Lt=Dt.getElementById(X)||Dt.querySelector(`[name="${X}"]`);if(Lt)return Lt}Fe=ie.nextNode()}}return null}(this.document,X);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(X){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=X)}}scrollToElement(X){const $=X.getBoundingClientRect(),ie=$.left+this.window.pageXOffset,Fe=$.top+this.window.pageYOffset,Dt=this.offset();this.window.scrollTo(ie-Dt[0],Fe-Dt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const X=ci(this.window.history)||ci(Object.getPrototypeOf(this.window.history));return!(!X||!X.writable&&!X.set)}catch(X){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(X){return!1}}}function ci(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class Xs{}},5e3:(on,ut,H)=>{"use strict";H.d(ut,{$8M:()=>kl,$Z:()=>Gp,AFp:()=>AE,ALo:()=>K0,AaK:()=>ge,AsE:()=>Ny,BQk:()=>np,CHM:()=>Os,CRH:()=>sE,CZH:()=>r_,CqO:()=>$c,D6c:()=>FI,EJc:()=>Qw,EpF:()=>Ng,F$t:()=>sp,F4k:()=>yy,FYo:()=>Q,FiY:()=>Yi,G48:()=>_I,Gf:()=>rE,GfV:()=>_n,GkF:()=>rp,Gpc:()=>de,Hsn:()=>Lg,JOm:()=>zl,KtG:()=>fs,LFG:()=>_e,LSH:()=>Aa,Lbi:()=>Yw,Lck:()=>jb,MMx:()=>xv,NdJ:()=>sh,OlP:()=>Qn,Oqu:()=>af,PXZ:()=>hI,Q6J:()=>kg,QGY:()=>ih,QP$:()=>dr,Qsj:()=>ce,R0b:()=>$u,RDi:()=>Hu,Rgc:()=>dm,SBq:()=>g,Sil:()=>Jw,Suo:()=>iE,TTD:()=>Bi,TgZ:()=>Kl,VKq:()=>H0,X6Q:()=>yI,XFs:()=>qt,Xpm:()=>Gt,Xts:()=>Mu,Y36:()=>Lc,YKP:()=>P0,YNc:()=>my,Yjl:()=>pt,Yz7:()=>gt,Z0I:()=>cn,ZZ4:()=>Jv,_Bn:()=>k0,_UZ:()=>gc,_Vd:()=>Dl,_c5:()=>PI,_uU:()=>vd,aQg:()=>e0,c2e:()=>Kw,cJS:()=>Ut,cg1:()=>tm,dDg:()=>lI,dqk:()=>gr,eFA:()=>UE,ekj:()=>cp,eoX:()=>BE,f3M:()=>wt,g9A:()=>ME,h0i:()=>gp,hGG:()=>NI,hij:()=>zg,iGM:()=>nE,ifc:()=>St,ip1:()=>SE,jDz:()=>F0,kL8:()=>Wy,lG2:()=>He,lcZ:()=>Z0,lnq:()=>qg,lqb:()=>ra,lri:()=>FE,n5z:()=>Rl,oAB:()=>jn,oxw:()=>by,q4F:()=>qn,qLn:()=>ad,qOj:()=>Dg,qZA:()=>Pg,rWj:()=>LE,sBO:()=>vI,sIi:()=>md,s_b:()=>e_,soG:()=>i_,tb:()=>RE,tp0:()=>Jo,uIk:()=>Xf,vHH:()=>Qe,vpe:()=>zc,wAp:()=>Hr,xp6:()=>xm,ynx:()=>tp,z2F:()=>s_,zSh:()=>hu,zs3:()=>Fc});var a=H(8929),se=H(2654),z=H(6498),Le=H(6787),Ne=H(2474);function fe(n){for(let r in n)if(n[r]===fe)return r;throw Error("Could not find renamed property on target object.")}function ve(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function be(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ue=fe({__forward_ref__:fe});function de(n){return n.__forward_ref__=de,n.toString=function(){return ge(this())},n}function oe(n){return pe(n)?n():n}function pe(n){return"function"==typeof n&&n.hasOwnProperty(ue)&&n.__forward_ref__===de}class Qe extends Error{constructor(r,s){super(function nt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Oe(n){return"string"==typeof n?n:null==n?"":String(n)}function yt(n,r){throw new Qe(-201,!1)}function ot(n,r){null==n&&function De(n,r,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function gt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ut(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nt(n){return un(n,vr)||un(n,Wr)}function cn(n){return null!==Nt(n)}function un(n,r){return n.hasOwnProperty(r)?n[r]:null}function En(n){return n&&(n.hasOwnProperty(Tr)||n.hasOwnProperty(er))?n[Tr]:null}const vr=fe({\u0275prov:fe}),Tr=fe({\u0275inj:fe}),Wr=fe({ngInjectableDef:fe}),er=fe({ngInjectorDef:fe});var qt=(()=>((qt=qt||{})[qt.Default=0]="Default",qt[qt.Host=1]="Host",qt[qt.Self=2]="Self",qt[qt.SkipSelf=4]="SkipSelf",qt[qt.Optional=8]="Optional",qt))();let Yn;function Un(n){const r=Yn;return Yn=n,r}function nr(n,r,s){const l=Nt(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&qt.Optional?null:void 0!==r?r:void yt(ge(n))}function an(n){return{toString:n}.toString()}var ur=(()=>((ur=ur||{})[ur.OnPush=0]="OnPush",ur[ur.Default=1]="Default",ur))(),St=(()=>{return(n=St||(St={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",St;var n})();const gr=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),Lr={},Pn=[],ki=fe({\u0275cmp:fe}),On=fe({\u0275dir:fe}),Or=fe({\u0275pipe:fe}),cr=fe({\u0275mod:fe}),jr=fe({\u0275fac:fe}),ai=fe({__NG_ELEMENT_ID__:fe});let wn=0;function Gt(n){return an(()=>{const s=!0===n.standalone,l={},p={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ur.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Pn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||St.Emulated,id:"c"+wn++,styles:n.styles||Pn,_:null,setInput:null,schemas:n.schemas||null,tView:null},v=n.dependencies,T=n.features;return p.inputs=Pe(n.inputs,l),p.outputs=Pe(n.outputs),T&&T.forEach(O=>O(p)),p.directiveDefs=v?()=>("function"==typeof v?v():v).map(Nn).filter(xn):null,p.pipeDefs=v?()=>("function"==typeof v?v():v).map(dn).filter(xn):null,p})}function Nn(n){return et(n)||hn(n)}function xn(n){return null!==n}function jn(n){return an(()=>({type:n.type,bootstrap:n.bootstrap||Pn,declarations:n.declarations||Pn,imports:n.imports||Pn,exports:n.exports||Pn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Pe(n,r){if(null==n)return Lr;const s={};for(const l in n)if(n.hasOwnProperty(l)){let p=n[l],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),s[p]=l,r&&(r[p]=v)}return s}const He=Gt;function pt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function et(n){return n[ki]||null}function hn(n){return n[On]||null}function dn(n){return n[Or]||null}function dr(n){const r=et(n)||hn(n)||dn(n);return null!==r&&r.standalone}function Er(n,r){const s=n[cr]||null;if(!s&&!0===r)throw new Error(`Type ${ge(n)} does not have '\u0275mod' property.`);return s}function it(n){return Array.isArray(n)&&"object"==typeof n[1]}function bt(n){return Array.isArray(n)&&!0===n[1]}function ye(n){return 0!=(8&n.flags)}function qe(n){return 2==(2&n.flags)}function _t(n){return 1==(1&n.flags)}function Rt(n){return null!==n.template}function zt(n){return 0!=(256&n[2])}function Qi(n,r){return n.hasOwnProperty(jr)?n[jr]:null}class Si{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function Bi(){return Cs}function Cs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Gs),Qs}function Qs(){const n=Ji(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Lr)n.previous=r;else for(let l in r)s[l]=r[l];n.current=null,this.ngOnChanges(r)}}function Gs(n,r,s,l){const p=Ji(n)||function Wi(n,r){return n[Xi]=r}(n,{previous:Lr,current:null}),v=p.current||(p.current={}),T=p.previous,O=this.declaredInputs[s],B=T[O];v[O]=new Si(B&&B.currentValue,r,T===Lr),n[l]=r}Bi.ngInherit=!0;const Xi="__ngSimpleChanges__";function Ji(n){return n[Xi]||null}function Kr(n){for(;Array.isArray(n);)n=n[0];return n}function ci(n,r){return Kr(r[n])}function Pi(n,r){return Kr(r[n.index])}function Xs(n,r){return n.data[r]}function Cr(n,r){const s=r[n];return it(s)?s:s[0]}function hs(n){return 64==(64&n[2])}function Fr(n,r){return null==r?null:n[r]}function Ws(n){n[18]=0}function xr(n,r){n[5]+=r;let s=n,l=n[3];for(;null!==l&&(1===r&&1===s[5]||-1===r&&0===s[5]);)l[5]+=r,s=l,l=l[3]}const Hn={lFrame:Ai(null),bindingsEnabled:!0};function Jr(){return Hn.bindingsEnabled}function Zt(){return Hn.lFrame.lView}function Dr(){return Hn.lFrame.tView}function Os(n){return Hn.lFrame.contextLView=n,n[8]}function fs(n){return Hn.lFrame.contextLView=null,n}function Ci(){let n=hr();for(;null!==n&&64===n.type;)n=n.parent;return n}function hr(){return Hn.lFrame.currentTNode}function ns(n,r){const s=Hn.lFrame;s.currentTNode=n,s.isParent=r}function eo(){return Hn.lFrame.isParent}function G(){Hn.lFrame.isParent=!1}function y(){const n=Hn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function R(){return Hn.lFrame.bindingIndex}function ke(){return Hn.lFrame.bindingIndex++}function It(n){const r=Hn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Mn(n,r){const s=Hn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Zn(r)}function Zn(n){Hn.lFrame.currentDirectiveIndex=n}function ei(){return Hn.lFrame.currentQueryIndex}function lr(n){Hn.lFrame.currentQueryIndex=n}function Di(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function $i(n,r,s){if(s&qt.SkipSelf){let p=r,v=n;for(;!(p=p.parent,null!==p||s&qt.Host||(p=Di(v),null===p||(v=v[15],10&p.type))););if(null===p)return!1;r=p,n=v}const l=Hn.lFrame=zi();return l.currentTNode=r,l.lView=n,!0}function Ls(n){const r=zi(),s=n[1];Hn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function zi(){const n=Hn.lFrame,r=null===n?null:n.child;return null===r?Ai(n):r}function Ai(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function io(){const n=Hn.lFrame;return Hn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const L=io;function X(){const n=io();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Fe(){return Hn.lFrame.selectedIndex}function Dt(n){Hn.lFrame.selectedIndex=n}function Lt(){const n=Hn.lFrame;return Xs(n.tView,n.selectedIndex)}function yi(n,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const v=n.data[s].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:O,ngAfterViewInit:B,ngAfterViewChecked:K,ngOnDestroy:le}=v;T&&(n.contentHooks||(n.contentHooks=[])).push(-s,T),O&&((n.contentHooks||(n.contentHooks=[])).push(s,O),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,O)),B&&(n.viewHooks||(n.viewHooks=[])).push(-s,B),K&&((n.viewHooks||(n.viewHooks=[])).push(s,K),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,K)),null!=le&&(n.destroyHooks||(n.destroyHooks=[])).push(s,le)}}function Ui(n,r,s){Ro(n,r,3,s)}function mo(n,r,s,l){(3&n[2])===s&&Ro(n,r,s,l)}function Mo(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Ro(n,r,s,l){const v=null!=l?l:-1,T=r.length-1;let O=0;for(let B=void 0!==l?65535&n[18]:0;B<T;B++)if("number"==typeof r[B+1]){if(O=r[B],null!=l&&O>=l)break}else r[B]<0&&(n[18]+=65536),(O<v||-1==v)&&(qi(n,s,r,B),n[18]=(4294901760&n[18])+B+2),B++}function qi(n,r,s,l){const p=s[l]<0,v=s[l+1],O=n[p?-s[l]:s[l]];if(p){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{v.call(O)}finally{}}}else try{v.call(O)}finally{}}class so{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function Ko(n,r,s){let l=0;for(;l<s.length;){const p=s[l];if("number"==typeof p){if(0!==p)break;l++;const v=s[l++],T=s[l++],O=s[l++];n.setAttribute(r,T,O,v)}else{const v=p,T=s[++l];Wa(v)?n.setProperty(r,v,T):n.setAttribute(r,v,T),l++}}return l}function ks(n){return 3===n||4===n||6===n}function Wa(n){return 64===n.charCodeAt(0)}function Oa(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const p=r[l];"number"==typeof p?s=p:0===s||Zo(n,s,p,null,-1===s||2===s?r[++l]:null)}}return n}function Zo(n,r,s,l,p){let v=0,T=n.length;if(-1===r)T=-1;else for(;v<n.length;){const O=n[v++];if("number"==typeof O){if(O===r){T=-1;break}if(O>r){T=v-1;break}}}for(;v<n.length;){const O=n[v];if("number"==typeof O)break;if(O===s){if(null===l)return void(null!==p&&(n[v+1]=p));if(l===n[v+1])return void(n[v+2]=p)}v++,null!==l&&v++,null!==p&&v++}-1!==T&&(n.splice(T,0,r),v=T+1),n.splice(v++,0,s),null!==l&&n.splice(v++,0,l),null!==p&&n.splice(v++,0,p)}function Xl(n){return-1!==n}function xs(n){return 32767&n}function za(n,r){let s=function $o(n){return n>>16}(n),l=r;for(;s>0;)l=l[15],s--;return l}let ca=!0;function Ei(n){const r=ca;return ca=n,r}let ms=0;const bi={};function oo(n,r){const s=vl(n,r);if(-1!==s)return s;const l=r[1];l.firstCreatePass&&(n.injectorIndex=r.length,_o(l.data,n),_o(r,null),_o(l.blueprint,null));const p=sn(n,r),v=n.injectorIndex;if(Xl(p)){const T=xs(p),O=za(p,r),B=O[1].data;for(let K=0;K<8;K++)r[v+K]=O[T+K]|B[T+K]}return r[v+8]=p,v}function _o(n,r){n.push(0,0,0,0,0,0,0,0,r)}function vl(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function sn(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,p=r;for(;null!==p;){if(l=pa(p),null===l)return-1;if(s++,p=p[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function Ri(n,r,s){!function to(n,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(ai)&&(l=s[ai]),null==l&&(l=s[ai]=ms++);const p=255&l;r.data[n+(p>>5)]|=1<<p}(n,r,s)}function fa(n,r,s){if(s&qt.Optional||void 0!==n)return n;yt()}function $n(n,r,s,l){if(s&qt.Optional&&void 0===l&&(l=null),0==(s&(qt.Self|qt.Host))){const p=n[9],v=Un(void 0);try{return p?p.get(r,l,s&qt.Optional):nr(r,l,s&qt.Optional)}finally{Un(v)}}return fa(l,0,s)}function ir(n,r,s,l=qt.Default,p){if(null!==n){if(1024&r[2]){const T=function Ya(n,r,s,l,p){let v=n,T=r;for(;null!==v&&null!==T&&1024&T[2]&&!(256&T[2]);){const O=sl(v,T,s,l|qt.Self,bi);if(O!==bi)return O;let B=v.parent;if(!B){const K=T[21];if(K){const le=K.get(s,bi,l);if(le!==bi)return le}B=pa(T),T=T[15]}v=B}return p}(n,r,s,l,bi);if(T!==bi)return T}const v=sl(n,r,s,l,bi);if(v!==bi)return v}return $n(r,s,l,p)}function sl(n,r,s,l,p){const v=function ys(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(ai)?n[ai]:void 0;return"number"==typeof r?r>=0?255&r:Ml:r}(s);if("function"==typeof v){if(!$i(r,n,l))return l&qt.Host?fa(p,0,l):$n(r,s,l,p);try{const T=v(l);if(null!=T||l&qt.Optional)return T;yt()}finally{L()}}else if("number"==typeof v){let T=null,O=vl(n,r),B=-1,K=l&qt.Host?r[16][6]:null;for((-1===O||l&qt.SkipSelf)&&(B=-1===O?sn(n,r):r[O+8],-1!==B&&Ca(l,!1)?(T=r[1],O=xs(B),r=za(B,r)):O=-1);-1!==O;){const le=r[1];if(ol(v,O,le.data)){const Se=An(O,r,s,T,l,K);if(Se!==bi)return Se}B=r[O+8],-1!==B&&Ca(l,r[1].data[O+8]===K)&&ol(v,O,r)?(T=le,O=xs(B),r=za(B,r)):O=-1}}return p}function An(n,r,s,l,p,v){const T=r[1],O=T.data[n+8],le=Ft(O,T,s,null==l?qe(O)&&ca:l!=T&&0!=(3&O.type),p&qt.Host&&v===O);return null!==le?en(r,T,le,O):bi}function Ft(n,r,s,l,p){const v=n.providerIndexes,T=r.data,O=1048575&v,B=n.directiveStart,le=v>>20,lt=p?O+le:n.directiveEnd;for(let Tt=l?O:O+le;Tt<lt;Tt++){const Jt=T[Tt];if(Tt<B&&s===Jt||Tt>=B&&Jt.type===s)return Tt}if(p){const Tt=T[B];if(Tt&&Rt(Tt)&&Tt.type===s)return B}return null}function en(n,r,s,l){let p=n[s];const v=r.data;if(function Bs(n){return n instanceof so}(p)){const T=p;T.resolving&&function dt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Qe(-200,`Circular dependency in DI detected for ${n}${s}`)}(function we(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Oe(n)}(v[s]));const O=Ei(T.canSeeViewProviders);T.resolving=!0;const B=T.injectImpl?Un(T.injectImpl):null;$i(n,l,qt.Default);try{p=n[s]=T.factory(void 0,v,n,l),r.firstCreatePass&&s>=l.directiveStart&&function rs(n,r,s){const{ngOnChanges:l,ngOnInit:p,ngDoCheck:v}=r.type.prototype;if(l){const T=Cs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,T),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,T)}p&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,p),v&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v))}(s,v[s],r)}finally{null!==B&&Un(B),Ei(O),T.resolving=!1,L()}}return p}function ol(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ca(n,r){return!(n&qt.Self||n&qt.Host&&r)}class Da{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return ir(this._tNode,this._lView,r,l,s)}}function Ml(){return new Da(Ci(),Zt())}function Rl(n){return an(()=>{const r=n.prototype.constructor,s=r[jr]||Ol(r),l=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==l;){const v=p[jr]||Ol(p);if(v&&v!==s)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function Ol(n){return pe(n)?()=>{const r=Ol(oe(n));return r&&r()}:Qi(n)}function pa(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function kl(n){return function ha(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const l=s.length;let p=0;for(;p<l;){const v=s[p];if(ks(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<l&&"string"==typeof s[p];)p++;else{if(v===r)return s[p+1];p+=2}}}return null}(Ci(),n)}const Oo="__parameters__";function Pr(n,r,s){return an(()=>{const l=function ka(n){return function(...s){if(n){const l=n(...s);for(const p in l)this[p]=l[p]}}}(r);function p(...v){if(this instanceof p)return l.apply(this,v),this;const T=new p(...v);return O.annotation=T,O;function O(B,K,le){const Se=B.hasOwnProperty(Oo)?B[Oo]:Object.defineProperty(B,Oo,{value:[]})[Oo];for(;Se.length<=le;)Se.push(null);return(Se[le]=Se[le]||[]).push(T),B}}return s&&(p.prototype=Object.create(s.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class Qn{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=gt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function lo(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(r===n&&(r=n.slice(0,s)),lo(l,r)):r!==n&&r.push(l)}return r}function Ns(n,r){n.forEach(s=>Array.isArray(s)?Ns(s,r):r(s))}function ll(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function At(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Po(n,r){const s=[];for(let l=0;l<n;l++)s.push(r);return s}function Vs(n,r,s){let l=Na(n,r);return l>=0?n[1|l]=s:(l=~l,function ga(n,r,s,l){let p=n.length;if(p==r)n.push(s,l);else if(1===p)n.push(l,n[0]),n[0]=s;else{for(p--,n.push(n[p-1],n[p]);p>r;)n[p]=n[p-2],p--;n[r]=s,n[r+1]=l}}(n,l,r,s)),l}function Za(n,r){const s=Na(n,r);if(s>=0)return n[1|s]}function Na(n,r){return function qs(n,r,s){let l=0,p=n.length>>s;for(;p!==l;){const v=l+(p-l>>1),T=n[v<<s];if(r===T)return v<<s;T>r?p=v:l=v+1}return~(p<<s)}(n,r,1)}const C={},N="__NG_DI_FLAG__",j="ngTempTokenPath",Ae=/\n/gm,Ct="__source";let P;function U(n){const r=P;return P=n,r}function J(n,r=qt.Default){if(void 0===P)throw new Qe(-203,!1);return null===P?nr(n,void 0,r):P.get(n,r&qt.Optional?null:void 0,r)}function _e(n,r=qt.Default){return(function Qr(){return Yn}()||J)(oe(n),r)}function wt(n,r=qt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),_e(n,r)}function Yt(n){const r=[];for(let s=0;s<n.length;s++){const l=oe(n[s]);if(Array.isArray(l)){if(0===l.length)throw new Qe(900,!1);let p,v=qt.Default;for(let T=0;T<l.length;T++){const O=l[T],B=Ln(O);"number"==typeof B?-1===B?p=O.token:v|=B:p=O}r.push(_e(p,v))}else r.push(_e(l))}return r}function gn(n,r){return n[N]=r,n.prototype[N]=r,n}function Ln(n){return n[N]}const Yi=gn(Pr("Optional"),8),Jo=gn(Pr("SkipSelf"),4);let Dc;function Hu(n){Dc=n}class ya{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ho(n){return n instanceof ya?n.changingThisBreaksApplicationSecurity:n}const ou=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Es=(()=>((Es=Es||{})[Es.NONE=0]="NONE",Es[Es.HTML=1]="HTML",Es[Es.STYLE=2]="STYLE",Es[Es.SCRIPT=3]="SCRIPT",Es[Es.URL=4]="URL",Es[Es.RESOURCE_URL=5]="RESOURCE_URL",Es))();function Aa(n){const r=function gi(){const n=Zt();return n&&n[12]}();return r?r.sanitize(Es.URL,n)||"":function iu(n,r){const s=function na(n){return n instanceof ya&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?Ho(n):function Sc(n){return(n=String(n)).match(ou)?n:"unsafe:"+n}(Oe(n))}const Mu=new Qn("ENVIRONMENT_INITIALIZER"),Jc=new Qn("INJECTOR",-1),pl=new Qn("INJECTOR_DEF_TYPES");class ed{get(r,s=C){if(s===C){const l=new Error(`NullInjectorError: No provider for ${ge(r)}!`);throw l.name="NullInjectorError",l}return s}}function Lo(...n){return{\u0275providers:Ru(0,n)}}function Ru(n,...r){const s=[],l=new Set;let p;return Ns(r,v=>{const T=v;$l(T,s,[],l)&&(p||(p=[]),p.push(T))}),void 0!==p&&Ys(p,s),s}function Ys(n,r){for(let s=0;s<n.length;s++){const{providers:p}=n[s];Ns(p,v=>{r.push(v)})}}function $l(n,r,s,l){if(!(n=oe(n)))return!1;let p=null,v=En(n);const T=!v&&et(n);if(v||T){if(T&&!T.standalone)return!1;p=n}else{const B=n.ngModule;if(v=En(B),!v)return!1;p=B}const O=l.has(p);if(T){if(O)return!1;if(l.add(p),T.dependencies){const B="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const K of B)$l(K,r,s,l)}}else{if(!v)return!1;{if(null!=v.imports&&!O){let K;l.add(p);try{Ns(v.imports,le=>{$l(le,r,s,l)&&(K||(K=[]),K.push(le))})}finally{}void 0!==K&&Ys(K,r)}if(!O){const K=Qi(p)||(()=>new p);r.push({provide:p,useFactory:K,deps:Pn},{provide:pl,useValue:p,multi:!0},{provide:Mu,useValue:()=>_e(p),multi:!0})}const B=v.providers;null==B||O||Ns(B,le=>{r.push(le)})}}return p!==n&&void 0!==n.providers}const uu=fe({provide:String,useValue:fe});function wo(n){return null!==n&&"object"==typeof n&&uu in n}function Ur(n){return"function"==typeof n}const hu=new Qn("Set Injector scope."),gl={},Qu={};let Cl;function Xu(){return void 0===Cl&&(Cl=new ed),Cl}class ra{}class Mc extends ra{constructor(r,s,l,p){super(),this.parent=s,this.source=l,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ws(r,T=>this.processProvider(T)),this.records.set(Jc,Ks(void 0,this)),p.has("environment")&&this.records.set(ra,Ks(void 0,this));const v=this.records.get(hu);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(pl.multi,Pn,qt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=U(this),l=Un(void 0);try{return r()}finally{U(s),Un(l)}}get(r,s=C,l=qt.Default){this.assertNotDestroyed();const p=U(this),v=Un(void 0);try{if(!(l&qt.SkipSelf)){let O=this.records.get(r);if(void 0===O){const B=function nd(n){return"function"==typeof n||"object"==typeof n&&n instanceof Qn}(r)&&Nt(r);O=B&&this.injectableDefInScope(B)?Ks(td(r),gl):null,this.records.set(r,O)}if(null!=O)return this.hydrate(r,O)}return(l&qt.Self?Xu():this.parent).get(r,s=l&qt.Optional&&s===C?null:s)}catch(T){if("NullInjectorError"===T.name){if((T[j]=T[j]||[]).unshift(ge(r)),p)throw T;return function fr(n,r,s,l){const p=n[j];throw r[Ct]&&p.unshift(r[Ct]),n.message=function $r(n,r,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let p=ge(r);if(Array.isArray(r))p=r.map(ge).join(" -> ");else if("object"==typeof r){let v=[];for(let T in r)if(r.hasOwnProperty(T)){let O=r[T];v.push(T+":"+("string"==typeof O?JSON.stringify(O):ge(O)))}p=`{${v.join(", ")}}`}return`${s}${l?"("+l+")":""}[${p}]: ${n.replace(Ae,"\n  ")}`}("\n"+n.message,p,s,l),n.ngTokenPath=p,n[j]=null,n}(T,r,"R3InjectorError",this.source)}throw T}finally{Un(v),U(p)}}resolveInjectorInitializers(){const r=U(this),s=Un(void 0);try{const l=this.get(Mu.multi,Pn,qt.Self);for(const p of l)p()}finally{U(r),Un(s)}}toString(){const r=[],s=this.records;for(const l of s.keys())r.push(ge(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Qe(205,!1)}processProvider(r){let s=Ur(r=oe(r))?r:oe(r&&r.provide);const l=function Ju(n){return wo(n)?Ks(void 0,n.useValue):Ks(fu(n),gl)}(r);if(Ur(r)||!0!==r.multi)this.records.get(s);else{let p=this.records.get(s);p||(p=Ks(void 0,gl,!0),p.factory=()=>Yt(p.multi),this.records.set(s,p)),s=r,p.multi.push(r)}this.records.set(s,l)}hydrate(r,s){return s.value===gl&&(s.value=Qu,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ul(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=oe(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function td(n){const r=Nt(n),s=null!==r?r.factory:Qi(n);if(null!==s)return s;if(n instanceof Qn)throw new Qe(204,!1);if(n instanceof Function)return function Ou(n){const r=n.length;if(r>0)throw Po(r,"?"),new Qe(204,!1);const s=function Jn(n){const r=n&&(n[vr]||n[Wr]);if(r){const s=function yn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Qe(204,!1)}function fu(n,r,s){let l;if(Ur(n)){const p=oe(n);return Qi(p)||td(p)}if(wo(n))l=()=>oe(n.useValue);else if(function cu(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Yt(n.deps||[]));else if(function no(n){return!(!n||!n.useExisting)}(n))l=()=>_e(oe(n.useExisting));else{const p=oe(n&&(n.useClass||n.provide));if(!function Rc(n){return!!n.deps}(n))return Qi(p)||td(p);l=()=>new p(...Yt(n.deps))}return l}function Ks(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function ml(n){return!!n.\u0275providers}function ws(n,r){for(const s of n)Array.isArray(s)?ws(s,r):ml(s)?ws(s.\u0275providers,r):r(s)}class ec{}class rd{resolveComponentFactory(r){throw function tc(n){const r=Error(`No component factory found for ${ge(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Dl=(()=>{class n{}return n.NULL=new rd,n})();function Rd(){return D(Ci(),Zt())}function D(n,r){return new g(Pi(n,r))}let g=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Rd,n})();function E(n){return n instanceof g?n.nativeElement:n}class Q{}let ce=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ct(){const n=Zt(),s=Cr(Ci().index,n);return(it(s)?s:n)[11]}(),n})(),jt=(()=>{class n{}return n.\u0275prov=gt({token:n,providedIn:"root",factory:()=>null}),n})();class _n{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const qn=new _n("14.2.7"),Rr={};function Eh(n){return n.ngOriginalError}class ad{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Eh(r);for(;s&&Eh(s);)s=Eh(s);return s||null}}const _f=new Map;let Cp=0;const po="__ngContext__";function ss(n,r){it(r)?(n[po]=r[20],function Dp(n){_f.set(n[20],n)}(r)):n[po]=r}function Wl(n){return n instanceof Function?n():n}var zl=(()=>((zl=zl||{})[zl.Important=1]="Important",zl[zl.DashCase=2]="DashCase",zl))();function Sh(n,r){return undefined(n,r)}function oc(n){const r=n[3];return bt(r)?r[3]:r}function ud(n){return Cf(n[13])}function ac(n){return Cf(n[4])}function Cf(n){for(;null!==n&&!bt(n);)n=n[4];return n}function u(n,r,s,l,p){if(null!=l){let v,T=!1;bt(l)?v=l:it(l)&&(T=!0,l=l[0]);const O=Kr(l);0===n&&null!==s?null==p?gm(r,s,O):lc(r,s,O,p||null,!0):1===n&&null!==s?lc(r,s,O,p||null,!0):2===n?function vm(n,r,s){const l=Ah(n,r);l&&function u_(n,r,s,l){n.removeChild(r,s,l)}(n,l,r,s)}(r,O,T):3===n&&r.destroyNode(O),null!=v&&function d_(n,r,s,l,p){const v=s[7];v!==Kr(s)&&u(r,n,l,v,p);for(let O=10;O<s.length;O++){const B=s[O];cd(B[1],B,n,r,l,v)}}(r,n,v,s,p)}}function F(n,r,s){return n.createElement(r,s)}function Kt(n,r){const s=n[9],l=s.indexOf(r),p=r[3];512&r[2]&&(r[2]&=-513,xr(p,-1)),s.splice(l,1)}function kn(n,r){if(n.length<=10)return;const s=10+r,l=n[s];if(l){const p=l[17];null!==p&&p!==n&&Kt(p,l),r>0&&(n[s-1][4]=l[4]);const v=At(n,10+r);!function W(n,r){cd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(l[1],l);const T=v[19];null!==T&&T.detachView(v[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function sr(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&cd(n,r,s,3,null,null),function Ge(n){let r=n[13];if(!r)return xi(n[1],n);for(;r;){let s=null;if(it(r))s=r[13];else{const l=r[10];l&&(s=l)}if(!s){for(;r&&!r[4]&&r!==n;)it(r)&&xi(r[1],r),r=r[3];null===r&&(r=n),it(r)&&xi(r[1],r),s=r&&r[4]}r=s}}(r)}}function xi(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Sl(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const p=r[s[l]];if(!(p instanceof so)){const v=s[l+1];if(Array.isArray(v))for(let T=0;T<v.length;T+=2){const O=p[v[T]],B=v[T+1];try{B.call(O)}finally{}}else try{v.call(p)}finally{}}}}(n,r),function Zs(n,r){const s=n.cleanup,l=r[7];let p=-1;if(null!==s)for(let v=0;v<s.length-1;v+=2)if("string"==typeof s[v]){const T=s[v+1],O="function"==typeof T?T(r):Kr(r[T]),B=l[p=s[v+2]],K=s[v+3];"boolean"==typeof K?O.removeEventListener(s[v],B,K):K>=0?l[p=K]():l[p=-K].unsubscribe(),v+=2}else{const T=l[p=s[v+1]];s[v].call(T)}if(null!==l){for(let v=p+1;v<l.length;v++)(0,l[v])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&bt(r[3])){s!==r[3]&&Kt(s,r);const l=r[19];null!==l&&l.detachView(n)}!function Ef(n){_f.delete(n[20])}(r)}}function sa(n,r,s){return function Nu(n,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[0];if(2&l.flags){const p=n.data[l.directiveStart].encapsulation;if(p===St.None||p===St.Emulated)return null}return Pi(l,s)}(n,r.parent,s)}function lc(n,r,s,l,p){n.insertBefore(r,s,l,p)}function gm(n,r,s){n.appendChild(r,s)}function mm(n,r,s,l,p){null!==l?lc(n,r,s,l,p):gm(n,r,s)}function Ah(n,r){return n.parentNode(r)}function Rp(n,r,s){return Op(n,r,s)}let Op=function ym(n,r,s){return 40&n.type?Pi(n,s):null};function xh(n,r,s,l){const p=sa(n,l,r),v=r[11],O=Rp(l.parent||r[6],l,r);if(null!=p)if(Array.isArray(s))for(let B=0;B<s.length;B++)mm(v,p,s[B],O,!1);else mm(v,p,s,O,!1)}function Mh(n,r){if(null!==r){const s=r.type;if(3&s)return Pi(r,n);if(4&s)return Df(-1,n[r.index]);if(8&s){const l=r.child;if(null!==l)return Mh(n,l);{const p=n[r.index];return bt(p)?Df(-1,p):Kr(p)}}if(32&s)return Sh(r,n)()||Kr(n[r.index]);{const l=_m(n,r);return null!==l?Array.isArray(l)?l[0]:Mh(oc(n[16]),l):Mh(n,r.next)}}return null}function _m(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Df(n,r){const s=10+n+1;if(s<r.length){const l=r[s],p=l[1].firstChild;if(null!==p)return Mh(l,p)}return r[7]}function kp(n,r,s,l,p,v,T){for(;null!=s;){const O=l[s.index],B=s.type;if(T&&0===r&&(O&&ss(Kr(O),l),s.flags|=4),64!=(64&s.flags))if(8&B)kp(n,r,s.child,l,p,v,!1),u(r,n,p,O,v);else if(32&B){const K=Sh(s,l);let le;for(;le=K();)u(r,n,p,le,v);u(r,n,p,O,v)}else 16&B?Em(n,r,l,s,p,v):u(r,n,p,O,v);s=T?s.projectionNext:s.next}}function cd(n,r,s,l,p,v){kp(s,l,n.firstChild,r,p,v,!1)}function Em(n,r,s,l,p,v){const T=s[16],B=T[6].projection[l.projection];if(Array.isArray(B))for(let K=0;K<B.length;K++)u(r,n,p,B[K],v);else kp(n,r,B,T[3],p,v,!0)}function bm(n,r,s){n.setAttribute(r,"style",s)}function Tf(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function wm(n,r,s){let l=n.length;for(;;){const p=n.indexOf(r,s);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const v=r.length;if(p+v===l||n.charCodeAt(p+v)<=32)return p}s=p+1}}const Im="ng-template";function Cm(n,r,s){let l=0;for(;l<n.length;){let p=n[l++];if(s&&"class"===p){if(p=n[l],-1!==wm(p.toLowerCase(),r,0))return!0}else if(1===p){for(;l<n.length&&"string"==typeof(p=n[l++]);)if(p.toLowerCase()===r)return!0;return!1}}return!1}function Sf(n){return 4===n.type&&n.value!==Im}function Np(n,r,s){return r===(4!==n.type||s?n.value:Im)}function Rh(n,r,s){let l=4;const p=n.attrs||[],v=function f_(n){for(let r=0;r<n.length;r++)if(ks(n[r]))return r;return n.length}(p);let T=!1;for(let O=0;O<r.length;O++){const B=r[O];if("number"!=typeof B){if(!T)if(4&l){if(l=2|1&l,""!==B&&!Np(n,B,s)||""===B&&1===r.length){if(yl(l))return!1;T=!0}}else{const K=8&l?B:r[++O];if(8&l&&null!==n.attrs){if(!Cm(n.attrs,K,s)){if(yl(l))return!1;T=!0}continue}const Se=Fp(8&l?"class":B,p,Sf(n),s);if(-1===Se){if(yl(l))return!1;T=!0;continue}if(""!==K){let lt;lt=Se>v?"":p[Se+1].toLowerCase();const Tt=8&l?lt:null;if(Tt&&-1!==wm(Tt,K,0)||2&l&&K!==lt){if(yl(l))return!1;T=!0}}}}else{if(!T&&!yl(l)&&!yl(B))return!1;if(T&&yl(B))continue;T=!1,l=B|1&l}}return yl(l)||T}function yl(n){return 0==(1&n)}function Fp(n,r,s,l){if(null===r)return-1;let p=0;if(l||!s){let v=!1;for(;p<r.length;){const T=r[p];if(T===n)return p;if(3===T||6===T)v=!0;else{if(1===T||2===T){let O=r[++p];for(;"string"==typeof O;)O=r[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=v?1:2}return-1}return function Tm(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,n)}function Af(n,r,s=!1){for(let l=0;l<r.length;l++)if(Rh(n,r[l],s))return!0;return!1}function Sm(n,r){e:for(let s=0;s<r.length;s++){const l=r[s];if(n.length===l.length){for(let p=0;p<n.length;p++)if(n[p]!==l[p])continue e;return!0}}return!1}function xf(n,r){return n?":not("+r.trim()+")":r}function p_(n){let r=n[0],s=1,l=2,p="",v=!1;for(;s<n.length;){let T=n[s];if("string"==typeof T)if(2&l){const O=n[++s];p+="["+T+(O.length>0?'="'+O+'"':"")+"]"}else 8&l?p+="."+T:4&l&&(p+=" "+T);else""!==p&&!yl(T)&&(r+=xf(v,p),p=""),l=T,v=v||!yl(l);s++}return""!==p&&(r+=xf(v,p)),r}const oi={};function xm(n){dd(Dr(),Zt(),Fe()+n,!1)}function dd(n,r,s,l){if(!l)if(3==(3&r[2])){const v=n.preOrderCheckHooks;null!==v&&Ui(r,v,s)}else{const v=n.preOrderHooks;null!==v&&mo(r,v,0,s)}Dt(s)}function Rf(n,r=null,s=null,l){const p=Up(n,r,s,l);return p.resolveInjectorInitializers(),p}function Up(n,r=null,s=null,l,p=new Set){const v=[s||Pn,Lo(n)];return l=l||("object"==typeof n?void 0:ge(n)),new Mc(v,r||Xu(),l||null,p)}let Fc=(()=>{class n{static create(s,l){var p;if(Array.isArray(s))return Rf({name:""},l,s,"");{const v=null!==(p=s.name)&&void 0!==p?p:"";return Rf({name:v},s.parent,s.providers,v)}}}return n.THROW_IF_NOT_FOUND=C,n.NULL=new ed,n.\u0275prov=gt({token:n,providedIn:"any",factory:()=>_e(Jc)}),n.__NG_ELEMENT_ID__=-1,n})();function Lc(n,r=qt.Default){const s=Zt();return null===s?_e(n,r):ir(Ci(),s,oe(n),r)}function Gp(){throw new Error("invalid")}function jd(n,r){return n<<17|r<<2}function oa(n){return n>>17&32767}function Fh(n){return 2|n}function cc(n){return(131068&n)>>2}function Lh(n,r){return-131069&n|r<<2}function Bh(n){return 1|n}function tg(n,r){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const p=s[l],v=s[l+1];if(-1!==v){const T=n.data[v];lr(p),T.contentQueries(2,r[v],v)}}}function jf(n,r,s,l,p,v,T,O,B,K,le){const Se=r.blueprint.slice();return Se[0]=p,Se[2]=76|l,(null!==le||n&&1024&n[2])&&(Se[2]|=1024),Ws(Se),Se[3]=Se[15]=n,Se[8]=s,Se[10]=T||n&&n[10],Se[11]=O||n&&n[11],Se[12]=B||n&&n[12]||null,Se[9]=K||n&&n[9]||null,Se[6]=v,Se[20]=function vf(){return Cp++}(),Se[21]=le,Se[16]=2==r.type?n[16]:Se,Se}function Gd(n,r,s,l,p){let v=n.data[r];if(null===v)v=function ng(n,r,s,l,p){const v=hr(),T=eo(),B=n.data[r]=function og(n,r,s,l,p,v){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?v:v&&v.parent,s,r,l,p);return null===n.firstChild&&(n.firstChild=B),null!==v&&(T?null==v.child&&null!==B.parent&&(v.child=B):null===v.next&&(v.next=B)),B}(n,r,s,l,p),function Pt(){return Hn.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=s,v.value=l,v.attrs=p;const T=function ts(){const n=Hn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();v.injectorIndex=null===T?-1:T.injectorIndex}return ns(v,!0),v}function Bc(n,r,s,l){if(0===s)return-1;const p=r.length;for(let v=0;v<s;v++)r.push(l),n.blueprint.push(l),n.data.push(null);return p}function zh(n,r,s){Ls(r);try{const l=n.viewQuery;null!==l&&Eg(1,l,s);const p=n.template;null!==p&&Km(n,r,p,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&tg(n,r),n.staticViewQueries&&Eg(2,n.viewQuery,s);const v=n.components;null!==v&&function k_(n,r){for(let s=0;s<r.length;s++)yg(n,r[s])}(r,v)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[2]&=-5,X()}}function Wd(n,r,s,l){const p=r[2];if(128!=(128&p)){Ls(r);try{Ws(r),function Y(n){return Hn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Km(n,r,s,2,l);const T=3==(3&p);if(T){const K=n.preOrderCheckHooks;null!==K&&Ui(r,K,null)}else{const K=n.preOrderHooks;null!==K&&mo(r,K,0,null),Mo(r,0)}if(function B_(n){for(let r=ud(n);null!==r;r=ac(r)){if(!r[2])continue;const s=r[9];for(let l=0;l<s.length;l++){const p=s[l],v=p[3];0==(512&p[2])&&xr(v,1),p[2]|=512}}}(r),function L_(n){for(let r=ud(n);null!==r;r=ac(r))for(let s=10;s<r.length;s++){const l=r[s],p=l[1];hs(l)&&Wd(p,l,p.template,l[8])}}(r),null!==n.contentQueries&&tg(n,r),T){const K=n.contentCheckHooks;null!==K&&Ui(r,K)}else{const K=n.contentHooks;null!==K&&mo(r,K,1),Mo(r,1)}!function qm(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const p=s[l];if(p<0)Dt(~p);else{const v=p,T=s[++l],O=s[++l];Mn(T,v),O(2,r[v])}}}finally{Dt(-1)}}(n,r);const O=n.components;null!==O&&function Ym(n,r){for(let s=0;s<r.length;s++)gg(n,r[s])}(r,O);const B=n.viewQuery;if(null!==B&&Eg(2,B,l),T){const K=n.viewCheckHooks;null!==K&&Ui(r,K)}else{const K=n.viewHooks;null!==K&&mo(r,K,2),Mo(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,xr(r[3],-1))}finally{X()}}}function Km(n,r,s,l,p){const v=Fe(),T=2&l;try{Dt(-1),T&&r.length>22&&dd(n,r,22,!1),s(l,p)}finally{Dt(v)}}function Hf(n,r,s){if(ye(r)){const p=r.directiveEnd;for(let v=r.directiveStart;v<p;v++){const T=n.data[v];T.contentQueries&&T.contentQueries(1,s[v],v)}}}function rg(n,r,s){!Jr()||(function fc(n,r,s,l){const p=s.directiveStart,v=s.directiveEnd;n.firstCreatePass||oo(s,r),ss(l,r);const T=s.initialInputs;for(let O=p;O<v;O++){const B=n.data[O],K=Rt(B);K&&F_(r,s,B);const le=en(r,n,O,s);ss(le,r),null!==T&&fg(0,O-p,le,B,0,T),K&&(Cr(s.index,r)[8]=le)}}(n,r,s,Pi(s,r)),128==(128&s.flags)&&function ug(n,r,s){const l=s.directiveStart,p=s.directiveEnd,v=s.index,T=function yr(){return Hn.lFrame.currentDirectiveIndex}();try{Dt(v);for(let O=l;O<p;O++){const B=n.data[O],K=r[O];Zn(O),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&ty(B,K)}}finally{Dt(-1),Zn(T)}}(n,r,s))}function qh(n,r,s=Pi){const l=r.localNames;if(null!==l){let p=r.index+1;for(let v=0;v<l.length;v+=2){const T=l[v+1],O=-1===T?s(r,n):n[T];n[p++]=O}}}function ig(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Yh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Yh(n,r,s,l,p,v,T,O,B,K){const le=22+l,Se=le+p,lt=function Zm(n,r){const s=[];for(let l=0;l<r;l++)s.push(l<n?null:oi);return s}(le,Se),Tt="function"==typeof K?K():K;return lt[1]={type:n,blueprint:lt,template:s,queries:null,viewQuery:O,declTNode:r,data:lt.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:B,consts:Tt,incompleteFirstPass:!1}}function Qm(n,r,s,l){const p=qf(r);null===s?p.push(l):(p.push(s),n.firstCreatePass&&bg(n).push(l,p.length-1))}function Xm(n,r,s){for(let l in n)if(n.hasOwnProperty(l)){const p=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(r,p):s[l]=[r,p]}return s}function Gf(n,r){const l=r.directiveEnd,p=n.data,v=r.attrs,T=[];let O=null,B=null;for(let K=r.directiveStart;K<l;K++){const le=p[K],Se=le.inputs,lt=null===v||Sf(r)?null:iy(Se,v);T.push(lt),O=Xm(Se,K,O),B=Xm(le.outputs,K,B)}null!==O&&(O.hasOwnProperty("class")&&(r.flags|=16),O.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=T,r.inputs=O,r.outputs=B}function Wf(n,r){const s=Cr(r,n);16&s[2]||(s[2]|=32)}function Zh(n,r,s,l){let p=!1;if(Jr()){const v=function cg(n,r,s){const l=n.directiveRegistry;let p=null;if(l)for(let v=0;v<l.length;v++){const T=l[v];Af(s,T.selectors,!1)&&(p||(p=[]),Ri(oo(s,r),n,T.type),Rt(T)?(ny(n,s),p.unshift(T)):p.push(T))}return p}(n,r,s),T=null===l?null:{"":-1};if(null!==v){p=!0,ry(s,n.data.length,v.length);for(let le=0;le<v.length;le++){const Se=v[le];Se.providersResolver&&Se.providersResolver(Se)}let O=!1,B=!1,K=Bc(n,r,v.length,null);for(let le=0;le<v.length;le++){const Se=v[le];s.mergedAttrs=Oa(s.mergedAttrs,Se.hostAttrs),zf(n,s,r,K,Se),dg(K,Se,T),null!==Se.contentQueries&&(s.flags|=8),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(s.flags|=128);const lt=Se.type.prototype;!O&&(lt.ngOnChanges||lt.ngOnInit||lt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),O=!0),!B&&(lt.ngOnChanges||lt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),B=!0),K++}Gf(n,s)}T&&function N_(n,r,s){if(r){const l=n.localNames=[];for(let p=0;p<r.length;p+=2){const v=s[r[p+1]];if(null==v)throw new Qe(-301,!1);l.push(r[p],v)}}}(s,l,T)}return s.mergedAttrs=Oa(s.mergedAttrs,s.attrs),p}function ey(n,r,s,l,p,v){const T=v.hostBindings;if(T){let O=n.hostBindingOpCodes;null===O&&(O=n.hostBindingOpCodes=[]);const B=~r.index;(function lg(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(O)!=B&&O.push(B),O.push(l,p,T)}}function ty(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function ny(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function dg(n,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=n;Rt(r)&&(s[""]=n)}}function ry(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function zf(n,r,s,l,p){n.data[l]=p;const v=p.factory||(p.factory=Qi(p.type)),T=new so(v,Rt(p),Lc);n.blueprint[l]=T,s[l]=T,ey(n,r,0,l,Bc(n,s,p.hostVars,oi),p)}function F_(n,r,s){const l=Pi(r,n),p=ig(s),v=n[10],T=zd(n,jf(n,p,null,s.onPush?32:16,l,r,v,v.createRenderer(l,s),null,null,null));n[r.index]=T}function ql(n,r,s,l,p,v){const T=Pi(n,r);!function hg(n,r,s,l,p,v,T){if(null==v)n.removeAttribute(r,p,s);else{const O=null==T?Oe(v):T(v,l||"",p);n.setAttribute(r,p,O,s)}}(r[11],T,v,n.value,s,l,p)}function fg(n,r,s,l,p,v){const T=v[r];if(null!==T){const O=l.setInput;for(let B=0;B<T.length;){const K=T[B++],le=T[B++],Se=T[B++];null!==O?l.setInput(s,Se,K,le):s[le]=Se}}}function iy(n,r){let s=null,l=0;for(;l<r.length;){const p=r[l];if(0!==p)if(5!==p){if("number"==typeof p)break;n.hasOwnProperty(p)&&(null===s&&(s=[]),s.push(p,n[p],r[l+1])),l+=2}else l+=2;else l+=4}return s}function pg(n,r,s,l){return new Array(n,!0,!1,r,null,0,l,s,null,null)}function gg(n,r){const s=Cr(r,n);if(hs(s)){const l=s[1];48&s[2]?Wd(l,s,l.template,s[8]):s[5]>0&&mg(s)}}function mg(n){for(let l=ud(n);null!==l;l=ac(l))for(let p=10;p<l.length;p++){const v=l[p];if(hs(v))if(512&v[2]){const T=v[1];Wd(T,v,T.template,v[8])}else v[5]>0&&mg(v)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const p=Cr(s[l],n);hs(p)&&p[5]>0&&mg(p)}}function yg(n,r){const s=Cr(r,n),l=s[1];(function _g(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(l,s),zh(l,s,s[8])}function zd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function vg(n){for(;n;){n[2]|=32;const r=oc(n);if(zt(n)&&!r)return n;n=r}return null}function Qh(n,r,s,l=!0){const p=r[10];p.begin&&p.begin();try{Wd(n,r,n.template,s)}catch(T){throw l&&Ig(r,T),T}finally{p.end&&p.end()}}function Eg(n,r,s){lr(0),r(n,s)}function qf(n){return n[7]||(n[7]=[])}function bg(n){return n.cleanup||(n.cleanup=[])}function Ig(n,r){const s=n[9],l=s?s.get(ad,null):null;l&&l.handleError(r)}function qd(n,r,s,l,p){for(let v=0;v<s.length;){const T=s[v++],O=s[v++],B=r[T],K=n.data[T];null!==K.setInput?K.setInput(B,p,l,O):B[O]=p}}function di(n,r,s){const l=ci(r,n);!function _(n,r,s){n.setValue(r,s)}(n[11],l,s)}function Xh(n,r,s){let l=s?n.styles:null,p=s?n.classes:null,v=0;if(null!==r)for(let T=0;T<r.length;T++){const O=r[T];"number"==typeof O?v=O:1==v?p=be(p,O):2==v&&(l=be(l,O+": "+r[++T]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=p:n.classesWithoutHost=p}function Jh(n,r,s,l,p=!1){for(;null!==s;){const v=r[s.index];if(null!==v&&l.push(Kr(v)),bt(v))for(let O=10;O<v.length;O++){const B=v[O],K=B[1].firstChild;null!==K&&Jh(B[1],B,K,l)}const T=s.type;if(8&T)Jh(n,r,s.child,l);else if(32&T){const O=Sh(s,r);let B;for(;B=O();)l.push(B)}else if(16&T){const O=_m(r,s);if(Array.isArray(O))l.push(...O);else{const B=oc(r[16]);Jh(B[1],B,O,l,!0)}}s=p?s.projectionNext:s.next}return l}class Yd{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Jh(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(bt(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(kn(r,l),At(s,l))}this._attachedToViewContainer=!1}sr(this._lView[1],this._lView)}onDestroy(r){Qm(this._lView[1],this._lView,null,r)}markForCheck(){vg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Qh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Qe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Re(n,r){cd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Qe(902,!1);this._appRef=r}}class ef extends Yd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Qh(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class Yf extends Dl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=et(r);return new Kd(s,this.ngModule)}}function Us(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Lu{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,l){const p=this.injector.get(r,Rr,l);return p!==Rr||s===Rr?p:this.parentInjector.get(r,s,l)}}class Kd extends ec{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Am(n){return n.map(p_).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Us(this.componentDef.inputs)}get outputs(){return Us(this.componentDef.outputs)}create(r,s,l,p){let v=(p=p||this.ngModule)instanceof ra?p:null==p?void 0:p.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const T=v?new Lu(r,v):r,O=T.get(Q,null);if(null===O)throw new Qe(407,!1);const B=T.get(jt,null),K=O.createRenderer(null,this.componentDef),le=this.componentDef.selectors[0][0]||"div",Se=l?function sg(n,r,s){return n.selectRootElement(r,s===St.ShadowDom)}(K,l,this.componentDef.encapsulation):F(O.createRenderer(null,this.componentDef),le,function Ua(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(le)),lt=this.componentDef.onPush?288:272,Tt=Yh(0,null,null,1,0,null,null,null,null,null),Jt=jf(null,Tt,null,lt,null,null,O,K,B,T,null);let bn,Bn;Ls(Jt);try{const pr=function uy(n,r,s,l,p,v){const T=s[1];s[22]=n;const B=Gd(T,22,2,"#host",null),K=B.mergedAttrs=r.hostAttrs;null!==K&&(Xh(B,K,!0),null!==n&&(Ko(p,n,K),null!==B.classes&&Tf(p,n,B.classes),null!==B.styles&&bm(p,n,B.styles)));const le=l.createRenderer(n,r),Se=jf(s,ig(r),null,r.onPush?32:16,s[22],B,l,le,v||null,null,null);return T.firstCreatePass&&(Ri(oo(B,s),T,r.type),ny(T,B),ry(B,s.length,1)),zd(s,Se),s[22]=Se}(Se,this.componentDef,Jt,O,K);if(Se)if(l)Ko(K,Se,["ng-version",qn.full]);else{const{attrs:Gr,classes:ln}=function g_(n){const r=[],s=[];let l=1,p=2;for(;l<n.length;){let v=n[l];if("string"==typeof v)2===p?""!==v&&r.push(v,n[++l]):8===p&&s.push(v);else{if(!yl(p))break;p=v}l++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Gr&&Ko(K,Se,Gr),ln&&ln.length>0&&Tf(K,Se,ln.join(" "))}if(Bn=Xs(Tt,22),void 0!==s){const Gr=Bn.projection=[];for(let ln=0;ln<this.ngContentSelectors.length;ln++){const ii=s[ln];Gr.push(null!=ii?Array.from(ii):null)}}bn=function Kf(n,r,s,l){const p=s[1],v=function Jm(n,r,s){const l=Ci();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),zf(n,l,r,Bc(n,r,1,null),s),Gf(n,l));const p=en(r,n,l.directiveStart,l);ss(p,r);const v=Pi(l,r);return v&&ss(v,r),p}(p,s,r);if(n[8]=s[8]=v,null!==l)for(const O of l)O(v,r);if(r.contentQueries){const O=Ci();r.contentQueries(1,v,O.directiveStart)}const T=Ci();return!p.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Dt(T.index),ey(s[1],T,0,T.directiveStart,T.directiveEnd,r),ty(r,v)),v}(pr,this.componentDef,Jt,[U_]),zh(Tt,Jt,null)}finally{X()}return new ay(this.componentType,bn,D(Bn,Jt),Jt,Bn)}}class ay extends class va{}{constructor(r,s,l,p,v){super(),this.location=l,this._rootLView=p,this._tNode=v,this.instance=s,this.hostView=this.changeDetectorRef=new ef(p),this.componentType=r}setInput(r,s){const l=this._tNode.inputs;let p;if(null!==l&&(p=l[r])){const v=this._rootLView;qd(v[1],v,p,r,s),Wf(v,this._tNode.index)}}get injector(){return new Da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function U_(){const n=Ci();yi(Zt()[1],n)}function Dg(n){let r=function j_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;r;){let p;if(Rt(n))p=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Qe(903,!1);p=r.\u0275dir}if(p){if(s){l.push(p);const T=n;T.inputs=Tg(n.inputs),T.declaredInputs=Tg(n.declaredInputs),T.outputs=Tg(n.outputs);const O=p.hostBindings;O&&cy(n,O);const B=p.viewQuery,K=p.contentQueries;if(B&&G_(n,B),K&&W_(n,K),ve(n.inputs,p.inputs),ve(n.declaredInputs,p.declaredInputs),ve(n.outputs,p.outputs),Rt(p)&&p.data.animation){const le=n.data;le.animation=(le.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let T=0;T<v.length;T++){const O=v[T];O&&O.ngInherit&&O(n),O===Dg&&(s=!1)}}r=Object.getPrototypeOf(r)}!function H_(n){let r=0,s=null;for(let l=n.length-1;l>=0;l--){const p=n[l];p.hostVars=r+=p.hostVars,p.hostAttrs=Oa(p.hostAttrs,s=Oa(s,p.hostAttrs))}}(l)}function Tg(n){return n===Lr?{}:n===Pn?[]:n}function G_(n,r){const s=n.viewQuery;n.viewQuery=s?(l,p)=>{r(l,p),s(l,p)}:r}function W_(n,r){const s=n.contentQueries;n.contentQueries=s?(l,p,v)=>{r(l,p,v),s(l,p,v)}:r}function cy(n,r){const s=n.hostBindings;n.hostBindings=s?(l,p)=>{r(l,p),s(l,p)}:r}let Zd=null;function pc(){if(!Zd){const n=gr.Symbol;if(n&&n.iterator)Zd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const l=r[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Zd=l)}}}return Zd}function md(n){return!!tf(n)&&(Array.isArray(n)||!(n instanceof Map)&&pc()in n)}function tf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function wa(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function yd(n,r,s,l){const p=wa(n,r,s);return wa(n,r+1,l)||p}function Xf(n,r,s,l){const p=Zt();return wa(p,ke(),r)&&(Dr(),ql(Lt(),p,n,r,s,l)),Xf}function Jd(n,r,s,l,p,v,T,O){const K=function Qf(n,r,s,l,p){const v=yd(n,r,s,l);return wa(n,r+2,p)||v}(n,R(),s,p,T);return It(3),K?r+Oe(s)+l+Oe(p)+v+Oe(T)+O:oi}function my(n,r,s,l,p,v,T,O){const B=Zt(),K=Dr(),le=n+22,Se=K.firstCreatePass?function K_(n,r,s,l,p,v,T,O,B){const K=r.consts,le=Gd(r,n,4,T||null,Fr(K,O));Zh(r,s,le,Fr(K,B)),yi(r,le);const Se=le.tViews=Yh(2,le,l,p,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,K);return null!==r.queries&&(r.queries.template(r,le),Se.queries=r.queries.embeddedTView(le)),le}(le,K,B,r,s,l,p,v,T):K.data[le];ns(Se,!1);const lt=B[11].createComment("");xh(K,B,lt,Se),ss(lt,B),zd(B,B[le]=pg(lt,B,lt,Se)),_t(Se)&&rg(K,B,Se),null!=T&&qh(B,Se,O)}function kg(n,r,s){const l=Zt();return wa(l,ke(),r)&&function rl(n,r,s,l,p,v,T,O){const B=Pi(r,s);let le,K=r.inputs;!O&&null!=K&&(le=K[l])?(qd(n,s,le,l,p),qe(r)&&Wf(s,r.index)):3&r.type&&(l=function P_(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),p=null!=T?T(p,r.value||"",l):p,v.setProperty(B,l,p))}(Dr(),Lt(),l,n,r,l[11],s,!1),kg}function Jf(n,r,s,l,p){const T=p?"class":"style";qd(n,s,r.inputs[T],T,l)}function Kl(n,r,s,l){const p=Zt(),v=Dr(),T=22+n,O=p[11],B=p[T]=F(O,r,function Zr(){return Hn.lFrame.currentNamespace}()),K=v.firstCreatePass?function Vu(n,r,s,l,p,v,T){const O=r.consts,K=Gd(r,n,2,p,Fr(O,v));return Zh(r,s,K,Fr(O,T)),null!==K.attrs&&Xh(K,K.attrs,!1),null!==K.mergedAttrs&&Xh(K,K.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,K),K}(T,v,p,0,r,s,l):v.data[T];ns(K,!0);const le=K.mergedAttrs;null!==le&&Ko(O,B,le);const Se=K.classes;null!==Se&&Tf(O,B,Se);const lt=K.styles;return null!==lt&&bm(O,B,lt),64!=(64&K.flags)&&xh(v,p,B,K),0===function Vo(){return Hn.lFrame.elementDepthCount}()&&ss(B,p),function Ao(){Hn.lFrame.elementDepthCount++}(),_t(K)&&(rg(v,p,K),Hf(v,K,p)),null!==l&&qh(p,K),Kl}function Pg(){let n=Ci();eo()?G():(n=n.parent,ns(n,!1));const r=n;!function qo(){Hn.lFrame.elementDepthCount--}();const s=Dr();return s.firstCreatePass&&(yi(s,n),ye(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ra(n){return 0!=(16&n.flags)}(r)&&Jf(s,r,Zt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ia(n){return 0!=(32&n.flags)}(r)&&Jf(s,r,Zt(),r.stylesWithoutHost,!1),Pg}function gc(n,r,s,l){return Kl(n,r,s,l),Pg(),gc}function tp(n,r,s){const l=Zt(),p=Dr(),v=n+22,T=p.firstCreatePass?function ep(n,r,s,l,p){const v=r.consts,T=Fr(v,l),O=Gd(r,n,8,"ng-container",T);return null!==T&&Xh(O,T,!0),Zh(r,s,O,Fr(v,p)),null!==r.queries&&r.queries.elementStart(r,O),O}(v,p,l,r,s):p.data[v];ns(T,!0);const O=l[v]=l[11].createComment("");return xh(p,l,O,T),ss(O,l),_t(T)&&(rg(p,l,T),Hf(p,T,l)),null!=s&&qh(l,T),tp}function np(){let n=Ci();const r=Dr();return eo()?G():(n=n.parent,ns(n,!1)),r.firstCreatePass&&(yi(r,n),ye(n)&&r.queries.elementEnd(n)),np}function rp(n,r,s){return tp(n,r,s),np(),rp}function Ng(){return Zt()}function ih(n){return!!n&&"function"==typeof n.then}function yy(n){return!!n&&"function"==typeof n.subscribe}const $c=yy;function sh(n,r,s,l){const p=Zt(),v=Dr(),T=Ci();return function ip(n,r,s,l,p,v,T,O){const B=_t(l),le=n.firstCreatePass&&bg(n),Se=r[8],lt=qf(r);let Tt=!0;if(3&l.type||O){const Bn=Pi(l,r),pr=O?O(Bn):Bn,Gr=lt.length,ln=O?as=>O(Kr(as[l.index])):l.index;let ii=null;if(!O&&B&&(ii=function _y(n,r,s,l){const p=n.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const T=p[v];if(T===s&&p[v+1]===l){const O=r[7],B=p[v+2];return O.length>B?O[B]:null}"string"==typeof T&&(v+=2)}return null}(n,r,p,l.index)),null!==ii)(ii.__ngLastListenerFn__||ii).__ngNextListenerFn__=v,ii.__ngLastListenerFn__=v,Tt=!1;else{v=Ey(l,r,Se,v,!1);const as=s.listen(pr,p,v);lt.push(v,as),le&&le.push(p,ln,Gr,Gr+1)}}else v=Ey(l,r,Se,v,!1);const Jt=l.outputs;let bn;if(Tt&&null!==Jt&&(bn=Jt[p])){const Bn=bn.length;if(Bn)for(let pr=0;pr<Bn;pr+=2){const To=r[bn[pr]][bn[pr+1]].subscribe(v),hf=lt.length;lt.push(v,To),le&&le.push(p,l.index,hf,-(hf+1))}}}(v,p,p[11],T,n,r,0,l),sh}function vy(n,r,s,l){try{return!1!==s(l)}catch(p){return Ig(n,p),!1}}function Ey(n,r,s,l,p){return function v(T){if(T===Function)return l;vg(2&n.flags?Cr(n.index,r):r);let B=vy(r,0,l,T),K=v.__ngNextListenerFn__;for(;K;)B=vy(r,0,K,T)&&B,K=K.__ngNextListenerFn__;return p&&!1===B&&(T.preventDefault(),T.returnValue=!1),B}}function by(n=1){return function $(n){return(Hn.lFrame.contextLView=function ie(n,r){for(;n>0;)r=r[15],n--;return r}(n,Hn.lFrame.contextLView))[8]}(n)}function Fg(n,r){let s=null;const l=function Dm(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let p=0;p<r.length;p++){const v=r[p];if("*"!==v){if(null===l?Af(n,v,!0):Sm(l,v))return p}else s=p}return s}function sp(n){const r=Zt()[16][6];if(!r.projection){const l=r.projection=Po(n?n.length:1,null),p=l.slice();let v=r.child;for(;null!==v;){const T=n?Fg(v,n):0;null!==T&&(p[T]?p[T].projectionNext=v:l[T]=v,p[T]=v),v=v.next}}}function Lg(n,r=0,s){const l=Zt(),p=Dr(),v=Gd(p,22+n,16,null,s||null);null===v.projection&&(v.projection=r),G(),64!=(64&v.flags)&&function ba(n,r,s){Em(r[11],0,r,s,sa(n,s,r),Rp(s.parent||r[6],s,r))}(p,l,v)}function lh(n,r,s,l,p){const v=n[s+1],T=null===r;let O=l?oa(v):cc(v),B=!1;for(;0!==O&&(!1===B||T);){const le=n[O+1];jc(n[O],r)&&(B=!0,n[O+1]=l?Bh(le):Fh(le)),O=l?oa(le):cc(le)}B&&(n[s+1]=l?Fh(v):Bh(v))}function jc(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Na(n,r)>=0}function cp(n,r){return function la(n,r,s,l){const p=Zt(),v=Dr(),T=It(2);v.firstUpdatePass&&function Ay(n,r,s,l){const p=n.data;if(null===p[s+1]){const v=p[Fe()],T=function mc(n,r){return r>=n.expandoStartIndex}(n,s);(function Py(n,r){return 0!=(n.flags&(r?16:32))})(v,l)&&null===r&&!T&&(r=!1),r=function xy(n,r,s,l){const p=function Mr(n){const r=Hn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let v=l?r.residualClasses:r.residualStyles;if(null===p)0===(l?r.classBindings:r.styleBindings)&&(s=sf(s=Gg(null,n,r,s,l),r.attrs,l),v=null);else{const T=r.directiveStylingLast;if(-1===T||n[T]!==p)if(s=Gg(p,n,r,s,l),null===v){let B=function iv(n,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==cc(l))return n[oa(l)]}(n,r,l);void 0!==B&&Array.isArray(B)&&(B=Gg(null,n,r,B[1],l),B=sf(B,r.attrs,l),function Hc(n,r,s,l){n[oa(s?r.classBindings:r.styleBindings)]=l}(n,r,l,B))}else v=function sv(n,r,s){let l;const p=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<p;v++)l=sf(l,n[v].hostAttrs,s);return sf(l,r.attrs,s)}(n,r,l)}return void 0!==v&&(l?r.residualClasses=v:r.residualStyles=v),s}(p,v,r,l),function up(n,r,s,l,p,v){let T=v?r.classBindings:r.styleBindings,O=oa(T),B=cc(T);n[l]=s;let le,K=!1;if(Array.isArray(s)){const Se=s;le=Se[1],(null===le||Na(Se,le)>0)&&(K=!0)}else le=s;if(p)if(0!==B){const lt=oa(n[O+1]);n[l+1]=jd(lt,O),0!==lt&&(n[lt+1]=Lh(n[lt+1],l)),n[O+1]=function D_(n,r){return 131071&n|r<<17}(n[O+1],l)}else n[l+1]=jd(O,0),0!==O&&(n[O+1]=Lh(n[O+1],l)),O=l;else n[l+1]=jd(B,0),0===O?O=l:n[B+1]=Lh(n[B+1],l),B=l;K&&(n[l+1]=Fh(n[l+1])),lh(n,le,l,!0),lh(n,le,l,!1),function Iy(n,r,s,l,p){const v=p?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof r&&Na(v,r)>=0&&(s[l+1]=Bh(s[l+1]))}(r,le,n,l,v),T=jd(O,B),v?r.classBindings=T:r.styleBindings=T}(p,v,r,s,T,l)}}(v,n,T,l),r!==oi&&wa(p,T,r)&&function Wg(n,r,s,l,p,v,T,O){if(!(3&r.type))return;const B=n.data,K=B[O+1];hp(function Bm(n){return 1==(1&n)}(K)?Oy(B,r,s,p,cc(K),T):void 0)||(hp(v)||function Wp(n){return 2==(2&n)}(K)&&(v=Oy(B,null,s,p,O,T)),function h_(n,r,s,l,p){if(r)p?n.addClass(s,l):n.removeClass(s,l);else{let v=-1===l.indexOf("-")?void 0:zl.DashCase;null==p?n.removeStyle(s,l,v):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),v|=zl.Important),n.setStyle(s,l,p,v))}}(l,T,ci(Fe(),s),p,v))}(v,v.data[Fe()],p,p[11],n,p[T+1]=function ky(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ge(Ho(n)))),n}(r,s),l,T)}(n,r,null,!0),cp}function Gg(n,r,s,l,p){let v=null;const T=s.directiveEnd;let O=s.directiveStylingLast;for(-1===O?O=s.directiveStart:O++;O<T&&(v=r[O],l=sf(l,v.hostAttrs,p),v!==n);)O++;return null!==n&&(s.directiveStylingLast=O),l}function sf(n,r,s){const l=s?1:2;let p=-1;if(null!==r)for(let v=0;v<r.length;v++){const T=r[v];"number"==typeof T?p=T:p===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Vs(n,T,!!s||r[++v]))}return void 0===n?null:n}function Oy(n,r,s,l,p,v){const T=null===r;let O;for(;p>0;){const B=n[p],K=Array.isArray(B),le=K?B[1]:B,Se=null===le;let lt=s[p+1];lt===oi&&(lt=Se?Pn:void 0);let Tt=Se?Za(lt,l):le===l?lt:void 0;if(K&&!hp(Tt)&&(Tt=Za(B,l)),hp(Tt)&&(O=Tt,T))return O;const Jt=n[p+1];p=T?oa(Jt):cc(Jt)}if(null!==r){let B=v?r.residualClasses:r.residualStyles;null!=B&&(O=Za(B,l))}return O}function hp(n){return void 0!==n}function vd(n,r=""){const s=Zt(),l=Dr(),p=n+22,v=l.firstCreatePass?Gd(l,p,1,r,null):l.data[p],T=s[p]=function c(n,r){return n.createText(r)}(s[11],r);xh(l,s,T,v),ns(v,!1)}function af(n){return zg("",n,""),af}function zg(n,r,s){const l=Zt(),p=function _d(n,r,s,l){return wa(n,ke(),s)?r+Oe(s)+l:oi}(l,n,r,s);return p!==oi&&di(l,Fe(),p),zg}function Ny(n,r,s,l,p){const v=Zt(),T=function Xd(n,r,s,l,p,v){const O=yd(n,R(),s,p);return It(2),O?r+Oe(s)+l+Oe(p)+v:oi}(v,n,r,s,l,p);return T!==oi&&di(v,Fe(),T),Ny}function qg(n,r,s,l,p,v,T){const O=Zt(),B=Jd(O,n,r,s,l,p,v,T);return B!==oi&&di(O,Fe(),B),qg}const _c=void 0;var Ed=["en",[["a","p"],["AM","PM"],_c],[["AM","PM"],_c,_c],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_c,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_c,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_c,"{1} 'at' {0}",_c],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hh(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let Wc={};function tm(n){const r=function qy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=zy(r);if(s)return s;const l=r.split("-")[0];if(s=zy(l),s)return s;if("en"===l)return Ed;throw new Qe(701,!1)}function Wy(n){return tm(n)[Hr.PluralCase]}function zy(n){return n in Wc||(Wc[n]=gr.ng&&gr.ng.common&&gr.ng.common.locales&&gr.ng.common.locales[n]),Wc[n]}var Hr=(()=>((Hr=Hr||{})[Hr.LocaleId=0]="LocaleId",Hr[Hr.DayPeriodsFormat=1]="DayPeriodsFormat",Hr[Hr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Hr[Hr.DaysFormat=3]="DaysFormat",Hr[Hr.DaysStandalone=4]="DaysStandalone",Hr[Hr.MonthsFormat=5]="MonthsFormat",Hr[Hr.MonthsStandalone=6]="MonthsStandalone",Hr[Hr.Eras=7]="Eras",Hr[Hr.FirstDayOfWeek=8]="FirstDayOfWeek",Hr[Hr.WeekendRange=9]="WeekendRange",Hr[Hr.DateFormat=10]="DateFormat",Hr[Hr.TimeFormat=11]="TimeFormat",Hr[Hr.DateTimeFormat=12]="DateTimeFormat",Hr[Hr.NumberSymbols=13]="NumberSymbols",Hr[Hr.NumberFormats=14]="NumberFormats",Hr[Hr.CurrencyCode=15]="CurrencyCode",Hr[Hr.CurrencySymbol=16]="CurrencySymbol",Hr[Hr.CurrencyName=17]="CurrencyName",Hr[Hr.Currencies=18]="Currencies",Hr[Hr.Directionality=19]="Directionality",Hr[Hr.PluralCase=20]="PluralCase",Hr[Hr.ExtraData=21]="ExtraData",Hr))();const vc="en-US";let rm=vc;function Cv(n,r,s,l,p){if(n=oe(n),Array.isArray(n))for(let v=0;v<n.length;v++)Cv(n[v],r,s,l,p);else{const v=Dr(),T=Zt();let O=Ur(n)?n:oe(n.provide),B=fu(n);const K=Ci(),le=1048575&K.providerIndexes,Se=K.directiveStart,lt=K.providerIndexes>>20;if(Ur(n)||!n.multi){const Tt=new so(B,p,Lc),Jt=Tv(O,r,p?le:le+lt,Se);-1===Jt?(Ri(oo(K,T),v,O),Dv(v,n,r.length),r.push(O),K.directiveStart++,K.directiveEnd++,p&&(K.providerIndexes+=1048576),s.push(Tt),T.push(Tt)):(s[Jt]=Tt,T[Jt]=Tt)}else{const Tt=Tv(O,r,le+lt,Se),Jt=Tv(O,r,le,le+lt),bn=Tt>=0&&s[Tt],Bn=Jt>=0&&s[Jt];if(p&&!Bn||!p&&!bn){Ri(oo(K,T),v,O);const pr=function Ub(n,r,s,l,p){const v=new so(n,s,Lc);return v.multi=[],v.index=r,v.componentProviders=0,O0(v,p,l&&!s),v}(p?$b:Vb,s.length,p,l,B);!p&&Bn&&(s[Jt].providerFactory=pr),Dv(v,n,r.length,0),r.push(O),K.directiveStart++,K.directiveEnd++,p&&(K.providerIndexes+=1048576),s.push(pr),T.push(pr)}else Dv(v,n,Tt>-1?Tt:Jt,O0(s[p?Jt:Tt],B,!p&&l));!p&&l&&Bn&&s[Jt].componentProviders++}}}function Dv(n,r,s,l){const p=Ur(r),v=function du(n){return!!n.useClass}(r);if(p||v){const B=(v?oe(r.useClass):r).prototype.ngOnDestroy;if(B){const K=n.destroyHooks||(n.destroyHooks=[]);if(!p&&r.multi){const le=K.indexOf(s);-1===le?K.push(s,[l,B]):K[le+1].push(l,B)}else K.push(s,B)}}}function O0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Tv(n,r,s,l){for(let p=s;p<l;p++)if(r[p]===n)return p;return-1}function Vb(n,r,s,l){return Sv(this.multi,[])}function $b(n,r,s,l){const p=this.multi;let v;if(this.providerFactory){const T=this.providerFactory.componentProviders,O=en(s,s[1],this.providerFactory.index,l);v=O.slice(0,T),Sv(p,v);for(let B=T;B<O.length;B++)v.push(O[B])}else v=[],Sv(p,v);return v}function Sv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function k0(n,r=[]){return s=>{s.providersResolver=(l,p)=>function Bb(n,r,s){const l=Dr();if(l.firstCreatePass){const p=Rt(n);Cv(s,l.data,l.blueprint,p,!0),Cv(r,l.data,l.blueprint,p,!1)}}(l,p?p(n):n,r)}}class gp{}class P0{}function jb(n,r){return new N0(n,null!=r?r:null)}class N0 extends gp{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yf(this);const l=Er(r);this._bootstrapComponents=Wl(l.bootstrap),this._r3Injector=Up(r,s,[{provide:gp,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver}],ge(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Av extends P0{constructor(r){super(),this.moduleType=r}create(r){return new N0(this.moduleType,r)}}class Hb extends gp{constructor(r,s,l){super(),this.componentFactoryResolver=new Yf(this),this.instance=null;const p=new Mc([...r,{provide:gp,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver}],s||Xu(),l,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function xv(n,r,s=null){return new Hb(n,r,s).injector}let Gb=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const l=Ru(0,s.type),p=l.length>0?xv([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,p)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=gt({token:n,providedIn:"environment",factory:()=>new n(_e(ra))}),n})();function F0(n){n.getStandaloneInjector=r=>r.get(Gb).getOrCreateStandaloneInjector(n)}function H0(n,r,s,l){return G0(Zt(),y(),n,r,s,l)}function G0(n,r,s,l,p,v){const T=r+s;return wa(n,T,p)?function pu(n,r,s){return n[r]=s}(n,T+1,v?l.call(v,p):l(p)):function um(n,r){const s=n[r];return s===oi?void 0:s}(n,T+1)}function K0(n,r){const s=Dr();let l;const p=n+22;s.firstCreatePass?(l=function lw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const l=r[s];if(n===l.name)return l}}(r,s.pipeRegistry),s.data[p]=l,l.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(p,l.onDestroy)):l=s.data[p];const v=l.factory||(l.factory=Qi(l.type)),T=Un(Lc);try{const O=Ei(!1),B=v();return Ei(O),function g0(n,r,s,l){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=l}(s,Zt(),p,B),B}finally{Un(T)}}function Z0(n,r,s){const l=n+22,p=Zt(),v=function pi(n,r){return n[r]}(p,l);return function cm(n,r){return n[1].data[r].pure}(p,l)?G0(p,y(),r,v.transform,s,v):v.transform(s)}function Rv(n){return r=>{setTimeout(n,void 0,r)}}const zc=class fw extends a.xQ{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,l){var p,v,T;let O=r,B=s||(()=>null),K=l;if(r&&"object"==typeof r){const Se=r;O=null===(p=Se.next)||void 0===p?void 0:p.bind(Se),B=null===(v=Se.error)||void 0===v?void 0:v.bind(Se),K=null===(T=Se.complete)||void 0===T?void 0:T.bind(Se)}this.__isAsync&&(B=Rv(B),O&&(O=Rv(O)),K&&(K=Rv(K)));const le=super.subscribe({next:O,error:B,complete:K});return r instanceof se.w&&r.add(le),le}};function pw(){return this._results[pc()]()}class Ov{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=pc(),l=Ov.prototype;l[s]||(l[s]=pw)}get changes(){return this._changes||(this._changes=new zc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const l=this;l.dirty=!1;const p=lo(r);(this._changesDetected=!function Fl(n,r,s){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let p=n[l],v=r[l];if(s&&(p=s(p),v=s(v)),v!==p)return!1}return!0}(l._results,p,s))&&(l._results=p,l.length=p.length,l.last=p[this.length-1],l.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dm=(()=>{class n{}return n.__NG_ELEMENT_ID__=yw,n})();const gw=dm,mw=class extends gw{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(r,s){const l=this._declarationTContainer.tViews,p=jf(this._declarationLView,l,r,16,null,l.declTNode,null,null,null,null,s||null);p[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(p[19]=T.createEmbeddedView(l)),zh(l,p,r),new Yd(p)}};function yw(){return Jy(Ci(),Zt())}function Jy(n,r){return 4&n.type?new mw(r,n,D(n,r)):null}let e_=(()=>{class n{}return n.__NG_ELEMENT_ID__=_w,n})();function _w(){return J0(Ci(),Zt())}const vw=e_,Q0=class extends vw{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return D(this._hostTNode,this._hostLView)}get injector(){return new Da(this._hostTNode,this._hostLView)}get parentInjector(){const r=sn(this._hostTNode,this._hostLView);if(Xl(r)){const s=za(r,this._hostLView),l=xs(r);return new Da(s[1].data[l+8],s)}return new Da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=X0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,l){let p,v;"number"==typeof l?p=l:null!=l&&(p=l.index,v=l.injector);const T=r.createEmbeddedView(s||{},v);return this.insert(T,p),T}createComponent(r,s,l,p,v){const T=r&&!function ps(n){return"function"==typeof n}(r);let O;if(T)O=s;else{const Se=s||{};O=Se.index,l=Se.injector,p=Se.projectableNodes,v=Se.environmentInjector||Se.ngModuleRef}const B=T?r:new Kd(et(r)),K=l||this.parentInjector;if(!v&&null==B.ngModule){const lt=(T?K:this.parentInjector).get(ra,null);lt&&(v=lt)}const le=B.create(K,p,void 0,v);return this.insert(le.hostView,O),le}insert(r,s){const l=r._lView,p=l[1];if(function Fs(n){return bt(n[3])}(l)){const le=this.indexOf(r);if(-1!==le)this.detach(le);else{const Se=l[3],lt=new Q0(Se,Se[6],Se[3]);lt.detach(lt.indexOf(r))}}const v=this._adjustIndex(s),T=this._lContainer;!function $t(n,r,s,l){const p=10+l,v=s.length;l>0&&(s[p-1][4]=r),l<v-10?(r[4]=s[p],ll(s,10+l,r)):(s.push(r),r[4]=null),r[3]=s;const T=r[17];null!==T&&s!==T&&function Bt(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(T,r);const O=r[19];null!==O&&O.insertView(n),r[2]|=64}(p,l,T,v);const O=Df(v,T),B=l[11],K=Ah(B,T[7]);return null!==K&&function ae(n,r,s,l,p,v){l[0]=p,l[6]=r,cd(n,l,s,1,p,v)}(p,T[6],B,l,K,O),r.attachToViewContainerRef(),ll(kv(T),v,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=X0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=kn(this._lContainer,s);l&&(At(kv(this._lContainer),s),sr(l[1],l))}detach(r){const s=this._adjustIndex(r,-1),l=kn(this._lContainer,s);return l&&null!=At(kv(this._lContainer),s)?new Yd(l):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function X0(n){return n[8]}function kv(n){return n[8]||(n[8]=[])}function J0(n,r){let s;const l=r[n.index];if(bt(l))s=l;else{let p;if(8&n.type)p=Kr(l);else{const v=r[11];p=v.createComment("");const T=Pi(n,r);lc(v,Ah(v,T),p,function c_(n,r){return n.nextSibling(r)}(v,T),!1)}r[n.index]=s=pg(l,r,p,n),zd(r,s)}return new Q0(s,n,r)}class Pv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Pv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Nv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,p=[];for(let v=0;v<l;v++){const T=s.getByIndex(v);p.push(this.queries[T.indexInDeclarationView].clone())}return new Nv(p)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==lE(r,s).matches&&this.queries[s].setDirty()}}class eE{constructor(r,s,l=null){this.predicate=r,this.flags=s,this.read=l}}class Fv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const p=null!==s?s.length:0,v=this.getByIndex(l).embeddedTView(r,p);v&&(v.indexInDeclarationView=l,null!==s?s.push(v):s=[v])}return null!==s?new Fv(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Lv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new Lv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let p=0;p<l.length;p++){const v=l[p];this.matchTNodeWithReadOption(r,s,ww(s,v)),this.matchTNodeWithReadOption(r,s,Ft(s,r,v,!1,!1))}else l===dm?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Ft(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const p=this.metadata.read;if(null!==p)if(p===g||p===e_||p===dm&&4&s.type)this.addMatch(s.index,-2);else{const v=Ft(s,r,p,!1,!1);null!==v&&this.addMatch(s.index,v)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function ww(n,r){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function Cw(n,r,s,l){return-1===s?function Iw(n,r){return 11&n.type?D(n,r):4&n.type?Jy(n,r):null}(r,n):-2===s?function Dw(n,r,s){return s===g?D(r,n):s===dm?Jy(r,n):s===e_?J0(r,n):void 0}(n,r,l):en(n,n[1],s,r)}function tE(n,r,s,l){const p=r[19].queries[l];if(null===p.matches){const v=n.data,T=s.matches,O=[];for(let B=0;B<T.length;B+=2){const K=T[B];O.push(K<0?null:Cw(r,v[K],T[B+1],s.metadata.read))}p.matches=O}return p.matches}function Bv(n,r,s,l){const p=n.queries.getByIndex(s),v=p.matches;if(null!==v){const T=tE(n,r,p,s);for(let O=0;O<v.length;O+=2){const B=v[O];if(B>0)l.push(T[O/2]);else{const K=v[O+1],le=r[-B];for(let Se=10;Se<le.length;Se++){const lt=le[Se];lt[17]===lt[3]&&Bv(lt[1],lt,K,l)}if(null!==le[9]){const Se=le[9];for(let lt=0;lt<Se.length;lt++){const Tt=Se[lt];Bv(Tt[1],Tt,K,l)}}}}}return l}function nE(n){const r=Zt(),s=Dr(),l=ei();lr(l+1);const p=lE(s,l);if(n.dirty&&function Ts(n){return 4==(4&n[2])}(r)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const v=p.crossesNgTemplate?Bv(s,r,l,[]):tE(s,r,p,l);n.reset(v,E),n.notifyOnChanges()}return!0}return!1}function rE(n,r,s){const l=Dr();l.firstCreatePass&&(aE(l,new eE(n,r,s),-1),2==(2&r)&&(l.staticViewQueries=!0)),oE(l,Zt(),r)}function iE(n,r,s,l){const p=Dr();if(p.firstCreatePass){const v=Ci();aE(p,new eE(r,s,l),v.index),function Sw(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(p,n),2==(2&s)&&(p.staticContentQueries=!0)}oE(p,Zt(),s)}function sE(){return function Tw(n,r){return n[19].queries[r].queryList}(Zt(),ei())}function oE(n,r,s){const l=new Ov(4==(4&s));Qm(n,r,l,l.destroy),null===r[19]&&(r[19]=new Nv),r[19].queries.push(new Pv(l))}function aE(n,r,s){null===n.queries&&(n.queries=new Fv),n.queries.track(new Lv(r,s))}function lE(n,r){return n.queries.getByIndex(r)}function n_(...n){}const SE=new Qn("Application Initializer");let r_=(()=>{class n{constructor(s){this.appInits=s,this.resolve=n_,this.reject=n_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,p)=>{this.resolve=l,this.reject=p})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const v=this.appInits[p]();if(ih(v))s.push(v);else if($c(v)){const T=new Promise((O,B)=>{v.subscribe({complete:O,error:B})});s.push(T)}}Promise.all(s).then(()=>{l()}).catch(p=>{this.reject(p)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(_e(SE,8))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AE=new Qn("AppId",{providedIn:"root",factory:function xE(){return`${Hv()}${Hv()}${Hv()}`}});function Hv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ME=new Qn("Platform Initializer"),Yw=new Qn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),RE=new Qn("appBootstrapListener");let Kw=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const i_=new Qn("LocaleId",{providedIn:"root",factory:()=>wt(i_,qt.Optional|qt.SkipSelf)||function Zw(){return"undefined"!=typeof $localize&&$localize.locale||vc}()}),Qw=new Qn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Xw{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Jw=(()=>{class n{compileModuleSync(s){return new Av(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),v=Wl(Er(s).declarations).reduce((T,O)=>{const B=et(O);return B&&T.push(new Kd(B)),T},[]);return new Xw(l,v)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nI=(()=>Promise.resolve(0))();function Gv(n){"undefined"==typeof Zone?nI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class $u{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zc(!1),this.onMicrotaskEmpty=new zc(!1),this.onStable=new zc(!1),this.onError=new zc(!1),"undefined"==typeof Zone)throw new Qe(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!l&&s,p.shouldCoalesceRunChangeDetection=l,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function rI(){let n=gr.requestAnimationFrame,r=gr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function oI(n){const r=()=>{!function sI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(gr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,zv(n),n.isCheckStableRunning=!0,Wv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),zv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,p,v,T,O)=>{try{return PE(n),s.invokeTask(p,v,T,O)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&r(),NE(n)}},onInvoke:(s,l,p,v,T,O,B)=>{try{return PE(n),s.invoke(p,v,T,O,B)}finally{n.shouldCoalesceRunChangeDetection&&r(),NE(n)}},onHasTask:(s,l,p,v)=>{s.hasTask(p,v),l===p&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,zv(n),Wv(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(s,l,p,v)=>(s.handleError(p,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$u.isInAngularZone())throw new Qe(909,!1)}static assertNotInAngularZone(){if($u.isInAngularZone())throw new Qe(909,!1)}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,p){const v=this._inner,T=v.scheduleEventTask("NgZoneEvent: "+p,r,iI,n_,n_);try{return v.runTask(T,s,l)}finally{v.cancelTask(T)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const iI={};function Wv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function PE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function NE(n){n._nesting--,Wv(n)}class aI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zc,this.onMicrotaskEmpty=new zc,this.onStable=new zc,this.onError=new zc}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,p){return r.apply(s,l)}}const FE=new Qn(""),LE=new Qn("");let fm,lI=(()=>{class n{constructor(s,l,p){this._ngZone=s,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fm||(function uI(n){fm=n}(p),p.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$u.assertNotInAngularZone(),Gv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,p){let v=-1;l&&l>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==v),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:v,updateCb:p})}whenStable(s,l,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,p){return[]}}return n.\u0275fac=function(s){return new(s||n)(_e($u),_e(BE),_e(LE))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})(),BE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){var p;return null!==(p=null==fm?void 0:fm.findTestabilityInTree(this,s,l))&&void 0!==p?p:null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),qc=null;const VE=new Qn("AllowMultipleToken"),qv=new Qn("PlatformDestroyListeners");class hI{constructor(r,s){this.name=r,this.token=s}}function UE(n,r,s=[]){const l=`Platform: ${r}`,p=new Qn(l);return(v=[])=>{let T=Yv();if(!T||T.injector.get(VE,!1)){const O=[...s,...v,{provide:p,useValue:!0}];n?n(O):function fI(n){if(qc&&!qc.get(VE,!1))throw new Qe(400,!1);qc=n;const r=n.get(HE);(function $E(n){const r=n.get(ME,null);r&&r.forEach(s=>s())})(n)}(function jE(n=[],r){return Fc.create({name:r,providers:[{provide:hu,useValue:"platform"},{provide:qv,useValue:new Set([()=>qc=null])},...n]})}(O,l))}return function gI(n){const r=Yv();if(!r)throw new Qe(401,!1);return r}()}}function Yv(){var n;return null!==(n=null==qc?void 0:qc.get(HE))&&void 0!==n?n:null}let HE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const p=function WE(n,r){let s;return s="noop"===n?new aI:("zone.js"===n?void 0:n)||new $u(r),s}(null==l?void 0:l.ngZone,function GE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),v=[{provide:$u,useValue:p}];return p.run(()=>{const T=Fc.create({providers:v,parent:this.injector,name:s.moduleType.name}),O=s.create(T),B=O.injector.get(ad,null);if(!B)throw new Qe(402,!1);return p.runOutsideAngular(()=>{const K=p.onError.subscribe({next:le=>{B.handleError(le)}});O.onDestroy(()=>{o_(this._modules,O),K.unsubscribe()})}),function zE(n,r,s){try{const l=s();return ih(l)?l.catch(p=>{throw r.runOutsideAngular(()=>n.handleError(p)),p}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(B,p,()=>{const K=O.injector.get(r_);return K.runInitializers(),K.donePromise.then(()=>(function im(n){ot(n,"Expected localeId to be defined"),"string"==typeof n&&(rm=n.toLowerCase().replace(/_/g,"-"))}(O.injector.get(i_,vc)||vc),this._moduleDoBootstrap(O),O))})})}bootstrapModule(s,l=[]){const p=qE({},l);return function cI(n,r,s){const l=new Av(s);return Promise.resolve(l)}(0,0,s).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(s){const l=s.injector.get(s_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(p=>l.bootstrap(p));else{if(!s.instance.ngDoBootstrap)throw new Qe(403,!1);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Qe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const s=this._injector.get(qv,null);s&&(s.forEach(l=>l()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(_e(Fc))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function qE(n,r){return Array.isArray(r)?r.reduce(qE,n):Object.assign(Object.assign({},n),r)}let s_=(()=>{class n{constructor(s,l,p){this._zone=s,this._injector=l,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new z.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),T=new z.y(O=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{$u.assertNotInAngularZone(),Gv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const K=this._zone.onUnstable.subscribe(()=>{$u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{B.unsubscribe(),K.unsubscribe()}});this.isStable=(0,Le.T)(v,T.pipe((0,Ne.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,l){const p=s instanceof ec;if(!this._injector.get(r_).done)throw!p&&dr(s),new Qe(405,false);let T;T=p?s:this._injector.get(Dl).resolveComponentFactory(s),this.componentTypes.push(T.componentType);const O=function dI(n){return n.isBoundToModule}(T)?void 0:this._injector.get(gp),K=T.create(Fc.NULL,[],l||T.selector,O),le=K.location.nativeElement,Se=K.injector.get(FE,null);return null==Se||Se.registerApplication(le),K.onDestroy(()=>{this.detachView(K.hostView),o_(this.components,K),null==Se||Se.unregisterApplication(le)}),this._loadComponent(K),K}tick(){if(this._runningTick)throw new Qe(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;o_(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(RE,[]).concat(this._bootstrapListeners).forEach(p=>p(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>o_(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Qe(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(_e($u),_e(ra),_e(ad))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function o_(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let KE=!0,ZE=!1;function yI(){return ZE=!0,KE}function _I(){if(ZE)throw new Error("Cannot enable prod mode after platform setup.");KE=!1}let vI=(()=>{class n{}return n.__NG_ELEMENT_ID__=EI,n})();function EI(n){return function bI(n,r,s){if(qe(n)&&!s){const l=Cr(n.index,r);return new Yd(l,l)}return 47&n.type?new Yd(r[16],r):null}(Ci(),Zt(),16==(16&n))}class eb{constructor(){}supports(r){return md(r)}create(r){return new SI(r)}}const TI=(n,r)=>r;class SI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||TI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,p=0,v=null;for(;s||l;){const T=!l||s&&s.currentIndex<nb(l,p,v)?s:l,O=nb(T,p,v),B=T.currentIndex;if(T===l)p--,l=l._nextRemoved;else if(s=s._next,null==T.previousIndex)p++;else{v||(v=[]);const K=O-p,le=B-p;if(K!=le){for(let lt=0;lt<K;lt++){const Tt=lt<v.length?v[lt]:v[lt]=0,Jt=Tt+lt;le<=Jt&&Jt<K&&(v[lt]=Tt+1)}v[T.previousIndex]=le-K}}O!==B&&r(T,O,B)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!md(r))throw new Qe(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let p,v,T,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let O=0;O<this.length;O++)v=r[O],T=this._trackByFn(O,v),null!==s&&Object.is(s.trackById,T)?(l&&(s=this._verifyReinsertion(s,v,T,O)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,T,O),l=!0),s=s._next}else p=0,function Zf(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[pc()]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,O=>{T=this._trackByFn(p,O),null!==s&&Object.is(s.trackById,T)?(l&&(s=this._verifyReinsertion(s,O,T,p)),Object.is(s.item,O)||this._addIdentityChange(s,O)):(s=this._mismatch(s,O,T,p),l=!0),s=s._next,p++}),this.length=p;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,p){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,v,p)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,p))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,v,p)):r=this._addAfter(new AI(s,l),v,p),r}_verifyReinsertion(r,s,l,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==v?r=this._reinsertAfter(v,r._prev,p):r.currentIndex!=p&&(r.currentIndex=p,this._addToMoves(r,p)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const p=r._prevRemoved,v=r._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const p=null===s?this._itHead:s._next;return r._next=p,r._prev=s,null===p?this._itTail=r:p._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new tb),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tb),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class AI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class tb{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new xI,this.map.set(s,l)),l.add(r)}get(r,s){const p=this.map.get(r);return p?p.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nb(n,r,s){const l=n.previousIndex;if(null===l)return l;let p=0;return s&&l<s.length&&(p=s[l]),l+r+p}class rb{constructor(){}supports(r){return r instanceof Map||tf(r)}create(){return new MI}}class MI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||tf(r)))throw new Qe(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,p)=>{if(s&&s.key===p)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const v=this._getOrCreateRecordForKey(p,l);s=this._insertBeforeOrAppend(s,v)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const p=this._records.get(r);this._maybeAddToChanges(p,s);const v=p._prev,T=p._next;return v&&(v._next=T),T&&(T._prev=v),p._next=null,p._prev=null,p}const l=new RI(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class RI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ib(){return new Jv([new eb])}let Jv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const p=l.factories.slice();s=s.concat(p)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||ib()),deps:[[n,new Jo,new Yi]]}}find(s){const l=this.factories.find(p=>p.supports(s));if(null!=l)return l;throw new Qe(901,!1)}}return n.\u0275prov=gt({token:n,providedIn:"root",factory:ib}),n})();function sb(){return new e0([new rb])}let e0=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const p=l.factories.slice();s=s.concat(p)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||sb()),deps:[[n,new Jo,new Yi]]}}find(s){const l=this.factories.find(p=>p.supports(s));if(l)return l;throw new Qe(901,!1)}}return n.\u0275prov=gt({token:n,providedIn:"root",factory:sb}),n})();const PI=UE(null,"core",[]);let NI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(_e(s_))},n.\u0275mod=jn({type:n}),n.\u0275inj=Ut({}),n})();function FI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4182:(on,ut,H)=>{"use strict";H.d(ut,{u5:()=>Ss,JU:()=>oe,a5:()=>er});var a=H(5e3),z=(H(9808),H(5254)),Le=H(6498),Ne=H(6688),fe=H(4850),ve=H(7830);function be(G,V){return new Le.y(b=>{const d=G.length;if(0===d)return void b.complete();const I=new Array(d);let y=0,R=0;for(let Y=0;Y<d;Y++){const ke=(0,z.D)(G[Y]);let It=!1;b.add(ke.subscribe({next:Pt=>{It||(It=!0,R++),I[Y]=Pt},error:Pt=>b.error(Pt),complete:()=>{y++,(y===d||!It)&&(R===d&&b.next(V?V.reduce((Pt,rn,Mn)=>(Pt[rn]=I[Mn],Pt),{}):I),b.complete())}}))}})}const oe=new a.OlP("NgValueAccessor");function ze(G){return null!=G}function ot(G){return(0,a.QGY)(G)?(0,z.D)(G):G}function De(G){let V={};return G.forEach(b=>{V=null!=b?Object.assign(Object.assign({},V),b):V}),0===Object.keys(V).length?null:V}function $e(G,V){return V.map(b=>b(G))}function at(G){return G.map(V=>function Xe(G){return!G.validate}(V)?V:b=>V.validate(b))}function ft(G){return null!=G?function gt(G){if(!G)return null;const V=G.filter(ze);return 0==V.length?null:function(b){return De($e(b,V))}}(at(G)):null}function Nt(G){return null!=G?function Ut(G){if(!G)return null;const V=G.filter(ze);return 0==V.length?null:function(b){return function ge(...G){if(1===G.length){const V=G[0];if((0,Ne.k)(V))return be(V,null);if((0,ve.K)(V)&&Object.getPrototypeOf(V)===Object.prototype){const b=Object.keys(V);return be(b.map(d=>V[d]),b)}}if("function"==typeof G[G.length-1]){const V=G.pop();return be(G=1===G.length&&(0,Ne.k)(G[0])?G[0]:G,null).pipe((0,fe.U)(b=>V(...b)))}return be(G,null)}($e(b,V).map(ot)).pipe((0,fe.U)(De))}}(at(G)):null}class er extends class Wr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=ft(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=Nt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,b){return!!this.control&&this.control.hasError(V,b)}getError(V,b){return this.control?this.control.getError(V,b):null}}{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let fn=(()=>{class G{}return G.\u0275fac=function(b){return new(b||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({}),G})(),xo=(()=>{class G{}return G.\u0275fac=function(b){return new(b||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[fn]}),G})(),Ss=(()=>{class G{}return G.\u0275fac=function(b){return new(b||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[xo]}),G})()},2313:(on,ut,H)=>{"use strict";H.d(ut,{Dx:()=>ur,b2:()=>Qr,q6:()=>Wr});var a=H(9808),se=H(5e3);class z extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Le extends z{static makeCurrent(){(0,a.HT)(new Le)}onAndCancel(Be,Me,Et){return Be.addEventListener(Me,Et,!1),()=>{Be.removeEventListener(Me,Et,!1)}}dispatchEvent(Be,Me){Be.dispatchEvent(Me)}remove(Be){Be.parentNode&&Be.parentNode.removeChild(Be)}createElement(Be,Me){return(Me=Me||this.getDefaultDocument()).createElement(Be)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Be){return Be.nodeType===Node.ELEMENT_NODE}isShadowRoot(Be){return Be instanceof DocumentFragment}getGlobalEventTarget(Be,Me){return"window"===Me?window:"document"===Me?Be:"body"===Me?Be.body:null}getBaseHref(Be){const Me=function fe(){return Ne=Ne||document.querySelector("base"),Ne?Ne.getAttribute("href"):null}();return null==Me?null:function ge(mt){ve=ve||document.createElement("a"),ve.setAttribute("href",mt);const Be=ve.pathname;return"/"===Be.charAt(0)?Be:`/${Be}`}(Me)}resetBaseElement(){Ne=null}getUserAgent(){return window.navigator.userAgent}getCookie(Be){return(0,a.Mx)(document.cookie,Be)}}let ve,Ne=null;const be=new se.OlP("TRANSITION_ID"),de=[{provide:se.ip1,useFactory:function ue(mt,Be,Me){return()=>{Me.get(se.CZH).donePromise.then(()=>{const Et=(0,a.q)(),Mt=Be.querySelectorAll(`style[ng-transition="${mt}"]`);for(let Wn=0;Wn<Mt.length;Wn++)Et.remove(Mt[Wn])})}},deps:[be,a.K0,se.zs3],multi:!0}];let pe=(()=>{class mt{build(){return new XMLHttpRequest}}return mt.\u0275fac=function(Me){return new(Me||mt)},mt.\u0275prov=se.Yz7({token:mt,factory:mt.\u0275fac}),mt})();const Ue=new se.OlP("EventManagerPlugins");let Qe=(()=>{class mt{constructor(Me,Et){this._zone=Et,this._eventNameToPlugin=new Map,Me.forEach(Mt=>Mt.manager=this),this._plugins=Me.slice().reverse()}addEventListener(Me,Et,Mt){return this._findPluginFor(Et).addEventListener(Me,Et,Mt)}addGlobalEventListener(Me,Et,Mt){return this._findPluginFor(Et).addGlobalEventListener(Me,Et,Mt)}getZone(){return this._zone}_findPluginFor(Me){const Et=this._eventNameToPlugin.get(Me);if(Et)return Et;const Mt=this._plugins;for(let Wn=0;Wn<Mt.length;Wn++){const Vn=Mt[Wn];if(Vn.supports(Me))return this._eventNameToPlugin.set(Me,Vn),Vn}throw new Error(`No event manager plugin found for event ${Me}`)}}return mt.\u0275fac=function(Me){return new(Me||mt)(se.LFG(Ue),se.LFG(se.R0b))},mt.\u0275prov=se.Yz7({token:mt,factory:mt.\u0275fac}),mt})();class nt{constructor(Be){this._doc=Be}addGlobalEventListener(Be,Me,Et){const Mt=(0,a.q)().getGlobalEventTarget(this._doc,Be);if(!Mt)throw new Error(`Unsupported event target ${Mt} for event ${Me}`);return this.addEventListener(Mt,Me,Et)}}let Oe=(()=>{class mt{constructor(){this._stylesSet=new Set}addStyles(Me){const Et=new Set;Me.forEach(Mt=>{this._stylesSet.has(Mt)||(this._stylesSet.add(Mt),Et.add(Mt))}),this.onStylesAdded(Et)}onStylesAdded(Me){}getAllStyles(){return Array.from(this._stylesSet)}}return mt.\u0275fac=function(Me){return new(Me||mt)},mt.\u0275prov=se.Yz7({token:mt,factory:mt.\u0275fac}),mt})(),we=(()=>{class mt extends Oe{constructor(Me){super(),this._doc=Me,this._hostNodes=new Map,this._hostNodes.set(Me.head,[])}_addStylesToHost(Me,Et,Mt){Me.forEach(Wn=>{const Vn=this._doc.createElement("style");Vn.textContent=Wn,Mt.push(Et.appendChild(Vn))})}addHost(Me){const Et=[];this._addStylesToHost(this._stylesSet,Me,Et),this._hostNodes.set(Me,Et)}removeHost(Me){const Et=this._hostNodes.get(Me);Et&&Et.forEach(dt),this._hostNodes.delete(Me)}onStylesAdded(Me){this._hostNodes.forEach((Et,Mt)=>{this._addStylesToHost(Me,Mt,Et)})}ngOnDestroy(){this._hostNodes.forEach(Me=>Me.forEach(dt))}}return mt.\u0275fac=function(Me){return new(Me||mt)(se.LFG(a.K0))},mt.\u0275prov=se.Yz7({token:mt,factory:mt.\u0275fac}),mt})();function dt(mt){(0,a.q)().remove(mt)}const st={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ht=/%COMP%/g;function te(mt,Be,Me){for(let Et=0;Et<Be.length;Et++){let Mt=Be[Et];Array.isArray(Mt)?te(mt,Mt,Me):(Mt=Mt.replace(ht,mt),Me.push(Mt))}return Me}function he(mt){return Be=>{if("__ngUnwrap__"===Be)return mt;!1===mt(Be)&&(Be.preventDefault(),Be.returnValue=!1)}}let Te=(()=>{class mt{constructor(Me,Et,Mt){this.eventManager=Me,this.sharedStylesHost=Et,this.appId=Mt,this.rendererByCompId=new Map,this.defaultRenderer=new Je(Me)}createRenderer(Me,Et){if(!Me||!Et)return this.defaultRenderer;switch(Et.encapsulation){case se.ifc.Emulated:{let Mt=this.rendererByCompId.get(Et.id);return Mt||(Mt=new ot(this.eventManager,this.sharedStylesHost,Et,this.appId),this.rendererByCompId.set(Et.id,Mt)),Mt.applyToHost(Me),Mt}case 1:case se.ifc.ShadowDom:return new De(this.eventManager,this.sharedStylesHost,Me,Et);default:if(!this.rendererByCompId.has(Et.id)){const Mt=te(Et.id,Et.styles,[]);this.sharedStylesHost.addStyles(Mt),this.rendererByCompId.set(Et.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return mt.\u0275fac=function(Me){return new(Me||mt)(se.LFG(Qe),se.LFG(we),se.LFG(se.AFp))},mt.\u0275prov=se.Yz7({token:mt,factory:mt.\u0275fac}),mt})();class Je{constructor(Be){this.eventManager=Be,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Be,Me){return Me?document.createElementNS(st[Me]||Me,Be):document.createElement(Be)}createComment(Be){return document.createComment(Be)}createText(Be){return document.createTextNode(Be)}appendChild(Be,Me){(ze(Be)?Be.content:Be).appendChild(Me)}insertBefore(Be,Me,Et){Be&&(ze(Be)?Be.content:Be).insertBefore(Me,Et)}removeChild(Be,Me){Be&&Be.removeChild(Me)}selectRootElement(Be,Me){let Et="string"==typeof Be?document.querySelector(Be):Be;if(!Et)throw new Error(`The selector "${Be}" did not match any elements`);return Me||(Et.textContent=""),Et}parentNode(Be){return Be.parentNode}nextSibling(Be){return Be.nextSibling}setAttribute(Be,Me,Et,Mt){if(Mt){Me=Mt+":"+Me;const Wn=st[Mt];Wn?Be.setAttributeNS(Wn,Me,Et):Be.setAttribute(Me,Et)}else Be.setAttribute(Me,Et)}removeAttribute(Be,Me,Et){if(Et){const Mt=st[Et];Mt?Be.removeAttributeNS(Mt,Me):Be.removeAttribute(`${Et}:${Me}`)}else Be.removeAttribute(Me)}addClass(Be,Me){Be.classList.add(Me)}removeClass(Be,Me){Be.classList.remove(Me)}setStyle(Be,Me,Et,Mt){Mt&(se.JOm.DashCase|se.JOm.Important)?Be.style.setProperty(Me,Et,Mt&se.JOm.Important?"important":""):Be.style[Me]=Et}removeStyle(Be,Me,Et){Et&se.JOm.DashCase?Be.style.removeProperty(Me):Be.style[Me]=""}setProperty(Be,Me,Et){Be[Me]=Et}setValue(Be,Me){Be.nodeValue=Me}listen(Be,Me,Et){return"string"==typeof Be?this.eventManager.addGlobalEventListener(Be,Me,he(Et)):this.eventManager.addEventListener(Be,Me,he(Et))}}function ze(mt){return"TEMPLATE"===mt.tagName&&void 0!==mt.content}class ot extends Je{constructor(Be,Me,Et,Mt){super(Be),this.component=Et;const Wn=te(Mt+"-"+Et.id,Et.styles,[]);Me.addStyles(Wn),this.contentAttr=function Ee(mt){return"_ngcontent-%COMP%".replace(ht,mt)}(Mt+"-"+Et.id),this.hostAttr=function Z(mt){return"_nghost-%COMP%".replace(ht,mt)}(Mt+"-"+Et.id)}applyToHost(Be){super.setAttribute(Be,this.hostAttr,"")}createElement(Be,Me){const Et=super.createElement(Be,Me);return super.setAttribute(Et,this.contentAttr,""),Et}}class De extends Je{constructor(Be,Me,Et,Mt){super(Be),this.sharedStylesHost=Me,this.hostEl=Et,this.shadowRoot=Et.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Wn=te(Mt.id,Mt.styles,[]);for(let Vn=0;Vn<Wn.length;Vn++){const tn=document.createElement("style");tn.textContent=Wn[Vn],this.shadowRoot.appendChild(tn)}}nodeOrShadowRoot(Be){return Be===this.hostEl?this.shadowRoot:Be}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Be,Me){return super.appendChild(this.nodeOrShadowRoot(Be),Me)}insertBefore(Be,Me,Et){return super.insertBefore(this.nodeOrShadowRoot(Be),Me,Et)}removeChild(Be,Me){return super.removeChild(this.nodeOrShadowRoot(Be),Me)}parentNode(Be){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Be)))}}let $e=(()=>{class mt extends nt{constructor(Me){super(Me)}supports(Me){return!0}addEventListener(Me,Et,Mt){return Me.addEventListener(Et,Mt,!1),()=>this.removeEventListener(Me,Et,Mt)}removeEventListener(Me,Et,Mt){return Me.removeEventListener(Et,Mt)}}return mt.\u0275fac=function(Me){return new(Me||mt)(se.LFG(a.K0))},mt.\u0275prov=se.Yz7({token:mt,factory:mt.\u0275fac}),mt})();const Xe=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gt={alt:mt=>mt.altKey,control:mt=>mt.ctrlKey,meta:mt=>mt.metaKey,shift:mt=>mt.shiftKey};let ft=(()=>{class mt extends nt{constructor(Me){super(Me)}supports(Me){return null!=mt.parseEventName(Me)}addEventListener(Me,Et,Mt){const Wn=mt.parseEventName(Et),Vn=mt.eventCallback(Wn.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(Me,Wn.domEventName,Vn))}static parseEventName(Me){const Et=Me.toLowerCase().split("."),Mt=Et.shift();if(0===Et.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const Wn=mt._normalizeKey(Et.pop());let Vn="",tn=Et.indexOf("code");if(tn>-1&&(Et.splice(tn,1),Vn="code."),Xe.forEach(Kn=>{const kr=Et.indexOf(Kn);kr>-1&&(Et.splice(kr,1),Vn+=Kn+".")}),Vn+=Wn,0!=Et.length||0===Wn.length)return null;const Sn={};return Sn.domEventName=Mt,Sn.fullKey=Vn,Sn}static matchEventFullKeyCode(Me,Et){let Mt=at[Me.key]||Me.key,Wn="";return Et.indexOf("code.")>-1&&(Mt=Me.code,Wn="code."),!(null==Mt||!Mt)&&(Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),Xe.forEach(Vn=>{Vn!==Mt&&(0,gt[Vn])(Me)&&(Wn+=Vn+".")}),Wn+=Mt,Wn===Et)}static eventCallback(Me,Et,Mt){return Wn=>{mt.matchEventFullKeyCode(Wn,Me)&&Mt.runGuarded(()=>Et(Wn))}}static _normalizeKey(Me){return"esc"===Me?"escape":Me}}return mt.\u0275fac=function(Me){return new(Me||mt)(se.LFG(a.K0))},mt.\u0275prov=se.Yz7({token:mt,factory:mt.\u0275fac}),mt})();const Wr=(0,se.eFA)(se._c5,"browser",[{provide:se.Lbi,useValue:a.bD},{provide:se.g9A,useValue:function yn(){Le.makeCurrent()},multi:!0},{provide:a.K0,useFactory:function vr(){return(0,se.RDi)(document),document},deps:[]}]),er=new se.OlP(""),qt=[{provide:se.rWj,useClass:class oe{addToWindow(Be){se.dqk.getAngularTestability=(Et,Mt=!0)=>{const Wn=Be.findTestabilityInTree(Et,Mt);if(null==Wn)throw new Error("Could not find testability for element.");return Wn},se.dqk.getAllAngularTestabilities=()=>Be.getAllTestabilities(),se.dqk.getAllAngularRootElements=()=>Be.getAllRootElements(),se.dqk.frameworkStabilizers||(se.dqk.frameworkStabilizers=[]),se.dqk.frameworkStabilizers.push(Et=>{const Mt=se.dqk.getAllAngularTestabilities();let Wn=Mt.length,Vn=!1;const tn=function(Sn){Vn=Vn||Sn,Wn--,0==Wn&&Et(Vn)};Mt.forEach(function(Sn){Sn.whenStable(tn)})})}findTestabilityInTree(Be,Me,Et){if(null==Me)return null;const Mt=Be.getTestability(Me);return null!=Mt?Mt:Et?(0,a.q)().isShadowRoot(Me)?this.findTestabilityInTree(Be,Me.host,!0):this.findTestabilityInTree(Be,Me.parentElement,!0):null}},deps:[]},{provide:se.lri,useClass:se.dDg,deps:[se.R0b,se.eoX,se.rWj]},{provide:se.dDg,useClass:se.dDg,deps:[se.R0b,se.eoX,se.rWj]}],Yn=[{provide:se.zSh,useValue:"root"},{provide:se.qLn,useFactory:function En(){return new se.qLn},deps:[]},{provide:Ue,useClass:$e,multi:!0,deps:[a.K0,se.R0b,se.Lbi]},{provide:Ue,useClass:ft,multi:!0,deps:[a.K0]},{provide:Te,useClass:Te,deps:[Qe,we,se.AFp]},{provide:se.FYo,useExisting:Te},{provide:Oe,useExisting:we},{provide:we,useClass:we,deps:[a.K0]},{provide:Qe,useClass:Qe,deps:[Ue,se.R0b]},{provide:a.JF,useClass:pe,deps:[]},[]];let Qr=(()=>{class mt{constructor(Me){}static withServerTransition(Me){return{ngModule:mt,providers:[{provide:se.AFp,useValue:Me.appId},{provide:be,useExisting:se.AFp},de]}}}return mt.\u0275fac=function(Me){return new(Me||mt)(se.LFG(er,12))},mt.\u0275mod=se.oAB({type:mt}),mt.\u0275inj=se.cJS({providers:[...Yn,...qt],imports:[a.ez,se.hGG]}),mt})(),ur=(()=>{class mt{constructor(Me){this._doc=Me}getTitle(){return this._doc.title}setTitle(Me){this._doc.title=Me||""}}return mt.\u0275fac=function(Me){return new(Me||mt)(se.LFG(a.K0))},mt.\u0275prov=se.Yz7({token:mt,factory:function(Me){let Et=null;return Et=Me?new Me:function an(){return new ur((0,se.LFG)(a.K0))}(),Et},providedIn:"root"}),mt})();"undefined"!=typeof window&&window},4740:(on,ut,H)=>{"use strict";H.d(ut,{gz:()=>ds,y6:()=>xr,OD:()=>Ht,eC:()=>an,wm:()=>gu,F0:()=>Pr,rH:()=>Qn,Bz:()=>Uu,Hx:()=>Er});var a=H(5e3),se=H(5254),z=H(1086),Le=H(591),Ne=H(4450),fe=H(2866),ve=H(6688),ge=H(826),be=H(448),ue=H(3009);const de={};function oe(...A){let x,C;return(0,fe.K)(A[A.length-1])&&(C=A.pop()),"function"==typeof A[A.length-1]&&(x=A.pop()),1===A.length&&(0,ve.k)(A[0])&&(A=A[0]),(0,ue.n)(A,C).lift(new pe(x))}class pe{constructor(x){this.resultSelector=x}call(x,C){return C.subscribe(new Ue(x,this.resultSelector))}}class Ue extends ge.L{constructor(x,C){super(x),this.resultSelector=C,this.active=0,this.values=[],this.observables=[]}_next(x){this.values.push(de),this.observables.push(x)}_complete(){const x=this.observables,C=x.length;if(0===C)this.destination.complete();else{this.active=C,this.toRespond=C;for(let N=0;N<C;N++)this.add((0,be.D)(this,x[N],void 0,N))}}notifyComplete(x){0==(this.active-=1)&&this.destination.complete()}notifyNext(x,C,N){const j=this.values,Ae=this.toRespond?j[N]===de?--this.toRespond:this.toRespond:0;j[N]=C,0===Ae&&(this.resultSelector?this._tryResultSelector(j):this.destination.next(j.slice()))}_tryResultSelector(x){let C;try{C=this.resultSelector.apply(this,x)}catch(N){return void this.destination.error(N)}this.destination.next(C)}}var Qe=H(1221),nt=H(6498),Oe=H(8896);function we(A){return new nt.y(x=>{let C;try{C=A()}catch(j){return void x.error(j)}return(C?(0,se.D)(C):(0,Oe.c)()).subscribe(x)})}var dt=H(4843),st=H(1737),ht=H(1762),yt=H(8929),kt=H(9808),je=H(4850),rt=H(7545),Ee=H(2986),Z=H(1059),te=H(2198),he=H(1709),Ie=H(7224);function Te(A,x){return(0,he.zg)(A,x,1)}var Je=H(2868),Ot=H(1177);function Wt(A){return function(C){const N=new ze(A),j=C.lift(N);return N.caught=j}}class ze{constructor(x){this.selector=x}call(x,C){return C.subscribe(new ot(x,this.selector,this.caught))}}class ot extends Ot.Ds{constructor(x,C,N){super(x),this.selector=C,this.caught=N}error(x){if(!this.isStopped){let C;try{C=this.selector(x,this.caught)}catch(re){return void super.error(re)}this._unsubscribeAndRecycle();const N=new Ot.IY(this);this.add(N);const j=(0,Ot.ft)(C,N);j!==N&&this.add(j)}}}var De=H(2014),$e=H(3489),Xe=H(4231);function at(A){return function(C){return 0===A?(0,Oe.c)():C.lift(new gt(A))}}class gt{constructor(x){if(this.total=x,this.total<0)throw new Xe.W}call(x,C){return C.subscribe(new ft(x,this.total))}}class ft extends $e.L{constructor(x,C){super(x),this.total=C,this.ring=new Array,this.count=0}_next(x){const C=this.ring,N=this.total,j=this.count++;C.length<N?C.push(x):C[j%N]=x}_complete(){const x=this.destination;let C=this.count;if(C>0){const N=this.count>=this.total?this.total:this.count,j=this.ring;for(let re=0;re<N;re++){const Ae=C++%N;x.next(j[Ae])}}x.complete()}}var Ut=H(4907),Nt=H(7314),cn=H(5379);function un(A,x){const C=arguments.length>=2;return N=>N.pipe(A?(0,te.h)((j,re)=>A(j,re,N)):cn.y,at(1),C?(0,Nt.d)(x):(0,Ut.T)(()=>new Ne.K))}class yn{constructor(x,C){this.predicate=x,this.inclusive=C}call(x,C){return C.subscribe(new En(x,this.predicate,this.inclusive))}}class En extends $e.L{constructor(x,C,N){super(x),this.predicate=C,this.inclusive=N,this.index=0}_next(x){const C=this.destination;let N;try{N=this.predicate(x,this.index++)}catch(j){return void C.error(j)}this.nextOrComplete(x,N)}nextOrComplete(x,C){const N=this.destination;Boolean(C)?N.next(x):(this.inclusive&&N.next(x),N.complete())}}class Tr{constructor(x){this.value=x}call(x,C){return C.subscribe(new Wr(x,this.value))}}class Wr extends $e.L{constructor(x,C){super(x),this.value=C}_next(x){this.destination.next(this.value)}}var er=H(2654);function qt(A){return x=>x.lift(new Yn(A))}class Yn{constructor(x){this.callback=x}call(x,C){return C.subscribe(new Qr(x,this.callback))}}class Qr extends $e.L{constructor(x,C){super(x),this.add(new er.w(C))}}var Un=H(4327),nr=H(9146),Nr=H(2313);const an="primary",ur=Symbol("RouteTitle");class Tn{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const C=this.params[x];return Array.isArray(C)?C[0]:C}return null}getAll(x){if(this.has(x)){const C=this.params[x];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function In(A){return new Tn(A)}function St(A,x,C){const N=C.path.split("/");if(N.length>A.length||"full"===C.pathMatch&&(x.hasChildren()||N.length<A.length))return null;const j={};for(let re=0;re<N.length;re++){const Ae=N[re],xe=A[re];if(Ae.startsWith(":"))j[Ae.substring(1)]=xe;else if(Ae!==xe.path)return null}return{consumed:A.slice(0,N.length),posParams:j}}function mr(A,x){const C=A?Object.keys(A):void 0,N=x?Object.keys(x):void 0;if(!C||!N||C.length!=N.length)return!1;let j;for(let re=0;re<C.length;re++)if(j=C[re],!wr(A[j],x[j]))return!1;return!0}function wr(A,x){if(Array.isArray(A)&&Array.isArray(x)){if(A.length!==x.length)return!1;const C=[...A].sort(),N=[...x].sort();return C.every((j,re)=>N[re]===j)}return A===x}function Lr(A){return Array.prototype.concat.apply([],A)}function Pn(A){return A.length>0?A[A.length-1]:null}function On(A,x){for(const C in A)A.hasOwnProperty(C)&&x(A[C],C)}function Or(A){return(0,a.CqO)(A)?A:(0,a.QGY)(A)?(0,se.D)(Promise.resolve(A)):(0,z.of)(A)}const ai={exact:function Nn(A,x,C){if(!dn(A.segments,x.segments)||!Pe(A.segments,x.segments,C)||A.numberOfChildren!==x.numberOfChildren)return!1;for(const N in x.children)if(!A.children[N]||!Nn(A.children[N],x.children[N],C))return!1;return!0},subset:jn},wn={exact:function mn(A,x){return mr(A,x)},subset:function xn(A,x){return Object.keys(x).length<=Object.keys(A).length&&Object.keys(x).every(C=>wr(A[C],x[C]))},ignored:()=>!0};function Gt(A,x,C){return ai[C.paths](A.root,x.root,C.matrixParams)&&wn[C.queryParams](A.queryParams,x.queryParams)&&!("exact"===C.fragment&&A.fragment!==x.fragment)}function jn(A,x,C){return Ve(A,x,x.segments,C)}function Ve(A,x,C,N){if(A.segments.length>C.length){const j=A.segments.slice(0,C.length);return!(!dn(j,C)||x.hasChildren()||!Pe(j,C,N))}if(A.segments.length===C.length){if(!dn(A.segments,C)||!Pe(A.segments,C,N))return!1;for(const j in x.children)if(!A.children[j]||!jn(A.children[j],x.children[j],N))return!1;return!0}{const j=C.slice(0,A.segments.length),re=C.slice(A.segments.length);return!!(dn(A.segments,j)&&Pe(A.segments,j,N)&&A.children[an])&&Ve(A.children[an],x,re,N)}}function Pe(A,x,C){return x.every((N,j)=>wn[C](A[j].parameters,N.parameters))}class He{constructor(x,C,N){this.root=x,this.queryParams=C,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=In(this.queryParams)),this._queryParamMap}toString(){return mt.serialize(this)}}class pt{constructor(x,C){this.segments=x,this.children=C,this.parent=null,On(C,(N,j)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Be(this)}}class et{constructor(x,C){this.path=x,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=In(this.parameters)),this._parameterMap}toString(){return Kn(this)}}function dn(A,x){return A.length===x.length&&A.every((C,N)=>C.path===x[N].path)}let Er=(()=>{class A{}return A.\u0275fac=function(C){return new(C||A)},A.\u0275prov=a.Yz7({token:A,factory:function(){return new Sr},providedIn:"root"}),A})();class Sr{parse(x){const C=new Hi(x);return new He(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(x){const C=`/${Me(x.root,!0)}`,N=function Br(A){const x=Object.keys(A).map(C=>{const N=A[C];return Array.isArray(N)?N.map(j=>`${Mt(C)}=${Mt(j)}`).join("&"):`${Mt(C)}=${Mt(N)}`}).filter(C=>!!C);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${C}${N}${"string"==typeof x.fragment?`#${function Wn(A){return encodeURI(A)}(x.fragment)}`:""}`}}const mt=new Sr;function Be(A){return A.segments.map(x=>Kn(x)).join("/")}function Me(A,x){if(!A.hasChildren())return Be(A);if(x){const C=A.children[an]?Me(A.children[an],!1):"",N=[];return On(A.children,(j,re)=>{re!==an&&N.push(`${re}:${Me(j,!1)}`)}),N.length>0?`${C}(${N.join("//")})`:C}{const C=function dr(A,x){let C=[];return On(A.children,(N,j)=>{j===an&&(C=C.concat(x(N,j)))}),On(A.children,(N,j)=>{j!==an&&(C=C.concat(x(N,j)))}),C}(A,(N,j)=>j===an?[Me(A.children[an],!1)]:[`${j}:${Me(N,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[an]?`${Be(A)}/${C[0]}`:`${Be(A)}/(${C.join("//")})`}}function Et(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mt(A){return Et(A).replace(/%3B/gi,";")}function Vn(A){return Et(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tn(A){return decodeURIComponent(A)}function Sn(A){return tn(A.replace(/\+/g,"%20"))}function Kn(A){return`${Vn(A.path)}${function kr(A){return Object.keys(A).map(x=>`;${Vn(x)}=${Vn(A[x])}`).join("")}(A.parameters)}`}const si=/^[^\/()?;=#]+/;function mi(A){const x=A.match(si);return x?x[0]:""}const Fn=/^[^=?&#]+/,li=/^[^&#]+/;class Hi{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pt([],{}):new pt([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(x.length>0||Object.keys(C).length>0)&&(N[an]=new pt(x,C)),N}parseSegment(){const x=mi(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new a.vHH(4009,!1);return this.capture(x),new et(tn(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const C=mi(this.remaining);if(!C)return;this.capture(C);let N="";if(this.consumeOptional("=")){const j=mi(this.remaining);j&&(N=j,this.capture(N))}x[tn(C)]=tn(N)}parseQueryParam(x){const C=function Vr(A){const x=A.match(Fn);return x?x[0]:""}(this.remaining);if(!C)return;this.capture(C);let N="";if(this.consumeOptional("=")){const Ae=function Xn(A){const x=A.match(li);return x?x[0]:""}(this.remaining);Ae&&(N=Ae,this.capture(N))}const j=Sn(C),re=Sn(N);if(x.hasOwnProperty(j)){let Ae=x[j];Array.isArray(Ae)||(Ae=[Ae],x[j]=Ae),Ae.push(re)}else x[j]=re}parseParens(x){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=mi(this.remaining),j=this.remaining[N.length];if("/"!==j&&")"!==j&&";"!==j)throw new a.vHH(4010,!1);let re;N.indexOf(":")>-1?(re=N.slice(0,N.indexOf(":")),this.capture(re),this.capture(":")):x&&(re=an);const Ae=this.parseChildren();C[re]=1===Object.keys(Ae).length?Ae[an]:new pt([],Ae),this.consumeOptional("//")}return C}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new a.vHH(4011,!1)}}function hi(A){return A.segments.length>0?new pt([],{[an]:A}):A}function ui(A){const x={};for(const N of Object.keys(A.children)){const re=ui(A.children[N]);(re.segments.length>0||re.hasChildren())&&(x[N]=re)}return function Gi(A){if(1===A.numberOfChildren&&A.children[an]){const x=A.children[an];return new pt(A.segments.concat(x.segments),x.children)}return A}(new pt(A.segments,x))}function Xr(A){return A instanceof He}function Li(A,x,C,N,j){var re;if(0===C.length)return Ze(x.root,x.root,x.root,N,j);const xe=function ye(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new bt(!0,0,A);let x=0,C=!1;const N=A.reduce((j,re,Ae)=>{if("object"==typeof re&&null!=re){if(re.outlets){const xe={};return On(re.outlets,(Ct,P)=>{xe[P]="string"==typeof Ct?Ct.split("/"):Ct}),[...j,{outlets:xe}]}if(re.segmentPath)return[...j,re.segmentPath]}return"string"!=typeof re?[...j,re]:0===Ae?(re.split("/").forEach((xe,Ct)=>{0==Ct&&"."===xe||(0==Ct&&""===xe?C=!0:".."===xe?x++:""!=xe&&j.push(xe))}),j):[...j,re]},[]);return new bt(C,x,N)}(C);return xe.toRoot()?Ze(x.root,x.root,new pt([],{}),N,j):function Ct(U){var J;const _e=function Rt(A,x,C,N){if(A.isAbsolute)return new qe(x.root,!0,0);if(-1===N)return new qe(C,C===x.root,0);return function zt(A,x,C){let N=A,j=x,re=C;for(;re>j;){if(re-=j,N=N.parent,!N)throw new a.vHH(4005,!1);j=N.segments.length}return new qe(N,!1,j-re)}(C,N+(ne(A.commands[0])?0:1),A.numberOfDoubleDots)}(xe,x,null===(J=A.snapshot)||void 0===J?void 0:J._urlSegment,U),Ke=_e.processChildren?rr(_e.segmentGroup,_e.index,xe.commands):vn(_e.segmentGroup,_e.index,xe.commands);return Ze(x.root,_e.segmentGroup,Ke,N,j)}(null===(re=A.snapshot)||void 0===re?void 0:re._lastPathIndex)}function ne(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Ce(A){return"object"==typeof A&&null!=A&&A.outlets}function Ze(A,x,C,N,j){let Ae,re={};N&&On(N,(Ct,P)=>{re[P]=Array.isArray(Ct)?Ct.map(U=>`${U}`):`${Ct}`}),Ae=A===x?C:it(A,x,C);const xe=hi(ui(Ae));return new He(xe,re,j)}function it(A,x,C){const N={};return On(A.children,(j,re)=>{N[re]=j===x?C:it(j,x,C)}),new pt(A.segments,N)}class bt{constructor(x,C,N){if(this.isAbsolute=x,this.numberOfDoubleDots=C,this.commands=N,x&&N.length>0&&ne(N[0]))throw new a.vHH(4003,!1);const j=N.find(Ce);if(j&&j!==Pn(N))throw new a.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qe{constructor(x,C,N){this.segmentGroup=x,this.processChildren=C,this.index=N}}function vn(A,x,C){if(A||(A=new pt([],{})),0===A.segments.length&&A.hasChildren())return rr(A,x,C);const N=function zr(A,x,C){let N=0,j=x;const re={match:!1,pathIndex:0,commandIndex:0};for(;j<A.segments.length;){if(N>=C.length)return re;const Ae=A.segments[j],xe=C[N];if(Ce(xe))break;const Ct=`${xe}`,P=N<C.length-1?C[N+1]:null;if(j>0&&void 0===Ct)break;if(Ct&&P&&"object"==typeof P&&void 0===P.outlets){if(!vt(Ct,P,Ae))return re;N+=2}else{if(!vt(Ct,{},Ae))return re;N++}j++}return{match:!0,pathIndex:j,commandIndex:N}}(A,x,C),j=C.slice(N.commandIndex);if(N.match&&N.pathIndex<A.segments.length){const re=new pt(A.segments.slice(0,N.pathIndex),{});return re.children[an]=new pt(A.segments.slice(N.pathIndex),A.children),rr(re,0,j)}return N.match&&0===j.length?new pt(A.segments,{}):N.match&&!A.hasChildren()?qr(A,x,C):N.match?rr(A,0,j):qr(A,x,C)}function rr(A,x,C){if(0===C.length)return new pt(A.segments,{});{const N=function pn(A){return Ce(A[0])?A[0].outlets:{[an]:A}}(C),j={};return On(N,(re,Ae)=>{"string"==typeof re&&(re=[re]),null!==re&&(j[Ae]=vn(A.children[Ae],x,re))}),On(A.children,(re,Ae)=>{void 0===N[Ae]&&(j[Ae]=re)}),new pt(A.segments,j)}}function qr(A,x,C){const N=A.segments.slice(0,x);let j=0;for(;j<C.length;){const re=C[j];if(Ce(re)){const Ct=tt(re.outlets);return new pt(N,Ct)}if(0===j&&ne(C[0])){N.push(new et(A.segments[x].path,Ye(C[0]))),j++;continue}const Ae=Ce(re)?re.outlets[an]:`${re}`,xe=j<C.length-1?C[j+1]:null;Ae&&xe&&ne(xe)?(N.push(new et(Ae,Ye(xe))),j+=2):(N.push(new et(Ae,{})),j++)}return new pt(N,{})}function tt(A){const x={};return On(A,(C,N)=>{"string"==typeof C&&(C=[C]),null!==C&&(x[N]=qr(new pt([],{}),0,C))}),x}function Ye(A){const x={};return On(A,(C,N)=>x[N]=`${C}`),x}function vt(A,x,C){return A==C.path&&mr(x,C.parameters)}class Vt{constructor(x,C){this.id=x,this.url=C}}class Ht extends Vt{constructor(x,C,N="imperative",j=null){super(x,C),this.type=0,this.navigationTrigger=N,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xt extends Vt{constructor(x,C,N){super(x,C),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fn extends Vt{constructor(x,C,N,j){super(x,C),this.reason=N,this.code=j,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ir extends Vt{constructor(x,C,N,j){super(x,C),this.error=N,this.target=j,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zn extends Vt{constructor(x,C,N,j){super(x,C),this.urlAfterRedirects=N,this.state=j,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zi extends Vt{constructor(x,C,N,j){super(x,C),this.urlAfterRedirects=N,this.state=j,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ms extends Vt{constructor(x,C,N,j,re){super(x,C),this.urlAfterRedirects=N,this.state=j,this.shouldActivate=re,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Is extends Vt{constructor(x,C,N,j){super(x,C),this.urlAfterRedirects=N,this.state=j,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ls extends Vt{constructor(x,C,N,j){super(x,C),this.urlAfterRedirects=N,this.state=j,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ar{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vi{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class So{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qi{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Si{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bi{constructor(x,C,N){this.routerEvent=x,this.position=C,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Qs{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const C=this.pathFromRoot(x);return C.length>1?C[C.length-2]:null}children(x){const C=Gs(x,this._root);return C?C.children.map(N=>N.value):[]}firstChild(x){const C=Gs(x,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(x){const C=Xi(x,this._root);return C.length<2?[]:C[C.length-2].children.map(j=>j.value).filter(j=>j!==x)}pathFromRoot(x){return Xi(x,this._root).map(C=>C.value)}}function Gs(A,x){if(A===x.value)return x;for(const C of x.children){const N=Gs(A,C);if(N)return N}return null}function Xi(A,x){if(A===x.value)return[x];for(const C of x.children){const N=Xi(A,C);if(N.length)return N.unshift(x),N}return[]}class Ji{constructor(x,C){this.value=x,this.children=C}toString(){return`TreeNode(${this.value})`}}function Wi(A){const x={};return A&&A.children.forEach(C=>x[C.value.outlet]=C),x}class us extends Qs{constructor(x,C){super(x),this.snapshot=C,Kr(this,x)}toString(){return this.snapshot.toString()}}function cs(A,x){const C=function gs(A,x){const Ae=new Mi([],{},{},"",{},an,x,null,A.root,-1,{});return new ar("",new Ji(Ae,[]))}(A,x),N=new Le.X([new et("",{})]),j=new Le.X({}),re=new Le.X({}),Ae=new Le.X({}),xe=new Le.X(""),Ct=new ds(N,j,Ae,xe,re,an,x,C.root);return Ct.snapshot=C.root,new us(new Ji(Ct,[]),C)}class ds{constructor(x,C,N,j,re,Ae,xe,Ct){var P,U;this.url=x,this.params=C,this.queryParams=N,this.fragment=j,this.data=re,this.outlet=Ae,this.component=xe,this.title=null!==(U=null===(P=this.data)||void 0===P?void 0:P.pipe((0,je.U)(J=>J[ur])))&&void 0!==U?U:(0,z.of)(void 0),this._futureSnapshot=Ct}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,je.U)(x=>In(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,je.U)(x=>In(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ro(A,x="emptyOnly"){const C=A.pathFromRoot;let N=0;if("always"!==x)for(N=C.length-1;N>=1;){const j=C[N],re=C[N-1];if(j.routeConfig&&""===j.routeConfig.path)N--;else{if(re.component)break;N--}}return function es(A){return A.reduce((x,C)=>{var N;return{params:Object.assign(Object.assign({},x.params),C.params),data:Object.assign(Object.assign({},x.data),C.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},C.data),x.resolve),null===(N=C.routeConfig)||void 0===N?void 0:N.data),C._resolvedData)}},{params:{},data:{},resolve:{}})}(C.slice(N))}class Mi{constructor(x,C,N,j,re,Ae,xe,Ct,P,U,J,_e){var Ke;this.url=x,this.params=C,this.queryParams=N,this.fragment=j,this.data=re,this.outlet=Ae,this.component=xe,this.title=null===(Ke=this.data)||void 0===Ke?void 0:Ke[ur],this.routeConfig=Ct,this._urlSegment=P,this._lastPathIndex=U,this._correctedLastPathIndex=null!=_e?_e:U,this._resolve=J}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=In(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=In(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ar extends Qs{constructor(x,C){super(C),this.url=x,Kr(this,C)}toString(){return Ds(this._root)}}function Kr(A,x){x.value._routerState=A,x.children.forEach(C=>Kr(A,C))}function Ds(A){const x=A.children.length>0?` { ${A.children.map(Ds).join(", ")} } `:"";return`${A.value}${x}`}function Rs(A){if(A.snapshot){const x=A.snapshot,C=A._futureSnapshot;A.snapshot=C,mr(x.queryParams,C.queryParams)||A.queryParams.next(C.queryParams),x.fragment!==C.fragment&&A.fragment.next(C.fragment),mr(x.params,C.params)||A.params.next(C.params),function gr(A,x){if(A.length!==x.length)return!1;for(let C=0;C<A.length;++C)if(!mr(A[C],x[C]))return!1;return!0}(x.url,C.url)||A.url.next(C.url),mr(x.data,C.data)||A.data.next(C.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function ci(A,x){const C=mr(A.params,x.params)&&function hn(A,x){return dn(A,x)&&A.every((C,N)=>mr(C.parameters,x[N].parameters))}(A.url,x.url);return C&&!(!A.parent!=!x.parent)&&(!A.parent||ci(A.parent,x.parent))}function Vi(A,x,C){if(C&&A.shouldReuseRoute(x.value,C.value.snapshot)){const N=C.value;N._futureSnapshot=x.value;const j=function Xs(A,x,C){return x.children.map(N=>{for(const j of C.children)if(A.shouldReuseRoute(N.value,j.value.snapshot))return Vi(A,N,j);return Vi(A,N)})}(A,x,C);return new Ji(N,j)}{if(A.shouldAttach(x.value)){const re=A.retrieve(x.value);if(null!==re){const Ae=re.route;return Ae.value._futureSnapshot=x.value,Ae.children=x.children.map(xe=>Vi(A,xe)),Ae}}const N=function pi(A){return new ds(new Le.X(A.url),new Le.X(A.params),new Le.X(A.queryParams),new Le.X(A.fragment),new Le.X(A.data),A.outlet,A.component,A)}(x.value),j=x.children.map(re=>Vi(A,re));return new Ji(N,j)}}const Cr="ngNavigationCancelingError";function Ts(A,x){const{redirectTo:C,navigationBehaviorOptions:N}=Xr(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,j=hs(!1,0,x);return j.url=C,j.navigationBehaviorOptions=N,j}function hs(A,x,C){const N=new Error("NavigationCancelingError: "+(A||""));return N[Cr]=!0,N.cancellationCode=x,C&&(N.url=C),N}function Fs(A){return Fr(A)&&Xr(A.url)}function Fr(A){return A&&A[Cr]}class Ws{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new xr,this.attachRef=null}}let xr=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(C,N){const j=this.getOrCreateContext(C);j.outlet=N,this.contexts.set(C,j)}onChildOutletDestroyed(C){const N=this.getContext(C);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let N=this.getContext(C);return N||(N=new Ws,this.contexts.set(C,N)),N}getContext(C){return this.contexts.get(C)||null}}return A.\u0275fac=function(C){return new(C||A)},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Hn=!1;let Js=(()=>{class A{constructor(C,N,j,re,Ae){this.parentContexts=C,this.location=N,this.changeDetector=re,this.environmentInjector=Ae,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=j||an,C.onChildOutletCreated(this.name,this)}ngOnDestroy(){var C;(null===(C=this.parentContexts.getContext(this.name))||void 0===C?void 0:C.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const C=this.parentContexts.getContext(this.name);C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Hn);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Hn);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Hn);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,N){this.activated=C,this._activatedRoute=N,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,N){if(this.isActivated)throw new a.vHH(4013,Hn);this._activatedRoute=C;const j=this.location,Ae=C._futureSnapshot.component,xe=this.parentContexts.getOrCreateContext(this.name).children,Ct=new go(C,xe,j.injector);if(N&&function Vo(A){return!!A.resolveComponentFactory}(N)){const P=N.resolveComponentFactory(Ae);this.activated=j.createComponent(P,j.length,Ct)}else this.activated=j.createComponent(Ae,{index:j.length,injector:Ct,environmentInjector:null!=N?N:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(C){return new(C||A)(a.Y36(xr),a.Y36(a.s_b),a.$8M("name"),a.Y36(a.sBO),a.Y36(a.lqb))},A.\u0275dir=a.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),A})();class go{constructor(x,C,N){this.route=x,this.childContexts=C,this.parent=N}get(x,C){return x===ds?this.route:x===xr?this.childContexts:this.parent.get(x,C)}}let Ao=(()=>{class A{}return A.\u0275fac=function(C){return new(C||A)},A.\u0275cmp=a.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(C,N){1&C&&a._UZ(0,"router-outlet")},dependencies:[Js],encapsulation:2}),A})();function qo(A,x){var C;return A.providers&&!A._injector&&(A._injector=(0,a.MMx)(A.providers,x,`Route: ${A.path}`)),null!==(C=A._injector)&&void 0!==C?C:x}function hr(A){const x=A.children&&A.children.map(hr),C=x?Object.assign(Object.assign({},A),{children:x}):Object.assign({},A);return!C.component&&!C.loadComponent&&(x||C.loadChildren)&&C.outlet&&C.outlet!==an&&(C.component=Ao),C}function ts(A){return A.outlet||an}function ns(A,x){const C=A.filter(N=>ts(N)===x);return C.push(...A.filter(N=>ts(N)!==x)),C}function eo(A){var x;if(!A)return null;if(null!==(x=A.routeConfig)&&void 0!==x&&x._injector)return A.routeConfig._injector;for(let C=A.parent;C;C=C.parent){const N=C.routeConfig;if(null!=N&&N._loadedInjector)return N._loadedInjector;if(null!=N&&N._injector)return N._injector}return null}class V{constructor(x,C,N,j){this.routeReuseStrategy=x,this.futureState=C,this.currState=N,this.forwardEvent=j}activate(x){const C=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,N,x),Rs(this.futureState.root),this.activateChildRoutes(C,N,x)}deactivateChildRoutes(x,C,N){const j=Wi(C);x.children.forEach(re=>{const Ae=re.value.outlet;this.deactivateRoutes(re,j[Ae],N),delete j[Ae]}),On(j,(re,Ae)=>{this.deactivateRouteAndItsChildren(re,N)})}deactivateRoutes(x,C,N){const j=x.value,re=C?C.value:null;if(j===re)if(j.component){const Ae=N.getContext(j.outlet);Ae&&this.deactivateChildRoutes(x,C,Ae.children)}else this.deactivateChildRoutes(x,C,N);else re&&this.deactivateRouteAndItsChildren(C,N)}deactivateRouteAndItsChildren(x,C){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,C):this.deactivateRouteAndOutlet(x,C)}detachAndStoreRouteSubtree(x,C){const N=C.getContext(x.value.outlet),j=N&&x.value.component?N.children:C,re=Wi(x);for(const Ae of Object.keys(re))this.deactivateRouteAndItsChildren(re[Ae],j);if(N&&N.outlet){const Ae=N.outlet.detach(),xe=N.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:Ae,route:x,contexts:xe})}}deactivateRouteAndOutlet(x,C){const N=C.getContext(x.value.outlet),j=N&&x.value.component?N.children:C,re=Wi(x);for(const Ae of Object.keys(re))this.deactivateRouteAndItsChildren(re[Ae],j);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(x,C,N){const j=Wi(C);x.children.forEach(re=>{this.activateRoutes(re,j[re.value.outlet],N),this.forwardEvent(new Si(re.value.snapshot))}),x.children.length&&this.forwardEvent(new So(x.value.snapshot))}activateRoutes(x,C,N){var j;const re=x.value,Ae=C?C.value:null;if(Rs(re),re===Ae)if(re.component){const xe=N.getOrCreateContext(re.outlet);this.activateChildRoutes(x,C,xe.children)}else this.activateChildRoutes(x,C,N);else if(re.component){const xe=N.getOrCreateContext(re.outlet);if(this.routeReuseStrategy.shouldAttach(re.snapshot)){const Ct=this.routeReuseStrategy.retrieve(re.snapshot);this.routeReuseStrategy.store(re.snapshot,null),xe.children.onOutletReAttached(Ct.contexts),xe.attachRef=Ct.componentRef,xe.route=Ct.route.value,xe.outlet&&xe.outlet.attach(Ct.componentRef,Ct.route.value),Rs(Ct.route.value),this.activateChildRoutes(x,null,xe.children)}else{const Ct=eo(re.snapshot),P=null!==(j=null==Ct?void 0:Ct.get(a._Vd))&&void 0!==j?j:null;xe.attachRef=null,xe.route=re,xe.resolver=P,xe.injector=Ct,xe.outlet&&xe.outlet.activateWith(re,xe.injector),this.activateChildRoutes(x,null,xe.children)}}else this.activateChildRoutes(x,null,N)}}class b{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class d{constructor(x,C){this.component=x,this.route=C}}function I(A,x,C){const N=A._root;return Y(N,x?x._root:null,C,[N.value])}function R(A,x){const C=Symbol(),N=x.get(A,C);return N===C?"function"!=typeof A||(0,a.Z0I)(A)?x.get(A):A:N}function Y(A,x,C,N,j={canDeactivateChecks:[],canActivateChecks:[]}){const re=Wi(x);return A.children.forEach(Ae=>{(function ke(A,x,C,N,j={canDeactivateChecks:[],canActivateChecks:[]}){const re=A.value,Ae=x?x.value:null,xe=C?C.getContext(A.value.outlet):null;if(Ae&&re.routeConfig===Ae.routeConfig){const Ct=function It(A,x,C){if("function"==typeof C)return C(A,x);switch(C){case"pathParamsChange":return!dn(A.url,x.url);case"pathParamsOrQueryParamsChange":return!dn(A.url,x.url)||!mr(A.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ci(A,x)||!mr(A.queryParams,x.queryParams);default:return!ci(A,x)}}(Ae,re,re.routeConfig.runGuardsAndResolvers);Ct?j.canActivateChecks.push(new b(N)):(re.data=Ae.data,re._resolvedData=Ae._resolvedData),Y(A,x,re.component?xe?xe.children:null:C,N,j),Ct&&xe&&xe.outlet&&xe.outlet.isActivated&&j.canDeactivateChecks.push(new d(xe.outlet.component,Ae))}else Ae&&Pt(x,xe,j),j.canActivateChecks.push(new b(N)),Y(A,null,re.component?xe?xe.children:null:C,N,j)})(Ae,re[Ae.value.outlet],C,N.concat([Ae.value]),j),delete re[Ae.value.outlet]}),On(re,(Ae,xe)=>Pt(Ae,C.getContext(xe),j)),j}function Pt(A,x,C){const N=Wi(A),j=A.value;On(N,(re,Ae)=>{Pt(re,j.component?x?x.children.getContext(Ae):null:x,C)}),C.canDeactivateChecks.push(new d(j.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,j))}function rn(A){return"function"==typeof A}function Ls(A){return A instanceof Ne.K||"EmptyError"===(null==A?void 0:A.name)}const zi=Symbol("INITIAL_VALUE");function Ai(){return(0,rt.w)(A=>oe(A.map(x=>x.pipe((0,Ee.q)(1),(0,Z.O)(zi)))).pipe((0,je.U)(x=>{for(const C of x)if(!0!==C){if(C===zi)return zi;if(!1===C||C instanceof He)return C}return!0}),(0,te.h)(x=>x!==zi),(0,Ee.q)(1)))}function ti(A){return(0,dt.z)((0,Je.b)(x=>{if(Xr(x))throw Ts(0,x)}),(0,je.U)(x=>!0===x))}const ri={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zr(A,x,C,N,j){const re=rs(A,x,C);return re.matched?function ni(A,x,C,N){const j=x.canMatch;if(!j||0===j.length)return(0,z.of)(!0);const re=j.map(Ae=>{const xe=R(Ae,A);return Or(function lr(A){return A&&rn(A.canMatch)}(xe)?xe.canMatch(x,C):A.runInContext(()=>xe(x,C)))});return(0,z.of)(re).pipe(Ai(),ti())}(N=qo(x,N),x,C).pipe((0,je.U)(Ae=>!0===Ae?re:Object.assign({},ri))):(0,z.of)(re)}function rs(A,x,C){var N;if(""===x.path)return"full"===x.pathMatch&&(A.hasChildren()||C.length>0)?Object.assign({},ri):{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const re=(x.matcher||St)(C,A,x);if(!re)return Object.assign({},ri);const Ae={};On(re.posParams,(Ct,P)=>{Ae[P]=Ct.path});const xe=re.consumed.length>0?Object.assign(Object.assign({},Ae),re.consumed[re.consumed.length-1].parameters):Ae;return{matched:!0,consumedSegments:re.consumed,remainingSegments:C.slice(re.consumed.length),parameters:xe,positionalParamSegments:null!==(N=re.posParams)&&void 0!==N?N:{}}}function yi(A,x,C,N,j="corrected"){if(C.length>0&&function Mo(A,x,C){return C.some(N=>qi(A,x,N)&&ts(N)!==an)}(A,C,N)){const Ae=new pt(x,function mo(A,x,C,N){const j={};j[an]=N,N._sourceSegment=A,N._segmentIndexShift=x.length;for(const re of C)if(""===re.path&&ts(re)!==an){const Ae=new pt([],{});Ae._sourceSegment=A,Ae._segmentIndexShift=x.length,j[ts(re)]=Ae}return j}(A,x,N,new pt(C,A.children)));return Ae._sourceSegment=A,Ae._segmentIndexShift=x.length,{segmentGroup:Ae,slicedSegments:[]}}if(0===C.length&&function Ro(A,x,C){return C.some(N=>qi(A,x,N))}(A,C,N)){const Ae=new pt(A.segments,function Ui(A,x,C,N,j,re){const Ae={};for(const xe of N)if(qi(A,C,xe)&&!j[ts(xe)]){const Ct=new pt([],{});Ct._sourceSegment=A,Ct._segmentIndexShift="legacy"===re?A.segments.length:x.length,Ae[ts(xe)]=Ct}return Object.assign(Object.assign({},j),Ae)}(A,x,C,N,A.children,j));return Ae._sourceSegment=A,Ae._segmentIndexShift=x.length,{segmentGroup:Ae,slicedSegments:C}}const re=new pt(A.segments,A.children);return re._sourceSegment=A,re._segmentIndexShift=x.length,{segmentGroup:re,slicedSegments:C}}function qi(A,x,C){return(!(A.hasChildren()||x.length>0)||"full"!==C.pathMatch)&&""===C.path}function zs(A,x,C,N){return!!(ts(A)===N||N!==an&&qi(x,C,A))&&("**"===A.path||rs(x,A,C).matched)}function so(A,x,C){return 0===x.length&&!A.children[C]}const Bs=!1;class Yo{constructor(x){this.segmentGroup=x||null}}class Ni{constructor(x){this.urlTree=x}}function As(A){return(0,st._)(new Yo(A))}function Ra(A){return(0,st._)(new Ni(A))}class Ko{constructor(x,C,N,j,re){this.injector=x,this.configLoader=C,this.urlSerializer=N,this.urlTree=j,this.config=re,this.allowRedirects=!0}apply(){const x=yi(this.urlTree.root,[],[],this.config).segmentGroup,C=new pt(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,C,an).pipe((0,je.U)(re=>this.createUrlTree(ui(re),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wt(re=>{if(re instanceof Ni)return this.allowRedirects=!1,this.match(re.urlTree);throw re instanceof Yo?this.noMatchError(re):re}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,an).pipe((0,je.U)(j=>this.createUrlTree(ui(j),x.queryParams,x.fragment))).pipe(Wt(j=>{throw j instanceof Yo?this.noMatchError(j):j}))}noMatchError(x){return new a.vHH(4002,Bs)}createUrlTree(x,C,N){const j=hi(x);return new He(j,C,N)}expandSegmentGroup(x,C,N,j){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(x,C,N).pipe((0,je.U)(re=>new pt([],re))):this.expandSegment(x,N,C,N.segments,j,!0)}expandChildren(x,C,N){const j=[];for(const re of Object.keys(N.children))"primary"===re?j.unshift(re):j.push(re);return(0,se.D)(j).pipe(Te(re=>{const Ae=N.children[re],xe=ns(C,re);return this.expandSegmentGroup(x,xe,Ae,re).pipe((0,je.U)(Ct=>({segment:Ct,outlet:re})))}),(0,De.R)((re,Ae)=>(re[Ae.outlet]=Ae.segment,re),{}),un())}expandSegment(x,C,N,j,re,Ae){return(0,se.D)(N).pipe(Te(xe=>this.expandSegmentAgainstRoute(x,C,N,xe,j,re,Ae).pipe(Wt(P=>{if(P instanceof Yo)return(0,z.of)(null);throw P}))),(0,Ie.P)(xe=>!!xe),Wt((xe,Ct)=>{if(Ls(xe))return so(C,j,re)?(0,z.of)(new pt([],{})):As(C);throw xe}))}expandSegmentAgainstRoute(x,C,N,j,re,Ae,xe){return zs(j,C,re,Ae)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(x,C,j,re,Ae):xe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,C,N,j,re,Ae):As(C):As(C)}expandSegmentAgainstRouteUsingRedirect(x,C,N,j,re,Ae){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,N,j,Ae):this.expandRegularSegmentAgainstRouteUsingRedirect(x,C,N,j,re,Ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,C,N,j){const re=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?Ra(re):this.lineralizeSegments(N,re).pipe((0,he.zg)(Ae=>{const xe=new pt(Ae,{});return this.expandSegment(x,xe,C,Ae,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,C,N,j,re,Ae){const{matched:xe,consumedSegments:Ct,remainingSegments:P,positionalParamSegments:U}=rs(C,j,re);if(!xe)return As(C);const J=this.applyRedirectCommands(Ct,j.redirectTo,U);return j.redirectTo.startsWith("/")?Ra(J):this.lineralizeSegments(j,J).pipe((0,he.zg)(_e=>this.expandSegment(x,C,N,_e.concat(P),Ae,!1)))}matchSegmentAgainstRoute(x,C,N,j,re){return"**"===N.path?(x=qo(N,x),N.loadChildren?(N._loadedRoutes?(0,z.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):this.configLoader.loadChildren(x,N)).pipe((0,je.U)(xe=>(N._loadedRoutes=xe.routes,N._loadedInjector=xe.injector,new pt(j,{})))):(0,z.of)(new pt(j,{}))):Zr(C,N,j,x).pipe((0,rt.w)(({matched:Ae,consumedSegments:xe,remainingSegments:Ct})=>{var P;return Ae?(x=null!==(P=N._injector)&&void 0!==P?P:x,this.getChildConfig(x,N,j).pipe((0,he.zg)(J=>{var _e;const Ke=null!==(_e=J.injector)&&void 0!==_e?_e:x,wt=J.routes,{segmentGroup:Yt,slicedSegments:gn}=yi(C,xe,Ct,wt),Ln=new pt(Yt.segments,Yt.children);if(0===gn.length&&Ln.hasChildren())return this.expandChildren(Ke,wt,Ln).pipe((0,je.U)(Yi=>new pt(xe,Yi)));if(0===wt.length&&0===gn.length)return(0,z.of)(new pt(xe,{}));const fr=ts(N)===re;return this.expandSegment(Ke,Ln,wt,gn,fr?an:re,!0).pipe((0,je.U)(Dn=>new pt(xe.concat(Dn.segments),Dn.children)))}))):As(C)}))}getChildConfig(x,C,N){return C.children?(0,z.of)({routes:C.children,injector:x}):C.loadChildren?void 0!==C._loadedRoutes?(0,z.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):function Rn(A,x,C,N){const j=x.canLoad;if(void 0===j||0===j.length)return(0,z.of)(!0);const re=j.map(Ae=>{const xe=R(Ae,A);return Or(function yr(A){return A&&rn(A.canLoad)}(xe)?xe.canLoad(x,C):A.runInContext(()=>xe(x,C)))});return(0,z.of)(re).pipe(Ai(),ti())}(x,C,N).pipe((0,he.zg)(j=>j?this.configLoader.loadChildren(x,C).pipe((0,Je.b)(re=>{C._loadedRoutes=re.routes,C._loadedInjector=re.injector})):function Ql(A){return(0,st._)(hs(Bs,3))}())):(0,z.of)({routes:[],injector:x})}lineralizeSegments(x,C){let N=[],j=C.root;for(;;){if(N=N.concat(j.segments),0===j.numberOfChildren)return(0,z.of)(N);if(j.numberOfChildren>1||!j.children[an])return(0,st._)(new a.vHH(4e3,Bs));j=j.children[an]}}applyRedirectCommands(x,C,N){return this.applyRedirectCreateUrlTree(C,this.urlSerializer.parse(C),x,N)}applyRedirectCreateUrlTree(x,C,N,j){const re=this.createSegmentGroup(x,C.root,N,j);return new He(re,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(x,C){const N={};return On(x,(j,re)=>{if("string"==typeof j&&j.startsWith(":")){const xe=j.substring(1);N[re]=C[xe]}else N[re]=j}),N}createSegmentGroup(x,C,N,j){const re=this.createSegments(x,C.segments,N,j);let Ae={};return On(C.children,(xe,Ct)=>{Ae[Ct]=this.createSegmentGroup(x,xe,N,j)}),new pt(re,Ae)}createSegments(x,C,N,j){return C.map(re=>re.path.startsWith(":")?this.findPosParam(x,re,j):this.findOrReturn(re,N))}findPosParam(x,C,N){const j=N[C.path.substring(1)];if(!j)throw new a.vHH(4001,Bs);return j}findOrReturn(x,C){let N=0;for(const j of C){if(j.path===x.path)return C.splice(N),j;N++}return x}}class Oa{}class xs{constructor(x,C,N,j,re,Ae,xe,Ct){this.injector=x,this.rootComponentType=C,this.config=N,this.urlTree=j,this.url=re,this.paramsInheritanceStrategy=Ae,this.relativeLinkResolution=xe,this.urlSerializer=Ct}recognize(){const x=yi(this.urlTree.root,[],[],this.config.filter(C=>void 0===C.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,an).pipe((0,je.U)(C=>{if(null===C)return null;const N=new Mi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),j=new Ji(N,C),re=new ar(this.url,j);return this.inheritParamsAndData(re._root),re}))}inheritParamsAndData(x){const C=x.value,N=ro(C,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data),x.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(x,C,N,j){return 0===N.segments.length&&N.hasChildren()?this.processChildren(x,C,N):this.processSegment(x,C,N,N.segments,j)}processChildren(x,C,N){return(0,se.D)(Object.keys(N.children)).pipe(Te(j=>{const re=N.children[j],Ae=ns(C,j);return this.processSegmentGroup(x,Ae,re,j)}),(0,De.R)((j,re)=>j&&re?(j.push(...re),j):null),function Jn(A,x=!1){return C=>C.lift(new yn(A,x))}(j=>null!==j),(0,Nt.d)(null),un(),(0,je.U)(j=>{if(null===j)return null;const re=Ei(j);return function $o(A){A.sort((x,C)=>x.value.outlet===an?-1:C.value.outlet===an?1:x.value.outlet.localeCompare(C.value.outlet))}(re),re}))}processSegment(x,C,N,j,re){return(0,se.D)(C).pipe(Te(Ae=>{var xe;return this.processSegmentAgainstRoute(null!==(xe=Ae._injector)&&void 0!==xe?xe:x,Ae,N,j,re)}),(0,Ie.P)(Ae=>!!Ae),Wt(Ae=>{if(Ls(Ae))return so(N,j,re)?(0,z.of)([]):(0,z.of)(null);throw Ae}))}processSegmentAgainstRoute(x,C,N,j,re){var Ae,xe;if(C.redirectTo||!zs(C,N,j,re))return(0,z.of)(null);let Ct;if("**"===C.path){const P=j.length>0?Pn(j).parameters:{},U=qa(N)+j.length,J=new Mi(j,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bi(C),ts(C),null!==(xe=null!==(Ae=C.component)&&void 0!==Ae?Ae:C._loadedComponent)&&void 0!==xe?xe:null,C,yo(N),U,to(C),U);Ct=(0,z.of)({snapshot:J,consumedSegments:[],remainingSegments:[]})}else Ct=Zr(N,C,j,x).pipe((0,je.U)(({matched:P,consumedSegments:U,remainingSegments:J,parameters:_e})=>{var Ke,wt;if(!P)return null;const Yt=qa(N)+U.length;return{snapshot:new Mi(U,_e,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bi(C),ts(C),null!==(wt=null!==(Ke=C.component)&&void 0!==Ke?Ke:C._loadedComponent)&&void 0!==wt?wt:null,C,yo(N),Yt,to(C),Yt),consumedSegments:U,remainingSegments:J}}));return Ct.pipe((0,rt.w)(P=>{var U,J;if(null===P)return(0,z.of)(null);const{snapshot:_e,consumedSegments:Ke,remainingSegments:wt}=P;x=null!==(U=C._injector)&&void 0!==U?U:x;const Yt=null!==(J=C._loadedInjector)&&void 0!==J?J:x,gn=function za(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(C),{segmentGroup:Ln,slicedSegments:fr}=yi(N,Ke,wt,gn.filter(Dn=>void 0===Dn.redirectTo),this.relativeLinkResolution);if(0===fr.length&&Ln.hasChildren())return this.processChildren(Yt,gn,Ln).pipe((0,je.U)(Dn=>null===Dn?null:[new Ji(_e,Dn)]));if(0===gn.length&&0===fr.length)return(0,z.of)([new Ji(_e,[])]);const $r=ts(C)===re;return this.processSegment(Yt,gn,Ln,fr,$r?an:re).pipe((0,je.U)(Dn=>null===Dn?null:[new Ji(_e,Dn)]))}))}}function ca(A){const x=A.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Ei(A){const x=[],C=new Set;for(const N of A){if(!ca(N)){x.push(N);continue}const j=x.find(re=>N.value.routeConfig===re.value.routeConfig);void 0!==j?(j.children.push(...N.children),C.add(j)):x.push(N)}for(const N of C){const j=Ei(N.children);x.push(new Ji(N.value,j))}return x.filter(N=>!C.has(N))}function yo(A){let x=A;for(;x._sourceSegment;)x=x._sourceSegment;return x}function qa(A){var x,C;let N=A,j=null!==(x=N._segmentIndexShift)&&void 0!==x?x:0;for(;N._sourceSegment;)N=N._sourceSegment,j+=null!==(C=N._segmentIndexShift)&&void 0!==C?C:0;return j-1}function bi(A){return A.data||{}}function to(A){return A.resolve||{}}function fa(A){return"string"==typeof A.title||null===A.title}function $n(A){return(0,rt.w)(x=>{const C=A(x);return C?(0,se.D)(C).pipe((0,je.U)(()=>x)):(0,z.of)(x)})}let ir=(()=>{class A{buildTitle(C){var N;let j,re=C.root;for(;void 0!==re;)j=null!==(N=this.getResolvedTitleForRoute(re))&&void 0!==N?N:j,re=re.children.find(Ae=>Ae.outlet===an);return j}getResolvedTitleForRoute(C){return C.data[ur]}}return A.\u0275fac=function(C){return new(C||A)},A.\u0275prov=a.Yz7({token:A,factory:function(){return(0,a.f3M)(sl)},providedIn:"root"}),A})(),sl=(()=>{class A extends ir{constructor(C){super(),this.title=C}updateTitle(C){const N=this.buildTitle(C);void 0!==N&&this.title.setTitle(N)}}return A.\u0275fac=function(C){return new(C||A)(a.LFG(Nr.Dx))},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class Ft{}class ys extends class en{shouldDetach(x){return!1}store(x,C){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,C){return x.routeConfig===C.routeConfig}}{}const Ca=new a.OlP("",{providedIn:"root",factory:()=>({})}),Ml=new a.OlP("ROUTES");let Rl=(()=>{class A{constructor(C,N){this.injector=C,this.compiler=N,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return(0,z.of)(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const N=Or(C.loadComponent()).pipe((0,Je.b)(re=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=re}),qt(()=>{this.componentLoaders.delete(C)})),j=new ht.c(N,()=>new yt.xQ).pipe((0,Un.x)());return this.componentLoaders.set(C,j),j}loadChildren(C,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,z.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const re=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,je.U)(xe=>{this.onLoadEndListener&&this.onLoadEndListener(N);let Ct,P,U=!1;Array.isArray(xe)?P=xe:(Ct=xe.create(C).injector,P=Lr(Ct.get(Ml,[],a.XFs.Self|a.XFs.Optional)));return{routes:P.map(hr),injector:Ct}}),qt(()=>{this.childrenLoaders.delete(N)})),Ae=new ht.c(re,()=>new yt.xQ).pipe((0,Un.x)());return this.childrenLoaders.set(N,Ae),Ae}loadModuleFactoryOrRoutes(C){return Or(C()).pipe((0,he.zg)(N=>N instanceof a.YKP||Array.isArray(N)?(0,z.of)(N):(0,se.D)(this.compiler.compileModuleAsync(N))))}}return A.\u0275fac=function(C){return new(C||A)(a.LFG(a.zs3),a.LFG(a.Sil))},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class Ol{}class Ya{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,C){return x}}function kl(A){throw A}function ao(A,x,C){return x.parse("/")}const Oo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},br={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ka(){var A,x;const C=(0,a.f3M)(Er),N=(0,a.f3M)(xr),j=(0,a.f3M)(kt.Ye),re=(0,a.f3M)(a.zs3),Ae=(0,a.f3M)(a.Sil),xe=null!==(A=(0,a.f3M)(Ml,{optional:!0}))&&void 0!==A?A:[],Ct=null!==(x=(0,a.f3M)(Ca,{optional:!0}))&&void 0!==x?x:{},P=(0,a.f3M)(sl),U=(0,a.f3M)(ir,{optional:!0}),J=(0,a.f3M)(Ol,{optional:!0}),_e=(0,a.f3M)(Ft,{optional:!0}),Ke=new Pr(null,C,N,j,re,Ae,Lr(xe));return J&&(Ke.urlHandlingStrategy=J),_e&&(Ke.routeReuseStrategy=_e),Ke.titleStrategy=null!=U?U:P,function ko(A,x){A.errorHandler&&(x.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(x.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(x.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(x.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(x.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(x.canceledNavigationResolution=A.canceledNavigationResolution)}(Ct,Ke),Ke}let Pr=(()=>{class A{constructor(C,N,j,re,Ae,xe,Ct){this.rootComponentType=C,this.urlSerializer=N,this.rootContexts=j,this.location=re,this.config=Ct,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new yt.xQ,this.errorHandler=kl,this.malformedUriErrorHandler=ao,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,z.of)(void 0),this.urlHandlingStrategy=new Ya,this.routeReuseStrategy=new ys,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ae.get(Rl),this.configLoader.onLoadEndListener=_e=>this.triggerEvent(new Ar(_e)),this.configLoader.onLoadStartListener=_e=>this.triggerEvent(new Yr(_e)),this.ngModule=Ae.get(a.h0i),this.console=Ae.get(a.c2e);const J=Ae.get(a.R0b);this.isNgZoneEnabled=J instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(Ct),this.currentUrlTree=function jr(){return new He(new pt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=cs(this.currentUrlTree,this.rootComponentType),this.transitions=new Le.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var C;return null===(C=this.location.getState())||void 0===C?void 0:C.\u0275routerPageId}setupNavigations(C){const N=this.events;return C.pipe((0,te.h)(j=>0!==j.id),(0,je.U)(j=>Object.assign(Object.assign({},j),{extractedUrl:this.urlHandlingStrategy.extract(j.rawUrl)})),(0,rt.w)(j=>{let re=!1,Ae=!1;return(0,z.of)(j).pipe((0,Je.b)(xe=>{this.currentNavigation={id:xe.id,initialUrl:xe.rawUrl,extractedUrl:xe.extractedUrl,trigger:xe.source,extras:xe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,rt.w)(xe=>{const Ct=this.browserUrlTree.toString(),P=!this.navigated||xe.extractedUrl.toString()!==Ct||Ct!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||P)&&this.urlHandlingStrategy.shouldProcessUrl(xe.rawUrl))return Qo(xe.source)&&(this.browserUrlTree=xe.extractedUrl),(0,z.of)(xe).pipe((0,rt.w)(J=>{const _e=this.transitions.getValue();return N.next(new Ht(J.id,this.serializeUrl(J.extractedUrl),J.source,J.restoredState)),_e!==this.transitions.getValue()?Oe.E:Promise.resolve(J)}),function ks(A,x,C,N){return(0,rt.w)(j=>function _l(A,x,C,N,j){return new Ko(A,x,C,N,j).apply()}(A,x,C,j.extractedUrl,N).pipe((0,je.U)(re=>Object.assign(Object.assign({},j),{urlAfterRedirects:re}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Je.b)(J=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:J.urlAfterRedirects}),j.urlAfterRedirects=J.urlAfterRedirects}),function oo(A,x,C,N,j,re){return(0,he.zg)(Ae=>function Xl(A,x,C,N,j,re,Ae="emptyOnly",xe="legacy"){return new xs(A,x,C,N,j,Ae,xe,re).recognize().pipe((0,rt.w)(Ct=>null===Ct?function Zo(A){return new nt.y(x=>x.error(A))}(new Oa):(0,z.of)(Ct)))}(A,x,C,Ae.urlAfterRedirects,N.serialize(Ae.urlAfterRedirects),N,j,re).pipe((0,je.U)(xe=>Object.assign(Object.assign({},Ae),{targetSnapshot:xe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Je.b)(J=>{if(j.targetSnapshot=J.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!J.extras.skipLocationChange){const Ke=this.urlHandlingStrategy.merge(J.urlAfterRedirects,J.rawUrl);this.setBrowserUrl(Ke,J)}this.browserUrlTree=J.urlAfterRedirects}const _e=new zn(J.id,this.serializeUrl(J.extractedUrl),this.serializeUrl(J.urlAfterRedirects),J.targetSnapshot);N.next(_e)}));if(P&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_e,extractedUrl:Ke,source:wt,restoredState:Yt,extras:gn}=xe,Ln=new Ht(_e,this.serializeUrl(Ke),wt,Yt);N.next(Ln);const fr=cs(Ke,this.rootComponentType).snapshot;return j=Object.assign(Object.assign({},xe),{targetSnapshot:fr,urlAfterRedirects:Ke,extras:Object.assign(Object.assign({},gn),{skipLocationChange:!1,replaceUrl:!1})}),(0,z.of)(j)}return this.rawUrlTree=xe.rawUrl,xe.resolve(null),Oe.E}),(0,Je.b)(xe=>{const Ct=new Zi(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(Ct)}),(0,je.U)(xe=>j=Object.assign(Object.assign({},xe),{guards:I(xe.targetSnapshot,xe.currentSnapshot,this.rootContexts)})),function io(A,x){return(0,he.zg)(C=>{const{targetSnapshot:N,currentSnapshot:j,guards:{canActivateChecks:re,canDeactivateChecks:Ae}}=C;return 0===Ae.length&&0===re.length?(0,z.of)(Object.assign(Object.assign({},C),{guardsResult:!0})):function L(A,x,C,N){return(0,se.D)(A).pipe((0,he.zg)(j=>function Lt(A,x,C,N,j){const re=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!re||0===re.length)return(0,z.of)(!0);const Ae=re.map(xe=>{var Ct;const P=null!==(Ct=eo(x))&&void 0!==Ct?Ct:j,U=R(xe,P);return Or(function ei(A){return A&&rn(A.canDeactivate)}(U)?U.canDeactivate(A,x,C,N):P.runInContext(()=>U(A,x,C,N))).pipe((0,Ie.P)())});return(0,z.of)(Ae).pipe(Ai())}(j.component,j.route,C,x,N)),(0,Ie.P)(j=>!0!==j,!0))}(Ae,N,j,A).pipe((0,he.zg)(xe=>xe&&function Mn(A){return"boolean"==typeof A}(xe)?function X(A,x,C,N){return(0,se.D)(x).pipe(Te(j=>(0,Qe.z)(function ie(A,x){return null!==A&&x&&x(new vi(A)),(0,z.of)(!0)}(j.route.parent,N),function $(A,x){return null!==A&&x&&x(new Qi(A)),(0,z.of)(!0)}(j.route,N),function Dt(A,x,C){const N=x[x.length-1],re=x.slice(0,x.length-1).reverse().map(Ae=>function y(A){const x=A.routeConfig?A.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:A,guards:x}:null}(Ae)).filter(Ae=>null!==Ae).map(Ae=>we(()=>{const xe=Ae.guards.map(Ct=>{var P;const U=null!==(P=eo(Ae.node))&&void 0!==P?P:C,J=R(Ct,U);return Or(function Mr(A){return A&&rn(A.canActivateChild)}(J)?J.canActivateChild(N,A):U.runInContext(()=>J(N,A))).pipe((0,Ie.P)())});return(0,z.of)(xe).pipe(Ai())}));return(0,z.of)(re).pipe(Ai())}(A,j.path,C),function Fe(A,x,C){const N=x.routeConfig?x.routeConfig.canActivate:null;if(!N||0===N.length)return(0,z.of)(!0);const j=N.map(re=>we(()=>{var Ae;const xe=null!==(Ae=eo(x))&&void 0!==Ae?Ae:C,Ct=R(re,xe);return Or(function Zn(A){return A&&rn(A.canActivate)}(Ct)?Ct.canActivate(x,A):xe.runInContext(()=>Ct(x,A))).pipe((0,Ie.P)())}));return(0,z.of)(j).pipe(Ai())}(A,j.route,C))),(0,Ie.P)(j=>!0!==j,!0))}(N,re,A,x):(0,z.of)(xe)),(0,je.U)(xe=>Object.assign(Object.assign({},C),{guardsResult:xe})))})}(this.ngModule.injector,xe=>this.triggerEvent(xe)),(0,Je.b)(xe=>{if(j.guardsResult=xe.guardsResult,Xr(xe.guardsResult))throw Ts(0,xe.guardsResult);const Ct=new Ms(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot,!!xe.guardsResult);this.triggerEvent(Ct)}),(0,te.h)(xe=>!!xe.guardsResult||(this.restoreHistory(xe),this.cancelNavigationTransition(xe,"",3),!1)),$n(xe=>{if(xe.guards.canActivateChecks.length)return(0,z.of)(xe).pipe((0,Je.b)(Ct=>{const P=new Is(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(P)}),(0,rt.w)(Ct=>{let P=!1;return(0,z.of)(Ct).pipe(function _o(A,x){return(0,he.zg)(C=>{const{targetSnapshot:N,guards:{canActivateChecks:j}}=C;if(!j.length)return(0,z.of)(C);let re=0;return(0,se.D)(j).pipe(Te(Ae=>function vl(A,x,C,N){const j=A.routeConfig,re=A._resolve;return void 0!==(null==j?void 0:j.title)&&!fa(j)&&(re[ur]=j.title),function sn(A,x,C,N){const j=function Ri(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===j.length)return(0,z.of)({});const re={};return(0,se.D)(j).pipe((0,he.zg)(Ae=>function ha(A,x,C,N){var j;const re=null!==(j=eo(x))&&void 0!==j?j:N,Ae=R(A,re);return Or(Ae.resolve?Ae.resolve(x,C):re.runInContext(()=>Ae(x,C)))}(A[Ae],x,C,N).pipe((0,Ie.P)(),(0,Je.b)(xe=>{re[Ae]=xe}))),at(1),function vr(A){return x=>x.lift(new Tr(A))}(re),Wt(Ae=>Ls(Ae)?Oe.E:(0,st._)(Ae)))}(re,A,x,N).pipe((0,je.U)(Ae=>(A._resolvedData=Ae,A.data=ro(A,C).resolve,j&&fa(j)&&(A.data[ur]=j.title),null)))}(Ae.route,N,A,x)),(0,Je.b)(()=>re++),at(1),(0,he.zg)(Ae=>re===j.length?(0,z.of)(C):Oe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Je.b)({next:()=>P=!0,complete:()=>{P||(this.restoreHistory(Ct),this.cancelNavigationTransition(Ct,"",2))}}))}),(0,Je.b)(Ct=>{const P=new ls(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(P)}))}),$n(xe=>{const Ct=P=>{var U;const J=[];(null===(U=P.routeConfig)||void 0===U?void 0:U.loadComponent)&&!P.routeConfig._loadedComponent&&J.push(this.configLoader.loadComponent(P.routeConfig).pipe((0,Je.b)(_e=>{P.component=_e}),(0,je.U)(()=>{})));for(const _e of P.children)J.push(...Ct(_e));return J};return oe(Ct(xe.targetSnapshot.root)).pipe((0,Nt.d)(),(0,Ee.q)(1))}),$n(()=>this.afterPreactivation()),(0,je.U)(xe=>{const Ct=function Pi(A,x,C){const N=Vi(A,x._root,C?C._root:void 0);return new us(N,x)}(this.routeReuseStrategy,xe.targetSnapshot,xe.currentRouterState);return j=Object.assign(Object.assign({},xe),{targetRouterState:Ct})}),(0,Je.b)(xe=>{this.currentUrlTree=xe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(xe.urlAfterRedirects,xe.rawUrl),this.routerState=xe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(xe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,xe),this.browserUrlTree=xe.urlAfterRedirects)}),((A,x,C)=>(0,je.U)(N=>(new V(x,N.targetRouterState,N.currentRouterState,C).activate(A),N)))(this.rootContexts,this.routeReuseStrategy,xe=>this.triggerEvent(xe)),(0,Je.b)({next(){re=!0},complete(){re=!0}}),qt(()=>{var xe;re||Ae||this.cancelNavigationTransition(j,"",1),(null===(xe=this.currentNavigation)||void 0===xe?void 0:xe.id)===j.id&&(this.currentNavigation=null)}),Wt(xe=>{var Ct;if(Ae=!0,Fr(xe)){Fs(xe)||(this.navigated=!0,this.restoreHistory(j,!0));const P=new fn(j.id,this.serializeUrl(j.extractedUrl),xe.message,xe.cancellationCode);if(N.next(P),Fs(xe)){const U=this.urlHandlingStrategy.merge(xe.url,this.rawUrlTree),J={skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Qo(j.source)};this.scheduleNavigation(U,"imperative",null,J,{resolve:j.resolve,reject:j.reject,promise:j.promise})}else j.resolve(!1)}else{this.restoreHistory(j,!0);const P=new Ir(j.id,this.serializeUrl(j.extractedUrl),xe,null!==(Ct=j.targetSnapshot)&&void 0!==Ct?Ct:void 0);N.next(P);try{j.resolve(this.errorHandler(xe))}catch(U){j.reject(U)}}return Oe.E}))}))}resetRootComponentType(C){this.rootComponentType=C,this.routerState.root.component=this.rootComponentType}setTransition(C){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),C))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const N="popstate"===C.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{var j;const re={replaceUrl:!0},Ae=null!==(j=C.state)&&void 0!==j&&j.navigationId?C.state:null;if(Ae){const Ct=Object.assign({},Ae);delete Ct.navigationId,delete Ct.\u0275routerPageId,0!==Object.keys(Ct).length&&(re.state=Ct)}const xe=this.parseUrl(C.url);this.scheduleNavigation(xe,N,Ae,re)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(C){this.events.next(C)}resetConfig(C){this.config=C.map(hr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,N={}){const{relativeTo:j,queryParams:re,fragment:Ae,queryParamsHandling:xe,preserveFragment:Ct}=N,P=j||this.routerState.root,U=Ct?this.currentUrlTree.fragment:Ae;let J=null;switch(xe){case"merge":J=Object.assign(Object.assign({},this.currentUrlTree.queryParams),re);break;case"preserve":J=this.currentUrlTree.queryParams;break;default:J=re||null}return null!==J&&(J=this.removeEmptyProps(J)),Li(P,this.currentUrlTree,C,J,null!=U?U:null)}navigateByUrl(C,N={skipLocationChange:!1}){const j=Xr(C)?C:this.parseUrl(C),re=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(re,"imperative",null,N)}navigate(C,N={skipLocationChange:!1}){return function or(A){for(let x=0;x<A.length;x++){if(null==A[x])throw new a.vHH(4008,false)}}(C),this.navigateByUrl(this.createUrlTree(C,N),N)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let N;try{N=this.urlSerializer.parse(C)}catch(j){N=this.malformedUriErrorHandler(j,this.urlSerializer,C)}return N}isActive(C,N){let j;if(j=!0===N?Object.assign({},Oo):!1===N?Object.assign({},br):N,Xr(C))return Gt(this.currentUrlTree,C,j);const re=this.parseUrl(C);return Gt(this.currentUrlTree,re,j)}removeEmptyProps(C){return Object.keys(C).reduce((N,j)=>{const re=C[j];return null!=re&&(N[j]=re),N},{})}processNavigations(){this.navigations.subscribe(C=>{var N;this.navigated=!0,this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId,this.events.next(new Xt(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(N=this.titleStrategy)||void 0===N||N.updateTitle(this.routerState.snapshot),C.resolve(!0)},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}scheduleNavigation(C,N,j,re,Ae){var xe,Ct;if(this.disposed)return Promise.resolve(!1);let P,U,J;Ae?(P=Ae.resolve,U=Ae.reject,J=Ae.promise):J=new Promise((wt,Yt)=>{P=wt,U=Yt});const _e=++this.navigationId;let Ke;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(j=this.location.getState()),Ke=j&&j.\u0275routerPageId?j.\u0275routerPageId:re.replaceUrl||re.skipLocationChange?null!==(xe=this.browserPageId)&&void 0!==xe?xe:0:(null!==(Ct=this.browserPageId)&&void 0!==Ct?Ct:0)+1):Ke=0,this.setTransition({id:_e,targetPageId:Ke,source:N,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:C,extras:re,resolve:P,reject:U,promise:J,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),J.catch(wt=>Promise.reject(wt))}setBrowserUrl(C,N){const j=this.urlSerializer.serialize(C),re=Object.assign(Object.assign({},N.extras.state),this.generateNgRouterState(N.id,N.targetPageId));this.location.isCurrentPathEqualTo(j)||N.extras.replaceUrl?this.location.replaceState(j,"",re):this.location.go(j,"",re)}restoreHistory(C,N=!1){var j,re;if("computed"===this.canceledNavigationResolution){const Ae=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)||0===Ae?this.currentUrlTree===(null===(re=this.currentNavigation)||void 0===re?void 0:re.finalUrl)&&0===Ae&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ae)}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(C,N,j){const re=new fn(C.id,this.serializeUrl(C.extractedUrl),N,j);this.triggerEvent(re),C.resolve(!1)}generateNgRouterState(C,N){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:N}:{navigationId:C}}}return A.\u0275fac=function(C){a.$Z()},A.\u0275prov=a.Yz7({token:A,factory:function(){return ka()},providedIn:"root"}),A})();function Qo(A){return"imperative"!==A}let Qn=(()=>{class A{constructor(C,N,j,re,Ae){this.router=C,this.route=N,this.tabIndexAttribute=j,this.renderer=re,this.el=Ae,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new yt.xQ,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(C){this._preserveFragment=(0,a.D6c)(C)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(C){this._skipLocationChange=(0,a.D6c)(C)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(C){this._replaceUrl=(0,a.D6c)(C)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(C){if(null!=this.tabIndexAttribute)return;const N=this.renderer,j=this.el.nativeElement;null!==C?N.setAttribute(j,"tabindex",C):N.removeAttribute(j,"tabindex")}ngOnChanges(C){this.onChanges.next(this)}set routerLink(C){null!=C?(this.commands=Array.isArray(C)?C:[C],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(C){return new(C||A)(a.Y36(Pr),a.Y36(ds),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},A.\u0275dir=a.lG2({type:A,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(C,N){1&C&&a.NdJ("click",function(){return N.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[a.TTD]}),A})();class Nl{}let gu=(()=>{class A{preload(C,N){return N().pipe(Wt(()=>(0,z.of)(null)))}}return A.\u0275fac=function(C){return new(C||A)},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),mu=(()=>{class A{constructor(C,N,j,re,Ae){this.router=C,this.injector=j,this.preloadingStrategy=re,this.loader=Ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,te.h)(C=>C instanceof Xt),Te(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,N){var j,re,Ae;const xe=[];for(const Ct of N){Ct.providers&&!Ct._injector&&(Ct._injector=(0,a.MMx)(Ct.providers,C,`Route: ${Ct.path}`));const P=null!==(j=Ct._injector)&&void 0!==j?j:C,U=null!==(re=Ct._loadedInjector)&&void 0!==re?re:P;Ct.loadChildren&&!Ct._loadedRoutes&&void 0===Ct.canLoad||Ct.loadComponent&&!Ct._loadedComponent?xe.push(this.preloadConfig(P,Ct)):(Ct.children||Ct._loadedRoutes)&&xe.push(this.processRoutes(U,null!==(Ae=Ct.children)&&void 0!==Ae?Ae:Ct._loadedRoutes))}return(0,se.D)(xe).pipe((0,nr.J)())}preloadConfig(C,N){return this.preloadingStrategy.preload(N,()=>{let j;j=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(C,N):(0,z.of)(null);const re=j.pipe((0,he.zg)(Ae=>{var xe;return null===Ae?(0,z.of)(void 0):(N._loadedRoutes=Ae.routes,N._loadedInjector=Ae.injector,this.processRoutes(null!==(xe=Ae.injector)&&void 0!==xe?xe:C,Ae.routes))}));if(N.loadComponent&&!N._loadedComponent){const Ae=this.loader.loadComponent(N);return(0,se.D)([re,Ae]).pipe((0,nr.J)())}return re})}}return A.\u0275fac=function(C){return new(C||A)(a.LFG(Pr),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(Nl),a.LFG(Rl))},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Xo=new a.OlP("");let yu=(()=>{class A{constructor(C,N,j={}){this.router=C,this.viewportScroller=N,this.options=j,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},j.scrollPositionRestoration=j.scrollPositionRestoration||"disabled",j.anchorScrolling=j.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Ht?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof Xt&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.router.parseUrl(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Bi&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,N){this.router.triggerEvent(new Bi(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(C){a.$Z()},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac}),A})();function ps(A,x){return{\u0275kind:A,\u0275providers:x}}function El(A){return[{provide:Ml,multi:!0,useValue:A}]}function lo(){const A=(0,a.f3M)(a.zs3);return x=>{var C,N;const j=A.get(a.z2F);if(x!==j.components[0])return;const re=A.get(Pr),Ae=A.get(Ns);1===A.get(ll)&&re.initialNavigation(),null===(C=A.get(Jl,null,a.XFs.Optional))||void 0===C||C.setUpPreloading(),null===(N=A.get(Xo,null,a.XFs.Optional))||void 0===N||N.init(),re.resetRootComponentType(j.componentTypes[0]),Ae.next(),Ae.complete()}}const Ns=new a.OlP("",{factory:()=>new yt.xQ}),ll=new a.OlP("",{providedIn:"root",factory:()=>1});const Jl=new a.OlP("");function ga(A){return ps(0,[{provide:Jl,useExisting:mu},{provide:Nl,useExisting:A}])}const Vs=new a.OlP("ROUTER_FORROOT_GUARD"),Za=[kt.Ye,{provide:Er,useClass:Sr},{provide:Pr,useFactory:ka},xr,{provide:ds,useFactory:function Ka(A){return A.routerState.root},deps:[Pr]},Rl];function Na(){return new a.PXZ("Router",Pr)}let Uu=(()=>{class A{constructor(C){}static forRoot(C,N){return{ngModule:A,providers:[Za,[],El(C),{provide:Vs,useFactory:Ll,deps:[[Pr,new a.FiY,new a.tp0]]},{provide:Ca,useValue:N||{}},null!=N&&N.useHash?{provide:kt.S$,useClass:kt.Do}:{provide:kt.S$,useClass:kt.b0},{provide:Xo,useFactory:()=>{const A=(0,a.f3M)(Pr),x=(0,a.f3M)(kt.EM),C=(0,a.f3M)(Ca);return C.scrollOffset&&x.setOffset(C.scrollOffset),new yu(A,x,C)}},null!=N&&N.preloadingStrategy?ga(N.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:Na},null!=N&&N.initialNavigation?Oi(N):[],[{provide:uo,useFactory:lo},{provide:a.tb,multi:!0,useExisting:uo}]]}}static forChild(C){return{ngModule:A,providers:[El(C)]}}}return A.\u0275fac=function(C){return new(C||A)(a.LFG(Vs,8))},A.\u0275mod=a.oAB({type:A}),A.\u0275inj=a.cJS({imports:[Ao]}),A})();function Ll(A){return"guarded"}function Oi(A){return["disabled"===A.initialNavigation?ps(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const x=(0,a.f3M)(Pr);return()=>{x.setUpLocationChangeListener()}}},{provide:ll,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?ps(2,[{provide:ll,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:x=>{const C=x.get(kt.V_,Promise.resolve());let N=!1;return()=>C.then(()=>new Promise(re=>{const Ae=x.get(Pr),xe=x.get(Ns);(function j(re){x.get(Pr).events.pipe((0,te.h)(xe=>xe instanceof Xt||xe instanceof fn||xe instanceof Ir),(0,je.U)(xe=>xe instanceof Xt||xe instanceof fn&&(0===xe.code||1===xe.code)&&null),(0,te.h)(xe=>null!==xe),(0,Ee.q)(1)).subscribe(()=>{re()})})(()=>{re(!0),N=!0}),Ae.afterPreactivation=()=>(re(!0),N||xe.closed?(0,z.of)(void 0):xe),Ae.initialNavigation()}))}}]).\u0275providers:[]]}const uo=new a.OlP("")},3942:(on,ut,H)=>{"use strict";H.d(ut,{Z:()=>Qe});var a=H(2090),se=H(4859),z=H(9681),Le=H(1877);class Ne{constructor(Oe,we){this._delegate=Oe,this.firebase=we,(0,z._addComponent)(Oe,new se.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(Oe,we=z._DEFAULT_ENTRY_NAME){var dt;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(Oe);return!st.isInitialized()&&"EXPLICIT"===(null===(dt=st.getComponent())||void 0===dt?void 0:dt.instantiationMode)&&st.initialize(),st.getImmediate({identifier:we})}_removeServiceInstance(Oe,we=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance(we)}_addComponent(Oe){(0,z._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,z._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ue=function be(){const nt=function ge(nt){const Oe={},we={__esModule:!0,initializeApp:function ht(rt,Ee={}){const Z=z.initializeApp(rt,Ee);if((0,a.r3)(Oe,Z.name))return Oe[Z.name];const te=new nt(Z,we);return Oe[Z.name]=te,te},app:st,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function kt(rt){const Ee=rt.name,Z=Ee.replace("-compat","");if(z._registerComponent(rt)&&"PUBLIC"===rt.type){const te=(he=st())=>{if("function"!=typeof he[Z])throw ve.create("invalid-app-argument",{appName:Ee});return he[Z]()};void 0!==rt.serviceProps&&(0,a.ZB)(te,rt.serviceProps),we[Z]=te,nt.prototype[Z]=function(...he){return this._getService.bind(this,Ee).apply(this,rt.multipleInstances?he:[])}}return"PUBLIC"===rt.type?we[Z]:null},removeApp:function dt(rt){delete Oe[rt]},useAsService:function je(rt,Ee){return"serverAuth"===Ee?null:Ee},modularAPIs:z}};function st(rt){if(!(0,a.r3)(Oe,rt=rt||z._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:rt});return Oe[rt]}return we.default=we,Object.defineProperty(we,"apps",{get:function yt(){return Object.keys(Oe).map(rt=>Oe[rt])}}),st.App=nt,we}(Ne);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function Oe(we){(0,a.ZB)(nt,we)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),nt}(),de=new Le.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=ue;!function Ue(nt){(0,z.registerVersion)("@firebase/app-compat","0.1.37",nt)}()},9681:(on,ut,H)=>{"use strict";H.r(ut),H.d(ut,{FirebaseError:()=>Le.ZR,SDK_VERSION:()=>En,_DEFAULT_ENTRY_NAME:()=>ot,_addComponent:()=>at,_addOrOverwriteComponent:()=>gt,_apps:()=>$e,_clearComponents:()=>cn,_components:()=>Xe,_getProvider:()=>Ut,_registerComponent:()=>ft,_removeServiceInstance:()=>Nt,deleteApp:()=>er,getApp:()=>Tr,getApps:()=>Wr,initializeApp:()=>vr,onLog:()=>Qr,registerVersion:()=>Yn,setLogLevel:()=>Un});var a=H(5861),se=H(4859),z=H(1877),Le=H(2090),Ne=H(8766);class fe{constructor(Gt){this.container=Gt}getPlatformInfoString(){return this.container.getProviders().map(mn=>{if(function ve(wn){const Gt=wn.getComponent();return"VERSION"===(null==Gt?void 0:Gt.type)}(mn)){const Nn=mn.getImmediate();return`${Nn.library}/${Nn.version}`}return null}).filter(mn=>mn).join(" ")}}const ge="@firebase/app",ue=new z.Yd("@firebase/app"),ot="[DEFAULT]",De={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},$e=new Map,Xe=new Map;function at(wn,Gt){try{wn.container.addComponent(Gt)}catch(mn){ue.debug(`Component ${Gt.name} failed to register with FirebaseApp ${wn.name}`,mn)}}function gt(wn,Gt){wn.container.addOrOverwriteComponent(Gt)}function ft(wn){const Gt=wn.name;if(Xe.has(Gt))return ue.debug(`There were multiple attempts to register component ${Gt}.`),!1;Xe.set(Gt,wn);for(const mn of $e.values())at(mn,wn);return!0}function Ut(wn,Gt){const mn=wn.container.getProvider("heartbeat").getImmediate({optional:!0});return mn&&mn.triggerHeartbeat(),wn.container.getProvider(Gt)}function Nt(wn,Gt,mn=ot){Ut(wn,Gt).clearInstance(mn)}function cn(){Xe.clear()}const Jn=new Le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yn{constructor(Gt,mn,Nn){this._isDeleted=!1,this._options=Object.assign({},Gt),this._config=Object.assign({},mn),this._name=mn.name,this._automaticDataCollectionEnabled=mn.automaticDataCollectionEnabled,this._container=Nn,this.container.addComponent(new se.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Gt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Gt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Gt){this._isDeleted=Gt}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}const En="9.12.1";function vr(wn,Gt={}){let mn=wn;"object"!=typeof Gt&&(Gt={name:Gt});const Nn=Object.assign({name:ot,automaticDataCollectionEnabled:!1},Gt),xn=Nn.name;if("string"!=typeof xn||!xn)throw Jn.create("bad-app-name",{appName:String(xn)});if(mn||(mn=(0,Le.aH)()),!mn)throw Jn.create("no-options");const jn=$e.get(xn);if(jn){if((0,Le.vZ)(mn,jn.options)&&(0,Le.vZ)(Nn,jn.config))return jn;throw Jn.create("duplicate-app",{appName:xn})}const Ve=new se.H0(xn);for(const He of Xe.values())Ve.addComponent(He);const Pe=new yn(mn,Nn,Ve);return $e.set(xn,Pe),Pe}function Tr(wn=ot){const Gt=$e.get(wn);if(!Gt&&wn===ot)return vr();if(!Gt)throw Jn.create("no-app",{appName:wn});return Gt}function Wr(){return Array.from($e.values())}function er(wn){return qt.apply(this,arguments)}function qt(){return(qt=(0,a.Z)(function*(wn){const Gt=wn.name;$e.has(Gt)&&($e.delete(Gt),yield Promise.all(wn.container.getProviders().map(mn=>mn.delete())),wn.isDeleted=!0)})).apply(this,arguments)}function Yn(wn,Gt,mn){var Nn;let xn=null!==(Nn=De[wn])&&void 0!==Nn?Nn:wn;mn&&(xn+=`-${mn}`);const jn=xn.match(/\s|\//),Ve=Gt.match(/\s|\//);if(jn||Ve){const Pe=[`Unable to register library "${xn}" with version "${Gt}":`];return jn&&Pe.push(`library name "${xn}" contains illegal characters (whitespace or "/")`),jn&&Ve&&Pe.push("and"),Ve&&Pe.push(`version name "${Gt}" contains illegal characters (whitespace or "/")`),void ue.warn(Pe.join(" "))}ft(new se.wA(`${xn}-version`,()=>({library:xn,version:Gt}),"VERSION"))}function Qr(wn,Gt){if(null!==wn&&"function"!=typeof wn)throw Jn.create("invalid-log-argument");(0,z.Am)(wn,Gt)}function Un(wn){(0,z.Ub)(wn)}const an="firebase-heartbeat-store";let ur=null;function Tn(){return ur||(ur=(0,Ne.X3)("firebase-heartbeat-database",1,{upgrade:(wn,Gt)=>{0===Gt&&wn.createObjectStore(an)}}).catch(wn=>{throw Jn.create("idb-open",{originalErrorMessage:wn.message})})),ur}function St(){return(St=(0,a.Z)(function*(wn){var Gt;try{return(yield Tn()).transaction(an).objectStore(an).get(wr(wn))}catch(mn){if(mn instanceof Le.ZR)ue.warn(mn.message);else{const Nn=Jn.create("idb-get",{originalErrorMessage:null===(Gt=mn)||void 0===Gt?void 0:Gt.message});ue.warn(Nn.message)}}})).apply(this,arguments)}function gr(wn,Gt){return mr.apply(this,arguments)}function mr(){return(mr=(0,a.Z)(function*(wn,Gt){var mn;try{const xn=(yield Tn()).transaction(an,"readwrite");return yield xn.objectStore(an).put(Gt,wr(wn)),xn.done}catch(Nn){if(Nn instanceof Le.ZR)ue.warn(Nn.message);else{const xn=Jn.create("idb-set",{originalErrorMessage:null===(mn=Nn)||void 0===mn?void 0:mn.message});ue.warn(xn.message)}}})).apply(this,arguments)}function wr(wn){return`${wn.name}!${wn.options.appId}`}class ki{constructor(Gt){this.container=Gt,this._heartbeatsCache=null;const mn=this.container.getProvider("app").getImmediate();this._storage=new cr(mn),this._heartbeatsCachePromise=this._storage.read().then(Nn=>(this._heartbeatsCache=Nn,Nn))}triggerHeartbeat(){var Gt=this;return(0,a.Z)(function*(){const Nn=Gt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xn=On();if(null===Gt._heartbeatsCache&&(Gt._heartbeatsCache=yield Gt._heartbeatsCachePromise),Gt._heartbeatsCache.lastSentHeartbeatDate!==xn&&!Gt._heartbeatsCache.heartbeats.some(jn=>jn.date===xn))return Gt._heartbeatsCache.heartbeats.push({date:xn,agent:Nn}),Gt._heartbeatsCache.heartbeats=Gt._heartbeatsCache.heartbeats.filter(jn=>{const Ve=new Date(jn.date).valueOf();return Date.now()-Ve<=2592e6}),Gt._storage.overwrite(Gt._heartbeatsCache)})()}getHeartbeatsHeader(){var Gt=this;return(0,a.Z)(function*(){if(null===Gt._heartbeatsCache&&(yield Gt._heartbeatsCachePromise),null===Gt._heartbeatsCache||0===Gt._heartbeatsCache.heartbeats.length)return"";const mn=On(),{heartbeatsToSend:Nn,unsentEntries:xn}=function Or(wn,Gt=1024){const mn=[];let Nn=wn.slice();for(const xn of wn){const jn=mn.find(Ve=>Ve.agent===xn.agent);if(jn){if(jn.dates.push(xn.date),jr(mn)>Gt){jn.dates.pop();break}}else if(mn.push({agent:xn.agent,dates:[xn.date]}),jr(mn)>Gt){mn.pop();break}Nn=Nn.slice(1)}return{heartbeatsToSend:mn,unsentEntries:Nn}}(Gt._heartbeatsCache.heartbeats),jn=(0,Le.L)(JSON.stringify({version:2,heartbeats:Nn}));return Gt._heartbeatsCache.lastSentHeartbeatDate=mn,xn.length>0?(Gt._heartbeatsCache.heartbeats=xn,yield Gt._storage.overwrite(Gt._heartbeatsCache)):(Gt._heartbeatsCache.heartbeats=[],Gt._storage.overwrite(Gt._heartbeatsCache)),jn})()}}function On(){return(new Date).toISOString().substring(0,10)}class cr{constructor(Gt){this.app=Gt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,Le.hl)()&&(0,Le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Gt=this;return(0,a.Z)(function*(){return(yield Gt._canUseIndexedDBPromise)&&(yield function In(wn){return St.apply(this,arguments)}(Gt.app))||{heartbeats:[]}})()}overwrite(Gt){var mn=this;return(0,a.Z)(function*(){var Nn;if(yield mn._canUseIndexedDBPromise){const jn=yield mn.read();return gr(mn.app,{lastSentHeartbeatDate:null!==(Nn=Gt.lastSentHeartbeatDate)&&void 0!==Nn?Nn:jn.lastSentHeartbeatDate,heartbeats:Gt.heartbeats})}})()}add(Gt){var mn=this;return(0,a.Z)(function*(){var Nn;if(yield mn._canUseIndexedDBPromise){const jn=yield mn.read();return gr(mn.app,{lastSentHeartbeatDate:null!==(Nn=Gt.lastSentHeartbeatDate)&&void 0!==Nn?Nn:jn.lastSentHeartbeatDate,heartbeats:[...jn.heartbeats,...Gt.heartbeats]})}})()}}function jr(wn){return(0,Le.L)(JSON.stringify({version:2,heartbeats:wn})).length}!function ai(wn){ft(new se.wA("platform-logger",Gt=>new fe(Gt),"PRIVATE")),ft(new se.wA("heartbeat",Gt=>new ki(Gt),"PRIVATE")),Yn(ge,"0.8.2",wn),Yn(ge,"0.8.2","esm2017"),Yn("fire-js","")}("")},4859:(on,ut,H)=>{"use strict";H.d(ut,{H0:()=>ge,wA:()=>z,zt:()=>Ne});var a=H(5861),se=H(2090);class z{constructor(ue,de,oe){this.name=ue,this.instanceFactory=de,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ue){return this.instantiationMode=ue,this}setMultipleInstances(ue){return this.multipleInstances=ue,this}setServiceProps(ue){return this.serviceProps=ue,this}setInstanceCreatedCallback(ue){return this.onInstanceCreated=ue,this}}const Le="[DEFAULT]";class Ne{constructor(ue,de){this.name=ue,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ue){const de=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(de)){const oe=new se.BH;if(this.instancesDeferred.set(de,oe),this.isInitialized(de)||this.shouldAutoInitialize())try{const pe=this.getOrInitializeService({instanceIdentifier:de});pe&&oe.resolve(pe)}catch(pe){}}return this.instancesDeferred.get(de).promise}getImmediate(ue){var de;const oe=this.normalizeInstanceIdentifier(null==ue?void 0:ue.identifier),pe=null!==(de=null==ue?void 0:ue.optional)&&void 0!==de&&de;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(Ue){if(pe)return null;throw Ue}}getComponent(){return this.component}setComponent(ue){if(ue.name!==this.name)throw Error(`Mismatching Component ${ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ue,this.shouldAutoInitialize()){if(function ve(be){return"EAGER"===be.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:Le})}catch(de){}for(const[de,oe]of this.instancesDeferred.entries()){const pe=this.normalizeInstanceIdentifier(de);try{const Ue=this.getOrInitializeService({instanceIdentifier:pe});oe.resolve(Ue)}catch(Ue){}}}}clearInstance(ue=Le){this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)}delete(){var ue=this;return(0,a.Z)(function*(){const de=Array.from(ue.instances.values());yield Promise.all([...de.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...de.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ue=Le){return this.instances.has(ue)}getOptions(ue=Le){return this.instancesOptions.get(ue)||{}}initialize(ue={}){const{options:de={}}=ue,oe=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const pe=this.getOrInitializeService({instanceIdentifier:oe,options:de});for(const[Ue,Qe]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(Ue)&&Qe.resolve(pe);return pe}onInit(ue,de){var oe;const pe=this.normalizeInstanceIdentifier(de),Ue=null!==(oe=this.onInitCallbacks.get(pe))&&void 0!==oe?oe:new Set;Ue.add(ue),this.onInitCallbacks.set(pe,Ue);const Qe=this.instances.get(pe);return Qe&&ue(Qe,pe),()=>{Ue.delete(ue)}}invokeOnInitCallbacks(ue,de){const oe=this.onInitCallbacks.get(de);if(oe)for(const pe of oe)try{pe(ue,de)}catch(Ue){}}getOrInitializeService({instanceIdentifier:ue,options:de={}}){let oe=this.instances.get(ue);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(be=ue,be===Le?void 0:be),options:de}),this.instances.set(ue,oe),this.instancesOptions.set(ue,de),this.invokeOnInitCallbacks(oe,ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ue,oe)}catch(pe){}var be;return oe||null}normalizeInstanceIdentifier(ue=Le){return this.component?this.component.multipleInstances?ue:Le:ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(ue){this.name=ue,this.providers=new Map}addComponent(ue){const de=this.getProvider(ue.name);if(de.isComponentSet())throw new Error(`Component ${ue.name} has already been registered with ${this.name}`);de.setComponent(ue)}addOrOverwriteComponent(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)}getProvider(ue){if(this.providers.has(ue))return this.providers.get(ue);const de=new Ne(ue,this);return this.providers.set(ue,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(on,ut,H)=>{"use strict";H.d(ut,{Am:()=>be,Ub:()=>ge,Yd:()=>ve,in:()=>se});const a=[];var se=(()=>{return(ue=se||(se={}))[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT",se;var ue})();const z={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},Le=se.INFO,Ne={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},fe=(ue,de,...oe)=>{if(de<ue.logLevel)return;const pe=(new Date).toISOString(),Ue=Ne[de];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[Ue](`[${pe}]  ${ue.name}:`,...oe)};class ve{constructor(de){this.name=de,this._logLevel=Le,this._logHandler=fe,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in se))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?z[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...de),this._logHandler(this,se.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...de),this._logHandler(this,se.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,se.INFO,...de),this._logHandler(this,se.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,se.WARN,...de),this._logHandler(this,se.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...de),this._logHandler(this,se.ERROR,...de)}}function ge(ue){a.forEach(de=>{de.setLogLevel(ue)})}function be(ue,de){for(const oe of a){let pe=null;de&&de.level&&(pe=z[de.level]),oe.userLogHandler=null===ue?null:(Ue,Qe,...nt)=>{const Oe=nt.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(dt){return null}}).filter(we=>we).join(" ");Qe>=(null!=pe?pe:Ue.logLevel)&&ue({level:se[Qe].toLowerCase(),message:Oe,args:nt,type:Ue.name})}}}},8766:(on,ut,H)=>{"use strict";H.d(ut,{Lj:()=>ht,X3:()=>st});var a=H(5861);let z,Le;const ve=new WeakMap,ge=new WeakMap,be=new WeakMap,ue=new WeakMap,de=new WeakMap;let Ue={get(Ee,Z,te){if(Ee instanceof IDBTransaction){if("done"===Z)return ge.get(Ee);if("objectStoreNames"===Z)return Ee.objectStoreNames||be.get(Ee);if("store"===Z)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return we(Ee[Z])},set:(Ee,Z,te)=>(Ee[Z]=te,!0),has:(Ee,Z)=>Ee instanceof IDBTransaction&&("done"===Z||"store"===Z)||Z in Ee};function Oe(Ee){return"function"==typeof Ee?function nt(Ee){return Ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return Le||(Le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ee)?function(...Z){return Ee.apply(dt(this),Z),we(ve.get(this))}:function(...Z){return we(Ee.apply(dt(this),Z))}:function(Z,...te){const he=Ee.call(dt(this),Z,...te);return be.set(he,Z.sort?Z.sort():[Z]),we(he)}}(Ee):(Ee instanceof IDBTransaction&&function pe(Ee){if(ge.has(Ee))return;const Z=new Promise((te,he)=>{const Ie=()=>{Ee.removeEventListener("complete",Te),Ee.removeEventListener("error",Je),Ee.removeEventListener("abort",Je)},Te=()=>{te(),Ie()},Je=()=>{he(Ee.error||new DOMException("AbortError","AbortError")),Ie()};Ee.addEventListener("complete",Te),Ee.addEventListener("error",Je),Ee.addEventListener("abort",Je)});ge.set(Ee,Z)}(Ee),((Ee,Z)=>Z.some(te=>Ee instanceof te))(Ee,function Ne(){return z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ee,Ue):Ee)}function we(Ee){if(Ee instanceof IDBRequest)return function oe(Ee){const Z=new Promise((te,he)=>{const Ie=()=>{Ee.removeEventListener("success",Te),Ee.removeEventListener("error",Je)},Te=()=>{te(we(Ee.result)),Ie()},Je=()=>{he(Ee.error),Ie()};Ee.addEventListener("success",Te),Ee.addEventListener("error",Je)});return Z.then(te=>{te instanceof IDBCursor&&ve.set(te,Ee)}).catch(()=>{}),de.set(Z,Ee),Z}(Ee);if(ue.has(Ee))return ue.get(Ee);const Z=Oe(Ee);return Z!==Ee&&(ue.set(Ee,Z),de.set(Z,Ee)),Z}const dt=Ee=>de.get(Ee);function st(Ee,Z,{blocked:te,upgrade:he,blocking:Ie,terminated:Te}={}){const Je=indexedDB.open(Ee,Z),Ot=we(Je);return he&&Je.addEventListener("upgradeneeded",Wt=>{he(we(Je.result),Wt.oldVersion,Wt.newVersion,we(Je.transaction))}),te&&Je.addEventListener("blocked",()=>te()),Ot.then(Wt=>{Te&&Wt.addEventListener("close",()=>Te()),Ie&&Wt.addEventListener("versionchange",()=>Ie())}).catch(()=>{}),Ot}function ht(Ee,{blocked:Z}={}){const te=indexedDB.deleteDatabase(Ee);return Z&&te.addEventListener("blocked",()=>Z()),we(te).then(()=>{})}const yt=["get","getKey","getAll","getAllKeys","count"],kt=["put","add","delete","clear"],je=new Map;function rt(Ee,Z){if(!(Ee instanceof IDBDatabase)||Z in Ee||"string"!=typeof Z)return;if(je.get(Z))return je.get(Z);const te=Z.replace(/FromIndex$/,""),he=Z!==te,Ie=kt.includes(te);if(!(te in(he?IDBIndex:IDBObjectStore).prototype)||!Ie&&!yt.includes(te))return;const Te=function(){var Je=(0,a.Z)(function*(Ot,...Wt){const ze=this.transaction(Ot,Ie?"readwrite":"readonly");let ot=ze.store;return he&&(ot=ot.index(Wt.shift())),(yield Promise.all([ot[te](...Wt),Ie&&ze.done]))[0]});return function(Wt){return Je.apply(this,arguments)}}();return je.set(Z,Te),Te}!function Qe(Ee){Ue=Ee(Ue)}(Ee=>ub(lb({},Ee),{get:(Z,te,he)=>rt(Z,te)||Ee.get(Z,te,he),has:(Z,te)=>!!rt(Z,te)||Ee.has(Z,te)}))},5861:(on,ut,H)=>{"use strict";function a(z,Le,Ne,fe,ve,ge,be){try{var ue=z[ge](be),de=ue.value}catch(oe){return void Ne(oe)}ue.done?Le(de):Promise.resolve(de).then(fe,ve)}function se(z){return function(){var Le=this,Ne=arguments;return new Promise(function(fe,ve){var ge=z.apply(Le,Ne);function be(de){a(ge,fe,ve,be,ue,"next",de)}function ue(de){a(ge,fe,ve,be,ue,"throw",de)}be(void 0)})}}H.d(ut,{Z:()=>se})}},on=>{on(on.s=2261)}]);